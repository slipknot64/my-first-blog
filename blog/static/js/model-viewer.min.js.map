{"version":3,"file":"model-viewer.min.js","sources":["model-viewer.js"],"sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nconst marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = window.trustedTypes &&\n    trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // event options not supported\n    }\n})();\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nif (typeof window.ShadyCSS === 'undefined') ;\nelse if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n    console.warn(`Incompatible ShadyCSS version detected. ` +\n        `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n        `@webcomponents/shadycss@1.3.1.`);\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar _a;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    (prop, _obj) => prop;\nconst defaultConverter = {\n    toAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value ? '' : null;\n            case Object:\n            case Array:\n                // if the value is `null` or `undefined` pass this through\n                // to allow removing/no change behavior.\n                return value == null ? value : JSON.stringify(value);\n        }\n        return value;\n    },\n    fromAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value !== null;\n            case Number:\n                return value === null ? null : Number(value);\n            case Object:\n            case Array:\n                return JSON.parse(value);\n        }\n        return value;\n    }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nconst notEqual = (value, old) => {\n    // This ensures (old==NaN, value==NaN) always returns false\n    return old !== value && (old === old || value === value);\n};\nconst defaultPropertyDeclaration = {\n    attribute: true,\n    type: String,\n    converter: defaultConverter,\n    reflect: false,\n    hasChanged: notEqual\n};\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nclass UpdatingElement extends HTMLElement {\n    constructor() {\n        super();\n        this.initialize();\n    }\n    /**\n     * Returns a list of attributes corresponding to the registered properties.\n     * @nocollapse\n     */\n    static get observedAttributes() {\n        // note: piggy backing on this to ensure we're finalized.\n        this.finalize();\n        const attributes = [];\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this._classProperties.forEach((v, p) => {\n            const attr = this._attributeNameForProperty(p, v);\n            if (attr !== undefined) {\n                this._attributeToPropertyMap.set(attr, p);\n                attributes.push(attr);\n            }\n        });\n        return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n    /** @nocollapse */\n    static _ensureClassProperties() {\n        // ensure private storage for property declarations.\n        if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n            this._classProperties = new Map();\n            // NOTE: Workaround IE11 not supporting Map constructor argument.\n            const superProperties = Object.getPrototypeOf(this)._classProperties;\n            if (superProperties !== undefined) {\n                superProperties.forEach((v, k) => this._classProperties.set(k, v));\n            }\n        }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n    static createProperty(name, options = defaultPropertyDeclaration) {\n        // Note, since this can be called by the `@property` decorator which\n        // is called before `finalize`, we ensure storage exists for property\n        // metadata.\n        this._ensureClassProperties();\n        this._classProperties.set(name, options);\n        // Do not generate an accessor if the prototype already has one, since\n        // it would be lost otherwise and that would never be the user's intention;\n        // Instead, we expect users to call `requestUpdate` themselves from\n        // user-defined accessors. Note that if the super has an accessor we will\n        // still overwrite it\n        if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n            return;\n        }\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        const descriptor = this.getPropertyDescriptor(name, key, options);\n        if (descriptor !== undefined) {\n            Object.defineProperty(this.prototype, name, descriptor);\n        }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n    static getPropertyDescriptor(name, key, options) {\n        return {\n            // tslint:disable-next-line:no-any no symbol in index\n            get() {\n                return this[key];\n            },\n            set(value) {\n                const oldValue = this[name];\n                this[key] = value;\n                this\n                    .requestUpdateInternal(name, oldValue, options);\n            },\n            configurable: true,\n            enumerable: true\n        };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n    static getPropertyOptions(name) {\n        return this._classProperties && this._classProperties.get(name) ||\n            defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n    static finalize() {\n        // finalize any superclasses\n        const superCtor = Object.getPrototypeOf(this);\n        if (!superCtor.hasOwnProperty(finalized)) {\n            superCtor.finalize();\n        }\n        this[finalized] = true;\n        this._ensureClassProperties();\n        // initialize Map populated in observedAttributes\n        this._attributeToPropertyMap = new Map();\n        // make any properties\n        // Note, only process \"own\" properties since this element will inherit\n        // any properties defined on the superClass, and finalization ensures\n        // the entire prototype chain is finalized.\n        if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n            const props = this.properties;\n            // support symbols in properties (IE11 does not support this)\n            const propKeys = [\n                ...Object.getOwnPropertyNames(props),\n                ...(typeof Object.getOwnPropertySymbols === 'function') ?\n                    Object.getOwnPropertySymbols(props) :\n                    []\n            ];\n            // This for/of is ok because propKeys is an array\n            for (const p of propKeys) {\n                // note, use of `any` is due to TypeSript lack of support for symbol in\n                // index types\n                // tslint:disable-next-line:no-any no symbol in index\n                this.createProperty(p, props[p]);\n            }\n        }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n    static _attributeNameForProperty(name, options) {\n        const attribute = options.attribute;\n        return attribute === false ?\n            undefined :\n            (typeof attribute === 'string' ?\n                attribute :\n                (typeof name === 'string' ? name.toLowerCase() : undefined));\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n    static _valueHasChanged(value, old, hasChanged = notEqual) {\n        return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n    static _propertyValueFromAttribute(value, options) {\n        const type = options.type;\n        const converter = options.converter || defaultConverter;\n        const fromAttribute = (typeof converter === 'function' ? converter : converter.fromAttribute);\n        return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n    static _propertyValueToAttribute(value, options) {\n        if (options.reflect === undefined) {\n            return;\n        }\n        const type = options.type;\n        const converter = options.converter;\n        const toAttribute = converter && converter.toAttribute ||\n            defaultConverter.toAttribute;\n        return toAttribute(value, type);\n    }\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    initialize() {\n        this._updateState = 0;\n        this._updatePromise =\n            new Promise((res) => this._enableUpdatingResolver = res);\n        this._changedProperties = new Map();\n        this._saveInstanceProperties();\n        // ensures first update will be caught by an early access of\n        // `updateComplete`\n        this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n    _saveInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this.constructor\n            ._classProperties.forEach((_v, p) => {\n            if (this.hasOwnProperty(p)) {\n                const value = this[p];\n                delete this[p];\n                if (!this._instanceProperties) {\n                    this._instanceProperties = new Map();\n                }\n                this._instanceProperties.set(p, value);\n            }\n        });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n    _applyInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        // tslint:disable-next-line:no-any\n        this._instanceProperties.forEach((v, p) => this[p] = v);\n        this._instanceProperties = undefined;\n    }\n    connectedCallback() {\n        // Ensure first connection completes an update. Updates cannot complete\n        // before connection.\n        this.enableUpdating();\n    }\n    enableUpdating() {\n        if (this._enableUpdatingResolver !== undefined) {\n            this._enableUpdatingResolver();\n            this._enableUpdatingResolver = undefined;\n        }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n    disconnectedCallback() {\n    }\n    /**\n     * Synchronizes property values when attributes change.\n     */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this._attributeToProperty(name, value);\n        }\n    }\n    _propertyToAttribute(name, value, options = defaultPropertyDeclaration) {\n        const ctor = this.constructor;\n        const attr = ctor._attributeNameForProperty(name, options);\n        if (attr !== undefined) {\n            const attrValue = ctor._propertyValueToAttribute(value, options);\n            // an undefined value does not change the attribute.\n            if (attrValue === undefined) {\n                return;\n            }\n            // Track if the property is being reflected to avoid\n            // setting the property again via `attributeChangedCallback`. Note:\n            // 1. this takes advantage of the fact that the callback is synchronous.\n            // 2. will behave incorrectly if multiple attributes are in the reaction\n            // stack at time of calling. However, since we process attributes\n            // in `update` this should not be possible (or an extreme corner case\n            // that we'd like to discover).\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n            if (attrValue == null) {\n                this.removeAttribute(attr);\n            }\n            else {\n                this.setAttribute(attr, attrValue);\n            }\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n        }\n    }\n    _attributeToProperty(name, value) {\n        // Use tracking info to avoid deserializing attribute value if it was\n        // just set from a property setter.\n        if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n            return;\n        }\n        const ctor = this.constructor;\n        // Note, hint this as an `AttributeMap` so closure clearly understands\n        // the type; it has issues with tracking types through statics\n        // tslint:disable-next-line:no-unnecessary-type-assertion\n        const propName = ctor._attributeToPropertyMap.get(name);\n        if (propName !== undefined) {\n            const options = ctor.getPropertyOptions(propName);\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n            this[propName] =\n                // tslint:disable-next-line:no-any\n                ctor._propertyValueFromAttribute(value, options);\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n        }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n    requestUpdateInternal(name, oldValue, options) {\n        let shouldRequestUpdate = true;\n        // If we have a property key, perform property update steps.\n        if (name !== undefined) {\n            const ctor = this.constructor;\n            options = options || ctor.getPropertyOptions(name);\n            if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n                if (!this._changedProperties.has(name)) {\n                    this._changedProperties.set(name, oldValue);\n                }\n                // Add to reflecting properties set.\n                // Note, it's important that every change has a chance to add the\n                // property to `_reflectingProperties`. This ensures setting\n                // attribute + property reflects correctly.\n                if (options.reflect === true &&\n                    !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n                    if (this._reflectingProperties === undefined) {\n                        this._reflectingProperties = new Map();\n                    }\n                    this._reflectingProperties.set(name, options);\n                }\n            }\n            else {\n                // Abort the request if the property should not be considered changed.\n                shouldRequestUpdate = false;\n            }\n        }\n        if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n            this._updatePromise = this._enqueueUpdate();\n        }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n    requestUpdate(name, oldValue) {\n        this.requestUpdateInternal(name, oldValue);\n        return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n    async _enqueueUpdate() {\n        this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n        try {\n            // Ensure any previous update has resolved before updating.\n            // This `await` also ensures that property changes are batched.\n            await this._updatePromise;\n        }\n        catch (e) {\n            // Ignore any previous errors. We only care that the previous cycle is\n            // done. Any error should have been handled in the previous update.\n        }\n        const result = this.performUpdate();\n        // If `performUpdate` returns a Promise, we await it. This is done to\n        // enable coordinating updates with a scheduler. Note, the result is\n        // checked to avoid delaying an additional microtask unless we need to.\n        if (result != null) {\n            await result;\n        }\n        return !this._hasRequestedUpdate;\n    }\n    get _hasRequestedUpdate() {\n        return (this._updateState & STATE_UPDATE_REQUESTED);\n    }\n    get hasUpdated() {\n        return (this._updateState & STATE_HAS_UPDATED);\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n    performUpdate() {\n        // Abort any update if one is not pending when this is called.\n        // This can happen if `performUpdate` is called early to \"flush\"\n        // the update.\n        if (!this._hasRequestedUpdate) {\n            return;\n        }\n        // Mixin instance properties once, if they exist.\n        if (this._instanceProperties) {\n            this._applyInstanceProperties();\n        }\n        let shouldUpdate = false;\n        const changedProperties = this._changedProperties;\n        try {\n            shouldUpdate = this.shouldUpdate(changedProperties);\n            if (shouldUpdate) {\n                this.update(changedProperties);\n            }\n            else {\n                this._markUpdated();\n            }\n        }\n        catch (e) {\n            // Prevent `firstUpdated` and `updated` from running when there's an\n            // update exception.\n            shouldUpdate = false;\n            // Ensure element can accept additional updates after an exception.\n            this._markUpdated();\n            throw e;\n        }\n        if (shouldUpdate) {\n            if (!(this._updateState & STATE_HAS_UPDATED)) {\n                this._updateState = this._updateState | STATE_HAS_UPDATED;\n                this.firstUpdated(changedProperties);\n            }\n            this.updated(changedProperties);\n        }\n    }\n    _markUpdated() {\n        this._changedProperties = new Map();\n        this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n    get updateComplete() {\n        return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n    _getUpdateComplete() {\n        return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    shouldUpdate(_changedProperties) {\n        return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(_changedProperties) {\n        if (this._reflectingProperties !== undefined &&\n            this._reflectingProperties.size > 0) {\n            // Use forEach so this works even if for/of loops are compiled to for\n            // loops expecting arrays\n            this._reflectingProperties.forEach((v, k) => this._propertyToAttribute(k, this[k], v));\n            this._reflectingProperties = undefined;\n        }\n        this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    updated(_changedProperties) {\n    }\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    firstUpdated(_changedProperties) {\n    }\n}\n_a = finalized;\n/**\n * Marks class as having finished creating properties.\n */\nUpdatingElement[_a] = true;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst standardProperty = (options, element) => {\n    // When decorating an accessor, pass it through and add property metadata.\n    // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n    // stomp over the user's accessor.\n    if (element.kind === 'method' && element.descriptor &&\n        !('value' in element.descriptor)) {\n        return Object.assign(Object.assign({}, element), { finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            } });\n    }\n    else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n            kind: 'field',\n            key: Symbol(),\n            placement: 'own',\n            descriptor: {},\n            // When @babel/plugin-proposal-decorators implements initializers,\n            // do this instead of the initializer below. See:\n            // https://github.com/babel/babel/issues/9260 extras: [\n            //   {\n            //     kind: 'initializer',\n            //     placement: 'own',\n            //     initializer: descriptor.initializer,\n            //   }\n            // ],\n            initializer() {\n                if (typeof element.initializer === 'function') {\n                    this[element.key] = element.initializer.call(this);\n                }\n            },\n            finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            }\n        };\n    }\n};\nconst legacyProperty = (options, proto, name) => {\n    proto.constructor\n        .createProperty(name, options);\n};\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nfunction property(options) {\n    // tslint:disable-next-line:no-any decorator\n    return (protoOrDescriptor, name) => (name !== undefined) ?\n        legacyProperty(options, protoOrDescriptor, name) :\n        standardProperty(options, protoOrDescriptor);\n}\n\n/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nconst supportsAdoptingStyleSheets = (window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// NOTE(cdata): The HAS_WEBXR_* constants can be enabled in Chrome by turning on\n// the appropriate flags. However, just because we have the API does not\n// guarantee that AR will work.\nconst HAS_WEBXR_DEVICE_API = navigator.xr != null &&\n    self.XRSession != null && navigator.xr.isSessionSupported != null;\nconst HAS_WEBXR_HIT_TEST_API = HAS_WEBXR_DEVICE_API && self.XRSession.prototype.requestHitTestSource;\nconst HAS_RESIZE_OBSERVER = self.ResizeObserver != null;\nconst HAS_INTERSECTION_OBSERVER = self.IntersectionObserver != null;\nconst IS_WEBXR_AR_CANDIDATE = HAS_WEBXR_HIT_TEST_API;\nconst IS_MOBILE = (() => {\n    const userAgent = navigator.userAgent || navigator.vendor || self.opera;\n    let check = false;\n    // eslint-disable-next-line\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i\n        .test(userAgent) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i\n            .test(userAgent.substr(0, 4))) {\n        check = true;\n    }\n    return check;\n})();\nconst IS_CHROMEOS = /\\bCrOS\\b/.test(navigator.userAgent);\n// Disabling offscreen canvas for now because it is slower and has bugs relating\n// to janky updates and out of sync frames.\nconst USE_OFFSCREEN_CANVAS = false;\n// Boolean((self as any).OffscreenCanvas) &&\n//     Boolean((self as any).OffscreenCanvas.prototype.transferToImageBitmap) &&\n//     !IS_CHROMEOS;  // TODO(elalish): file a bug on inverted renders\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\n// Prior to iOS 13, detecting iOS Safari was relatively straight-forward.\n// As of iOS 13, Safari on iPad (in its default configuration) reports the same\n// user-agent string as Safari on desktop MacOS. Strictly speaking, we only care\n// about iOS for the purposes if selecting for cases where Quick Look is known\n// to be supported. However, for API correctness purposes, we must rely on\n// known, detectable signals to distinguish iOS Safari from MacOS Safari. At the\n// time of this writing, there are no non-iOS/iPadOS Apple devices with\n// multi-touch displays.\n// @see https://stackoverflow.com/questions/57765958/how-to-detect-ipad-and-ipad-os-version-in-ios-13-and-up\n// @see https://forums.developer.apple.com/thread/119186\n// @see https://github.com/GoogleWebComponents/model-viewer/issues/758\nconst IS_IOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream) ||\n    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\nconst IS_AR_QUICKLOOK_CANDIDATE = (() => {\n    const tempAnchor = document.createElement('a');\n    return Boolean(tempAnchor.relList && tempAnchor.relList.supports &&\n        tempAnchor.relList.supports('ar'));\n})();\n// @see https://developer.chrome.com/multidevice/user-agent\nconst IS_SAFARI = /Safari\\//.test(navigator.userAgent);\nconst IS_IOS_CHROME = IS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_IOS_SAFARI = IS_IOS && IS_SAFARI;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CloseIcon = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" fill=\"#000000\">\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components -->\n    <defs>\n      <filter id=\"drop-shadow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\"/>\n        <feOffset dx=\"0\" dy=\"0\" result=\"offsetblur\"/>\n        <feFlood flood-color=\"#000000\"/>\n        <feComposite in2=\"offsetblur\" operator=\"in\"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in=\"SourceGraphic\"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter=\"url(#drop-shadow)\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ControlsPrompt = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"36\">\n    <defs>\n        <path id=\"A\" d=\"M.001.232h24.997V36H.001z\" />\n    </defs>\n    <g transform=\"translate(-11 -4)\" fill=\"none\" fill-rule=\"evenodd\">\n        <path fill-opacity=\"0\" fill=\"#fff\" d=\"M0 0h44v44H0z\" />\n        <g transform=\"translate(11 3)\">\n            <path d=\"M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z\" fill-opacity=\".5\" fill=\"#e4e4e4\" />\n            <path d=\"M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91\" fill-opacity=\".6\" fill=\"#000\" />\n            <path d=\"M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z\" fill=\"#fff\" />\n            <g transform=\"translate(0 .769)\">\n                <mask id=\"B\" fill=\"#fff\">\n                    <use xlink:href=\"#A\" />\n                </mask>\n                <path d=\"M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325\" fill-opacity=\".05\" fill=\"#000\" mask=\"url(#B)\" />\n            </g>\n        </g>\n    </g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ARGlyph = `\n<svg version=\"1.1\" id=\"view_x5F_in_x5F_AR_x5F_icon\"\n\t xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\"\n\t viewBox=\"0 0 24 24\" enable-background=\"new 0 0 24 24\" xml:space=\"preserve\">\n<rect id=\"Bounding_Box\" x=\"0\" y=\"0\" fill=\"none\" width=\"24\" height=\"24\"/>\n<g id=\"Art_layer\">\n\t<path d=\"M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z\"/>\n\t<path d=\"M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z\"/>\n\t<path d=\"M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z\"/>\n\t<path d=\"M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z\"/>\n\t<g>\n\t\t<path d=\"M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z\"/>\n\t</g>\n</g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This ruleset is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n}\n\n.annotation-container {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/GoogleWebComponents/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\ncanvas.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  z-index: 1000;\n  opacity: 0;\n  transition: opacity 0.3s 0.3s;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  opacity: 1;\n  transition: none;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: var(--poster-color, #fff);\n  background-image: var(--poster-image, none);\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--progress-mask, #fff);\n  transition: opacity 0.3s;\n  opacity: 0.2;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar:before {\n  content: '';\n  display: block;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n\n  transition: none;\n  transform-origin: top left;\n  transform: translateY(0);\n}\n\n#default-progress-bar > .bar.hide:before {\n  transition: transform 0.3s 1s;\n  transform: translateY(-100%);\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n\n  opacity: 0;\n  will-change: opacity;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.slot.interaction-prompt > .animated-container {\n  will-change: transform, opacity;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.default {\n  z-index: 1001;\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 16px;\n  left: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class=\"container\">\n  <div class=\"userInput\" tabindex=\"0\" role=\"img\"\n      aria-label=\"A depiction of a 3D model\"\n      aria-live=\"polite\">\n    <canvas></canvas>\n  </div>\n\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS -->\n  <div class=\"slot poster\">\n    <slot name=\"poster\">\n      <button type=\"button\" id=\"default-poster\" aria-hidden=\"true\" aria-label=\"Activate to view in 3D!\"></button>\n    </slot>\n  </div>\n\n  <div class=\"slot ar-button\">\n    <slot name=\"ar-button\">\n      <a id=\"default-ar-button\" class=\"fab\"\n          tabindex=\"2\"\n          aria-label=\"View this 3D model up close\">\n        ${ARGlyph}\n      </a>\n    </slot>\n  </div>\n\n  <div class=\"slot interaction-prompt\">\n    <div class=\"animated-container\" part=\"interaction-prompt\">\n      <slot name=\"interaction-prompt\" aria-hidden=\"true\">\n        ${ControlsPrompt}\n      </slot>\n    </div>\n  </div>\n\n  <div class=\"slot default\">\n    <slot></slot>\n\n    <div class=\"slot progress-bar\">\n      <slot name=\"progress-bar\">\n        <div id=\"default-progress-bar\" aria-hidden=\"true\">\n          <div class=\"mask\"></div>\n          <div class=\"bar\"></div>\n        </div>\n      </slot>\n    </div>\n    \n    <div class=\"slot exit-webxr-ar-button\">\n      <slot name=\"exit-webxr-ar-button\">\n        <a id=\"default-exit-webxr-ar-button\"\n            tabindex=\"3\"\n            aria-label=\"Exit AR\"\n            aria-hidden=\"true\">\n          ${CloseIcon}\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>`;\nconst makeTemplate = (tagName) => {\n    const clone = document.createElement('template');\n    clone.innerHTML = template.innerHTML;\n    if (window.ShadyCSS) {\n        window.ShadyCSS.prepareTemplate(clone, tagName);\n    }\n    return clone;\n};\n\n// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\nif ( Number.isInteger === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n\n\tNumber.isInteger = function ( value ) {\n\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\n\n\t};\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( 'name' in Function.prototype === false ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\tObject.assign = function ( target ) {\n\n\t\tif ( target === undefined || target === null ) {\n\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t}\n\n\t\tconst output = Object( target );\n\n\t\tfor ( let index = 1; index < arguments.length; index ++ ) {\n\n\t\t\tconst source = arguments[ index ];\n\n\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\tfor ( const nextKey in source ) {\n\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t};\n\n}\n\nconst REVISION = '120';\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst FlatShading = 1;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst CubeUVRefractionMapping = 307;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedShort565Type = 1019;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst RGBEFormat = RGBAFormat;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBIntegerFormat = 1032;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst GammaEncoding = 3007;\nconst RGBEEncoding = 3002;\nconst LogLuvEncoding = 3003;\nconst RGBM7Encoding = 3004;\nconst RGBM16Encoding = 3005;\nconst RGBDEncoding = 3006;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\nconst KeepStencilOp = 7680;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst GLSL3 = \"300 es\";\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\tseededRandom: function ( s ) {\n\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t\t// Park-Miller algorithm\n\n\t\t_seed = _seed * 16807 % 2147483647;\n\n\t\treturn ( _seed - 1 ) / 2147483646;\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector2', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix3', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tgetInverse( matrix, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\tconst me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nlet _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nlet textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isVector4', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.samples = 4;\n\n}\n\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultisampleRenderTarget,\n\n\tisWebGLMultisampleRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isQuaternion', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinverse() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector3', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector = new Vector3();\nconst _quaternion = new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox3', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$1 );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nconst _vector$1 = new Vector3();\n\nconst _box = new Box3();\n\n// triangle centered vertices\n\nconst _v0 = new Vector3();\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = new Vector3();\nconst _f1 = new Vector3();\nconst _f2 = new Vector3();\n\nconst _center = new Vector3();\nconst _extents = new Vector3();\nconst _triangleNormal = new Vector3();\nconst _testAxis = new Vector3();\n\nconst _box$1 = new Box3();\n\nclass Sphere {\n\n\tconstructor( center, radius ) {\n\n\t\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\t\tthis.radius = ( radius !== undefined ) ? radius : - 1;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n}\n\nconst _vector$2 = new Vector3();\nconst _segCenter = new Vector3();\nconst _segDir = new Vector3();\nconst _diff = new Vector3();\n\nconst _edge1 = new Vector3();\nconst _edge2 = new Vector3();\nconst _normal = new Vector3();\n\nclass Ray {\n\n\tconstructor( origin, direction ) {\n\n\t\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\t\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$2.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$2.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$2.dot( this.direction );\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix4', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetInverse( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$1 = new Vector3();\nconst _m1 = new Matrix4();\nconst _zero = new Vector3( 0, 0, 0 );\nconst _one = new Vector3( 1, 1, 1 );\nconst _x = new Vector3();\nconst _y = new Vector3();\nconst _z = new Vector3();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tObject.defineProperty( this, 'isEuler', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$1.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nconst _matrix = new Matrix4();\nconst _quaternion$1 = new Quaternion();\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$2 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1$1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion$2 = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$2.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$2.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nconst _vector1 = new Vector3();\nconst _vector2 = new Vector3();\nconst _normalMatrix = new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal, constant ) {\n\n\t\tObject.defineProperty( this, 'isPlane', { value: true } );\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n}\n\nconst _v0$1 = new Vector3();\nconst _v1$3 = new Vector3();\nconst _v2$1 = new Vector3();\nconst _v3 = new Vector3();\n\nconst _vab = new Vector3();\nconst _vac = new Vector3();\nconst _vbc = new Vector3();\nconst _vap = new Vector3();\nconst _vbp = new Vector3();\nconst _vcp = new Vector3();\n\nclass Triangle {\n\n\tconstructor( a, b, c ) {\n\n\t\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\t\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\t\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$1.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tObject.defineProperty( this, 'isColor', { value: true } );\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\nclass Face3 {\n\n\tconstructor( a, b, c, normal, color, materialIndex ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\t\tthis.color = ( color && color.isColor ) ? color : new Color();\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\t\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _vector$3 = new Vector3();\nconst _vector2$1 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\n\t\t\t\t_vector$3.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\nclass DirectGeometry {\n\n\tconstructor() {\n\n\t\tthis.vertices = [];\n\t\tthis.normals = [];\n\t\tthis.colors = [];\n\t\tthis.uvs = [];\n\t\tthis.uvs2 = [];\n\n\t\tthis.groups = [];\n\n\t\tthis.morphTargets = {};\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\t// this.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tcomputeGroups( geometry ) {\n\n\t\tconst groups = [];\n\n\t\tlet group, i;\n\t\tlet materialIndex = undefined;\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n\tfromGeometry( geometry ) {\n\n\t\tconst faces = geometry.faces;\n\t\tconst vertices = geometry.vertices;\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tconst morphTargets = geometry.morphTargets;\n\t\tconst morphTargetsLength = morphTargets.length;\n\n\t\tlet morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tconst morphNormals = geometry.morphNormals;\n\t\tconst morphNormalsLength = morphNormals.length;\n\n\t\tlet morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tconst skinIndices = geometry.skinIndices;\n\t\tconst skinWeights = geometry.skinWeights;\n\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nconst _m1$2 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box$2 = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$2.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$2.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$2.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$2.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$2.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tlet geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tlet direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( const name in geometry.morphTargets ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ i ];\n\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$4.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$4.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst isMultiMaterial = Array.isArray( material );\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst faces = geometry.faces;\n\t\t\tlet uvs;\n\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = faces[ f ];\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tconst fvA = vertices[ face.a ];\n\t\t\t\tconst fvB = vertices[ face.b ];\n\t\t\t\tconst fvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nlet _geometryId = 0; // Geometry uses even numbers as Id\nconst _m1$3 = new Matrix4();\nconst _obj$1 = new Object3D();\nconst _offset$1 = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$3.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$3.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$3.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$3.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$3.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj$1.lookAt( vector );\n\n\t\t_obj$1.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj$1.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tconst scope = this;\n\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\n\t\tconst attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst position = attributes.position;\n\t\tconst normal = attributes.normal;\n\t\tconst color = attributes.color;\n\t\tconst uv = attributes.uv;\n\t\tconst uv2 = attributes.uv2;\n\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\n\n\t\t\tif ( color !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone()\n\t\t\t];\n\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\n\t\t\t];\n\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uv !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uv2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\n\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\n\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tconst center = this.boundingSphere.center;\n\t\tconst radius = this.boundingSphere.radius;\n\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tconst matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tconst vertices = new Array( this.vertices.length );\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tconst tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tconst faceNormal = new Vector3();\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet normalMatrix;\n\t\tconst vertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = vertices2[ i ];\n\n\t\t\tconst vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tconst face = faces2[ i ];\n\t\t\tlet normal, color;\n\t\t\tconst faceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tconst faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tconst unique = [], changes = [];\n\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst v = this.vertices[ i ];\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tconst faceIndicesToRemove = [];\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tconst indices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tconst idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tconst diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tconst faces = this.faces;\n\t\tconst length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tlet newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tconst vertices = [];\n\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst normals = [];\n\t\tconst normalsHash = {};\n\t\tconst colors = [];\n\t\tconst colorsHash = {};\n\t\tconst uvs = [];\n\t\tconst uvsHash = {};\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tconst hasMaterial = true;\n\t\t\tconst hasFaceUv = false; // deprecated\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tlet faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tconst vertices = source.vertices;\n\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tconst colors = source.colors;\n\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tconst faces = source.faces;\n\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphTargets = source.morphTargets;\n\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tconst morphNormals = source.morphNormals;\n\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tconst morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tconst destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tconst skinWeights = source.skinWeights;\n\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tconst skinIndices = source.skinIndices;\n\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tconst lineDistances = source.lineDistances;\n\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tthis.glslVersion = null;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\tthis.glslVersion = source.glslVersion;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.glslVersion = this.glslVersion;\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst fov = 90, aspect = 1;\n\nfunction CubeCamera( near, far, renderTarget ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\treturn;\n\n\t}\n\n\tthis.renderTarget = renderTarget;\n\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.layers = this.layers;\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.layers = this.layers;\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.layers = this.layers;\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.layers = this.layers;\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.layers = this.layers;\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.layers = this.layers;\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.update = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t};\n\n\tthis.clear = function ( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( renderTarget, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t};\n\n}\n\nCubeCamera.prototype = Object.create( Object3D.prototype );\nCubeCamera.prototype.constructor = CubeCamera;\n\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\n\n\tif ( Number.isInteger( options ) ) {\n\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\toptions = dummy;\n\n\t}\n\n\tWebGLRenderTarget.call( this, size, size, options );\n\n\tthis.texture.isWebGLCubeRenderTargetTexture = true; // HACK Why is texture not a CubeTexture?\n\n}\n\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\n\n\tthis.texture.type = texture.type;\n\tthis.texture.format = RGBAFormat; // see #18859\n\tthis.texture.encoding = texture.encoding;\n\n\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\tthis.texture.minFilter = texture.minFilter;\n\tthis.texture.magFilter = texture.magFilter;\n\n\tconst shader = {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: /* glsl */`\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t`,\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t`\n\t};\n\n\tconst geometry = new BoxBufferGeometry( 5, 5, 5 );\n\n\tconst material = new ShaderMaterial( {\n\n\t\tname: 'CubemapFromEquirect',\n\n\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader,\n\t\tside: BackSide,\n\t\tblending: NoBlending\n\n\t} );\n\n\tmaterial.uniforms.tEquirect.value = texture;\n\n\tconst mesh = new Mesh( geometry, material );\n\n\tconst currentMinFilter = texture.minFilter;\n\n\t// Avoid blurred poles\n\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\tconst camera = new CubeCamera( 1, 10, this );\n\tcamera.update( renderer, mesh );\n\n\ttexture.minFilter = currentMinFilter;\n\n\tmesh.geometry.dispose();\n\tmesh.material.dispose();\n\n\treturn this;\n\n};\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\nconst _sphere$1 = new Sphere();\nconst _vector$5 = new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tthis.planes = [\n\n\t\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t\t];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$1.center.set( 0, 0, 0 );\n\t\t_sphere$1.radius = 0.7071067811865476;\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = 5126;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = 5123;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tvar cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n// PlaneGeometry\n\nclass PlaneGeometry extends Geometry {\n\n\tconstructor( width, height, widthSegments, heightSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// PlaneBufferGeometry\n\nclass PlaneBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, widthSegments, heightSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'PlaneBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments ) || 1;\n\t\tconst gridY = Math.floor( heightSegments ) || 1;\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor.xyz *= color.xyz;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\\n\\t\\tvec2 f = fract( uv );\\n\\t\\tuv += 0.5 - f;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x += texelSize;\\n\\t\\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.y += texelSize;\\n\\t\\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x -= texelSize;\\n\\t\\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\treturn mix( tm, bm, f.y );\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value ) {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\n\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmissionmap_fragment: transmissionmap_fragment,\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.isWebGLCubeRenderTargetTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tif ( background.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t// TODO Deprecate\n\n\t\t\t\tbackground = background.texture;\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = background.isCubeTexture ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry, index );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t}\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( name === 'instanceColor' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceColor );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute, 3, type, false, 12, 0 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst currentRenderList = renderer.getRenderList();\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\t\t\t\tconst currentRenderState = renderer.getRenderState();\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\t\t\t\t\t\trenderer.setRenderList( currentRenderList );\n\t\t\t\t\t\trenderer.setRenderState( currentRenderState );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ] !== null;\n\n\t\t\t}\n\n\t\t\tlet extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension !== null;\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( ! this.has( name ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = new WeakMap();\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\t\tconst buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( const name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tlet buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = new Texture();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tconst cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, 35718 );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + \"\\n\" : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\", \"instancingColor\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\", \"transmissionMap\"\n\t];\n\n\tfunction getMaxBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList( properties ) {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists( properties ) {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tconst cameras = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList( properties );\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList( properties );\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_1;\n\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_2;\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState() {\n\n\tconst lights = new WebGLLights();\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\t\\t#ifdef HORIZONAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean * HALF_SAMPLE_RATE;\\n\\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = null;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 6407 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tinitTexture( textureProperties, texture );\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\n\t\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t} else {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = 6402;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\n\n\t\t\trenderTarget.texture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 34067, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 3553, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = 16384;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t// this function alone should take care of cube textures\n\t\t\tsetTextureCube( texture, slot );\n\n\t\t} else {\n\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\n\t\t\tsetTextureCubeDynamic( texture, slot );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\t\tif ( p === UnsignedShort565Type ) return 33635;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBFormat ) return 6407;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBIntegerFormat ) return 36248;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\tthis._hand = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetHandSpace: function () {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = [];\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t\tif ( window.XRHand ) {\n\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\n\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\tthis._hand.joints.push( joint );\n\t\t\t\t\t// ??\n\t\t\t\t\tthis._hand.add( joint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t},\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\n\n\t\t\t\t\tif ( inputSource.hand[ i ] ) {\n\n\t\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\t\tconst jointPose = frame.getJointPose( inputSource.hand[ i ], referenceSpace );\n\t\t\t\t\t\tconst joint = hand.joints[ i ];\n\n\t\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t\t\t// Custom events\n\n\t\t\t\t\t\t// Check pinch\n\t\t\t\t\t\tconst indexTip = hand.joints[ window.XRHand.INDEX_PHALANX_TIP ];\n\t\t\t\t\t\tconst thumbTip = hand.joints[ window.XRHand.THUMB_PHALANX_TIP ];\n\t\t\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: \"pinchend\",\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\t\t\ttarget: this\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: \"pinchstart\",\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\t\t\ttarget: this\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\tthis.getHand = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getHandSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.isPresenting = true;\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tgl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tconst maxMipLevel = properties.get( envMap ).__maxMipLevel;\n\n\t\t\tif ( maxMipLevel !== undefined ) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\tlet _currentArrayCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'OES_vertex_array_object' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists( properties );\n\t\trenderStates = new WebGLRenderStates();\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= 16384;\n\t\tif ( depth === undefined || depth ) bits |= 256;\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( 4, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list, envMap still needs the update here to avoid a frame-late effect\n\n\t\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || environment );\n\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || materialProperties.environment );\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderList = function () {\n\n\t\treturn currentRenderList;\n\n\t};\n\n\tthis.setRenderList = function ( renderList ) {\n\n\t\tcurrentRenderList = renderList;\n\n\t};\n\n\tthis.getRenderState = function () {\n\n\t\treturn currentRenderState;\n\n\t};\n\n\tthis.setRenderState = function ( renderState ) {\n\n\t\tcurrentRenderState = renderState;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nfunction WebGL1Renderer( parameters ) {\n\n\tWebGLRenderer.call( this, parameters );\n\n}\n\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\n\n\tconstructor: WebGL1Renderer,\n\n\tisWebGL1Renderer: true\n\n} );\n\nclass FogExp2 {\n\n\tconstructor( color, density ) {\n\n\t\tObject.defineProperty( this, 'isFogExp2', { value: true } );\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near, far ) {\n\n\t\tObject.defineProperty( this, 'isFog', { value: true } );\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = ( near !== undefined ) ? near : 1;\n\t\tthis.far = ( far !== undefined ) ? far : 1000;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'isScene', { value: true } );\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\nconst _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.name = '';\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t},\n\n\tneedsUpdate: {\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.data.needsUpdate = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.x = this.getX( i );\n\t\t\t_vector$6.y = this.getY( i );\n\t\t\t_vector$6.z = this.getZ( i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interlaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\nlet _geometry;\n\nconst _intersectPoint = new Vector3();\nconst _worldScale = new Vector3();\nconst _mvPosition = new Vector3();\n\nconst _alignedPosition = new Vector2();\nconst _rotatedPosition = new Vector2();\nconst _viewWorldMatrix = new Matrix4();\n\nconst _vA$1 = new Vector3();\nconst _vB$1 = new Vector3();\nconst _vC$1 = new Vector3();\n\nconst _uvA$1 = new Vector2();\nconst _uvB$1 = new Vector2();\nconst _uvC$1 = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tconst float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA$1.set( 0, 0 );\n\t\t_uvB$1.set( 1, 0 );\n\t\t_uvC$1.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB$1.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$4 = new Vector3();\nconst _v2$2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t},\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tboneTransform: ( function () {\n\n\t\tconst basePosition = new Vector3();\n\n\t\tconst skinIndex = new Vector4();\n\t\tconst skinWeight = new Vector4();\n\n\t\tconst vector = new Vector3();\n\t\tconst matrix = new Matrix4();\n\n\t\treturn function ( index, target ) {\n\n\t\t\tconst skeleton = this.skeleton;\n\t\t\tconst geometry = this.geometry;\n\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\n\n\t\t\ttarget.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst weight = skinWeight.getComponent( i );\n\n\t\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\n\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t\t};\n\n\t}() )\n\n} );\n\nconst _offsetMatrix = new Matrix4();\nconst _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones, boneInverses ) {\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\tthis.frame = - 1;\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== undefined ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tdispose: function ( ) {\n\n\t\tif ( this.boneTexture ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = undefined;\n\n\t\t}\n\n\t}\n\n} );\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\nconst _instanceLocalMatrix = new Matrix4();\nconst _instanceWorldMatrix = new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\tthis.instanceColor = null;\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t},\n\n\tsetColorAt: function ( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new BufferAttribute( new Float32Array( this.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _start = new Vector3();\nconst _end = new Vector3();\nconst _inverseMatrix$1 = new Matrix4();\nconst _ray$1 = new Ray();\nconst _sphere$2 = new Sphere();\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere );\n\t\t_sphere$2.applyMatrix4( matrixWorld );\n\t\t_sphere$2.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\t\t\t\t\tconst b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst nbVertices = vertices.length;\n\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _start$1 = new Vector3();\nconst _end$1 = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [];\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t_start$1.copy( vertices[ i ] );\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _inverseMatrix$2 = new Matrix4();\nconst _ray$2 = new Ray();\nconst _sphere$3 = new Sphere();\nconst _position$1 = new Vector3();\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\t\t_sphere$3.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position$1.fromArray( positions, a * 3 );\n\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t_position$1.fromArray( positions, i * 3 );\n\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst vertices = geometry.vertices;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n\tconst scope = this;\n\n\tfunction updateVideo() {\n\n\t\tscope.needsUpdate = true;\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\nCanvasTexture.prototype.isCanvasTexture = true;\n\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\tformat = format !== undefined ? format : DepthFormat;\n\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t}\n\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps\t= false;\n\n}\n\nDepthTexture.prototype = Object.create( Texture.prototype );\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry ) {\n\n\t\tsuper();\n\t\tthis.type = 'WireframeGeometry';\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\n\t\t// helper variables\n\n\t\tconst edge = [ 0, 0 ], edges = {};\n\t\tconst keys = [ 'a', 'b', 'c' ];\n\n\t\t// different logic for Geometry and BufferGeometry\n\n\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\tconst faces = geometry.faces;\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\tconst edge1 = face[ keys[ j ] ];\n\t\t\t\t\tconst edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( const key in edges ) {\n\n\t\t\t\tconst e = edges[ key ];\n\n\t\t\t\tlet vertex = geometry.vertices[ e.index1 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst start = group.start;\n\t\t\t\t\tconst count = group.count;\n\n\t\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// generate vertices\n\n\t\t\t\tfor ( const key in edges ) {\n\n\t\t\t\t\tconst e = edges[ key ];\n\n\t\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n}\n\n/**\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\n// ParametricGeometry\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n// ParametricBufferGeometry\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\tconst EPS = 0.00001;\n\n\tconst normal = new Vector3();\n\n\tconst p0 = new Vector3(), p1 = new Vector3();\n\tconst pu = new Vector3(), pv = new Vector3();\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tconst sliceCount = slices + 1;\n\n\tfor ( let i = 0; i <= stacks; i ++ ) {\n\n\t\tconst v = i / stacks;\n\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\n\n\t\t\tconst u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( let j = 0; j < slices; j ++ ) {\n\n\t\t\tconst a = i * sliceCount + j;\n\t\t\tconst b = i * sliceCount + j + 1;\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n// PolyhedronGeometry\n\nclass PolyhedronGeometry extends Geometry {\n\n\tconstructor( vertices, indices, radius, detail ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// PolyhedronBufferGeometry\n\nclass PolyhedronBufferGeometry extends BufferGeometry {\n\n\tconstructor( vertices, indices, radius, detail ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tradius = radius || 1;\n\t\tdetail = detail || 0;\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = Math.pow( 2, detail );\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n}\n\n// TetrahedronGeometry\n\nclass TetrahedronGeometry extends Geometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tsuper();\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n\n// TetrahedronBufferGeometry\n\nclass TetrahedronBufferGeometry extends PolyhedronBufferGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n}\n\n// OctahedronGeometry\n\nclass OctahedronGeometry extends Geometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// OctahedronBufferGeometry\n\nclass OctahedronBufferGeometry extends PolyhedronBufferGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n}\n\n// IcosahedronGeometry\n\nclass IcosahedronGeometry extends Geometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// IcosahedronBufferGeometry\n\nclass IcosahedronBufferGeometry extends PolyhedronBufferGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n}\n\n// DodecahedronGeometry\n\nclass DodecahedronGeometry extends Geometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tsuper();\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// DodecahedronBufferGeometry\n\nclass DodecahedronBufferGeometry extends PolyhedronBufferGeometry {\n\n\tconstructor( radius, detail ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (1, 1, 1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, 1/, )\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (1/, , 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (, 0, 1/)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n}\n\n// TubeGeometry\n\nclass TubeGeometry extends Geometry {\n\n\tconstructor( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\t\tsuper();\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\t\tconst bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = bufferGeometry.tangents;\n\t\tthis.normals = bufferGeometry.normals;\n\t\tthis.binormals = bufferGeometry.binormals;\n\n\t\t// create geometry\n\n\t\tthis.fromBufferGeometry( bufferGeometry );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n\n// TubeBufferGeometry\n\nclass TubeBufferGeometry extends BufferGeometry {\n\n\tconstructor( path, tubularSegments, radius, radialSegments, closed ) {\n\n\t\tsuper();\n\t\tthis.type = 'TubeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\ttubularSegments = tubularSegments || 64;\n\t\tradius = radius || 1;\n\t\tradialSegments = radialSegments || 8;\n\t\tclosed = closed || false;\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\n// TorusKnotGeometry\n\nclass TorusKnotGeometry extends Geometry {\n\n\tconstructor( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\t\tsuper();\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\t\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n\n// TorusKnotBufferGeometry\n\nclass TorusKnotBufferGeometry extends BufferGeometry {\n\n\tconstructor( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\t\tsuper();\n\t\tthis.type = 'TorusKnotBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\tradius = radius || 1;\n\t\ttube = tube || 0.4;\n\t\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\tp = p || 2;\n\t\tq = q || 3;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n}\n\n// TorusGeometry\n\nclass TorusGeometry extends Geometry {\n\n\tconstructor( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tsuper();\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n\n// TorusBufferGeometry\n\nclass TorusBufferGeometry extends BufferGeometry {\n\n\tconstructor( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\t\tsuper();\n\t\tthis.type = 'TorusBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradius = radius || 1;\n\t\ttube = tube || 0.4;\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\t\tarc = arc || Math.PI * 2;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode;\n\tconst hx = hole.x;\n\tconst hy = hole.y;\n\tlet qx = - Infinity, m;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node$1( a.i, a.x, a.y ),\n\t\tb2 = new Node$1( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node$1( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node$1( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nconst ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\n// ExtrudeGeometry\n\nclass ExtrudeGeometry extends Geometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON( shapes, options, data );\n\n\t}\n\n}\n\n\n// ExtrudeBufferGeometry\n\nclass ExtrudeBufferGeometry extends BufferGeometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tlet depth = options.depth !== undefined ? options.depth : 100;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t// deprecated options\n\n\t\t\tif ( options.amount !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\t\tdepth = options.amount;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON( shapes, options, data );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n/**\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\n *  bevelOffset: <float> // how far from text outline does bevel start\n * }\n */\n\n// TextGeometry\n\nclass TextGeometry extends Geometry {\n\n\tconstructor( text, parameters ) {\n\n\t\tsuper();\n\t\tthis.type = 'TextGeometry';\n\n\t\tthis.parameters = {\n\t\t\ttext: text,\n\t\t\tparameters: parameters\n\t\t};\n\n\t\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n\n// TextBufferGeometry\n\nclass TextBufferGeometry extends ExtrudeBufferGeometry {\n\n\tconstructor( text, parameters ) {\n\n\t\tparameters = parameters || {};\n\n\t\tconst font = parameters.font;\n\n\t\tif ( ! ( font && font.isFont ) ) {\n\n\t\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\t\treturn new Geometry();\n\n\t\t}\n\n\t\tconst shapes = font.generateShapes( text, parameters.size );\n\n\t\t// translate parameters to ExtrudeGeometry API\n\n\t\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\n\n\t\t// defaults\n\n\t\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\t\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\t\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\t\tsuper( shapes, parameters );\n\n\t\tthis.type = 'TextBufferGeometry';\n\n\t}\n\n}\n\n// SphereGeometry\n\nclass SphereGeometry extends Geometry {\n\n\tconstructor( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// SphereBufferGeometry\n\nclass SphereBufferGeometry extends BufferGeometry {\n\n\tconstructor( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\t\tthis.type = 'SphereBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tradius = radius || 1;\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\t\tphiStart = phiStart !== undefined ? phiStart : 0;\n\t\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\n// RingGeometry\n\nclass RingGeometry extends Geometry {\n\n\tconstructor( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// RingBufferGeometry\n\nclass RingBufferGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tinnerRadius = innerRadius || 0.5;\n\t\touterRadius = outerRadius || 1;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\t\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\n// LatheGeometry\n\nclass LatheGeometry extends Geometry {\n\n\tconstructor( points, segments, phiStart, phiLength ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// LatheBufferGeometry\n\nclass LatheBufferGeometry extends BufferGeometry {\n\n\tconstructor( points, segments, phiStart, phiLength ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments ) || 12;\n\t\tphiStart = phiStart || 0;\n\t\tphiLength = phiLength || Math.PI * 2;\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices and uvs\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// generate normals\n\n\t\tthis.computeVertexNormals();\n\n\t\t// if the geometry is closed, we need to average the normals along the seam.\n\t\t// because the corresponding vertices are identical (but still have different UVs).\n\n\t\tif ( phiLength === Math.PI * 2 ) {\n\n\t\t\tconst normals = this.attributes.normal.array;\n\t\t\tconst n1 = new Vector3();\n\t\t\tconst n2 = new Vector3();\n\t\t\tconst n = new Vector3();\n\n\t\t\t// this is the buffer offset for the last line of vertices\n\n\t\t\tconst base = segments * points.length * 3;\n\n\t\t\tfor ( let i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t\t// select the normal of the vertex in the first line\n\n\t\t\t\tn1.x = normals[ j + 0 ];\n\t\t\t\tn1.y = normals[ j + 1 ];\n\t\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t\t// select the normal of the vertex in the last line\n\n\t\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t\t// average normals\n\n\t\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t\t// assign the new values to both normals\n\n\t\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// ShapeGeometry\n\nclass ShapeGeometry extends Geometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tif ( typeof curveSegments === 'object' ) {\n\n\t\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\t\tcurveSegments = curveSegments.curveSegments;\n\n\t\t}\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = Geometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON$1( shapes, data );\n\n\t}\n\n}\n\n// ShapeBufferGeometry\n\nclass ShapeBufferGeometry extends BufferGeometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'ShapeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tcurveSegments = curveSegments || 12;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON$1( shapes, data );\n\n\t}\n\n}\n\n//\n\nfunction toJSON$1( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry, thresholdAngle ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\n\t\t// helper variables\n\n\t\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\n\t\tconst edge = [ 0, 0 ], edges = {};\n\t\tlet edge1, edge2, key;\n\t\tconst keys = [ 'a', 'b', 'c' ];\n\n\t\t// prepare source geometry\n\n\t\tlet geometry2;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tgeometry2 = new Geometry();\n\t\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t\t} else {\n\n\t\t\tgeometry2 = geometry.clone();\n\n\t\t}\n\n\t\tgeometry2.mergeVertices();\n\t\tgeometry2.computeFaceNormals();\n\n\t\tconst sourceVertices = geometry2.vertices;\n\t\tconst faces = geometry2.faces;\n\n\t\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t\t} else {\n\n\t\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( key in edges ) {\n\n\t\t\tconst e = edges[ key ];\n\n\t\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\t\tlet vertex = sourceVertices[ e.index1 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t}\n\n}\n\n// CylinderGeometry\n\nclass CylinderGeometry extends Geometry {\n\n\tconstructor( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// CylinderBufferGeometry\n\nclass CylinderBufferGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\t\tthis.type = 'CylinderBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\t\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\t\theight = height || 1;\n\n\t\tradialSegments = Math.floor( radialSegments ) || 8;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\n\t\topenEnded = openEnded !== undefined ? openEnded : false;\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n}\n\n// ConeGeometry\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n}\n\n// ConeBufferGeometry\n\nclass ConeBufferGeometry extends CylinderBufferGeometry {\n\n\tconstructor( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\t\tthis.type = 'ConeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n}\n\n// CircleGeometry\n\nclass CircleGeometry extends Geometry {\n\n\tconstructor( radius, segments, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// CircleBufferGeometry\n\nclass CircleBufferGeometry extends BufferGeometry {\n\n\tconstructor( radius, segments, thetaStart, thetaLength ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tradius = radius || 1;\n\t\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\t\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\t\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tWireframeGeometry: WireframeGeometry,\n\tParametricGeometry: ParametricGeometry,\n\tParametricBufferGeometry: ParametricBufferGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\n\tTubeGeometry: TubeGeometry,\n\tTubeBufferGeometry: TubeBufferGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusBufferGeometry: TorusBufferGeometry,\n\tTextGeometry: TextGeometry,\n\tTextBufferGeometry: TextBufferGeometry,\n\tSphereGeometry: SphereGeometry,\n\tSphereBufferGeometry: SphereBufferGeometry,\n\tRingGeometry: RingGeometry,\n\tRingBufferGeometry: RingBufferGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPlaneBufferGeometry: PlaneBufferGeometry,\n\tLatheGeometry: LatheGeometry,\n\tLatheBufferGeometry: LatheBufferGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tShapeBufferGeometry: ShapeBufferGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tConeGeometry: ConeGeometry,\n\tConeBufferGeometry: ConeBufferGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tCylinderBufferGeometry: CylinderBufferGeometry,\n\tCircleGeometry: CircleGeometry,\n\tCircleBufferGeometry: CircleBufferGeometry,\n\tBoxGeometry: BoxGeometry,\n\tBoxBufferGeometry: BoxBufferGeometry\n});\n\n/**\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n/**\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *\n *  sheen: <Color>,\n *\n *  transmission: <float>,\n *  transmissionMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transmission = 0.0;\n\tthis.transmissionMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transmission = source.transmission;\n\tthis.transmissionMap = source.transmissionMap;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\nvar Materials = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tShadowMaterial: ShadowMaterial,\n\tSpriteMaterial: SpriteMaterial,\n\tRawShaderMaterial: RawShaderMaterial,\n\tShaderMaterial: ShaderMaterial,\n\tPointsMaterial: PointsMaterial,\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\tMeshStandardMaterial: MeshStandardMaterial,\n\tMeshPhongMaterial: MeshPhongMaterial,\n\tMeshToonMaterial: MeshToonMaterial,\n\tMeshNormalMaterial: MeshNormalMaterial,\n\tMeshLambertMaterial: MeshLambertMaterial,\n\tMeshDepthMaterial: MeshDepthMaterial,\n\tMeshDistanceMaterial: MeshDistanceMaterial,\n\tMeshBasicMaterial: MeshBasicMaterial,\n\tMeshMatcapMaterial: MeshMatcapMaterial,\n\tLineDashedMaterial: LineDashedMaterial,\n\tLineBasicMaterial: LineBasicMaterial,\n\tMaterial: Material\n});\n\nconst AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tconst n = times.length;\n\t\tconst result = new Array( n );\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tconst nValues = values.length;\n\t\tconst result = new values.constructor( nValues );\n\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tconst srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tlet i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tlet value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tconst clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tconst track = clip.tracks[ i ];\n\t\t\tconst valueSize = track.getValueSize();\n\n\t\t\tconst times = [];\n\t\t\tconst values = [];\n\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tlet minStartTime = Infinity;\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t},\n\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\n\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\n\n\t\tconst numTracks = targetClip.tracks.length;\n\t\tconst referenceTime = referenceFrame / fps;\n\n\t\t// Make each track's values relative to the values at the reference frame\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t\t// Skip this track if it's non-numeric\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t\t} );\n\n\t\t\tif ( targetTrack === undefined ) continue;\n\n\t\t\tlet referenceOffset = 0;\n\t\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t\t}\n\n\t\t\tlet targetOffset = 0;\n\t\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t\t}\n\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\t\tlet referenceValue;\n\n\t\t\t// Find the value to subtract out of the track\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else {\n\n\t\t\t\t// Interpolate to the reference value\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t\t}\n\n\t\t\t// Conjugate the quaternion\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t\t}\n\n\t\t\t// Subtract the reference value from all of the track values\n\n\t\t\tconst numTimes = targetTrack.times.length;\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart,\n\t\t\t\t\t\treferenceValue,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\t\treturn targetClip;\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\n/**\n * A Track of Boolean keyframe values.\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\n/**\n * A Track of keyframe values that represent color.\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\n/**\n * A Track of numeric keyframe values.\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * A Track of quaternion keyframe values.\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\n/**\n * A Track that interpolates Strings\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\n/**\n * A Track of vectored keyframe values.\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nfunction AnimationClip( name, duration, tracks, blendMode ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n} );\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\nconst loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\n\t\tlet request;\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\n\n\t\t\tlet data = dataUriRegexResult[ 3 ];\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tlet response;\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\trequest = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tconst response = this.response;\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( const header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction AnimationLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AnimationLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n} );\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\nfunction CubeTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CubeTextureLoader,\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t},\n\n\tgetTangentAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst twoPi = Math.PI * 2;\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tconst angle = this.aStartAngle + t * deltaAngle;\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tconst cos = Math.cos( this.aRotation );\n\t\tconst sin = Math.sin( this.aRotation );\n\n\t\tconst tx = x - this.aX;\n\t\tconst ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = new Vector3();\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = ( tension !== undefined ) ? tension : 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst points = this.points;\n\tconst l = points.length;\n\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tlet intPoint = Math.floor( p );\n\tlet weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tconst p1 = points[ intPoint % l ];\n\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n/**\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tconst tangent = optionalTarget || new Vector2();\n\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\treturn tangent;\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction SplineCurve( points ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst points = this.points;\n\tconst p = ( points.length - 1 ) * t;\n\n\tconst intPoint = Math.floor( p );\n\tconst weight = p - intPoint;\n\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tconst p1 = points[ intPoint ];\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalBias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex ) {\n\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\n\n\t\tconst camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isSphericalHarmonics3', { value: true } );\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nfunction LightProbe( sh, intensity ) {\n\n\tLight.call( this, undefined, intensity );\n\n\tthis.type = 'LightProbe';\n\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\n\n}\n\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: LightProbe,\n\n\tisLightProbe: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\nconst LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.instanceCount = Infinity;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction ObjectLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tconst shapes = this.parseShape( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseShape: function ( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t},\n\n\tparseGeometries: function ( json, shapes ) {\n\n\t\tconst geometries = {};\n\t\tlet geometryShapes;\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TubeGeometry':\n\t\t\t\t\tcase 'TubeBufferGeometry':\n\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.closed\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PolyhedronGeometry':\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.vertices,\n\t\t\t\t\t\t\tdata.indices,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.details\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ShapeGeometry':\n\t\t\t\t\tcase 'ShapeBufferGeometry':\n\n\t\t\t\t\t\tgeometryShapes = [];\n\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.curveSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'ExtrudeGeometry':\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\n\n\t\t\t\t\t\tgeometryShapes = [];\n\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst extrudePath = data.options.extrudePath;\n\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\n\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.options\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t// Deprecated\n\n\t\t\t\t\tconst array = [];\n\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\tconst material = data.materials[ j ];\n\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\n\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst data = json[ i ];\n\n\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\timages[ image.uuid ] = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\n\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\n\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function ( data, geometries, materials ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n} );\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = { premultiplyAlpha: 'none' };\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tisImageBitmapLoader: true,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tfetch( url ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, scope.options );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tconst toChange = [];\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new ShapePath();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nfunction AudioLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AudioLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( skyColor );\n\tconst color2 = new Color().set( groundColor );\n\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\tconst c0 = Math.sqrt( Math.PI );\n\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n}\n\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: HemisphereLightProbe,\n\n\tisHemisphereLightProbe: true,\n\n\tcopy: function ( source ) { // modifying colors not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction AmbientLightProbe( color, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( color );\n\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n}\n\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: AmbientLightProbe,\n\n\tisAmbientLightProbe: true,\n\n\tcopy: function ( source ) { // modifying color not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst _eyeRight = new Matrix4();\nconst _eyeLeft = new Matrix4();\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n\tthis._cache = {\n\t\tfocus: null,\n\t\tfov: null,\n\t\taspect: null,\n\t\tnear: null,\n\t\tfar: null,\n\t\tzoom: null,\n\t\teyeSep: null\n\t};\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: function ( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n} );\n\nconst _position$2 = new Vector3();\nconst _quaternion$3 = new Quaternion();\nconst _scale$1 = new Vector3();\nconst _orientation = new Vector3();\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay ) {\n\n\t\tif ( delay === undefined ) delay = 0;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position$3 = new Vector3();\nconst _quaternion$4 = new Quaternion();\nconst _scale$2 = new Vector3();\nconst _orientation$1 = new Vector3();\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tlet mixFunction,\n\t\tmixFunctionAdditive,\n\t\tsetIdentity;\n\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\t//\n\t// 'add' is used for additive cumulative results\n\t//\n\t// 'work' is optional and is only present for quaternion types. It is used\n\t// to store intermediate quaternion multiplication results\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\tthis._workIndex = 5;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tmixFunction = this._select;\n\n\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t// additive is not relevant for non-numeric types\n\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t}\n\n\tthis._mixBufferRegion = mixFunction;\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\tthis._setIdentity = setIdentity;\n\tthis._origIndex = 3;\n\tthis._addIndex = 4;\n\n\tthis.cumulativeWeight = 0;\n\tthis.cumulativeWeightAdditive = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive: function ( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\t_setAdditiveIdentityNumeric: function () {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t},\n\n\t_setAdditiveIdentityQuaternion: function () {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t},\n\n\t_setAdditiveIdentityOther: function () {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t},\n\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tconst source = this.resolvedProperty;\n\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nfunction AnimationObjectGroup() {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// cached objects followed by the active ones\n\tthis._objects = Array.prototype.slice.call( arguments );\n\n\tthis.nCachedObjects_ = 0; // threshold\n\t// note: read by PropertyBinding.Composite\n\n\tconst indices = {};\n\tthis._indicesByUUID = indices; // for bookkeeping\n\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t}\n\n\tthis._paths = []; // inside: string\n\tthis._parsedPaths = []; // inside: { we don't care, here }\n\tthis._bindings = []; // inside: Array< PropertyBinding >\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\tconst scope = this;\n\n\tthis.stats = {\n\n\t\tobjects: {\n\t\t\tget total() {\n\n\t\t\t\treturn scope._objects.length;\n\n\t\t\t},\n\t\t\tget inUse() {\n\n\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t}\n\t\t},\n\t\tget bindingsPerObject() {\n\n\t\t\treturn scope._bindings.length;\n\n\t\t}\n\n\t};\n\n}\n\nObject.assign( AnimationObjectGroup.prototype, {\n\n\tisAnimationObjectGroup: true,\n\n\tadd: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\tremove: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// remove & forget\n\tuncache: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_: function ( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t},\n\n\tunsubscribe_: function ( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n} );\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot, blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot || null;\n\t\tthis.blendMode = blendMode || clip.blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n} );\n\n/**\n * @author raub / https://github.com/raub\n */\n\n/**\n * Element size is one of:\n * 5126: 4\n * 5123: 2\n * 5122: 2\n * 5125: 4\n * 5124: 4\n * 5120: 1\n * 5121: 1\n */\nfunction GLBufferAttribute( buffer, type, itemSize, elementSize, count ) {\n\n\tthis.buffer = buffer;\n\tthis.type = type;\n\tthis.itemSize = itemSize;\n\tthis.elementSize = elementSize;\n\tthis.count = count;\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( GLBufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( GLBufferAttribute.prototype, {\n\n\tisGLBufferAttribute: true,\n\n\tsetBuffer: function ( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t},\n\n\tsetType: function ( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetItemSize: function ( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetCount: function ( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t},\n\n} );\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector$7 = new Vector2();\n\nclass Box2 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox2', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = new Vector3();\nconst _startEnd = new Vector3();\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n\tthis.hasPositions = false;\n\tthis.hasNormals = false;\n\tthis.hasColors = false;\n\tthis.hasUvs = false;\n\n\tthis.positionArray = null;\n\tthis.normalArray = null;\n\tthis.colorArray = null;\n\tthis.uvArray = null;\n\n\tthis.count = 0;\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nconst _vector$8 = new Vector3();\n\nconst _vector$9 = new Vector3();\nconst _boneMatrix = new Matrix4();\nconst _matrixWorldInv = new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'SkeletonHelper';\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.getInverse( this.root.matrixWorld );\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nconst _vector$a = new Vector3();\nconst _color1 = new Color();\nconst _color2 = new Color();\n\nconst _v1$5 = new Vector3();\nconst _v2$3 = new Vector3();\nconst _v3$1 = new Vector3();\n\nconst _vector$b = new Vector3();\nconst _camera = new Camera();\n\nconst _box$3 = new Box3();\n\nconst _axis = new Vector3();\n\nconst LOD_MIN = 4;\nconst LOD_MAX = 8;\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nconst _flatCamera = new OrthographicCamera();\nconst { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\tnew Vector3( 1, 1, 1 ),\n\tnew Vector3( - 1, 1, 1 ),\n\tnew Vector3( 1, 1, - 1 ),\n\tnew Vector3( - 1, 1, - 1 ),\n\tnew Vector3( 0, PHI, INV_PHI ),\n\tnew Vector3( 0, PHI, - INV_PHI ),\n\tnew Vector3( INV_PHI, 0, PHI ),\n\tnew Vector3( - INV_PHI, 0, PHI ),\n\tnew Vector3( PHI, INV_PHI, 0 ),\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\n\t\tthis._equirectShader = null;\n\t\tthis._cubemapShader = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular ) {\n\n\t\treturn this._fromTexture( equirectangular );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap ) {\n\n\t\treturn this._fromTexture( cubemap );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapShader === null ) {\n\n\t\t\tthis._cubemapShader = _getCubemapShader();\n\t\t\tthis._compileMaterial( this._cubemapShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectShader === null ) {\n\n\t\t\tthis._equirectShader = _getEquirectShader();\n\t\t\tthis._compileMaterial( this._equirectShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._blurMaterial.dispose();\n\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\n\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t// private interface\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._pingPongRenderTarget.dispose();\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets( texture ) { // warning: null texture is valid\n\n\t\tconst params = {\n\t\t\tmagFilter: NearestFilter,\n\t\t\tminFilter: NearestFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: UnsignedByteType,\n\t\t\tformat: RGBEFormat,\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst outputEncoding = renderer.outputEncoding;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\tconst clearColor = renderer.getClearColor();\n\t\tconst clearAlpha = renderer.getClearAlpha();\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.outputEncoding = LinearEncoding;\n\n\t\tlet background = scene.background;\n\t\tif ( background && background.isColor ) {\n\n\t\t\tbackground.convertSRGBToLinear();\n\t\t\t// Convert linear to RGBE\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\n\t\t\trenderer.setClearColor( background, alpha );\n\t\t\tscene.background = null;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\t\t\tif ( col == 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col == 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\t_setViewport( cubeUVRenderTarget,\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.outputEncoding = outputEncoding;\n\t\trenderer.setClearColor( clearColor, clearAlpha );\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\tif ( this._cubemapShader == null ) {\n\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this._equirectShader == null ) {\n\n\t\t\t\tthis._equirectShader = _getEquirectShader();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tif ( ! texture.isCubeTexture ) {\n\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t\t}\n\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i == 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\t\tconst outputSize = _sizeLods[ lodOut ];\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\nfunction _isLDR( texture ) {\n\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\n\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n\n}\n\nfunction _createPlanes() {\n\n\tconst _lodPlanes = [];\n\tconst _sizeLods = [];\n\tconst _sigmas = [];\n\n\tlet lod = LOD_MAX;\n\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\t_sigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\n\t\tconst min = - texelSize / 2;\n\t\tconst max = 1 + texelSize / 2;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tconst weights = new Float32Array( maxSamples );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tconst texelSize = new Vector2( 1, 1 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn /* glsl */`\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t`;\n\n}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nObject.assign( CurvePath.prototype, {\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from path points (for Line or Points objects)\n\n\t\tconst pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from equidistant sampling along the path\n\n\t\tconst pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\tconst geometry = new Geometry();\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n//\n\nObject.assign( Path.prototype, {\n\n\tfromPoints: function ( points ) {\n\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n} );\n\n//\n\nfunction Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\nSkeletonHelper.prototype.update = function () {\n\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\n};\n\n//\n\nObject.assign( Loader.prototype, {\n\n\textractUrlBase: function ( url ) {\n\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\t\treturn LoaderUtils.extractUrlBase( url );\n\n\t}\n\n} );\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\nObject.assign( ObjectLoader.prototype, {\n\n\tsetTexturePath: function ( value ) {\n\n\t\tconsole.warn( 'THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().' );\n\t\treturn this.setResourcePath( value );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Box2.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Sphere.prototype, {\n\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\n} );\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\nObject.assign( MathUtils, {\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\t\treturn MathUtils.floorPowerOfTwo( value );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\t\treturn MathUtils.ceilPowerOfTwo( value );\n\n\t}\n\n} );\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\t\treturn attribute.applyMatrix3( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyToArray: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\t\treturn attribute.applyMatrix4( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nObject.assign( Ray.prototype, {\n\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tarea: function () {\n\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\t\treturn this.getArea();\n\n\t},\n\tbarycoordFromPoint: function ( point, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn this.getBarycoord( point, target );\n\n\t},\n\tmidpoint: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\t\treturn this.getMidpoint( target );\n\n\t},\n\tnormal: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn this.getNormal( target );\n\n\t},\n\tplane: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\t\treturn this.getPlane( target );\n\n\t}\n\n} );\n\nObject.assign( Triangle, {\n\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n\t},\n\tnormal: function ( a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn Triangle.getNormal( a, b, c, target );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textractAllPoints: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\n\t\treturn this.extractPoints( divisions );\n\n\t},\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\n//\n\nObject.assign( Geometry.prototype, {\n\n\tcomputeTangents: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeLineDistances: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\tgetWorldRotation: function () {\n\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( Mesh.prototype, {\n\n\tsetDrawMode: function () {\n\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t},\n\n} );\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nSkinnedMesh.prototype.initBones = function () {\n\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\n\n};\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tcopyIndicesArray: function ( /* indices */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddAttribute: function ( name, attribute ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\treturn this.setAttribute( name, attribute );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t},\n\tremoveAttribute: function ( name ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\t\treturn this.deleteAttribute( name );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InstancedBufferGeometry.prototype, {\n\n\tmaxInstancedCount: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\treturn this.instanceCount;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\tthis.instanceCount = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\n//\n\nObject.assign( ExtrudeBufferGeometry.prototype, {\n\n\tgetArrays: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\n\n\t},\n\n\taddShapeList: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\n\n\t},\n\n\taddShape: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Scene.prototype, {\n\n\tdispose: function () {\n\n\t\tconsole.error( 'THREE.Scene: .dispose() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\n\n\ttransparency: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\treturn this.transmission;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\tthis.transmission = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t},\n\tanimate: function ( callback ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\t\tthis.setAnimationLoop( callback );\n\n\t},\n\tgetCurrentRenderTarget: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\treturn this.getRenderTarget();\n\n\t},\n\tgetMaxAnisotropy: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\t\treturn this.capabilities.getMaxAnisotropy();\n\n\t},\n\tgetPrecision: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\t\treturn this.capabilities.precision;\n\n\t},\n\tresetGLState: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\t\treturn this.state.reset();\n\n\t},\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t},\n\tsetFaceCulling: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n\t},\n\tallocTextureUnit: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n\t},\n\tsetTexture: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n\t},\n\tsetTexture2D: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n\t},\n\tsetTextureCube: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n\t},\n\tgetActiveMipMapLevel: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\t\treturn this.getActiveMipmapLevel();\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t},\n\ttoneMappingWhitePoint: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\t\t\treturn 1.0;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\n\t\t}\n\t},\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tconst scope = this;\n\t\t\tconst audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tconst loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tconst loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\n\t\tif ( this.crossOrigin === 'use-credentials' ) {\n\n\t\t\tloader.setWithCredentials( true );\n\n\t\t}\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\t// Generate mesh faces.\n\t\t\tvar numFaces = dracoGeometry.num_faces();\n\t\t\tvar numIndices = numFaces * 3;\n\t\t\tvar index = new Uint32Array( numIndices );\n\t\t\tvar indexArray = new draco.DracoInt32Array();\n\n\t\t\tfor ( var i = 0; i < numFaces; ++ i ) {\n\n\t\t\t\tdecoder.GetFaceFromMesh( dracoGeometry, i, indexArray );\n\n\t\t\t\tfor ( var j = 0; j < 3; ++ j ) {\n\n\t\t\t\t\tindex[ i * 3 + j ] = indexArray.GetValue( j );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgeometry.index = { array: index, itemSize: 1 };\n\n\t\t\tdraco.destroy( indexArray );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar dracoArray;\n\n\t\tvar array;\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array:\n\t\t\t\tdracoArray = new draco.DracoFloat32Array();\n\t\t\t\tdecoder.GetAttributeFloatForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Float32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int8Array:\n\t\t\t\tdracoArray = new draco.DracoInt8Array();\n\t\t\t\tdecoder.GetAttributeInt8ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int8Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int16Array:\n\t\t\t\tdracoArray = new draco.DracoInt16Array();\n\t\t\t\tdecoder.GetAttributeInt16ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int16Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Int32Array:\n\t\t\t\tdracoArray = new draco.DracoInt32Array();\n\t\t\t\tdecoder.GetAttributeInt32ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Int32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint8Array:\n\t\t\t\tdracoArray = new draco.DracoUInt8Array();\n\t\t\t\tdecoder.GetAttributeUInt8ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint8Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint16Array:\n\t\t\t\tdracoArray = new draco.DracoUInt16Array();\n\t\t\t\tdecoder.GetAttributeUInt16ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint16Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tcase Uint32Array:\n\t\t\t\tdracoArray = new draco.DracoUInt32Array();\n\t\t\t\tdecoder.GetAttributeUInt32ForAllPoints( dracoGeometry, attribute, dracoArray );\n\t\t\t\tarray = new Uint32Array( numValues );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected attribute type.' );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < numValues; i ++ ) {\n\n\t\t\tarray[ i ] = dracoArray.GetValue( i );\n\n\t\t}\n\n\t\tdraco.destroy( dracoArray );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\t\tthis.ktx2Loader = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( scope.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\n\t\t\tif ( scope.crossOrigin === 'use-credentials' ) {\n\n\t\t\t\tloader.setWithCredentials( true );\n\n\t\t\t}\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFLightsExtension( json );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( json ) {\n\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\tvar extension = ( json.extensions && json.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ] ) || {};\n\t\tthis.lightDefs = extension.lights || [];\n\n\t}\n\n\tGLTFLightsExtension.prototype.loadLight = function ( lightIndex ) {\n\n\t\tvar lightDef = this.lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = lightDef.name || ( 'light_' + lightIndex );\n\n\t\treturn Promise.resolve( lightNode );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t * (draft PR https://github.com/KhronosGroup/glTF/pull/1751)\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\t// please see #14031 or #13198 for an alternate approach\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float roughness;', 'uniform vec3 specular;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( 'uniform float metalness;', 'uniform float glossiness;' );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk );\n\t\t\tshader.fragmentShader = shader.fragmentShader.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\t/*eslint-disable*/\n\t\tObject.defineProperties(\n\t\t\tthis,\n\t\t\t{\n\t\t\t\tspecular: {\n\t\t\t\t\tget: function () { return uniforms.specular.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specular.value = v; }\n\t\t\t\t},\n\t\t\t\tspecularMap: {\n\t\t\t\t\tget: function () { return uniforms.specularMap.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.specularMap.value = v; }\n\t\t\t\t},\n\t\t\t\tglossiness: {\n\t\t\t\t\tget: function () { return uniforms.glossiness.value; },\n\t\t\t\t\tset: function ( v ) { uniforms.glossiness.value = v; }\n\t\t\t\t},\n\t\t\t\tglossinessMap: {\n\t\t\t\t\tget: function () { return uniforms.glossinessMap.value; },\n\t\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\t\tuniforms.glossinessMap.value = v;\n\t\t\t\t\t\t//how about something like this - @pailhead\n\t\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\t\t\tthis.defines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tdelete this.defines.USE_ROUGHNESSMAP;\n\t\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\t/*eslint-enable*/\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._markDefs();\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.lightCache, nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tpending.push( func( extensions[ i ] ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'light':\n\t\t\t\t\tdependency = this.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].loadLight( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar loader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tloader = options.manager.getHandler( source.uri );\n\n\t\t}\n\n\t\tif ( ! loader ) {\n\n\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t: this.textureLoader;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\thasAlpha = new DataView( bufferView, 25, 1 ).getUint8( 0, false ) === 6;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = meshDef.name || ( 'mesh_' + meshIndex );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = cameraDef.name;\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ]\n\t\t\t\t&& nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light !== undefined ) {\n\n\t\t\t\tvar lightIndex = nodeDef.extensions[ EXTENSIONS.KHR_LIGHTS_PUNCTUAL ].light;\n\n\t\t\t\tpending.push( parser.getDependency( 'light', lightIndex ).then( function ( light ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.lightCache, lightIndex, light );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName( nodeDef.name );\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = sceneDef.name;\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$1, _b;\nconst $retainerCount = Symbol('retainerCount');\nconst $recentlyUsed = Symbol('recentlyUsed');\nconst $evict = Symbol('evict');\nconst $evictionThreshold = Symbol('evictionThreshold');\nconst $cache = Symbol('cache');\n/**\n * The CacheEvictionPolicy manages the lifecycle for items in a cache,\n * evicting any items outside some threshold bounds in \"recently used\" order,\n * if they are evictable.\n *\n * Items are considered cached as they are retained. When all retainers\n * of an item release it, that item is considered evictable.\n */\nclass CacheEvictionPolicy {\n    constructor(cache, evictionThreshold = 5) {\n        this[_a$1] = new Map();\n        this[_b] = [];\n        this[$cache] = cache;\n        this[$evictionThreshold] = evictionThreshold;\n    }\n    /**\n     * The eviction threshold is the maximum number of items to hold\n     * in cache indefinitely. Items within the threshold (in recently\n     * used order) will continue to be cached even if they have zero\n     * retainers.\n     */\n    set evictionThreshold(value) {\n        this[$evictionThreshold] = value;\n        this[$evict]();\n    }\n    get evictionThreshold() {\n        return this[$evictionThreshold];\n    }\n    /**\n     * A reference to the cache that operates under this policy\n     */\n    get cache() {\n        return this[$cache];\n    }\n    /**\n     * Given an item key, returns the number of retainers of that item\n     */\n    retainerCount(key) {\n        return this[$retainerCount].get(key) || 0;\n    }\n    /**\n     * Resets the internal tracking of cache item retainers. Use only in cases\n     * where it is certain that all retained cache items have been accounted for!\n     */\n    reset() {\n        this[$retainerCount].clear();\n        this[$recentlyUsed] = [];\n    }\n    /**\n     * Mark a given cache item as retained, where the item is represented\n     * by its key. An item can have any number of retainers.\n     */\n    retain(key) {\n        if (!this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, 0);\n        }\n        this[$retainerCount].set(key, this[$retainerCount].get(key) + 1);\n        const recentlyUsedIndex = this[$recentlyUsed].indexOf(key);\n        if (recentlyUsedIndex !== -1) {\n            this[$recentlyUsed].splice(recentlyUsedIndex, 1);\n        }\n        this[$recentlyUsed].unshift(key);\n        // Evict, in case retaining a new item pushed an evictable item beyond the\n        // eviction threshold\n        this[$evict]();\n    }\n    /**\n     * Mark a given cache item as released by one of its retainers, where the item\n     * is represented by its key. When all retainers of an item have released it,\n     * the item is considered evictable.\n     */\n    release(key) {\n        if (this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, Math.max(this[$retainerCount].get(key) - 1, 0));\n        }\n        this[$evict]();\n    }\n    [(_a$1 = $retainerCount, _b = $recentlyUsed, $evict)]() {\n        if (this[$recentlyUsed].length < this[$evictionThreshold]) {\n            return;\n        }\n        for (let i = this[$recentlyUsed].length - 1; i >= this[$evictionThreshold]; --i) {\n            const key = this[$recentlyUsed][i];\n            const retainerCount = this[$retainerCount].get(key);\n            if (retainerCount === 0) {\n                this[$cache].delete(key);\n                this[$recentlyUsed].splice(i, 1);\n            }\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$2, _b$1;\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nconst loadWithLoader = (url, loader, progressCallback = () => { }) => {\n    const onProgress = (event) => {\n        const fraction = event.loaded / event.total;\n        progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n    };\n    return new Promise((resolve, reject) => {\n        loader.load(url, resolve, onProgress, reject);\n    });\n};\nconst cache = new Map();\nconst preloaded = new Map();\nlet dracoDecoderLocation;\nconst dracoLoader = new DRACOLoader();\nconst $loader = Symbol('loader');\nconst $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\nclass CachingGLTFLoader extends EventDispatcher {\n    constructor(GLTFInstance) {\n        super();\n        this[_b$1] = new GLTFLoader();\n        this[$GLTFInstance] = GLTFInstance;\n        this[$loader].setDRACOLoader(dracoLoader);\n    }\n    static setDRACODecoderLocation(url) {\n        dracoDecoderLocation = url;\n        dracoLoader.setDecoderPath(url);\n    }\n    static getDRACODecoderLocation() {\n        return dracoDecoderLocation;\n    }\n    static get cache() {\n        return cache;\n    }\n    /** @nocollapse */\n    static clearCache() {\n        cache.forEach((_value, url) => {\n            this.delete(url);\n        });\n        this[$evictionPolicy].reset();\n    }\n    static has(url) {\n        return cache.has(url);\n    }\n    /** @nocollapse */\n    static async delete(url) {\n        if (!this.has(url)) {\n            return;\n        }\n        const gltfLoads = cache.get(url);\n        preloaded.delete(url);\n        cache.delete(url);\n        const gltf = await gltfLoads;\n        // Dispose of the cached glTF's materials and geometries:\n        gltf.dispose();\n    }\n    /**\n     * Returns true if the model that corresponds to the specified url is\n     * available in our local cache.\n     */\n    static hasFinishedLoading(url) {\n        return !!preloaded.get(url);\n    }\n    get [(_a$2 = $evictionPolicy, _b$1 = $loader, $evictionPolicy)]() {\n        return this.constructor[$evictionPolicy];\n    }\n    /**\n     * Preloads a glTF, populating the cache. Returns a promise that resolves\n     * when the cache is populated.\n     */\n    async preload(url, element, progressCallback = () => { }) {\n        this.dispatchEvent({ type: 'preload', element: element, src: url });\n        if (!cache.has(url)) {\n            const rawGLTFLoads = loadWithLoader(url, this[$loader], (progress) => {\n                progressCallback(progress * 0.8);\n            });\n            const GLTFInstance = this[$GLTFInstance];\n            const gltfInstanceLoads = rawGLTFLoads\n                .then((rawGLTF) => {\n                return GLTFInstance.prepare(rawGLTF);\n            })\n                .then((preparedGLTF) => {\n                progressCallback(0.9);\n                return new GLTFInstance(preparedGLTF);\n            });\n            cache.set(url, gltfInstanceLoads);\n        }\n        await cache.get(url);\n        preloaded.set(url, true);\n        if (progressCallback) {\n            progressCallback(1.0);\n        }\n    }\n    /**\n     * Loads a glTF from the specified url and resolves a unique clone of the\n     * glTF. If the glTF has already been loaded, makes a clone of the cached\n     * copy.\n     */\n    async load(url, element, progressCallback = () => { }) {\n        await this.preload(url, element, progressCallback);\n        const gltf = await cache.get(url);\n        const clone = await gltf.clone();\n        this[$evictionPolicy].retain(url);\n        // Patch dispose so that we can properly account for instance use\n        // in the caching layer:\n        clone.dispose = (() => {\n            const originalDispose = clone.dispose;\n            let disposed = false;\n            return () => {\n                if (disposed) {\n                    return;\n                }\n                disposed = true;\n                originalDispose.apply(clone);\n                this[$evictionPolicy].release(url);\n            };\n        })();\n        return clone;\n    }\n}\nCachingGLTFLoader[_a$2] = new CacheEvictionPolicy(CachingGLTFLoader);\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$3;\nconst SETTLING_TIME = 10000; // plenty long enough\nconst DECAY_MILLISECONDS = 50;\nconst NATURAL_FREQUENCY = 1 / DECAY_MILLISECONDS;\nconst NIL_SPEED = 0.0002 * NATURAL_FREQUENCY;\nconst $velocity = Symbol('velocity');\n/**\n * The Damper class is a generic second-order critically damped system that does\n * one linear step of the desired length of time. The only parameter is\n * DECAY_MILLISECONDS, which should be adjustable: TODO(#580). This common\n * parameter makes all states converge at the same rate regardless of scale.\n * xNormalization is a number to provide the rough scale of x, such that\n * NIL_SPEED clamping also happens at roughly the same convergence for all\n * states.\n */\nclass Damper {\n    constructor() {\n        this[_a$3] = 0;\n    }\n    update(x, xGoal, timeStepMilliseconds, xNormalization) {\n        if (x == null || xNormalization === 0) {\n            return xGoal;\n        }\n        if (x === xGoal && this[$velocity] === 0) {\n            return xGoal;\n        }\n        if (timeStepMilliseconds < 0) {\n            return x;\n        }\n        // Exact solution to a critically damped second-order system, where:\n        // acceleration = NATURAL_FREQUENCY * NATURAL_FREQUENCY * (xGoal - x) -\n        // 2 * NATURAL_FREQUENCY * this[$velocity];\n        const deltaX = (x - xGoal);\n        const intermediateVelocity = this[$velocity] + NATURAL_FREQUENCY * deltaX;\n        const intermediateX = deltaX + timeStepMilliseconds * intermediateVelocity;\n        const decay = Math.exp(-NATURAL_FREQUENCY * timeStepMilliseconds);\n        const newVelocity = (intermediateVelocity - NATURAL_FREQUENCY * intermediateX) * decay;\n        const acceleration = -NATURAL_FREQUENCY * (newVelocity + intermediateVelocity * decay);\n        if (Math.abs(newVelocity) < NIL_SPEED * Math.abs(xNormalization) &&\n            acceleration * deltaX >= 0) {\n            // This ensures the controls settle and stop calling this function instead\n            // of asymptotically approaching their goal.\n            this[$velocity] = 0;\n            return xGoal;\n        }\n        else {\n            this[$velocity] = newVelocity;\n            return xGoal + intermediateX * decay;\n        }\n    }\n}\n_a$3 = $velocity;\n\nvar CSS2DObject = function ( element ) {\n\n\tObject3D.call( this );\n\n\tthis.element = element || document.createElement( 'div' );\n\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nCSS2DObject.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: CSS2DObject,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n//\n\nvar CSS2DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar vector = new Vector3();\n\tvar viewMatrix = new Matrix4();\n\tvar viewProjectionMatrix = new Matrix4();\n\n\tvar cache = {\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t};\n\n\tvar renderObject = function ( object, scene, camera ) {\n\n\t\tif ( object instanceof CSS2DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\n\n\t\t\tvar element = object.element;\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\telement.style.WebkitTransform = style;\n\t\t\telement.style.MozTransform = style;\n\t\t\telement.style.oTransform = style;\n\t\t\telement.style.transform = style;\n\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\n\n\t\t\tvar objectData = {\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t};\n\n\t\t\tcache.objects.set( object, objectData );\n\n\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t}\n\n\t};\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tvar filterAndFlatten = function ( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof CSS2DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t};\n\n\tvar zOrder = function ( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\n\n\t\trenderObject( scene, scene, camera );\n\t\tzOrder( scene );\n\n\t};\n\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst numberNode = (value, unit) => ({ type: 'number', number: value, unit });\n/**\n * Given a string representing a comma-separated set of CSS-like expressions,\n * parses and returns an array of ASTs that correspond to those expressions.\n *\n * Currently supported syntax includes:\n *\n *  - functions (top-level and nested)\n *  - calc() arithmetic operators\n *  - numbers with units\n *  - hexidecimal-encoded colors in 3, 6 or 8 digit form\n *  - idents\n *\n * All syntax is intended to match the parsing rules and semantics of the actual\n * CSS spec as closely as possible.\n *\n * @see https://www.w3.org/TR/CSS2/\n * @see https://www.w3.org/TR/css-values-3/\n */\nconst parseExpressions = (() => {\n    const cache = {};\n    const MAX_PARSE_ITERATIONS = 1000; // Arbitrarily large\n    return (inputString) => {\n        const cacheKey = inputString;\n        if (cacheKey in cache) {\n            return cache[cacheKey];\n        }\n        const expressions = [];\n        let parseIterations = 0;\n        while (inputString) {\n            if (++parseIterations > MAX_PARSE_ITERATIONS) {\n                // Avoid a potentially infinite loop due to typos:\n                inputString = '';\n                break;\n            }\n            const expressionParseResult = parseExpression(inputString);\n            const expression = expressionParseResult.nodes[0];\n            if (expression == null || expression.terms.length === 0) {\n                break;\n            }\n            expressions.push(expression);\n            inputString = expressionParseResult.remainingInput;\n        }\n        return cache[cacheKey] = expressions;\n    };\n})();\n/**\n * Parse a single expression. For the purposes of our supported syntax, an\n * expression is the set of semantically meaningful terms that appear before the\n * next comma, or between the parens of a function invokation.\n */\nconst parseExpression = (() => {\n    const IS_IDENT_RE = /^(\\-\\-|[a-z\\u0240-\\uffff])/i;\n    const IS_OPERATOR_RE = /^([\\*\\+\\/]|[\\-]\\s)/i;\n    const IS_EXPRESSION_END_RE = /^[\\),]/;\n    const FUNCTION_ARGUMENTS_FIRST_TOKEN = '(';\n    const HEX_FIRST_TOKEN = '#';\n    return (inputString) => {\n        const terms = [];\n        while (inputString.length) {\n            inputString = inputString.trim();\n            if (IS_EXPRESSION_END_RE.test(inputString)) {\n                break;\n            }\n            else if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                inputString = remainingInput;\n                terms.push({\n                    type: 'function',\n                    name: { type: 'ident', value: 'calc' },\n                    arguments: nodes\n                });\n            }\n            else if (IS_IDENT_RE.test(inputString)) {\n                const identParseResult = parseIdent(inputString);\n                const identNode = identParseResult.nodes[0];\n                inputString = identParseResult.remainingInput;\n                if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                    const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                    terms.push({ type: 'function', name: identNode, arguments: nodes });\n                    inputString = remainingInput;\n                }\n                else {\n                    terms.push(identNode);\n                }\n            }\n            else if (IS_OPERATOR_RE.test(inputString)) {\n                // Operators are always a single character, so just pluck them out:\n                terms.push({ type: 'operator', value: inputString[0] });\n                inputString = inputString.slice(1);\n            }\n            else {\n                const { nodes, remainingInput } = inputString[0] === HEX_FIRST_TOKEN ?\n                    parseHex(inputString) :\n                    parseNumber(inputString);\n                // The remaining string may not have had any meaningful content. Exit\n                // early if this is the case:\n                if (nodes.length === 0) {\n                    break;\n                }\n                terms.push(nodes[0]);\n                inputString = remainingInput;\n            }\n        }\n        return { nodes: [{ type: 'expression', terms }], remainingInput: inputString };\n    };\n})();\n/**\n * An ident is something like a function name or the keyword \"auto\".\n */\nconst parseIdent = (() => {\n    const NOT_IDENT_RE = /[^a-z^0-9^_^\\-^\\u0240-\\uffff]/i;\n    return (inputString) => {\n        const match = inputString.match(NOT_IDENT_RE);\n        const ident = match == null ? inputString : inputString.substr(0, match.index);\n        const remainingInput = match == null ? '' : inputString.substr(match.index);\n        return { nodes: [{ type: 'ident', value: ident }], remainingInput };\n    };\n})();\n/**\n * Parses a number. A number value can be expressed with an integer or\n * non-integer syntax, and usually includes a unit (but does not strictly\n * require one for our purposes).\n */\nconst parseNumber = (() => {\n    // @see https://www.w3.org/TR/css-syntax/#number-token-diagram\n    const VALUE_RE = /[\\+\\-]?(\\d+[\\.]\\d+|\\d+|[\\.]\\d+)([eE][\\+\\-]?\\d+)?/;\n    const UNIT_RE = /^[a-z%]+/i;\n    const ALLOWED_UNITS = /^(m|mm|cm|rad|deg|[%])$/;\n    return (inputString) => {\n        const valueMatch = inputString.match(VALUE_RE);\n        const value = valueMatch == null ? '0' : valueMatch[0];\n        inputString = value == null ? inputString : inputString.slice(value.length);\n        const unitMatch = inputString.match(UNIT_RE);\n        let unit = unitMatch != null && unitMatch[0] !== '' ? unitMatch[0] : null;\n        const remainingInput = unitMatch == null ? inputString : inputString.slice(unit.length);\n        if (unit != null && !ALLOWED_UNITS.test(unit)) {\n            unit = null;\n        }\n        return {\n            nodes: [{\n                    type: 'number',\n                    number: parseFloat(value) || 0,\n                    unit: unit\n                }],\n            remainingInput\n        };\n    };\n})();\n/**\n * Parses a hexidecimal-encoded color in 3, 6 or 8 digit form.\n */\nconst parseHex = (() => {\n    // TODO(cdata): right now we don't actually enforce the number of digits\n    const HEX_RE = /^[a-f0-9]*/i;\n    return (inputString) => {\n        inputString = inputString.slice(1).trim();\n        const hexMatch = inputString.match(HEX_RE);\n        const nodes = hexMatch == null ? [] : [{ type: 'hex', value: hexMatch[0] }];\n        return {\n            nodes,\n            remainingInput: hexMatch == null ? inputString :\n                inputString.slice(hexMatch[0].length)\n        };\n    };\n})();\n/**\n * Parses arguments passed to a function invokation (e.g., the expressions\n * within a matched set of parens).\n */\nconst parseFunctionArguments = (inputString) => {\n    const expressionNodes = [];\n    // Consume the opening paren\n    inputString = inputString.slice(1).trim();\n    while (inputString.length) {\n        const expressionParseResult = parseExpression(inputString);\n        expressionNodes.push(expressionParseResult.nodes[0]);\n        inputString = expressionParseResult.remainingInput.trim();\n        if (inputString[0] === ',') {\n            inputString = inputString.slice(1).trim();\n        }\n        else if (inputString[0] === ')') {\n            // Consume the closing paren and stop parsing\n            inputString = inputString.slice(1);\n            break;\n        }\n    }\n    return { nodes: expressionNodes, remainingInput: inputString };\n};\nconst $visitedTypes = Symbol('visitedTypes');\n/**\n * An ASTWalker walks an array of ASTs such as the type produced by\n * parseExpressions and invokes a callback for a configured set of nodes that\n * the user wishes to \"visit\" during the walk.\n */\nclass ASTWalker {\n    constructor(visitedTypes) {\n        this[$visitedTypes] = visitedTypes;\n    }\n    /**\n     * Walk the given set of ASTs, and invoke the provided callback for nodes that\n     * match the filtered set that the ASTWalker was constructed with.\n     */\n    walk(ast, callback) {\n        const remaining = ast.slice();\n        while (remaining.length) {\n            const next = remaining.shift();\n            if (this[$visitedTypes].indexOf(next.type) > -1) {\n                callback(next);\n            }\n            switch (next.type) {\n                case 'expression':\n                    remaining.unshift(...next.terms);\n                    break;\n                case 'function':\n                    remaining.unshift(next.name, ...next.arguments);\n                    break;\n            }\n        }\n    }\n}\nconst ZERO = Object.freeze({ type: 'number', number: 0, unit: null });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Ensures that a given number is expressed in radians. If the number is already\n * in radians, does nothing. If the value is in degrees, converts it to radians.\n * If the value has no specified unit, the unit is assumed to be radians. If the\n * value is not in radians or degrees, the value is resolved as 0 radians.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst degreesToRadians = (numberNode, fallbackRadianValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackRadianValue;\n        unit = 'rad';\n    }\n    else if (numberNode.unit === 'rad' || numberNode.unit == null) {\n        return numberNode;\n    }\n    const valueIsDegrees = unit === 'deg' && number != null;\n    const value = valueIsDegrees ? number : 0;\n    const radians = value * Math.PI / 180;\n    return { type: 'number', number: radians, unit: 'rad' };\n};\n/**\n * Converts a given length to meters. Currently supported input units are\n * meters, centimeters and millimeters.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst lengthToBaseMeters = (numberNode, fallbackMeterValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackMeterValue;\n        unit = 'm';\n    }\n    else if (numberNode.unit === 'm') {\n        return numberNode;\n    }\n    let scale;\n    switch (unit) {\n        default:\n            scale = 1;\n            break;\n        case 'cm':\n            scale = 1 / 100;\n            break;\n        case 'mm':\n            scale = 1 / 1000;\n            break;\n    }\n    const value = scale * number;\n    return { type: 'number', number: value, unit: 'm' };\n};\n/**\n * Normalizes the unit of a given input number so that it is expressed in a\n * preferred unit. For length nodes, the return value will be expressed in\n * meters. For angle nodes, the return value will be expressed in radians.\n *\n * Also takes a fallback number that is used when the number value is not a\n * valid number or when the unit of the given number cannot be normalized.\n */\nconst normalizeUnit = (() => {\n    const identity = (node) => node;\n    const unitNormalizers = {\n        'rad': identity,\n        'deg': degreesToRadians,\n        'm': identity,\n        'mm': lengthToBaseMeters,\n        'cm': lengthToBaseMeters\n    };\n    return (node, fallback = ZERO) => {\n        let { number, unit } = node;\n        if (!isFinite(number)) {\n            number = fallback.number;\n            unit = fallback.unit;\n        }\n        if (unit == null) {\n            return node;\n        }\n        const normalize = unitNormalizers[unit];\n        if (normalize == null) {\n            return fallback;\n        }\n        return normalize(node);\n    };\n})();\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$4, _b$2, _c, _d;\nconst $slot = Symbol('slot');\nconst $pivot = Symbol('pivot');\nconst $referenceCount = Symbol('referenceCount');\nconst $updateVisibility = Symbol('updateVisibility');\nconst $visible = Symbol('visible');\n/**\n * The Hotspot object is a reference-counted slot. If decrement() returns true,\n * it should be removed from the tree so it can be garbage-collected.\n */\nclass Hotspot extends CSS2DObject {\n    constructor(config) {\n        super(document.createElement('div'));\n        this.normal = new Vector3(0, 1, 0);\n        this[_a$4] = false;\n        this[_b$2] = 1;\n        this[_c] = document.createElement('div');\n        this[_d] = document.createElement('slot');\n        this.element.classList.add('annotation-wrapper');\n        this[$slot].name = config.name;\n        this.element.appendChild(this[$pivot]);\n        this[$pivot].appendChild(this[$slot]);\n        this.updatePosition(config.position);\n        this.updateNormal(config.normal);\n    }\n    /**\n     * Sets the hotspot to be in the highly visible foreground state.\n     */\n    show() {\n        if (!this[$visible]) {\n            this[$visible] = true;\n            this[$updateVisibility]();\n        }\n    }\n    /**\n     * Sets the hotspot to be in the diminished background state.\n     */\n    hide() {\n        if (this[$visible]) {\n            this[$visible] = false;\n            this[$updateVisibility]();\n        }\n    }\n    /**\n     * Call this when adding elements to the same slot to keep track.\n     */\n    increment() {\n        this[$referenceCount]++;\n    }\n    /**\n     * Call this when removing elements from the slot; returns true when the slot\n     * is unused.\n     */\n    decrement() {\n        if (this[$referenceCount] > 0) {\n            --this[$referenceCount];\n        }\n        return this[$referenceCount] === 0;\n    }\n    /**\n     * Change the position of the hotspot to the input string, in the same format\n     * as the data-position attribute.\n     */\n    updatePosition(position) {\n        if (position == null)\n            return;\n        const positionNodes = parseExpressions(position)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.position.setComponent(i, normalizeUnit(positionNodes[i]).number);\n        }\n    }\n    /**\n     * Change the hotspot's normal to the input string, in the same format as the\n     * data-normal attribute.\n     */\n    updateNormal(normal) {\n        if (normal == null)\n            return;\n        const normalNodes = parseExpressions(normal)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.normal.setComponent(i, normalizeUnit(normalNodes[i]).number);\n        }\n    }\n    orient(radians) {\n        this[$pivot].style.transform = `rotate(${radians}rad)`;\n    }\n    [(_a$4 = $visible, _b$2 = $referenceCount, _c = $pivot, _d = $slot, $updateVisibility)]() {\n        // NOTE: IE11 doesn't support a second arg for classList.toggle\n        if (this[$visible]) {\n            this.element.classList.remove('hide');\n        }\n        else {\n            this.element.classList.add('hide');\n        }\n        // NOTE: ShadyDOM doesn't support slot.assignedElements, otherwise we could\n        // use that here.\n        this[$slot].assignedNodes().forEach((node) => {\n            if (node.nodeType !== Node.ELEMENT_NODE) {\n                return;\n            }\n            const element = node;\n            // Visibility attribute can be configured per-node in the hotspot:\n            const visibilityAttribute = element.dataset.visibilityAttribute;\n            if (visibilityAttribute != null) {\n                const attributeName = `data-${visibilityAttribute}`;\n                // NOTE: IE11 doesn't support toggleAttribute\n                if (this[$visible]) {\n                    element.setAttribute(attributeName, '');\n                }\n                else {\n                    element.removeAttribute(attributeName);\n                }\n            }\n            element.dispatchEvent(new CustomEvent('hotspot-visibility', {\n                detail: {\n                    visible: this[$visible],\n                },\n            }));\n        });\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nconst reduceVertices = (model, func) => {\n    let value = 0;\n    const vector = new Vector3();\n    model.traverse((object) => {\n        let i, l;\n        object.updateWorldMatrix(false, false);\n        let geometry = object.geometry;\n        if (geometry !== undefined) {\n            if (geometry.isGeometry) {\n                let vertices = geometry.vertices;\n                for (i = 0, l = vertices.length; i < l; i++) {\n                    vector.copy(vertices[i]);\n                    vector.applyMatrix4(object.matrixWorld);\n                    value = func(value, vector);\n                }\n            }\n            else if (geometry.isBufferGeometry) {\n                let attribute = geometry.attributes.position;\n                if (attribute !== undefined) {\n                    for (i = 0, l = attribute.count; i < l; i++) {\n                        vector.fromBufferAttribute(attribute, i)\n                            .applyMatrix4(object.matrixWorld);\n                        value = func(value, vector);\n                    }\n                }\n            }\n        }\n    });\n    return value;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Nothing within Offset of the bottom of the model casts a shadow\n// (this is to avoid having a baked-in shadow plane cast its own shadow).\nconst OFFSET = 0.001;\n// The softness [0, 1] of the shadow is mapped to a resolution between\n// 2^LOG_MAX_RESOLUTION and 2^LOG_MIN_RESOLUTION.\nconst LOG_MAX_RESOLUTION = 9;\nconst LOG_MIN_RESOLUTION = 6;\n// Animated models are not in general contained in their bounding box, as this\n// is calculated only for their resting pose. We create a cubic shadow volume\n// for animated models sized to their largest bounding box dimesion multiplied\n// by this scale factor.\nconst ANIMATION_SCALING = 2;\n/**\n * The Shadow class creates a shadow that fits a given model and follows a\n * target. This shadow will follow the model without any updates needed so long\n * as the shadow and model are both parented to the same object (call it the\n * scene) and this scene is passed as the target parameter to the shadow's\n * constructor. We also must constrain the scene to motion within the horizontal\n * plane and call the setRotation() method whenever the model's Y-axis rotation\n * changes. For motion outside of the horizontal plane, this.needsUpdate must be\n * set to true.\n *\n * The softness of the shadow is controlled by changing its resolution, making\n * softer shadows faster, but less precise.\n */\nclass Shadow extends DirectionalLight {\n    constructor(model, softness) {\n        super();\n        this.shadowMaterial = new ShadowMaterial;\n        this.boundingBox = new Box3;\n        this.size = new Vector3;\n        this.isAnimated = false;\n        this.needsUpdate = false;\n        // We use the light only to cast a shadow, not to light the scene.\n        this.intensity = 0;\n        this.castShadow = true;\n        this.frustumCulled = false;\n        this.floor = new Mesh(new PlaneBufferGeometry, this.shadowMaterial);\n        this.floor.rotateX(-Math.PI / 2);\n        this.floor.receiveShadow = true;\n        this.floor.castShadow = false;\n        this.floor.frustumCulled = false;\n        this.add(this.floor);\n        this.shadow.camera.up.set(0, 0, 1);\n        model.add(this);\n        this.target = model;\n        this.setModel(model, softness);\n    }\n    /**\n     * Update the shadow's size and position for a new model. Softness is also\n     * needed, as this controls the shadow's resolution.\n     */\n    setModel(model, softness) {\n        this.isAnimated = model.animationNames.length > 0;\n        this.boundingBox.copy(model.boundingBox);\n        this.size.copy(model.size);\n        const { boundingBox, size } = this;\n        if (this.isAnimated) {\n            const maxDimension = Math.max(size.x, size.y, size.z) * ANIMATION_SCALING;\n            size.y = maxDimension;\n            boundingBox.expandByVector(size.subScalar(maxDimension).multiplyScalar(-0.5));\n            boundingBox.max.y = boundingBox.min.y + maxDimension;\n            size.set(maxDimension, maxDimension, maxDimension);\n        }\n        const shadowOffset = size.y * OFFSET;\n        this.position.y = boundingBox.max.y + shadowOffset;\n        boundingBox.getCenter(this.floor.position);\n        this.setSoftness(softness);\n    }\n    /**\n     * Update the shadow's resolution based on softness (between 0 and 1). Should\n     * not be called frequently, as this results in reallocation.\n     */\n    setSoftness(softness) {\n        const resolution = Math.pow(2, LOG_MAX_RESOLUTION -\n            softness * (LOG_MAX_RESOLUTION - LOG_MIN_RESOLUTION));\n        this.setMapSize(resolution);\n    }\n    /**\n     * Lower-level version of the above function.\n     */\n    setMapSize(maxMapSize) {\n        const { camera, mapSize, map } = this.shadow;\n        const { size, boundingBox } = this;\n        if (map != null) {\n            map.dispose();\n            this.shadow.map = null;\n        }\n        if (this.isAnimated) {\n            maxMapSize *= ANIMATION_SCALING;\n        }\n        const width = Math.floor(size.x > size.z ? maxMapSize : maxMapSize * size.x / size.z);\n        const height = Math.floor(size.x > size.z ? maxMapSize * size.z / size.x : maxMapSize);\n        mapSize.set(width, height);\n        // These pads account for the softening radius around the shadow.\n        const widthPad = 2.5 * size.x / width;\n        const heightPad = 2.5 * size.z / height;\n        camera.left = -boundingBox.max.x - widthPad;\n        camera.right = -boundingBox.min.x + widthPad;\n        camera.bottom = boundingBox.min.z - heightPad;\n        camera.top = boundingBox.max.z + heightPad;\n        this.setScaleAndOffset(camera.zoom, 0);\n        this.shadow.updateMatrices(this);\n        this.floor.scale.set(size.x + 2 * widthPad, size.z + 2 * heightPad, 1);\n        this.needsUpdate = true;\n    }\n    /**\n     * Set the shadow's intensity (0 to 1), which is just its opacity. Turns off\n     * shadow rendering if zero.\n     */\n    setIntensity(intensity) {\n        this.shadowMaterial.opacity = intensity;\n        if (intensity > 0) {\n            this.visible = true;\n            this.floor.visible = true;\n        }\n        else {\n            this.visible = false;\n            this.floor.visible = false;\n        }\n    }\n    getIntensity() {\n        return this.shadowMaterial.opacity;\n    }\n    /**\n     * The shadow does not rotate with its parent transforms, so the rotation must\n     * be manually updated here if it rotates in world space. The input is its\n     * absolute orientation about the Y-axis (other rotations are not supported).\n     */\n    setRotation(radiansY) {\n        this.shadow.camera.up.set(Math.sin(radiansY), 0, Math.cos(radiansY));\n        this.shadow.updateMatrices(this);\n    }\n    /**\n     * The scale is also not inherited from parents, so it must be set here in\n     * accordance with any transforms. An offset can also be specified to move the\n     * shadow vertically relative to the bottom of the model. Positive is up, so\n     * values are generally negative.\n     */\n    setScaleAndOffset(scale, offset) {\n        const sizeY = this.size.y;\n        const inverseScale = 1 / scale;\n        // Floor plane is up slightly from the bottom of the bounding box to avoid\n        // Z-fighting with baked-in shadows and to stay inside the shadow camera.\n        const shadowOffset = sizeY * OFFSET;\n        this.floor.position.y = 2 * shadowOffset - sizeY + offset * inverseScale;\n        const { camera } = this.shadow;\n        camera.zoom = scale;\n        camera.near = 0;\n        camera.far = sizeY * scale - offset;\n        camera.projectionMatrix.makeOrthographic(camera.left * scale, camera.right * scale, camera.top * scale, camera.bottom * scale, camera.near, camera.far);\n        camera.projectionMatrixInverse.getInverse(camera.projectionMatrix);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$5, _b$3;\nconst DEFAULT_FOV_DEG = 45;\nconst DEFAULT_HALF_FOV = (DEFAULT_FOV_DEG / 2) * Math.PI / 180;\nconst SAFE_RADIUS_RATIO = Math.sin(DEFAULT_HALF_FOV);\nconst DEFAULT_TAN_FOV = Math.tan(DEFAULT_HALF_FOV);\nconst $shadow = Symbol('shadow');\nconst $cancelPendingSourceChange = Symbol('cancelPendingSourceChange');\nconst $currentGLTF = Symbol('currentGLTF');\nconst view = new Vector3();\nconst target = new Vector3();\nconst normalWorld = new Vector3();\n/**\n * An Object3D that can swap out its underlying model.\n */\nclass Model extends Object3D {\n    /**\n     * Creates a model.\n     */\n    constructor() {\n        super();\n        this[_a$5] = null;\n        this[_b$3] = null;\n        this.animationsByName = new Map();\n        this.currentAnimationAction = null;\n        this.animations = [];\n        this.modelContainer = new Object3D();\n        this.animationNames = [];\n        this.boundingBox = new Box3();\n        this.size = new Vector3();\n        this.idealCameraDistance = 0;\n        this.fieldOfViewAspect = 0;\n        this.userData = { url: null };\n        this.url = null;\n        this.name = 'Model';\n        this.modelContainer.name = 'ModelContainer';\n        this.add(this.modelContainer);\n        this.mixer = new AnimationMixer(this.modelContainer);\n    }\n    get currentGLTF() {\n        return this[$currentGLTF];\n    }\n    /**\n     * Returns a boolean indicating whether or not there is a\n     * loaded model attached.\n     */\n    hasModel() {\n        return !!this.modelContainer.children.length;\n    }\n    /**\n     * Pass in a THREE.Object3D to be controlled\n     * by this model.\n     */\n    setObject(model) {\n        this.clear();\n        this.modelContainer.add(model);\n        this.updateFraming();\n        this.dispatchEvent({ type: 'model-load' });\n    }\n    async setSource(element, url, progressCallback) {\n        if (!url || url === this.url) {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n            return;\n        }\n        // If we have pending work due to a previous source change in progress,\n        // cancel it so that we do not incur a race condition:\n        if (this[$cancelPendingSourceChange] != null) {\n            this[$cancelPendingSourceChange]();\n            this[$cancelPendingSourceChange] = null;\n        }\n        this.url = url;\n        let gltf;\n        try {\n            gltf = await new Promise(async (resolve, reject) => {\n                this[$cancelPendingSourceChange] = () => reject();\n                try {\n                    const result = await element[$renderer].loader.load(url, element, progressCallback);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n        }\n        catch (error) {\n            if (error == null) {\n                // Loading was cancelled, so silently return\n                return;\n            }\n            throw error;\n        }\n        this.clear();\n        this[$currentGLTF] = gltf;\n        if (gltf != null) {\n            this.modelContainer.add(gltf.scene);\n        }\n        const { animations } = gltf;\n        const animationsByName = new Map();\n        const animationNames = [];\n        for (const animation of animations) {\n            animationsByName.set(animation.name, animation);\n            animationNames.push(animation.name);\n        }\n        this.animations = animations;\n        this.animationsByName = animationsByName;\n        this.animationNames = animationNames;\n        this.userData.url = url;\n        this.updateFraming();\n        this.dispatchEvent({ type: 'model-load', url });\n    }\n    set animationTime(value) {\n        this.mixer.setTime(value);\n    }\n    get animationTime() {\n        if (this.currentAnimationAction != null) {\n            return this.currentAnimationAction.time;\n        }\n        return 0;\n    }\n    get hasActiveAnimation() {\n        return this.currentAnimationAction != null;\n    }\n    /**\n     * Plays an animation if there are any associated with the current model.\n     * Accepts an optional string name of an animation to play. If no name is\n     * provided, or if no animation is found by the given name, always falls back\n     * to playing the first animation.\n     */\n    playAnimation(name = null, crossfadeTime = 0) {\n        const { animations } = this;\n        if (animations == null || animations.length === 0) {\n            console.warn(`Cannot play animation (model does not have any animations)`);\n            return;\n        }\n        let animationClip = null;\n        if (name != null) {\n            animationClip = this.animationsByName.get(name);\n        }\n        if (animationClip == null) {\n            animationClip = animations[0];\n        }\n        try {\n            const { currentAnimationAction: lastAnimationAction } = this;\n            this.currentAnimationAction =\n                this.mixer.clipAction(animationClip, this).play();\n            this.currentAnimationAction.enabled = true;\n            if (lastAnimationAction != null &&\n                this.currentAnimationAction !== lastAnimationAction) {\n                this.currentAnimationAction.crossFadeFrom(lastAnimationAction, crossfadeTime, false);\n            }\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    stopAnimation() {\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction.reset();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n    }\n    updateAnimation(step) {\n        this.mixer.update(step);\n    }\n    clear() {\n        this.url = null;\n        this.userData = { url: null };\n        const gltf = this[$currentGLTF];\n        // Remove all current children\n        if (gltf != null) {\n            for (const child of this.modelContainer.children) {\n                this.modelContainer.remove(child);\n            }\n            gltf.dispose();\n            this[$currentGLTF] = null;\n        }\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n        this.mixer.uncacheRoot(this);\n    }\n    /**\n     * Calculates the idealCameraDistance and fieldOfViewAspect that allows the 3D\n     * object to be framed tightly in a 2D window of any aspect ratio without\n     * clipping at any camera orbit. The camera's center target point can be\n     * optionally specified. If no center is specified, it defaults to the center\n     * of the bounding box, which means asymmetric models will tend to be tight on\n     * one side instead of both. Proper choice of center can correct this.\n     */\n    updateFraming(center = null) {\n        this.remove(this.modelContainer);\n        if (center == null) {\n            this.boundingBox.setFromObject(this.modelContainer);\n            this.boundingBox.getSize(this.size);\n            center = this.boundingBox.getCenter(new Vector3);\n        }\n        const radiusSquared = (value, vertex) => {\n            return Math.max(value, center.distanceToSquared(vertex));\n        };\n        const framedRadius = Math.sqrt(reduceVertices(this.modelContainer, radiusSquared));\n        this.idealCameraDistance = framedRadius / SAFE_RADIUS_RATIO;\n        const horizontalFov = (value, vertex) => {\n            vertex.sub(center);\n            const radiusXZ = Math.sqrt(vertex.x * vertex.x + vertex.z * vertex.z);\n            return Math.max(value, radiusXZ / (this.idealCameraDistance - Math.abs(vertex.y)));\n        };\n        this.fieldOfViewAspect =\n            reduceVertices(this.modelContainer, horizontalFov) / DEFAULT_TAN_FOV;\n        this.add(this.modelContainer);\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity, shadowSoftness) {\n        let shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setIntensity(shadowIntensity);\n            shadow.setModel(this, shadowSoftness);\n        }\n        else if (shadowIntensity > 0) {\n            shadow = new Shadow(this, shadowSoftness);\n            shadow.setIntensity(shadowIntensity);\n            this[$shadow] = shadow;\n        }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setSoftness(softness);\n        }\n    }\n    /**\n     * The shadow must be rotated manually to match any global rotation applied to\n     * this model. The input is the global orientation about the Y axis.\n     */\n    setShadowRotation(radiansY) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setRotation(radiansY);\n        }\n    }\n    /**\n     * Call when updating the shadow; returns true if an update is needed and\n     * resets the state.\n     */\n    updateShadow() {\n        const shadow = this[$shadow];\n        if (shadow == null) {\n            return false;\n        }\n        else {\n            const { needsUpdate } = shadow;\n            shadow.needsUpdate = false;\n            return needsUpdate;\n        }\n    }\n    /**\n     * Shift the floor vertically from the bottom of the model's bounding box by\n     * offset (should generally be negative).\n     */\n    setShadowScaleAndOffset(scale, offset) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setScaleAndOffset(scale, offset);\n        }\n    }\n    /**\n     * The following methods are for operating on the set of Hotspot objects\n     * attached to the scene. These come from DOM elements, provided to slots by\n     * the Annotation Mixin.\n     */\n    addHotspot(hotspot) {\n        this.add(hotspot);\n    }\n    removeHotspot(hotspot) {\n        this.remove(hotspot);\n    }\n    /**\n     * Helper method to apply a function to all hotspots.\n     */\n    forHotspots(func) {\n        const { children } = this;\n        for (let i = 0, l = children.length; i < l; i++) {\n            const hotspot = children[i];\n            if (hotspot instanceof Hotspot) {\n                func(hotspot);\n            }\n        }\n    }\n    /**\n     * Update the CSS visibility of the hotspots based on whether their normals\n     * point toward the camera.\n     */\n    updateHotspots(viewerPosition) {\n        this.forHotspots((hotspot) => {\n            view.copy(viewerPosition);\n            target.setFromMatrixPosition(hotspot.matrixWorld);\n            view.sub(target);\n            normalWorld.copy(hotspot.normal).transformDirection(this.matrixWorld);\n            if (view.dot(normalWorld) < 0) {\n                hotspot.hide();\n            }\n            else {\n                hotspot.show();\n            }\n        });\n    }\n    /**\n     * Rotate all hotspots to an absolute orientation given by the input number of\n     * radians. Zero returns them to upright.\n     */\n    orientHotspots(radians) {\n        this.forHotspots((hotspot) => {\n            hotspot.orient(radians);\n        });\n    }\n    /**\n     * Set the rendering visibility of all hotspots. This is used to hide them\n     * during transitions and such.\n     */\n    setHotspotsVisibility(visible) {\n        this.forHotspots((hotspot) => {\n            hotspot.visible = visible;\n        });\n    }\n}\n_a$5 = $shadow, _b$3 = $currentGLTF;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_TAN_FOV$1 = Math.tan((DEFAULT_FOV_DEG / 2) * Math.PI / 180);\nconst raycaster = new Raycaster();\nconst vector3 = new Vector3();\n/**\n * A THREE.Scene object that takes a Model and CanvasHTMLElement and\n * constructs a framed scene based off of the canvas dimensions.\n * Provides lights and cameras to be used in a renderer.\n */\nclass ModelScene extends Scene {\n    constructor({ canvas, element, width, height }) {\n        super();\n        this.aspect = 1;\n        this.shadowIntensity = 0;\n        this.shadowSoftness = 1;\n        this.width = 1;\n        this.height = 1;\n        this.isDirty = false;\n        this.context = null;\n        this.exposure = 1;\n        this.canScale = true;\n        this.framedFieldOfView = DEFAULT_FOV_DEG;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.goalTarget = new Vector3();\n        this.targetDamperX = new Damper();\n        this.targetDamperY = new Damper();\n        this.targetDamperZ = new Damper();\n        this.name = 'ModelScene';\n        this.element = element;\n        this.canvas = canvas;\n        this.model = new Model();\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.camera.name = 'MainCamera';\n        this.activeCamera = this.camera;\n        this.add(this.model);\n        this.setSize(width, height);\n        this.model.addEventListener('model-load', (event) => this.onModelLoad(event));\n    }\n    /**\n     * Function to create the context lazily, as when there is only one\n     * <model-viewer> element, the renderer's 3D context can be displayed\n     * directly. This extra context is necessary to copy the renderings into when\n     * there are more than one.\n     */\n    createContext() {\n        {\n            this.context = this.canvas.getContext('2d');\n        }\n    }\n    /**\n     * Sets the model via URL.\n     */\n    async setModelSource(source, progressCallback) {\n        try {\n            await this.model.setSource(this.element, source, progressCallback);\n        }\n        catch (e) {\n            throw new Error(`Could not set model source to '${source}': ${e.message}`);\n        }\n    }\n    /**\n     * Updates the ModelScene for a new container size in CSS pixels.\n     */\n    setSize(width, height) {\n        if (this.width === width && this.height === height) {\n            return;\n        }\n        this.width = Math.max(width, 1);\n        this.height = Math.max(height, 1);\n        this.aspect = this.width / this.height;\n        this.frameModel();\n        this.isDirty = true;\n    }\n    /**\n     * Set's the framedFieldOfView based on the aspect ratio of the window in\n     * order to keep the model fully visible at any camera orientation.\n     */\n    frameModel() {\n        const vertical = DEFAULT_TAN_FOV$1 *\n            Math.max(1, this.model.fieldOfViewAspect / this.aspect);\n        this.framedFieldOfView = 2 * Math.atan(vertical) * 180 / Math.PI;\n    }\n    /**\n     * Returns the size of the corresponding canvas element.\n     */\n    getSize() {\n        return { width: this.width, height: this.height };\n    }\n    /**\n     * Returns the current camera.\n     */\n    getCamera() {\n        return this.activeCamera;\n    }\n    /**\n     * Sets the passed in camera to be used for rendering.\n     */\n    setCamera(camera) {\n        this.activeCamera = camera;\n    }\n    /**\n     * Called when the model's contents have loaded, or changed.\n     */\n    onModelLoad(event) {\n        this.frameModel();\n        this.setShadowIntensity(this.shadowIntensity);\n        this.isDirty = true;\n        this.dispatchEvent({ type: 'model-load', url: event.url });\n    }\n    /**\n     * Sets the point in model coordinates the model should orbit/pivot around.\n     */\n    setTarget(modelX, modelY, modelZ) {\n        this.goalTarget.set(-modelX, -modelY, -modelZ);\n    }\n    /**\n     * Gets the point in model coordinates the model should orbit/pivot around.\n     */\n    getTarget() {\n        return vector3.copy(this.goalTarget).multiplyScalar(-1);\n    }\n    /**\n     * Shifts the model to the target point immediately instead of easing in.\n     */\n    jumpToGoal() {\n        this.updateTarget(SETTLING_TIME);\n    }\n    /**\n     * This should be called every frame with the frame delta to cause the target\n     * to transition to its set point.\n     */\n    updateTarget(delta) {\n        const goal = this.goalTarget;\n        const target = this.model.position;\n        if (!goal.equals(target)) {\n            const radius = this.model.idealCameraDistance;\n            let { x, y, z } = target;\n            x = this.targetDamperX.update(x, goal.x, delta, radius);\n            y = this.targetDamperY.update(y, goal.y, delta, radius);\n            z = this.targetDamperZ.update(z, goal.z, delta, radius);\n            this.model.position.set(x, y, z);\n            this.model.updateMatrixWorld();\n            this.model.setShadowRotation(this.yaw);\n            this.isDirty = true;\n        }\n    }\n    /**\n     * Yaw the +z (front) of the model toward the indicated world coordinates.\n     */\n    pointTowards(worldX, worldZ) {\n        const { x, z } = this.position;\n        this.yaw = Math.atan2(worldX - x, worldZ - z);\n    }\n    /**\n     * Yaw is the scene's orientation about the y-axis, around the rotation\n     * center.\n     */\n    set yaw(radiansY) {\n        this.rotation.y = radiansY;\n        this.model.setShadowRotation(radiansY);\n        this.isDirty = true;\n    }\n    get yaw() {\n        return this.rotation.y;\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity) {\n        shadowIntensity = Math.max(shadowIntensity, 0);\n        this.shadowIntensity = shadowIntensity;\n        if (this.model.hasModel()) {\n            this.model.setShadowIntensity(shadowIntensity, this.shadowSoftness);\n        }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        this.shadowSoftness = softness;\n        this.model.setShadowSoftness(softness);\n    }\n    /**\n     * This method returns the world position and model-space normal of the point\n     * on the mesh corresponding to the input pixel coordinates given relative to\n     * the model-viewer element. If the mesh is not hit, the result is null.\n     */\n    positionAndNormalFromPoint(pixelPosition, object = this) {\n        raycaster.setFromCamera(pixelPosition, this.getCamera());\n        const hits = raycaster.intersectObject(object, true);\n        if (hits.length === 0) {\n            return null;\n        }\n        const hit = hits[0];\n        if (hit.face == null) {\n            return null;\n        }\n        hit.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(hit.object.matrixWorld));\n        return { position: hit.point, normal: hit.face.normal };\n    }\n}\n\n/**\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\nvar _mipmapMaterial = _getMipmapMaterial();\n\nvar _mesh$1 = new Mesh( new PlaneBufferGeometry( 2, 2 ), _mipmapMaterial );\n\nvar _flatCamera$1 = new OrthographicCamera( 0, 1, 0, 1, 0, 1 );\n\nvar _tempTarget = null;\n\nvar _renderer = null;\n\nfunction RoughnessMipmapper( renderer ) {\n\n\t_renderer = renderer;\n\n\t_renderer.compile( _mesh$1, _flatCamera$1 );\n\n}\n\nRoughnessMipmapper.prototype = {\n\n\tconstructor: RoughnessMipmapper,\n\n\tgenerateMipmaps: function ( material ) {\n\n\t\tif ( 'roughnessMap' in material === false ) return;\n\n\t\tvar { roughnessMap, normalMap } = material;\n\n\t\tif ( roughnessMap === null || normalMap === null || ! roughnessMap.generateMipmaps || material.userData.roughnessUpdated ) return;\n\n\t\tmaterial.userData.roughnessUpdated = true;\n\n\t\tvar width = Math.max( roughnessMap.image.width, normalMap.image.width );\n\n\t\tvar height = Math.max( roughnessMap.image.height, normalMap.image.height );\n\n\t\tif ( ! MathUtils.isPowerOfTwo( width ) || ! MathUtils.isPowerOfTwo( height ) ) return;\n\n\t\tvar oldTarget = _renderer.getRenderTarget();\n\n\t\tvar autoClear = _renderer.autoClear;\n\n\t\t_renderer.autoClear = false;\n\n\t\tif ( _tempTarget === null || _tempTarget.width !== width || _tempTarget.height !== height ) {\n\n\t\t\tif ( _tempTarget !== null ) _tempTarget.dispose();\n\n\t\t\t_tempTarget = new WebGLRenderTarget( width, height, { depthBuffer: false } );\n\n\t\t\t_tempTarget.scissorTest = true;\n\n\t\t}\n\n\t\tif ( width !== roughnessMap.image.width || height !== roughnessMap.image.height ) {\n\n\t\t\tvar params = {\n\t\t\t\twrapS: roughnessMap.wrapS,\n\t\t\t\twrapT: roughnessMap.wrapT,\n\t\t\t\tmagFilter: roughnessMap.magFilter,\n\t\t\t\tminFilter: roughnessMap.minFilter,\n\t\t\t\tdepthBuffer: false\n\t\t\t};\n\n\t\t\tvar newRoughnessTarget = new WebGLRenderTarget( width, height, params );\n\n\t\t\tnewRoughnessTarget.texture.generateMipmaps = true;\n\n\t\t\t// Setting the render target causes the memory to be allocated.\n\n\t\t\t_renderer.setRenderTarget( newRoughnessTarget );\n\n\t\t\tmaterial.roughnessMap = newRoughnessTarget.texture;\n\n\t\t\tif ( material.metalnessMap == roughnessMap ) material.metalnessMap = material.roughnessMap;\n\n\t\t\tif ( material.aoMap == roughnessMap ) material.aoMap = material.roughnessMap;\n\n\t\t}\n\n\t\t_mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n\n\t\t_mipmapMaterial.uniforms.normalMap.value = normalMap;\n\n\t\tvar position = new Vector2( 0, 0 );\n\n\t\tvar texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\n\t\tfor ( var mip = 0; width >= 1 && height >= 1; ++ mip, width /= 2, height /= 2 ) {\n\n\t\t\t// Rendering to a mip level is not allowed in webGL1. Instead we must set\n\t\t\t// up a secondary texture to write the result to, then copy it back to the\n\t\t\t// proper mipmap level.\n\n\t\t\ttexelSize.set( 1.0 / width, 1.0 / height );\n\n\t\t\tif ( mip == 0 ) texelSize.set( 0.0, 0.0 );\n\n\t\t\t_tempTarget.viewport.set( position.x, position.y, width, height );\n\n\t\t\t_tempTarget.scissor.set( position.x, position.y, width, height );\n\n\t\t\t_renderer.setRenderTarget( _tempTarget );\n\n\t\t\t_renderer.render( _mesh$1, _flatCamera$1 );\n\n\t\t\t_renderer.copyFramebufferToTexture( position, material.roughnessMap, mip );\n\n\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( roughnessMap !== material.roughnessMap ) roughnessMap.dispose();\n\n\t\t_renderer.setRenderTarget( oldTarget );\n\n\t\t_renderer.autoClear = autoClear;\n\n\t},\n\n\tdispose: function () {\n\n\t\t_mipmapMaterial.dispose();\n\n\t\t_mesh$1.geometry.dispose();\n\n\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t}\n\n};\n\nfunction _getMipmapMaterial() {\n\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\troughnessMap: { value: null },\n\t\t\tnormalMap: { value: null },\n\t\t\ttexelSize: { value: new Vector2( 1, 1 ) }\n\t\t},\n\n\t\tvertexShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tfragmentShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'RoughnessMipmapper';\n\n\treturn shaderMaterial;\n\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst deserializeUrl = (url) => (!!url && url !== 'null') ? toFullUrl(url) : null;\nconst assertIsArCandidate = () => {\n    if (IS_WEBXR_AR_CANDIDATE) {\n        return;\n    }\n    const missingApis = [];\n    if (!HAS_WEBXR_DEVICE_API) {\n        missingApis.push('WebXR Device API');\n    }\n    if (!HAS_WEBXR_HIT_TEST_API) {\n        missingApis.push('WebXR Hit Test API');\n    }\n    throw new Error(`The following APIs are required for AR, but are missing in this browser: ${missingApis.join(', ')}`);\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\nconst toFullUrl = (partialUrl) => {\n    const url = new URL(partialUrl, window.location.toString());\n    return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\nconst throttle = (fn, ms) => {\n    let timer = null;\n    const throttled = (...args) => {\n        if (timer != null) {\n            return;\n        }\n        fn(...args);\n        timer = self.setTimeout(() => timer = null, ms);\n    };\n    throttled.flush = () => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n            timer = null;\n        }\n    };\n    return throttled;\n};\nconst debounce = (fn, ms) => {\n    let timer = null;\n    return (...args) => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n        }\n        timer = self.setTimeout(() => {\n            timer = null;\n            fn(...args);\n        }, ms);\n    };\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\nconst clamp = (value, lowerLimit, upperLimit) => Math.max(lowerLimit, Math.min(upperLimit, value));\n// The DPR we use for a \"capped\" scenario (see resolveDpr below):\nconst CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\nconst resolveDpr = (() => {\n    // If true, implies that the user is conscious of the viewport scaling\n    // relative to the device screen size.\n    const HAS_META_VIEWPORT_TAG = (() => {\n        const metas = document.head != null ?\n            Array.from(document.head.querySelectorAll('meta')) :\n            [];\n        for (const meta of metas) {\n            if (meta.name === 'viewport') {\n                return true;\n            }\n        }\n        return false;\n    })();\n    if (!HAS_META_VIEWPORT_TAG) {\n        console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n    }\n    return () => HAS_META_VIEWPORT_TAG ? window.devicePixelRatio :\n        CAPPED_DEVICE_PIXEL_RATIO;\n})();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\nconst isDebugMode = (() => {\n    const debugQueryParameterName = 'model-viewer-debug-mode';\n    const debugQueryParameter = new RegExp(`[\\?&]${debugQueryParameterName}(&|$)`);\n    return () => (self.ModelViewerElement &&\n        self.ModelViewerElement.debugMode) ||\n        (self.location && self.location.search &&\n            self.location.search.match(debugQueryParameter));\n})();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\nconst getFirstMapKey = (map) => {\n    if (map.keys != null) {\n        return map.keys().next().value || null;\n    }\n    let firstKey = null;\n    try {\n        map.forEach((_value, key, _map) => {\n            firstKey = key;\n            // Stop iterating the Map with forEach:\n            throw new Error();\n        });\n    }\n    catch (_error) {\n    }\n    return firstKey;\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst RADIUS = 0.2;\nconst LINE_WIDTH = 0.03;\nconst MAX_OPACITY = 0.75;\nconst SEGMENTS = 12;\nconst DELTA_PHI = Math.PI / (2 * SEGMENTS);\nconst vector2 = new Vector2();\n/**\n * Adds a quarter-annulus of vertices to the array, centered on cornerX,\n * cornerY.\n */\nconst addCorner = (vertices, cornerX, cornerY) => {\n    let phi = cornerX > 0 ? (cornerY > 0 ? 0 : -Math.PI / 2) :\n        (cornerY > 0 ? Math.PI / 2 : Math.PI);\n    for (let i = 0; i <= SEGMENTS; ++i) {\n        vertices.push(cornerX + (RADIUS - LINE_WIDTH) * Math.cos(phi), cornerY + (RADIUS - LINE_WIDTH) * Math.sin(phi), 0, cornerX + RADIUS * Math.cos(phi), cornerY + RADIUS * Math.sin(phi), 0);\n        phi += DELTA_PHI;\n    }\n};\n/**\n * This class is a set of two coincident planes. The first is just a cute box\n * outline with rounded corners and damped opacity to indicate the floor extents\n * of a model. It is purposely larger than the model's bounding box by RADIUS on\n * all sides so that small models are still visible / selectable. Its center is\n * actually carved out by vertices to ensure its fragment shader doesn't add\n * much time.\n *\n * The child plane is a simple plane with the same extents for use in hit\n * testing (translation is triggered when the touch hits the plane, rotation\n * otherwise).\n */\nclass PlacementBox extends Mesh {\n    constructor(model) {\n        const geometry = new BufferGeometry();\n        const triangles = [];\n        const vertices = [];\n        const { size, boundingBox } = model;\n        const x = size.x / 2;\n        const y = size.z / 2;\n        addCorner(vertices, x, y);\n        addCorner(vertices, -x, y);\n        addCorner(vertices, -x, -y);\n        addCorner(vertices, x, -y);\n        const numVertices = vertices.length / 3;\n        for (let i = 0; i < numVertices - 2; i += 2) {\n            triangles.push(i, i + 1, i + 3, i, i + 3, i + 2);\n        }\n        const i = numVertices - 2;\n        triangles.push(i, i + 1, 1, i, 1, 0);\n        geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        geometry.setIndex(triangles);\n        super(geometry);\n        const material = this.material;\n        material.side = DoubleSide;\n        material.transparent = true;\n        material.opacity = 0;\n        this.goalOpacity = 0;\n        this.opacityDamper = new Damper();\n        this.hitPlane = new Mesh(new PlaneBufferGeometry(size.x + 2 * RADIUS, size.z + 2 * RADIUS));\n        this.hitPlane.visible = false;\n        this.add(this.hitPlane);\n        this.rotateX(-Math.PI / 2);\n        boundingBox.getCenter(this.position);\n        this.shadowHeight = boundingBox.min.y;\n        this.position.y = this.shadowHeight;\n        model.add(this);\n    }\n    /**\n     * Get the world hit position if the touch coordinates hit the box, and null\n     * otherwise. Pass the scene in to get access to its raycaster.\n     */\n    getHit(scene, screenX, screenY) {\n        vector2.set(screenX, -screenY);\n        this.hitPlane.visible = true;\n        const hitResult = scene.positionAndNormalFromPoint(vector2, this.hitPlane);\n        this.hitPlane.visible = false;\n        return hitResult == null ? null : hitResult.position;\n    }\n    /**\n     * Offset the height of the box relative to the bottom of the model. Positive\n     * is up, so generally only negative values are used.\n     */\n    set offsetHeight(offset) {\n        this.position.y = this.shadowHeight + offset;\n    }\n    get offsetHeight() {\n        return this.position.y - this.shadowHeight;\n    }\n    /**\n     * Set the box's visibility; it will fade in and out.\n     */\n    set show(visible) {\n        this.goalOpacity = visible ? MAX_OPACITY : 0;\n    }\n    /**\n     * Call on each frame with the frame delta to fade the box.\n     */\n    updateOpacity(delta) {\n        const material = this.material;\n        material.opacity =\n            this.opacityDamper.update(material.opacity, this.goalOpacity, delta, 1);\n        this.visible = material.opacity > 0;\n    }\n    /**\n     * Call this to clean up Three's cache when you remove the box.\n     */\n    dispose() {\n        const { geometry, material } = this.hitPlane;\n        geometry.dispose();\n        material.dispose();\n        this.geometry.dispose();\n        this.material.dispose();\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$6, _b$4, _c$1, _d$1, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x$1, _y$1, _z$1, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12;\n// AR shadow is not user-configurable. This is to pave the way for AR lighting\n// estimation, which will be used once available in WebXR.\nconst AR_SHADOW_INTENSITY = 0.3;\nconst ROTATION_RATE = 1.5;\n// Angle down (towards bottom of screen) from camera center ray to use for hit\n// testing against the floor. This makes placement faster and more intuitive\n// assuming the phone is in portrait mode. This seems to be a reasonable\n// assumption for the start of the session and UI will lack landscape mode to\n// encourage upright use.\nconst HIT_ANGLE_DEG = 20;\n// Slow down the dampers for initial placement.\nconst INTRO_DAMPER_RATE = 0.4;\nconst SCALE_SNAP_HIGH = 1.2;\nconst SCALE_SNAP_LOW = 1 / SCALE_SNAP_HIGH;\nconst ARStatus = {\n    NOT_PRESENTING: 'not-presenting',\n    SESSION_STARTED: 'session-started',\n    OBJECT_PLACED: 'object-placed',\n    FAILED: 'failed'\n};\nconst $presentedScene = Symbol('presentedScene');\nconst $placementBox = Symbol('placementBox');\nconst $lastTick = Symbol('lastTick');\nconst $turntableRotation = Symbol('turntableRotation');\nconst $oldShadowIntensity = Symbol('oldShadowIntensity');\nconst $oldBackground = Symbol('oldBackground');\nconst $rafId = Symbol('rafId');\nconst $currentSession = Symbol('currentSession');\nconst $tick = Symbol('tick');\nconst $refSpace = Symbol('refSpace');\nconst $viewerRefSpace = Symbol('viewerRefSpace');\nconst $frame = Symbol('frame');\nconst $initialized = Symbol('initialized');\nconst $initialModelToWorld = Symbol('initialModelToWorld');\nconst $placementComplete = Symbol('placementComplete');\nconst $initialHitSource = Symbol('hitTestSource');\nconst $transientHitTestSource = Symbol('transiertHitTestSource');\nconst $inputSource = Symbol('inputSource');\nconst $isTranslating = Symbol('isTranslating');\nconst $isRotating = Symbol('isRotating');\nconst $isScaling = Symbol('isScaling');\nconst $lastDragPosition = Symbol('lastDragPosition');\nconst $lastScalar = Symbol('lastScalar');\nconst $goalPosition = Symbol('goalPosition');\nconst $goalYaw = Symbol('goalYaw');\nconst $goalScale = Symbol('goalScale');\nconst $xDamper = Symbol('xDamper');\nconst $yDamper = Symbol('yDamper');\nconst $zDamper = Symbol('zDamper');\nconst $yawDamper = Symbol('yawDamper');\nconst $scaleDamper = Symbol('scaleDamper');\nconst $damperRate = Symbol('damperRate');\nconst $resolveCleanup = Symbol('resolveCleanup');\nconst $exitWebXRButtonContainer = Symbol('exitWebXRButtonContainer');\nconst $onWebXRFrame = Symbol('onWebXRFrame');\nconst $postSessionCleanup = Symbol('postSessionCleanup');\nconst $updateCamera = Symbol('updateCamera');\nconst $placeInitially = Symbol('placeInitially');\nconst $getHitPoint = Symbol('getHitPoint');\nconst $onSelectStart = Symbol('onSelectStart');\nconst $onSelectEnd = Symbol('onSelect');\nconst $onUpdateScene = Symbol('onUpdateScene');\nconst $fingerSeparation = Symbol('fingerSeparation');\nconst $processInput = Symbol('processInput');\nconst $moveScene = Symbol('moveScene');\nconst $onExitWebXRButtonContainerClick = Symbol('onExitWebXRButtonContainerClick');\nconst vector3$1 = new Vector3();\nconst matrix4 = new Matrix4();\nconst hitPosition = new Vector3();\nclass ARRenderer extends EventDispatcher {\n    constructor(renderer) {\n        super();\n        this.renderer = renderer;\n        this.camera = new PerspectiveCamera();\n        this[_a$6] = null;\n        this[_b$4] = null;\n        this[_c$1] = null;\n        this[_d$1] = null;\n        this[_e] = null;\n        this[_f] = null;\n        this[_g] = null;\n        this[_h] = null;\n        this[_j] = null;\n        this[_k] = null;\n        this[_l] = null;\n        this[_m] = null;\n        this[_o] = null;\n        this[_p] = null;\n        this[_q] = null;\n        this[_r] = null;\n        this[_s] = false;\n        this[_t] = new Matrix4();\n        this[_u] = false;\n        this[_v] = false;\n        this[_w] = false;\n        this[_x$1] = false;\n        this[_y$1] = new Vector3();\n        this[_z$1] = 0;\n        this[_0] = new Vector3();\n        this[_1] = 0;\n        this[_2] = 1;\n        this[_3] = new Damper();\n        this[_4] = new Damper();\n        this[_5] = new Damper();\n        this[_6] = new Damper();\n        this[_7] = new Damper();\n        this[_8] = 1;\n        this[_9] = () => this.stopPresenting();\n        this[_10] = () => {\n            if (this[$placementBox] != null && this.isPresenting) {\n                this[$placementBox].dispose();\n                this[$placementBox] = new PlacementBox(this[$presentedScene].model);\n            }\n        };\n        this[_11] = (event) => {\n            const hitSource = this[$transientHitTestSource];\n            if (hitSource == null) {\n                return;\n            }\n            const fingers = this[$frame].getHitTestResultsForTransientInput(hitSource);\n            const scene = this[$presentedScene];\n            const box = this[$placementBox];\n            if (fingers.length === 1) {\n                this[$inputSource] = event.inputSource;\n                const { axes } = this[$inputSource].gamepad;\n                const hitPosition = box.getHit(this[$presentedScene], axes[0], axes[1]);\n                box.show = true;\n                if (hitPosition != null) {\n                    this[$isTranslating] = true;\n                    this[$lastDragPosition].copy(hitPosition);\n                }\n                else {\n                    this[$isRotating] = true;\n                    this[$lastScalar] = axes[0];\n                }\n            }\n            else if (fingers.length === 2 && scene.canScale) {\n                box.show = true;\n                this[$isScaling] = true;\n                this[$lastScalar] = this[$fingerSeparation](fingers) / scene.scale.x;\n            }\n        };\n        this[_12] = () => {\n            this[$isTranslating] = false;\n            this[$isRotating] = false;\n            this[$isScaling] = false;\n            this[$inputSource] = null;\n            this[$goalPosition].y +=\n                this[$placementBox].offsetHeight * this[$presentedScene].scale.x;\n            this[$placementBox].show = false;\n        };\n        this.threeRenderer = renderer.threeRenderer;\n        // Turn this off, as the matrix is set directly from webXR rather than using\n        // postion, rotation, scale.\n        this.camera.matrixAutoUpdate = false;\n    }\n    async resolveARSession(scene) {\n        assertIsArCandidate();\n        const session = await navigator.xr.requestSession('immersive-ar', {\n            requiredFeatures: ['hit-test'],\n            optionalFeatures: ['dom-overlay'],\n            domOverlay: {\n                root: scene.element.shadowRoot.querySelector('div.annotation-container')\n            }\n        });\n        const gl = this.threeRenderer.context;\n        // `makeXRCompatible` replaced `setCompatibleXRDevice` in Chrome M73 @TODO\n        // #293, handle WebXR API changes. WARNING: this can cause a GL context\n        // loss according to the spec, though current implementations don't do so.\n        await gl.makeXRCompatible();\n        session.updateRenderState({ baseLayer: new XRWebGLLayer(session, gl, { alpha: true }) });\n        // The render state update takes effect on the next animation frame. Wait\n        // for it so that we get a framebuffer.\n        let waitForXRAnimationFrame = new Promise((resolve, _reject) => {\n            session.requestAnimationFrame(() => resolve());\n        });\n        await waitForXRAnimationFrame;\n        scene.element[$onResize](window.screen);\n        const { framebuffer, framebufferWidth, framebufferHeight } = session.renderState.baseLayer;\n        // Redirect rendering to the WebXR offscreen framebuffer.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(framebuffer);\n        this.threeRenderer.setPixelRatio(1);\n        this.threeRenderer.setSize(framebufferWidth, framebufferHeight, false);\n        const exitButton = scene.element.shadowRoot.querySelector('.slot.exit-webxr-ar-button');\n        exitButton.classList.add('enabled');\n        exitButton.addEventListener('click', this[$onExitWebXRButtonContainerClick]);\n        this[$exitWebXRButtonContainer] = exitButton;\n        return session;\n    }\n    /**\n     * The currently presented scene, if any\n     */\n    get presentedScene() {\n        return this[$presentedScene];\n    }\n    /**\n     * Resolves to true if the renderer has detected all the necessary qualities\n     * to support presentation in AR.\n     */\n    async supportsPresentation() {\n        try {\n            assertIsArCandidate();\n            return await navigator.xr.isSessionSupported('immersive-ar');\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    /**\n     * Present a scene in AR\n     */\n    async present(scene) {\n        if (this.isPresenting) {\n            console.warn('Cannot present while a model is already presenting');\n        }\n        let waitForAnimationFrame = new Promise((resolve, _reject) => {\n            requestAnimationFrame(() => resolve());\n        });\n        scene.model.setHotspotsVisibility(false);\n        scene.isDirty = true;\n        // Render a frame to turn off the hotspots\n        await waitForAnimationFrame;\n        // This sets isPresenting to true\n        this[$presentedScene] = scene;\n        const currentSession = await this.resolveARSession(scene);\n        currentSession.addEventListener('end', () => {\n            this[$postSessionCleanup]();\n        }, { once: true });\n        this[$refSpace] = await currentSession.requestReferenceSpace('local');\n        this[$viewerRefSpace] =\n            await currentSession.requestReferenceSpace('viewer');\n        scene.setCamera(this.camera);\n        this[$initialized] = false;\n        this[$damperRate] = INTRO_DAMPER_RATE;\n        this[$turntableRotation] = scene.yaw;\n        scene.yaw = 0;\n        this[$goalYaw] = 0;\n        this[$goalScale] = 1;\n        this[$oldBackground] = scene.background;\n        scene.background = null;\n        this[$oldShadowIntensity] = scene.shadowIntensity;\n        scene.setShadowIntensity(0);\n        scene.addEventListener('model-load', this[$onUpdateScene]);\n        const radians = HIT_ANGLE_DEG * Math.PI / 180;\n        const ray = new XRRay(new DOMPoint(0, 0, 0), { x: 0, y: -Math.sin(radians), z: -Math.cos(radians) });\n        currentSession\n            .requestHitTestSource({ space: this[$viewerRefSpace], offsetRay: ray })\n            .then(hitTestSource => {\n            this[$initialHitSource] = hitTestSource;\n        });\n        this[$currentSession] = currentSession;\n        this[$placementBox] = new PlacementBox(scene.model);\n        this[$placementComplete] = false;\n        this[$lastTick] = performance.now();\n        // Start the event loop.\n        this[$tick]();\n    }\n    /**\n     * If currently presenting a scene in AR, stops presentation and exits AR.\n     */\n    async stopPresenting() {\n        if (!this.isPresenting) {\n            return;\n        }\n        const cleanupPromise = new Promise((resolve) => {\n            this[$resolveCleanup] = resolve;\n        });\n        try {\n            await this[$currentSession].end();\n            await cleanupPromise;\n        }\n        catch (error) {\n            console.warn('Error while trying to end AR session');\n            console.warn(error);\n            this[$postSessionCleanup]();\n        }\n    }\n    [(_a$6 = $placementBox, _b$4 = $lastTick, _c$1 = $turntableRotation, _d$1 = $oldShadowIntensity, _e = $oldBackground, _f = $rafId, _g = $currentSession, _h = $refSpace, _j = $viewerRefSpace, _k = $frame, _l = $initialHitSource, _m = $transientHitTestSource, _o = $inputSource, _p = $presentedScene, _q = $resolveCleanup, _r = $exitWebXRButtonContainer, _s = $initialized, _t = $initialModelToWorld, _u = $placementComplete, _v = $isTranslating, _w = $isRotating, _x$1 = $isScaling, _y$1 = $lastDragPosition, _z$1 = $lastScalar, _0 = $goalPosition, _1 = $goalYaw, _2 = $goalScale, _3 = $xDamper, _4 = $yDamper, _5 = $zDamper, _6 = $yawDamper, _7 = $scaleDamper, _8 = $damperRate, _9 = $onExitWebXRButtonContainerClick, $postSessionCleanup)]() {\n        // The offscreen WebXR framebuffer is now invalid, switch\n        // back to the default framebuffer for canvas output.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(null);\n        const session = this[$currentSession];\n        if (session != null) {\n            session.removeEventListener('selectstart', this[$onSelectStart]);\n            session.removeEventListener('selectend', this[$onSelectEnd]);\n            session.cancelAnimationFrame(this[$rafId]);\n            this[$currentSession] = null;\n        }\n        const scene = this[$presentedScene];\n        if (scene != null) {\n            const { model, element } = scene;\n            scene.setCamera(scene.camera);\n            model.remove(this[$placementBox]);\n            scene.position.set(0, 0, 0);\n            scene.scale.set(1, 1, 1);\n            model.setShadowScaleAndOffset(1, 0);\n            const yaw = this[$turntableRotation];\n            if (yaw != null) {\n                scene.yaw = yaw;\n            }\n            const intensity = this[$oldShadowIntensity];\n            if (intensity != null) {\n                scene.setShadowIntensity(intensity);\n            }\n            const background = this[$oldBackground];\n            if (background != null) {\n                scene.background = background;\n            }\n            scene.removeEventListener('model-load', this[$onUpdateScene]);\n            model.orientHotspots(0);\n            element.requestUpdate('cameraTarget');\n            element[$onResize](element.getBoundingClientRect());\n        }\n        // Force the Renderer to update its size\n        this.renderer.height = 0;\n        const exitButton = this[$exitWebXRButtonContainer];\n        if (exitButton != null) {\n            exitButton.classList.remove('enabled');\n            exitButton.removeEventListener('click', this[$onExitWebXRButtonContainerClick]);\n            this[$exitWebXRButtonContainer] = null;\n        }\n        const hitSource = this[$transientHitTestSource];\n        if (hitSource != null) {\n            hitSource.cancel();\n            this[$transientHitTestSource] = null;\n        }\n        const hitSourceInitial = this[$initialHitSource];\n        if (hitSourceInitial != null) {\n            hitSourceInitial.cancel();\n            this[$initialHitSource] = null;\n        }\n        if (this[$placementBox] != null) {\n            this[$placementBox].dispose();\n            this[$placementBox] = null;\n        }\n        this[$lastTick] = null;\n        this[$turntableRotation] = null;\n        this[$oldShadowIntensity] = null;\n        this[$oldBackground] = null;\n        this[$rafId] = null;\n        this[$refSpace] = null;\n        this[$presentedScene] = null;\n        this[$viewerRefSpace] = null;\n        this[$frame] = null;\n        this[$inputSource] = null;\n        if (this[$resolveCleanup] != null) {\n            this[$resolveCleanup]();\n        }\n        this.dispatchEvent({ type: 'status', status: ARStatus.NOT_PRESENTING });\n    }\n    /**\n     * True if a scene is currently in the process of being presented in AR\n     */\n    get isPresenting() {\n        return this[$presentedScene] != null;\n    }\n    updateTarget() {\n        const scene = this[$presentedScene];\n        if (scene != null) {\n            // Move the scene's target to the model's floor height.\n            const target = scene.getTarget();\n            scene.setTarget(target.x, scene.model.boundingBox.min.y, target.z);\n        }\n    }\n    [(_10 = $onUpdateScene, $updateCamera)](view) {\n        const { camera } = this;\n        const { matrix: cameraMatrix } = camera;\n        cameraMatrix.fromArray(view.transform.matrix);\n        camera.updateMatrixWorld(true);\n        // position is not updated when matrix is updated.\n        camera.position.setFromMatrixPosition(cameraMatrix);\n        if (this[$initialHitSource] != null) {\n            // Target locked to screen center\n            const { position, model } = this[$presentedScene];\n            const radius = model.idealCameraDistance;\n            camera.getWorldDirection(position);\n            position.multiplyScalar(radius);\n            position.add(camera.position);\n        }\n        if (!this[$initialized]) {\n            camera.projectionMatrix.fromArray(view.projectionMatrix);\n            // Have to set the inverse manually when setting matrix directly. This is\n            // needed for raycasting.\n            camera.projectionMatrixInverse.getInverse(camera.projectionMatrix);\n            // Orient model toward camera on first frame.\n            const { x, z } = camera.position;\n            const scene = this[$presentedScene];\n            scene.pointTowards(x, z);\n            scene.model.updateMatrixWorld(true);\n            this[$goalYaw] = scene.yaw;\n            this[$initialModelToWorld].copy(scene.model.matrixWorld);\n            scene.model.setHotspotsVisibility(true);\n            this[$initialized] = true;\n            this.dispatchEvent({ type: 'status', status: ARStatus.SESSION_STARTED });\n        }\n        this[$presentedScene].model.orientHotspots(Math.atan2(cameraMatrix.elements[1], cameraMatrix.elements[5]));\n    }\n    [$placeInitially](frame) {\n        const hitSource = this[$initialHitSource];\n        if (hitSource == null) {\n            return;\n        }\n        const hitTestResults = frame.getHitTestResults(hitSource);\n        if (hitTestResults.length == 0) {\n            return;\n        }\n        const hit = hitTestResults[0];\n        const hitMatrix = this[$getHitPoint](hit);\n        if (hitMatrix == null) {\n            return;\n        }\n        this.placeModel(hitMatrix);\n        hitSource.cancel();\n        this[$initialHitSource] = null;\n        const { session } = frame;\n        session.addEventListener('selectstart', this[$onSelectStart]);\n        session.addEventListener('selectend', this[$onSelectEnd]);\n        session\n            .requestHitTestSourceForTransientInput({ profile: 'generic-touchscreen' })\n            .then(hitTestSource => {\n            this[$transientHitTestSource] = hitTestSource;\n        });\n    }\n    [$getHitPoint](hitResult) {\n        const pose = hitResult.getPose(this[$refSpace]);\n        if (pose == null) {\n            return null;\n        }\n        const hitMatrix = matrix4.fromArray(pose.transform.matrix);\n        // Check that the y-coordinate of the normal is large enough that the normal\n        // is pointing up.\n        return hitMatrix.elements[5] > 0.75 ?\n            hitPosition.setFromMatrixPosition(hitMatrix) :\n            null;\n    }\n    /**\n     * This sets the initial model placement based on the input hit point. The\n     * bottom of the model will be placed on the floor (the shadow will rest on\n     * the input's y-coordinate). The XZ placement is found by first putting the\n     * scene's target at the hit point, drawing a ray from the camera to the\n     * target, and finding the XZ-intersection of this ray with the model's\n     * bounding box. The scene is then translated on the XZ plane to position this\n     * intersection point at the input hit point. If the ray does not intersect,\n     * the target is left at the hit point.\n     *\n     * This ensures the model is placed according to the chosen target, is not\n     * reoriented, and does not intersect the camera even when the model\n     * is large (unless the target is chosen outside of the model's bounding box).\n     */\n    placeModel(hit) {\n        const scene = this[$presentedScene];\n        const { model } = scene;\n        const { min, max } = model.boundingBox;\n        this[$placementBox].show = true;\n        const goal = this[$goalPosition];\n        goal.copy(hit);\n        const floor = hit.y;\n        const origin = this.camera.position.clone();\n        const direction = hit.clone().sub(origin).normalize();\n        // Pull camera back enough to be outside of large models.\n        origin.sub(direction.multiplyScalar(model.idealCameraDistance));\n        const ray = new Ray(origin, direction.normalize());\n        const modelToWorld = this[$initialModelToWorld];\n        const modelPosition = new Vector3().setFromMatrixPosition(modelToWorld).add(hit);\n        modelToWorld.setPosition(modelPosition);\n        const world2Model = new Matrix4().getInverse(modelToWorld);\n        ray.applyMatrix4(world2Model);\n        // Make the box tall so that we don't intersect the top face.\n        max.y += 10;\n        ray.intersectBox(model.boundingBox, modelPosition);\n        max.y -= 10;\n        if (modelPosition != null) {\n            modelPosition.applyMatrix4(modelToWorld);\n            goal.add(hit).sub(modelPosition);\n        }\n        // Move the scene's target to the model's floor height.\n        const target = scene.getTarget();\n        scene.setTarget(target.x, min.y, target.z);\n        // Ignore the y-coordinate and set on the floor instead.\n        goal.y = floor;\n        this.dispatchEvent({ type: 'status', status: ARStatus.OBJECT_PLACED });\n    }\n    [(_11 = $onSelectStart, _12 = $onSelectEnd, $fingerSeparation)](fingers) {\n        const fingerOne = fingers[0].inputSource.gamepad.axes;\n        const fingerTwo = fingers[1].inputSource.gamepad.axes;\n        const deltaX = fingerTwo[0] - fingerOne[0];\n        const deltaY = fingerTwo[1] - fingerOne[1];\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    }\n    [$processInput](frame) {\n        const hitSource = this[$transientHitTestSource];\n        if (hitSource == null) {\n            return;\n        }\n        if (!this[$isTranslating] && !this[$isScaling] && !this[$isRotating]) {\n            return;\n        }\n        const fingers = frame.getHitTestResultsForTransientInput(hitSource);\n        const scene = this[$presentedScene];\n        const scale = scene.scale.x;\n        // Rotating, translating and scaling are mutually exclusive operations; only\n        // one can happen at a time, but we can switch during a gesture.\n        if (this[$isScaling]) {\n            if (fingers.length < 2) {\n                // If we lose the second finger, stop scaling (in fact, stop processing\n                // input altogether until a new gesture starts).\n                this[$isScaling] = false;\n            }\n            else {\n                const separation = this[$fingerSeparation](fingers);\n                const scale = separation / this[$lastScalar];\n                this[$goalScale] =\n                    (scale < SCALE_SNAP_HIGH && scale > SCALE_SNAP_LOW) ? 1 : scale;\n            }\n            return;\n        }\n        else if (fingers.length === 2 && scene.canScale) {\n            // If we were rotating or translating and we get a second finger, switch\n            // to scaling instead.\n            this[$isTranslating] = false;\n            this[$isRotating] = false;\n            this[$isScaling] = true;\n            this[$lastScalar] = this[$fingerSeparation](fingers) / scale;\n            return;\n        }\n        if (this[$isRotating]) {\n            const thisDragX = this[$inputSource].gamepad.axes[0];\n            this[$goalYaw] += (thisDragX - this[$lastScalar]) * ROTATION_RATE;\n            this[$lastScalar] = thisDragX;\n        }\n        else if (this[$isTranslating]) {\n            fingers.forEach(finger => {\n                if (finger.inputSource !== this[$inputSource] ||\n                    finger.results.length < 1) {\n                    return;\n                }\n                const hit = this[$getHitPoint](finger.results[0]);\n                if (hit == null) {\n                    return;\n                }\n                this[$goalPosition].sub(this[$lastDragPosition]);\n                const offset = hit.y - this[$lastDragPosition].y;\n                // When a lower floor is found, keep the model at the same height, but\n                // drop the placement box to the floor. The model falls on select end.\n                if (offset < 0) {\n                    this[$placementBox].offsetHeight = offset / scale;\n                    this[$presentedScene].model.setShadowScaleAndOffset(scale, offset);\n                    // Interpolate hit ray up to drag plane\n                    const cameraPosition = vector3$1.copy(this.camera.position);\n                    const alpha = -offset / (cameraPosition.y - hit.y);\n                    cameraPosition.multiplyScalar(alpha);\n                    hit.multiplyScalar(1 - alpha).add(cameraPosition);\n                }\n                this[$goalPosition].add(hit);\n                this[$lastDragPosition].copy(hit);\n            });\n        }\n    }\n    [$moveScene](delta) {\n        const scene = this[$presentedScene];\n        const { model, position, yaw } = scene;\n        const radius = model.idealCameraDistance;\n        const goal = this[$goalPosition];\n        const oldScale = scene.scale.x;\n        const box = this[$placementBox];\n        if (this[$initialHitSource] == null &&\n            (!goal.equals(position) || this[$goalScale] !== oldScale)) {\n            let { x, y, z } = position;\n            delta *= this[$damperRate];\n            x = this[$xDamper].update(x, goal.x, delta, radius);\n            y = this[$yDamper].update(y, goal.y, delta, radius);\n            z = this[$zDamper].update(z, goal.z, delta, radius);\n            position.set(x, y, z);\n            const newScale = this[$scaleDamper].update(oldScale, this[$goalScale], delta, 1);\n            scene.scale.set(newScale, newScale, newScale);\n            if (!this[$isTranslating]) {\n                const offset = goal.y - y;\n                if (this[$placementComplete]) {\n                    box.offsetHeight = offset / newScale;\n                    model.setShadowScaleAndOffset(newScale, offset);\n                }\n                else if (offset === 0) {\n                    this[$placementComplete] = true;\n                    box.show = false;\n                    scene.setShadowIntensity(AR_SHADOW_INTENSITY);\n                    this[$damperRate] = 1;\n                }\n            }\n        }\n        box.updateOpacity(delta);\n        scene.updateTarget(delta);\n        // This updates the model's position, which the shadow is based on.\n        scene.updateMatrixWorld(true);\n        // yaw must be updated last, since this also updates the shadow position.\n        scene.yaw = this[$yawDamper].update(yaw, this[$goalYaw], delta, Math.PI);\n    }\n    [$tick]() {\n        this[$rafId] = this[$currentSession].requestAnimationFrame((time, frame) => this[$onWebXRFrame](time, frame));\n    }\n    [$onWebXRFrame](time, frame) {\n        this[$frame] = frame;\n        const pose = frame.getViewerPose(this[$refSpace]);\n        // TODO: Notify external observers of tick\n        this[$tick]();\n        const scene = this[$presentedScene];\n        if (pose == null || scene == null) {\n            return;\n        }\n        this[$updateCamera](pose.views[0]);\n        this[$placeInitially](frame);\n        this[$processInput](frame);\n        const delta = time - this[$lastTick];\n        this[$moveScene](delta);\n        this.renderer.preRender(scene, time, delta);\n        this[$lastTick] = time;\n        // NOTE: Clearing depth caused issues on Samsung devices\n        // @see https://github.com/googlecodelabs/ar-with-webxr/issues/8\n        // this.threeRenderer.clearDepth();\n        this.threeRenderer.render(scene, this.camera);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * This Debugger exposes internal details of the <model-viewer> rendering\n * substructure so that external tools can more easily inspect and operate on\n * them.\n *\n * It also activates shader debugging on the associated GL context. Shader\n * debugging trades performance for useful error information, so it is not\n * recommended to activate this unless needed.\n */\nclass Debugger {\n    constructor(renderer) {\n        // Force WebGL shader debugging on:\n        renderer.threeRenderer.debug = { checkShaderErrors: true };\n        // Announce debug details at microtask timing to give the `Renderer`\n        // constructor time to complete its initialization, just to be on the safe\n        // side:\n        Promise.resolve().then(() => {\n            self.dispatchEvent(new CustomEvent('model-viewer-renderer-debug', {\n                detail: {\n                    renderer,\n                    THREE: {\n                        ShaderMaterial,\n                        Texture,\n                        Mesh,\n                        Scene,\n                        PlaneBufferGeometry,\n                        OrthographicCamera,\n                        WebGLRenderTarget\n                    }\n                }\n            }));\n        });\n    }\n    addScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-added-debug', { detail: { scene } }));\n    }\n    removeScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-removed-debug', { detail: { scene } }));\n    }\n}\n\nconst $threeGLTF = Symbol('threeGLTF');\nconst $gltf = Symbol('gltf');\nconst $gltfElementMap = Symbol('gltfElementMap');\nconst $threeObjectMap = Symbol('threeObjectMap');\nconst $parallelTraverseThreeScene = Symbol('parallelTraverseThreeScene');\nconst $correlateOriginalThreeGLTF = Symbol('correlateOriginalThreeGLTF');\nconst $correlateCloneThreeGLTF = Symbol('correlateCloneThreeGLTF');\n/**\n * The Three.js GLTFLoader provides us with an in-memory representation\n * of a glTF in terms of Three.js constructs. It also provides us with a copy\n * of the deserialized glTF without any Three.js decoration, and a mapping of\n * glTF elements to their corresponding Three.js constructs.\n *\n * A CorrelatedSceneGraph exposes a synchronously available mapping of glTF\n * element references to their corresponding Three.js constructs.\n */\nclass CorrelatedSceneGraph {\n    constructor(threeGLTF, gltf, threeObjectMap, gltfElementMap) {\n        this[$threeGLTF] = threeGLTF;\n        this[$gltf] = gltf;\n        this[$gltfElementMap] = gltfElementMap;\n        this[$threeObjectMap] = threeObjectMap;\n    }\n    /**\n     * Produce a CorrelatedSceneGraph from a naturally generated Three.js GLTF.\n     * Such GLTFs are produced by Three.js' GLTFLoader, and contain cached\n     * details that expedite the correlation step.\n     *\n     * If a CorrelatedSceneGraph is provided as the second argument, re-correlates\n     * a cloned Three.js GLTF with a clone of the glTF hierarchy used to produce\n     * the upstream Three.js GLTF that the clone was created from. The result\n     * CorrelatedSceneGraph is representative of the cloned hierarchy.\n     */\n    static from(threeGLTF, upstreamCorrelatedSceneGraph) {\n        if (upstreamCorrelatedSceneGraph != null) {\n            return this[$correlateCloneThreeGLTF](threeGLTF, upstreamCorrelatedSceneGraph);\n        }\n        else {\n            return this[$correlateOriginalThreeGLTF](threeGLTF);\n        }\n    }\n    static [$correlateOriginalThreeGLTF](threeGLTF) {\n        const gltf = threeGLTF.parser.json;\n        const { associations } = threeGLTF.parser;\n        const gltfElementMap = new Map();\n        // NOTE: IE11 does not have Map iterator methods\n        associations.forEach((gltfElementReference, threeObject) => {\n            // Note: GLTFLoader creates a \"default\" material that has no corresponding\n            // glTF element in the case that no materials are specified in the source\n            // glTF. This means that for basic models without any of their own\n            // materials, we might accidentally try to present a configurable glTF\n            // material that doesn't exist. It might be valuable to make this default\n            // material configurable in the future, but for now we ignore it.\n            if (gltfElementReference == null) {\n                return;\n            }\n            const { type, index } = gltfElementReference;\n            const elementArray = gltf[type] || [];\n            const gltfElement = elementArray[index];\n            if (gltfElement == null) {\n                // TODO: Maybe throw here...\n                return;\n            }\n            let threeObjects = gltfElementMap.get(gltfElement);\n            if (threeObjects == null) {\n                threeObjects = new Set();\n                gltfElementMap.set(gltfElement, threeObjects);\n            }\n            threeObjects.add(threeObject);\n        });\n        return new CorrelatedSceneGraph(threeGLTF, gltf, associations, gltfElementMap);\n    }\n    /**\n     * Transfers the association between a raw glTF and a Three.js scene graph\n     * to a clone of the Three.js scene graph, resolved as a new\n     * CorrelatedsceneGraph instance.\n     */\n    static [$correlateCloneThreeGLTF](cloneThreeGLTF, upstreamCorrelatedSceneGraph) {\n        const originalThreeGLTF = upstreamCorrelatedSceneGraph.threeGLTF;\n        const originalGLTF = upstreamCorrelatedSceneGraph.gltf;\n        const cloneGLTF = JSON.parse(JSON.stringify(originalGLTF));\n        const cloneThreeObjectMap = new Map();\n        const cloneGLTFELementMap = new Map();\n        for (let i = 0; i < originalThreeGLTF.scenes.length; i++) {\n            this[$parallelTraverseThreeScene](originalThreeGLTF.scenes[i], cloneThreeGLTF.scenes[i], (object, cloneObject) => {\n                const elementReference = upstreamCorrelatedSceneGraph.threeObjectMap.get(object);\n                if (elementReference != null) {\n                    const { type, index } = elementReference;\n                    const cloneElement = cloneGLTF[type][index];\n                    cloneThreeObjectMap.set(cloneObject, { type, index });\n                    const cloneObjects = cloneGLTFELementMap.get(cloneElement) || new Set();\n                    cloneObjects.add(cloneObject);\n                    cloneGLTFELementMap.set(cloneElement, cloneObjects);\n                }\n            });\n        }\n        return new CorrelatedSceneGraph(cloneThreeGLTF, cloneGLTF, cloneThreeObjectMap, cloneGLTFELementMap);\n    }\n    /**\n     * Traverses two presumably identical Three.js scenes, and invokes a callback\n     * for each Object3D or Material encountered, including the initial scene.\n     * Adapted from\n     * https://github.com/mrdoob/three.js/blob/7c1424c5819ab622a346dd630ee4e6431388021e/examples/jsm/utils/SkeletonUtils.js#L586-L596\n     */\n    static [$parallelTraverseThreeScene](sceneOne, sceneTwo, callback) {\n        const isMesh = (object) => {\n            return object.isMesh;\n        };\n        const traverse = (a, b) => {\n            callback(a, b);\n            if (a.isObject3D) {\n                if (isMesh(a)) {\n                    if (Array.isArray(a.material)) {\n                        for (let i = 0; i < a.material.length; ++i) {\n                            traverse(a.material[i], b.material[i]);\n                        }\n                    }\n                    else {\n                        traverse(a.material, b.material);\n                    }\n                }\n                for (let i = 0; i < a.children.length; ++i) {\n                    traverse(a.children[i], b.children[i]);\n                }\n            }\n        };\n        traverse(sceneOne, sceneTwo);\n    }\n    /**\n     * The source Three.js GLTF result given to us by a Three.js GLTFLoader.\n     */\n    get threeGLTF() {\n        return this[$threeGLTF];\n    }\n    /**\n     * The in-memory deserialized source glTF.\n     */\n    get gltf() {\n        return this[$gltf];\n    }\n    /**\n     * A Map of glTF element references to arrays of corresponding Three.js\n     * object references. Three.js objects are kept in arrays to account for\n     * cases where more than one Three.js object corresponds to a single glTF\n     * element.\n     */\n    get gltfElementMap() {\n        return this[$gltfElementMap];\n    }\n    /**\n     * A map of individual Three.js objects to corresponding elements in the\n     * source glTF.\n     */\n    get threeObjectMap() {\n        return this[$threeObjectMap];\n    }\n}\n\nvar SkeletonUtils = {\n\n\tretarget: function () {\n\n\t\tvar pos = new Vector3(),\n\t\t\tquat = new Quaternion(),\n\t\t\tscale = new Vector3(),\n\t\t\tbindBoneMatrix = new Matrix4(),\n\t\t\trelativeMatrix = new Matrix4(),\n\t\t\tglobalMatrix = new Matrix4();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.preserveMatrix = options.preserveMatrix !== undefined ? options.preserveMatrix : true;\n\t\t\toptions.preservePosition = options.preservePosition !== undefined ? options.preservePosition : true;\n\t\t\toptions.preserveHipPosition = options.preserveHipPosition !== undefined ? options.preserveHipPosition : false;\n\t\t\toptions.useTargetMatrix = options.useTargetMatrix !== undefined ? options.useTargetMatrix : false;\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : \"hip\";\n\t\t\toptions.names = options.names || {};\n\n\t\t\tvar sourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\tbindBones,\n\t\t\t\tbone, name, boneTo,\n\t\t\t\tbonesPosition, i;\n\n\t\t\t// reset bones\n\n\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\ttarget.skeleton.pose();\n\n\t\t\t} else {\n\n\t\t\t\toptions.useTargetMatrix = true;\n\t\t\t\toptions.preserveMatrix = false;\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tbonesPosition = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\t\t\tbonesPosition.push( bones[ i ].position.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// reset matrix\n\n\t\t\t\ttarget.updateMatrixWorld();\n\n\t\t\t\ttarget.matrixWorld.identity();\n\n\t\t\t\t// reset children matrix\n\n\t\t\t\tfor ( i = 0; i < target.children.length; ++ i ) {\n\n\t\t\t\t\ttarget.children[ i ].updateMatrixWorld( true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.offsets ) {\n\n\t\t\t\tbindBones = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( options.offsets && options.offsets[ name ] ) {\n\n\t\t\t\t\t\tbone.matrix.multiply( options.offsets[ name ] );\n\n\t\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindBones.push( bone.matrixWorld.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tglobalMatrix.copy( bone.matrixWorld );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tboneTo.updateMatrixWorld();\n\n\t\t\t\t\tif ( options.useTargetMatrix ) {\n\n\t\t\t\t\t\trelativeMatrix.copy( boneTo.matrixWorld );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\trelativeMatrix.getInverse( target.matrixWorld );\n\t\t\t\t\t\trelativeMatrix.multiply( boneTo.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// ignore scale to extract rotation\n\n\t\t\t\t\tscale.setFromMatrixScale( relativeMatrix );\n\t\t\t\t\trelativeMatrix.scale( scale.set( 1 / scale.x, 1 / scale.y, 1 / scale.z ) );\n\n\t\t\t\t\t// apply to global matrix\n\n\t\t\t\t\tglobalMatrix.makeRotationFromQuaternion( quat.setFromRotationMatrix( relativeMatrix ) );\n\n\t\t\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\t\t\tvar boneIndex = bones.indexOf( bone ),\n\t\t\t\t\t\t\twBindMatrix = bindBones ? bindBones[ boneIndex ] : bindBoneMatrix.getInverse( target.skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\t\t\tglobalMatrix.multiply( wBindMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tglobalMatrix.copyPosition( relativeMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( globalMatrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( globalMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( options.preserveHipPosition && name === options.hip ) {\n\n\t\t\t\t\tbone.matrix.setPosition( pos.set( 0, bone.position.y, 0 ) );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( name !== options.hip ) {\n\n\t\t\t\t\t\tbone.position.copy( bonesPosition[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// restore matrix\n\n\t\t\t\ttarget.updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tretargetClip: function ( target, source, clip, options ) {\n\n\t\toptions = options || {};\n\t\toptions.useFirstFramePosition = options.useFirstFramePosition !== undefined ? options.useFirstFramePosition : false;\n\t\toptions.fps = options.fps !== undefined ? options.fps : 30;\n\t\toptions.names = options.names || [];\n\n\t\tif ( ! source.isObject3D ) {\n\n\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t}\n\n\t\tvar numFrames = Math.round( clip.duration * ( options.fps / 1000 ) * 1000 ),\n\t\t\tdelta = 1 / options.fps,\n\t\t\tconvertedTracks = [],\n\t\t\tmixer = new AnimationMixer( source ),\n\t\t\tbones = this.getBones( target.skeleton ),\n\t\t\tboneDatas = [],\n\t\t\tpositionOffset,\n\t\t\tbone, boneTo, boneData,\n\t\t\tname, i, j;\n\n\t\tmixer.clipAction( clip ).play();\n\t\tmixer.update( 0 );\n\n\t\tsource.updateMatrixWorld();\n\n\t\tfor ( i = 0; i < numFrames; ++ i ) {\n\n\t\t\tvar time = i * delta;\n\n\t\t\tthis.retarget( target, source, options );\n\n\t\t\tfor ( j = 0; j < bones.length; ++ j ) {\n\n\t\t\t\tname = options.names[ bones[ j ].name ] || bones[ j ].name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, source.skeleton );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tbone = bones[ j ];\n\t\t\t\t\tboneData = boneDatas[ j ] = boneDatas[ j ] || { bone: bone };\n\n\t\t\t\t\tif ( options.hip === name ) {\n\n\t\t\t\t\t\tif ( ! boneData.pos ) {\n\n\t\t\t\t\t\t\tboneData.pos = {\n\t\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 3 )\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( options.useFirstFramePosition ) {\n\n\t\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\t\tpositionOffset = bone.position.clone();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbone.position.sub( positionOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneData.pos.times[ i ] = time;\n\n\t\t\t\t\t\tbone.position.toArray( boneData.pos.values, i * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! boneData.quat ) {\n\n\t\t\t\t\t\tboneData.quat = {\n\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 4 )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneData.quat.times[ i ] = time;\n\n\t\t\t\t\tbone.quaternion.toArray( boneData.quat.values, i * 4 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmixer.update( delta );\n\n\t\t\tsource.updateMatrixWorld();\n\n\t\t}\n\n\t\tfor ( i = 0; i < boneDatas.length; ++ i ) {\n\n\t\t\tboneData = boneDatas[ i ];\n\n\t\t\tif ( boneData ) {\n\n\t\t\t\tif ( boneData.pos ) {\n\n\t\t\t\t\tconvertedTracks.push( new VectorKeyframeTrack(\n\t\t\t\t\t\t\".bones[\" + boneData.bone.name + \"].position\",\n\t\t\t\t\t\tboneData.pos.times,\n\t\t\t\t\t\tboneData.pos.values\n\t\t\t\t\t) );\n\n\t\t\t\t}\n\n\t\t\t\tconvertedTracks.push( new QuaternionKeyframeTrack(\n\t\t\t\t\t\".bones[\" + boneData.bone.name + \"].quaternion\",\n\t\t\t\t\tboneData.quat.times,\n\t\t\t\t\tboneData.quat.values\n\t\t\t\t) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tmixer.uncacheAction( clip );\n\n\t\treturn new AnimationClip( clip.name, - 1, convertedTracks );\n\n\t},\n\n\tgetHelperFromSkeleton: function ( skeleton ) {\n\n\t\tvar source = new SkeletonHelper( skeleton.bones[ 0 ] );\n\t\tsource.skeleton = skeleton;\n\n\t\treturn source;\n\n\t},\n\n\tgetSkeletonOffsets: function () {\n\n\t\tvar targetParentPos = new Vector3(),\n\t\t\ttargetPos = new Vector3(),\n\t\t\tsourceParentPos = new Vector3(),\n\t\t\tsourcePos = new Vector3(),\n\t\t\ttargetDir = new Vector2(),\n\t\t\tsourceDir = new Vector2();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : \"hip\";\n\t\t\toptions.names = options.names || {};\n\n\t\t\tif ( ! source.isObject3D ) {\n\n\t\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t\t}\n\n\t\t\tvar nameKeys = Object.keys( options.names ),\n\t\t\t\tnameValues = Object.values( options.names ),\n\t\t\t\tsourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\toffsets = [],\n\t\t\t\tbone, boneTo,\n\t\t\t\tname, i;\n\n\t\t\ttarget.skeleton.pose();\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tif ( boneTo && name !== options.hip ) {\n\n\t\t\t\t\tvar boneParent = this.getNearestBone( bone.parent, nameKeys ),\n\t\t\t\t\t\tboneToParent = this.getNearestBone( boneTo.parent, nameValues );\n\n\t\t\t\t\tboneParent.updateMatrixWorld();\n\t\t\t\t\tboneToParent.updateMatrixWorld();\n\n\t\t\t\t\ttargetParentPos.setFromMatrixPosition( boneParent.matrixWorld );\n\t\t\t\t\ttargetPos.setFromMatrixPosition( bone.matrixWorld );\n\n\t\t\t\t\tsourceParentPos.setFromMatrixPosition( boneToParent.matrixWorld );\n\t\t\t\t\tsourcePos.setFromMatrixPosition( boneTo.matrixWorld );\n\n\t\t\t\t\ttargetDir.subVectors(\n\t\t\t\t\t\tnew Vector2( targetPos.x, targetPos.y ),\n\t\t\t\t\t\tnew Vector2( targetParentPos.x, targetParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tsourceDir.subVectors(\n\t\t\t\t\t\tnew Vector2( sourcePos.x, sourcePos.y ),\n\t\t\t\t\t\tnew Vector2( sourceParentPos.x, sourceParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tvar laterialAngle = targetDir.angle() - sourceDir.angle();\n\n\t\t\t\t\tvar offset = new Matrix4().makeRotationFromEuler(\n\t\t\t\t\t\tnew Euler(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tlaterialAngle\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tbone.matrix.multiply( offset );\n\n\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\toffsets[ name ] = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn offsets;\n\n\t\t};\n\n\t}(),\n\n\trenameBones: function ( skeleton, names ) {\n\n\t\tvar bones = this.getBones( skeleton );\n\n\t\tfor ( var i = 0; i < bones.length; ++ i ) {\n\n\t\t\tvar bone = bones[ i ];\n\n\t\t\tif ( names[ bone.name ] ) {\n\n\t\t\t\tbone.name = names[ bone.name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetBones: function ( skeleton ) {\n\n\t\treturn Array.isArray( skeleton ) ? skeleton : skeleton.bones;\n\n\t},\n\n\tgetBoneByName: function ( name, skeleton ) {\n\n\t\tfor ( var i = 0, bones = this.getBones( skeleton ); i < bones.length; i ++ ) {\n\n\t\t\tif ( name === bones[ i ].name )\n\n\t\t\t\treturn bones[ i ];\n\n\t\t}\n\n\t},\n\n\tgetNearestBone: function ( bone, names ) {\n\n\t\twhile ( bone.isBone ) {\n\n\t\t\tif ( names.indexOf( bone.name ) !== - 1 ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t\tbone = bone.parent;\n\n\t\t}\n\n\t},\n\n\tfindBoneTrackData: function ( name, tracks ) {\n\n\t\tvar regexp = /\\[(.*)\\]\\.(.*)/,\n\t\t\tresult = { name: name };\n\n\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t// 1 is track name\n\t\t\t// 2 is track type\n\t\t\tvar trackData = regexp.exec( tracks[ i ].name );\n\n\t\t\tif ( trackData && name === trackData[ 1 ] ) {\n\n\t\t\t\tresult[ trackData[ 2 ] ] = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetEqualsBonesNames: function ( skeleton, targetSkeleton ) {\n\n\t\tvar sourceBones = this.getBones( skeleton ),\n\t\t\ttargetBones = this.getBones( targetSkeleton ),\n\t\t\tbones = [];\n\n\t\tsearch : for ( var i = 0; i < sourceBones.length; i ++ ) {\n\n\t\t\tvar boneName = sourceBones[ i ].name;\n\n\t\t\tfor ( var j = 0; j < targetBones.length; j ++ ) {\n\n\t\t\t\tif ( boneName === targetBones[ j ].name ) {\n\n\t\t\t\t\tbones.push( boneName );\n\n\t\t\t\t\tcontinue search;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bones;\n\n\t},\n\n\tclone: function ( source ) {\n\n\t\tvar sourceLookup = new Map();\n\t\tvar cloneLookup = new Map();\n\n\t\tvar clone = source.clone();\n\n\t\tparallelTraverse( source, clone, function ( sourceNode, clonedNode ) {\n\n\t\t\tsourceLookup.set( clonedNode, sourceNode );\n\t\t\tcloneLookup.set( sourceNode, clonedNode );\n\n\t\t} );\n\n\t\tclone.traverse( function ( node ) {\n\n\t\t\tif ( ! node.isSkinnedMesh ) return;\n\n\t\t\tvar clonedMesh = node;\n\t\t\tvar sourceMesh = sourceLookup.get( node );\n\t\t\tvar sourceBones = sourceMesh.skeleton.bones;\n\n\t\t\tclonedMesh.skeleton = sourceMesh.skeleton.clone();\n\t\t\tclonedMesh.bindMatrix.copy( sourceMesh.bindMatrix );\n\n\t\t\tclonedMesh.skeleton.bones = sourceBones.map( function ( bone ) {\n\n\t\t\t\treturn cloneLookup.get( bone );\n\n\t\t\t} );\n\n\t\t\tclonedMesh.bind( clonedMesh.skeleton, clonedMesh.bindMatrix );\n\n\t\t} );\n\n\t\treturn clone;\n\n\t}\n\n};\n\n\nfunction parallelTraverse( a, b, callback ) {\n\n\tcallback( a, b );\n\n\tfor ( var i = 0; i < a.children.length; i ++ ) {\n\n\t\tparallelTraverse( a.children[ i ], b.children[ i ], callback );\n\n\t}\n\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $prepared = Symbol('prepared');\nconst $prepare = Symbol('prepare');\nconst $preparedGLTF = Symbol('preparedGLTF');\nconst $clone = Symbol('clone');\n/**\n * Represents the preparation and enhancement of the output of a Three.js\n * GLTFLoader (a Three.js-flavor \"GLTF\"), to make it suitable for optimal,\n * correct viewing in a given presentation context and also make the cloning\n * process more explicit and legible.\n *\n * A GLTFInstance is API-compatible with a Three.js-flavor \"GLTF\", so it should\n * be considered to be interchangeable with the loaded result of a GLTFLoader.\n *\n * This basic implementation only implements trivial preparation and enhancement\n * of a GLTF. These operations are intended to be enhanced by inheriting\n * classes.\n */\nclass GLTFInstance {\n    constructor(preparedGLTF) {\n        this[$preparedGLTF] = preparedGLTF;\n    }\n    /**\n     * Prepares a given GLTF for presentation and future cloning. A GLTF that is\n     * prepared can safely have this method invoked on it multiple times; it will\n     * only be prepared once, including after being cloned.\n     */\n    static prepare(source) {\n        if (source.scene == null) {\n            throw new Error('Model does not have a scene');\n        }\n        if (source[$prepared]) {\n            return source;\n        }\n        const prepared = this[$prepare](source);\n        // NOTE: ES5 Symbol polyfill is not compatible with spread operator\n        // so {...prepared, [$prepared]: true} does not work\n        prepared[$prepared] = true;\n        return prepared;\n    }\n    /**\n     * Override in an inheriting class to apply specialty one-time preparations\n     * for a given input GLTF.\n     */\n    static [$prepare](source) {\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother preparing extra scenes for now:\n        const { scene } = source;\n        const scenes = [scene];\n        return Object.assign(Object.assign({}, source), { scene, scenes });\n    }\n    get parser() {\n        return this[$preparedGLTF].parser;\n    }\n    get animations() {\n        return this[$preparedGLTF].animations;\n    }\n    get scene() {\n        return this[$preparedGLTF].scene;\n    }\n    get scenes() {\n        return this[$preparedGLTF].scenes;\n    }\n    get cameras() {\n        return this[$preparedGLTF].cameras;\n    }\n    get asset() {\n        return this[$preparedGLTF].asset;\n    }\n    get userData() {\n        return this[$preparedGLTF].userData;\n    }\n    /**\n     * Creates and returns a copy of this instance.\n     */\n    clone() {\n        const GLTFInstanceConstructor = this.constructor;\n        const clonedGLTF = this[$clone]();\n        return new GLTFInstanceConstructor(clonedGLTF);\n    }\n    /**\n     * Cleans up any retained memory that might not otherwise be released when\n     * this instance is done being used.\n     */\n    dispose() {\n        this.scenes.forEach((scene) => {\n            scene.traverse((object) => {\n                if (!object.isMesh) {\n                    return;\n                }\n                const mesh = object;\n                const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n                materials.forEach(material => {\n                    material.dispose();\n                });\n                mesh.geometry.dispose();\n            });\n        });\n    }\n    /**\n     * Override in an inheriting class to implement specialized cloning strategies\n     */\n    [$clone]() {\n        const source = this[$preparedGLTF];\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother cloning extra scenes for now:\n        const scene = SkeletonUtils.clone(this.scene);\n        const scenes = [scene];\n        const userData = source.userData ? Object.assign({}, source.userData) : {};\n        return Object.assign(Object.assign({}, source), { scene, scenes, userData });\n    }\n}\n\n/**\n * @license MIT\n * @see https://github.com/mrdoob/three.js/blob/dev/LICENSE\n */\nconst alphaChunk = /* glsl */ `\n#ifdef ALPHATEST\n\n    if ( diffuseColor.a < ALPHATEST ) discard;\n    diffuseColor.a = 1.0;\n\n#endif\n`;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $cloneAndPatchMaterial = Symbol('cloneAndPatchMaterial');\nconst $correlatedSceneGraph = Symbol('correlatedSceneGraph');\n/**\n * This specialization of GLTFInstance collects all of the processing needed\n * to prepare a model and to clone it making special considerations for\n * <model-viewer> use cases.\n */\nclass ModelViewerGLTFInstance extends GLTFInstance {\n    /**\n     * @override\n     */\n    static [$prepare](source) {\n        const prepared = super[$prepare](source);\n        if (prepared[$correlatedSceneGraph] == null) {\n            prepared[$correlatedSceneGraph] = CorrelatedSceneGraph.from(prepared);\n        }\n        const { scene } = prepared;\n        const meshesToDuplicate = [];\n        scene.traverse((node) => {\n            // Set a high renderOrder while we're here to ensure the model\n            // always renders on top of the skysphere\n            node.renderOrder = 1000;\n            // Three.js seems to cull some animated models incorrectly. Since we\n            // expect to view our whole scene anyway, we turn off the frustum\n            // culling optimization here.\n            node.frustumCulled = false;\n            // Animations for objects without names target their UUID instead. When\n            // objects are cloned, they get new UUIDs which the animation can't\n            // find. To fix this, we assign their UUID as their name.\n            if (!node.name) {\n                node.name = node.uuid;\n            }\n            if (!node.isMesh) {\n                return;\n            }\n            node.castShadow = true;\n            const mesh = node;\n            let transparent = false;\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            materials.forEach(material => {\n                if (material.isMeshStandardMaterial) {\n                    if (material.transparent && material.side === DoubleSide) {\n                        transparent = true;\n                        material.side = FrontSide;\n                    }\n                    Renderer.singleton.roughnessMipmapper.generateMipmaps(material);\n                }\n            });\n            if (transparent) {\n                meshesToDuplicate.push(mesh);\n            }\n        });\n        // We duplicate transparent, double-sided meshes and render the back face\n        // before the front face. This creates perfect triangle sorting for all\n        // convex meshes. Sorting artifacts can still appear when you can see\n        // through more than two layers of a given mesh, but this can usually be\n        // mitigated by the author splitting the mesh into mostly convex regions.\n        // The performance cost is not too great as the same shader is reused and\n        // the same number of fragments are processed; only the vertex shader is run\n        // twice. @see https://threejs.org/examples/webgl_materials_physical_transparency.html\n        for (const mesh of meshesToDuplicate) {\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            const duplicateMaterials = materials.map((material) => {\n                const backMaterial = material.clone();\n                backMaterial.side = BackSide;\n                return backMaterial;\n            });\n            const duplicateMaterial = Array.isArray(mesh.material) ?\n                duplicateMaterials :\n                duplicateMaterials[0];\n            const meshBack = new Mesh(mesh.geometry, duplicateMaterial);\n            meshBack.renderOrder = -1;\n            mesh.add(meshBack);\n        }\n        return prepared;\n    }\n    get correlatedSceneGraph() {\n        return this[$preparedGLTF][$correlatedSceneGraph];\n    }\n    /**\n     * @override\n     */\n    [$clone]() {\n        const clone = super[$clone]();\n        const sourceUUIDToClonedMaterial = new Map();\n        clone.scene.traverse((node) => {\n            // Materials aren't cloned when cloning meshes; geometry\n            // and materials are copied by reference. This is necessary\n            // for the same model to be used twice with different\n            // environment maps.\n            if (node.isMesh) {\n                const mesh = node;\n                if (Array.isArray(mesh.material)) {\n                    mesh.material = mesh.material.map((material) => this[$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial));\n                }\n                else if (mesh.material != null) {\n                    mesh.material = this[$cloneAndPatchMaterial](mesh.material, sourceUUIDToClonedMaterial);\n                }\n            }\n        });\n        // Cross-correlate the scene graph by relying on information in the\n        // current scene graph; without this step, relationships between the\n        // Three.js object graph and the glTF scene graph will be lost.\n        clone[$correlatedSceneGraph] =\n            CorrelatedSceneGraph.from(clone, this.correlatedSceneGraph);\n        return clone;\n    }\n    /**\n     * Creates a clone of the given material, and applies a patch to the\n     * shader program.\n     */\n    [$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial) {\n        // If we already cloned this material (determined by tracking the UUID of\n        // source materials that have been cloned), then return that previously\n        // cloned instance:\n        if (sourceUUIDToClonedMaterial.has(material.uuid)) {\n            return sourceUUIDToClonedMaterial.get(material.uuid);\n        }\n        const clone = material.clone();\n        // This allows us to patch three's materials, on top of patches already\n        // made, for instance GLTFLoader patches SpecularGlossiness materials.\n        // Unfortunately, three's program cache differentiates SpecGloss materials\n        // via onBeforeCompile.toString(), so these two functions do the same\n        // thing but look different in order to force a proper recompile.\n        const oldOnBeforeCompile = material.onBeforeCompile;\n        clone.onBeforeCompile = material.isGLTFSpecularGlossinessMaterial ?\n            (shader) => {\n                oldOnBeforeCompile(shader, undefined);\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n            } :\n            (shader) => {\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n                oldOnBeforeCompile(shader, undefined);\n            };\n        // This makes shadows better for non-manifold meshes\n        clone.shadowSide = FrontSide;\n        // This improves transparent rendering and can be removed whenever\n        // https://github.com/mrdoob/three.js/pull/18235 finally lands.\n        if (clone.transparent) {\n            clone.depthWrite = false;\n        }\n        // This little hack ignores alpha for opaque materials, in order to comply\n        // with the glTF spec.\n        if (!clone.alphaTest && !clone.transparent) {\n            clone.alphaTest = -0.5;\n        }\n        sourceUUIDToClonedMaterial.set(material.uuid, clone);\n        return clone;\n    }\n}\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = function ( manager ) {\n\n\tDataTextureLoader.call( this, manager );\n\n\tthis.type = UnsignedByteType;\n\n};\n\nRGBELoader.prototype = Object.assign( Object.create( DataTextureLoader.prototype ), {\n\n\tconstructor: RGBELoader,\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse: function ( buffer ) {\n\n\t\tvar\n\t\t\t/* return codes for rgbe routines */\n\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: console.error( \"RGBELoader Read Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_write_error: console.error( \"RGBELoader Write Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_format_error: console.error( \"RGBELoader Bad File Format: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: console.error( \"RGBELoader: Error: \" + ( msg || '' ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = \"\\n\",\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) )\n\t\t\t\t;\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\t\t\t\tvar line, match,\n\n\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)$/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_read_error, \"no header found\" );\n\n\t\t\t\t}\n\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad initial token\" );\n\n\t\t\t\t}\n\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + \"\\n\";\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing format specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing image size specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"wrong scanline width\" );\n\n\t\t\t\t}\n\n\t\t\t\tdata_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba.length ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_memory_error, \"unable to allocate buffer space\" );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\trgbeStart = new Uint8Array( 4 );\n\t\t\t\tscanline_buffer = new Uint8Array( ptr_end );\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 != rgbeStart[ 0 ] ) || ( 2 != rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) != scanline_width ) ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad rgbe scanline format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tptr = 0;\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad scanline data\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tbyteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tvar RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\n\t\t};\n\n\t\tvar RGBEByteToRGBHalf = ( function () {\n\n\t\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t\tvar floatView = new Float32Array( 1 );\n\t\t\tvar int32View = new Int32Array( floatView.buffer );\n\n\t\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t\t * used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t\t * by James Tursa?s half-precision code. */\n\t\t\tfunction toHalf( val ) {\n\n\t\t\t\tfloatView[ 0 ] = val;\n\t\t\t\tvar x = int32View[ 0 ];\n\n\t\t\t\tvar bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\t\t\tvar m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\t\t\tvar e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t\t * half, return signed zero. */\n\t\t\t\tif ( e < 103 ) return bits;\n\n\t\t\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\t\t\tif ( e > 142 ) {\n\n\t\t\t\t\tbits |= 0x7c00;\n\t\t\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t\t * not Inf, so make sure we set one mantissa bit too. */\n\t\t\t\t\tbits |= ( ( e == 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\t/* If exponent underflows but not too much, return a denormal */\n\t\t\t\tif ( e < 113 ) {\n\n\t\t\t\t\tm |= 0x0800;\n\t\t\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t\t * to 1, which is OK. */\n\t\t\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t\t * the exponent, which is OK. */\n\t\t\t\tbits += m & 1;\n\t\t\t\treturn bits;\n\n\t\t\t}\n\n\t\t\treturn function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t\tdestArray[ destOffset + 0 ] = toHalf( sourceArray[ sourceOffset + 0 ] * scale );\n\t\t\t\tdestArray[ destOffset + 1 ] = toHalf( sourceArray[ sourceOffset + 1 ] * scale );\n\t\t\t\tdestArray[ destOffset + 2 ] = toHalf( sourceArray[ sourceOffset + 2 ] * scale );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tvar byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tvar rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tif ( RGBE_RETURN_FAILURE !== rgbe_header_info ) {\n\n\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\th = rgbe_header_info.height,\n\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\t\t\tif ( RGBE_RETURN_FAILURE !== image_rgba_data ) {\n\n\t\t\t\tswitch ( this.type ) {\n\n\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\tvar data = image_rgba_data;\n\t\t\t\t\t\tvar format = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\tvar type = UnsignedByteType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar floatArray = new Float32Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = floatArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = FloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar halfArray = new Uint16Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = halfArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = HalfFloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttype: type\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tsetDataType: function ( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase FloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn DataTextureLoader.prototype.load.call( this, url, onLoadCallback, onProgress, onError );\n\n\t}\n\n} );\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass EnvironmentScene extends Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new BoxBufferGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new MeshStandardMaterial({ metalness: 0, side: BackSide });\n        const boxMaterial = new MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new PointLight(0xffffff, 500.0, 28, 2);\n        mainLight.position.set(0.418, 16.199, 0.300);\n        this.add(mainLight);\n        const room = new Mesh(geometry, roomMaterial);\n        room.position.set(-0.757, 13.219, 0.717);\n        room.scale.set(31.713, 28.305, 28.591);\n        this.add(room);\n        const box1 = new Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, 2.009, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, 0.857, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x right\n        const light1 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light1.position.set(-16.116, 14.37, 8.208);\n        light1.scale.set(0.1, 2.428, 2.739);\n        this.add(light1);\n        // -x left\n        const light2 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light2.position.set(-16.109, 18.021, -8.207);\n        light2.scale.set(0.1, 2.425, 2.751);\n        this.add(light2);\n        // +x\n        const light3 = new Mesh(geometry, this.createAreaLightMaterial(17));\n        light3.position.set(14.904, 12.198, -1.832);\n        light3.scale.set(0.15, 4.265, 6.331);\n        this.add(light3);\n        // +z\n        const light4 = new Mesh(geometry, this.createAreaLightMaterial(43));\n        light4.position.set(-0.462, 8.89, 14.520);\n        light4.scale.set(4.38, 5.441, 0.088);\n        this.add(light4);\n        // -z\n        const light5 = new Mesh(geometry, this.createAreaLightMaterial(20));\n        light5.position.set(3.235, 11.486, -12.541);\n        light5.scale.set(2.5, 2.0, 0.1);\n        this.add(light5);\n        // +y\n        const light6 = new Mesh(geometry, this.createAreaLightMaterial(100));\n        light6.position.set(0.0, 20.0, 0.0);\n        light6.scale.set(1.0, 0.1, 1.0);\n        this.add(light6);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$7, _b$5;\nconst GENERATED_SIGMA = 0.04;\n// Enable three's loader cache so we don't create redundant\n// Image objects to decode images fetched over the network.\nCache.enabled = true;\nconst HDR_FILE_RE = /\\.hdr$/;\nconst ldrLoader = new TextureLoader();\nconst hdrLoader = new RGBELoader();\nconst $environmentMapCache = Symbol('environmentMapCache');\nconst $generatedEnvironmentMap = Symbol('generatedEnvironmentMap');\nconst $PMREMGenerator = Symbol('PMREMGenerator');\nconst $addMetadata = Symbol('addMetadata');\nconst $loadEnvironmentMapFromUrl = Symbol('loadEnvironmentMapFromUrl');\nconst $loadGeneratedEnvironmentMap = Symbol('loadGeneratedEnvironmentMap');\n// Attach a `userData` object for arbitrary data on textures that\n// originate from TextureUtils, similar to Object3D's userData,\n// for help debugging, providing metadata for tests, and semantically\n// describe the type of texture within the context of this application.\nconst userData = {\n    url: null,\n    // 'Equirectangular', 'CubeUV', 'PMREM'\n    mapping: null,\n};\nclass TextureUtils extends EventDispatcher {\n    constructor(threeRenderer) {\n        super();\n        this[_a$7] = null;\n        this[_b$5] = new Map();\n        this[$PMREMGenerator] = new PMREMGenerator(threeRenderer);\n    }\n    get pmremGenerator() {\n        return this[$PMREMGenerator];\n    }\n    async load(url, progressCallback = () => { }) {\n        try {\n            this[$PMREMGenerator].compileEquirectangularShader();\n            const isHDR = HDR_FILE_RE.test(url);\n            const loader = isHDR ? hdrLoader : ldrLoader;\n            const texture = await new Promise((resolve, reject) => loader.load(url, resolve, (event) => {\n                progressCallback(event.loaded / event.total * 0.9);\n            }, reject));\n            progressCallback(1.0);\n            this[$addMetadata](texture, url, 'Equirectangular');\n            if (isHDR) {\n                texture.encoding = RGBEEncoding;\n                texture.minFilter = NearestFilter;\n                texture.magFilter = NearestFilter;\n                texture.flipY = true;\n            }\n            else {\n                texture.encoding = GammaEncoding;\n            }\n            return texture;\n        }\n        finally {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n        }\n    }\n    async loadEquirectAsCubeUV(url, progressCallback = () => { }) {\n        let equirect = null;\n        try {\n            equirect = await this.load(url, progressCallback);\n            const cubeUV = this[$PMREMGenerator].fromEquirectangular(equirect);\n            this[$addMetadata](cubeUV.texture, url, 'CubeUV');\n            return cubeUV;\n        }\n        finally {\n            if (equirect != null) {\n                equirect.dispose();\n            }\n        }\n    }\n    /**\n     * Returns a { skybox, environmentMap } object with the targets/textures\n     * accordingly. `skybox` is a WebGLRenderCubeTarget, and `environmentMap`\n     * is a Texture from a WebGLRenderCubeTarget.\n     */\n    async generateEnvironmentMapAndSkybox(skyboxUrl = null, environmentMapUrl = null, options = {}) {\n        const { progressTracker } = options;\n        const updateGenerationProgress = progressTracker != null ? progressTracker.beginActivity() : () => { };\n        try {\n            let skyboxLoads = Promise.resolve(null);\n            let environmentMapLoads;\n            // If we have a skybox URL, attempt to load it as a cubemap\n            if (!!skyboxUrl) {\n                skyboxLoads =\n                    this[$loadEnvironmentMapFromUrl](skyboxUrl, progressTracker);\n            }\n            if (!!environmentMapUrl) {\n                // We have an available environment map URL\n                environmentMapLoads = this[$loadEnvironmentMapFromUrl](environmentMapUrl, progressTracker);\n            }\n            else if (!!skyboxUrl) {\n                // Fallback to deriving the environment map from an available skybox\n                environmentMapLoads = skyboxLoads;\n            }\n            else {\n                // Fallback to generating the environment map\n                environmentMapLoads = this[$loadGeneratedEnvironmentMap]();\n            }\n            let [environmentMap, skybox] = await Promise.all([environmentMapLoads, skyboxLoads]);\n            if (environmentMap == null) {\n                throw new Error('Failed to load environment map.');\n            }\n            environmentMap = environmentMap;\n            this[$addMetadata](environmentMap.texture, environmentMapUrl, 'PMREM');\n            if (skybox != null) {\n                this[$addMetadata](skybox.texture, skyboxUrl, 'PMREM');\n            }\n            return { environmentMap, skybox };\n        }\n        finally {\n            updateGenerationProgress(1.0);\n        }\n    }\n    [(_a$7 = $generatedEnvironmentMap, _b$5 = $environmentMapCache, $addMetadata)](texture, url, mapping) {\n        if (texture == null) {\n            return;\n        }\n        texture.userData = Object.assign(Object.assign({}, userData), ({\n            url: url,\n            mapping: mapping,\n        }));\n    }\n    /**\n     * Loads a WebGLRenderTarget from a given URL. The render target in this\n     * case will be assumed to be used as an environment map.\n     */\n    [$loadEnvironmentMapFromUrl](url, progressTracker) {\n        if (!this[$environmentMapCache].has(url)) {\n            const progressCallback = progressTracker ? progressTracker.beginActivity() : () => { };\n            const environmentMapLoads = this.loadEquirectAsCubeUV(url, progressCallback);\n            this[$environmentMapCache].set(url, environmentMapLoads);\n        }\n        return this[$environmentMapCache].get(url);\n    }\n    /**\n     * Loads a dynamically generated environment map.\n     */\n    [$loadGeneratedEnvironmentMap]() {\n        if (this[$generatedEnvironmentMap] == null) {\n            const defaultScene = new EnvironmentScene;\n            this[$generatedEnvironmentMap] =\n                this[$PMREMGenerator].fromScene(defaultScene, GENERATED_SIGMA);\n        }\n        return Promise.resolve(this[$generatedEnvironmentMap]);\n    }\n    async dispose() {\n        const allTargetsLoad = [];\n        // NOTE(cdata): We would use for-of iteration on the maps here, but\n        // IE11 doesn't have the necessary iterator-returning methods. So,\n        // disposal of these render targets is kind of convoluted as a result.\n        this[$environmentMapCache].forEach((targetLoads) => {\n            allTargetsLoad.push(targetLoads);\n        });\n        this[$environmentMapCache].clear();\n        for (const targetLoads of allTargetsLoad) {\n            try {\n                const target = await targetLoads;\n                target.dispose();\n            }\n            catch (e) {\n                // Suppress errors, so that all render targets will be disposed\n            }\n        }\n        if (this[$generatedEnvironmentMap] != null) {\n            this[$generatedEnvironmentMap].dispose();\n            this[$generatedEnvironmentMap] = null;\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$8, _b$6;\n// Between 0 and 1: larger means the average responds faster and is less smooth.\nconst DURATION_DECAY = 0.2;\nconst LOW_FRAME_DURATION_MS = 18;\nconst HIGH_FRAME_DURATION_MS = 26;\nconst MAX_AVG_CHANGE_MS = 2;\nconst SCALE_STEP = 0.79;\nconst DEFAULT_MIN_SCALE = 0.5;\nconst $onWebGLContextLost = Symbol('onWebGLContextLost');\nconst $webGLContextLostHandler = Symbol('webGLContextLostHandler');\nconst $singleton = Symbol('singleton');\n/**\n * Registers canvases with Canvas2DRenderingContexts and renders them\n * all in the same WebGLRenderingContext, spitting out textures to apply\n * to the canvases. Creates a fullscreen WebGL canvas that is not added\n * to the DOM, and on each frame, renders each registered canvas on a portion\n * of the WebGL canvas, and applies the texture on the registered canvas.\n *\n * In the future, can use ImageBitmapRenderingContext instead of\n * Canvas2DRenderingContext if supported for cheaper transfering of\n * the texture.\n */\nclass Renderer extends EventDispatcher {\n    constructor(options) {\n        super();\n        this.loader = new CachingGLTFLoader(ModelViewerGLTFInstance);\n        this.width = 0;\n        this.height = 0;\n        this.dpr = 1;\n        this.minScale = DEFAULT_MIN_SCALE;\n        this.debugger = null;\n        this.scenes = new Set();\n        this.multipleScenesVisible = false;\n        this.scale = 1;\n        this.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        this[_b$6] = (event) => this[$onWebGLContextLost](event);\n        this.dpr = resolveDpr();\n        this.canvasElement = document.createElement('canvas');\n        this.canvasElement.id = 'webgl-canvas';\n        this.canvas3D = \n            this.canvasElement;\n        this.canvas3D.addEventListener('webglcontextlost', this[$webGLContextLostHandler]);\n        try {\n            this.threeRenderer = new WebGL1Renderer({\n                canvas: this.canvas3D,\n                alpha: true,\n                antialias: true,\n                powerPreference: 'high-performance',\n                preserveDrawingBuffer: true\n            });\n            this.threeRenderer.autoClear = true;\n            this.threeRenderer.outputEncoding = GammaEncoding;\n            this.threeRenderer.gammaFactor = 2.2;\n            this.threeRenderer.physicallyCorrectLights = true;\n            this.threeRenderer.setPixelRatio(1); // handle pixel ratio externally\n            this.threeRenderer.shadowMap.enabled = true;\n            this.threeRenderer.shadowMap.type = PCFSoftShadowMap;\n            this.threeRenderer.shadowMap.autoUpdate = false;\n            this.debugger =\n                options != null && !!options.debug ? new Debugger(this) : null;\n            this.threeRenderer.debug = { checkShaderErrors: !!this.debugger };\n            // ACESFilmicToneMapping appears to be the most \"saturated\",\n            // and similar to Filament's gltf-viewer.\n            this.threeRenderer.toneMapping = ACESFilmicToneMapping;\n        }\n        catch (error) {\n            console.warn(error);\n        }\n        this.arRenderer = new ARRenderer(this);\n        this.textureUtils =\n            this.canRender ? new TextureUtils(this.threeRenderer) : null;\n        this.roughnessMipmapper = new RoughnessMipmapper(this.threeRenderer);\n        this.updateRendererSize();\n        this.lastTick = performance.now();\n        this.avgFrameDuration = 0;\n    }\n    static get singleton() {\n        return this[$singleton];\n    }\n    static resetSingleton() {\n        this[$singleton].dispose();\n        this[$singleton] = new Renderer({ debug: isDebugMode() });\n    }\n    get canRender() {\n        return this.threeRenderer != null;\n    }\n    get scaleFactor() {\n        return this.scale;\n    }\n    /**\n     * Updates the renderer's size based on the largest scene and any changes to\n     * device pixel ratio.\n     */\n    updateRendererSize() {\n        const dpr = resolveDpr();\n        if (dpr !== this.dpr) {\n            // If the device pixel ratio has changed due to page zoom, elements\n            // specified by % width do not fire a resize event even though their CSS\n            // pixel dimensions change, so we force them to update their size here.\n            for (const scene of this.scenes) {\n                const { element } = scene;\n                element[$updateSize](element.getBoundingClientRect());\n            }\n        }\n        // Make the renderer the size of the largest scene\n        let width = 0;\n        let height = 0;\n        for (const scene of this.scenes) {\n            width = Math.max(width, scene.width);\n            height = Math.max(height, scene.height);\n        }\n        if (width === this.width && height === this.height && dpr === this.dpr) {\n            return;\n        }\n        this.width = width;\n        this.height = height;\n        this.dpr = dpr;\n        if (this.canRender) {\n            this.threeRenderer.setSize(width * dpr, height * dpr, false);\n        }\n        // Expand the canvas size to make up for shrinking the viewport.\n        const widthCSS = width / this.scale;\n        const heightCSS = height / this.scale;\n        // The canvas element must by styled outside of three due to the offscreen\n        // canvas not being directly stylable.\n        this.canvasElement.style.width = `${widthCSS}px`;\n        this.canvasElement.style.height = `${heightCSS}px`;\n        // Each scene's canvas must match the renderer size. In general they can be\n        // larger than the element that contains them, but the overflow is hidden\n        // and only the portion that is shown is copied over.\n        for (const scene of this.scenes) {\n            const { canvas } = scene;\n            canvas.width = width * dpr;\n            canvas.height = height * dpr;\n            canvas.style.width = `${widthCSS}px`;\n            canvas.style.height = `${heightCSS}px`;\n            scene.isDirty = true;\n        }\n    }\n    updateRendererScale() {\n        let { scale } = this;\n        if (this.avgFrameDuration > HIGH_FRAME_DURATION_MS &&\n            scale > this.minScale) {\n            scale *= SCALE_STEP;\n        }\n        else if (this.avgFrameDuration < LOW_FRAME_DURATION_MS && scale < 1) {\n            scale /= SCALE_STEP;\n            scale = Math.min(scale, 1);\n        }\n        scale = Math.max(scale, this.minScale);\n        if (scale == this.scale) {\n            return;\n        }\n        this.scale = scale;\n        this.avgFrameDuration =\n            (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        const width = this.width / scale;\n        const height = this.height / scale;\n        this.canvasElement.style.width = `${width}px`;\n        this.canvasElement.style.height = `${height}px`;\n        for (const scene of this.scenes) {\n            const { style } = scene.canvas;\n            style.width = `${width}px`;\n            style.height = `${height}px`;\n            scene.isDirty = true;\n        }\n    }\n    registerScene(scene) {\n        this.scenes.add(scene);\n        const { canvas } = scene;\n        canvas.width = this.width * this.dpr;\n        canvas.height = this.height * this.dpr;\n        canvas.style.width = `${this.width / this.scale}px`;\n        canvas.style.height = `${this.height / this.scale}px`;\n        if (this.multipleScenesVisible) {\n            canvas.classList.add('show');\n        }\n        scene.isDirty = true;\n        if (this.canRender && this.scenes.size > 0) {\n            this.threeRenderer.setAnimationLoop((time) => this.render(time));\n        }\n        if (this.debugger != null) {\n            this.debugger.addScene(scene);\n        }\n    }\n    unregisterScene(scene) {\n        this.scenes.delete(scene);\n        if (this.canRender && this.scenes.size === 0) {\n            this.threeRenderer.setAnimationLoop(null);\n        }\n        if (this.debugger != null) {\n            this.debugger.removeScene(scene);\n        }\n    }\n    displayCanvas(scene) {\n        return this.multipleScenesVisible ? scene.element[$canvas] :\n            this.canvasElement;\n    }\n    /**\n     * The function enables an optimization, where when there is only a single\n     * <model-viewer> element, we can use the renderer's 3D canvas directly for\n     * display. Otherwise we need to use the element's 2D canvas and copy the\n     * renderer's result into it.\n     */\n    selectCanvas() {\n        let visibleScenes = 0;\n        let visibleInput = null;\n        for (const scene of this.scenes) {\n            const { element } = scene;\n            if (element.modelIsVisible) {\n                ++visibleScenes;\n                visibleInput = element[$userInputElement];\n            }\n        }\n        const multipleScenesVisible = visibleScenes > 1 || USE_OFFSCREEN_CANVAS;\n        const { canvasElement } = this;\n        if (multipleScenesVisible === this.multipleScenesVisible &&\n            (multipleScenesVisible ||\n                canvasElement.parentElement === visibleInput)) {\n            return;\n        }\n        this.multipleScenesVisible = multipleScenesVisible;\n        if (multipleScenesVisible) {\n            canvasElement.classList.remove('show');\n        }\n        for (const scene of this.scenes) {\n            const userInputElement = scene.element[$userInputElement];\n            const canvas = scene.element[$canvas];\n            if (multipleScenesVisible) {\n                canvas.classList.add('show');\n                scene.isDirty = true;\n            }\n            else if (userInputElement === visibleInput) {\n                userInputElement.appendChild(canvasElement);\n                canvasElement.classList.add('show');\n                canvas.classList.remove('show');\n                scene.isDirty = true;\n            }\n        }\n    }\n    /**\n     * Returns an array version of this.scenes where the non-visible ones are\n     * first. This allows eager scenes to be rendered before they are visible,\n     * without needing the multi-canvas render path.\n     */\n    orderedScenes() {\n        const scenes = [];\n        for (const visible of [false, true]) {\n            for (const scene of this.scenes) {\n                if (scene.element.modelIsVisible === visible) {\n                    scenes.push(scene);\n                }\n            }\n        }\n        return scenes;\n    }\n    get isPresenting() {\n        return this.arRenderer.isPresenting;\n    }\n    /**\n     * This method takes care of updating the element and renderer state based on\n     * the time that has passed since the last rendered frame.\n     */\n    preRender(scene, t, delta) {\n        const { element, exposure, model } = scene;\n        element[$tick$1](t, delta);\n        const exposureIsNumber = typeof exposure === 'number' && !self.isNaN(exposure);\n        this.threeRenderer.toneMappingExposure = exposureIsNumber ? exposure : 1.0;\n        if (model.updateShadow()) {\n            this.threeRenderer.shadowMap.needsUpdate = true;\n        }\n    }\n    render(t) {\n        const delta = t - this.lastTick;\n        this.lastTick = t;\n        if (!this.canRender || this.isPresenting) {\n            return;\n        }\n        this.avgFrameDuration += clamp(DURATION_DECAY * (delta - this.avgFrameDuration), -MAX_AVG_CHANGE_MS, MAX_AVG_CHANGE_MS);\n        this.selectCanvas();\n        this.updateRendererSize();\n        this.updateRendererScale();\n        const { dpr, scale } = this;\n        for (const scene of this.orderedScenes()) {\n            if (!scene.element[$sceneIsReady]()) {\n                continue;\n            }\n            this.preRender(scene, t, delta);\n            if (!scene.isDirty) {\n                continue;\n            }\n            scene.isDirty = false;\n            if (!scene.element.modelIsVisible && !this.multipleScenesVisible) {\n                // Here we are pre-rendering on the visible canvas, so we must mark the\n                // visible scene dirty to ensure it overwrites us.\n                for (const scene of this.scenes) {\n                    if (scene.element.modelIsVisible) {\n                        scene.isDirty = true;\n                    }\n                }\n            }\n            // We avoid using the Three.js PixelRatio and handle it ourselves here so\n            // that we can do proper rounding and avoid white boundary pixels.\n            const width = Math.min(Math.ceil(scene.width * scale * dpr), this.canvas3D.width);\n            const height = Math.min(Math.ceil(scene.height * scale * dpr), this.canvas3D.height);\n            // Need to set the render target in order to prevent\n            // clearing the depth from a different buffer\n            this.threeRenderer.setRenderTarget(null);\n            this.threeRenderer.setViewport(0, Math.floor(this.height * dpr) - height, width, height);\n            this.threeRenderer.render(scene, scene.getCamera());\n            if (this.multipleScenesVisible) {\n                if (scene.context == null) {\n                    scene.createContext();\n                }\n                {\n                    const context2D = scene.context;\n                    context2D.clearRect(0, 0, width, height);\n                    context2D.drawImage(this.canvas3D, 0, 0, width, height, 0, 0, width, height);\n                }\n            }\n        }\n    }\n    dispose() {\n        if (this.textureUtils != null) {\n            this.textureUtils.dispose();\n        }\n        if (this.threeRenderer != null) {\n            this.threeRenderer.dispose();\n        }\n        this.textureUtils = null;\n        this.threeRenderer = null;\n        this.scenes.clear();\n        this.canvas3D.removeEventListener('webglcontextlost', this[$webGLContextLostHandler]);\n    }\n    [(_a$8 = $singleton, _b$6 = $webGLContextLostHandler, $onWebGLContextLost)](event) {\n        this.dispatchEvent({ type: 'contextlost', sourceEvent: event });\n    }\n}\nRenderer[_a$8] = new Renderer({ debug: isDebugMode() });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Converts a base64 string which represents a data url\n * into a Blob of the same contents.\n */\nconst dataUrlToBlob = async (base64DataUrl) => {\n    return new Promise((resolve, reject) => {\n        const sliceSize = 512;\n        const typeMatch = base64DataUrl.match(/data:(.*);/);\n        if (!typeMatch) {\n            return reject(new Error(`${base64DataUrl} is not a valid data Url`));\n        }\n        const type = typeMatch[1];\n        const base64 = base64DataUrl.replace(/data:image\\/\\w+;base64,/, '');\n        const byteCharacters = atob(base64);\n        const byteArrays = [];\n        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            const slice = byteCharacters.slice(offset, offset + sliceSize);\n            const byteNumbers = new Array(slice.length);\n            for (let i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            const byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        resolve(new Blob(byteArrays, { type }));\n    });\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$9, _b$7;\nconst $ongoingActivities = Symbol('ongoingActivities');\nconst $announceTotalProgress = Symbol('announceTotalProgress');\nconst $eventDelegate = Symbol('eventDelegate');\nconst ACTIVITY_PROGRESS_WEIGHT = 0.5;\n/**\n * ProgressTracker is an event emitter that helps to track the ongoing progress\n * of many simultaneous actions.\n *\n * ProgressTracker reports progress activity in the form of a progress event.\n * The event.detail.totalProgress value indicates the elapsed progress of all\n * activities being tracked by the ProgressTracker.\n *\n * The value of totalProgress is a number that progresses from 0 to 1. The\n * ProgressTracker allows for the lazy accumulation of tracked actions, so the\n * total progress represents a abstract, non-absolute progress towards the\n * completion of all currently tracked events.\n *\n * When all currently tracked activities are finished, the ProgressTracker\n * emits one final progress event and then resets the list of its currently\n * tracked activities. This means that from an observer's perspective,\n * ongoing activities will accumulate and collectively contribute to the notion\n * of total progress until all currently tracked ongoing activities have\n * completed.\n */\nclass ProgressTracker {\n    constructor() {\n        // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n        // EventTarget interface without implementing or requiring a full polyfill. We\n        // should remove this once EventTarget is inheritable everywhere.\n        this[_a$9] = document.createDocumentFragment();\n        // NOTE(cdata): We declare each of these methods independently here so that we\n        // can inherit the correct types from EventTarget's interface. Maybe there is\n        // a better way to do this dynamically so that we don't repeat ourselves?\n        this.addEventListener = (...args) => this[$eventDelegate].addEventListener(...args);\n        this.removeEventListener = (...args) => this[$eventDelegate].removeEventListener(...args);\n        this.dispatchEvent = (...args) => this[$eventDelegate].dispatchEvent(...args);\n        this[_b$7] = new Set();\n    }\n    /**\n     * The total number of activities currently being tracked.\n     */\n    get ongoingActivityCount() {\n        return this[$ongoingActivities].size;\n    }\n    /**\n     * Registers a new activity to be tracked by the progress tracker. The method\n     * returns a special callback that should be invoked whenever new progress is\n     * ready to be reported. The progress should be reported as a value between 0\n     * and 1, where 0 would represent the beginning of the action and 1 would\n     * represent its completion.\n     *\n     * There is no built-in notion of a time-out for ongoing activities, so once\n     * an ongoing activity is begun, it is up to the consumer of this API to\n     * update the progress until that activity is no longer ongoing.\n     *\n     * Progress is only allowed to move forward for any given activity. If a lower\n     * progress is reported than the previously reported progress, it will be\n     * ignored.\n     */\n    beginActivity() {\n        const activity = { progress: 0 };\n        this[$ongoingActivities].add(activity);\n        if (this.ongoingActivityCount === 1) {\n            // Announce the first progress event (which should always be 0 / 1\n            // total progress):\n            this[$announceTotalProgress]();\n        }\n        return (progress) => {\n            let nextProgress;\n            nextProgress = Math.max(clamp(progress, 0, 1), activity.progress);\n            if (nextProgress !== activity.progress) {\n                activity.progress = nextProgress;\n                this[$announceTotalProgress]();\n            }\n            return activity.progress;\n        };\n    }\n    [(_a$9 = $eventDelegate, _b$7 = $ongoingActivities, $announceTotalProgress)]() {\n        let totalProgress = 0;\n        let statusCount = 0;\n        let completedActivities = 0;\n        for (const activity of this[$ongoingActivities]) {\n            const { progress } = activity;\n            const compoundWeight = ACTIVITY_PROGRESS_WEIGHT / Math.pow(2, statusCount++);\n            totalProgress += progress * compoundWeight;\n            if (progress === 1.0) {\n                completedActivities++;\n            }\n        }\n        if (completedActivities === this.ongoingActivityCount) {\n            totalProgress = 1.0;\n            this[$ongoingActivities].clear();\n        }\n        this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress } }));\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar _a$a, _b$8, _c$2, _d$2, _e$1, _f$1, _g$1, _h$1, _j$1, _k$1;\nconst CLEAR_MODEL_TIMEOUT_MS = 1000;\nconst FALLBACK_SIZE_UPDATE_THRESHOLD_MS = 50;\nconst ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD = 0;\nconst UNSIZED_MEDIA_WIDTH = 300;\nconst UNSIZED_MEDIA_HEIGHT = 150;\nconst blobCanvas = document.createElement('canvas');\nlet blobContext = null;\nconst $template = Symbol('template');\nconst $fallbackResizeHandler = Symbol('fallbackResizeHandler');\nconst $defaultAriaLabel = Symbol('defaultAriaLabel');\nconst $resizeObserver = Symbol('resizeObserver');\nconst $intersectionObserver = Symbol('intersectionObserver');\nconst $clearModelTimeout = Symbol('clearModelTimeout');\nconst $onContextLost = Symbol('onContextLost');\nconst $contextLostHandler = Symbol('contextLostHandler');\nconst $loaded = Symbol('loaded');\nconst $updateSize = Symbol('updateSize');\nconst $isElementInViewport = Symbol('isElementInViewport');\nconst $announceModelVisibility = Symbol('announceModelVisibility');\nconst $ariaLabel = Symbol('ariaLabel');\nconst $loadedTime = Symbol('loadedTime');\nconst $updateSource = Symbol('updateSource');\nconst $markLoaded = Symbol('markLoaded');\nconst $container = Symbol('container');\nconst $userInputElement = Symbol('input');\nconst $canvas = Symbol('canvas');\nconst $scene = Symbol('scene');\nconst $needsRender = Symbol('needsRender');\nconst $tick$1 = Symbol('tick');\nconst $onModelLoad = Symbol('onModelLoad');\nconst $onResize = Symbol('onResize');\nconst $renderer = Symbol('renderer');\nconst $progressTracker = Symbol('progressTracker');\nconst $getLoaded = Symbol('getLoaded');\nconst $getModelIsVisible = Symbol('getModelIsVisible');\nconst $shouldAttemptPreload = Symbol('shouldAttemptPreload');\nconst $sceneIsReady = Symbol('sceneIsReady');\nconst $hasTransitioned = Symbol('hasTransitioned');\nconst toVector3D = (v) => {\n    return {\n        x: v.x,\n        y: v.y,\n        z: v.z,\n        toString() {\n            return `${this.x}m ${this.y}m ${this.z}m`;\n        }\n    };\n};\n/**\n * Definition for a basic <model-viewer> element.\n */\nclass ModelViewerElementBase extends UpdatingElement {\n    /**\n     * Creates a new ModelViewerElement.\n     */\n    constructor() {\n        super();\n        this.alt = null;\n        this.src = null;\n        this[_a$a] = false;\n        this[_b$8] = false;\n        this[_c$2] = 0;\n        this[_d$2] = null;\n        this[_e$1] = debounce(() => {\n            const boundingRect = this.getBoundingClientRect();\n            this[$updateSize](boundingRect);\n        }, FALLBACK_SIZE_UPDATE_THRESHOLD_MS);\n        this[_f$1] = debounce((oldVisibility) => {\n            const newVisibility = this.modelIsVisible;\n            if (newVisibility !== oldVisibility) {\n                this.dispatchEvent(new CustomEvent('model-visibility', { detail: { visible: newVisibility } }));\n            }\n        }, ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD);\n        this[_g$1] = null;\n        this[_h$1] = null;\n        this[_j$1] = new ProgressTracker();\n        this[_k$1] = (event) => this[$onContextLost](event);\n        // NOTE(cdata): It is *very important* to access this template first so that\n        // the ShadyCSS template preparation steps happen before element styling in\n        // IE11:\n        const template = this.constructor.template;\n        if (window.ShadyCSS) {\n            window.ShadyCSS.styleElement(this, {});\n        }\n        // NOTE(cdata): The canonical ShadyCSS examples suggest that the Shadow Root\n        // should be created after the invocation of ShadyCSS.styleElement\n        this.attachShadow({ mode: 'open' });\n        const shadowRoot = this.shadowRoot;\n        shadowRoot.appendChild(template.content.cloneNode(true));\n        this[$container] = shadowRoot.querySelector('.container');\n        this[$userInputElement] =\n            shadowRoot.querySelector('.userInput');\n        this[$canvas] = shadowRoot.querySelector('canvas');\n        this[$defaultAriaLabel] =\n            this[$userInputElement].getAttribute('aria-label');\n        // Because of potential race conditions related to invoking the constructor\n        // we only use the bounding rect to set the initial size if the element is\n        // already connected to the document:\n        let width, height;\n        if (this.isConnected) {\n            const rect = this.getBoundingClientRect();\n            width = rect.width;\n            height = rect.height;\n        }\n        else {\n            width = UNSIZED_MEDIA_WIDTH;\n            height = UNSIZED_MEDIA_HEIGHT;\n        }\n        // Create the underlying ModelScene.\n        this[$scene] =\n            new ModelScene({ canvas: this[$canvas], element: this, width, height });\n        this[$scene].addEventListener('model-load', (event) => {\n            this[$markLoaded]();\n            this[$onModelLoad]();\n            this.dispatchEvent(new CustomEvent('load', { detail: { url: event.url } }));\n        });\n        // Update initial size on microtask timing so that subclasses have a\n        // chance to initialize\n        Promise.resolve().then(() => {\n            this[$updateSize](this.getBoundingClientRect());\n        });\n        if (HAS_RESIZE_OBSERVER) {\n            // Set up a resize observer so we can scale our canvas\n            // if our <model-viewer> changes\n            this[$resizeObserver] = new ResizeObserver((entries) => {\n                // Don't resize anything if in AR mode; otherwise the canvas\n                // scaling to fullscreen on entering AR will clobber the flat/2d\n                // dimensions of the element.\n                if (this[$renderer].isPresenting) {\n                    return;\n                }\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        this[$updateSize](entry.contentRect);\n                    }\n                }\n            });\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver] = new IntersectionObserver(entries => {\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        const oldVisibility = this.modelIsVisible;\n                        this[$isElementInViewport] = entry.isIntersecting;\n                        this[$announceModelVisibility](oldVisibility);\n                        if (this[$isElementInViewport] && !this[$sceneIsReady]()) {\n                            this[$updateSource]();\n                        }\n                    }\n                }\n            }, {\n                root: null,\n                // We used to have margin here, but it was causing animated models below\n                // the fold to steal the frame budget. Weirder still, it would also\n                // cause input events to be swallowed, sometimes for seconds on the\n                // model above the fold, but only when the animated model was completely\n                // below. Setting this margin to zero fixed it.\n                rootMargin: '0px',\n                threshold: 0,\n            });\n        }\n        else {\n            // If there is no intersection obsever, then all models should be visible\n            // at all times:\n            this[$isElementInViewport] = true;\n        }\n    }\n    static get is() {\n        return 'model-viewer';\n    }\n    /** @nocollapse */\n    static get template() {\n        if (!this.hasOwnProperty($template)) {\n            this[$template] = makeTemplate(this.is);\n        }\n        return this[$template];\n    }\n    /** @export */\n    static set modelCacheSize(value) {\n        CachingGLTFLoader[$evictionPolicy].evictionThreshold = value;\n    }\n    /** @export */\n    static get modelCacheSize() {\n        return CachingGLTFLoader[$evictionPolicy].evictionThreshold;\n    }\n    /** @export */\n    static set minimumRenderScale(value) {\n        if (value > 1) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.');\n        }\n        if (value <= 0) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a minimum value of 0. This could result in single-pixel renders on some devices; consider increasing.');\n        }\n        Renderer.singleton.minScale = Math.max(0, Math.min(1, value));\n    }\n    /** @export */\n    static get minimumRenderScale() {\n        return Renderer.singleton.minScale;\n    }\n    /** @export */\n    get loaded() {\n        return this[$getLoaded]();\n    }\n    get [(_a$a = $isElementInViewport, _b$8 = $loaded, _c$2 = $loadedTime, _d$2 = $clearModelTimeout, _e$1 = $fallbackResizeHandler, _f$1 = $announceModelVisibility, _g$1 = $resizeObserver, _h$1 = $intersectionObserver, _j$1 = $progressTracker, _k$1 = $contextLostHandler, $renderer)]() {\n        return Renderer.singleton;\n    }\n    /** @export */\n    get modelIsVisible() {\n        return this[$getModelIsVisible]();\n    }\n    connectedCallback() {\n        super.connectedCallback && super.connectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].observe(this);\n        }\n        else {\n            self.addEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].observe(this);\n        }\n        const renderer = this[$renderer];\n        renderer.addEventListener('contextlost', this[$contextLostHandler]);\n        renderer.registerScene(this[$scene]);\n        if (this[$clearModelTimeout] != null) {\n            self.clearTimeout(this[$clearModelTimeout]);\n            this[$clearModelTimeout] = null;\n            // Force an update in case the model has been evicted from our GLTF cache\n            // @see https://lit-element.polymer-project.org/guide/lifecycle#requestupdate\n            this.requestUpdate('src', null);\n        }\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback && super.disconnectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].unobserve(this);\n        }\n        else {\n            self.removeEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].unobserve(this);\n        }\n        const renderer = this[$renderer];\n        renderer.removeEventListener('contextlost', this[$contextLostHandler]);\n        renderer.unregisterScene(this[$scene]);\n        this[$clearModelTimeout] = self.setTimeout(() => {\n            this[$scene].model.clear();\n        }, CLEAR_MODEL_TIMEOUT_MS);\n    }\n    updated(changedProperties) {\n        super.updated(changedProperties);\n        // NOTE(cdata): If a property changes from values A -> B -> A in the space\n        // of a microtask, LitElement/UpdatingElement will notify of a change even\n        // though the value has effectively not changed, so we need to check to make\n        // sure that the value has actually changed before changing the loaded flag.\n        if (changedProperties.has('src') &&\n            (this.src == null || this.src !== this[$scene].model.url)) {\n            this[$loaded] = false;\n            this[$loadedTime] = 0;\n            this[$updateSource]();\n        }\n        if (changedProperties.has('alt')) {\n            const ariaLabel = this.alt == null ? this[$defaultAriaLabel] : this.alt;\n            this[$userInputElement].setAttribute('aria-label', ariaLabel);\n        }\n    }\n    /** @export */\n    toDataURL(type, encoderOptions) {\n        return this[$renderer]\n            .displayCanvas(this[$scene])\n            .toDataURL(type, encoderOptions);\n    }\n    /** @export */\n    async toBlob(options) {\n        const mimeType = options ? options.mimeType : undefined;\n        const qualityArgument = options ? options.qualityArgument : undefined;\n        const idealAspect = options ? options.idealAspect : undefined;\n        const { width, height, model, aspect } = this[$scene];\n        const { dpr, scaleFactor } = this[$renderer];\n        let outputWidth = width * scaleFactor * dpr;\n        let outputHeight = height * scaleFactor * dpr;\n        let offsetX = 0;\n        let offsetY = 0;\n        if (idealAspect === true) {\n            if (model.fieldOfViewAspect > aspect) {\n                const oldHeight = outputHeight;\n                outputHeight = Math.round(outputWidth / model.fieldOfViewAspect);\n                offsetY = (oldHeight - outputHeight) / 2;\n            }\n            else {\n                const oldWidth = outputWidth;\n                outputWidth = Math.round(outputHeight * model.fieldOfViewAspect);\n                offsetX = (oldWidth - outputWidth) / 2;\n            }\n        }\n        blobCanvas.width = outputWidth;\n        blobCanvas.height = outputHeight;\n        try {\n            return new Promise(async (resolve, reject) => {\n                if (blobContext == null) {\n                    blobContext = blobCanvas.getContext('2d');\n                }\n                blobContext.drawImage(this[$renderer].displayCanvas(this[$scene]), offsetX, offsetY, outputWidth, outputHeight, 0, 0, outputWidth, outputHeight);\n                if (blobCanvas.msToBlob) {\n                    // NOTE: msToBlob only returns image/png\n                    // so ensure mimeType is not specified (defaults to image/png)\n                    // or is image/png, otherwise fallback to using toDataURL on IE.\n                    if (!mimeType || mimeType === 'image/png') {\n                        return resolve(blobCanvas.msToBlob());\n                    }\n                }\n                if (!blobCanvas.toBlob) {\n                    return resolve(await dataUrlToBlob(blobCanvas.toDataURL(mimeType, qualityArgument)));\n                }\n                blobCanvas.toBlob((blob) => {\n                    if (!blob) {\n                        return reject(new Error('Unable to retrieve canvas blob'));\n                    }\n                    resolve(blob);\n                }, mimeType, qualityArgument);\n            });\n        }\n        finally {\n            this[$updateSize]({ width, height });\n        }\n    }\n    get [$ariaLabel]() {\n        return (this.alt == null || this.alt === 'null') ? this[$defaultAriaLabel] :\n            this.alt;\n    }\n    // NOTE(cdata): Although this may seem extremely redundant, it is required in\n    // order to support overloading when TypeScript is compiled to ES5\n    // @see https://github.com/Polymer/lit-element/pull/745\n    // @see https://github.com/microsoft/TypeScript/issues/338\n    [$getLoaded]() {\n        return this[$loaded];\n    }\n    // @see [$getLoaded]\n    [$getModelIsVisible]() {\n        return this.loaded && this[$isElementInViewport];\n    }\n    [$hasTransitioned]() {\n        return this.modelIsVisible;\n    }\n    [$shouldAttemptPreload]() {\n        return !!this.src && this[$isElementInViewport];\n    }\n    [$sceneIsReady]() {\n        return this[$loaded];\n    }\n    /**\n     * Called on initialization and when the resize observer fires.\n     */\n    [$updateSize]({ width, height }) {\n        this[$container].style.width = `${width}px`;\n        this[$container].style.height = `${height}px`;\n        this[$onResize]({ width: parseFloat(width), height: parseFloat(height) });\n    }\n    [$tick$1](_time, _delta) {\n    }\n    [$markLoaded]() {\n        if (this[$loaded]) {\n            return;\n        }\n        this[$loaded] = true;\n        this[$loadedTime] = performance.now();\n    }\n    [$needsRender]() {\n        this[$scene].isDirty = true;\n    }\n    [$onModelLoad]() {\n    }\n    [$onResize](e) {\n        this[$scene].setSize(e.width, e.height);\n    }\n    [$onContextLost](event) {\n        this.dispatchEvent(new CustomEvent('error', { detail: { type: 'webglcontextlost', sourceError: event.sourceEvent } }));\n    }\n    /**\n     * Parses the element for an appropriate source URL and\n     * sets the views to use the new model based off of the `preload`\n     * attribute.\n     */\n    async [$updateSource]() {\n        if (this.loaded || !this[$shouldAttemptPreload]()) {\n            return;\n        }\n        const updateSourceProgress = this[$progressTracker].beginActivity();\n        const source = this.src;\n        try {\n            await this[$scene].setModelSource(source, (progress) => updateSourceProgress(progress * 0.8));\n            const detail = { url: source };\n            this.dispatchEvent(new CustomEvent('preload', { detail }));\n        }\n        catch (error) {\n            this.dispatchEvent(new CustomEvent('error', { detail: error }));\n        }\n        finally {\n            updateSourceProgress(0.9);\n            requestAnimationFrame(() => {\n                updateSourceProgress(1.0);\n            });\n        }\n    }\n}\n__decorate([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"alt\", void 0);\n__decorate([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"src\", void 0);\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst MILLISECONDS_PER_SECOND = 1000.0;\nconst $changeAnimation = Symbol('changeAnimation');\nconst $paused = Symbol('paused');\nconst AnimationMixin = (ModelViewerElement) => {\n    var _a;\n    class AnimationModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoplay = false;\n            this.animationName = undefined;\n            this.animationCrossfadeDuration = 300;\n            this[_a] = true;\n        }\n        /**\n         * Returns an array\n         */\n        get availableAnimations() {\n            if (this.loaded) {\n                return this[$scene].model.animationNames;\n            }\n            return [];\n        }\n        get paused() {\n            return this[$paused];\n        }\n        get currentTime() {\n            return this[$scene].model.animationTime;\n        }\n        set currentTime(value) {\n            this[$scene].model.animationTime = value;\n            this[$renderer].threeRenderer.shadowMap.needsUpdate = true;\n            this[$needsRender]();\n        }\n        pause() {\n            if (this[$paused]) {\n                return;\n            }\n            this[$paused] = true;\n            this[$renderer].threeRenderer.shadowMap.autoUpdate = false;\n            this.dispatchEvent(new CustomEvent('pause'));\n        }\n        play() {\n            if (this[$paused] && this.availableAnimations.length > 0) {\n                this[$paused] = false;\n                this[$renderer].threeRenderer.shadowMap.autoUpdate = true;\n                if (!this[$scene].model.hasActiveAnimation) {\n                    this[$changeAnimation]();\n                }\n                this.dispatchEvent(new CustomEvent('play'));\n            }\n        }\n        [(_a = $paused, $onModelLoad)]() {\n            this[$paused] = true;\n            if (this.autoplay) {\n                this[$changeAnimation]();\n                this.play();\n            }\n        }\n        [$tick$1](_time, delta) {\n            super[$tick$1](_time, delta);\n            if (this[$paused] || !this[$hasTransitioned]()) {\n                return;\n            }\n            const { model } = this[$scene];\n            model.updateAnimation(delta / MILLISECONDS_PER_SECOND);\n            this[$needsRender]();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoplay') && this.autoplay) {\n                this.play();\n            }\n            if (changedProperties.has('animationName')) {\n                this[$changeAnimation]();\n            }\n        }\n        async [$updateSource]() {\n            // If we are loading a new model, we need to stop the animation of\n            // the current one (if any is playing). Otherwise, we might lose\n            // the reference to the scene root and running actions start to\n            // throw exceptions and/or behave in unexpected ways:\n            this[$scene].model.stopAnimation();\n            return super[$updateSource]();\n        }\n        [$changeAnimation]() {\n            const { model } = this[$scene];\n            model.playAnimation(this.animationName, this.animationCrossfadeDuration / MILLISECONDS_PER_SECOND);\n            // If we are currently paused, we need to force a render so that\n            // the model updates to the first frame of the new animation\n            if (this[$paused]) {\n                model.updateAnimation(0);\n                this[$needsRender]();\n            }\n        }\n    }\n    __decorate$1([\n        property({ type: Boolean })\n    ], AnimationModelViewerElement.prototype, \"autoplay\", void 0);\n    __decorate$1([\n        property({ type: String, attribute: 'animation-name' })\n    ], AnimationModelViewerElement.prototype, \"animationName\", void 0);\n    __decorate$1([\n        property({ type: Number, attribute: 'animation-crossfade-duration' })\n    ], AnimationModelViewerElement.prototype, \"animationCrossfadeDuration\", void 0);\n    return AnimationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $annotationRenderer = Symbol('annotationRenderer');\nconst $hotspotMap = Symbol('hotspotMap');\nconst $mutationCallback = Symbol('mutationCallback');\nconst $observer = Symbol('observer');\nconst $addHotspot = Symbol('addHotspot');\nconst $removeHotspot = Symbol('removeHotspot');\n// Used internally by positionAndNormalFromPoint()\nconst pixelPosition = new Vector2();\nconst worldToModel = new Matrix4();\nconst worldToModelNormal = new Matrix3();\n/**\n * AnnotationMixin implements a declarative API to add hotspots and annotations.\n * Child elements of the <model-viewer> element that have a slot name that\n * begins with \"hotspot\" and data-position and data-normal attributes in\n * the format of the camera-target attribute will be added to the scene and\n * track the specified model coordinates.\n */\nconst AnnotationMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d;\n    class AnnotationModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            this[_a] = new CSS2DRenderer();\n            this[_b] = new Map();\n            this[_c] = (mutations) => {\n                mutations.forEach((mutation) => {\n                    // NOTE: Be wary that in ShadyDOM cases, the MutationRecord\n                    // only has addedNodes and removedNodes (and no other details).\n                    if (!(mutation instanceof MutationRecord) ||\n                        mutation.type === 'childList') {\n                        mutation.addedNodes.forEach((node) => {\n                            this[$addHotspot](node);\n                        });\n                        mutation.removedNodes.forEach((node) => {\n                            this[$removeHotspot](node);\n                        });\n                        this[$needsRender]();\n                    }\n                });\n            };\n            this[_d] = new MutationObserver(this[$mutationCallback]);\n            const shadowRoot = this.shadowRoot;\n            const { domElement } = this[$annotationRenderer];\n            domElement.classList.add('annotation-container');\n            shadowRoot.querySelector('.container').appendChild(domElement);\n            domElement.appendChild(shadowRoot.querySelector('.default'));\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            for (let i = 0; i < this.children.length; ++i) {\n                this[$addHotspot](this.children[i]);\n            }\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].observe(this, { childList: true });\n            }\n            else {\n                this[$observer] =\n                    ShadyDOM.observeChildren(this, this[$mutationCallback]);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].disconnect();\n            }\n            else {\n                ShadyDOM.unobserveChildren(this[$observer]);\n            }\n        }\n        /**\n         * Since the data-position and data-normal attributes are not observed, use\n         * this method to move a hotspot. Keep in mind that all hotspots with the\n         * same slot name use a single location and the first definition takes\n         * precedence, until updated with this method.\n         */\n        updateHotspot(config) {\n            const hotspot = this[$hotspotMap].get(config.name);\n            if (hotspot == null) {\n                return;\n            }\n            hotspot.updatePosition(config.position);\n            hotspot.updateNormal(config.normal);\n        }\n        /**\n         * This method returns the model position and normal of the point on the\n         * mesh corresponding to the input pixel coordinates given relative to the\n         * model-viewer element. The position and normal are returned as strings in\n         * the format suitable for putting in a hotspot's data-position and\n         * data-normal attributes. If the mesh is not hit, the result is null.\n         */\n        positionAndNormalFromPoint(pixelX, pixelY) {\n            const scene = this[$scene];\n            const { width, height, model } = scene;\n            pixelPosition.set(pixelX / width, pixelY / height)\n                .multiplyScalar(2)\n                .subScalar(1);\n            pixelPosition.y *= -1;\n            const hit = scene.positionAndNormalFromPoint(pixelPosition);\n            if (hit == null) {\n                return null;\n            }\n            worldToModel.getInverse(model.matrixWorld);\n            const position = toVector3D(hit.position.applyMatrix4(worldToModel));\n            worldToModelNormal.getNormalMatrix(worldToModel);\n            const normal = toVector3D(hit.normal.applyNormalMatrix(worldToModelNormal));\n            return { position: position, normal: normal };\n        }\n        [(_a = $annotationRenderer, _b = $hotspotMap, _c = $mutationCallback, _d = $observer, $tick$1)](time, delta) {\n            super[$tick$1](time, delta);\n            const scene = this[$scene];\n            const camera = scene.getCamera();\n            if (scene.isDirty) {\n                scene.model.updateHotspots(camera.position);\n                this[$annotationRenderer].render(scene, camera);\n            }\n        }\n        [$onResize](e) {\n            super[$onResize](e);\n            this[$annotationRenderer].setSize(e.width, e.height);\n        }\n        [$addHotspot](node) {\n            if (!(node instanceof HTMLElement &&\n                node.slot.indexOf('hotspot') === 0)) {\n                return;\n            }\n            let hotspot = this[$hotspotMap].get(node.slot);\n            if (hotspot != null) {\n                hotspot.increment();\n            }\n            else {\n                hotspot = new Hotspot({\n                    name: node.slot,\n                    position: node.dataset.position,\n                    normal: node.dataset.normal,\n                });\n                this[$hotspotMap].set(node.slot, hotspot);\n                this[$scene].model.addHotspot(hotspot);\n                // This happens automatically in render(), but we do it early so that\n                // the slots appear in the shadow DOM and the elements get attached,\n                // allowing us to dispatch events on them.\n                this[$annotationRenderer].domElement.appendChild(hotspot.element);\n            }\n            this[$scene].isDirty = true;\n        }\n        [$removeHotspot](node) {\n            if (!(node instanceof HTMLElement)) {\n                return;\n            }\n            const hotspot = this[$hotspotMap].get(node.slot);\n            if (!hotspot) {\n                return;\n            }\n            if (hotspot.decrement()) {\n                this[$scene].model.removeHotspot(hotspot);\n                this[$hotspotMap].delete(node.slot);\n            }\n            this[$scene].isDirty = true;\n        }\n    }\n    return AnnotationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * For our purposes, an enumeration is a fixed set of CSS-expression-compatible\n * names. When serialized, a selected subset of the members may be specified as\n * whitespace-separated strings. An enumeration deserializer is a function that\n * parses a serialized subset of an enumeration and returns any members that are\n * found as a Set.\n *\n * The following example will produce a deserializer for the days of the\n * week:\n *\n * const deserializeDaysOfTheWeek = enumerationDeserializer([\n *   'Monday',\n *   'Tuesday',\n *   'Wednesday',\n *   'Thursday',\n *   'Friday',\n *   'Saturday',\n *   'Sunday'\n * ]);\n */\nconst enumerationDeserializer = (allowedNames) => (valueString) => {\n    try {\n        const expressions = parseExpressions(valueString);\n        const names = (expressions.length ? expressions[0].terms : [])\n            .filter((valueNode) => valueNode && valueNode.type === 'ident')\n            .map(valueNode => valueNode.value)\n            .filter(name => allowedNames.indexOf(name) > -1);\n        // NOTE(cdata): IE11 does not support constructing a Set directly from\n        // an iterable, so we need to manually add all the items:\n        const result = new Set();\n        for (const name of names) {\n            result.add(name);\n        }\n        return result;\n    }\n    catch (_error) {\n    }\n    return new Set();\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nlet isWebXRBlocked = false;\nlet isSceneViewerBlocked = false;\nconst noArViewerSigil = '#model-viewer-no-ar-fallback';\nconst deserializeQuickLookBrowsers = enumerationDeserializer(['safari', 'chrome']);\nconst deserializeARModes = enumerationDeserializer(['quick-look', 'scene-viewer', 'webxr', 'none']);\nconst DEFAULT_AR_MODES = 'webxr scene-viewer quick-look';\nconst ARMode = {\n    QUICK_LOOK: 'quick-look',\n    SCENE_VIEWER: 'scene-viewer',\n    WEBXR: 'webxr',\n    NONE: 'none'\n};\nconst $arButtonContainer = Symbol('arButtonContainer');\nconst $enterARWithWebXR = Symbol('enterARWithWebXR');\nconst $openSceneViewer = Symbol('openSceneViewer');\nconst $openIOSARQuickLook = Symbol('openIOSARQuickLook');\nconst $canActivateAR = Symbol('canActivateAR');\nconst $arMode = Symbol('arMode');\nconst $arModes = Symbol('arModes');\nconst $canLaunchQuickLook = Symbol('canLaunchQuickLook');\nconst $quickLookBrowsers = Symbol('quickLookBrowsers');\nconst $arAnchor = Symbol('arAnchor');\nconst $onARButtonContainerClick = Symbol('onARButtonContainerClick');\nconst $onARStatus = Symbol('onARStatus');\nconst $onARTap = Symbol('onARTap');\nconst $selectARMode = Symbol('selectARMode');\nconst ARMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n    class ARModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.ar = false;\n            this.arScale = 'auto';\n            this.arModes = DEFAULT_AR_MODES;\n            this.iosSrc = null;\n            this.quickLookBrowsers = 'safari';\n            this[_a] = false;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_b] = this.shadowRoot.querySelector('.ar-button');\n            this[_c] = document.createElement('a');\n            this[_d] = new Set();\n            this[_e] = ARMode.NONE;\n            this[_f] = new Set();\n            this[_g] = (event) => {\n                event.preventDefault();\n                this.activateAR();\n            };\n            this[_h] = ({ status }) => {\n                if (status === ARStatus.NOT_PRESENTING ||\n                    this[$renderer].arRenderer.presentedScene === this[$scene]) {\n                    this.setAttribute('ar-status', status);\n                    this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n                }\n            };\n            this[_j] = (event) => {\n                if (event.data == '_apple_ar_quicklook_button_tapped') {\n                    this.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n                }\n            };\n        }\n        get canActivateAR() {\n            return this[$arMode] !== ARMode.NONE;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].arRenderer.addEventListener('status', this[$onARStatus]);\n            this.setAttribute('ar-status', ARStatus.NOT_PRESENTING);\n            this[$arAnchor].addEventListener('message', this[$onARTap]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].arRenderer.removeEventListener('status', this[$onARStatus]);\n            this[$arAnchor].removeEventListener('message', this[$onARTap]);\n        }\n        async update(changedProperties) {\n            super.update(changedProperties);\n            if (changedProperties.has('quickLookBrowsers')) {\n                this[$quickLookBrowsers] =\n                    deserializeQuickLookBrowsers(this.quickLookBrowsers);\n            }\n            if (!changedProperties.has('ar') && !changedProperties.has('arModes') &&\n                !changedProperties.has('iosSrc')) {\n                return;\n            }\n            if (changedProperties.has('arModes')) {\n                this[$arModes] = deserializeARModes(this.arModes);\n            }\n            if (changedProperties.has('arScale')) {\n                this[$scene].canScale = this.arScale !== 'fixed';\n            }\n            this[$selectARMode]();\n        }\n        /**\n         * Activates AR. Note that for any mode that is not WebXR-based, this\n         * method most likely has to be called synchronous from a user\n         * interaction handler. Otherwise, attempts to activate modes that\n         * require user interaction will most likely be ignored.\n         */\n        async activateAR() {\n            switch (this[$arMode]) {\n                case ARMode.QUICK_LOOK:\n                    this[$openIOSARQuickLook]();\n                    break;\n                case ARMode.WEBXR:\n                    await this[$enterARWithWebXR]();\n                    break;\n                case ARMode.SCENE_VIEWER:\n                    this[$openSceneViewer]();\n                    break;\n                default:\n                    console.warn('No AR Mode can be activated. This is probably due to missing \\\nconfiguration or device capabilities');\n                    break;\n            }\n        }\n        async [(_a = $canActivateAR, _b = $arButtonContainer, _c = $arAnchor, _d = $arModes, _e = $arMode, _f = $quickLookBrowsers, _g = $onARButtonContainerClick, _h = $onARStatus, _j = $onARTap, $selectARMode)]() {\n            this[$arMode] = ARMode.NONE;\n            if (this.ar) {\n                const arModes = [];\n                this[$arModes].forEach((value) => {\n                    arModes.push(value);\n                });\n                for (const value of arModes) {\n                    if (value === 'webxr' && IS_WEBXR_AR_CANDIDATE && !isWebXRBlocked &&\n                        await this[$renderer].arRenderer.supportsPresentation()) {\n                        this[$arMode] = ARMode.WEBXR;\n                        break;\n                    }\n                    else if (value === 'scene-viewer' && IS_ANDROID && !isSceneViewerBlocked) {\n                        this[$arMode] = ARMode.SCENE_VIEWER;\n                        break;\n                    }\n                    else if (value === 'quick-look' && !!this.iosSrc &&\n                        this[$canLaunchQuickLook] && IS_AR_QUICKLOOK_CANDIDATE) {\n                        this[$arMode] = ARMode.QUICK_LOOK;\n                        break;\n                    }\n                }\n            }\n            if (this.canActivateAR) {\n                this[$arButtonContainer].classList.add('enabled');\n                this[$arButtonContainer].addEventListener('click', this[$onARButtonContainerClick]);\n            }\n            else if (this[$arButtonContainer].classList.contains('enabled')) {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                this[$arButtonContainer].classList.remove('enabled');\n                // If AR went from working to not, notify the element.\n                const status = ARStatus.FAILED;\n                this.setAttribute('ar-status', status);\n                this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n            }\n        }\n        get [$canLaunchQuickLook]() {\n            if (IS_IOS_CHROME) {\n                return this[$quickLookBrowsers].has('chrome');\n            }\n            else if (IS_IOS_SAFARI) {\n                return this[$quickLookBrowsers].has('safari');\n            }\n            return false;\n        }\n        async [$enterARWithWebXR]() {\n            console.log('Attempting to present in AR...');\n            try {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                await this[$renderer].arRenderer.present(this[$scene]);\n            }\n            catch (error) {\n                console.warn('Error while trying to present to AR');\n                console.error(error);\n                await this[$renderer].arRenderer.stopPresenting();\n                isWebXRBlocked = true;\n                await this[$selectARMode]();\n                this.activateAR();\n            }\n            finally {\n                this[$selectARMode]();\n            }\n        }\n        /**\n         * Takes a URL and a title string, and attempts to launch Scene Viewer on\n         * the current device.\n         */\n        [$openSceneViewer]() {\n            // This is necessary because the original URL might have query\n            // parameters. Since we're appending the whole URL as query parameter,\n            // ? needs to be turned into & to not lose any of them.\n            const gltfSrc = this.src.replace('?', '&');\n            const location = self.location.toString();\n            const locationUrl = new URL(location);\n            const modelUrl = new URL(gltfSrc, location);\n            locationUrl.hash = noArViewerSigil;\n            // modelUrl can contain title/link/sound etc.\n            // These are already URL-encoded, so we shouldn't do that again here.\n            let intentParams = `?file=${modelUrl.toString()}&mode=ar_only`;\n            if (!gltfSrc.includes('&link=')) {\n                intentParams += `&link=${location}`;\n            }\n            if (!gltfSrc.includes('&title=')) {\n                intentParams += `&title=${encodeURIComponent(this.alt || '')}`;\n            }\n            if (this.arScale === 'fixed') {\n                intentParams += `&resizable=false`;\n            }\n            const intent = `intent://arvr.google.com/scene-viewer/1.0${intentParams}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(locationUrl.toString())};end;`;\n            const undoHashChange = () => {\n                if (self.location.hash === noArViewerSigil) {\n                    isSceneViewerBlocked = true;\n                    // The new history will be the current URL with a new hash.\n                    // Go back one step so that we reset to the expected URL.\n                    // NOTE(cdata): this should not invoke any browser-level navigation\n                    // because hash-only changes modify the URL in-place without\n                    // navigating:\n                    self.history.back();\n                    this[$selectARMode]();\n                    // Would be nice to activateAR() here, but webXR fails due to not\n                    // seeing a user activation.\n                }\n            };\n            self.addEventListener('hashchange', undoHashChange, { once: true });\n            this[$arAnchor].setAttribute('href', intent);\n            this[$arAnchor].click();\n        }\n        /**\n         * Takes a URL to a USDZ file and sets the appropriate fields so that Safari\n         * iOS can intent to their AR Quick Look.\n         */\n        [$openIOSARQuickLook]() {\n            const modelUrl = new URL(this.iosSrc, self.location.toString());\n            if (this.arScale === 'fixed') {\n                modelUrl.hash = 'allowsContentScaling=0';\n            }\n            const anchor = this[$arAnchor];\n            anchor.setAttribute('rel', 'ar');\n            const img = document.createElement('img');\n            anchor.appendChild(img);\n            anchor.setAttribute('href', modelUrl.toString());\n            anchor.click();\n            anchor.removeChild(img);\n        }\n    }\n    __decorate$2([\n        property({ type: Boolean, attribute: 'ar' })\n    ], ARModelViewerElement.prototype, \"ar\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ar-scale' })\n    ], ARModelViewerElement.prototype, \"arScale\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ar-modes' })\n    ], ARModelViewerElement.prototype, \"arModes\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ios-src' })\n    ], ARModelViewerElement.prototype, \"iosSrc\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'quick-look-browsers' })\n    ], ARModelViewerElement.prototype, \"quickLookBrowsers\", void 0);\n    return ARModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$b, _b$9, _c$3;\nconst $evaluate = Symbol('evaluate');\nconst $lastValue = Symbol('lastValue');\n/**\n * An Evaluator is used to derive a computed style from part (or all) of a CSS\n * expression AST. This construct is particularly useful for complex ASTs\n * containing function calls such as calc, var and env. Such styles could be\n * costly to re-evaluate on every frame (and in some cases we may try to do\n * that). The Evaluator construct allows us to mark sub-trees of the AST as\n * constant, so that only the dynamic parts are re-evaluated. It also separates\n * one-time AST preparation work from work that necessarily has to happen upon\n * each evaluation.\n */\nclass Evaluator {\n    constructor() {\n        this[_a$b] = null;\n    }\n    /**\n     * An Evaluatable is a NumberNode or an Evaluator that evaluates a NumberNode\n     * as the result of invoking its evaluate method. This is mainly used to\n     * ensure that CSS function nodes are cast to the corresponding Evaluators\n     * that will resolve the result of the function, but is also used to ensure\n     * that a percentage nested at arbitrary depth in the expression will always\n     * be evaluated against the correct basis.\n     */\n    static evaluatableFor(node, basis = ZERO) {\n        if (node instanceof Evaluator) {\n            return node;\n        }\n        if (node.type === 'number') {\n            if (node.unit === '%') {\n                return new PercentageEvaluator(node, basis);\n            }\n            return node;\n        }\n        switch (node.name.value) {\n            case 'calc':\n                return new CalcEvaluator(node, basis);\n            case 'env':\n                return new EnvEvaluator(node);\n        }\n        return ZERO;\n    }\n    /**\n     * If the input is an Evaluator, returns the result of evaluating it.\n     * Otherwise, returns the input.\n     *\n     * This is a helper to aide in resolving a NumberNode without conditionally\n     * checking if the Evaluatable is an Evaluator everywhere.\n     */\n    static evaluate(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.evaluate();\n        }\n        return evaluatable;\n    }\n    /**\n     * If the input is an Evaluator, returns the value of its isConstant property.\n     * Returns true for all other input values.\n     */\n    static isConstant(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.isConstant;\n        }\n        return true;\n    }\n    /**\n     * This method applies a set of structured intrinsic metadata to an evaluated\n     * result from a parsed CSS-like string of expressions. Intrinsics provide\n     * sufficient metadata (e.g., basis values, analogs for keywords) such that\n     * omitted values in the input string can be backfilled, and keywords can be\n     * converted to concrete numbers.\n     *\n     * The result of applying intrinsics is a tuple of NumberNode values whose\n     * units match the units used by the basis of the intrinsics.\n     *\n     * The following is a high-level description of how intrinsics are applied:\n     *\n     *  1. Determine the value of 'auto' for the current term\n     *  2. If there is no corresponding input value for this term, substitute the\n     *     'auto' value.\n     *  3. If the term is an IdentNode, treat it as a keyword and perform the\n     *     appropriate substitution.\n     *  4. If the term is still null, fallback to the 'auto' value\n     *  5. If the term is a percentage, apply it to the basis and return that\n     *     value\n     *  6. Normalize the unit of the term\n     *  7. If the term's unit does not match the basis unit, return the basis\n     *     value\n     *  8. Return the term as is\n     */\n    static applyIntrinsics(evaluated, intrinsics) {\n        const { basis, keywords } = intrinsics;\n        const { auto } = keywords;\n        return basis.map((basisNode, index) => {\n            // Use an auto value if we have it, otherwise the auto value is the basis:\n            const autoSubstituteNode = auto[index] == null ? basisNode : auto[index];\n            // If the evaluated nodes do not have a node at the current\n            // index, fallback to the \"auto\" substitute right away:\n            let evaluatedNode = evaluated[index] ? evaluated[index] : autoSubstituteNode;\n            // Any ident node is considered a keyword:\n            if (evaluatedNode.type === 'ident') {\n                const keyword = evaluatedNode.value;\n                // Substitute any keywords for concrete values first:\n                if (keyword in keywords) {\n                    evaluatedNode = keywords[keyword][index];\n                }\n            }\n            // If we don't have a NumberNode at this point, fall back to whatever\n            // is specified for auto:\n            if (evaluatedNode == null || evaluatedNode.type === 'ident') {\n                evaluatedNode = autoSubstituteNode;\n            }\n            // For percentages, we always apply the percentage to the basis value:\n            if (evaluatedNode.unit === '%') {\n                return numberNode(evaluatedNode.number / 100 * basisNode.number, basisNode.unit);\n            }\n            // Otherwise, normalize whatever we have:\n            evaluatedNode = normalizeUnit(evaluatedNode, basisNode);\n            // If the normalized units do not match, return the basis as a fallback:\n            if (evaluatedNode.unit !== basisNode.unit) {\n                return basisNode;\n            }\n            // Finally, return the evaluated node with intrinsics applied:\n            return evaluatedNode;\n        });\n    }\n    /**\n     * If true, the Evaluator will only evaluate its AST one time. If false, the\n     * Evaluator will re-evaluate the AST each time that the public evaluate\n     * method is invoked.\n     */\n    get isConstant() {\n        return false;\n    }\n    /**\n     * Evaluate the Evaluator and return the result. If the Evaluator is constant,\n     * the corresponding AST will only be evaluated once, and the result of\n     * evaluating it the first time will be returned on all subsequent\n     * evaluations.\n     */\n    evaluate() {\n        if (!this.isConstant || this[$lastValue] == null) {\n            this[$lastValue] = this[$evaluate]();\n        }\n        return this[$lastValue];\n    }\n}\n_a$b = $lastValue;\nconst $percentage = Symbol('percentage');\nconst $basis = Symbol('basis');\n/**\n * A PercentageEvaluator scales a given basis value by a given percentage value.\n * The evaluated result is always considered to be constant.\n */\nclass PercentageEvaluator extends Evaluator {\n    constructor(percentage, basis) {\n        super();\n        this[$percentage] = percentage;\n        this[$basis] = basis;\n    }\n    get isConstant() {\n        return true;\n    }\n    [$evaluate]() {\n        return numberNode(this[$percentage].number / 100 * this[$basis].number, this[$basis].unit);\n    }\n}\nconst $identNode = Symbol('identNode');\n/**\n * Evaluator for CSS-like env() functions. Currently, only one environment\n * variable is accepted as an argument for such functions: window-scroll-y.\n *\n * The env() Evaluator is explicitly dynamic because it always refers to\n * external state that changes as the user scrolls, so it should always be\n * re-evaluated to ensure we get the most recent value.\n *\n * Some important notes about this feature include:\n *\n *  - There is no such thing as a \"window-scroll-y\" CSS environment variable in\n *    any stable browser at the time that this comment is being written.\n *  - The actual CSS env() function accepts a second argument as a fallback for\n *    the case that the specified first argument isn't set; our syntax does not\n *    support this second argument.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/env\n */\nclass EnvEvaluator extends Evaluator {\n    constructor(envFunction) {\n        super();\n        this[_b$9] = null;\n        const identNode = envFunction.arguments.length ? envFunction.arguments[0].terms[0] : null;\n        if (identNode != null && identNode.type === 'ident') {\n            this[$identNode] = identNode;\n        }\n    }\n    get isConstant() {\n        return false;\n    }\n    ;\n    [(_b$9 = $identNode, $evaluate)]() {\n        if (this[$identNode] != null) {\n            switch (this[$identNode].value) {\n                case 'window-scroll-y':\n                    const verticalScrollPosition = window.pageYOffset;\n                    const verticalScrollMax = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n                    const scrollY = verticalScrollPosition /\n                        (verticalScrollMax - window.innerHeight) ||\n                        0;\n                    return { type: 'number', number: scrollY, unit: null };\n            }\n        }\n        return ZERO;\n    }\n}\nconst IS_MULTIPLICATION_RE = /[\\*\\/]/;\nconst $evaluator = Symbol('evalutor');\n/**\n * Evaluator for CSS-like calc() functions. Our implementation of calc()\n * evaluation currently support nested function calls, an unlimited number of\n * terms, and all four algebraic operators (+, -, * and /).\n *\n * The Evaluator is marked as constant unless the calc expression contains an\n * internal env expression at any depth, in which case it will be marked as\n * dynamic.\n *\n * @see https://www.w3.org/TR/css-values-3/#calc-syntax\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass CalcEvaluator extends Evaluator {\n    constructor(calcFunction, basis = ZERO) {\n        super();\n        this[_c$3] = null;\n        if (calcFunction.arguments.length !== 1) {\n            return;\n        }\n        const terms = calcFunction.arguments[0].terms.slice();\n        const secondOrderTerms = [];\n        while (terms.length) {\n            const term = terms.shift();\n            if (secondOrderTerms.length > 0) {\n                const previousTerm = secondOrderTerms[secondOrderTerms.length - 1];\n                if (previousTerm.type === 'operator' &&\n                    IS_MULTIPLICATION_RE.test(previousTerm.value)) {\n                    const operator = secondOrderTerms.pop();\n                    const leftValue = secondOrderTerms.pop();\n                    if (leftValue == null) {\n                        return;\n                    }\n                    secondOrderTerms.push(new OperatorEvaluator(operator, Evaluator.evaluatableFor(leftValue, basis), Evaluator.evaluatableFor(term, basis)));\n                    continue;\n                }\n            }\n            secondOrderTerms.push(term.type === 'operator' ? term :\n                Evaluator.evaluatableFor(term, basis));\n        }\n        while (secondOrderTerms.length > 2) {\n            const [left, operator, right] = secondOrderTerms.splice(0, 3);\n            if (operator.type !== 'operator') {\n                return;\n            }\n            secondOrderTerms.unshift(new OperatorEvaluator(operator, Evaluator.evaluatableFor(left, basis), Evaluator.evaluatableFor(right, basis)));\n        }\n        // There should only be one combined evaluator at this point:\n        if (secondOrderTerms.length === 1) {\n            this[$evaluator] = secondOrderTerms[0];\n        }\n    }\n    get isConstant() {\n        return this[$evaluator] == null || Evaluator.isConstant(this[$evaluator]);\n    }\n    [(_c$3 = $evaluator, $evaluate)]() {\n        return this[$evaluator] != null ? Evaluator.evaluate(this[$evaluator]) :\n            ZERO;\n    }\n}\nconst $operator = Symbol('operator');\nconst $left = Symbol('left');\nconst $right = Symbol('right');\n/**\n * An Evaluator for the operators found inside CSS calc() functions.\n * The evaluator accepts an operator and left/right operands. The operands can\n * be any valid expression term typically allowed inside a CSS calc function.\n *\n * As detail of this implementation, the only supported unit types are angles\n * expressed as radians or degrees, and lengths expressed as meters, centimeters\n * or millimeters.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass OperatorEvaluator extends Evaluator {\n    constructor(operator, left, right) {\n        super();\n        this[$operator] = operator;\n        this[$left] = left;\n        this[$right] = right;\n    }\n    get isConstant() {\n        return Evaluator.isConstant(this[$left]) &&\n            Evaluator.isConstant(this[$right]);\n    }\n    [$evaluate]() {\n        const leftNode = normalizeUnit(Evaluator.evaluate(this[$left]));\n        const rightNode = normalizeUnit(Evaluator.evaluate(this[$right]));\n        const { number: leftValue, unit: leftUnit } = leftNode;\n        const { number: rightValue, unit: rightUnit } = rightNode;\n        // Disallow operations for mismatched normalized units e.g., m and rad:\n        if (rightUnit != null && leftUnit != null && rightUnit != leftUnit) {\n            return ZERO;\n        }\n        // NOTE(cdata): rules for calc type checking are defined here\n        // https://drafts.csswg.org/css-values-3/#calc-type-checking\n        // This is a simplification and may not hold up once we begin to support\n        // additional unit types:\n        const unit = leftUnit || rightUnit;\n        let value;\n        switch (this[$operator].value) {\n            case '+':\n                value = leftValue + rightValue;\n                break;\n            case '-':\n                value = leftValue - rightValue;\n                break;\n            case '/':\n                value = leftValue / rightValue;\n                break;\n            case '*':\n                value = leftValue * rightValue;\n                break;\n            default:\n                return ZERO;\n        }\n        return { type: 'number', number: value, unit };\n    }\n}\nconst $evaluatables = Symbol('evaluatables');\nconst $intrinsics = Symbol('intrinsics');\n/**\n * A VectorEvaluator evaluates a series of numeric terms that usually represent\n * a data structure such as a multi-dimensional vector or a spherical\n *\n * The form of the evaluator's result is determined by the Intrinsics that are\n * given to it when it is constructed. For example, spherical intrinsics would\n * establish two angle terms and a length term, so the result of evaluating the\n * evaluator that is configured with spherical intrinsics is a three element\n * array where the first two elements represent angles in radians and the third\n * element representing a length in meters.\n */\nclass StyleEvaluator extends Evaluator {\n    constructor(expressions, intrinsics) {\n        super();\n        this[$intrinsics] = intrinsics;\n        const firstExpression = expressions[0];\n        const terms = firstExpression != null ? firstExpression.terms : [];\n        this[$evaluatables] =\n            intrinsics.basis.map((basisNode, index) => {\n                const term = terms[index];\n                if (term == null) {\n                    return { type: 'ident', value: 'auto' };\n                }\n                if (term.type === 'ident') {\n                    return term;\n                }\n                return Evaluator.evaluatableFor(term, basisNode);\n            });\n    }\n    get isConstant() {\n        for (const evaluatable of this[$evaluatables]) {\n            if (!Evaluator.isConstant(evaluatable)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    [$evaluate]() {\n        const evaluated = this[$evaluatables].map(evaluatable => Evaluator.evaluate(evaluatable));\n        return Evaluator.applyIntrinsics(evaluated, this[$intrinsics])\n            .map(numberNode => numberNode.number);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$c, _b$a, _c$4, _d$3;\nconst $instances = Symbol('instances');\nconst $activateListener = Symbol('activateListener');\nconst $deactivateListener = Symbol('deactivateListener');\nconst $notifyInstances = Symbol('notifyInstances');\nconst $notify = Symbol('notify');\nconst $scrollCallback = Symbol('callback');\n/**\n * This internal helper is intended to work as a reference-counting manager of\n * scroll event listeners. Only one scroll listener is ever registered for all\n * instances of the class, and when the last ScrollObserver \"disconnects\", that\n * event listener is removed. This spares us from thrashing\n * the {add,remove}EventListener API (the binding cost of these methods has been\n * known to show up in performance anlyses) as well as potential memory leaks.\n */\nclass ScrollObserver {\n    constructor(callback) {\n        this[$scrollCallback] = callback;\n    }\n    static [$notifyInstances]() {\n        for (const instance of ScrollObserver[$instances]) {\n            instance[$notify]();\n        }\n    }\n    static [(_a$c = $instances, $activateListener)]() {\n        window.addEventListener('scroll', this[$notifyInstances], { passive: true });\n    }\n    static [$deactivateListener]() {\n        window.removeEventListener('scroll', this[$notifyInstances]);\n    }\n    /**\n     * Listen for scroll events. The configured callback (passed to the\n     * constructor) will be invoked for subsequent global scroll events.\n     */\n    observe() {\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$activateListener]();\n        }\n        ScrollObserver[$instances].add(this);\n    }\n    /**\n     * Stop listening for scroll events.\n     */\n    disconnect() {\n        ScrollObserver[$instances].delete(this);\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$deactivateListener]();\n        }\n    }\n    [$notify]() {\n        this[$scrollCallback]();\n    }\n    ;\n}\nScrollObserver[_a$c] = new Set();\nconst $computeStyleCallback = Symbol('computeStyleCallback');\nconst $astWalker = Symbol('astWalker');\nconst $dependencies = Symbol('dependencies');\nconst $scrollHandler = Symbol('scrollHandler');\nconst $onScroll = Symbol('onScroll');\n/**\n * The StyleEffector is configured with a callback that will be invoked at the\n * optimal time that some array of CSS expression ASTs ought to be evaluated.\n *\n * For example, our CSS-like expression syntax supports usage of the env()\n * function to incorporate the current top-level scroll position into a CSS\n * expression: env(window-scroll-y).\n *\n * This \"environment variable\" will change dynamically as the user scrolls the\n * page. If an AST contains such a usage of env(), we would have to evaluate the\n * AST on every frame in order to be sure that the computed style stays up to\n * date.\n *\n * The StyleEffector spares us from evaluating the expressions on every frame by\n * correlating specific parts of an AST with observers of the external effects\n * that they refer to (if any). So, if the AST contains env(window-scroll-y),\n * the StyleEffector manages the lifetime of a global scroll event listener and\n * notifies the user at the optimal time to evaluate the computed style.\n */\nclass StyleEffector {\n    constructor(callback) {\n        this[_b$a] = {};\n        this[_c$4] = new ASTWalker(['function']);\n        this[_d$3] = () => this[$onScroll]();\n        this[$computeStyleCallback] = callback;\n    }\n    /**\n     * Sets the expressions that govern when the StyleEffector callback will be\n     * invoked.\n     */\n    observeEffectsFor(ast) {\n        const newDependencies = {};\n        const oldDependencies = this[$dependencies];\n        this[$astWalker].walk(ast, functionNode => {\n            const { name } = functionNode;\n            const firstArgument = functionNode.arguments[0];\n            const firstTerm = firstArgument.terms[0];\n            if (name.value !== 'env' || firstTerm == null ||\n                firstTerm.type !== 'ident') {\n                return;\n            }\n            switch (firstTerm.value) {\n                case 'window-scroll-y':\n                    if (newDependencies['window-scroll'] == null) {\n                        const observer = 'window-scroll' in oldDependencies ?\n                            oldDependencies['window-scroll'] :\n                            new ScrollObserver(this[$scrollHandler]);\n                        observer.observe();\n                        delete oldDependencies['window-scroll'];\n                        newDependencies['window-scroll'] = observer;\n                    }\n                    break;\n            }\n        });\n        for (const environmentState in oldDependencies) {\n            const observer = oldDependencies[environmentState];\n            observer.disconnect();\n        }\n        this[$dependencies] = newDependencies;\n    }\n    /**\n     * Disposes of the StyleEffector by disconnecting all observers of external\n     * effects.\n     */\n    dispose() {\n        for (const environmentState in this[$dependencies]) {\n            const observer = this[$dependencies][environmentState];\n            observer.disconnect();\n        }\n    }\n    [(_b$a = $dependencies, _c$4 = $astWalker, _d$3 = $scrollHandler, $onScroll)]() {\n        this[$computeStyleCallback]({ relatedState: 'window-scroll' });\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The @style decorator is responsible for coordinating the conversion of a\n * CSS-like string property value into numbers that can be applied to\n * lower-level constructs. It also can optionally manage the lifecycle of a\n * StyleEffector which allows automatic updates for styles that use env() or\n * var() functions.\n *\n * The decorator is configured with Intrinsics and the property key for a\n * method that handles updates. The named update handler is invoked with the\n * result of parsing and evaluating the raw property string value. The format of\n * the evaluated result is derived from the basis of the configured Intrinsics,\n * and is always an array of numbers of fixed length.\n *\n * NOTE: This decorator depends on the property updating mechanism defined by\n * UpdatingElement as exported by the lit-element module. That means it *must*\n * be used in conjunction with the @property decorator, or equivalent\n * JavaScript.\n *\n * Supported configurations are:\n *\n *  - `intrinsics`: An Intrinsics struct that describes how to interpret a\n * serialized style attribute. For more detail on intrinsics see\n * ./styles/evaluators.ts\n *  - `updateHandler`: A string or Symbol that is the key of a method to be\n * invoked with the result of parsing and evaluating a serialized style string.\n *  - `observeEffects`: Optional, if set to true then styles that use env() will\n * cause their update handlers to be invoked every time the corresponding\n * environment variable changes (even if the style attribute itself remains\n * static).\n */\nconst style = (config) => {\n    const observeEffects = config.observeEffects || false;\n    const getIntrinsics = config.intrinsics instanceof Function ?\n        config.intrinsics :\n        (() => config.intrinsics);\n    return (proto, propertyName) => {\n        const originalUpdated = proto.updated;\n        const originalConnectedCallback = proto.connectedCallback;\n        const originalDisconnectedCallback = proto.disconnectedCallback;\n        const $styleEffector = Symbol(`${propertyName}StyleEffector`);\n        const $styleEvaluator = Symbol(`${propertyName}StyleEvaluator`);\n        const $updateEvaluator = Symbol(`${propertyName}UpdateEvaluator`);\n        const $evaluateAndSync = Symbol(`${propertyName}EvaluateAndSync`);\n        Object.defineProperties(proto, {\n            [$styleEffector]: { value: null, writable: true },\n            [$styleEvaluator]: { value: null, writable: true },\n            [$updateEvaluator]: {\n                value: function () {\n                    const ast = parseExpressions(this[propertyName]);\n                    this[$styleEvaluator] =\n                        new StyleEvaluator(ast, getIntrinsics(this));\n                    if (this[$styleEffector] == null && observeEffects) {\n                        this[$styleEffector] =\n                            new StyleEffector(() => this[$evaluateAndSync]());\n                    }\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].observeEffectsFor(ast);\n                    }\n                }\n            },\n            [$evaluateAndSync]: {\n                value: function () {\n                    if (this[$styleEvaluator] == null) {\n                        return;\n                    }\n                    const result = this[$styleEvaluator].evaluate();\n                    // @see https://github.com/microsoft/TypeScript/pull/30769\n                    // @see https://github.com/Microsoft/TypeScript/issues/1863\n                    this[config.updateHandler](result);\n                }\n            },\n            updated: {\n                value: function (changedProperties) {\n                    // Always invoke updates to styles first. This gives a class that\n                    // uses this decorator the opportunity to override the effect, or\n                    // respond to it, in its own implementation of `updated`.\n                    if (changedProperties.has(propertyName)) {\n                        this[$updateEvaluator]();\n                        this[$evaluateAndSync]();\n                    }\n                    originalUpdated.call(this, changedProperties);\n                }\n            },\n            connectedCallback: {\n                value: function () {\n                    originalConnectedCallback.call(this);\n                    this.requestUpdate(propertyName, this[propertyName]);\n                }\n            },\n            disconnectedCallback: {\n                value: function () {\n                    originalDisconnectedCallback.call(this);\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].dispose();\n                        this[$styleEffector] = null;\n                    }\n                }\n            }\n        });\n    };\n};\n\n/* @license\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$d, _b$b, _c$5, _d$4, _e$2, _f$2, _g$2, _h$2, _j$2, _k$2, _l$1;\nconst DEFAULT_OPTIONS = Object.freeze({\n    minimumRadius: 0,\n    maximumRadius: Infinity,\n    minimumPolarAngle: Math.PI / 8,\n    maximumPolarAngle: Math.PI - Math.PI / 8,\n    minimumAzimuthalAngle: -Infinity,\n    maximumAzimuthalAngle: Infinity,\n    minimumFieldOfView: 10,\n    maximumFieldOfView: 45,\n    eventHandlingBehavior: 'prevent-all',\n    interactionPolicy: 'always-allow'\n});\n// Internal orbital position state\nconst $spherical = Symbol('spherical');\nconst $goalSpherical = Symbol('goalSpherical');\nconst $thetaDamper = Symbol('thetaDamper');\nconst $phiDamper = Symbol('phiDamper');\nconst $radiusDamper = Symbol('radiusDamper');\nconst $logFov = Symbol('fov');\nconst $goalLogFov = Symbol('goalLogFov');\nconst $fovDamper = Symbol('fovDamper');\nconst $options = Symbol('options');\nconst $touchMode = Symbol('touchMode');\nconst $canInteract = Symbol('canInteract');\nconst $interactionEnabled = Symbol('interactionEnabled');\nconst $userAdjustOrbit = Symbol('userAdjustOrbit');\nconst $isUserChange = Symbol('isUserChange');\nconst $isStationary = Symbol('isMoving');\nconst $moveCamera = Symbol('moveCamera');\nconst $isUserPointing = Symbol('isUserPointing');\n// Pointer state\nconst $pointerIsDown = Symbol('pointerIsDown');\nconst $lastPointerPosition = Symbol('lastPointerPosition');\nconst $lastTouches = Symbol('lastTouches');\n// Value conversion methods\nconst $pixelLengthToSphericalAngle = Symbol('pixelLengthToSphericalAngle');\nconst $twoTouchDistance = Symbol('twoTouchDistance');\nconst $wrapAngle = Symbol('wrapAngle');\n// Event handlers\nconst $onMouseMove = Symbol('onMouseMove');\nconst $onMouseDown = Symbol('onMouseDown');\nconst $onMouseUp = Symbol('onMouseUp');\nconst $onTouchStart = Symbol('onTouchStart');\nconst $onTouchEnd = Symbol('onTouchEnd');\nconst $onTouchMove = Symbol('onTouchMove');\nconst $onWheel = Symbol('onWheel');\nconst $onKeyDown = Symbol('onKeyDown');\nconst $handlePointerMove = Symbol('handlePointerMove');\nconst $handleSinglePointerMove = Symbol('handleSinglePointerMove');\nconst $handlePointerDown = Symbol('handlePointerDown');\nconst $handleSinglePointerDown = Symbol('handleSinglePointerDown');\nconst $handlePointerUp = Symbol('handlePointerUp');\nconst $handleWheel = Symbol('handleWheel');\nconst $handleKey = Symbol('handleKey');\n// Constants\nconst TOUCH_EVENT_RE = /^touch(start|end|move)$/;\nconst KEYBOARD_ORBIT_INCREMENT = Math.PI / 8;\nconst ZOOM_SENSITIVITY = 0.04;\nconst KeyCode = {\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40\n};\nconst ChangeSource = {\n    USER_INTERACTION: 'user-interaction',\n    NONE: 'none'\n};\n/**\n * SmoothControls is a Three.js helper for adding delightful pointer and\n * keyboard-based input to a staged Three.js scene. Its API is very similar to\n * OrbitControls, but it offers more opinionated (subjectively more delightful)\n * defaults, easy extensibility and subjectively better out-of-the-box keyboard\n * support.\n *\n * One important change compared to OrbitControls is that the `update` method\n * of SmoothControls must be invoked on every frame, otherwise the controls\n * will not have an effect.\n *\n * Another notable difference compared to OrbitControls is that SmoothControls\n * does not currently support panning (but probably will in a future revision).\n *\n * Like OrbitControls, SmoothControls assumes that the orientation of the camera\n * has been set in terms of position, rotation and scale, so it is important to\n * ensure that the camera's matrixWorld is in sync before using SmoothControls.\n */\nclass SmoothControls extends EventDispatcher {\n    constructor(camera, element) {\n        super();\n        this.camera = camera;\n        this.element = element;\n        this[_a$d] = false;\n        this[_b$b] = false;\n        this[_c$5] = false;\n        this[_d$4] = new Spherical();\n        this[_e$2] = new Spherical();\n        this[_f$2] = new Damper();\n        this[_g$2] = new Damper();\n        this[_h$2] = new Damper();\n        this[_j$2] = new Damper();\n        this[_k$2] = false;\n        this[_l$1] = {\n            clientX: 0,\n            clientY: 0,\n        };\n        this[$onMouseMove] = (event) => this[$handlePointerMove](event);\n        this[$onMouseDown] = (event) => this[$handlePointerDown](event);\n        this[$onMouseUp] = (event) => this[$handlePointerUp](event);\n        this[$onWheel] = (event) => this[$handleWheel](event);\n        this[$onKeyDown] = (event) => this[$handleKey](event);\n        this[$onTouchStart] = (event) => this[$handlePointerDown](event);\n        this[$onTouchEnd] = (event) => this[$handlePointerUp](event);\n        this[$onTouchMove] = (event) => this[$handlePointerMove](event);\n        this[$options] = Object.assign({}, DEFAULT_OPTIONS);\n        this.setOrbit(0, Math.PI / 2, 1);\n        this.setFieldOfView(100);\n        this.jumpToGoal();\n    }\n    get interactionEnabled() {\n        return this[$interactionEnabled];\n    }\n    enableInteraction() {\n        if (this[$interactionEnabled] === false) {\n            const { element } = this;\n            element.addEventListener('mousemove', this[$onMouseMove]);\n            element.addEventListener('mousedown', this[$onMouseDown]);\n            element.addEventListener('wheel', this[$onWheel]);\n            element.addEventListener('keydown', this[$onKeyDown]);\n            element.addEventListener('touchstart', this[$onTouchStart]);\n            element.addEventListener('touchmove', this[$onTouchMove]);\n            self.addEventListener('mouseup', this[$onMouseUp]);\n            self.addEventListener('touchend', this[$onTouchEnd]);\n            this.element.style.cursor = 'grab';\n            this[$interactionEnabled] = true;\n        }\n    }\n    disableInteraction() {\n        if (this[$interactionEnabled] === true) {\n            const { element } = this;\n            element.removeEventListener('mousemove', this[$onMouseMove]);\n            element.removeEventListener('mousedown', this[$onMouseDown]);\n            element.removeEventListener('wheel', this[$onWheel]);\n            element.removeEventListener('keydown', this[$onKeyDown]);\n            element.removeEventListener('touchstart', this[$onTouchStart]);\n            element.removeEventListener('touchmove', this[$onTouchMove]);\n            self.removeEventListener('mouseup', this[$onMouseUp]);\n            self.removeEventListener('touchend', this[$onTouchEnd]);\n            element.style.cursor = '';\n            this[$interactionEnabled] = false;\n        }\n    }\n    /**\n     * The options that are currently configured for the controls instance.\n     */\n    get options() {\n        return this[$options];\n    }\n    /**\n     * Copy the spherical values that represent the current camera orbital\n     * position relative to the configured target into a provided Spherical\n     * instance. If no Spherical is provided, a new Spherical will be allocated\n     * to copy the values into. The Spherical that values are copied into is\n     * returned.\n     */\n    getCameraSpherical(target = new Spherical()) {\n        return target.copy(this[$spherical]);\n    }\n    /**\n     * Returns the camera's current vertical field of view in degrees.\n     */\n    getFieldOfView() {\n        return this.camera.fov;\n    }\n    /**\n     * Configure the options of the controls. Configured options will be\n     * merged with whatever options have already been configured for this\n     * controls instance.\n     */\n    applyOptions(options) {\n        Object.assign(this[$options], options);\n        // Re-evaluates clamping based on potentially new values for min/max\n        // polar, azimuth and radius:\n        this.setOrbit();\n        this.setFieldOfView(Math.exp(this[$goalLogFov]));\n    }\n    /**\n     * Sets the near and far planes of the camera.\n     */\n    updateNearFar(nearPlane, farPlane) {\n        this.camera.near = Math.max(nearPlane, farPlane / 1000);\n        this.camera.far = farPlane;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Sets the aspect ratio of the camera\n     */\n    updateAspect(aspect) {\n        this.camera.aspect = aspect;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Set the absolute orbital goal of the camera. The change will be\n     * applied over a number of frames depending on configured acceleration and\n     * dampening options.\n     *\n     * Returns true if invoking the method will result in the camera changing\n     * position and/or rotation, otherwise false.\n     */\n    setOrbit(goalTheta = this[$goalSpherical].theta, goalPhi = this[$goalSpherical].phi, goalRadius = this[$goalSpherical].radius) {\n        const { minimumAzimuthalAngle, maximumAzimuthalAngle, minimumPolarAngle, maximumPolarAngle, minimumRadius, maximumRadius } = this[$options];\n        const { theta, phi, radius } = this[$goalSpherical];\n        const nextTheta = clamp(goalTheta, minimumAzimuthalAngle, maximumAzimuthalAngle);\n        if (!isFinite(minimumAzimuthalAngle) &&\n            !isFinite(maximumAzimuthalAngle)) {\n            this[$spherical].theta =\n                this[$wrapAngle](this[$spherical].theta - nextTheta) + nextTheta;\n        }\n        const nextPhi = clamp(goalPhi, minimumPolarAngle, maximumPolarAngle);\n        const nextRadius = clamp(goalRadius, minimumRadius, maximumRadius);\n        if (nextTheta === theta && nextPhi === phi && nextRadius === radius) {\n            return false;\n        }\n        this[$goalSpherical].theta = nextTheta;\n        this[$goalSpherical].phi = nextPhi;\n        this[$goalSpherical].radius = nextRadius;\n        this[$goalSpherical].makeSafe();\n        this[$isUserChange] = false;\n        return true;\n    }\n    /**\n     * Subset of setOrbit() above, which only sets the camera's radius.\n     */\n    setRadius(radius) {\n        this[$goalSpherical].radius = radius;\n        this.setOrbit();\n    }\n    /**\n     * Sets the goal field of view for the camera\n     */\n    setFieldOfView(fov) {\n        const { minimumFieldOfView, maximumFieldOfView } = this[$options];\n        fov = clamp(fov, minimumFieldOfView, maximumFieldOfView);\n        this[$goalLogFov] = Math.log(fov);\n    }\n    /**\n     * Adjust the orbital position of the camera relative to its current orbital\n     * position. Does not let the theta goal get more than pi ahead of the current\n     * theta, which ensures interpolation continues in the direction of the delta.\n     * The deltaZoom parameter adjusts both the field of view and the orbit radius\n     * such that they progress across their allowed ranges in sync.\n     */\n    adjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        const { theta, phi, radius } = this[$goalSpherical];\n        const { minimumRadius, maximumRadius, minimumFieldOfView, maximumFieldOfView } = this[$options];\n        const dTheta = this[$spherical].theta - theta;\n        const dThetaLimit = Math.PI - 0.001;\n        const goalTheta = theta - clamp(deltaTheta, -dThetaLimit - dTheta, dThetaLimit - dTheta);\n        const goalPhi = phi - deltaPhi;\n        const deltaRatio = deltaZoom === 0 ?\n            0 :\n            deltaZoom > 0 ? (maximumRadius - radius) /\n                (Math.log(maximumFieldOfView) - this[$goalLogFov]) :\n                (radius - minimumRadius) /\n                    (this[$goalLogFov] - Math.log(minimumFieldOfView));\n        const goalRadius = radius +\n            deltaZoom *\n                Math.min(isFinite(deltaRatio) ? deltaRatio : Infinity, maximumRadius - minimumRadius);\n        let handled = this.setOrbit(goalTheta, goalPhi, goalRadius);\n        if (deltaZoom !== 0) {\n            const goalLogFov = this[$goalLogFov] + deltaZoom;\n            this.setFieldOfView(Math.exp(goalLogFov));\n            handled = true;\n        }\n        return handled;\n    }\n    /**\n     * Move the camera instantly instead of accelerating toward the goal\n     * parameters.\n     */\n    jumpToGoal() {\n        this.update(0, SETTLING_TIME);\n    }\n    /**\n     * Update controls. In most cases, this will result in the camera\n     * interpolating its position and rotation until it lines up with the\n     * designated goal orbital position.\n     *\n     * Time and delta are measured in milliseconds.\n     */\n    update(_time, delta) {\n        if (this[$isStationary]()) {\n            return;\n        }\n        const { maximumPolarAngle, maximumRadius } = this[$options];\n        const dTheta = this[$spherical].theta - this[$goalSpherical].theta;\n        if (Math.abs(dTheta) > Math.PI &&\n            !isFinite(this[$options].minimumAzimuthalAngle) &&\n            !isFinite(this[$options].maximumAzimuthalAngle)) {\n            this[$spherical].theta -= Math.sign(dTheta) * 2 * Math.PI;\n        }\n        this[$spherical].theta = this[$thetaDamper].update(this[$spherical].theta, this[$goalSpherical].theta, delta, Math.PI);\n        this[$spherical].phi = this[$phiDamper].update(this[$spherical].phi, this[$goalSpherical].phi, delta, maximumPolarAngle);\n        this[$spherical].radius = this[$radiusDamper].update(this[$spherical].radius, this[$goalSpherical].radius, delta, maximumRadius);\n        this[$logFov] =\n            this[$fovDamper].update(this[$logFov], this[$goalLogFov], delta, 1);\n        this[$moveCamera]();\n    }\n    [(_a$d = $interactionEnabled, _b$b = $isUserChange, _c$5 = $isUserPointing, _d$4 = $spherical, _e$2 = $goalSpherical, _f$2 = $thetaDamper, _g$2 = $phiDamper, _h$2 = $radiusDamper, _j$2 = $fovDamper, _k$2 = $pointerIsDown, _l$1 = $lastPointerPosition, $isStationary)]() {\n        return this[$goalSpherical].theta === this[$spherical].theta &&\n            this[$goalSpherical].phi === this[$spherical].phi &&\n            this[$goalSpherical].radius === this[$spherical].radius &&\n            this[$goalLogFov] === this[$logFov];\n    }\n    [$moveCamera]() {\n        // Derive the new camera position from the updated spherical:\n        this[$spherical].makeSafe();\n        this.camera.position.setFromSpherical(this[$spherical]);\n        this.camera.setRotationFromEuler(new Euler(this[$spherical].phi - Math.PI / 2, this[$spherical].theta, 0, 'YXZ'));\n        if (this.camera.fov !== Math.exp(this[$logFov])) {\n            this.camera.fov = Math.exp(this[$logFov]);\n            this.camera.updateProjectionMatrix();\n        }\n        const source = this[$isUserChange] ? ChangeSource.USER_INTERACTION : ChangeSource.NONE;\n        this.dispatchEvent({ type: 'change', source });\n    }\n    get [$canInteract]() {\n        if (this[$options].interactionPolicy == 'allow-when-focused') {\n            const rootNode = this.element.getRootNode();\n            return rootNode.activeElement === this.element;\n        }\n        return this[$options].interactionPolicy === 'always-allow';\n    }\n    [$userAdjustOrbit](deltaTheta, deltaPhi, deltaZoom) {\n        const handled = this.adjustOrbit(deltaTheta, deltaPhi, deltaZoom);\n        this[$isUserChange] = true;\n        // Always make sure that an initial event is triggered in case there is\n        // contention between user interaction and imperative changes. This initial\n        // event will give external observers that chance to observe that\n        // interaction occurred at all:\n        this.dispatchEvent({ type: 'change', source: ChangeSource.USER_INTERACTION });\n        return handled;\n    }\n    // Wraps to bewteen -pi and pi\n    [$wrapAngle](radians) {\n        const normalized = (radians + Math.PI) / (2 * Math.PI);\n        const wrapped = normalized - Math.floor(normalized);\n        return wrapped * 2 * Math.PI - Math.PI;\n    }\n    [$pixelLengthToSphericalAngle](pixelLength) {\n        return 2 * Math.PI * pixelLength / this.element.clientHeight;\n    }\n    [$twoTouchDistance](touchOne, touchTwo) {\n        const { clientX: xOne, clientY: yOne } = touchOne;\n        const { clientX: xTwo, clientY: yTwo } = touchTwo;\n        const xDelta = xTwo - xOne;\n        const yDelta = yTwo - yOne;\n        return Math.sqrt(xDelta * xDelta + yDelta * yDelta);\n    }\n    [$handlePointerMove](event) {\n        if (!this[$pointerIsDown] || !this[$canInteract]) {\n            return;\n        }\n        let handled = false;\n        // NOTE(cdata): We test event.type as some browsers do not have a global\n        // TouchEvent contructor.\n        if (TOUCH_EVENT_RE.test(event.type)) {\n            const { touches } = event;\n            switch (this[$touchMode]) {\n                case 'zoom':\n                    if (this[$lastTouches].length > 1 && touches.length > 1) {\n                        const lastTouchDistance = this[$twoTouchDistance](this[$lastTouches][0], this[$lastTouches][1]);\n                        const touchDistance = this[$twoTouchDistance](touches[0], touches[1]);\n                        const deltaZoom = ZOOM_SENSITIVITY * (lastTouchDistance - touchDistance) / 10.0;\n                        handled = this[$userAdjustOrbit](0, 0, deltaZoom);\n                    }\n                    break;\n                case 'rotate':\n                    handled = this[$handleSinglePointerMove](touches[0]);\n                    break;\n            }\n            this[$lastTouches] = touches;\n        }\n        else {\n            handled = this[$handleSinglePointerMove](event);\n        }\n        if ((handled || this[$options].eventHandlingBehavior === 'prevent-all') &&\n            event.cancelable) {\n            event.preventDefault();\n        }\n    }\n    [$handleSinglePointerMove](pointer) {\n        const { clientX, clientY } = pointer;\n        const deltaTheta = this[$pixelLengthToSphericalAngle](clientX - this[$lastPointerPosition].clientX);\n        const deltaPhi = this[$pixelLengthToSphericalAngle](clientY - this[$lastPointerPosition].clientY);\n        this[$lastPointerPosition].clientX = clientX;\n        this[$lastPointerPosition].clientY = clientY;\n        if (this[$isUserPointing] === false) {\n            this[$isUserPointing] = true;\n            this.dispatchEvent({ type: 'pointer-change-start', pointer: Object.assign({}, pointer) });\n        }\n        return this[$userAdjustOrbit](deltaTheta, deltaPhi, 0);\n    }\n    [$handlePointerDown](event) {\n        this[$pointerIsDown] = true;\n        this[$isUserPointing] = false;\n        if (TOUCH_EVENT_RE.test(event.type)) {\n            const { touches } = event;\n            switch (touches.length) {\n                default:\n                case 1:\n                    this[$touchMode] = 'rotate';\n                    this[$handleSinglePointerDown](touches[0]);\n                    break;\n                case 2:\n                    this[$touchMode] = 'zoom';\n                    break;\n            }\n            this[$lastTouches] = touches;\n        }\n        else {\n            this[$handleSinglePointerDown](event);\n        }\n    }\n    [$handleSinglePointerDown](pointer) {\n        this[$lastPointerPosition].clientX = pointer.clientX;\n        this[$lastPointerPosition].clientY = pointer.clientY;\n        this.element.style.cursor = 'grabbing';\n    }\n    [$handlePointerUp](_event) {\n        this.element.style.cursor = 'grab';\n        this[$pointerIsDown] = false;\n        if (this[$isUserPointing]) {\n            this.dispatchEvent({\n                type: 'pointer-change-end',\n                pointer: Object.assign({}, this[$lastPointerPosition])\n            });\n        }\n    }\n    [$handleWheel](event) {\n        if (!this[$canInteract]) {\n            return;\n        }\n        const deltaZoom = event.deltaY *\n            (event.deltaMode == 1 ? 18 : 1) * ZOOM_SENSITIVITY / 30;\n        if ((this[$userAdjustOrbit](0, 0, deltaZoom) ||\n            this[$options].eventHandlingBehavior === 'prevent-all') &&\n            event.cancelable) {\n            event.preventDefault();\n        }\n    }\n    [$handleKey](event) {\n        // We track if the key is actually one we respond to, so as not to\n        // accidentally clober unrelated key inputs when the <model-viewer> has\n        // focus and eventHandlingBehavior is set to 'prevent-all'.\n        let relevantKey = false;\n        let handled = false;\n        switch (event.keyCode) {\n            case KeyCode.PAGE_UP:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](0, 0, ZOOM_SENSITIVITY);\n                break;\n            case KeyCode.PAGE_DOWN:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](0, 0, -1 * ZOOM_SENSITIVITY);\n                break;\n            case KeyCode.UP:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](0, -KEYBOARD_ORBIT_INCREMENT, 0);\n                break;\n            case KeyCode.DOWN:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](0, KEYBOARD_ORBIT_INCREMENT, 0);\n                break;\n            case KeyCode.LEFT:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](-KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                break;\n            case KeyCode.RIGHT:\n                relevantKey = true;\n                handled = this[$userAdjustOrbit](KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                break;\n        }\n        if (relevantKey &&\n            (handled || this[$options].eventHandlingBehavior === 'prevent-all') &&\n            event.cancelable) {\n            event.preventDefault();\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Adapted from https://gist.github.com/gre/1650294\nconst easeInOutQuad = (t) => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n/**\n * Creates a TimingFunction that uses a given ease to interpolate between\n * two configured number values.\n */\nconst interpolate = (start, end, ease = easeInOutQuad) => (time) => start + (end - start) * ease(time);\n/**\n * Creates a TimingFunction that interpolates through a weighted list\n * of other TimingFunctions (\"tracks\"). Tracks are interpolated in order, and\n * allocated a percentage of the total time based on their relative weight.\n */\nconst sequence = (tracks, weights) => {\n    const totalWeight = weights.reduce((total, weight) => total + weight, 0);\n    const ratios = weights.map(weight => weight / totalWeight);\n    return (time) => {\n        let start = 0;\n        let ratio = Infinity;\n        let track = () => 0;\n        for (let i = 0; i < ratios.length; ++i) {\n            ratio = ratios[i];\n            track = tracks[i];\n            if (time <= (start + ratio)) {\n                break;\n            }\n            start += ratio;\n        }\n        return track((time - start) / ratio);\n    };\n};\n/**\n * Creates a \"timeline\" TimingFunction out of an initial value and a series of\n * Keyframes. The timeline function accepts value from 0-1 and returns the\n * current value based on keyframe interpolation across the total number of\n * frames. Frames are only used to indicate the relative length of each keyframe\n * transition, so interpolated values will be computed for fractional frames.\n */\nconst timeline = (initialValue, keyframes) => {\n    const tracks = [];\n    const weights = [];\n    let lastValue = initialValue;\n    for (let i = 0; i < keyframes.length; ++i) {\n        const keyframe = keyframes[i];\n        const { value, frames } = keyframe;\n        const ease = keyframe.ease || easeInOutQuad;\n        const track = interpolate(lastValue, value, ease);\n        tracks.push(track);\n        weights.push(frames);\n        lastValue = value;\n    }\n    return sequence(tracks, weights);\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// NOTE(cdata): The following \"animation\" timing functions are deliberately\n// being used in favor of CSS animations. In Safari 12.1 and 13, CSS animations\n// would cause the interaction prompt to glitch unexpectedly\n// @see https://github.com/GoogleWebComponents/model-viewer/issues/839\nconst PROMPT_ANIMATION_TIME = 5000;\n// For timing purposes, a \"frame\" is a timing agnostic relative unit of time\n// and a \"value\" is a target value for the keyframe.\nconst wiggle = timeline(0, [\n    { frames: 6, value: 0 },\n    { frames: 5, value: -1 },\n    { frames: 1, value: -1 },\n    { frames: 8, value: 1 },\n    { frames: 1, value: 1 },\n    { frames: 5, value: 0 },\n    { frames: 12, value: 0 }\n]);\nconst fade = timeline(0, [\n    { frames: 2, value: 0 },\n    { frames: 1, value: 1 },\n    { frames: 5, value: 1 },\n    { frames: 1, value: 0 },\n    { frames: 4, value: 0 }\n]);\nconst DEFAULT_CAMERA_ORBIT = '0deg 75deg 105%';\nconst DEFAULT_CAMERA_TARGET = 'auto auto auto';\nconst DEFAULT_FIELD_OF_VIEW = 'auto';\nconst MINIMUM_RADIUS_RATIO = 1.1 * SAFE_RADIUS_RATIO;\nconst AZIMUTHAL_QUADRANT_LABELS = ['front', 'right', 'back', 'left'];\nconst POLAR_TRIENT_LABELS = ['upper-', '', 'lower-'];\nconst DEFAULT_INTERACTION_PROMPT_THRESHOLD = 3000;\nconst INTERACTION_PROMPT = 'Use mouse, touch or arrow keys to control the camera!';\nconst InteractionPromptStrategy = {\n    AUTO: 'auto',\n    WHEN_FOCUSED: 'when-focused',\n    NONE: 'none'\n};\nconst InteractionPromptStyle = {\n    BASIC: 'basic',\n    WIGGLE: 'wiggle'\n};\nconst InteractionPolicy = {\n    ALWAYS_ALLOW: 'always-allow',\n    WHEN_FOCUSED: 'allow-when-focused'\n};\nconst fieldOfViewIntrinsics = (element) => {\n    return {\n        basis: [numberNode(element[$zoomAdjustedFieldOfView] * Math.PI / 180, 'rad')],\n        keywords: { auto: [null] }\n    };\n};\nconst minFieldOfViewIntrinsics = {\n    basis: [degreesToRadians(numberNode(25, 'deg'))],\n    keywords: { auto: [null] }\n};\nconst maxFieldOfViewIntrinsics = (element) => {\n    const scene = element[$scene];\n    return {\n        basis: [degreesToRadians(numberNode(45, 'deg'))],\n        keywords: { auto: [numberNode(scene.framedFieldOfView, 'deg')] }\n    };\n};\nconst cameraOrbitIntrinsics = (() => {\n    const defaultTerms = parseExpressions(DEFAULT_CAMERA_ORBIT)[0]\n        .terms;\n    const theta = normalizeUnit(defaultTerms[0]);\n    const phi = normalizeUnit(defaultTerms[1]);\n    return (element) => {\n        const radius = element[$scene].model.idealCameraDistance;\n        return {\n            basis: [theta, phi, numberNode(radius, 'm')],\n            keywords: { auto: [null, null, numberNode(105, '%')] }\n        };\n    };\n})();\nconst minCameraOrbitIntrinsics = (element) => {\n    const radius = MINIMUM_RADIUS_RATIO * element[$scene].model.idealCameraDistance;\n    return {\n        basis: [\n            numberNode(-Infinity, 'rad'),\n            numberNode(Math.PI / 8, 'rad'),\n            numberNode(radius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst maxCameraOrbitIntrinsics = (element) => {\n    const orbitIntrinsics = cameraOrbitIntrinsics(element);\n    const evaluator = new StyleEvaluator([], orbitIntrinsics);\n    const defaultRadius = evaluator.evaluate()[2];\n    return {\n        basis: [\n            numberNode(Infinity, 'rad'),\n            numberNode(Math.PI - Math.PI / 8, 'rad'),\n            numberNode(defaultRadius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst cameraTargetIntrinsics = (element) => {\n    const center = element[$scene].model.boundingBox.getCenter(new Vector3);\n    return {\n        basis: [\n            numberNode(center.x, 'm'),\n            numberNode(center.y, 'm'),\n            numberNode(center.z, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst HALF_PI = Math.PI / 2.0;\nconst THIRD_PI = Math.PI / 3.0;\nconst QUARTER_PI = HALF_PI / 2.0;\nconst TAU = 2.0 * Math.PI;\nconst $controls = Symbol('controls');\nconst $promptElement = Symbol('promptElement');\nconst $promptAnimatedContainer = Symbol('promptAnimatedContainer');\nconst $deferInteractionPrompt = Symbol('deferInteractionPrompt');\nconst $updateAria = Symbol('updateAria');\nconst $updateCameraForRadius = Symbol('updateCameraForRadius');\nconst $blurHandler = Symbol('blurHandler');\nconst $focusHandler = Symbol('focusHandler');\nconst $changeHandler = Symbol('changeHandler');\nconst $pointerChangeHandler = Symbol('pointerChangeHandler');\nconst $onBlur = Symbol('onBlur');\nconst $onFocus = Symbol('onFocus');\nconst $onChange = Symbol('onChange');\nconst $onPointerChange = Symbol('onPointerChange');\nconst $waitingToPromptUser = Symbol('waitingToPromptUser');\nconst $userHasInteracted = Symbol('userHasInteracted');\nconst $promptElementVisibleTime = Symbol('promptElementVisibleTime');\nconst $lastPromptOffset = Symbol('lastPromptOffset');\nconst $focusedTime = Symbol('focusedTime');\nconst $zoomAdjustedFieldOfView = Symbol('zoomAdjustedFieldOfView');\nconst $lastSpherical = Symbol('lastSpherical');\nconst $jumpCamera = Symbol('jumpCamera');\nconst $initialized$1 = Symbol('initialized');\nconst $maintainThetaPhi = Symbol('maintainThetaPhi');\nconst $syncCameraOrbit = Symbol('syncCameraOrbit');\nconst $syncFieldOfView = Symbol('syncFieldOfView');\nconst $syncCameraTarget = Symbol('syncCameraTarget');\nconst $syncMinCameraOrbit = Symbol('syncMinCameraOrbit');\nconst $syncMaxCameraOrbit = Symbol('syncMaxCameraOrbit');\nconst $syncMinFieldOfView = Symbol('syncMinFieldOfView');\nconst $syncMaxFieldOfView = Symbol('syncMaxFieldOfView');\nconst ControlsMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n    class ControlsModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.cameraControls = false;\n            this.cameraOrbit = DEFAULT_CAMERA_ORBIT;\n            this.cameraTarget = DEFAULT_CAMERA_TARGET;\n            this.fieldOfView = DEFAULT_FIELD_OF_VIEW;\n            this.minCameraOrbit = 'auto';\n            this.maxCameraOrbit = 'auto';\n            this.minFieldOfView = 'auto';\n            this.maxFieldOfView = 'auto';\n            this.interactionPromptThreshold = DEFAULT_INTERACTION_PROMPT_THRESHOLD;\n            this.interactionPromptStyle = InteractionPromptStyle.WIGGLE;\n            this.interactionPrompt = InteractionPromptStrategy.AUTO;\n            this.interactionPolicy = InteractionPolicy.ALWAYS_ALLOW;\n            this[_a] = this.shadowRoot.querySelector('.interaction-prompt');\n            this[_b] = this.shadowRoot.querySelector('.interaction-prompt > .animated-container');\n            this[_c] = Infinity;\n            this[_d] = 0;\n            this[_e] = Infinity;\n            this[_f] = false;\n            this[_g] = false;\n            this[_h] = new SmoothControls(this[$scene].camera, this[$userInputElement]);\n            this[_j] = 0;\n            this[_k] = new Spherical();\n            this[_l] = false;\n            this[_m] = false;\n            this[_o] = false;\n            this[_p] = (event) => this[$onChange](event);\n            this[_q] = (event) => this[$onPointerChange](event);\n            this[_r] = () => this[$onFocus]();\n            this[_s] = () => this[$onBlur]();\n        }\n        getCameraOrbit() {\n            const { theta, phi, radius } = this[$lastSpherical];\n            return { theta, phi, radius };\n        }\n        getCameraTarget() {\n            return this[$scene].getTarget();\n        }\n        getFieldOfView() {\n            return this[$controls].getFieldOfView();\n        }\n        // Provided so user code does not have to parse these from attributes.\n        getMinimumFieldOfView() {\n            return this[$controls].options.minimumFieldOfView;\n        }\n        getMaximumFieldOfView() {\n            return this[$controls].options.maximumFieldOfView;\n        }\n        jumpCameraToGoal() {\n            this[$jumpCamera] = true;\n            this.requestUpdate($jumpCamera, false);\n        }\n        resetInteractionPrompt() {\n            this[$lastPromptOffset] = 0;\n            this[$promptElementVisibleTime] = Infinity;\n            this[$userHasInteracted] = false;\n            this[$waitingToPromptUser] =\n                this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$controls].addEventListener('change', this[$changeHandler]);\n            this[$controls].addEventListener('pointer-change-start', this[$pointerChangeHandler]);\n            this[$controls].addEventListener('pointer-change-end', this[$pointerChangeHandler]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$controls].removeEventListener('change', this[$changeHandler]);\n            this[$controls].removeEventListener('pointer-change-start', this[$pointerChangeHandler]);\n            this[$controls].removeEventListener('pointer-change-end', this[$pointerChangeHandler]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            const controls = this[$controls];\n            const input = this[$userInputElement];\n            if (changedProperties.has('cameraControls')) {\n                if (this.cameraControls) {\n                    controls.enableInteraction();\n                    if (this.interactionPrompt === InteractionPromptStrategy.AUTO) {\n                        this[$waitingToPromptUser] = true;\n                    }\n                    input.addEventListener('focus', this[$focusHandler]);\n                    input.addEventListener('blur', this[$blurHandler]);\n                }\n                else {\n                    input.removeEventListener('focus', this[$focusHandler]);\n                    input.removeEventListener('blur', this[$blurHandler]);\n                    controls.disableInteraction();\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPrompt') ||\n                changedProperties.has('cameraControls') ||\n                changedProperties.has('src')) {\n                if (this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls && !this[$userHasInteracted]) {\n                    this[$waitingToPromptUser] = true;\n                }\n                else {\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPromptStyle')) {\n                this[$promptElement].classList.toggle('wiggle', this.interactionPromptStyle === InteractionPromptStyle.WIGGLE);\n            }\n            if (changedProperties.has('interactionPolicy')) {\n                const interactionPolicy = this.interactionPolicy;\n                controls.applyOptions({ interactionPolicy });\n            }\n            if (this[$jumpCamera] === true) {\n                Promise.resolve().then(() => {\n                    this[$controls].jumpToGoal();\n                    this[$scene].jumpToGoal();\n                    this[$jumpCamera] = false;\n                });\n            }\n        }\n        [(_a = $promptElement, _b = $promptAnimatedContainer, _c = $focusedTime, _d = $lastPromptOffset, _e = $promptElementVisibleTime, _f = $userHasInteracted, _g = $waitingToPromptUser, _h = $controls, _j = $zoomAdjustedFieldOfView, _k = $lastSpherical, _l = $jumpCamera, _m = $initialized$1, _o = $maintainThetaPhi, _p = $changeHandler, _q = $pointerChangeHandler, _r = $focusHandler, _s = $blurHandler, $syncFieldOfView)](style) {\n            this[$controls].setFieldOfView(style[0] * 180 / Math.PI);\n        }\n        [$syncCameraOrbit](style) {\n            if (this[$maintainThetaPhi]) {\n                const { theta, phi } = this.getCameraOrbit();\n                style[0] = theta;\n                style[1] = phi;\n                this[$maintainThetaPhi] = false;\n            }\n            this[$controls].setOrbit(style[0], style[1], style[2]);\n        }\n        [$syncMinCameraOrbit](style) {\n            this[$controls].applyOptions({\n                minimumAzimuthalAngle: style[0],\n                minimumPolarAngle: style[1],\n                minimumRadius: style[2]\n            });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxCameraOrbit](style) {\n            this[$controls].applyOptions({\n                maximumAzimuthalAngle: style[0],\n                maximumPolarAngle: style[1],\n                maximumRadius: style[2]\n            });\n            this[$updateCameraForRadius](style[2]);\n            this.jumpCameraToGoal();\n        }\n        [$syncMinFieldOfView](style) {\n            this[$controls].applyOptions({ minimumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxFieldOfView](style) {\n            this[$controls].applyOptions({ maximumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncCameraTarget](style) {\n            const [x, y, z] = style;\n            this[$scene].setTarget(x, y, z);\n            this[$renderer].arRenderer.updateTarget();\n        }\n        [$tick$1](time, delta) {\n            super[$tick$1](time, delta);\n            if (this[$renderer].isPresenting || !this[$hasTransitioned]()) {\n                return;\n            }\n            const now = performance.now();\n            if (this[$waitingToPromptUser]) {\n                const thresholdTime = this.interactionPrompt === InteractionPromptStrategy.AUTO ?\n                    this[$loadedTime] :\n                    this[$focusedTime];\n                if (this.loaded &&\n                    now > thresholdTime + this.interactionPromptThreshold) {\n                    this[$userInputElement].setAttribute('aria-label', INTERACTION_PROMPT);\n                    this[$waitingToPromptUser] = false;\n                    this[$promptElementVisibleTime] = now;\n                    this[$promptElement].classList.add('visible');\n                }\n            }\n            if (isFinite(this[$promptElementVisibleTime]) &&\n                this.interactionPromptStyle === InteractionPromptStyle.WIGGLE) {\n                const scene = this[$scene];\n                const animationTime = ((now - this[$promptElementVisibleTime]) / PROMPT_ANIMATION_TIME) %\n                    1;\n                const offset = wiggle(animationTime);\n                const opacity = fade(animationTime);\n                this[$promptAnimatedContainer].style.opacity = `${opacity}`;\n                if (offset !== this[$lastPromptOffset]) {\n                    const xOffset = offset * scene.width * 0.05;\n                    const deltaTheta = (offset - this[$lastPromptOffset]) * Math.PI / 16;\n                    this[$promptAnimatedContainer].style.transform =\n                        `translateX(${xOffset}px)`;\n                    this[$controls].adjustOrbit(deltaTheta, 0, 0);\n                    this[$lastPromptOffset] = offset;\n                }\n            }\n            this[$controls].update(time, delta);\n            this[$scene].updateTarget(delta);\n        }\n        [$deferInteractionPrompt]() {\n            // Effectively cancel the timer waiting for user interaction:\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n        }\n        /**\n         * Updates the camera's near and far planes to enclose the scene when\n         * orbiting at the supplied radius.\n         */\n        [$updateCameraForRadius](radius) {\n            const { idealCameraDistance } = this[$scene].model;\n            const maximumRadius = Math.max(idealCameraDistance, radius);\n            const near = 0;\n            const far = 2 * maximumRadius;\n            this[$controls].updateNearFar(near, far);\n        }\n        [$updateAria]() {\n            // NOTE(cdata): It is possible that we might want to record the\n            // last spherical when the label actually changed. Right now, the\n            // side-effect the current implementation is that we will only\n            // announce the first view change that occurs after the element\n            // becomes focused.\n            const { theta: lastTheta, phi: lastPhi } = this[$lastSpherical];\n            const { theta, phi } = this[$controls].getCameraSpherical(this[$lastSpherical]);\n            const rootNode = this.getRootNode();\n            // Only change the aria-label if <model-viewer> is currently focused:\n            if (rootNode != null && rootNode.activeElement === this) {\n                const lastAzimuthalQuadrant = (4 + Math.floor(((lastTheta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const azimuthalQuadrant = (4 + Math.floor(((theta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const lastPolarTrient = Math.floor(lastPhi / THIRD_PI);\n                const polarTrient = Math.floor(phi / THIRD_PI);\n                if (azimuthalQuadrant !== lastAzimuthalQuadrant ||\n                    polarTrient !== lastPolarTrient) {\n                    const azimuthalQuadrantLabel = AZIMUTHAL_QUADRANT_LABELS[azimuthalQuadrant];\n                    const polarTrientLabel = POLAR_TRIENT_LABELS[polarTrient];\n                    const ariaLabel = `View from stage ${polarTrientLabel}${azimuthalQuadrantLabel}`;\n                    this[$userInputElement].setAttribute('aria-label', ariaLabel);\n                }\n            }\n        }\n        [$onResize](event) {\n            const controls = this[$controls];\n            const oldFramedFieldOfView = this[$scene].framedFieldOfView;\n            // The super of $onResize will update the scene's framedFieldOfView, so we\n            // compare the before and after to calculate the proper zoom.\n            super[$onResize](event);\n            const newFramedFieldOfView = this[$scene].framedFieldOfView;\n            const zoom = controls.getFieldOfView() / oldFramedFieldOfView;\n            this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n            controls.updateAspect(this[$scene].aspect);\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.jumpCameraToGoal();\n        }\n        [$onModelLoad]() {\n            super[$onModelLoad]();\n            const { framedFieldOfView } = this[$scene];\n            this[$zoomAdjustedFieldOfView] = framedFieldOfView;\n            if (this[$initialized$1]) {\n                this[$maintainThetaPhi] = true;\n            }\n            else {\n                this[$initialized$1] = true;\n            }\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.requestUpdate('minCameraOrbit', this.minCameraOrbit);\n            this.requestUpdate('maxCameraOrbit', this.maxCameraOrbit);\n            this.requestUpdate('cameraOrbit', this.cameraOrbit);\n            this.requestUpdate('cameraTarget', this.cameraTarget);\n            this.jumpCameraToGoal();\n        }\n        [$onFocus]() {\n            const input = this[$userInputElement];\n            if (!isFinite(this[$focusedTime])) {\n                this[$focusedTime] = performance.now();\n            }\n            // NOTE(cdata): On every re-focus, we switch the aria-label back to\n            // the original, non-prompt label if appropriate. If the user has\n            // already interacted, they no longer need to hear the prompt.\n            // Otherwise, they will hear it again after the idle prompt threshold\n            // has been crossed.\n            const ariaLabel = this[$ariaLabel];\n            if (input.getAttribute('aria-label') !== ariaLabel) {\n                input.setAttribute('aria-label', ariaLabel);\n            }\n            if (this.interactionPrompt === InteractionPromptStrategy.WHEN_FOCUSED &&\n                !this[$userHasInteracted]) {\n                this[$waitingToPromptUser] = true;\n            }\n        }\n        [$onBlur]() {\n            if (this.interactionPrompt !== InteractionPromptStrategy.WHEN_FOCUSED) {\n                return;\n            }\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n            this[$focusedTime] = Infinity;\n        }\n        [$onChange]({ source }) {\n            this[$updateAria]();\n            this[$needsRender]();\n            if (source === ChangeSource.USER_INTERACTION) {\n                this[$userHasInteracted] = true;\n                this[$deferInteractionPrompt]();\n            }\n            this.dispatchEvent(new CustomEvent('camera-change', { detail: { source } }));\n        }\n        [$onPointerChange](event) {\n            if (event.type === 'pointer-change-start') {\n                this[$container].classList.add('pointer-tumbling');\n            }\n            else {\n                this[$container].classList.remove('pointer-tumbling');\n            }\n        }\n    }\n    __decorate$3([\n        property({ type: Boolean, attribute: 'camera-controls' })\n    ], ControlsModelViewerElement.prototype, \"cameraControls\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: cameraOrbitIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraOrbit\n        }),\n        property({ type: String, attribute: 'camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: cameraTargetIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraTarget\n        }),\n        property({ type: String, attribute: 'camera-target', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraTarget\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: fieldOfViewIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncFieldOfView\n        }),\n        property({ type: String, attribute: 'field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"fieldOfView\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: minCameraOrbitIntrinsics,\n            updateHandler: $syncMinCameraOrbit\n        }),\n        property({ type: String, attribute: 'min-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minCameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: maxCameraOrbitIntrinsics,\n            updateHandler: $syncMaxCameraOrbit\n        }),\n        property({ type: String, attribute: 'max-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxCameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: minFieldOfViewIntrinsics,\n            updateHandler: $syncMinFieldOfView\n        }),\n        property({ type: String, attribute: 'min-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minFieldOfView\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: maxFieldOfViewIntrinsics,\n            updateHandler: $syncMaxFieldOfView\n        }),\n        property({ type: String, attribute: 'max-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxFieldOfView\", void 0);\n    __decorate$3([\n        property({ type: Number, attribute: 'interaction-prompt-threshold' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptThreshold\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-prompt-style' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptStyle\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-prompt' })\n    ], ControlsModelViewerElement.prototype, \"interactionPrompt\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-policy' })\n    ], ControlsModelViewerElement.prototype, \"interactionPolicy\", void 0);\n    return ControlsModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst BASE_OPACITY = 0.1;\nconst DEFAULT_SHADOW_INTENSITY = 0.0;\nconst DEFAULT_SHADOW_SOFTNESS = 1.0;\nconst DEFAULT_EXPOSURE = 1.0;\nconst $currentEnvironmentMap = Symbol('currentEnvironmentMap');\nconst $applyEnvironmentMap = Symbol('applyEnvironmentMap');\nconst $updateEnvironment = Symbol('updateEnvironment');\nconst $cancelEnvironmentUpdate = Symbol('cancelEnvironmentUpdate');\nconst $onPreload = Symbol('onPreload');\nconst EnvironmentMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class EnvironmentModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.environmentImage = null;\n            this.skyboxImage = null;\n            this.shadowIntensity = DEFAULT_SHADOW_INTENSITY;\n            this.shadowSoftness = DEFAULT_SHADOW_SOFTNESS;\n            this.exposure = DEFAULT_EXPOSURE;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = (event) => {\n                if (event.element === this) {\n                    this[$updateEnvironment]();\n                }\n            };\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].loader.addEventListener('preload', this[$onPreload]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].loader.removeEventListener('preload', this[$onPreload]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('shadowIntensity')) {\n                this[$scene].setShadowIntensity(this.shadowIntensity * BASE_OPACITY);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('shadowSoftness')) {\n                this[$scene].setShadowSoftness(this.shadowSoftness);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('exposure')) {\n                this[$scene].exposure = this.exposure;\n                this[$needsRender]();\n            }\n            if ((changedProperties.has('environmentImage') ||\n                changedProperties.has('skyboxImage')) &&\n                this[$shouldAttemptPreload]()) {\n                this[$updateEnvironment]();\n            }\n        }\n        [(_a = $currentEnvironmentMap, _b = $cancelEnvironmentUpdate, _c = $onPreload, $onModelLoad)]() {\n            super[$onModelLoad]();\n            if (this[$currentEnvironmentMap] != null) {\n                this[$applyEnvironmentMap](this[$currentEnvironmentMap]);\n            }\n        }\n        async [$updateEnvironment]() {\n            const { skyboxImage, environmentImage } = this;\n            if (this[$cancelEnvironmentUpdate] != null) {\n                this[$cancelEnvironmentUpdate]();\n                this[$cancelEnvironmentUpdate] = null;\n            }\n            const { textureUtils } = this[$renderer];\n            if (textureUtils == null) {\n                return;\n            }\n            try {\n                const { environmentMap, skybox } = await new Promise(async (resolve, reject) => {\n                    const texturesLoad = textureUtils.generateEnvironmentMapAndSkybox(deserializeUrl(skyboxImage), deserializeUrl(environmentImage), { progressTracker: this[$progressTracker] });\n                    this[$cancelEnvironmentUpdate] = () => reject(texturesLoad);\n                    resolve(await texturesLoad);\n                });\n                if (skybox != null) {\n                    this[$scene].background = skybox.texture;\n                }\n                else {\n                    this[$scene].background = null;\n                }\n                this[$applyEnvironmentMap](environmentMap.texture);\n                this[$scene].model.dispatchEvent({ type: 'envmap-update' });\n            }\n            catch (errorOrPromise) {\n                if (errorOrPromise instanceof Error) {\n                    this[$applyEnvironmentMap](null);\n                    throw errorOrPromise;\n                }\n            }\n        }\n        /**\n         * Sets the Model to use the provided environment map,\n         * or `null` if the Model should remove its' environment map.\n         */\n        [$applyEnvironmentMap](environmentMap) {\n            this[$currentEnvironmentMap] = environmentMap;\n            this[$scene].environment = this[$currentEnvironmentMap];\n            this.dispatchEvent(new CustomEvent('environment-change'));\n            this[$needsRender]();\n        }\n    }\n    __decorate$4([\n        property({ type: String, attribute: 'environment-image' })\n    ], EnvironmentModelViewerElement.prototype, \"environmentImage\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'skybox-image' })\n    ], EnvironmentModelViewerElement.prototype, \"skyboxImage\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'shadow-intensity' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowIntensity\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'shadow-softness' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowSoftness\", void 0);\n    __decorate$4([\n        property({\n            type: Number,\n        })\n    ], EnvironmentModelViewerElement.prototype, \"exposure\", void 0);\n    return EnvironmentModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$e, _b$c;\nconst INITIAL_STATUS_ANNOUNCEMENT = 'This page includes one or more 3D models that are loading';\nconst FINISHED_LOADING_ANNOUNCEMENT = 'All 3D models in the page have loaded';\nconst UPDATE_STATUS_DEBOUNCE_MS = 100;\nconst $modelViewerStatusInstance = Symbol('modelViewerStatusInstance');\nconst $updateStatus = Symbol('updateStatus');\n/**\n * The LoadingStatusAnnouncer manages announcements of loading status across\n * all <model-viewer> elements in the document at any given time. As new\n * <model-viewer> elements are connected to the document, they are registered\n * with a LoadingStatusAnnouncer singleton. As they are disconnected, the are\n * also unregistered. Announcements are made to indicate the following\n * conditions:\n *\n *  1. There are <model-viewer> elements that have yet to finish loading\n *  2. All <model-viewer> elements in the page have finished attempting to load\n */\nclass LoadingStatusAnnouncer extends EventDispatcher {\n    constructor() {\n        super();\n        /**\n         * The \"status\" instance is the <model-viewer> instance currently designated\n         * to announce the loading status of all <model-viewer> elements in the\n         * document at any given time. It might change as <model-viewer> elements are\n         * attached or detached over time.\n         */\n        this[_a$e] = null;\n        this.registeredInstanceStatuses = new Map();\n        this.loadingPromises = [];\n        /**\n         * This element is a node that floats around the document as the status\n         * instance changes (see above). It is a singleton that represents the loading\n         * status for all <model-viewer> elements currently in the page. It has its\n         * role attribute set to \"status\", which causes screen readers to announce\n         * any changes to its text content.\n         *\n         * @see https://www.w3.org/TR/wai-aria-1.1/#status\n         */\n        this.statusElement = document.createElement('p');\n        this.statusUpdateInProgress = false;\n        this[_b$c] = debounce(() => this.updateStatus(), UPDATE_STATUS_DEBOUNCE_MS);\n        const { statusElement } = this;\n        const { style } = statusElement;\n        statusElement.setAttribute('role', 'status');\n        statusElement.classList.add('screen-reader-only');\n        style.top = style.left = '0';\n        style.pointerEvents = 'none';\n    }\n    /**\n     * Register a <model-viewer> element with the announcer. If it is not yet\n     * loaded, its loading status will be tracked by the announcer.\n     */\n    registerInstance(modelViewer) {\n        if (this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        let onUnregistered = () => { };\n        const loadShouldBeMeasured = modelViewer.loaded === false && !!modelViewer.src;\n        const loadAttemptCompletes = new Promise((resolve) => {\n            if (!loadShouldBeMeasured) {\n                resolve();\n                return;\n            }\n            const resolveHandler = () => {\n                resolve();\n                modelViewer.removeEventListener('load', resolveHandler);\n                modelViewer.removeEventListener('error', resolveHandler);\n            };\n            modelViewer.addEventListener('load', resolveHandler);\n            modelViewer.addEventListener('error', resolveHandler);\n            onUnregistered = resolveHandler;\n        });\n        this.registeredInstanceStatuses.set(modelViewer, { onUnregistered });\n        this.loadingPromises.push(loadAttemptCompletes);\n        if (this.modelViewerStatusInstance == null) {\n            this.modelViewerStatusInstance = modelViewer;\n        }\n    }\n    /**\n     * Unregister a <model-viewer> element with the announcer. Its loading status\n     * will no longer be tracked by the announcer.\n     */\n    unregisterInstance(modelViewer) {\n        if (!this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        const statuses = this.registeredInstanceStatuses;\n        const instanceStatus = statuses.get(modelViewer);\n        statuses.delete(modelViewer);\n        instanceStatus.onUnregistered();\n        if (this.modelViewerStatusInstance === modelViewer) {\n            this.modelViewerStatusInstance = statuses.size > 0 ?\n                getFirstMapKey(statuses) :\n                null;\n        }\n    }\n    get modelViewerStatusInstance() {\n        return this[$modelViewerStatusInstance];\n    }\n    set modelViewerStatusInstance(value) {\n        const currentInstance = this[$modelViewerStatusInstance];\n        if (currentInstance === value) {\n            return;\n        }\n        const { statusElement } = this;\n        if (value != null && value.shadowRoot != null) {\n            value.shadowRoot.appendChild(statusElement);\n        }\n        else if (statusElement.parentNode != null) {\n            statusElement.parentNode.removeChild(statusElement);\n        }\n        this[$modelViewerStatusInstance] = value;\n        this[$updateStatus]();\n    }\n    async updateStatus() {\n        if (this.statusUpdateInProgress || this.loadingPromises.length === 0) {\n            return;\n        }\n        this.statusElement.textContent = INITIAL_STATUS_ANNOUNCEMENT;\n        this.statusUpdateInProgress = true;\n        this.dispatchEvent({ type: 'initial-status-announced' });\n        while (this.loadingPromises.length) {\n            const { loadingPromises } = this;\n            this.loadingPromises = [];\n            await Promise.all(loadingPromises);\n        }\n        this.statusElement.textContent = FINISHED_LOADING_ANNOUNCEMENT;\n        this.statusUpdateInProgress = false;\n        this.dispatchEvent({ type: 'finished-loading-announced' });\n    }\n}\n_a$e = $modelViewerStatusInstance, _b$c = $updateStatus;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst PROGRESS_BAR_UPDATE_THRESHOLD = 100;\nconst PROGRESS_MASK_BASE_OPACITY = 0.2;\nconst DEFAULT_DRACO_DECODER_LOCATION = 'https://www.gstatic.com/draco/versioned/decoders/1.3.5/';\nconst SPACE_KEY = 32;\nconst ENTER_KEY = 13;\nconst RevealStrategy = {\n    AUTO: 'auto',\n    INTERACTION: 'interaction',\n    MANUAL: 'manual'\n};\nconst LoadingStrategy = {\n    AUTO: 'auto',\n    LAZY: 'lazy',\n    EAGER: 'eager'\n};\nconst PosterDismissalSource = {\n    INTERACTION: 'interaction'\n};\nconst loadingStatusAnnouncer = new LoadingStatusAnnouncer();\nconst $defaultProgressBarElement = Symbol('defaultProgressBarElement');\nconst $defaultProgressMaskElement = Symbol('defaultProgressMaskElement');\nconst $posterContainerElement = Symbol('posterContainerElement');\nconst $defaultPosterElement = Symbol('defaultPosterElement');\nconst $posterDismissalSource = Symbol('posterDismissalSource');\nconst $showPoster = Symbol('showPoster');\nconst $hidePoster = Symbol('hidePoster');\nconst $modelIsRevealed = Symbol('modelIsRevealed');\nconst $updateProgressBar = Symbol('updateProgressBar');\nconst $lastReportedProgress = Symbol('lastReportedProgress');\nconst $transitioned = Symbol('transitioned');\nconst $ariaLabelCallToAction = Symbol('ariaLabelCallToAction');\nconst $clickHandler = Symbol('clickHandler');\nconst $keydownHandler = Symbol('keydownHandler');\nconst $progressHandler = Symbol('processHandler');\nconst $onClick = Symbol('onClick');\nconst $onKeydown = Symbol('onKeydown');\nconst $onProgress = Symbol('onProgress');\n/**\n * LoadingMixin implements features related to lazy loading, as well as\n * presentation details related to the pre-load / pre-render presentation of a\n * <model-viewer>\n *\n * This mixin implements support for models with DRACO-compressed meshes.\n * The DRACO decoder will be loaded on-demand if a glTF that uses the DRACO mesh\n * compression extension is encountered.\n *\n * By default, the DRACO decoder will be loaded from a Google CDN. It is\n * possible to customize where the decoder is loaded from by defining a global\n * configuration option for `<model-viewer>` like so:\n *\n * ```html\n * <script>\n * ModelViewerElement = self.ModelViewerElement || {};\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration strategy must be performed *before* the\n * first `<model-viewer>` element is created in the browser. The configuration\n * can be done anywhere, but the easiest way to ensure it is done at the right\n * time is to do it in the `<head>` of the HTML document. This is the\n * recommended way to set the location because it is most compatible with\n * scenarios where the `<model-viewer>` library is lazily loaded.\n *\n * If you absolutely have to set the DRACO decoder location *after* the first\n * `<model-viewer>` element is created, you can do it this way:\n *\n * ```html\n * <script>\n * const ModelViewerElement = customElements.get('model-viewer');\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration approach will not work until *after*\n * `<model-viewer>` is defined in the browser. Also note that this configuration\n * *must* be set *before* the first DRACO model is fully loaded.\n *\n * It is recommended that users who intend to take advantage of DRACO mesh\n * compression consider whether or not it is acceptable for their use case to\n * have code side-loaded from a Google CDN. If it is not acceptable, then the\n * location must be customized before loading any DRACO models in order to cause\n * the decoder to be loaded from an alternative, acceptable location.\n */\nconst LoadingMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n    class LoadingModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            /**\n             * A URL pointing to the image to use as a poster in scenarios where the\n             * <model-viewer> is not ready to reveal a rendered model to the viewer.\n             */\n            this.poster = null;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should reveal a model to the viewer.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"interaction\" and \"manual\".\n             */\n            this.reveal = RevealStrategy.AUTO;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should preload a model.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"lazy\" and \"eager\". Auto is equivalent to lazy, which loads the model\n             * when it is near the viewport for reveal = \"auto\", and when interacted\n             * with for reveal = \"interaction\". Eager loads the model immediately.\n             */\n            this.loading = LoadingStrategy.AUTO;\n            this[_a] = false;\n            this[_b] = false;\n            this[_c] = 0;\n            this[_d] = null;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_e] = this.shadowRoot.querySelector('.slot.poster');\n            this[_f] = this.shadowRoot.querySelector('#default-poster');\n            this[_g] = this.shadowRoot.querySelector('#default-progress-bar > .bar');\n            this[_h] = this.shadowRoot.querySelector('#default-progress-bar > .mask');\n            this[_j] = this[$defaultPosterElement].getAttribute('aria-label');\n            this[_k] = () => this[$onClick]();\n            this[_l] = (event) => this[$onKeydown](event);\n            this[_m] = (event) => this[$onProgress](event);\n            this[_o] = throttle((progress) => {\n                const parentNode = this[$defaultProgressBarElement].parentNode;\n                requestAnimationFrame(() => {\n                    this[$defaultProgressMaskElement].style.opacity =\n                        `${(1.0 - progress) * PROGRESS_MASK_BASE_OPACITY}`;\n                    this[$defaultProgressBarElement].style.transform =\n                        `scaleX(${progress})`;\n                    if (progress === 0) {\n                        // NOTE(cdata): We remove and re-append the progress bar in this\n                        // condition so that the progress bar does not appear to\n                        // transition backwards from the right when we reset to 0 (or\n                        // otherwise <1) progress after having already reached 1 progress\n                        // previously.\n                        parentNode.removeChild(this[$defaultProgressBarElement]);\n                        parentNode.appendChild(this[$defaultProgressBarElement]);\n                    }\n                    // NOTE(cdata): IE11 does not properly respect the second parameter\n                    // of classList.toggle, which this implementation originally used.\n                    // @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11865865/\n                    if (progress === 1.0) {\n                        this[$defaultProgressBarElement].classList.add('hide');\n                    }\n                    else {\n                        this[$defaultProgressBarElement].classList.remove('hide');\n                    }\n                });\n            }, PROGRESS_BAR_UPDATE_THRESHOLD);\n            const ModelViewerElement = self.ModelViewerElement || {};\n            const dracoDecoderLocation = ModelViewerElement.dracoDecoderLocation ||\n                DEFAULT_DRACO_DECODER_LOCATION;\n            CachingGLTFLoader.setDRACODecoderLocation(dracoDecoderLocation);\n        }\n        static set dracoDecoderLocation(value) {\n            CachingGLTFLoader.setDRACODecoderLocation(value);\n        }\n        static get dracoDecoderLocation() {\n            return CachingGLTFLoader.getDRACODecoderLocation();\n        }\n        /**\n         * If provided, the callback will be passed each resource URL before a\n         * request is sent. The callback may return the original URL, or a new URL\n         * to override loading behavior. This behavior can be used to load assets\n         * from .ZIP files, drag-and-drop APIs, and Data URIs.\n         */\n        static mapURLs(callback) {\n            Renderer.singleton.loader[$loader].manager.setURLModifier(callback);\n        }\n        /**\n         * Dismisses the poster, causing the model to load and render if\n         * necessary. This is currently effectively the same as interacting with\n         * the poster via user input.\n         */\n        dismissPoster() {\n            if (this[$sceneIsReady]()) {\n                this[$hidePoster]();\n            }\n            else {\n                this[$posterDismissalSource] = PosterDismissalSource.INTERACTION;\n                this[$updateSource]();\n            }\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            // Fired when a user first clicks the model element. Used to\n            // change the visibility of a poster image, or start loading\n            // a model.\n            this[$posterContainerElement].addEventListener('click', this[$clickHandler]);\n            this[$posterContainerElement].addEventListener('keydown', this[$keydownHandler]);\n            this[$progressTracker].addEventListener('progress', this[$progressHandler]);\n            loadingStatusAnnouncer.registerInstance(this);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$posterContainerElement].removeEventListener('click', this[$clickHandler]);\n            this[$posterContainerElement].removeEventListener('keydown', this[$keydownHandler]);\n            this[$progressTracker].removeEventListener('progress', this[$progressHandler]);\n            loadingStatusAnnouncer.unregisterInstance(this);\n        }\n        async updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('poster') && this.poster != null) {\n                this[$defaultPosterElement].style.backgroundImage =\n                    `url(${this.poster})`;\n            }\n            if (changedProperties.has('alt')) {\n                this[$defaultPosterElement].setAttribute('aria-label', `${this[$ariaLabel]}. ${this[$ariaLabelCallToAction]}`);\n            }\n            if (changedProperties.has('reveal') || changedProperties.has('loaded')) {\n                if (!this[$sceneIsReady]()) {\n                    this[$updateSource]();\n                }\n            }\n        }\n        [(_a = $modelIsRevealed, _b = $transitioned, _c = $lastReportedProgress, _d = $posterDismissalSource, _e = $posterContainerElement, _f = $defaultPosterElement, _g = $defaultProgressBarElement, _h = $defaultProgressMaskElement, _j = $ariaLabelCallToAction, _k = $clickHandler, _l = $keydownHandler, _m = $progressHandler, _o = $updateProgressBar, $onClick)]() {\n            if (this.reveal === RevealStrategy.MANUAL) {\n                return;\n            }\n            this.dismissPoster();\n        }\n        [$onKeydown](event) {\n            if (this.reveal === RevealStrategy.MANUAL) {\n                return;\n            }\n            switch (event.keyCode) {\n                // NOTE(cdata): Links and buttons can typically be activated with\n                // both spacebar and enter to produce a synthetic click action\n                case SPACE_KEY:\n                case ENTER_KEY:\n                    this.dismissPoster();\n                    break;\n            }\n        }\n        [$onProgress](event) {\n            const progress = event.detail.totalProgress;\n            this[$lastReportedProgress] =\n                Math.max(progress, this[$lastReportedProgress]);\n            if (progress === 1.0) {\n                this[$updateProgressBar].flush();\n                if (this[$sceneIsReady]() &&\n                    (this[$posterDismissalSource] != null ||\n                        this.reveal === RevealStrategy.AUTO)) {\n                    this[$hidePoster]();\n                }\n            }\n            this[$updateProgressBar](progress);\n            this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress: progress } }));\n        }\n        [$shouldAttemptPreload]() {\n            return !!this.src &&\n                (this[$posterDismissalSource] != null ||\n                    this.loading === LoadingStrategy.EAGER ||\n                    (this.reveal === RevealStrategy.AUTO && this[$isElementInViewport]));\n        }\n        [$sceneIsReady]() {\n            const { src } = this;\n            return !!src && super[$sceneIsReady]() &&\n                this[$lastReportedProgress] === 1.0;\n        }\n        [$showPoster]() {\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            defaultPosterElement.removeAttribute('tabindex');\n            defaultPosterElement.removeAttribute('aria-hidden');\n            posterContainerElement.classList.add('show');\n            const oldVisibility = this.modelIsVisible;\n            this[$modelIsRevealed] = false;\n            this[$announceModelVisibility](oldVisibility);\n            this[$transitioned] = false;\n        }\n        [$hidePoster]() {\n            this[$posterDismissalSource] = null;\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            if (posterContainerElement.classList.contains('show')) {\n                posterContainerElement.classList.remove('show');\n                const oldVisibility = this.modelIsVisible;\n                this[$modelIsRevealed] = true;\n                this[$announceModelVisibility](oldVisibility);\n                // We might need to forward focus to our internal canvas, but that\n                // cannot happen until the poster has completely transitioned away\n                posterContainerElement.addEventListener('transitionend', () => {\n                    requestAnimationFrame(() => {\n                        this[$transitioned] = true;\n                        const root = this.getRootNode();\n                        // If the <model-viewer> is still focused, forward the focus to\n                        // the canvas that has just been revealed\n                        if (root &&\n                            root.activeElement === this) {\n                            this[$userInputElement].focus();\n                        }\n                        // Ensure that the poster is no longer focusable or visible to\n                        // screen readers\n                        defaultPosterElement.setAttribute('aria-hidden', 'true');\n                        defaultPosterElement.tabIndex = -1;\n                        this.dispatchEvent(new CustomEvent('poster-dismissed'));\n                    });\n                }, { once: true });\n            }\n        }\n        [$getModelIsVisible]() {\n            return super[$getModelIsVisible]() && this[$modelIsRevealed];\n        }\n        [$hasTransitioned]() {\n            return super[$hasTransitioned]() && this[$transitioned];\n        }\n        async [$updateSource]() {\n            this[$lastReportedProgress] = 0;\n            if (this[$scene].model.currentGLTF == null || this.src == null ||\n                !this[$shouldAttemptPreload]()) {\n                // Don't show the poster when switching models.\n                this[$showPoster]();\n            }\n            await super[$updateSource]();\n        }\n    }\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"poster\", void 0);\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"reveal\", void 0);\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"loading\", void 0);\n    return LoadingModelViewerElement;\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The protocol between 3DOM execution contexts is strictly defined.\n * Only specific types of messages are allowed, and their types are\n * all included in the ThreeDOMMessageType map.\n */\nconst ThreeDOMMessageType = {\n    // === Host -> Scene Graph ===\n    // Used when the host execution context and scene graph execution context\n    // are negotiating a connection\n    HANDSHAKE: 1,\n    // A message that indicates that a custom script is meant to be imported\n    // into the scene graph execution context\n    IMPORT_SCRIPT: 2,\n    // A notification from the host execution context that the main Model has\n    // changed, including the sparse, serialized scene graph of the new Model\n    MODEL_CHANGE: 3,\n    // A notification that confirms or denies a request from the scene graph\n    // context to mutate the scene graph\n    MUTATION_RESULT: 4,\n    // === Scene Graph => Host ===\n    // Notification sent to the host execution context to indicate that the\n    // scene graph execution context has finished initializing\n    CONTEXT_INITIALIZED: 5,\n    // A request from the scene graph execution context to mutate some detail\n    // of the backing host scene graph\n    MUTATE: 6\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $ownerModel = Symbol('ownerModel');\n/**\n * The basic implementation for all 3DOM scene graph participants.\n * Scene graph nodes are distinguished by their \"owner\" Model. All scene\n * graph nodes have an owner Model associated with them except for the\n * sole Model in the scene graph, whose ownerModel property is not defined.\n */\nclass ThreeDOMElement {\n    constructor(kernel) {\n        if (kernel == null) {\n            throw new Error('Illegal constructor');\n        }\n        this[$ownerModel] = kernel.model;\n    }\n    /**\n     * The Model of provenance for this scene graph element, or undefined if\n     * element is itself a Model.\n     */\n    get ownerModel() {\n        return this[$ownerModel];\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $kernel = Symbol('kernel');\nconst $uri = Symbol('uri');\nconst $name = Symbol('name');\nclass Image extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[$kernel] = kernel;\n        this[$uri] = serialized.uri || null;\n        this[$name] = serialized.name;\n    }\n    get name() {\n        return this[$name];\n    }\n    get type() {\n        return this.uri != null ? 'external' : 'embedded';\n    }\n    get uri() {\n        return this[$uri];\n    }\n    async setURI(uri) {\n        await this[$kernel].mutate(this, 'uri', uri);\n        this[$uri] = uri;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$f, _b$d, _c$6;\nconst $pbrMetallicRoughness = Symbol('pbrMetallicRoughness');\nconst $normalTexture = Symbol('normalTexture');\nconst $occlusionTexture = Symbol('occlusionTexture');\nconst $emissiveTexture = Symbol('emissiveTexture');\nconst $kernel$1 = Symbol('kernel');\nconst $name$1 = Symbol('name');\n/**\n * A Material represents a live material in the backing scene graph. Its\n * primary purpose is to give the user write access to discrete properties\n * (for example, the base color factor) of the backing material.\n */\nclass Material$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$f] = null;\n        this[_b$d] = null;\n        this[_c$6] = null;\n        this[$kernel$1] = kernel;\n        if (serialized.name != null) {\n            this[$name$1] = serialized.name;\n        }\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = serialized;\n        this[$pbrMetallicRoughness] =\n            kernel.deserialize('pbr-metallic-roughness', pbrMetallicRoughness);\n        if (normalTexture != null) {\n            this[$normalTexture] = kernel.deserialize('texture-info', normalTexture);\n        }\n        if (occlusionTexture != null) {\n            this[$occlusionTexture] =\n                kernel.deserialize('texture-info', occlusionTexture);\n        }\n        if (emissiveTexture != null) {\n            this[$emissiveTexture] =\n                kernel.deserialize('texture-info', emissiveTexture);\n        }\n    }\n    /**\n     * The PBR properties that are assigned to this material, if any.\n     */\n    get pbrMetallicRoughness() {\n        return this[$pbrMetallicRoughness];\n    }\n    get normalTexture() {\n        return this[$normalTexture];\n    }\n    get occlusionTexture() {\n        return this[$occlusionTexture];\n    }\n    get emissiveTexture() {\n        return this[$emissiveTexture];\n    }\n    /**\n     * The name of the material. Note that names are optional and not\n     * guaranteed to be unique.\n     */\n    get name() {\n        return this[$name$1];\n    }\n}\n_a$f = $normalTexture, _b$d = $occlusionTexture, _c$6 = $emissiveTexture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$g;\nconst $materials = Symbol('material');\nconst $kernel$2 = Symbol('kernel');\n/**\n * A Model is the root element of a 3DOM scene graph. It is considered the\n * element of provenance for all other elements that participate in the same\n * graph. All other elements in the graph can be accessed in from the Model\n * in some fashion.\n */\nclass Model$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$g] = Object.freeze([]);\n        this[$kernel$2] = kernel;\n        for (const material of serialized.materials) {\n            this[$kernel$2].deserialize('material', material);\n        }\n    }\n    /**\n     * The set of Material elements in the graph, in sparse traversal order.\n     * Note that this set will include any Materials that are not part of the\n     * currently activate scene.\n     *\n     * TODO(#1002): This value needs to be sensitive to scene graph order\n     */\n    get materials() {\n        return this[$kernel$2].getElementsByType('material');\n    }\n    /**\n     * A Model has no owner model; it owns itself.\n     */\n    get ownerModel() {\n        return this;\n    }\n}\n_a$g = $materials;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$h, _b$e;\nconst $kernel$3 = Symbol('kernel');\nconst $baseColorFactor = Symbol('baseColorFactor');\nconst $baseColorTexture = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture = Symbol('metallicRoughnessTexture');\nconst $metallicFactor = Symbol('metallicFactor');\nconst $roughnessFactor = Symbol('roughnessFactor');\n/**\n * PBRMetallicRoughness exposes the PBR properties for a given Material.\n */\nclass PBRMetallicRoughness extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$h] = null;\n        this[_b$e] = null;\n        this[$kernel$3] = kernel;\n        this[$baseColorFactor] = Object.freeze(serialized.baseColorFactor);\n        this[$metallicFactor] = serialized.metallicFactor;\n        this[$roughnessFactor] = serialized.roughnessFactor;\n        const { baseColorTexture, metallicRoughnessTexture } = serialized;\n        if (baseColorTexture != null) {\n            this[$baseColorTexture] =\n                kernel.deserialize('texture-info', baseColorTexture);\n        }\n        if (metallicRoughnessTexture != null) {\n            this[$metallicRoughnessTexture] =\n                kernel.deserialize('texture-info', metallicRoughnessTexture);\n        }\n    }\n    /**\n     * The base color factor of the material in RGBA format.\n     */\n    get baseColorFactor() {\n        return this[$baseColorFactor];\n    }\n    /**\n     * The metalness factor of the material in range [0,1].\n     */\n    get metallicFactor() {\n        return this[$metallicFactor];\n    }\n    /**\n     * The roughness factor of the material in range [0,1].\n     */\n    get roughnessFactor() {\n        return this[$roughnessFactor];\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture];\n    }\n    /**\n     * Set the base color factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setBaseColorFactor(color) {\n        await this[$kernel$3].mutate(this, 'baseColorFactor', color);\n        this[$baseColorFactor] = Object.freeze(color);\n    }\n    /**\n     * Set the metallic factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setMetallicFactor(factor) {\n        await this[$kernel$3].mutate(this, 'metallicFactor', factor);\n        this[$metallicFactor] = factor;\n    }\n    /**\n     * Set the roughness factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setRoughnessFactor(factor) {\n        await this[$kernel$3].mutate(this, 'roughnessFactor', factor);\n        this[$roughnessFactor] = factor;\n    }\n}\n_a$h = $baseColorTexture, _b$e = $metallicRoughnessTexture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$i, _b$f;\nconst $kernel$4 = Symbol('kernel');\nconst $minFilter = Symbol('minFilter');\nconst $magFilter = Symbol('magFilter');\nconst $wrapS = Symbol('wrapS');\nconst $wrapT = Symbol('wrapT');\nconst $name$2 = Symbol('name');\nclass Sampler extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$i] = null;\n        this[_b$f] = null;\n        this[$kernel$4] = kernel;\n        this[$name$2] = serialized.name;\n        this[$minFilter] = serialized.minFilter || null;\n        this[$magFilter] = serialized.magFilter || null;\n        this[$wrapS] = serialized.wrapS || 10497;\n        this[$wrapT] = serialized.wrapT || 10497;\n    }\n    get name() {\n        return this[$name$2];\n    }\n    get minFilter() {\n        return this[$minFilter];\n    }\n    get magFilter() {\n        return this[$magFilter];\n    }\n    get wrapS() {\n        return this[$wrapS];\n    }\n    get wrapT() {\n        return this[$wrapT];\n    }\n    async setMinFilter(filter) {\n        await this[$kernel$4].mutate(this, 'minFilter', filter);\n        this[$minFilter] = filter;\n    }\n    async setMagFilter(filter) {\n        await this[$kernel$4].mutate(this, 'magFilter', filter);\n        this[$magFilter] = filter;\n    }\n    async setWrapS(mode) {\n        await this[$kernel$4].mutate(this, 'wrapS', mode);\n        this[$wrapS] = mode;\n    }\n    async setWrapT(mode) {\n        await this[$kernel$4].mutate(this, 'wrapT', mode);\n        this[$wrapT] = mode;\n    }\n}\n_a$i = $minFilter, _b$f = $magFilter;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$j;\nconst $kernel$5 = Symbol('kernel');\nconst $texture = Symbol('texture');\nclass TextureInfo extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$j] = null;\n        this[$kernel$5] = kernel;\n        const { texture } = serialized;\n        if (texture != null) {\n            this[$texture] = kernel.deserialize('texture', texture);\n        }\n    }\n    get texture() {\n        return this[$texture];\n    }\n    async setTexture(texture) {\n        await this[$kernel$5].mutate(this, 'texture', texture);\n        this[$texture] = texture;\n    }\n}\n_a$j = $texture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$k, _b$g;\nconst $kernel$6 = Symbol('kernel');\nconst $source = Symbol('source');\nconst $sampler = Symbol('sampler');\nconst $name$3 = Symbol('name');\nclass Texture$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$k] = null;\n        this[_b$g] = null;\n        this[$kernel$6] = kernel;\n        const { sampler, source, name } = serialized;\n        this[$name$3] = name;\n        if (sampler != null) {\n            this[$sampler] = kernel.deserialize('sampler', sampler);\n        }\n        if (source != null) {\n            this[$source] = kernel.deserialize('image', source);\n        }\n    }\n    get name() {\n        return this[$name$3];\n    }\n    get sampler() {\n        return this[$sampler];\n    }\n    get source() {\n        return this[$source];\n    }\n    async setSampler(sampler) {\n        await this[$kernel$6].mutate(this, 'sampler', sampler);\n        this[$sampler] = sampler;\n    }\n    async setSource(image) {\n        await this[$kernel$6].mutate(this, 'source', image);\n        this[$source] = image;\n    }\n}\n_a$k = $source, _b$g = $sampler;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$l, _b$h, _c$7, _d$5, _e$3, _f$3;\nconst ThreeDOMElementMap = {\n    'model': Model$1,\n    'material': Material$1,\n    'pbr-metallic-roughness': PBRMetallicRoughness,\n    'image': Image,\n    'sampler': Sampler,\n    'texture': Texture$1,\n    'texture-info': TextureInfo\n};\nconst $onMessageEvent = Symbol('onMessageEvent');\nconst $messageEventHandler = Symbol('messageEventHandler');\nconst $port = Symbol('port');\nconst $model = Symbol('model');\nconst $elementsByLocalId = Symbol('elementsByLocalId');\nconst $localIdsByElement = Symbol('localIdsByElement');\nconst $elementsByType = Symbol('elementsByType');\nconst $pendingMutations = Symbol('pendingMutations');\nconst $nextMutationId = Symbol('nextMutationId');\n/**\n * A ModelKernel is the core business logic implementation for a distinct\n * Model that has been exposed to a script execution context. The ModelKernel\n * is an internal detail, and should never be explicitly exposed to users of\n * a Model.\n *\n * The ModelKernel primarily handles deserializing scene graph elements, and\n * communicating mutations from the 3DOM execution context to the host\n * execution context where the backing scene graph lives.\n *\n * A ModelKernel also maintains a comprehensive map of elements by type to\n * assist scene graph elements in querying for their contemporaries.\n */\nclass ModelKernel {\n    constructor(port, serialized) {\n        this[_a$l] = new Map();\n        this[_b$h] = new Map();\n        this[_c$7] = new Map();\n        this[_d$5] = (event) => this[$onMessageEvent](event);\n        this[_e$3] = new Map();\n        this[_f$3] = 0;\n        const types = new Array('model', 'material', 'pbr-metallic-roughness', 'sampler', 'image', 'texture', 'texture-info');\n        for (const type of types) {\n            this[$elementsByType].set(type, new Set());\n        }\n        this[$port] = port;\n        this[$port].addEventListener('message', this[$messageEventHandler]);\n        this[$port].start();\n        this[$model] = this.deserialize('model', serialized);\n    }\n    /**\n     * The root scene graph element, a Model, that is the entrypoint for the\n     * entire scene graph that is backed by this kernel.\n     */\n    get model() {\n        return this[$model];\n    }\n    /**\n     * Mutate a property of a property of a given scene graph element. All\n     * direct mutations of the scene graph are considered asynchronous. This\n     * method returns a Promise that resolves when the mutation has been\n     * successfully applied to the backing scene graph, and rejects if the\n     * mutation failed or is otherwise not allowed.\n     *\n     * TODO(#1006): How to validate values?\n     */\n    async mutate(element, property, value) {\n        if (!this[$localIdsByElement].has(element)) {\n            throw new Error('Cannot mutate unknown element');\n        }\n        const id = this[$localIdsByElement].get(element);\n        if (value instanceof ThreeDOMElement) {\n            value = this[$localIdsByElement].get(value);\n        }\n        return new Promise((resolve, reject) => {\n            const mutationId = this[$nextMutationId]++;\n            // TODO(#1006): Validate mutations before sending to host context:\n            this[$port].postMessage({\n                type: ThreeDOMMessageType.MUTATE,\n                id,\n                property,\n                value,\n                mutationId,\n            });\n            // TODO(#1011): Add timeout to reject this mutation:\n            this[$pendingMutations].set(mutationId, {\n                resolve,\n                reject,\n            });\n        });\n    }\n    /**\n     * Deserializes a JSON representation of a scene graph element into a live\n     * element that is backed by this ModelKernel.\n     */\n    deserialize(type, serialized) {\n        const { id } = serialized;\n        // TODO: Add test to ensure that we don't double-deserialize elements\n        if (this[$elementsByLocalId].has(id)) {\n            return this[$elementsByLocalId].get(id);\n        }\n        const ElementConstructor = ThreeDOMElementMap[type];\n        if (ElementConstructor == null) {\n            throw new Error(`Cannot deserialize unknown type: ${type}`);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const element = new ElementConstructor(this, serialized);\n        this[$elementsByLocalId].set(id, element);\n        this[$localIdsByElement].set(element, id);\n        // We know that the all accepted types have been pre-populated in the\n        // [$elementsByType] map:\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this[$elementsByType].get(type).add(element);\n        return element;\n    }\n    /**\n     * Look up all scene graph elements given a type string. Type strings\n     * are lower-cased, hyphenated versions of the constructor names of their\n     * corresponding classes. For example, a query for 'pbr-metallic-roughness'\n     * element types will yield the list of PBRMetallicRoughness elements in\n     * sparse tree order.\n     */\n    getElementsByType(type) {\n        if (!this[$elementsByType].has(type)) {\n            return [];\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return Array.from(this[$elementsByType].get(type));\n    }\n    /**\n     * Deactivate the ModelKernel. This has the effect of blocking all future\n     * mutations to the scene graph. Once deactivated, a ModelKernel cannot be\n     * reactivated.\n     *\n     * The ModelKernel should be deactivated before it is disposed of, or else\n     * it will leak in memory.\n     */\n    deactivate() {\n        this[$port].close();\n        this[$port].removeEventListener('message', this[$messageEventHandler]);\n    }\n    [(_a$l = $elementsByLocalId, _b$h = $localIdsByElement, _c$7 = $elementsByType, _d$5 = $messageEventHandler, _e$3 = $pendingMutations, _f$3 = $nextMutationId, $onMessageEvent)](event) {\n        const { data } = event;\n        switch (data && data.type) {\n            case ThreeDOMMessageType.MUTATION_RESULT: {\n                const message = data;\n                const { applied, mutationId } = message;\n                const pendingMutation = this[$pendingMutations].get(mutationId);\n                this[$pendingMutations].delete(mutationId);\n                if (pendingMutation != null) {\n                    applied ? pendingMutation.resolve() : pendingMutation.reject();\n                }\n                break;\n            }\n        }\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$m;\nconst $modelGraft = Symbol('modelGraft');\nconst $port$1 = Symbol('port');\nconst $messageEventHandler$1 = Symbol('messageEventHandler');\nconst $onMessageEvent$1 = Symbol('onMessageEvent');\n/**\n * A ModelGraftManipulator is an internal construct intended to consolidate\n * any mutations that operate on the backing scene graph. It can be thought\n * of as a host execution context counterpart to the ModelKernel in the scene\n * graph execution context.\n */\nclass ModelGraftManipulator {\n    constructor(modelGraft, port) {\n        this[_a$m] = (event) => this[$onMessageEvent$1](event);\n        this[$modelGraft] = modelGraft;\n        this[$port$1] = port;\n        this[$port$1].addEventListener('message', this[$messageEventHandler$1]);\n        this[$port$1].start();\n    }\n    /**\n     * Clean up internal state so that the ModelGraftManipulator can be properly\n     * garbage collected.\n     */\n    dispose() {\n        this[$port$1].removeEventListener('message', this[$messageEventHandler$1]);\n        this[$port$1].close();\n    }\n    async [(_a$m = $messageEventHandler$1, $onMessageEvent$1)](event) {\n        const { data } = event;\n        if (data && data.type) {\n            if (data.type === ThreeDOMMessageType.MUTATE) {\n                let applied = false;\n                const { mutationId } = data;\n                try {\n                    await this[$modelGraft].mutate(data.id, data.property, data.value);\n                    applied = true;\n                }\n                finally {\n                    this[$port$1].postMessage({ type: ThreeDOMMessageType.MUTATION_RESULT, applied, mutationId });\n                }\n            }\n        }\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Produces a \"locally\" unique ID. This ID is only guaranteed to be unique\n * over the lifetime of the function and in the current execution context.\n */\nconst getLocallyUniqueId = (() => {\n    let id = 0;\n    return () => id++;\n})();\nconst $callbacks = Symbol('callbacks');\nconst $visitMesh = Symbol('visitMesh');\nconst $visitElement = Symbol('visitElement');\nconst $visitNode = Symbol('visitNode');\nconst $visitScene = Symbol('visitScene');\nconst $visitMaterial = Symbol('visitMaterial');\n/**\n * GLTFTreeVisitor implements a deterministic traversal order of a valid,\n * deserialized glTF 2.0 model. It supports selective element visitation via\n * callbacks configured based on element type. For example, to visit all\n * materials in all scenes in a glTF:\n *\n * ```javascript\n * const visitor = new GLTFTreeVisitor({\n *   material: (material, index, hierarchy) => {\n *     // material is a glTF 2.0 Material\n *     // index is the index of material in gltf.materials\n *     // hierarchy includes ancestors of material in the glTF\n *   }\n * });\n *\n * visitor.visit(someInMemoryGLTF, { allScenes: true });\n * ```\n *\n * The traversal order of the visitor is pre-order, depth-first.\n *\n * Note that the traversal order is not guaranteed to correspond to the\n * index of a given element in any way. Rather, traversal order is based\n * on the hierarchical order of the scene graph.\n */\nclass GLTFTreeVisitor {\n    constructor(callbacks) {\n        this[$callbacks] = callbacks;\n    }\n    /**\n     * Visit a given in-memory glTF via the configured callbacks of this visitor.\n     * Optionally, all scenes may be visited (as opposed to just the active one).\n     * Sparse traversal can also be specified, in which case elements that\n     * re-appear multiple times in the scene graph will only be visited once.\n     */\n    visit(gltf, options = {}) {\n        const allScenes = !!options.allScenes;\n        const sparse = !!options.sparse;\n        const scenes = allScenes ?\n            gltf.scenes || [] :\n            (gltf.scenes && gltf.scene != null) ? [gltf.scenes[gltf.scene]] : [];\n        const state = { hierarchy: [], visited: new Set(), sparse, gltf };\n        for (const scene of scenes) {\n            this[$visitScene](gltf.scenes.indexOf(scene), state);\n        }\n    }\n    [$visitElement](index, elementList, state, visit, traverse) {\n        if (elementList == null) {\n            return;\n        }\n        const element = elementList[index];\n        const { sparse, hierarchy, visited } = state;\n        if (element == null) {\n            return;\n        }\n        if (sparse && visited.has(element)) {\n            return;\n        }\n        visited.add(element);\n        hierarchy.push(element);\n        if (visit != null) {\n            visit(element, index, hierarchy);\n        }\n        if (traverse != null) {\n            traverse(element);\n        }\n        hierarchy.pop();\n    }\n    [$visitScene](index, state) {\n        const { gltf } = state;\n        const { scene: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.scenes, state, visit, (scene) => {\n            // A scene is not required to have a list of nodes\n            if (scene.nodes == null) {\n                return;\n            }\n            for (const nodeIndex of scene.nodes) {\n                this[$visitNode](nodeIndex, state);\n            }\n        });\n    }\n    [$visitNode](index, state) {\n        const { gltf } = state;\n        const { node: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.nodes, state, visit, (node) => {\n            if (node.mesh != null) {\n                this[$visitMesh](node.mesh, state);\n            }\n            if (node.children != null) {\n                for (const childNodeIndex of node.children) {\n                    this[$visitNode](childNodeIndex, state);\n                }\n            }\n        });\n    }\n    [$visitMesh](index, state) {\n        const { gltf } = state;\n        const { mesh: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.meshes, state, visit, (mesh) => {\n            for (const primitive of mesh.primitives) {\n                if (primitive.material != null) {\n                    this[$visitMaterial](primitive.material, state);\n                }\n            }\n        });\n    }\n    [$visitMaterial](index, state) {\n        const { gltf } = state;\n        const { material: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.materials, state, visit);\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$n;\nconst $correlatedObjects = Symbol('correlatedObjects');\nconst $sourceObject = Symbol('sourceObject');\nconst $graft = Symbol('graft');\nconst $id = Symbol('id');\n/**\n * A SerializableThreeDOMElement is the common primitive of all scene graph\n * elements that have been facaded in the host execution context. It adds\n * a common interface to these elements in support of convenient\n * serializability.\n */\nclass ThreeDOMElement$1 {\n    constructor(graft, element, correlatedObjects = null) {\n        this[_a$n] = getLocallyUniqueId();\n        this[$graft] = graft;\n        this[$sourceObject] = element;\n        this[$correlatedObjects] = correlatedObjects;\n        graft.adopt(this);\n    }\n    /**\n     * The Model of provenance for this scene graph element.\n     */\n    get ownerModel() {\n        return this[$graft].model;\n    }\n    /**\n     * The unique ID that marks this element. In generally, an ID should only be\n     * considered unique to the element in the context of its scene graph. These\n     * IDs are not guaranteed to be stable across script executions.\n     */\n    get internalID() {\n        return this[$id];\n    }\n    /**\n     * Some (but not all) scene graph elements may have an optional name. The\n     * Object3D.prototype.name property is sometimes auto-generated by Three.js.\n     * We only want to expose a name that is set in the source glTF, so Three.js\n     * generated names are ignored.\n     */\n    get name() {\n        return this[$sourceObject].name || null;\n    }\n    /**\n     * The backing Three.js scene graph construct for this element.\n     */\n    get correlatedObjects() {\n        return this[$correlatedObjects];\n    }\n    /**\n     * The canonical GLTF or GLTFElement represented by this facade.\n     */\n    get sourceObject() {\n        return this[$sourceObject];\n    }\n    /**\n     * Mutate a property of the scene graph element. Returns a promise that\n     * resolves when the mutation has been successfully applied.\n     */\n    mutate(_property, _value) {\n        throw new Error('Mutation not implemented for this element');\n    }\n    /**\n     * Serialize the element in order to share it with a worker context.\n     */\n    toJSON() {\n        const serialized = { id: this[$id] };\n        const { name } = this;\n        if (name != null) {\n            serialized.name = name;\n        }\n        return serialized;\n    }\n}\n_a$n = $id;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$o;\nconst loader = new ImageLoader();\nconst $threeTextures = Symbol('threeTextures');\nconst $bufferViewImages = Symbol('bufferViewImages');\n/**\n * Image facade implementation for Three.js textures\n */\nclass Image$1 extends ThreeDOMElement$1 {\n    constructor(graft, image, correlatedTextures) {\n        super(graft, image, correlatedTextures);\n        this[_a$o] = new WeakMap();\n        if (image.bufferView != null) {\n            for (const texture of correlatedTextures) {\n                this[$bufferViewImages].set(texture, texture.image);\n            }\n        }\n    }\n    get [$threeTextures]() {\n        return this[$correlatedObjects];\n    }\n    async mutate(property, value) {\n        let image = null;\n        if (property !== 'uri') {\n            throw new Error(`Cannot configure property \"${property}\" on Image`);\n        }\n        if (value != null) {\n            image = await new Promise((resolve, reject) => {\n                loader.load(value, resolve, undefined, reject);\n            });\n        }\n        for (const texture of this[$threeTextures]) {\n            // If the URI is set to null but the Image had an associated buffer view\n            // (this would happen if it started out as embedded), then fall back to\n            // the cached object URL created by GLTFLoader:\n            if (image == null &&\n                this.sourceObject.bufferView != null) {\n                texture.image = this[$bufferViewImages].get(texture);\n            }\n            else {\n                texture.image = image;\n            }\n            texture.needsUpdate = true;\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { uri } = this.sourceObject;\n        if (uri != null) {\n            serialized.uri = uri;\n        }\n        return serialized;\n    }\n}\n_a$o = $bufferViewImages;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst isMinFilter = (() => {\n    const minFilterValues = [9728, 9729, 9984, 9985, 9986, 9987];\n    return (value) => minFilterValues.indexOf(value) > -1;\n})();\nconst isMagFilter = (() => {\n    const magFilterValues = [9728, 9729];\n    return (value) => magFilterValues.indexOf(value) > -1;\n})();\nconst isWrapMode = (() => {\n    const wrapModes = [33071, 33648, 10497];\n    return (value) => wrapModes.indexOf(value) > -1;\n})();\nconst isValidSamplerValue = (property, value) => {\n    switch (property) {\n        case 'minFilter':\n            return isMinFilter(value);\n        case 'magFilter':\n            return isMagFilter(value);\n        case 'wrapS':\n        case 'wrapT':\n            return isWrapMode(value);\n        default:\n            throw new Error(`Cannot configure property \"${property}\" on Sampler`);\n    }\n};\n// These defaults represent a convergence of glTF defaults for wrap mode and\n// Three.js defaults for filters. Per glTF 2.0 spec, a renderer may choose its\n// own defaults for filters.\n// @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#reference-sampler\n// @see https://threejs.org/docs/#api/en/textures/Texture\nconst defaultValues = {\n    minFilter: 9987,\n    magFilter: 9729,\n    wrapS: 10497,\n    wrapT: 10497,\n};\nconst $threeTextures$1 = Symbol('threeTextures');\n/**\n * Sampler facade implementation for Three.js textures\n */\nclass Sampler$1 extends ThreeDOMElement$1 {\n    get [$threeTextures$1]() {\n        return this[$correlatedObjects];\n    }\n    constructor(graft, sampler, correlatedTextures) {\n        super(graft, sampler, correlatedTextures);\n    }\n    async mutate(property, value) {\n        const sampler = this.sourceObject;\n        if (value != null) {\n            if (isValidSamplerValue(property, value)) {\n                sampler[property] = value;\n                for (const texture of this[$threeTextures$1]) {\n                    texture[property] = value;\n                    texture.needsUpdate = true;\n                }\n            }\n        }\n        else if (property in sampler) {\n            delete sampler[property];\n            for (const texture of this[$threeTextures$1]) {\n                texture[property] = defaultValues[property];\n                texture.needsUpdate = true;\n            }\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { minFilter, magFilter, wrapS, wrapT } = this.sourceObject;\n        if (minFilter != null) {\n            serialized.minFilter = minFilter;\n        }\n        if (magFilter != null) {\n            serialized.magFilter = magFilter;\n        }\n        if (wrapS !== 10497) {\n            serialized.wrapS = wrapS;\n        }\n        if (wrapT !== 10497) {\n            serialized.wrapT = wrapT;\n        }\n        return serialized;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$p, _b$i;\nconst $source$1 = Symbol('source');\nconst $sampler$1 = Symbol('sampler');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Texture$2 extends ThreeDOMElement$1 {\n    constructor(graft, texture, correlatedTextures) {\n        super(graft, texture, correlatedTextures);\n        this[_a$p] = null;\n        this[_b$i] = null;\n        const glTF = graft.correlatedSceneGraph.gltf;\n        const { sampler: samplerIndex, source: imageIndex } = texture;\n        if (samplerIndex != null) {\n            const sampler = glTF.samplers && glTF.samplers[samplerIndex];\n            if (sampler != null) {\n                this[$sampler$1] = new Sampler$1(graft, sampler, correlatedTextures);\n            }\n        }\n        if (imageIndex != null) {\n            const image = glTF.images && glTF.images[imageIndex];\n            if (image != null) {\n                this[$source$1] = new Image$1(graft, image, correlatedTextures);\n            }\n        }\n    }\n    get sampler() {\n        return this[$sampler$1];\n    }\n    get source() {\n        return this[$source$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { sampler, source } = this;\n        if (sampler != null) {\n            serialized.sampler = sampler.toJSON();\n        }\n        if (source != null) {\n            serialized.source = source.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$p = $source$1, _b$i = $sampler$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$q;\nconst $texture$1 = Symbol('texture');\n/**\n * TextureInfo facade implementation for Three.js materials\n */\nclass TextureInfo$1 extends ThreeDOMElement$1 {\n    constructor(graft, textureInfo, correlatedTextures) {\n        super(graft, textureInfo, correlatedTextures);\n        this[_a$q] = null;\n        const glTF = graft.correlatedSceneGraph.gltf;\n        const { index: textureIndex } = textureInfo;\n        const texture = textureIndex != null && glTF.textures != null ?\n            glTF.textures[textureIndex] :\n            null;\n        if (texture != null) {\n            this[$texture$1] = new Texture$2(graft, texture, correlatedTextures);\n        }\n    }\n    get texture() {\n        return this[$texture$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { texture } = this;\n        if (texture != null) {\n            serialized.texture = texture.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$q = $texture$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$r, _b$j;\nconst $threeMaterials = Symbol('threeMaterials');\nconst $baseColorTexture$1 = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture$1 = Symbol('metallicRoughnessTexture');\n/**\n * PBR material properties facade implementation for Three.js materials\n */\nclass PBRMetallicRoughness$1 extends ThreeDOMElement$1 {\n    constructor(graft, pbrMetallicRoughness, correlatedMaterials) {\n        super(graft, pbrMetallicRoughness, correlatedMaterials);\n        this[_a$r] = null;\n        this[_b$j] = null;\n        const { baseColorTexture, metallicRoughnessTexture } = pbrMetallicRoughness;\n        const baseColorTextures = new Set();\n        const metallicRoughnessTextures = new Set();\n        for (const material of correlatedMaterials) {\n            if (baseColorTexture != null && material.map != null) {\n                baseColorTextures.add(material.map);\n            }\n            // NOTE: GLTFLoader users the same texture for metalnessMap and\n            // roughnessMap in this case\n            // @see https://github.com/mrdoob/three.js/blob/b4473c25816df4a09405c7d887d5c418ef47ee76/examples/js/loaders/GLTFLoader.js#L2173-L2174\n            if (metallicRoughnessTexture != null && material.metalnessMap != null) {\n                metallicRoughnessTextures.add(material.metalnessMap);\n            }\n        }\n        if (baseColorTextures.size > 0) {\n            this[$baseColorTexture$1] =\n                new TextureInfo$1(graft, baseColorTexture, baseColorTextures);\n        }\n        if (metallicRoughnessTextures.size > 0) {\n            this[$metallicRoughnessTexture$1] = new TextureInfo$1(graft, metallicRoughnessTexture, metallicRoughnessTextures);\n        }\n    }\n    get [(_a$r = $baseColorTexture$1, _b$j = $metallicRoughnessTexture$1, $threeMaterials)]() {\n        return this[$correlatedObjects];\n    }\n    get baseColorFactor() {\n        return this.sourceObject.baseColorFactor ||\n            [1, 1, 1, 1];\n    }\n    get metallicFactor() {\n        return this.sourceObject.metallicFactor || 0;\n    }\n    get roughnessFactor() {\n        return this.sourceObject.roughnessFactor || 0;\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture$1];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture$1];\n    }\n    async mutate(property, value) {\n        if (!['baseColorFactor', 'metallicFactor', 'roughnessFactor'].includes(property)) {\n            throw new Error(`Cannot mutate ${property} on PBRMetallicRoughness`);\n        }\n        switch (property) {\n            case 'baseColorFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.color.fromArray(value);\n                    material.opacity = value[3];\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    if (value === 1 && value === 1 &&\n                        value === 1 && value === 1) {\n                        delete pbrMetallicRoughness.baseColorFactor;\n                    }\n                    else {\n                        pbrMetallicRoughness.baseColorFactor = value;\n                    }\n                }\n                break;\n            case 'metallicFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.metalness = value;\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    pbrMetallicRoughness.metallicFactor = value;\n                }\n                break;\n            case 'roughnessFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.roughness = value;\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    pbrMetallicRoughness.roughnessFactor = value;\n                }\n                break;\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { baseColorTexture, metallicRoughnessTexture, baseColorFactor, roughnessFactor, metallicFactor } = this;\n        if (baseColorTexture != null) {\n            serialized.baseColorTexture = baseColorTexture.toJSON();\n        }\n        if (baseColorFactor != null) {\n            serialized.baseColorFactor = baseColorFactor;\n        }\n        if (metallicFactor != null) {\n            serialized.metallicFactor = metallicFactor;\n        }\n        if (roughnessFactor != null) {\n            serialized.roughnessFactor = roughnessFactor;\n        }\n        if (metallicRoughnessTexture != null) {\n            serialized.metallicRoughnessTexture = metallicRoughnessTexture.toJSON();\n        }\n        return serialized;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$s, _b$k, _c$8, _d$6;\nconst $pbrMetallicRoughness$1 = Symbol('pbrMetallicRoughness');\nconst $normalTexture$1 = Symbol('normalTexture');\nconst $occlusionTexture$1 = Symbol('occlusionTexture');\nconst $emissiveTexture$1 = Symbol('emissiveTexture');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Material$2 extends ThreeDOMElement$1 {\n    constructor(graft, material, correlatedMaterials) {\n        super(graft, material, correlatedMaterials);\n        this[_a$s] = null;\n        this[_b$k] = null;\n        this[_c$8] = null;\n        this[_d$6] = null;\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = material;\n        if (pbrMetallicRoughness != null) {\n            this[$pbrMetallicRoughness$1] = new PBRMetallicRoughness$1(graft, pbrMetallicRoughness, correlatedMaterials);\n        }\n        const normalTextures = new Set();\n        const occlusionTextures = new Set();\n        const emissiveTextures = new Set();\n        for (const material of correlatedMaterials) {\n            const { normalMap, aoMap, emissiveMap } = material;\n            if (normalTexture != null && normalMap != null) {\n                normalTextures.add(normalMap);\n            }\n            if (occlusionTexture != null && aoMap != null) {\n                occlusionTextures.add(aoMap);\n            }\n            if (emissiveTexture != null && emissiveMap != null) {\n                emissiveTextures.add(emissiveMap);\n            }\n        }\n        if (normalTextures.size > 0) {\n            this[$normalTexture$1] =\n                new TextureInfo$1(graft, normalTexture, normalTextures);\n        }\n        if (occlusionTextures.size > 0) {\n            this[$occlusionTexture$1] =\n                new TextureInfo$1(graft, occlusionTexture, occlusionTextures);\n        }\n        if (emissiveTextures.size > 0) {\n            this[$emissiveTexture$1] =\n                new TextureInfo$1(graft, emissiveTexture, emissiveTextures);\n        }\n    }\n    get pbrMetallicRoughness() {\n        return this[$pbrMetallicRoughness$1];\n    }\n    get normalTexture() {\n        return this[$normalTexture$1];\n    }\n    get occlusionTexture() {\n        return this[$occlusionTexture$1];\n    }\n    get emissiveTexture() {\n        return this[$emissiveTexture$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = this;\n        if (pbrMetallicRoughness != null) {\n            serialized.pbrMetallicRoughness = pbrMetallicRoughness.toJSON();\n        }\n        if (normalTexture != null) {\n            serialized.normalTexture = normalTexture.toJSON();\n        }\n        if (occlusionTexture != null) {\n            serialized.occlusionTexture = occlusionTexture.toJSON();\n        }\n        if (emissiveTexture != null) {\n            serialized.emissiveTexture = emissiveTexture.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$s = $pbrMetallicRoughness$1, _b$k = $normalTexture$1, _c$8 = $occlusionTexture$1, _d$6 = $emissiveTexture$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$t, _b$l;\nconst $modelUri = Symbol('modelUri');\nconst $materials$1 = Symbol('materials');\n/**\n * A Model facades the top-level GLTF object returned by Three.js' GLTFLoader.\n * Currently, the model only bothers itself with the materials in the Three.js\n * scene graph.\n */\nclass Model$2 extends ThreeDOMElement$1 {\n    constructor(graft, modelUri, correlatedSceneGraph) {\n        super(graft, correlatedSceneGraph.gltf);\n        this[_a$t] = '';\n        this[_b$l] = [];\n        this[$modelUri] = modelUri;\n        const visitor = new GLTFTreeVisitor({\n            material: (material) => {\n                this[$materials$1].push(new Material$2(graft, material, correlatedSceneGraph.gltfElementMap.get(material)));\n            }\n        });\n        visitor.visit(correlatedSceneGraph.gltf, { sparse: true });\n    }\n    /**\n     * A flat list of all unique materials found in this scene graph. Materials\n     * are listed in the order they appear during pre-order, depth-first traveral\n     * of the scene graph.\n     *\n     * TODO(#1003): How do we handle non-active scenes?\n     * TODO(#1002): Desctibe and enforce traversal order\n     */\n    get materials() {\n        return this[$materials$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        serialized.modelUri = this[$modelUri];\n        serialized.materials =\n            this[$materials$1].map((material) => material.toJSON());\n        return serialized;\n    }\n}\n_a$t = $modelUri, _b$l = $materials$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$u, _b$m;\nconst $model$1 = Symbol('model');\nconst $correlatedSceneGraph$1 = Symbol('correlatedSceneGraph');\nconst $elementsByInternalId = Symbol('elementsByInternalId');\nconst $eventDelegate$1 = Symbol('eventDelegate');\n/**\n * ModelGraft\n *\n * This is a coordination primitive between a scene graph as represented by the\n * output for Three.js' GLTFLoader and a counterpart 3DOM facade. Since this is\n * the Three.js-specific implementation of the facade, the input is a GLTF-like\n * object whose keys refer to Three.js-specific constructs (e.g., gltf.scene is\n * a THREE.Scene).\n *\n * When created, the ModelGraft produces a Model that can be traversed and\n * manipulated to mutate the Three.js scene graph synchronously (but\n * indirectly). The benefit of this is that mutations to the Three.js scene can\n * be performed in a Three.js-agnostic fashion that is potentially portable to\n * alternative rendering backends.\n *\n * The scene graph representation produced by the ModelGraft is designed to\n * match the structures described in the glTF 2.0 spec as closely as possible.\n * Where there are deviations, it is usually for the purpose of making\n * synchronization easier, or else for ergonomics. For example, in glTF 2.0, the\n * graph is a series of flat arrays where nodes cross-reference each other by\n * index to represent hierarchy, but in a Model nodes have array members\n * containing refrences to their hierarchical children.\n *\n * An important goal of ModelGraft is to enable a scene in one JavaScript\n * context to be manipulated by script in a remote context, such as a distant\n * worker thread or even a different process. So, every node in the graph\n * is able to be serialized, and the serialized form includes an ID that is\n * locally unique to the ModelGraft instance that the node came from so that\n * the remote context can refer back to it. A ModelGraft can be thought of as\n * the host execution context counterpart to the ModelKernel in the scene graph\n * execution context.\n */\nclass ModelGraft {\n    constructor(modelUri, correlatedSceneGraph) {\n        // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n        // EventTarget interface without implementing or requiring a full polyfill. We\n        // should remove this once EventTarget is inheritable everywhere.\n        this[_a$u] = document.createDocumentFragment();\n        // NOTE(cdata): We declare each of these methods independently here so that we\n        // can inherit the correct types from EventTarget's interface. Maybe there is\n        // a better way to do this dynamically so that we don't repeat ourselves?\n        this.addEventListener = (...args) => this[$eventDelegate$1].addEventListener(...args);\n        this.removeEventListener = (...args) => this[$eventDelegate$1].removeEventListener(...args);\n        this.dispatchEvent = (...args) => this[$eventDelegate$1].dispatchEvent(...args);\n        this[_b$m] = new Map();\n        this[$correlatedSceneGraph$1] = correlatedSceneGraph;\n        this[$model$1] = new Model$2(this, modelUri, correlatedSceneGraph);\n    }\n    get correlatedSceneGraph() {\n        return this[$correlatedSceneGraph$1];\n    }\n    get model() {\n        return this[$model$1];\n    }\n    getElementByInternalId(id) {\n        const element = this[$elementsByInternalId].get(id);\n        if (element == null) {\n            return null;\n        }\n        return element;\n    }\n    adopt(element) {\n        this[$elementsByInternalId].set(element.internalID, element);\n    }\n    async mutate(id, property, value) {\n        const element = this.getElementByInternalId(id);\n        await element.mutate(property, value);\n        this.dispatchEvent(new CustomEvent('mutation', { detail: { element: element } }));\n    }\n}\n_a$u = $eventDelegate$1, _b$m = $elementsByInternalId;\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\nvar WEBGL_CONSTANTS = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tTRIANGLE_STRIP: 0x0005,\n\tTRIANGLE_FAN: 0x0006,\n\n\tUNSIGNED_BYTE: 0x1401,\n\tUNSIGNED_SHORT: 0x1403,\n\tFLOAT: 0x1406,\n\tUNSIGNED_INT: 0x1405,\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nvar THREE_TO_WEBGL = {};\n\nTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS.NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS.LINEAR;\nTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\n\nTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS.REPEAT;\nTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\n\nvar PATH_PROPERTIES = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\n//------------------------------------------------------------------------------\n// GLTF Exporter\n//------------------------------------------------------------------------------\nvar GLTFExporter = function () {};\n\nGLTFExporter.prototype = {\n\n\tconstructor: GLTFExporter,\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tparse: function ( input, onDone, options ) {\n\n\t\tvar DEFAULT_OPTIONS = {\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\ttruncateDrawRange: true,\n\t\t\tembedImages: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tforcePowerOfTwoTextures: false,\n\t\t\tincludeCustomExtensions: false\n\t\t};\n\n\t\toptions = Object.assign( {}, DEFAULT_OPTIONS, options );\n\n\t\tif ( options.animations.length > 0 ) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\toptions.trs = true;\n\n\t\t}\n\n\t\tvar outputJSON = {\n\n\t\t\tasset: {\n\n\t\t\t\tversion: \"2.0\",\n\t\t\t\tgenerator: \"GLTFExporter\"\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar byteOffset = 0;\n\t\tvar buffers = [];\n\t\tvar pending = [];\n\t\tvar nodeMap = new Map();\n\t\tvar skins = [];\n\t\tvar extensionsUsed = {};\n\t\tvar cachedData = {\n\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\n\t\t};\n\n\t\tvar cachedCanvas;\n\n\t\tvar uids = new Map();\n\t\tvar uid = 0;\n\n\t\t/**\n\t\t * Assign and return a temporal unique id for an object\n\t\t * especially which doesn't have .uuid\n\t\t * @param  {Object} object\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction getUID( object ) {\n\n\t\t\tif ( ! uids.has( object ) ) uids.set( object, uid ++ );\n\n\t\t\treturn uids.get( object );\n\n\t\t}\n\n\t\t/**\n\t\t * Compare two arrays\n\t\t * @param  {Array} array1 Array 1 to compare\n\t\t * @param  {Array} array2 Array 2 to compare\n\t\t * @return {Boolean}        Returns true if both arrays are equal\n\t\t */\n\t\tfunction equalArray( array1, array2 ) {\n\n\t\t\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\t\t\treturn element === array2[ index ];\n\n\t\t\t} );\n\n\t\t}\n\n\t\t/**\n\t\t * Converts a string to an ArrayBuffer.\n\t\t * @param  {string} text\n\t\t * @return {ArrayBuffer}\n\t\t */\n\t\tfunction stringToArrayBuffer( text ) {\n\n\t\t\tif ( window.TextEncoder !== undefined ) {\n\n\t\t\t\treturn new TextEncoder().encode( text ).buffer;\n\n\t\t\t}\n\n\t\t\tvar array = new Uint8Array( new ArrayBuffer( text.length ) );\n\n\t\t\tfor ( var i = 0, il = text.length; i < il; i ++ ) {\n\n\t\t\t\tvar value = text.charCodeAt( i );\n\n\t\t\t\t// Replacing multi-byte character with space(0x20).\n\t\t\t\tarray[ i ] = value > 0xFF ? 0x20 : value;\n\n\t\t\t}\n\n\t\t\treturn array.buffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the min and max vectors from the given attribute\n\t\t * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n\t\t * @param  {Integer} start\n\t\t * @param  {Integer} count\n\t\t * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n\t\t */\n\t\tfunction getMinMax( attribute, start, count ) {\n\n\t\t\tvar output = {\n\n\t\t\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\t\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t\t\t};\n\n\t\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\tvar value = attribute.array[ i * attribute.itemSize + a ];\n\t\t\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if image size is POT.\n\t\t *\n\t\t * @param {Image} image The image to be checked.\n\t\t * @returns {Boolean} Returns true if image size is POT.\n\t\t *\n\t\t */\n\t\tfunction isPowerOfTwo( image ) {\n\n\t\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if normal attribute values are normalized.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {Boolean}\n\t\t *\n\t\t */\n\t\tfunction isNormalizedNormalAttribute( normal ) {\n\n\t\t\tif ( cachedData.attributesNormalized.has( normal ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t\t// 0.0005 is from glTF-validator\n\t\t\t\tif ( Math.abs( v.fromArray( normal.array, i * 3 ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates normalized normal buffer attribute.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {BufferAttribute}\n\t\t *\n\t\t */\n\t\tfunction createNormalizedNormalAttribute( normal ) {\n\n\t\t\tif ( cachedData.attributesNormalized.has( normal ) ) {\n\n\t\t\t\treturn cachedData.attributesNormalized.get( normal );\n\n\t\t\t}\n\n\t\t\tvar attribute = normal.clone();\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t\tv.fromArray( attribute.array, i * 3 );\n\n\t\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\t\tv.setX( 1.0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.normalize();\n\n\t\t\t\t}\n\n\t\t\t\tv.toArray( attribute.array, i * 3 );\n\n\t\t\t}\n\n\t\t\tcachedData.attributesNormalized.set( normal, attribute );\n\n\t\t\treturn attribute;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n\t\t * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n\t\t *\n\t\t * @param {Integer} bufferSize The size the original buffer.\n\t\t * @returns {Integer} new buffer size with required padding.\n\t\t *\n\t\t */\n\t\tfunction getPaddedBufferSize( bufferSize ) {\n\n\t\t\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n\t\t}\n\n\t\t/**\n\t\t * Returns a buffer aligned to 4-byte boundary.\n\t\t *\n\t\t * @param {ArrayBuffer} arrayBuffer Buffer to pad\n\t\t * @param {Integer} paddingByte (Optional)\n\t\t * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n\t\t */\n\t\tfunction getPaddedArrayBuffer( arrayBuffer, paddingByte ) {\n\n\t\t\tpaddingByte = paddingByte || 0;\n\n\t\t\tvar paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\t\t\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\t\t\tvar array = new Uint8Array( paddedLength );\n\t\t\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\t\t\tif ( paddingByte !== 0 ) {\n\n\t\t\t\t\tfor ( var i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn array.buffer;\n\n\t\t\t}\n\n\t\t\treturn arrayBuffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Serializes a userData.\n\t\t *\n\t\t * @param {THREE.Object3D|THREE.Material} object\n\t\t * @param {Object} gltfProperty\n\t\t */\n\t\tfunction serializeUserData( object, gltfProperty ) {\n\n\t\t\tif ( Object.keys( object.userData ).length === 0 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\t\tif ( gltfProperty.extensions === undefined ) {\n\n\t\t\t\t\t\tgltfProperty.extensions = {};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\t\tgltfProperty.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( json ).length > 0 ) {\n\n\t\t\t\t\tgltfProperty.extras = json;\n\n\t\t\t\t}\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Applies a texture transform, if present, to the map definition. Requires\n\t\t * the KHR_texture_transform extension.\n\t\t */\n\t\tfunction applyTextureTransform( mapDef, texture ) {\n\n\t\t\tvar didTransform = false;\n\t\t\tvar transformDef = {};\n\n\t\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( didTransform ) {\n\n\t\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\t\textensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Process a buffer to append to the default one.\n\t\t * @param  {ArrayBuffer} buffer\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction processBuffer( buffer ) {\n\n\t\t\tif ( ! outputJSON.buffers ) {\n\n\t\t\t\toutputJSON.buffers = [ { byteLength: 0 } ];\n\n\t\t\t}\n\n\t\t\t// All buffers are merged before export.\n\t\t\tbuffers.push( buffer );\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView\n\t\t * @param  {BufferAttribute} attribute\n\t\t * @param  {number} componentType\n\t\t * @param  {number} start\n\t\t * @param  {number} count\n\t\t * @param  {number} target (Optional) Target usage of the BufferView\n\t\t * @return {Object}\n\t\t */\n\t\tfunction processBufferView( attribute, componentType, start, count, target ) {\n\n\t\t\tif ( ! outputJSON.bufferViews ) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\t\tvar componentSize;\n\n\t\t\tif ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t} else {\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t\t}\n\n\t\t\tvar byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\t\tvar dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\t\tvar offset = 0;\n\n\t\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\tvar value;\n\n\t\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( componentType === WEBGL_CONSTANTS.FLOAT ) {\n\n\t\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_INT ) {\n\n\t\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += componentSize;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar gltfBufferView = {\n\n\t\t\t\tbuffer: processBuffer( dataView.buffer ),\n\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\tbyteLength: byteLength\n\n\t\t\t};\n\n\t\t\tif ( target !== undefined ) gltfBufferView.target = target;\n\n\t\t\tif ( target === WEBGL_CONSTANTS.ARRAY_BUFFER ) {\n\n\t\t\t\t// Only define byteStride for vertex attributes.\n\t\t\t\tgltfBufferView.byteStride = attribute.itemSize * componentSize;\n\n\t\t\t}\n\n\t\t\tbyteOffset += byteLength;\n\n\t\t\toutputJSON.bufferViews.push( gltfBufferView );\n\n\t\t\t// @TODO Merge bufferViews where possible.\n\t\t\tvar output = {\n\n\t\t\t\tid: outputJSON.bufferViews.length - 1,\n\t\t\t\tbyteLength: 0\n\n\t\t\t};\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView from an image Blob.\n\t\t * @param {Blob} blob\n\t\t * @return {Promise<Integer>}\n\t\t */\n\t\tfunction processBufferViewImage( blob ) {\n\n\t\t\tif ( ! outputJSON.bufferViews ) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tvar buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\t\tvar bufferView = {\n\t\t\t\t\t\tbuffer: processBuffer( buffer ),\n\t\t\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t\t};\n\n\t\t\t\t\tbyteOffset += buffer.byteLength;\n\n\t\t\t\t\toutputJSON.bufferViews.push( bufferView );\n\n\t\t\t\t\tresolve( outputJSON.bufferViews.length - 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\t/**\n\t\t * Process attribute to generate an accessor\n\t\t * @param  {BufferAttribute} attribute Attribute to process\n\t\t * @param  {BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t\t * @param  {Integer} start (Optional)\n\t\t * @param  {Integer} count (Optional)\n\t\t * @return {Integer}           Index of the processed accessor on the \"accessors\" array\n\t\t */\n\t\tfunction processAccessor( attribute, geometry, start, count ) {\n\n\t\t\tvar types = {\n\n\t\t\t\t1: 'SCALAR',\n\t\t\t\t2: 'VEC2',\n\t\t\t\t3: 'VEC3',\n\t\t\t\t4: 'VEC4',\n\t\t\t\t16: 'MAT4'\n\n\t\t\t};\n\n\t\t\tvar componentType;\n\n\t\t\t// Detect the component type of the attribute array (float, uint or ushort)\n\t\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.FLOAT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type.' );\n\n\t\t\t}\n\n\t\t\tif ( start === undefined ) start = 0;\n\t\t\tif ( count === undefined ) count = attribute.count;\n\n\t\t\t// @TODO Indexed buffer geometry with drawRange not supported yet\n\t\t\tif ( options.truncateDrawRange && geometry !== undefined && geometry.index === null ) {\n\n\t\t\t\tvar end = start + count;\n\t\t\t\tvar end2 = geometry.drawRange.count === Infinity\n\t\t\t\t\t? attribute.count\n\t\t\t\t\t: geometry.drawRange.start + geometry.drawRange.count;\n\n\t\t\t\tstart = Math.max( start, geometry.drawRange.start );\n\t\t\t\tcount = Math.min( end, end2 ) - start;\n\n\t\t\t\tif ( count < 0 ) count = 0;\n\n\t\t\t}\n\n\t\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\t\tif ( count === 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar minMax = getMinMax( attribute, start, count );\n\n\t\t\tvar bufferViewTarget;\n\n\t\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t\t// animation samplers, target must not be set.\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n\n\t\t\t}\n\n\t\t\tvar bufferView = processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\t\tvar gltfAccessor = {\n\n\t\t\t\tbufferView: bufferView.id,\n\t\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\t\tcomponentType: componentType,\n\t\t\t\tcount: count,\n\t\t\t\tmax: minMax.max,\n\t\t\t\tmin: minMax.min,\n\t\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t\t};\n\n\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\tgltfAccessor.normalized = true;\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.accessors ) {\n\n\t\t\t\toutputJSON.accessors = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.accessors.push( gltfAccessor );\n\n\t\t\treturn outputJSON.accessors.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process image\n\t\t * @param  {Image} image to process\n\t\t * @param  {Integer} format of the image (e.g. THREE.RGBFormat, RGBAFormat etc)\n\t\t * @param  {Boolean} flipY before writing out the image\n\t\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t\t */\n\t\tfunction processImage( image, format, flipY ) {\n\n\t\t\tif ( ! cachedData.images.has( image ) ) {\n\n\t\t\t\tcachedData.images.set( image, {} );\n\n\t\t\t}\n\n\t\t\tvar cachedImages = cachedData.images.get( image );\n\t\t\tvar mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n\t\t\tvar key = mimeType + \":flipY/\" + flipY.toString();\n\n\t\t\tif ( cachedImages[ key ] !== undefined ) {\n\n\t\t\t\treturn cachedImages[ key ];\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.images ) {\n\n\t\t\t\toutputJSON.images = [];\n\n\t\t\t}\n\n\t\t\tvar gltfImage = { mimeType: mimeType };\n\n\t\t\tif ( options.embedImages ) {\n\n\t\t\t\tvar canvas = cachedCanvas = cachedCanvas || document.createElement( 'canvas' );\n\n\t\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\t\tif ( options.forcePowerOfTwoTextures && ! isPowerOfTwo( canvas ) ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Resized non-power-of-two image.', image );\n\n\t\t\t\t\tcanvas.width = MathUtils.floorPowerOfTwo( canvas.width );\n\t\t\t\t\tcanvas.height = MathUtils.floorPowerOfTwo( canvas.height );\n\n\t\t\t\t}\n\n\t\t\t\tvar ctx = canvas.getContext( '2d' );\n\n\t\t\t\tif ( flipY === true ) {\n\n\t\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\t\tctx.scale( 1, - 1 );\n\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t\tpending.push( new Promise( function ( resolve ) {\n\n\t\t\t\t\t\tcanvas.toBlob( function ( blob ) {\n\n\t\t\t\t\t\t\tprocessBufferViewImage( blob ).then( function ( bufferViewIndex ) {\n\n\t\t\t\t\t\t\t\tgltfImage.bufferView = bufferViewIndex;\n\n\t\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}, mimeType );\n\n\t\t\t\t\t} ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgltfImage.uri = canvas.toDataURL( mimeType );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tgltfImage.uri = image.src;\n\n\t\t\t}\n\n\t\t\toutputJSON.images.push( gltfImage );\n\n\t\t\tvar index = outputJSON.images.length - 1;\n\t\t\tcachedImages[ key ] = index;\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process sampler\n\t\t * @param  {Texture} map Texture to process\n\t\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t\t */\n\t\tfunction processSampler( map ) {\n\n\t\t\tif ( ! outputJSON.samplers ) {\n\n\t\t\t\toutputJSON.samplers = [];\n\n\t\t\t}\n\n\t\t\tvar gltfSampler = {\n\n\t\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\n\t\t\t};\n\n\t\t\toutputJSON.samplers.push( gltfSampler );\n\n\t\t\treturn outputJSON.samplers.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process texture\n\t\t * @param  {Texture} map Map to process\n\t\t * @return {Integer}     Index of the processed texture in the \"textures\" array\n\t\t */\n\t\tfunction processTexture( map ) {\n\n\t\t\tif ( cachedData.textures.has( map ) ) {\n\n\t\t\t\treturn cachedData.textures.get( map );\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.textures ) {\n\n\t\t\t\toutputJSON.textures = [];\n\n\t\t\t}\n\n\t\t\tvar gltfTexture = {\n\n\t\t\t\tsampler: processSampler( map ),\n\t\t\t\tsource: processImage( map.image, map.format, map.flipY )\n\n\t\t\t};\n\n\t\t\tif ( map.name ) {\n\n\t\t\t\tgltfTexture.name = map.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.textures.push( gltfTexture );\n\n\t\t\tvar index = outputJSON.textures.length - 1;\n\t\t\tcachedData.textures.set( map, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process material\n\t\t * @param  {THREE.Material} material Material to process\n\t\t * @return {Integer}      Index of the processed material in the \"materials\" array\n\t\t */\n\t\tfunction processMaterial( material ) {\n\n\t\t\tif ( cachedData.materials.has( material ) ) {\n\n\t\t\t\treturn cachedData.materials.get( material );\n\n\t\t\t}\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.materials ) {\n\n\t\t\t\toutputJSON.materials = [];\n\n\t\t\t}\n\n\t\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\t\tvar gltfMaterial = {\n\n\t\t\t\tpbrMetallicRoughness: {}\n\n\t\t\t};\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_unlit: {} };\n\n\t\t\t\textensionsUsed[ 'KHR_materials_unlit' ] = true;\n\n\t\t\t} else if ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_pbrSpecularGlossiness: {} };\n\n\t\t\t\textensionsUsed[ 'KHR_materials_pbrSpecularGlossiness' ] = true;\n\n\t\t\t} else if ( ! material.isMeshStandardMaterial ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorFactor\n\t\t\tvar color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t\t} else if ( material.isMeshBasicMaterial ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t\t\t} else {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness diffuse, specular and glossiness factor\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\tif ( gltfMaterial.pbrMetallicRoughness.baseColorFactor ) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor = gltfMaterial.pbrMetallicRoughness.baseColorFactor;\n\n\t\t\t\t}\n\n\t\t\t\tvar specularFactor = [ 1, 1, 1 ];\n\t\t\t\tmaterial.specular.toArray( specularFactor, 0 );\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor = specularFactor;\n\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor = material.glossiness;\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\t\tif ( material.metalnessMap === material.roughnessMap ) {\n\n\t\t\t\t\tvar metalRoughMapDef = { index: processTexture( material.metalnessMap ) };\n\t\t\t\t\tapplyTextureTransform( metalRoughMapDef, material.metalnessMap );\n\t\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\t\t\tif ( material.map ) {\n\n\t\t\t\tvar baseColorMapDef = { index: processTexture( material.map ) };\n\t\t\t\tapplyTextureTransform( baseColorMapDef, material.map );\n\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture = baseColorMapDef;\n\n\t\t\t\t}\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness specular map\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial && material.specularMap ) {\n\n\t\t\t\tvar specularMapDef = { index: processTexture( material.specularMap ) };\n\t\t\t\tapplyTextureTransform( specularMapDef, material.specularMap );\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture = specularMapDef;\n\n\t\t\t}\n\n\t\t\tif ( material.emissive ) {\n\n\t\t\t\t// emissiveFactor\n\t\t\t\tvar emissive = material.emissive.clone().multiplyScalar( material.emissiveIntensity ).toArray();\n\n\t\t\t\tif ( ! equalArray( emissive, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tgltfMaterial.emissiveFactor = emissive;\n\n\t\t\t\t}\n\n\t\t\t\t// emissiveTexture\n\t\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\t\tvar emissiveMapDef = { index: processTexture( material.emissiveMap ) };\n\t\t\t\t\tapplyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\t\tgltfMaterial.emissiveTexture = emissiveMapDef;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normalTexture\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tvar normalMapDef = { index: processTexture( material.normalMap ) };\n\n\t\t\t\tif ( material.normalScale && material.normalScale.x !== - 1 ) {\n\n\t\t\t\t\tif ( material.normalScale.x !== material.normalScale.y ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform( normalMapDef, material.normalMap );\n\n\t\t\t\tgltfMaterial.normalTexture = normalMapDef;\n\n\t\t\t}\n\n\t\t\t// occlusionTexture\n\t\t\tif ( material.aoMap ) {\n\n\t\t\t\tvar occlusionMapDef = {\n\t\t\t\t\tindex: processTexture( material.aoMap ),\n\t\t\t\t\ttexCoord: 1\n\t\t\t\t};\n\n\t\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform( occlusionMapDef, material.aoMap );\n\n\t\t\t\tgltfMaterial.occlusionTexture = occlusionMapDef;\n\n\t\t\t}\n\n\t\t\t// alphaMode\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\tgltfMaterial.alphaMode = 'BLEND';\n\n\t\t\t} else {\n\n\t\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\t\tgltfMaterial.alphaMode = 'MASK';\n\t\t\t\t\tgltfMaterial.alphaCutoff = material.alphaTest;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// doubleSided\n\t\t\tif ( material.side === DoubleSide ) {\n\n\t\t\t\tgltfMaterial.doubleSided = true;\n\n\t\t\t}\n\n\t\t\tif ( material.name !== '' ) {\n\n\t\t\t\tgltfMaterial.name = material.name;\n\n\t\t\t}\n\n\t\t\tserializeUserData( material, gltfMaterial );\n\n\t\t\toutputJSON.materials.push( gltfMaterial );\n\n\t\t\tvar index = outputJSON.materials.length - 1;\n\t\t\tcachedData.materials.set( material, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process mesh\n\t\t * @param  {THREE.Mesh} mesh Mesh to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"meshes\" array\n\t\t */\n\t\tfunction processMesh( mesh ) {\n\n\t\t\tvar meshCacheKeyParts = [ mesh.geometry.uuid ];\n\t\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\t\tfor ( var i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t\t}\n\n\t\t\tvar meshCacheKey = meshCacheKeyParts.join( ':' );\n\t\t\tif ( cachedData.meshes.has( meshCacheKey ) ) {\n\n\t\t\t\treturn cachedData.meshes.get( meshCacheKey );\n\n\t\t\t}\n\n\t\t\tvar geometry = mesh.geometry;\n\n\t\t\tvar mode;\n\n\t\t\t// Use the correct mode\n\t\t\tif ( mesh.isLineSegments ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINES;\n\n\t\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_LOOP;\n\n\t\t\t} else if ( mesh.isLine ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_STRIP;\n\n\t\t\t} else if ( mesh.isPoints ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.POINTS;\n\n\t\t\t} else {\n\n\t\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n\n\t\t\t}\n\n\t\t\tif ( ! geometry.isBufferGeometry ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.' );\n\t\t\t\tgeometry = new BufferGeometry().setFromObject( mesh );\n\n\t\t\t}\n\n\t\t\tvar gltfMesh = {};\n\n\t\t\tvar attributes = {};\n\t\t\tvar primitives = [];\n\t\t\tvar targets = [];\n\n\t\t\t// Conversion between attributes names in threejs and gltf spec\n\t\t\tvar nameConversion = {\n\n\t\t\t\tuv: 'TEXCOORD_0',\n\t\t\t\tuv2: 'TEXCOORD_1',\n\t\t\t\tcolor: 'COLOR_0',\n\t\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\t\tskinIndex: 'JOINTS_0'\n\n\t\t\t};\n\n\t\t\tvar originalNormal = geometry.getAttribute( 'normal' );\n\n\t\t\tif ( originalNormal !== undefined && ! isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\t\tgeometry.setAttribute( 'normal', createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t\t}\n\n\t\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t\t// For every attribute create an accessor\n\t\t\tvar modifiedAttribute = null;\n\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\t\tif ( attributeName.substr( 0, 5 ) === 'morph' ) continue;\n\n\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\t\tvar validVertexAttributes =\n\t\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\t\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) {\n\n\t\t\t\t\tattributeName = '_' + attributeName;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedData.attributes.has( getUID( attribute ) ) ) {\n\n\t\t\t\t\tattributes[ attributeName ] = cachedData.attributes.get( getUID( attribute ) );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\t\tmodifiedAttribute = null;\n\t\t\t\tvar array = attribute.array;\n\t\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tvar accessor = processAccessor( modifiedAttribute || attribute, geometry );\n\t\t\t\tif ( accessor !== null ) {\n\n\t\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\t\tcachedData.attributes.set( getUID( attribute ), accessor );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t\t// Skip if no exportable attributes found\n\t\t\tif ( Object.keys( attributes ).length === 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Morph targets\n\t\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\t\tvar weights = [];\n\t\t\t\tvar targetNames = [];\n\t\t\t\tvar reverseDictionary = {};\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\t\tfor ( var key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\t\tvar target = {};\n\n\t\t\t\t\tvar warned = false;\n\n\t\t\t\t\tfor ( var attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\t\tvar gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\t\tvar baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\t\tif ( cachedData.attributes.has( getUID( attribute ) ) ) {\n\n\t\t\t\t\t\t\ttarget[ gltfAttributeName ] = cachedData.attributes.get( getUID( attribute ) );\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\t\tvar relativeAttribute = attribute.clone();\n\n\t\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\t\tfor ( var j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\t\trelativeAttribute.setXYZ(\n\t\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\t\tattribute.getX( j ) - baseAttribute.getX( j ),\n\t\t\t\t\t\t\t\t\tattribute.getY( j ) - baseAttribute.getY( j ),\n\t\t\t\t\t\t\t\t\tattribute.getZ( j ) - baseAttribute.getZ( j )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = processAccessor( relativeAttribute, geometry );\n\t\t\t\t\t\tcachedData.attributes.set( getUID( baseAttribute ), target[ gltfAttributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push( target );\n\n\t\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\t\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tgltfMesh.weights = weights;\n\n\t\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\t\tgltfMesh.extras = {};\n\t\t\t\t\tgltfMesh.extras.targetNames = targetNames;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar isMultiMaterial = Array.isArray( mesh.material );\n\n\t\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\t\tvar groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\t\tfor ( var i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tvar primitive = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tattributes: attributes,\n\t\t\t\t};\n\n\t\t\t\tserializeUserData( geometry, primitive );\n\n\t\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\tvar cacheKey = getUID( geometry.index );\n\n\t\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cachedData.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\t\tprimitive.indices = cachedData.attributes.get( cacheKey );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprimitive.indices = processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\t\tcachedData.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t\t}\n\n\t\t\t\tvar material = processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\t\tif ( material !== null ) {\n\n\t\t\t\t\tprimitive.material = material;\n\n\t\t\t\t}\n\n\t\t\t\tprimitives.push( primitive );\n\n\t\t\t}\n\n\t\t\tgltfMesh.primitives = primitives;\n\n\t\t\tif ( ! outputJSON.meshes ) {\n\n\t\t\t\toutputJSON.meshes = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.meshes.push( gltfMesh );\n\n\t\t\tvar index = outputJSON.meshes.length - 1;\n\t\t\tcachedData.meshes.set( meshCacheKey, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process camera\n\t\t * @param  {THREE.Camera} camera Camera to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t\t */\n\t\tfunction processCamera( camera ) {\n\n\t\t\tif ( ! outputJSON.cameras ) {\n\n\t\t\t\toutputJSON.cameras = [];\n\n\t\t\t}\n\n\t\t\tvar isOrtho = camera.isOrthographicCamera;\n\n\t\t\tvar gltfCamera = {\n\n\t\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\n\t\t\t};\n\n\t\t\tif ( isOrtho ) {\n\n\t\t\t\tgltfCamera.orthographic = {\n\n\t\t\t\t\txmag: camera.right * 2,\n\t\t\t\t\tymag: camera.top * 2,\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tgltfCamera.perspective = {\n\n\t\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tif ( camera.name !== '' ) {\n\n\t\t\t\tgltfCamera.name = camera.type;\n\n\t\t\t}\n\n\t\t\toutputJSON.cameras.push( gltfCamera );\n\n\t\t\treturn outputJSON.cameras.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates glTF animation entry from AnimationClip object.\n\t\t *\n\t\t * Status:\n\t\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t\t *\n\t\t * @param {THREE.AnimationClip} clip\n\t\t * @param {THREE.Object3D} root\n\t\t * @return {number}\n\t\t */\n\t\tfunction processAnimation( clip, root ) {\n\n\t\t\tif ( ! outputJSON.animations ) {\n\n\t\t\t\toutputJSON.animations = [];\n\n\t\t\t}\n\n\t\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\t\tvar tracks = clip.tracks;\n\t\t\tvar channels = [];\n\t\t\tvar samplers = [];\n\n\t\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t\tvar track = tracks[ i ];\n\t\t\t\tvar trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\t\tvar trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\t\tvar trackProperty = PATH_PROPERTIES[ trackBinding.propertyName ];\n\n\t\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tvar inputItemSize = 1;\n\t\t\t\tvar outputItemSize = track.values.length / track.times.length;\n\n\t\t\t\tif ( trackProperty === PATH_PROPERTIES.morphTargetInfluences ) {\n\n\t\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t\t}\n\n\t\t\t\tvar interpolation;\n\n\t\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t\t// valid value from .getInterpolation().\n\t\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\t\toutputItemSize /= 3;\n\n\t\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t\t}\n\n\t\t\t\tsamplers.push( {\n\n\t\t\t\t\tinput: processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\t\toutput: processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\t\tinterpolation: interpolation\n\n\t\t\t\t} );\n\n\t\t\t\tchannels.push( {\n\n\t\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\t\tpath: trackProperty\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\toutputJSON.animations.push( {\n\n\t\t\t\tname: clip.name || 'clip_' + outputJSON.animations.length,\n\t\t\t\tsamplers: samplers,\n\t\t\t\tchannels: channels\n\n\t\t\t} );\n\n\t\t\treturn outputJSON.animations.length - 1;\n\n\t\t}\n\n\t\tfunction processSkin( object ) {\n\n\t\t\tvar node = outputJSON.nodes[ nodeMap.get( object ) ];\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton === undefined ) return null;\n\n\t\t\tvar rootJoint = object.skeleton.bones[ 0 ];\n\n\t\t\tif ( rootJoint === undefined ) return null;\n\n\t\t\tvar joints = [];\n\t\t\tvar inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\n\t\t\tfor ( var i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\n\t\t\t\tskeleton.boneInverses[ i ].toArray( inverseBindMatrices, i * 16 );\n\n\t\t\t}\n\n\t\t\tif ( outputJSON.skins === undefined ) {\n\n\t\t\t\toutputJSON.skins = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.skins.push( {\n\n\t\t\t\tinverseBindMatrices: processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\t\tjoints: joints,\n\t\t\t\tskeleton: nodeMap.get( rootJoint )\n\n\t\t\t} );\n\n\t\t\tvar skinIndex = node.skin = outputJSON.skins.length - 1;\n\n\t\t\treturn skinIndex;\n\n\t\t}\n\n\t\tfunction processLight( light ) {\n\n\t\t\tvar lightDef = {};\n\n\t\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\t\tlightDef.color = light.color.toArray();\n\n\t\t\tlightDef.intensity = light.intensity;\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tlightDef.type = 'directional';\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tlightDef.type = 'point';\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tlightDef.type = 'spot';\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\t\t\t\tlightDef.spot = {};\n\t\t\t\tlightDef.spot.innerConeAngle = ( light.penumbra - 1.0 ) * light.angle * - 1.0;\n\t\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t\t}\n\n\t\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t\t}\n\n\t\t\tif ( light.target\n\t\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t\t || light.target.position.x !== 0\n\t\t\t\t\t || light.target.position.y !== 0\n\t\t\t\t\t || light.target.position.z !== - 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t\t}\n\n\t\t\tvar lights = outputJSON.extensions[ 'KHR_lights_punctual' ].lights;\n\t\t\tlights.push( lightDef );\n\t\t\treturn lights.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Object3D node\n\t\t * @param  {THREE.Object3D} node Object3D to processNode\n\t\t * @return {Integer}      Index of the node in the nodes list\n\t\t */\n\t\tfunction processNode( object ) {\n\n\t\t\tif ( ! outputJSON.nodes ) {\n\n\t\t\t\toutputJSON.nodes = [];\n\n\t\t\t}\n\n\t\t\tvar gltfNode = {};\n\n\t\t\tif ( options.trs ) {\n\n\t\t\t\tvar rotation = object.quaternion.toArray();\n\t\t\t\tvar position = object.position.toArray();\n\t\t\t\tvar scale = object.scale.toArray();\n\n\t\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.rotation = rotation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tgltfNode.translation = position;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.scale = scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( object.matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.matrix = object.matrix.elements;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\t\tif ( object.name !== '' ) {\n\n\t\t\t\tgltfNode.name = String( object.name );\n\n\t\t\t}\n\n\t\t\tserializeUserData( object, gltfNode );\n\n\t\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tvar mesh = processMesh( object );\n\n\t\t\t\tif ( mesh !== null ) {\n\n\t\t\t\t\tgltfNode.mesh = mesh;\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isCamera ) {\n\n\t\t\t\tgltfNode.camera = processCamera( object );\n\n\t\t\t} else if ( object.isDirectionalLight || object.isPointLight || object.isSpotLight ) {\n\n\t\t\t\tif ( ! extensionsUsed[ 'KHR_lights_punctual' ] ) {\n\n\t\t\t\t\toutputJSON.extensions = outputJSON.extensions || {};\n\t\t\t\t\toutputJSON.extensions[ 'KHR_lights_punctual' ] = { lights: [] };\n\t\t\t\t\textensionsUsed[ 'KHR_lights_punctual' ] = true;\n\n\t\t\t\t}\n\n\t\t\t\tgltfNode.extensions = gltfNode.extensions || {};\n\t\t\t\tgltfNode.extensions[ 'KHR_lights_punctual' ] = { light: processLight( object ) };\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', object );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\tskins.push( object );\n\n\t\t\t}\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tvar children = [];\n\n\t\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar child = object.children[ i ];\n\n\t\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\t\tvar node = processNode( child );\n\n\t\t\t\t\t\tif ( node !== null ) {\n\n\t\t\t\t\t\t\tchildren.push( node );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( children.length > 0 ) {\n\n\t\t\t\t\tgltfNode.children = children;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\toutputJSON.nodes.push( gltfNode );\n\n\t\t\tvar nodeIndex = outputJSON.nodes.length - 1;\n\t\t\tnodeMap.set( object, nodeIndex );\n\n\t\t\treturn nodeIndex;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Scene\n\t\t * @param  {Scene} node Scene to process\n\t\t */\n\t\tfunction processScene( scene ) {\n\n\t\t\tif ( ! outputJSON.scenes ) {\n\n\t\t\t\toutputJSON.scenes = [];\n\t\t\t\toutputJSON.scene = 0;\n\n\t\t\t}\n\n\t\t\tvar gltfScene = {};\n\n\t\t\tif ( scene.name !== '' ) {\n\n\t\t\t\tgltfScene.name = scene.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.scenes.push( gltfScene );\n\n\t\t\tvar nodes = [];\n\n\t\t\tfor ( var i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = scene.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tvar node = processNode( child );\n\n\t\t\t\t\tif ( node !== null ) {\n\n\t\t\t\t\t\tnodes.push( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodes.length > 0 ) {\n\n\t\t\t\tgltfScene.nodes = nodes;\n\n\t\t\t}\n\n\t\t\tserializeUserData( scene, gltfScene );\n\n\t\t}\n\n\t\t/**\n\t\t * Creates a Scene to hold a list of objects and parse it\n\t\t * @param  {Array} objects List of objects to process\n\t\t */\n\t\tfunction processObjects( objects ) {\n\n\t\t\tvar scene = new Scene();\n\t\t\tscene.name = 'AuxScene';\n\n\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\n\n\t\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\t\tscene.children.push( objects[ i ] );\n\n\t\t\t}\n\n\t\t\tprocessScene( scene );\n\n\t\t}\n\n\t\tfunction processInput( input ) {\n\n\t\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\t\tvar objectsWithoutScene = [];\n\n\t\t\tfor ( var i = 0; i < input.length; i ++ ) {\n\n\t\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\t\tprocessScene( input[ i ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( objectsWithoutScene.length > 0 ) {\n\n\t\t\t\tprocessObjects( objectsWithoutScene );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < skins.length; ++ i ) {\n\n\t\t\t\tprocessSkin( skins[ i ] );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\t\tprocessAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tprocessInput( input );\n\n\t\tPromise.all( pending ).then( function () {\n\n\t\t\t// Merge buffers.\n\t\t\tvar blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t\t// Declare extensions.\n\t\t\tvar extensionsUsedList = Object.keys( extensionsUsed );\n\t\t\tif ( extensionsUsedList.length > 0 ) outputJSON.extensionsUsed = extensionsUsedList;\n\n\t\t\t// Update bytelength of the single buffer.\n\t\t\tif ( outputJSON.buffers && outputJSON.buffers.length > 0 ) outputJSON.buffers[ 0 ].byteLength = blob.size;\n\n\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\t\tvar GLB_HEADER_BYTES = 12;\n\t\t\t\tvar GLB_HEADER_MAGIC = 0x46546C67;\n\t\t\t\tvar GLB_VERSION = 2;\n\n\t\t\t\tvar GLB_CHUNK_PREFIX_BYTES = 8;\n\t\t\t\tvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\n\t\t\t\tvar GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t// Binary chunk.\n\t\t\t\t\tvar binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\t\tvar binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t\t// JSON chunk.\n\t\t\t\t\tvar jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( outputJSON ) ), 0x20 );\n\t\t\t\t\tvar jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t\t// GLB header.\n\t\t\t\t\tvar header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\t\tvar headerView = new DataView( header );\n\t\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\t\tvar totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\t\tvar glbBlob = new Blob( [\n\t\t\t\t\t\theader,\n\t\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\t\tjsonChunk,\n\t\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\t\tbinaryChunk\n\t\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\t\tvar glbReader = new window.FileReader();\n\t\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t\t};\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tif ( outputJSON.buffers && outputJSON.buffers.length > 0 ) {\n\n\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\tvar base64data = reader.result;\n\t\t\t\t\t\toutputJSON.buffers[ 0 ].uri = base64data;\n\t\t\t\t\t\tonDone( outputJSON );\n\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonDone( outputJSON );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n};\n\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function ( track, time ) {\n\n\t\tvar tolerance = 0.001; // 1ms\n\t\tvar valueSize = track.getValueSize();\n\n\t\tvar times = new track.TimeBufferType( track.times.length + 1 );\n\t\tvar values = new track.ValueBufferType( track.values.length + valueSize );\n\t\tvar interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\tvar index;\n\n\t\tif ( track.times.length === 0 ) {\n\n\t\t\ttimes[ 0 ] = time;\n\n\t\t\tfor ( var i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\ttimes[ 0 ] = time;\n\t\t\ttimes.set( track.times, 1 );\n\n\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\ttimes.set( track.times, 0 );\n\n\t\t\tvalues.set( track.values, 0 );\n\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\tvar tracks = [];\n\t\tvar mergedTracks = {};\n\t\tvar sourceTracks = clip.tracks;\n\n\t\tfor ( var i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\tvar sourceTrack = sourceTracks[ i ];\n\t\t\tvar sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\tvar sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t}\n\n\t\t\tvar targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tvar targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t}\n\n\t\t\tvar mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tvar values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\tmergedTrack.name = sourceTrackBinding.nodeName + '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor ( var j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\tvar keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst $updateThreeSide = Symbol('updateThreeSide');\nconst $currentGLTF$1 = Symbol('currentGLTF');\nconst $modelGraft$1 = Symbol('modelGraft');\nconst $mainPort = Symbol('mainPort');\nconst $threePort = Symbol('threePort');\nconst $manipulator = Symbol('manipulator');\nconst $modelKernel = Symbol('modelKernel');\nconst $onModelChange = Symbol('onModelChange');\nconst $onModelGraftMutation = Symbol('onModelGraftMutation');\n/**\n * SceneGraphMixin manages a `<model-viewer>` integration with the 3DOM library\n * in order to support operations on the <model-viewer> scene graph.\n */\nconst SceneGraphMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    var _h;\n    class SceneGraphModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this[_h] = null;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = null;\n            this[_d] = null;\n            this[_e] = null;\n            this[_f] = (event) => {\n                const { data } = event;\n                if (data && data.type === ThreeDOMMessageType.MODEL_CHANGE) {\n                    const serialized = data.model;\n                    const currentKernel = this[$modelKernel];\n                    if (currentKernel != null) {\n                        currentKernel.deactivate();\n                    }\n                    else if (serialized == null) {\n                        // Do not proceed if transitioning from null to null\n                        return;\n                    }\n                    if (serialized != null) {\n                        this[$modelKernel] = new ModelKernel(data.port, serialized);\n                    }\n                    else {\n                        this[$modelKernel] = null;\n                    }\n                    this.dispatchEvent(new CustomEvent('scene-graph-ready', { detail: { url: serialized ? serialized.modelUri : null } }));\n                }\n            };\n            this[_g] = (_event) => {\n                this[$needsRender]();\n            };\n        }\n        // ThreeDOM implementation:\n        /** @export */\n        get model() {\n            const kernel = this[$modelKernel];\n            return kernel ? kernel.model : undefined;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            const { port1, port2 } = new MessageChannel();\n            port1.start();\n            port2.start();\n            this[$mainPort] = port1;\n            this[$threePort] = port2;\n            this[$mainPort].onmessage = this[$onModelChange];\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$mainPort].close();\n            this[$threePort].close();\n            this[$mainPort] = null;\n            this[$threePort] = null;\n            if (this[$manipulator] != null) {\n                this[$manipulator].dispose();\n            }\n            if (this[$modelKernel] != null) {\n                this[$modelKernel].deactivate();\n            }\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has($modelGraft$1)) {\n                const oldModelGraft = changedProperties.get($modelGraft$1);\n                if (oldModelGraft != null) {\n                    oldModelGraft.removeEventListener('mutation', this[$onModelGraftMutation]);\n                }\n                const modelGraft = this[$modelGraft$1];\n                if (modelGraft != null) {\n                    modelGraft.addEventListener('mutation', this[$onModelGraftMutation]);\n                }\n            }\n        }\n        [(_h = $modelGraft$1, _a = $currentGLTF$1, _b = $mainPort, _c = $threePort, _d = $manipulator, _e = $modelKernel, $onModelLoad)]() {\n            super[$onModelLoad]();\n            this[$updateThreeSide]();\n        }\n        [$updateThreeSide]() {\n            // Three.js side (will eventually move to worker)\n            const scene = this[$scene];\n            const { model } = scene;\n            const { currentGLTF } = model;\n            let modelGraft = null;\n            let manipulator = null;\n            if (currentGLTF != null) {\n                const { correlatedSceneGraph } = currentGLTF;\n                const currentModelGraft = this[$modelGraft$1];\n                const currentManipulator = this[$manipulator];\n                if (correlatedSceneGraph != null) {\n                    if (currentManipulator != null) {\n                        currentManipulator.dispose();\n                    }\n                    if (currentModelGraft != null && currentGLTF === this[$currentGLTF$1]) {\n                        return;\n                    }\n                    modelGraft = new ModelGraft(model.url || '', correlatedSceneGraph);\n                    let channel = null;\n                    if (modelGraft != null && modelGraft.model != null) {\n                        channel = new MessageChannel();\n                        manipulator = new ModelGraftManipulator(modelGraft, channel.port1);\n                        this[$threePort].postMessage({\n                            type: ThreeDOMMessageType.MODEL_CHANGE,\n                            model: modelGraft.model.toJSON(),\n                            port: channel.port2\n                        }, [channel.port2]);\n                    }\n                    else {\n                        this[$threePort].postMessage({\n                            type: ThreeDOMMessageType.MODEL_CHANGE,\n                            model: null,\n                            port: null\n                        });\n                    }\n                }\n            }\n            this[$modelGraft$1] = modelGraft;\n            this[$manipulator] = manipulator;\n            this[$currentGLTF$1] = currentGLTF;\n        }\n        /** @export */\n        async exportScene(options) {\n            const { model } = this[$scene];\n            return new Promise(async (resolve, reject) => {\n                if (model == null) {\n                    return reject('Model missing or not yet loaded');\n                }\n                // Defaults\n                const opts = {\n                    binary: true,\n                    onlyVisible: true,\n                    maxTextureSize: Infinity,\n                    forcePowerOfTwoTextures: false,\n                    includeCustomExtensions: false,\n                    embedImages: true\n                };\n                Object.assign(opts, options);\n                // Not configurable\n                opts.animations = model.animations;\n                opts.truncateDrawRange = true;\n                const shadow = model[$shadow];\n                let visible = false;\n                // Remove shadow from export\n                if (shadow != null) {\n                    visible = shadow.visible;\n                    shadow.visible = false;\n                }\n                const exporter = new GLTFExporter();\n                exporter.parse(model.modelContainer, (gltf) => {\n                    return resolve(new Blob([opts.binary ? gltf : JSON.stringify(gltf)], {\n                        type: opts.binary ? 'application/octet-stream' :\n                            'application/json'\n                    }));\n                }, opts);\n                if (shadow != null) {\n                    shadow.visible = visible;\n                }\n            });\n        }\n    }\n    _f = $onModelChange, _g = $onModelGraftMutation;\n    __decorate$6([\n        property({ type: Object })\n    ], SceneGraphModelViewerElement.prototype, _h, void 0);\n    return SceneGraphModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// How much the model will rotate per\n// second in radians:\nconst DEFAULT_ROTATION_SPEED = Math.PI / 32;\nconst AUTO_ROTATE_DELAY_DEFAULT = 3000;\nconst rotationRateIntrinsics = {\n    basis: [degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED, 'rad'))],\n    keywords: { auto: [null] }\n};\nconst $autoRotateStartTime = Symbol('autoRotateStartTime');\nconst $radiansPerSecond = Symbol('radiansPerSecond');\nconst $syncRotationRate = Symbol('syncRotationRate');\nconst $cameraChangeHandler = Symbol('cameraChangeHandler');\nconst $onCameraChange = Symbol('onCameraChange');\nconst StagingMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class StagingModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoRotate = false;\n            this.autoRotateDelay = AUTO_ROTATE_DELAY_DEFAULT;\n            this.rotationPerSecond = 'auto';\n            this[_a] = performance.now();\n            this[_b] = 0;\n            this[_c] = (event) => this[$onCameraChange](event);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.addEventListener('camera-change', this[$cameraChangeHandler]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this.removeEventListener('camera-change', this[$cameraChangeHandler]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoRotate')) {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        [(_a = $autoRotateStartTime, _b = $radiansPerSecond, _c = $cameraChangeHandler, $syncRotationRate)](style) {\n            this[$radiansPerSecond] = style[0];\n        }\n        [$tick$1](time, delta) {\n            super[$tick$1](time, delta);\n            if (!this.autoRotate || !this[$hasTransitioned]() ||\n                this[$renderer].isPresenting) {\n                return;\n            }\n            const rotationDelta = Math.min(delta, time - this[$autoRotateStartTime] - this.autoRotateDelay);\n            if (rotationDelta > 0) {\n                this[$scene].yaw = this.turntableRotation +\n                    this[$radiansPerSecond] * rotationDelta * 0.001;\n            }\n        }\n        [$onCameraChange](event) {\n            if (!this.autoRotate) {\n                return;\n            }\n            if (event.detail.source === 'user-interaction') {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        get turntableRotation() {\n            return this[$scene].yaw;\n        }\n        resetTurntableRotation() {\n            this[$scene].yaw = 0;\n        }\n    }\n    __decorate$7([\n        property({ type: Boolean, attribute: 'auto-rotate' })\n    ], StagingModelViewerElement.prototype, \"autoRotate\", void 0);\n    __decorate$7([\n        property({ type: Number, attribute: 'auto-rotate-delay' })\n    ], StagingModelViewerElement.prototype, \"autoRotateDelay\", void 0);\n    __decorate$7([\n        style({ intrinsics: rotationRateIntrinsics, updateHandler: $syncRotationRate }),\n        property({ type: String, attribute: 'rotation-per-second' })\n    ], StagingModelViewerElement.prototype, \"rotationPerSecond\", void 0);\n    return StagingModelViewerElement;\n};\n\n/**\n * This mixin function is designed to be applied to a class that inherits\n * from HTMLElement. It makes it easy for a custom element to coordinate with\n * the :focus-visible polyfill.\n *\n * NOTE(cdata): The code here was adapted from an example proposed with the\n * introduction of ShadowDOM support in the :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196\n * @param {Function} SuperClass The base class implementation to decorate with\n * implementation that coordinates with the :focus-visible polyfill\n */\nconst FocusVisiblePolyfillMixin = (SuperClass) => {\n    var _a;\n    const coordinateWithPolyfill = (instance) => {\n        // If there is no shadow root, there is no need to coordinate with\n        // the polyfill. If we already coordinated with the polyfill, we can\n        // skip subsequent invokcations:\n        if (instance.shadowRoot == null ||\n            instance.hasAttribute('data-js-focus-visible')) {\n            return () => { };\n        }\n        // The polyfill might already be loaded. If so, we can apply it to\n        // the shadow root immediately:\n        if (self.applyFocusVisiblePolyfill) {\n            self.applyFocusVisiblePolyfill(instance.shadowRoot);\n        }\n        else {\n            const coordinationHandler = () => {\n                self.applyFocusVisiblePolyfill(instance.shadowRoot);\n            };\n            // Otherwise, wait for the polyfill to be loaded lazily. It might\n            // never be loaded, but if it is then we can apply it to the\n            // shadow root at the appropriate time by waiting for the ready\n            // event:\n            self.addEventListener('focus-visible-polyfill-ready', coordinationHandler, { once: true });\n            return () => {\n                self.removeEventListener('focus-visible-polyfill-ready', coordinationHandler);\n            };\n        }\n        return () => { };\n    };\n    const $endPolyfillCoordination = Symbol('endPolyfillCoordination');\n    // IE11 doesn't natively support custom elements or JavaScript class\n    // syntax The mixin implementation assumes that the user will take the\n    // appropriate steps to support both:\n    class FocusVisibleCoordinator extends SuperClass {\n        constructor() {\n            super(...arguments);\n            this[_a] = null;\n        }\n        // Attempt to coordinate with the polyfill when connected to the\n        // document:\n        connectedCallback() {\n            super.connectedCallback && super.connectedCallback();\n            if (this[$endPolyfillCoordination] == null) {\n                this[$endPolyfillCoordination] = coordinateWithPolyfill(this);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback && super.disconnectedCallback();\n            // It's important to remove the polyfill event listener when we\n            // disconnect, otherwise we will leak the whole element via window:\n            if (this[$endPolyfillCoordination] != null) {\n                this[$endPolyfillCoordination]();\n                this[$endPolyfillCoordination] = null;\n            }\n        }\n    }\n    _a = $endPolyfillCoordination;\n    return FocusVisibleCoordinator;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Uncomment these lines to export PMREM textures in Glitch:\n// export {default as TextureUtils} from './three-components/TextureUtils';\n// export * from 'three';\nconst ModelViewerElement = AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));\ncustomElements.define('model-viewer', ModelViewerElement);\n\nexport { ModelViewerElement };\n//# sourceMappingURL=model-viewer.js.map\n"],"names":["String","Math","random","slice","window","trustedTypes","createPolicy","createHTML","s","eventOptionsSupported","options","capture","addEventListener","removeEventListener","_e","push","ShadyCSS","prepareTemplateDom","console","warn","JSCompiler_renameProperty","prop","_obj","defaultConverter","[object Object]","value","type","Boolean","Object","Array","JSON","stringify","Number","parse","notEqual","old","defaultPropertyDeclaration","attribute","converter","reflect","hasChanged","UpdatingElement","HTMLElement","super","this","initialize","observedAttributes","finalize","attributes","_classProperties","forEach","v","p","attr","_attributeNameForProperty","undefined","_attributeToPropertyMap","set","hasOwnProperty","Map","superProperties","getPrototypeOf","k","name","_ensureClassProperties","noAccessor","prototype","key","Symbol","descriptor","getPropertyDescriptor","defineProperty","oldValue","requestUpdateInternal","configurable","enumerable","get","superCtor","props","properties","propKeys","getOwnPropertyNames","getOwnPropertySymbols","createProperty","toLowerCase","fromAttribute","toAttribute","_updateState","_updatePromise","Promise","res","_enableUpdatingResolver","_changedProperties","_saveInstanceProperties","constructor","_v","_instanceProperties","enableUpdating","_attributeToProperty","ctor","attrValue","_propertyValueToAttribute","removeAttribute","setAttribute","propName","getPropertyOptions","_propertyValueFromAttribute","shouldRequestUpdate","_valueHasChanged","has","_reflectingProperties","_hasRequestedUpdate","_enqueueUpdate","updateComplete","e","result","performUpdate","hasUpdated","_applyInstanceProperties","shouldUpdate","changedProperties","update","_markUpdated","firstUpdated","updated","_getUpdateComplete","size","_propertyToAttribute","standardProperty","element","kind","assign","clazz","placement","initializer","call","property","protoOrDescriptor","proto","legacyProperty","nativeShadow","Document","CSSStyleSheet","HAS_WEBXR_DEVICE_API","navigator","xr","self","XRSession","isSessionSupported","HAS_WEBXR_HIT_TEST_API","requestHitTestSource","HAS_RESIZE_OBSERVER","ResizeObserver","HAS_INTERSECTION_OBSERVER","IntersectionObserver","IS_WEBXR_AR_CANDIDATE","IS_ANDROID","userAgent","vendor","opera","check","test","substr","IS_IOS","MSStream","platform","maxTouchPoints","IS_AR_QUICKLOOK_CANDIDATE","tempAnchor","document","createElement","relList","supports","IS_SAFARI","IS_IOS_CHROME","IS_IOS_SAFARI","template","innerHTML","EPSILON","pow","isInteger","isFinite","floor","sign","x","Function","toString","match","target","TypeError","output","index","arguments","length","source","nextKey","EventDispatcher","listener","_listeners","listeners","indexOf","hasEventListener","listenerArray","splice","dispatchEvent","event","array","i","l","_lut","_seed","MathUtils","DEG2RAD","PI","RAD2DEG","generateUUID","d0","d1","d2","d3","toUpperCase","clamp","min","max","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","y","t","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","width","height","scalar","Error","w","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","round","sqrt","abs","atan2","distanceToSquared","dx","dy","normalize","alpha","v1","v2","offset","getX","getY","center","angle","Matrix3","error","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","fromArray","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","f","g","h","matrix","throwOnDegenerate","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","getInverse","transpose","r","tx","ty","sx","sy","rotation","cx","cy","theta","_canvas","ImageUtils","getDataURL","image","src","HTMLCanvasElement","canvas","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","uuid","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","create","isTexture","updateMatrix","setUvTransform","clone","copy","toJSON","meta","isRootObject","textures","metadata","generator","wrap","images","url","isArray","dispose","transformUv","uv","applyMatrix3","Vector4","z","acos","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","WebGLMultisampleRenderTarget","samples","isWebGLRenderTarget","setSize","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","qa","qb","qm","slerp","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","_onChangeCallback","quaternion","euler","isEuler","_order","c1","c3","s1","s3","axis","halfAngle","trace","vFrom","vTo","dot","step","angleTo","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","callback","Vector3","multiplyVectors","applyQuaternion","_quaternion","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector","projectOnVector","sub","normal","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","Box3","Infinity","minX","minY","minZ","maxX","maxY","maxZ","count","points","makeEmpty","il","expandByPoint","halfSize","_vector$1","add","object","expandByObject","box","isEmpty","point","vector","addScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","_box","union","children","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0","_v1","_v2","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","getSize","_points","setFromPoints","equals","v0","extents","j","_testAxis","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","distanceTo","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","DdN","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$1","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","isVector3","t14","scaleXSq","scaleYSq","scaleZSq","position","scale","x2","y2","z2","wx","wy","wz","determinant","_m1","invSX","invSY","invSZ","setFromRotationMatrix","left","right","top","bottom","near","far","Euler","DefaultOrder","asin","_matrix","makeRotationFromQuaternion","newOrder","_quaternion$1","setFromQuaternion","optionalResult","RotationOrders","Layers","mask","channel","layers","_object3DId","_v1$2","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","_onChange","defineProperties","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","premultiply","decompose","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","multiply","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","lookAt","setFromMatrixPosition","isCamera","isLight","extractRotation","inverse","remove","attach","getObjectById","id","getObjectByProperty","getObjectByName","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","serialize","library","toArray","isInstancedMesh","instanceMatrix","isMesh","isLine","isPoints","parameters","shape","material","uuids","extractFromCache","cache","values","data","recursive","child","_vector1","_vector2","_normalMatrix","Plane","setFromNormalAndCoplanarPoint","inverseNormalLength","negate","line","delta","start","startSign","endSign","end","intersectsPlane","optionalNormalMatrix","getNormalMatrix","referencePoint","coplanarPoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","targetLengthSq","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","getBarycoord","p3","uv1","uv2","uv3","addScaledVector","i0","i1","i2","getNormal","setFromCoplanarPoints","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","d5","d6","vb","va","_colorKeywords","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","Color","setRGB","isColor","setHex","setStyle","hex","style","handleAlpha","string","parseFloat","exec","color","components","parseInt","setHSL","charAt","setColorName","gammaFactor","safeInverse","copyGammaToLinear","copyLinearToGamma","copySRGBToLinear","copyLinearToSRGB","getHex","hue","saturation","lightness","getHSL","color1","color2","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","fog","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","MeshBasicMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","morphTargets","setValues","isMaterial","onBeforeCompile","customProgramCacheKey","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","morphNormals","srcPlanes","dstPlanes","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","usage","updateRange","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","fromBufferAttribute","setXY","setXYZ","applyNormalMatrix","setX","setY","setZ","setW","setXYZW","onUpload","DirectGeometry","vertices","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","group","faces","face","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","computeGroups","arrayMax","_bufferGeometryId","_m1$2","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","translate","makeTranslation","makeScale","setFromObject","positions","lineDistances","isGeometry","fromGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkIntersection","raycaster","intersect","intersectTriangle","checkBufferGeometryIntersection","morphPosition","morphInfluences","morphTargetInfluences","influence","isSkinnedMesh","boneTransform","intersection","morphTargetDictionary","ml","intersects","intersectsBox","groupMaterial","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","uvs_f","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","fromBufferGeometry","scope","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","faceVertexUvs2","uvsCopy","kl","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","sort","uvs1","newUvs1","newUvs2","vertex","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","srcVertexNormal","destVertexNormal","BoxBufferGeometry","depth","widthSegments","heightSegments","depthSegments","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","isMatrix3","isMatrix4","isVector2","isVector4","mergeUniforms","uniforms","merged","UniformsUtils","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isShaderMaterial","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","skew","makePerspective","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentXrEnabled","currentRenderTarget","getRenderTarget","setRenderTarget","render","clear","stencil","WebGLCubeRenderTarget","dummy","isWebGLCubeRenderTargetTexture","DataTexture","fromEquirectangularTexture","shader","tEquirect","currentMinFilter","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","isInterleavedBufferAttribute","deleteBuffer","buffer","delete","bufferType","cached","bytesPerElement","elementSize","createBuffer","bindBuffer","bufferData","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","background","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","state","objects","clearColor","planeMesh","boxMesh","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","renderList","forceClear","isScene","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","copyPosition","toneMapping","unshift","WebGLBindingStates","maxVertexAttributes","getParameter","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","bindVertexArrayObject","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","newAttributes","enabledAttributes","attributeDivisors","program","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","reset","resetDefaultState","setup","updateBuffers","programMap","stateMap","createVertexArray","createVertexArrayOES","getBindingState","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","saveCache","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","instanceColor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","WebGLCubeMaps","mapTextureMapping","currentRenderList","getRenderList","currentRenderState","getRenderState","setRenderList","setRenderState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","_bufferGeometry","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","wrapR","DataTexture3D","physical","transmission","transmissionMap","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","WebGLProgram","cacheKey","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","cachedUniforms","deleteShader","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","getParameters","shadows","environment","isMeshStandardMaterial","bones","skeleton","nVertexUniforms","nVertexMatrices","getMaxBones","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","cameras","list","UniformsCache","light","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","ShadowUniformsCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","identity","isPointLight","isHemisphereLight","LTC_1","LTC_2","WebGLRenderState","lightsArray","shadowsArray","setupLights","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","intersectsObject","depthMaterial","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","currentDepthMask","currentDepthFunc","currentDepthClear","enable","disable","depthMask","setFunc","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","equationToGL","100","101","102","MIN_EXT","MAX_EXT","factorToGL","200","201","202","204","210","208","206","203","205","209","207","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","cullFace","setPolygonOffset","factor","activeTexture","webglSlot","useProgram","setMaterial","frontFaceCW","setLineWidth","lineWidth","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","1000","1001","1002","filterToGL","1003","1004","1005","1006","1007","1008","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","textureNeedsPowerOfTwo","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","Group","WebXRController","_targetRay","_grip","_hand","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","onSessionEnd","disconnect","setFramebuffer","animation","isPresenting","onRequestReferenceSpace","updateInputSources","inputSources","removed","added","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","then","cameraLPos","cameraRPos","updateCamera","getCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","transform","WebGLMaterials","refreshUniformsCommon","uvScaleMap","uv2ScaleMap","refreshUniformsStandard","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","rangeMin","rangeMax","message","initGLContext","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","isGroup","isLOD","intersectsSprite","isImmediateRenderObject","renderObjects","isArrayCamera","camera2","renderObjectImmediate","lightsStateVersion","programCacheKey","programChange","needsLights","materialNeedsLights","progUniforms","uniformsList","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isOrthographicCamera","boneTexture","boneMatrices","boneTextureSize","setFromProjectionMatrix","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","__THREE_DEVTOOLS__","CustomEvent","detail","WebGL1Renderer","joints","inputState","pinching","XRHand","LITTLE_PHALANX_TIP","joint","inputPose","gripPose","handPose","targetRay","grip","hand","jointPose","getJointPose","jointRadius","indexTip","INDEX_PHALANX_TIP","thumbTip","THUMB_PHALANX_TIP","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","FogExp2","Fog","Scene","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","_geometry","interleavedBuffers","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","transformVertex","vertexPosition","mvPosition","setFromMatrixScale","_v1$4","_v2$2","LOD","_currentLevel","levels","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","addLevel","getCurrentLevel","getObjectForDistance","bind","calculateInverses","normalizeSkinWeights","skinWeight","manhattanLength","basePosition","skinIndex","weight","getComponent","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","Bone","bone","isBone","getBoneByName","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","linecap","linejoin","setColorAt","getMatrixAt","raycastTimes","instanceId","setMatrixAt","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","Line","computeLineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distanceSqToSegment","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","VideoTexture","video","requestVideoFrameCallback","updateVideo","CompressedTexture","CanvasTexture","DepthTexture","readyState","HAVE_CURRENT_DATA","isCanvasTexture","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","EPS","pu","pv","sliceCount","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivideFace","cols","aj","bj","rows","pushVertex","getVertexByIndex","correctUV","azimuth","subdivide","applyRadius","centroid","uvA","uvB","uvC","azi","correctUVs","correctSeam","generateUVs","TetrahedronBufferGeometry","OctahedronBufferGeometry","IcosahedronBufferGeometry","DodecahedronBufferGeometry","TubeBufferGeometry","tubularSegments","radialSegments","closed","frames","computeFrenetFrames","tangents","binormals","P","generateSegment","getPointAt","N","B","generateIndices","generateBufferData","TorusKnotBufferGeometry","tube","P1","P2","T","calculatePositionOnCurve","cu","su","quOverP","cs","TorusBufferGeometry","arc","Earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","prev","invSize","queue","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","last","sum","signedArea","insertNode","removeNode","again","area","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","mx","my","tanMin","sectorContainsSector","findHoleBridge","leftmost","px","py","intersectsPolygon","inside","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","Node$1","an","bp","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","extrudeByPath","getSpacedPoints","shapePoints","extractPoints","reverse","hl","ahole","concat","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextBufferGeometry","text","font","isFont","generateShapes","SphereBufferGeometry","phiStart","phiLength","thetaStart","thetaLength","thetaEnd","grid","verticesRow","uOffset","RingBufferGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","segment","thetaSegmentLevel","LatheBufferGeometry","segments","inverseSegments","base","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","indexOffset","shapeVertices","shapeHoles","shapeHole","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","CircleBufferGeometry","Geometries","freeze","__proto__","WireframeGeometry","edge","edges","edge1","edge2","o","ol","TetrahedronGeometry","OctahedronGeometry","IcosahedronGeometry","DodecahedronGeometry","PolyhedronGeometry","TubeGeometry","taper","bufferGeometry","TorusKnotGeometry","heightScale","TorusGeometry","TextGeometry","SphereGeometry","RingGeometry","PlaneGeometry","LatheGeometry","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","ConeGeometry","ConeBufferGeometry","CircleGeometry","BoxGeometry","RawShaderMaterial","STANDARD","PHYSICAL","TOON","MATCAP","Materials","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","parseKeyframeTrack","json","trackType","typeName","getTrackTypeForValueTypeName","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","startTime","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","slerpFlat","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","requestHeader","load","loadAsync","resolve","reject","setCrossOrigin","setPath","setResourcePath","setRequestHeader","loading","FileLoader","AnimationLoader","CompressedTextureLoader","ImageLoader","CubeTextureLoader","DataTextureLoader","TextureLoader","Curve","arcLengthDivisions","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","t2","calc","setTimeout","dataUriRegexResult","request","mimeType","isBase64","decodeURIComponent","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","XMLHttpRequest","open","callbacks","withCredentials","overrideMimeType","header","send","setResponseType","setWithCredentials","setMimeType","loaded","loadTexture","texDatas","mipmapCount","isCubemap","onImageLoad","onImageError","urls","texData","isJPEG","search","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","getTangent","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","makeRotationAxis","fromJSON","isEllipseCurve","twoPi","deltaAngle","samePoints","isArcCurve","pz","CatmullRomCurve3","curveType","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezierCurve","v3","CubicBezierCurve3","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","isCatmullRomCurve3","intPoint","isCubicBezierCurve","isCubicBezierCurve3","isLineCurve","isLineCurve3","isQuadraticBezierCurve","isQuadraticBezierCurve3","isSplineCurve","Curves","CurvePath","curves","autoClose","Path","currentPoint","Shape","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","SpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","DirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","isSpotLightShadow","scaleW","scaleH","makeOrthographic","isDirectionalLightShadow","SphericalHarmonics3","coeff","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","TextDecoder","decode","fromCharCode","escape","lastIndexOf","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","arrayBuffer","getArrayBuffer","TYPED_ARRAYS","typedArray","bufferAttribute","drawcalls","offsets","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","geometryShapes","bufferGeometryLoader","details","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","ImageBitmapLoader","createImageBitmap","fetch","ShapePath","subPaths","currentPath","Font","createPath","char","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","ha","FontLoader","isImageBitmapLoader","setOptions","blob","imageBitmap","catch","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","tmpPoints","tmpHoles","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","paths","chars","line_height","yMax","yMin","underlineThickness","ret","createPaths","substring","AudioContext","webkitAudioContext","AudioLoader","HemisphereLightProbe","sky","ground","AmbientLightProbe","bufferCopy","decodeAudioData","audioBuffer","isHemisphereLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_reservedRe","RegExp","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","node","findNode","nodeName","firstValidIndex","nCachedObjects_","bindings","unbind","root","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","action","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","_update","setTime","timeInSeconds","getRoot","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","GLBufferAttribute","Raycaster","PointCloud","ascSort","intersectObject","setBuffer","setType","setItemSize","setCount","setFromCamera","coords","unproject","intersectObjects","Spherical","other","setFromCartesianCoords","_vector$7","ImmediateRenderObject","_vector$9","_boneMatrix","_matrixWorldInv","SkeletonHelper","getBoneList","boneList","isSkeletonHelper","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","ENCODINGS","3000","3001","3002","3004","3005","3006","3007","_flatCamera","_lodPlanes","_sizeLods","_sigmas","lod","sizeLod","sigma","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","_createPlanes","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","weights","poleAxis","latitudinal","dTheta","mipInt","inputEncoding","_getCommonVertexShader","_getEncodings","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","cubemap","_getCubemapShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","convertSRGBToLinear","maxComponent","fExp","log2","col","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","exp","outputSize","Spline","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","initFromArray","getControlPointsArray","reparametrizeByArcLength","extractUrlBase","Handlers","setTexturePath","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","intersectsLine","isIntersectionPlane","getArea","barycoordFromPoint","midpoint","getMidpoint","getPlane","extractAllPoints","extrude","makeGeometry","distanceToManhattan","manhattanDistanceTo","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","gain","createGain","connect","getInput","autoplay","detune","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","delay","currentTime","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","setTargetAtTime","getFilters","setFilters","updateCubeMap","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","revision","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","setVerbosity","setSkipDequantization","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","decodeDracoFile","worker","taskKey","taskCache","cachedTask","promise","byteLength","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","_createGeometry","_releaseTask","geometryData","_loadLibrary","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","body","URL","createObjectURL","Worker","_taskCosts","_taskLoad","onmessage","terminate","decodeAttribute","draco","decoder","dracoGeometry","attributeName","attributeType","dracoArray","numComponents","num_components","numValues","num_points","DracoFloat32Array","GetAttributeFloatForAllPoints","DracoInt8Array","GetAttributeInt8ForAllPoints","DracoInt16Array","GetAttributeInt16ForAllPoints","DracoInt32Array","GetAttributeInt32ForAllPoints","DracoUInt8Array","GetAttributeUInt8ForAllPoints","DracoUInt16Array","GetAttributeUInt16ForAllPoints","DracoUInt32Array","GetAttributeUInt32ForAllPoints","GetValue","onModuleLoaded","DracoDecoderModule","module","Decoder","decoderBuffer","DecoderBuffer","Init","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","DecodeBufferToPointCloud","ok","ptr","error_msg","attributeID","GetAttributeByUniqueId","GetAttributeId","GetAttribute","numFaces","num_faces","GetFaceFromMesh","releaseDecoderModule","getDecoderModule","_a$1","_b","GLTFLoader","dracoLoader","ddsLoader","ktx2Loader","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFMaterialsTransmissionExtension","GLTFRegistry","removeAll","_onError","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","unregister","content","plugins","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_LIGHTS_PUNCTUAL","GLTFLightsExtension","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","lightDefs","loadLight","lightIndex","lightNode","lightDef","innerConeAngle","outerConeAngle","getMaterialType","extendParams","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","extendMaterialParams","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","transmissionFactor","transmissionTexture","textureIndex","textureDef","loadTextureImage","BINARY_EXTENSION_CHUNK_TYPES","headerView","magic","getUint32","chunkView","chunkIndex","chunkLength","chunkType","contentArray","byteOffset","GLTFMeshStandardSGMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","glossiness","glossinessMap","_extraUniforms","uniformName","USE_GLOSSINESSMAP","USE_ROUGHNESSMAP","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","GLTFCubicSplineInterpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","extendTexture","texCoord","stride2","stride3","td","m0","m1","WEBGL_CONSTANTS","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","INTERPOLATION","CUBICSPLINE","LINEAR","STEP","ALPHA_MODES","createDefaultMaterial","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","meshDef","targetNames","createAttributesKey","attributesKey","associations","primitiveCache","meshCache","refs","uses","cameraCache","lightCache","textureLoader","addPrimitiveAttributes","primitiveDef","assignAttributeAccessor","accessorIndex","accessor","gltfAttributeName","targets","maxDisplacement","expandByVector","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","addMorphTargets","toTrianglesDrawMode","numberOfTriangles","newIndices","newGeometry","_markDefs","getDependencies","dependencies","scenes","nodeDefs","nodes","skinDefs","skins","meshDefs","meshes","skinLength","nodeIndex","nodeLength","nodeDef","_addNodeRef","skin","_getNodeRef","ref","_invokeOne","_invokeAll","dependency","loadScene","loadNode","ext","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","uri","bufferViewDef","bufferViews","sparse","pendingBufferViews","TypedArray","elementBytes","itemBytes","byteStride","ibSlice","ibCacheKey","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","textureExtensions","webkitURL","sourceURI","isObjectURL","hasAlpha","getUint8","revokeObjectURL","sampler","samplers","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","useVertexColors","useFlatShading","useMorphTargets","useMorphNormals","pointsMaterial","lineMaterial","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","loadGeometries","primitives","createDracoPrimitive","dracoExtension","geometryPromise","meshIndex","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","inputAccessors","outputAccessors","inputAccessor","outputAccessor","targetName","outputArray","scaled","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","jointNode","sceneIndex","sceneDef","nodeIds","$retainerCount","$recentlyUsed","$evict","$evictionThreshold","$cache","CacheEvictionPolicy","evictionThreshold","recentlyUsedIndex","_a$2","_b$1","preloaded","dracoDecoderLocation","$loader","$evictionPolicy","$GLTFInstance","CachingGLTFLoader","GLTFInstance","_value","gltfLoads","progressCallback","rawGLTFLoads","fraction","loadWithLoader","progress","gltfInstanceLoads","rawGLTF","prepare","preparedGLTF","retain","originalDispose","disposed","release","_a$3","$velocity","Damper","xGoal","timeStepMilliseconds","xNormalization","deltaX","intermediateVelocity","intermediateX","newVelocity","acceleration","CSS2DObject","Element","parentNode","removeChild","cloneNode","CSS2DRenderer","_widthHalf","_heightHalf","viewProjectionMatrix","overflow","WebkitTransform","MozTransform","oTransform","display","objectData","distanceToCameraSquared","getDistanceToSquared","appendChild","object1","object2","sorted","filterAndFlatten","zMax","zIndex","numberNode","number","parseExpressions","inputString","expressions","parseIterations","expressionParseResult","parseExpression","expression","terms","remainingInput","IS_IDENT_RE","IS_OPERATOR_RE","IS_EXPRESSION_END_RE","parseFunctionArguments","identParseResult","parseIdent","identNode","parseHex","parseNumber","NOT_IDENT_RE","VALUE_RE","UNIT_RE","ALLOWED_UNITS","valueMatch","unitMatch","HEX_RE","hexMatch","expressionNodes","$visitedTypes","ASTWalker","visitedTypes","ast","remaining","ZERO","degreesToRadians","fallbackRadianValue","lengthToBaseMeters","fallbackMeterValue","normalizeUnit","unitNormalizers","rad","deg","mm","cm","fallback","_a$4","_b$2","_c","_d","$slot","$pivot","$referenceCount","$updateVisibility","$visible","Hotspot","classList","updatePosition","updateNormal","positionNodes","setComponent","normalNodes","assignedNodes","nodeType","Node","ELEMENT_NODE","visibilityAttribute","dataset","reduceVertices","model","Shadow","softness","shadowMaterial","isAnimated","setModel","animationNames","maxDimension","subScalar","shadowOffset","setSoftness","setMapSize","maxMapSize","widthPad","heightPad","setScaleAndOffset","radiansY","sizeY","inverseScale","_a$5","_b$3","DEFAULT_HALF_FOV","SAFE_RADIUS_RATIO","DEFAULT_TAN_FOV","$shadow","$cancelPendingSourceChange","$currentGLTF","normalWorld","Model","animationsByName","currentAnimationAction","modelContainer","idealCameraDistance","fieldOfViewAspect","currentGLTF","updateFraming","async","$renderer","animationTime","hasActiveAnimation","crossfadeTime","animationClip","lastAnimationAction","framedRadius","radiusXZ","shadowIntensity","shadowSoftness","setIntensity","setRotation","hotspot","viewerPosition","forHotspots","hide","show","orient","DEFAULT_TAN_FOV$1","ModelScene","isDirty","exposure","canScale","framedFieldOfView","goalTarget","targetDamperX","targetDamperY","targetDamperZ","activeCamera","onModelLoad","setSource","frameModel","vertical","setShadowIntensity","modelX","modelY","modelZ","updateTarget","goal","setShadowRotation","yaw","worldX","worldZ","hasModel","setShadowSoftness","pixelPosition","hits","hit","shaderMaterial","_mipmapMaterial","_mesh$1","_flatCamera$1","_tempTarget","RoughnessMipmapper","roughnessUpdated","oldTarget","newRoughnessTarget","mip","deserializeUrl","toFullUrl","assertIsArCandidate","missingApis","partialUrl","location","debounce","ms","timer","args","clearTimeout","lowerLimit","upperLimit","resolveDpr","HAS_META_VIEWPORT_TAG","metas","head","querySelectorAll","devicePixelRatio","isDebugMode","debugQueryParameter","ModelViewerElement","debugMode","DELTA_PHI","addCorner","cornerX","cornerY","PlacementBox","numVertices","goalOpacity","opacityDamper","hitPlane","shadowHeight","screenX","screenY","hitResult","positionAndNormalFromPoint","offsetHeight","_a$6","_b$4","_c$1","_d$1","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_x$1","_y$1","_z$1","_0","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_11","_12","ARStatus","$presentedScene","$placementBox","$lastTick","$turntableRotation","$oldShadowIntensity","$oldBackground","$rafId","$currentSession","$tick","$refSpace","$viewerRefSpace","$frame","$initialized","$initialModelToWorld","$placementComplete","$initialHitSource","$transientHitTestSource","$inputSource","$isTranslating","$isRotating","$isScaling","$lastDragPosition","$lastScalar","$goalPosition","$goalYaw","$goalScale","$xDamper","$yDamper","$zDamper","$yawDamper","$scaleDamper","$damperRate","$resolveCleanup","$exitWebXRButtonContainer","$onWebXRFrame","$postSessionCleanup","$updateCamera","$placeInitially","$getHitPoint","$onSelectStart","$onSelectEnd","$onUpdateScene","$fingerSeparation","$processInput","$moveScene","$onExitWebXRButtonContainerClick","vector3$1","hitPosition","ARRenderer","stopPresenting","hitSource","fingers","getHitTestResultsForTransientInput","gamepad","getHit","threeRenderer","requestSession","requiredFeatures","optionalFeatures","domOverlay","shadowRoot","querySelector","waitForXRAnimationFrame","_reject","$onResize","screen","framebufferWidth","framebufferHeight","exitButton","presentedScene","waitForAnimationFrame","setHotspotsVisibility","currentSession","resolveARSession","once","setCamera","XRRay","DOMPoint","space","offsetRay","hitTestSource","performance","cleanupPromise","setShadowScaleAndOffset","orientHotspots","requestUpdate","getBoundingClientRect","cancel","hitSourceInitial","getTarget","setTarget","cameraMatrix","pointTowards","hitTestResults","getHitTestResults","hitMatrix","placeModel","requestHitTestSourceForTransientInput","profile","modelToWorld","modelPosition","setPosition","world2Model","fingerOne","fingerTwo","deltaY","thisDragX","finger","oldScale","newScale","updateOpacity","preRender","Debugger","THREE","$threeGLTF","$gltf","$gltfElementMap","$threeObjectMap","$parallelTraverseThreeScene","$correlateOriginalThreeGLTF","$correlateCloneThreeGLTF","CorrelatedSceneGraph","threeGLTF","threeObjectMap","gltfElementMap","upstreamCorrelatedSceneGraph","gltfElementReference","threeObject","gltfElement","threeObjects","Set","cloneThreeGLTF","originalThreeGLTF","originalGLTF","cloneGLTF","cloneThreeObjectMap","cloneGLTFELementMap","cloneObject","elementReference","cloneElement","cloneObjects","sceneOne","sceneTwo","pos","quat","bindBoneMatrix","relativeMatrix","globalMatrix","targetParentPos","targetPos","sourceParentPos","sourcePos","targetDir","sourceDir","SkeletonUtils","sourceLookup","cloneLookup","parallelTraverse","sourceNode","clonedNode","clonedMesh","sourceMesh","sourceBones","$prepared","$prepare","$preparedGLTF","$clone","prepared","GLTFInstanceConstructor","alphaChunk","$cloneAndPatchMaterial","$correlatedSceneGraph","ModelViewerGLTFInstance","meshesToDuplicate","Renderer","singleton","roughnessMipmapper","duplicateMaterials","backMaterial","duplicateMaterial","meshBack","correlatedSceneGraph","sourceUUIDToClonedMaterial","oldOnBeforeCompile","_a$7","_b$5","RGBELoader","rgbe_error","rgbe_error_code","msg","fgets","lineLimit","consume","chunk","RGBEByteToRGBFloat","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","floatView","int32View","toHalf","val","byteArray","rgbe_header_info","gamma_re","exposure_re","format_re","dimensions_re","comments","programtype","gamma","RGBE_ReadHeader","image_rgba_data","data_rgba","byteValue","scanline_buffer","ptr_end","off","isEncodedRun","rgbeStart","scanline_width","num_scanlines","RGBE_ReadPixels_RLE","numElements","floatArray","halfArray","setDataType","EnvironmentScene","roomMaterial","boxMaterial","mainLight","room","box1","box2","box3","box4","box5","box6","light1","createAreaLightMaterial","light2","light3","light4","light5","light6","setScalar","HDR_FILE_RE","ldrLoader","hdrLoader","$environmentMapCache","$generatedEnvironmentMap","$PMREMGenerator","$addMetadata","$loadEnvironmentMapFromUrl","$loadGeneratedEnvironmentMap","TextureUtils","pmremGenerator","compileEquirectangularShader","isHDR","cubeUV","fromEquirectangular","skyboxUrl","environmentMapUrl","progressTracker","updateGenerationProgress","beginActivity","environmentMapLoads","skyboxLoads","environmentMap","skybox","loadEquirectAsCubeUV","defaultScene","fromScene","allTargetsLoad","targetLoads","_a$8","_b$6","$onWebGLContextLost","$webGLContextLostHandler","$singleton","dpr","minScale","debugger","multipleScenesVisible","avgFrameDuration","canvasElement","canvas3D","arRenderer","textureUtils","canRender","updateRendererSize","lastTick","scaleFactor","$updateSize","widthCSS","heightCSS","addScene","removeScene","$canvas","visibleScenes","visibleInput","modelIsVisible","$userInputElement","parentElement","userInputElement","$tick$1","exposureIsNumber","updateShadow","selectCanvas","updateRendererScale","orderedScenes","$sceneIsReady","createContext","context2D","clearRect","sourceEvent","_a$9","_b$7","$ongoingActivities","$announceTotalProgress","$eventDelegate","ProgressTracker","createDocumentFragment","ongoingActivityCount","activity","nextProgress","totalProgress","statusCount","completedActivities","_a$a","_b$8","_c$2","_d$2","_e$1","_f$1","_g$1","_h$1","_j$1","_k$1","__decorate","decorators","desc","getOwnPropertyDescriptor","blobCanvas","blobContext","$template","$fallbackResizeHandler","$defaultAriaLabel","$resizeObserver","$intersectionObserver","$clearModelTimeout","$onContextLost","$contextLostHandler","$loaded","$isElementInViewport","$announceModelVisibility","$ariaLabel","$loadedTime","$updateSource","$markLoaded","$container","$scene","$needsRender","$onModelLoad","$progressTracker","$getLoaded","$getModelIsVisible","$shouldAttemptPreload","$hasTransitioned","toVector3D","ModelViewerElementBase","alt","boundingRect","oldVisibility","newVisibility","styleElement","attachShadow","isConnected","rect","entries","entry","contentRect","isIntersecting","rootMargin","is","tagName","prepareTemplate","makeTemplate","modelCacheSize","minimumRenderScale","connectedCallback","observe","registerScene","disconnectedCallback","unobserve","unregisterScene","ariaLabel","encoderOptions","displayCanvas","qualityArgument","idealAspect","outputWidth","outputHeight","oldHeight","oldWidth","msToBlob","toBlob","base64DataUrl","typeMatch","base64","byteCharacters","byteArrays","byteNumbers","dataUrlToBlob","_time","_delta","sourceError","updateSourceProgress","setModelSource","__decorate$1","$changeAnimation","$paused","$annotationRenderer","$hotspotMap","$mutationCallback","$observer","$addHotspot","$removeHotspot","worldToModel","worldToModelNormal","enumerationDeserializer","allowedNames","valueString","names","valueNode","_error","__decorate$2","isWebXRBlocked","isSceneViewerBlocked","deserializeQuickLookBrowsers","deserializeARModes","ARMode","$arButtonContainer","$enterARWithWebXR","$openSceneViewer","$openIOSARQuickLook","$canActivateAR","$arMode","$arModes","$canLaunchQuickLook","$quickLookBrowsers","$arAnchor","$onARButtonContainerClick","$onARStatus","$onARTap","$selectARMode","_a$b","_b$9","_c$3","$evaluate","$lastValue","Evaluator","basis","PercentageEvaluator","CalcEvaluator","EnvEvaluator","evaluatable","isConstant","evaluated","intrinsics","keywords","auto","basisNode","autoSubstituteNode","evaluatedNode","keyword","$percentage","$basis","percentage","$identNode","envFunction","pageYOffset","scrollHeight","documentElement","clientHeight","innerHeight","IS_MULTIPLICATION_RE","$evaluator","calcFunction","secondOrderTerms","term","previousTerm","operator","leftValue","OperatorEvaluator","evaluatableFor","$operator","$left","$right","leftNode","rightNode","leftUnit","rightValue","rightUnit","$evaluatables","$intrinsics","StyleEvaluator","firstExpression","applyIntrinsics","_a$c","_b$a","_c$4","_d$3","$instances","$activateListener","$deactivateListener","$notifyInstances","$notify","$scrollCallback","ScrollObserver","instance","passive","$computeStyleCallback","$astWalker","$dependencies","$scrollHandler","$onScroll","StyleEffector","newDependencies","oldDependencies","walk","functionNode","firstTerm","observer","environmentState","relatedState","observeEffects","getIntrinsics","originalUpdated","originalConnectedCallback","originalDisconnectedCallback","$styleEffector","$styleEvaluator","$updateEvaluator","$evaluateAndSync","writable","observeEffectsFor","updateHandler","_a$d","_b$b","_c$5","_d$4","_e$2","_f$2","_g$2","_h$2","_j$2","_k$2","_l$1","DEFAULT_OPTIONS","minimumRadius","maximumRadius","minimumPolarAngle","maximumPolarAngle","minimumAzimuthalAngle","maximumAzimuthalAngle","minimumFieldOfView","maximumFieldOfView","eventHandlingBehavior","interactionPolicy","$spherical","$goalSpherical","$thetaDamper","$phiDamper","$radiusDamper","$logFov","$goalLogFov","$fovDamper","$options","$touchMode","$canInteract","$interactionEnabled","$userAdjustOrbit","$isUserChange","$isStationary","$moveCamera","$isUserPointing","$pointerIsDown","$lastPointerPosition","$lastTouches","$pixelLengthToSphericalAngle","$twoTouchDistance","$wrapAngle","$onMouseMove","$onMouseDown","$onMouseUp","$onTouchStart","$onTouchEnd","$onTouchMove","$onWheel","$onKeyDown","$handlePointerMove","$handleSinglePointerMove","$handlePointerDown","$handleSinglePointerDown","$handlePointerUp","$handleWheel","$handleKey","TOUCH_EVENT_RE","KEYBOARD_ORBIT_INCREMENT","KeyCode","ChangeSource","SmoothControls","clientX","clientY","setOrbit","setFieldOfView","jumpToGoal","interactionEnabled","cursor","nearPlane","farPlane","goalTheta","goalPhi","goalRadius","nextTheta","nextPhi","nextRadius","makeSafe","deltaTheta","deltaPhi","deltaZoom","dThetaLimit","deltaRatio","handled","goalLogFov","setFromSpherical","getRootNode","activeElement","adjustOrbit","pixelLength","touchOne","touchTwo","xOne","yOne","xTwo","yTwo","xDelta","yDelta","touches","cancelable","pointer","_event","deltaMode","relevantKey","keyCode","easeInOutQuad","interpolate","ease","timeline","initialValue","keyframes","lastValue","keyframe","totalWeight","reduce","ratios","ratio","sequence","__decorate$3","wiggle","fade","MINIMUM_RADIUS_RATIO","AZIMUTHAL_QUADRANT_LABELS","POLAR_TRIENT_LABELS","InteractionPromptStrategy","InteractionPromptStyle","InteractionPolicy","fieldOfViewIntrinsics","$zoomAdjustedFieldOfView","minFieldOfViewIntrinsics","maxFieldOfViewIntrinsics","cameraOrbitIntrinsics","defaultTerms","minCameraOrbitIntrinsics","maxCameraOrbitIntrinsics","orbitIntrinsics","defaultRadius","cameraTargetIntrinsics","HALF_PI","THIRD_PI","QUARTER_PI","TAU","$controls","$promptElement","$promptAnimatedContainer","$deferInteractionPrompt","$updateAria","$updateCameraForRadius","$blurHandler","$focusHandler","$changeHandler","$pointerChangeHandler","$onBlur","$onFocus","$onChange","$onPointerChange","$waitingToPromptUser","$userHasInteracted","$promptElementVisibleTime","$lastPromptOffset","$focusedTime","$lastSpherical","$jumpCamera","$initialized$1","$maintainThetaPhi","$syncCameraOrbit","$syncFieldOfView","$syncCameraTarget","$syncMinCameraOrbit","$syncMaxCameraOrbit","$syncMinFieldOfView","$syncMaxFieldOfView","__decorate$4","$currentEnvironmentMap","$applyEnvironmentMap","$updateEnvironment","$cancelEnvironmentUpdate","$onPreload","_a$e","_b$c","$modelViewerStatusInstance","$updateStatus","__decorate$5","RevealStrategy","LoadingStrategy","PosterDismissalSource","loadingStatusAnnouncer","registeredInstanceStatuses","loadingPromises","statusElement","statusUpdateInProgress","updateStatus","pointerEvents","modelViewer","onUnregistered","loadShouldBeMeasured","loadAttemptCompletes","resolveHandler","modelViewerStatusInstance","statuses","instanceStatus","firstKey","_map","getFirstMapKey","textContent","$defaultProgressBarElement","$defaultProgressMaskElement","$posterContainerElement","$defaultPosterElement","$posterDismissalSource","$showPoster","$hidePoster","$modelIsRevealed","$updateProgressBar","$lastReportedProgress","$transitioned","$ariaLabelCallToAction","$clickHandler","$keydownHandler","$progressHandler","$onClick","$onKeydown","$onProgress","ThreeDOMMessageType","$ownerModel","ThreeDOMElement","kernel","ownerModel","$kernel","$uri","$name","_a$f","_b$d","_c$6","$pbrMetallicRoughness","$normalTexture","$occlusionTexture","$emissiveTexture","$kernel$1","$name$1","_a$g","$materials","$kernel$2","_a$h","_b$e","$kernel$3","$baseColorFactor","$baseColorTexture","$metallicRoughnessTexture","$metallicFactor","$roughnessFactor","_a$i","_b$f","$kernel$4","$minFilter","$magFilter","$wrapS","$wrapT","$name$2","_a$j","$kernel$5","$texture","_a$k","_b$g","$kernel$6","$source","$sampler","$name$3","_a$l","_b$h","_c$7","_d$5","_e$3","_f$3","ThreeDOMElementMap","serialized","deserialize","getElementsByType","pbr-metallic-roughness","mutate","texture-info","$onMessageEvent","$messageEventHandler","$port","$model","$elementsByLocalId","$localIdsByElement","$elementsByType","$pendingMutations","$nextMutationId","ModelKernel","port","types","mutationId","ElementConstructor","close","applied","pendingMutation","_a$m","$modelGraft","$port$1","$messageEventHandler$1","$onMessageEvent$1","ModelGraftManipulator","modelGraft","getLocallyUniqueId","$callbacks","$visitMesh","$visitElement","$visitNode","$visitScene","$visitMaterial","GLTFTreeVisitor","allScenes","visited","elementList","visit","childNodeIndex","_a$n","$correlatedObjects","$sourceObject","$graft","$id","ThreeDOMElement$1","graft","correlatedObjects","adopt","internalID","sourceObject","_property","_a$o","$threeTextures","$bufferViewImages","Image$1","correlatedTextures","isMinFilter","minFilterValues","isMagFilter","magFilterValues","isWrapMode","wrapModes","defaultValues","$threeTextures$1","Sampler$1","isValidSamplerValue","_a$p","_b$i","$source$1","$sampler$1","Texture$2","glTF","samplerIndex","imageIndex","_a$q","$texture$1","TextureInfo$1","textureInfo","_a$r","_b$j","$threeMaterials","$baseColorTexture$1","$metallicRoughnessTexture$1","PBRMetallicRoughness$1","correlatedMaterials","baseColorTextures","metallicRoughnessTextures","includes","_a$s","_b$k","_c$8","_d$6","$pbrMetallicRoughness$1","$normalTexture$1","$occlusionTexture$1","$emissiveTexture$1","Material$2","normalTextures","occlusionTextures","emissiveTextures","_a$t","_b$l","$modelUri","$materials$1","Model$2","modelUri","_a$u","_b$m","$model$1","$correlatedSceneGraph$1","$elementsByInternalId","$eventDelegate$1","ModelGraft","getElementByInternalId","THREE_TO_WEBGL","GLTFExporter","onDone","binary","trs","onlyVisible","truncateDrawRange","embedImages","forcePowerOfTwoTextures","includeCustomExtensions","cachedCanvas","outputJSON","nodeMap","cachedData","attributesNormalized","uids","uid","getUID","equalArray","array1","every","getPaddedBufferSize","bufferSize","getPaddedArrayBuffer","paddingByte","paddedLength","serializeUserData","gltfProperty","applyTextureTransform","didTransform","transformDef","processBuffer","processAccessor","end2","bufferViewTarget","minMax","POSITIVE_INFINITY","NEGATIVE_INFINITY","getMinMax","componentSize","dataView","setFloat32","setUint32","setUint16","setUint8","gltfBufferView","processBufferView","gltfAccessor","3","4","16","processImage","cachedImages","gltfImage","ctx","reader","FileReader","readAsArrayBuffer","onloadend","processBufferViewImage","processSampler","gltfSampler","processTexture","gltfTexture","processMaterial","gltfMaterial","KHR_materials_unlit","KHR_materials_pbrSpecularGlossiness","metalRoughMapDef","baseColorMapDef","specularMapDef","emissiveMapDef","normalMapDef","occlusionMapDef","processMesh","meshCacheKeyParts","meshCacheKey","gltfMesh","nameConversion","originalNormal","isNormalizedNormalAttribute","createNormalizedNormalAttribute","modifiedAttribute","reverseDictionary","warned","baseAttribute","relativeAttribute","processAnimation","Utils","mergeMorphTargetTracks","trackBinding","trackNode","trackProperty","outputItemSize","processSkin","rootJoint","processLight","processNode","gltfNode","isOrtho","gltfCamera","orthographic","perspective","processCamera","processScene","gltfScene","objectsWithoutScene","processObjects","processInput","extensionsUsedList","binaryChunk","binaryChunkPrefix","jsonChunk","TextEncoder","encode","stringToArrayBuffer","jsonChunkPrefix","totalByteLength","glbBlob","glbReader","readAsDataURL","base64data","insertKeyframe","tolerance","mergedTracks","sourceTracks","sourceTrack","sourceTrackBinding","sourceTrackNode","mergedTrack","targetCount","sourceInterpolant","keyframeIndex","$updateThreeSide","$currentGLTF$1","$modelGraft$1","$mainPort","$threePort","$manipulator","$modelKernel","$onModelChange","$onModelGraftMutation","__decorate$7","DEFAULT_ROTATION_SPEED","rotationRateIntrinsics","$autoRotateStartTime","$radiansPerSecond","$syncRotationRate","$cameraChangeHandler","$onCameraChange","_a","AnnotationModelViewerElement","mutations","mutation","MutationRecord","addedNodes","removedNodes","MutationObserver","ShadyDOM","childList","observeChildren","unobserveChildren","pixelX","pixelY","updateHotspots","increment","addHotspot","decrement","removeHotspot","AnnotationMixin","SceneGraphModelViewerElement","currentKernel","deactivate","port1","port2","MessageChannel","oldModelGraft","manipulator","currentModelGraft","currentManipulator","opts","__decorate$6","SceneGraphMixin","StagingModelViewerElement","autoRotate","autoRotateDelay","rotationPerSecond","rotationDelta","turntableRotation","StagingMixin","EnvironmentModelViewerElement","environmentImage","skyboxImage","texturesLoad","generateEnvironmentMapAndSkybox","errorOrPromise","EnvironmentMixin","ControlsModelViewerElement","cameraControls","cameraOrbit","cameraTarget","fieldOfView","minCameraOrbit","maxCameraOrbit","minFieldOfView","maxFieldOfView","interactionPromptThreshold","interactionPromptStyle","interactionPrompt","getFieldOfView","controls","enableInteraction","disableInteraction","toggle","applyOptions","getCameraOrbit","jumpCameraToGoal","thresholdTime","updateNearFar","lastTheta","lastPhi","getCameraSpherical","lastAzimuthalQuadrant","azimuthalQuadrant","lastPolarTrient","polarTrient","oldFramedFieldOfView","newFramedFieldOfView","updateAspect","ControlsMixin","ARModelViewerElement","ar","arScale","arModes","iosSrc","quickLookBrowsers","activateAR","canActivateAR","supportsPresentation","contains","present","gltfSrc","locationUrl","modelUrl","intentParams","encodeURIComponent","intent","history","back","click","anchor","img","ARMixin","LoadingModelViewerElement","poster","reveal","throttled","flush","throttle","setDRACODecoderLocation","getDRACODecoderLocation","registerInstance","unregisterInstance","backgroundImage","dismissPoster","posterContainerElement","defaultPosterElement","tabIndex","LoadingMixin","AnimationModelViewerElement","animationName","animationCrossfadeDuration","availableAnimations","updateAnimation","stopAnimation","playAnimation","AnimationMixin","SuperClass","$endPolyfillCoordination","hasAttribute","applyFocusVisiblePolyfill","coordinationHandler","coordinateWithPolyfill","FocusVisiblePolyfillMixin","customElements","define"],"mappings":";;;;;;;;;;;;;AAiBwBA,OAAOC,KAAKC,UAAUC,MAAM,GAuBrCC,OAAOC,cAClBA,aAAaC,aAAa,WAAY,CAAEC,WAAaC,GAAMA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmB/D,IAAIC,GAAwB,EAG5B,MACI,IACI,MAAMC,EAAU,CACZC,cAEI,OADAF,GAAwB,GACjB,IAIfL,OAAOQ,iBAAiB,OAAQF,EAASA,GAEzCN,OAAOS,oBAAoB,OAAQH,EAASA,GAEhD,MAAOI,MAbX;;;;;;;;;;;;;;AAkCsB,oBAAXV,SACNA,OAAwB,kBAAMA,OAAwB,gBAAI,KAAKW,KAAK;;;;;;;;;;;;;SAgB1C,IAApBX,OAAOY,eACqC,IAAvCZ,OAAOY,SAASC,oBAC5BC,QAAQC,KAAK;;;;;;;;;;;;;IA8BjBf,OAAOgB,0BACH,CAACC,EAAMC,IAASD,EACpB,MAAME,EAAmB,CACrBC,YAAYC,EAAOC,GACf,OAAQA,GACJ,KAAKC,QACD,OAAOF,EAAQ,GAAK,KACxB,KAAKG,OACL,KAAKC,MAGD,OAAgB,MAATJ,EAAgBA,EAAQK,KAAKC,UAAUN,GAEtD,OAAOA,GAEXD,cAAcC,EAAOC,GACjB,OAAQA,GACJ,KAAKC,QACD,OAAiB,OAAVF,EACX,KAAKO,OACD,OAAiB,OAAVP,EAAiB,KAAOO,OAAOP,GAC1C,KAAKG,OACL,KAAKC,MACD,OAAOC,KAAKG,MAAMR,GAE1B,OAAOA,IAOTS,EAAW,CAACT,EAAOU,IAEdA,IAAQV,IAAUU,GAAQA,GAAOV,GAAUA,GAEhDW,EAA6B,CAC/BC,WAAW,EACXX,KAAM1B,OACNsC,UAAWf,EACXgB,SAAS,EACTC,WAAYN,GAmBhB,MAAMO,UAAwBC,YAC1BlB,cACImB,QACAC,KAAKC,aAMTC,gCAEIF,KAAKG,WACL,MAAMC,EAAa,GAUnB,OAPAJ,KAAKK,iBAAiBC,QAAQ,CAACC,EAAGC,KAC9B,MAAMC,EAAOT,KAAKU,0BAA0BF,EAAGD,QAClCI,IAATF,IACAT,KAAKY,wBAAwBC,IAAIJ,EAAMD,GACvCJ,EAAWjC,KAAKsC,MAGjBL,EAQXxB,gCAEI,IAAKoB,KAAKc,eAAetC,0BAA0B,mBAAoBwB,OAAQ,CAC3EA,KAAKK,iBAAmB,IAAIU,IAE5B,MAAMC,EAAkBhC,OAAOiC,eAAejB,MAAMK,sBAC5BM,IAApBK,GACAA,EAAgBV,QAAQ,CAACC,EAAGW,IAAMlB,KAAKK,iBAAiBQ,IAAIK,EAAGX,KA0B3E3B,sBAAsBuC,EAAMrD,EAAU0B,GAWlC,GAPAQ,KAAKoB,yBACLpB,KAAKK,iBAAiBQ,IAAIM,EAAMrD,GAM5BA,EAAQuD,YAAcrB,KAAKsB,UAAUR,eAAeK,GACpD,OAEJ,MAAMI,EAAsB,iBAATJ,EAAoBK,SAAW,KAAKL,EACjDM,EAAazB,KAAK0B,sBAAsBP,EAAMI,EAAKzD,QACtC6C,IAAfc,GACAzC,OAAO2C,eAAe3B,KAAKsB,UAAWH,EAAMM,GA2BpD7C,6BAA6BuC,EAAMI,EAAKzD,GACpC,MAAO,CAEHc,MACI,OAAOoB,KAAKuB,IAEhB3C,IAAIC,GACA,MAAM+C,EAAW5B,KAAKmB,GACtBnB,KAAKuB,GAAO1C,EACZmB,KACK6B,sBAAsBV,EAAMS,EAAU9D,IAE/CgE,cAAc,EACdC,YAAY,GAepBnD,0BAA0BuC,GACtB,OAAOnB,KAAKK,kBAAoBL,KAAKK,iBAAiB2B,IAAIb,IACtD3B,EAORZ,kBAEI,MAAMqD,EAAYjD,OAAOiC,eAAejB,MAYxC,GAXKiC,EAAUnB,eA1JL,cA2JNmB,EAAU9B,WAEdH,KAAc,WAAI,EAClBA,KAAKoB,yBAELpB,KAAKY,wBAA0B,IAAIG,IAK/Bf,KAAKc,eAAetC,0BAA0B,aAAcwB,OAAQ,CACpE,MAAMkC,EAAQlC,KAAKmC,WAEbC,EAAW,IACVpD,OAAOqD,oBAAoBH,MACc,mBAAjClD,OAAOsD,sBACdtD,OAAOsD,sBAAsBJ,GAC7B,IAGR,IAAK,MAAM1B,KAAK4B,EAIZpC,KAAKuC,eAAe/B,EAAG0B,EAAM1B,KAQzC5B,iCAAiCuC,EAAMrD,GACnC,MAAM2B,EAAY3B,EAAQ2B,UAC1B,OAAqB,IAAdA,OACHkB,EACsB,iBAAdlB,EACJA,EACiB,iBAAT0B,EAAoBA,EAAKqB,mBAAgB7B,EAQ7D/B,wBAAwBC,EAAOU,EAAKK,EAAaN,GAC7C,OAAOM,EAAWf,EAAOU,GAQ7BX,mCAAmCC,EAAOf,GACtC,MAAMgB,EAAOhB,EAAQgB,KACfY,EAAY5B,EAAQ4B,WAAaf,EACjC8D,EAAsC,mBAAd/C,EAA2BA,EAAYA,EAAU+C,cAC/E,OAAOA,EAAgBA,EAAc5D,EAAOC,GAAQD,EAUxDD,iCAAiCC,EAAOf,GACpC,QAAwB6C,IAApB7C,EAAQ6B,QACR,OAEJ,MAAMb,EAAOhB,EAAQgB,KACfY,EAAY5B,EAAQ4B,UAG1B,OAFoBA,GAAaA,EAAUgD,aACvC/D,EAAiB+D,aACF7D,EAAOC,GAM9BF,aACIoB,KAAK2C,aAAe,EACpB3C,KAAK4C,eACD,IAAIC,QAASC,GAAQ9C,KAAK+C,wBAA0BD,GACxD9C,KAAKgD,mBAAqB,IAAIjC,IAC9Bf,KAAKiD,0BAGLjD,KAAK6B,wBAcTjD,0BAGIoB,KAAKkD,YACA7C,iBAAiBC,QAAQ,CAAC6C,EAAI3C,KAC/B,GAAIR,KAAKc,eAAeN,GAAI,CACxB,MAAM3B,EAAQmB,KAAKQ,UACZR,KAAKQ,GACPR,KAAKoD,sBACNpD,KAAKoD,oBAAsB,IAAIrC,KAEnCf,KAAKoD,oBAAoBvC,IAAIL,EAAG3B,MAO5CD,2BAIIoB,KAAKoD,oBAAoB9C,QAAQ,CAACC,EAAGC,IAAMR,KAAKQ,GAAKD,GACrDP,KAAKoD,yBAAsBzC,EAE/B/B,oBAGIoB,KAAKqD,iBAETzE,sBACyC+B,IAAjCX,KAAK+C,0BACL/C,KAAK+C,0BACL/C,KAAK+C,6BAA0BpC,GAQvC/B,wBAKAA,yBAAyBuC,EAAM5B,EAAKV,GAC5BU,IAAQV,GACRmB,KAAKsD,qBAAqBnC,EAAMtC,GAGxCD,qBAAqBuC,EAAMtC,EAAOf,EAAU0B,GACxC,MAAM+D,EAAOvD,KAAKkD,YACZzC,EAAO8C,EAAK7C,0BAA0BS,EAAMrD,GAClD,QAAa6C,IAATF,EAAoB,CACpB,MAAM+C,EAAYD,EAAKE,0BAA0B5E,EAAOf,GAExD,QAAkB6C,IAAd6C,EACA,OAUJxD,KAAK2C,aAhVwB,EAgVT3C,KAAK2C,aACR,MAAba,EACAxD,KAAK0D,gBAAgBjD,GAGrBT,KAAK2D,aAAalD,EAAM+C,GAG5BxD,KAAK2C,cAAmC,EAApB3C,KAAK2C,cAGjC/D,qBAAqBuC,EAAMtC,GAGvB,GA9ViC,EA8V7BmB,KAAK2C,aACL,OAEJ,MAAMY,EAAOvD,KAAKkD,YAIZU,EAAWL,EAAK3C,wBAAwBoB,IAAIb,GAClD,QAAiBR,IAAbiD,EAAwB,CACxB,MAAM9F,EAAUyF,EAAKM,mBAAmBD,GAExC5D,KAAK2C,aAxWuB,GAwWR3C,KAAK2C,aACzB3C,KAAK4D,GAEDL,EAAKO,4BAA4BjF,EAAOf,GAE5CkC,KAAK2C,cAAmC,GAApB3C,KAAK2C,cAQjC/D,sBAAsBuC,EAAMS,EAAU9D,GAClC,IAAIiG,GAAsB,EAE1B,QAAapD,IAATQ,EAAoB,CACpB,MAAMoC,EAAOvD,KAAKkD,YAClBpF,EAAUA,GAAWyF,EAAKM,mBAAmB1C,GACzCoC,EAAKS,iBAAiBhE,KAAKmB,GAAOS,EAAU9D,EAAQ8B,aAC/CI,KAAKgD,mBAAmBiB,IAAI9C,IAC7BnB,KAAKgD,mBAAmBnC,IAAIM,EAAMS,IAMd,IAApB9D,EAAQ6B,SAnYY,GAoYlBK,KAAK2C,oBAC4BhC,IAA/BX,KAAKkE,wBACLlE,KAAKkE,sBAAwB,IAAInD,KAErCf,KAAKkE,sBAAsBrD,IAAIM,EAAMrD,KAKzCiG,GAAsB,GAGzB/D,KAAKmE,qBAAuBJ,IAC7B/D,KAAK4C,eAAiB5C,KAAKoE,kBAgBnCxF,cAAcuC,EAAMS,GAEhB,OADA5B,KAAK6B,sBAAsBV,EAAMS,GAC1B5B,KAAKqE,eAKhBzF,uBACIoB,KAAK2C,aA3akB,EA2aH3C,KAAK2C,aACzB,UAGU3C,KAAK4C,eAEf,MAAO0B,IAIP,MAAMC,EAASvE,KAAKwE,gBAOpB,OAHc,MAAVD,SACMA,GAEFvE,KAAKmE,oBAEjBA,0BACI,OA/buB,EA+bfnE,KAAK2C,aAEjB8B,iBACI,OAnckB,EAmcVzE,KAAK2C,aAkBjB/D,gBAII,IAAKoB,KAAKmE,oBACN,OAGAnE,KAAKoD,qBACLpD,KAAK0E,2BAET,IAAIC,GAAe,EACnB,MAAMC,EAAoB5E,KAAKgD,mBAC/B,IACI2B,EAAe3E,KAAK2E,aAAaC,GAC7BD,EACA3E,KAAK6E,OAAOD,GAGZ5E,KAAK8E,eAGb,MAAOR,GAMH,MAHAK,GAAe,EAEf3E,KAAK8E,eACCR,EAENK,IAnfc,EAofR3E,KAAK2C,eACP3C,KAAK2C,aArfK,EAqfU3C,KAAK2C,aACzB3C,KAAK+E,aAAaH,IAEtB5E,KAAKgF,QAAQJ,IAGrBhG,eACIoB,KAAKgD,mBAAqB,IAAIjC,IAC9Bf,KAAK2C,cAAmC,EAApB3C,KAAK2C,aAiB7B0B,qBACI,OAAOrE,KAAKiF,qBAkBhBrG,qBACI,OAAOoB,KAAK4C,eAShBhE,aAAaoE,GACT,OAAO,EAUXpE,OAAOoE,QACgCrC,IAA/BX,KAAKkE,uBACLlE,KAAKkE,sBAAsBgB,KAAO,IAGlClF,KAAKkE,sBAAsB5D,QAAQ,CAACC,EAAGW,IAAMlB,KAAKmF,qBAAqBjE,EAAGlB,KAAKkB,GAAIX,IACnFP,KAAKkE,2BAAwBvD,GAEjCX,KAAK8E,eAWTlG,QAAQoE,IAWRpE,aAAaoE,KAOjBnD,EAAkB,WAAI;;;;;;;;;;;;;;AAetB,MAAMuF,EAAmB,CAACtH,EAASuH,IAIV,WAAjBA,EAAQC,MAAqBD,EAAQ5D,cACnC,UAAW4D,EAAQ5D,YACdzC,OAAOuG,OAAOvG,OAAOuG,OAAO,GAAIF,GAAU,CAAEzG,SAAS4G,GACpDA,EAAMjD,eAAe8C,EAAQ9D,IAAKzD,MAOnC,CACHwH,KAAM,QACN/D,IAAKC,SACLiE,UAAW,MACXhE,WAAY,GAUZ7C,cACuC,mBAAxByG,EAAQK,cACf1F,KAAKqF,EAAQ9D,KAAO8D,EAAQK,YAAYC,KAAK3F,QAGrDpB,SAAS4G,GACLA,EAAMjD,eAAe8C,EAAQ9D,IAAKzD,KA2BlD,SAAS8H,EAAS9H,GAEd,MAAO,CAAC+H,EAAmB1E,SAAmBR,IAATQ,EAxBlB,EAACrD,EAASgI,EAAO3E,KACpC2E,EAAM5C,YACDX,eAAepB,EAAMrD,IAuBtBiI,CAAejI,EAAS+H,EAAmB1E,GAC3CiE,EAAiBtH,EAAS+H;;;;;;;;;;EAgBGrI,OAAiB,kBAC7BmD,IAApBnD,OAAOY,UAA0BZ,OAAOY,SAAS4H,eACjD,uBAAwBC,SAAS3E,WACpB4E,cAAc5E;;;;;;;;;;;;;IAkB/B9D,OAA2B,qBAAMA,OAA2B,mBAAI,KAC5DW,KAAK;;;;;;;;;;;;;;;AAmBV,MAAMgI,EAAuC,MAAhBC,UAAUC,IACjB,MAAlBC,KAAKC,WAAwD,MAAnCH,UAAUC,GAAGG,mBACrCC,EAAyBN,GAAwBG,KAAKC,UAAUjF,UAAUoF,qBAC1EC,EAA6C,MAAvBL,KAAKM,eAC3BC,EAAyD,MAA7BP,KAAKQ,qBACjCC,EAAwBN,EAoBxBO,GAnBY,MACd,MAAMC,EAAYb,UAAUa,WAAab,UAAUc,QAAUZ,KAAKa,MAClE,IAAIC,GAAQ,GAER,2TACCC,KAAKJ,IACN,0kDACKI,KAAKJ,EAAUK,OAAO,EAAG,OAC9BF,GAAQ,IARE,GAYE,WAAWC,KAAKjB,UAAUa,WAO3B,WAAWI,KAAKjB,UAAUa,YAYvCM,EAAU,mBAAmBF,KAAKjB,UAAUa,aAAeX,KAAKkB,UAC1C,aAAvBpB,UAAUqB,UAA2BrB,UAAUsB,eAAiB,EAC/DC,EAA4B,MAC9B,MAAMC,EAAaC,SAASC,cAAc,KAC1C,OAAO/I,QAAQ6I,EAAWG,SAAWH,EAAWG,QAAQC,UACpDJ,EAAWG,QAAQC,SAAS,QAHF,GAM5BC,EAAY,WAAWZ,KAAKjB,UAAUa,WACtCiB,EAAgBX,GAAU,UAAUF,KAAKjB,UAAUa,WACnDkB,EAAgBZ,GAAUU;;;;;;;;;;;;;;;AAqHhC,MAAMG,EAAWP,SAASC,cAAc,YACxCM,EAASC,UAAY,u8bAiWG1H,IAAnBvB,OAAOkJ,UAEXlJ,OAAOkJ,QAAUjL,KAAKkL,IAAK,GAAK,UAIP5H,IAArBvB,OAAOoJ,YAKXpJ,OAAOoJ,UAAY,SAAW3J,GAE7B,MAAwB,iBAAVA,GAAsB4J,SAAU5J,IAAWxB,KAAKqL,MAAO7J,KAAYA,SAQhE8B,IAAdtD,KAAKsL,OAITtL,KAAKsL,KAAO,SAAWC,GAEtB,OAASA,EAAI,GAAQ,EAAMA,EAAI,EAAM,GAAMA,IAMxC,SAAUC,SAASvH,YAAc,GAKrCtC,OAAO2C,eAAgBkH,SAASvH,UAAW,OAAQ,CAElDU,IAAK,WAEJ,OAAOhC,KAAK8I,WAAWC,MAAO,6BAA+B,WAQzCpI,IAAlB3B,OAAOuG,SAKXvG,OAAOuG,OAAS,SAAWyD,GAE1B,GAAKA,MAAAA,EAEJ,MAAM,IAAIC,UAAW,8CAItB,MAAMC,EAASlK,OAAQgK,GAEvB,IAAM,IAAIG,EAAQ,EAAGA,EAAQC,UAAUC,OAAQF,IAAW,CAEzD,MAAMG,EAASF,UAAWD,GAE1B,GAAKG,MAAAA,EAEJ,IAAM,MAAMC,KAAWD,EAEjBtK,OAAOsC,UAAUR,eAAe6E,KAAM2D,EAAQC,KAElDL,EAAQK,GAAYD,EAAQC,IAUhC,OAAOL,IAiLT,SAASM,KAETxK,OAAOuG,OAAQiE,EAAgBlI,UAAW,CAEzCtD,iBAAkB,SAAWc,EAAM2K,QAET9I,IAApBX,KAAK0J,aAA2B1J,KAAK0J,WAAa,IAEvD,MAAMC,EAAY3J,KAAK0J,gBAEI/I,IAAtBgJ,EAAW7K,KAEf6K,EAAW7K,GAAS,KAI4B,IAA5C6K,EAAW7K,GAAO8K,QAASH,IAE/BE,EAAW7K,GAAOX,KAAMsL,IAM1BI,iBAAkB,SAAW/K,EAAM2K,GAElC,QAAyB9I,IAApBX,KAAK0J,WAA2B,OAAO,EAE5C,MAAMC,EAAY3J,KAAK0J,WAEvB,YAA6B/I,IAAtBgJ,EAAW7K,KAAoE,IAA5C6K,EAAW7K,GAAO8K,QAASH,IAItExL,oBAAqB,SAAWa,EAAM2K,GAErC,QAAyB9I,IAApBX,KAAK0J,WAA2B,OAErC,MACMI,EADY9J,KAAK0J,WACU5K,GAEjC,QAAuB6B,IAAlBmJ,EAA8B,CAElC,MAAMX,EAAQW,EAAcF,QAASH,IAEpB,IAAZN,GAEJW,EAAcC,OAAQZ,EAAO,KAQhCa,cAAe,SAAWC,GAEzB,QAAyBtJ,IAApBX,KAAK0J,WAA2B,OAErC,MACMI,EADY9J,KAAK0J,WACUO,EAAMnL,MAEvC,QAAuB6B,IAAlBmJ,EAA8B,CAElCG,EAAMjB,OAAShJ,KAGf,MAAMkK,EAAQJ,EAAcvM,MAAO,GAEnC,IAAM,IAAI4M,EAAI,EAAGC,EAAIF,EAAMb,OAAQc,EAAIC,EAAGD,IAEzCD,EAAOC,GAAIxE,KAAM3F,KAAMiK,OAU3B,MAAMI,EAAO,GAEb,IAAM,IAAIF,EAAI,EAAGA,EAAI,IAAKA,IAEzBE,EAAMF,IAAQA,EAAI,GAAK,IAAM,IAAO,EAAMrB,SAAU,IAIrD,IAAIwB,EAAQ,QAEZ,MAAMC,EAAY,CAEjBC,QAASnN,KAAKoN,GAAK,IACnBC,QAAS,IAAMrN,KAAKoN,GAEpBE,aAAc,WAIb,MAAMC,EAAqB,WAAhBvN,KAAKC,SAAwB,EAClCuN,EAAqB,WAAhBxN,KAAKC,SAAwB,EAClCwN,EAAqB,WAAhBzN,KAAKC,SAAwB,EAClCyN,EAAqB,WAAhB1N,KAAKC,SAAwB,EAOxC,OANa+M,EAAW,IAALO,GAAcP,EAAMO,GAAM,EAAI,KAASP,EAAMO,GAAM,GAAK,KAASP,EAAMO,GAAM,GAAK,KAAS,IAC7GP,EAAW,IAALQ,GAAcR,EAAMQ,GAAM,EAAI,KAAS,IAAMR,EAAMQ,GAAM,GAAK,GAAO,IAASR,EAAMQ,GAAM,GAAK,KAAS,IAC9GR,EAAW,GAALS,EAAY,KAAST,EAAMS,GAAM,EAAI,KAAS,IAAMT,EAAMS,GAAM,GAAK,KAAST,EAAMS,GAAM,GAAK,KACrGT,EAAW,IAALU,GAAcV,EAAMU,GAAM,EAAI,KAASV,EAAMU,GAAM,GAAK,KAASV,EAAMU,GAAM,GAAK,MAG7EC,eAIbC,MAAO,SAAWpM,EAAOqM,EAAKC,GAE7B,OAAO9N,KAAK8N,IAAKD,EAAK7N,KAAK6N,IAAKC,EAAKtM,KAOtCuM,gBAAiB,SAAWC,EAAGC,GAE9B,OAAWD,EAAIC,EAAMA,GAAMA,GAM5BC,UAAW,SAAW3C,EAAG4C,EAAIC,EAAIC,EAAIC,GAEpC,OAAOD,GAAO9C,EAAI4C,IAASG,EAAKD,IAASD,EAAKD,IAM/CI,KAAM,SAAWhD,EAAGiD,EAAGC,GAEtB,OAAS,EAAIA,GAAMlD,EAAIkD,EAAID,GAM5BE,WAAY,SAAWnD,EAAGsC,EAAKC,GAE9B,OAAKvC,GAAKsC,EAAa,EAClBtC,GAAKuC,EAAa,GAEvBvC,GAAMA,EAAIsC,IAAUC,EAAMD,IAEftC,GAAM,EAAI,EAAIA,IAI1BoD,aAAc,SAAWpD,EAAGsC,EAAKC,GAEhC,OAAKvC,GAAKsC,EAAa,EAClBtC,GAAKuC,EAAa,GAEvBvC,GAAMA,EAAIsC,IAAUC,EAAMD,IAEftC,EAAIA,GAAMA,GAAU,EAAJA,EAAQ,IAAO,KAM3CqD,QAAS,SAAWC,EAAKC,GAExB,OAAOD,EAAM7O,KAAKqL,MAAOrL,KAAKC,UAAa6O,EAAOD,EAAM,KAMzDE,UAAW,SAAWF,EAAKC,GAE1B,OAAOD,EAAM7O,KAAKC,UAAa6O,EAAOD,IAMvCG,gBAAiB,SAAWC,GAE3B,OAAOA,GAAU,GAAMjP,KAAKC,WAM7BiP,aAAc,SAAW3O,GAQxB,YANW+C,IAAN/C,IAAkB0M,EAAQ1M,EAAI,YAInC0M,EAAgB,MAARA,EAAgB,YAEfA,EAAQ,GAAM,YAIxBkC,SAAU,SAAWC,GAEpB,OAAOA,EAAUlC,EAAUC,SAI5BkC,SAAU,SAAWC,GAEpB,OAAOA,EAAUpC,EAAUG,SAI5BkC,aAAc,SAAW/N,GAExB,OAAqC,IAA5BA,EAAUA,EAAQ,IAAyB,IAAVA,GAI3CgO,eAAgB,SAAWhO,GAE1B,OAAOxB,KAAKkL,IAAK,EAAGlL,KAAKyP,KAAMzP,KAAK0P,IAAKlO,GAAUxB,KAAK2P,OAIzDC,gBAAiB,SAAWpO,GAE3B,OAAOxB,KAAKkL,IAAK,EAAGlL,KAAKqL,MAAOrL,KAAK0P,IAAKlO,GAAUxB,KAAK2P,OAI1DE,6BAA8B,SAAWC,EAAGC,EAAGC,EAAGC,EAAGC,GAQpD,MAAMC,EAAMnQ,KAAKmQ,IACXC,EAAMpQ,KAAKoQ,IAEXC,EAAKF,EAAKH,EAAI,GACdM,EAAKF,EAAKJ,EAAI,GAEdO,EAAMJ,GAAOJ,EAAIE,GAAM,GACvBO,EAAMJ,GAAOL,EAAIE,GAAM,GAEvBQ,EAAON,GAAOJ,EAAIE,GAAM,GACxBS,EAAON,GAAOL,EAAIE,GAAM,GAExBU,EAAOR,GAAOF,EAAIF,GAAM,GACxBa,EAAOR,GAAOH,EAAIF,GAAM,GAE9B,OAASG,GAER,IAAK,MACJJ,EAAEtM,IAAK6M,EAAKG,EAAKF,EAAKG,EAAMH,EAAKI,EAAML,EAAKE,GAC5C,MAED,IAAK,MACJT,EAAEtM,IAAK8M,EAAKI,EAAML,EAAKG,EAAKF,EAAKG,EAAMJ,EAAKE,GAC5C,MAED,IAAK,MACJT,EAAEtM,IAAK8M,EAAKG,EAAMH,EAAKI,EAAML,EAAKG,EAAKH,EAAKE,GAC5C,MAED,IAAK,MACJT,EAAEtM,IAAK6M,EAAKG,EAAKF,EAAKM,EAAMN,EAAKK,EAAMN,EAAKE,GAC5C,MAED,IAAK,MACJT,EAAEtM,IAAK8M,EAAKK,EAAMN,EAAKG,EAAKF,EAAKM,EAAMP,EAAKE,GAC5C,MAED,IAAK,MACJT,EAAEtM,IAAK8M,EAAKM,EAAMN,EAAKK,EAAMN,EAAKG,EAAKH,EAAKE,GAC5C,MAED,QACCtP,QAAQC,KAAM,kFAAoFgP,MAQtG,MAAMW,EAELtP,YAAagK,EAAI,EAAGiD,EAAI,GAEvB7M,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EAIVsC,YAEC,OAAOnO,KAAK4I,EAIbuF,UAAWtP,GAEVmB,KAAK4I,EAAI/J,EAIVuP,aAEC,OAAOpO,KAAK6L,EAIbuC,WAAYvP,GAEXmB,KAAK6L,EAAIhN,EAIVD,IAAKgK,EAAGiD,GAKP,OAHA7L,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EAEF7L,KAIRpB,UAAWyP,GAKV,OAHArO,KAAK4I,EAAIyF,EACTrO,KAAK6L,EAAIwC,EAEFrO,KAIRpB,KAAMgK,GAIL,OAFA5I,KAAK4I,EAAIA,EAEF5I,KAIRpB,KAAMiN,GAIL,OAFA7L,KAAK6L,EAAIA,EAEF7L,KAIRpB,aAAcuK,EAAOtK,GAEpB,OAASsK,GAER,KAAK,EAAGnJ,KAAK4I,EAAI/J,EAAO,MACxB,KAAK,EAAGmB,KAAK6L,EAAIhN,EAAO,MACxB,QAAS,MAAM,IAAIyP,MAAO,0BAA4BnF,GAIvD,OAAOnJ,KAIRpB,aAAcuK,GAEb,OAASA,GAER,KAAK,EAAG,OAAOnJ,KAAK4I,EACpB,KAAK,EAAG,OAAO5I,KAAK6L,EACpB,QAAS,MAAM,IAAIyC,MAAO,0BAA4BnF,IAMxDvK,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAK4I,EAAG5I,KAAK6L,GAI3CjN,KAAM2B,GAKL,OAHAP,KAAK4I,EAAIrI,EAAEqI,EACX5I,KAAK6L,EAAItL,EAAEsL,EAEJ7L,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKwO,WAAYjO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EAEL7L,MAIRpB,UAAWhB,GAKV,OAHAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAKd,OAHArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EAEV7L,KAIRpB,gBAAiB2B,EAAG3C,GAKnB,OAHAoC,KAAK4I,GAAKrI,EAAEqI,EAAIhL,EAChBoC,KAAK6L,GAAKtL,EAAEsL,EAAIjO,EAEToC,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKyO,WAAYlO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EAEL7L,MAIRpB,UAAWhB,GAKV,OAHAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAKd,OAHArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EAEV7L,KAIRpB,SAAU2B,GAKT,OAHAP,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EAEL7L,KAIRpB,eAAgByP,GAKf,OAHArO,KAAK4I,GAAKyF,EACVrO,KAAK6L,GAAKwC,EAEHrO,KAIRpB,OAAQ2B,GAKP,OAHAP,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EAEL7L,KAIRpB,aAAcyP,GAEb,OAAOrO,KAAK0O,eAAgB,EAAIL,GAIjCzP,aAAc0M,GAEb,MAAM1C,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EACrBvH,EAAIgH,EAAEqD,SAKZ,OAHA3O,KAAK4I,EAAItE,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GACtCtE,KAAK6L,EAAIvH,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAE/BtE,KAIRpB,IAAK2B,GAKJ,OAHAP,KAAK4I,EAAIvL,KAAK6N,IAAKlL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK6N,IAAKlL,KAAK6L,EAAGtL,EAAEsL,GAEtB7L,KAIRpB,IAAK2B,GAKJ,OAHAP,KAAK4I,EAAIvL,KAAK8N,IAAKnL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK8N,IAAKnL,KAAK6L,EAAGtL,EAAEsL,GAEtB7L,KAIRpB,MAAOsM,EAAKC,GAOX,OAHAnL,KAAK4I,EAAIvL,KAAK8N,IAAKD,EAAItC,EAAGvL,KAAK6N,IAAKC,EAAIvC,EAAG5I,KAAK4I,IAChD5I,KAAK6L,EAAIxO,KAAK8N,IAAKD,EAAIW,EAAGxO,KAAK6N,IAAKC,EAAIU,EAAG7L,KAAK6L,IAEzC7L,KAIRpB,YAAagQ,EAAQC,GAKpB,OAHA7O,KAAK4I,EAAIvL,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK4I,IAClD5I,KAAK6L,EAAIxO,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK6L,IAE3C7L,KAIRpB,YAAasM,EAAKC,GAEjB,MAAM9B,EAASrJ,KAAKqJ,SAEpB,OAAOrJ,KAAK8O,aAAczF,GAAU,GAAIqF,eAAgBrR,KAAK8N,IAAKD,EAAK7N,KAAK6N,IAAKC,EAAK9B,KAIvFzK,QAKC,OAHAoB,KAAK4I,EAAIvL,KAAKqL,MAAO1I,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAKqL,MAAO1I,KAAK6L,GAEnB7L,KAIRpB,OAKC,OAHAoB,KAAK4I,EAAIvL,KAAKyP,KAAM9M,KAAK4I,GACzB5I,KAAK6L,EAAIxO,KAAKyP,KAAM9M,KAAK6L,GAElB7L,KAIRpB,QAKC,OAHAoB,KAAK4I,EAAIvL,KAAK0R,MAAO/O,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAK0R,MAAO/O,KAAK6L,GAEnB7L,KAIRpB,cAKC,OAHAoB,KAAK4I,EAAM5I,KAAK4I,EAAI,EAAMvL,KAAKyP,KAAM9M,KAAK4I,GAAMvL,KAAKqL,MAAO1I,KAAK4I,GACjE5I,KAAK6L,EAAM7L,KAAK6L,EAAI,EAAMxO,KAAKyP,KAAM9M,KAAK6L,GAAMxO,KAAKqL,MAAO1I,KAAK6L,GAE1D7L,KAIRpB,SAKC,OAHAoB,KAAK4I,GAAM5I,KAAK4I,EAChB5I,KAAK6L,GAAM7L,KAAK6L,EAET7L,KAIRpB,IAAK2B,GAEJ,OAAOP,KAAK4I,EAAIrI,EAAEqI,EAAI5I,KAAK6L,EAAItL,EAAEsL,EAIlCjN,MAAO2B,GAEN,OAAOP,KAAK4I,EAAIrI,EAAEsL,EAAI7L,KAAK6L,EAAItL,EAAEqI,EAIlChK,WAEC,OAAOoB,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,EAIxCjN,SAEC,OAAOvB,KAAK2R,KAAMhP,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,GAInDjN,kBAEC,OAAOvB,KAAK4R,IAAKjP,KAAK4I,GAAMvL,KAAK4R,IAAKjP,KAAK6L,GAI5CjN,YAEC,OAAOoB,KAAK8O,aAAc9O,KAAKqJ,UAAY,GAI5CzK,QAMC,OAFcvB,KAAK6R,OAASlP,KAAK6L,GAAK7L,KAAK4I,GAAMvL,KAAKoN,GAMvD7L,WAAY2B,GAEX,OAAOlD,KAAK2R,KAAMhP,KAAKmP,kBAAmB5O,IAI3C3B,kBAAmB2B,GAElB,MAAM6O,EAAKpP,KAAK4I,EAAIrI,EAAEqI,EAAGyG,EAAKrP,KAAK6L,EAAItL,EAAEsL,EACzC,OAAOuD,EAAKA,EAAKC,EAAKA,EAIvBzQ,oBAAqB2B,GAEpB,OAAOlD,KAAK4R,IAAKjP,KAAK4I,EAAIrI,EAAEqI,GAAMvL,KAAK4R,IAAKjP,KAAK6L,EAAItL,EAAEsL,GAIxDjN,UAAWyK,GAEV,OAAOrJ,KAAKsP,YAAYZ,eAAgBrF,GAIzCzK,KAAM2B,EAAGgP,GAKR,OAHAvP,KAAK4I,IAAOrI,EAAEqI,EAAI5I,KAAK4I,GAAM2G,EAC7BvP,KAAK6L,IAAOtL,EAAEsL,EAAI7L,KAAK6L,GAAM0D,EAEtBvP,KAIRpB,YAAa4Q,EAAIC,EAAIF,GAKpB,OAHAvP,KAAK4I,EAAI4G,EAAG5G,GAAM6G,EAAG7G,EAAI4G,EAAG5G,GAAM2G,EAClCvP,KAAK6L,EAAI2D,EAAG3D,GAAM4D,EAAG5D,EAAI2D,EAAG3D,GAAM0D,EAE3BvP,KAIRpB,OAAQ2B,GAEP,OAAWA,EAAEqI,IAAM5I,KAAK4I,GAASrI,EAAEsL,IAAM7L,KAAK6L,EAI/CjN,UAAWsL,EAAOwF,GAOjB,YALgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAK4I,EAAIsB,EAAOwF,GAChB1P,KAAK6L,EAAI3B,EAAOwF,EAAS,GAElB1P,KAIRpB,QAASsL,EAAOwF,GAQf,YANe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAK4I,EACvBsB,EAAOwF,EAAS,GAAM1P,KAAK6L,EAEpB3B,EAIRtL,oBAAqBa,EAAW0J,EAAOuG,GAWtC,YATgB/O,IAAX+O,GAEJpR,QAAQC,KAAM,uEAIfyB,KAAK4I,EAAInJ,EAAUkQ,KAAMxG,GACzBnJ,KAAK6L,EAAIpM,EAAUmQ,KAAMzG,GAElBnJ,KAIRpB,aAAciR,EAAQC,GAErB,MAAMxC,EAAIjQ,KAAKmQ,IAAKsC,GAASlS,EAAIP,KAAKoQ,IAAKqC,GAErClH,EAAI5I,KAAK4I,EAAIiH,EAAOjH,EACpBiD,EAAI7L,KAAK6L,EAAIgE,EAAOhE,EAK1B,OAHA7L,KAAK4I,EAAIA,EAAI0E,EAAIzB,EAAIjO,EAAIiS,EAAOjH,EAChC5I,KAAK6L,EAAIjD,EAAIhL,EAAIiO,EAAIyB,EAAIuC,EAAOhE,EAEzB7L,KAIRpB,SAKC,OAHAoB,KAAK4I,EAAIvL,KAAKC,SACd0C,KAAK6L,EAAIxO,KAAKC,SAEP0C,MAMT,MAAM+P,EAELnR,cAECI,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAK2O,SAAW,CAEf,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAIFvF,UAAUC,OAAS,GAEvB/K,QAAQ0R,MAAO,iFAMjBpR,IAAKqR,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAE5C,MAAMC,EAAK1Q,KAAK2O,SAMhB,OAJA+B,EAAI,GAAMT,EAAKS,EAAI,GAAMN,EAAKM,EAAI,GAAMH,EACxCG,EAAI,GAAMR,EAAKQ,EAAI,GAAML,EAAKK,EAAI,GAAMF,EACxCE,EAAI,GAAMP,EAAKO,EAAI,GAAMJ,EAAKI,EAAI,GAAMD,EAEjCzQ,KAIRpB,WAUC,OARAoB,KAAKa,IAEJ,EAAG,EAAG,EACN,EAAG,EAAG,EACN,EAAG,EAAG,GAIAb,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcyN,UAAW3Q,KAAK2O,UAI/C/P,KAAM0M,GAEL,MAAMoF,EAAK1Q,KAAK2O,SACViC,EAAKtF,EAAEqD,SAMb,OAJA+B,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GACpDF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GACpDF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAE7C5Q,KAIRpB,aAAciS,EAAOC,EAAOC,GAM3B,OAJAF,EAAMG,qBAAsBhR,KAAM,GAClC8Q,EAAME,qBAAsBhR,KAAM,GAClC+Q,EAAMC,qBAAsBhR,KAAM,GAE3BA,KAIRpB,eAAgB0M,GAEf,MAAMsF,EAAKtF,EAAEqD,SAUb,OARA3O,KAAKa,IAEJ+P,EAAI,GAAKA,EAAI,GAAKA,EAAI,GACtBA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GACtBA,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAIhB5Q,KAIRpB,SAAU0M,GAET,OAAOtL,KAAKiR,iBAAkBjR,KAAMsL,GAIrC1M,YAAa0M,GAEZ,OAAOtL,KAAKiR,iBAAkB3F,EAAGtL,MAIlCpB,iBAAkBwO,EAAGC,GAEpB,MAAM6D,EAAK9D,EAAEuB,SACPwC,EAAK9D,EAAEsB,SACP+B,EAAK1Q,KAAK2O,SAEVyC,EAAMF,EAAI,GAAKG,EAAMH,EAAI,GAAKI,EAAMJ,EAAI,GACxCK,EAAML,EAAI,GAAKM,EAAMN,EAAI,GAAKO,EAAMP,EAAI,GACxCQ,EAAMR,EAAI,GAAKS,EAAMT,EAAI,GAAKU,EAAMV,EAAI,GAExCW,EAAMV,EAAI,GAAKW,EAAMX,EAAI,GAAKY,EAAMZ,EAAI,GACxCa,EAAMb,EAAI,GAAKc,EAAMd,EAAI,GAAKe,EAAMf,EAAI,GACxCgB,EAAMhB,EAAI,GAAKiB,EAAMjB,EAAI,GAAKkB,EAAMlB,EAAI,GAc9C,OAZAT,EAAI,GAAMU,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EACxCzB,EAAI,GAAMU,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EACxC1B,EAAI,GAAMU,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EAExC3B,EAAI,GAAMa,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EACxCzB,EAAI,GAAMa,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EACxC1B,EAAI,GAAMa,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EAExC3B,EAAI,GAAMgB,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EACxCzB,EAAI,GAAMgB,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EACxC1B,EAAI,GAAMgB,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAEjCrS,KAIRpB,eAAgBhB,GAEf,MAAM8S,EAAK1Q,KAAK2O,SAMhB,OAJA+B,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EACvC8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EACvC8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAEhCoC,KAIRpB,cAEC,MAAM8R,EAAK1Q,KAAK2O,SAEVvB,EAAIsD,EAAI,GAAKrD,EAAIqD,EAAI,GAAKpD,EAAIoD,EAAI,GACvC4B,EAAI5B,EAAI,GAAKpM,EAAIoM,EAAI,GAAK6B,EAAI7B,EAAI,GAClC8B,EAAI9B,EAAI,GAAK+B,EAAI/B,EAAI,GAAKvG,EAAIuG,EAAI,GAEnC,OAAOtD,EAAI9I,EAAI6F,EAAIiD,EAAImF,EAAIE,EAAIpF,EAAIiF,EAAInI,EAAIkD,EAAIkF,EAAIC,EAAIlF,EAAIgF,EAAIG,EAAInF,EAAIhJ,EAAIkO,EAI5E5T,WAAY8T,EAAQC,QAEQhS,IAAtBgS,GAEJrU,QAAQC,KAAM,oFAIf,MAAMqS,EAAK8B,EAAO/D,SACjB+B,EAAK1Q,KAAK2O,SAEVsB,EAAMW,EAAI,GAAKR,EAAMQ,EAAI,GAAKL,EAAMK,EAAI,GACxCV,EAAMU,EAAI,GAAKP,EAAMO,EAAI,GAAKJ,EAAMI,EAAI,GACxCT,EAAMS,EAAI,GAAKN,EAAMM,EAAI,GAAKH,EAAMG,EAAI,GAExCgC,EAAMnC,EAAMJ,EAAMG,EAAMF,EACxBuC,EAAMrC,EAAML,EAAMM,EAAMP,EACxB4C,EAAMxC,EAAMJ,EAAMG,EAAMF,EAExB4C,EAAM9C,EAAM2C,EAAMxC,EAAMyC,EAAMtC,EAAMuC,EAErC,GAAa,IAARC,EAAY,OAAO/S,KAAKa,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE1D,MAAMmS,EAAS,EAAID,EAcnB,OAZArC,EAAI,GAAMkC,EAAMI,EAChBtC,EAAI,IAAQH,EAAMD,EAAMG,EAAML,GAAQ4C,EACtCtC,EAAI,IAAQF,EAAMJ,EAAMG,EAAMF,GAAQ2C,EAEtCtC,EAAI,GAAMmC,EAAMG,EAChBtC,EAAI,IAAQD,EAAMR,EAAMM,EAAMJ,GAAQ6C,EACtCtC,EAAI,IAAQH,EAAML,EAAMM,EAAMP,GAAQ+C,EAEtCtC,EAAI,GAAMoC,EAAME,EAChBtC,EAAI,IAAQN,EAAMD,EAAMG,EAAML,GAAQ+C,EACtCtC,EAAI,IAAQL,EAAMJ,EAAMG,EAAMF,GAAQ8C,EAE/BhT,KAIRpB,YAEC,IAAIqU,EACJ,MAAM3H,EAAItL,KAAK2O,SAMf,OAJAsE,EAAM3H,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAM2H,EACxCA,EAAM3H,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAM2H,EACxCA,EAAM3H,EAAG,GAAKA,EAAG,GAAMA,EAAG,GAAKA,EAAG,GAAM2H,EAEjCjT,KAIRpB,gBAAiBsU,GAEhB,OAAOlT,KAAKmT,eAAgBD,GAAUE,WAAYpT,MAAOqT,YAI1DzU,mBAAoB0U,GAEnB,MAAMhI,EAAItL,KAAK2O,SAYf,OAVA2E,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GACZgI,EAAG,GAAMhI,EAAG,GAELtL,KAIRpB,eAAgB2U,EAAIC,EAAIC,EAAIC,EAAIC,EAAUC,EAAIC,GAE7C,MAAMvG,EAAIjQ,KAAKmQ,IAAKmG,GACd/V,EAAIP,KAAKoQ,IAAKkG,GAEpB3T,KAAKa,IACJ4S,EAAKnG,EAAGmG,EAAK7V,GAAK6V,GAAOnG,EAAIsG,EAAKhW,EAAIiW,GAAOD,EAAKL,GAChDG,EAAK9V,EAAG8V,EAAKpG,GAAKoG,IAAS9V,EAAIgW,EAAKtG,EAAIuG,GAAOA,EAAKL,EACtD,EAAG,EAAG,GAKR5U,MAAO6U,EAAIC,GAEV,MAAMhD,EAAK1Q,KAAK2O,SAKhB,OAHA+B,EAAI,IAAO+C,EAAI/C,EAAI,IAAO+C,EAAI/C,EAAI,IAAO+C,EACzC/C,EAAI,IAAOgD,EAAIhD,EAAI,IAAOgD,EAAIhD,EAAI,IAAOgD,EAElC1T,KAIRpB,OAAQkV,GAEP,MAAMxG,EAAIjQ,KAAKmQ,IAAKsG,GACdlW,EAAIP,KAAKoQ,IAAKqG,GAEdpD,EAAK1Q,KAAK2O,SAEVyC,EAAMV,EAAI,GAAKW,EAAMX,EAAI,GAAKY,EAAMZ,EAAI,GACxCa,EAAMb,EAAI,GAAKc,EAAMd,EAAI,GAAKe,EAAMf,EAAI,GAU9C,OARAA,EAAI,GAAMpD,EAAI8D,EAAMxT,EAAI2T,EACxBb,EAAI,GAAMpD,EAAI+D,EAAMzT,EAAI4T,EACxBd,EAAI,GAAMpD,EAAIgE,EAAM1T,EAAI6T,EAExBf,EAAI,IAAQ9S,EAAIwT,EAAM9D,EAAIiE,EAC1Bb,EAAI,IAAQ9S,EAAIyT,EAAM/D,EAAIkE,EAC1Bd,EAAI,IAAQ9S,EAAI0T,EAAMhE,EAAImE,EAEnBzR,KAIRpB,UAAW2U,EAAIC,GAEd,MAAM9C,EAAK1Q,KAAK2O,SAKhB,OAHA+B,EAAI,IAAO6C,EAAK7C,EAAI,GAAKA,EAAI,IAAO6C,EAAK7C,EAAI,GAAKA,EAAI,IAAO6C,EAAK7C,EAAI,GACtEA,EAAI,IAAO8C,EAAK9C,EAAI,GAAKA,EAAI,IAAO8C,EAAK9C,EAAI,GAAKA,EAAI,IAAO8C,EAAK9C,EAAI,GAE/D1Q,KAIRpB,OAAQ8T,GAEP,MAAMhC,EAAK1Q,KAAK2O,SACViC,EAAK8B,EAAO/D,SAElB,IAAM,IAAIxE,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKuG,EAAIvG,KAAQyG,EAAIzG,GAAM,OAAO,EAInC,OAAO,EAIRvL,UAAWsL,EAAOwF,QAED/O,IAAX+O,IAAuBA,EAAS,GAErC,IAAM,IAAIvF,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2O,SAAUxE,GAAMD,EAAOC,EAAIuF,GAIjC,OAAO1P,KAIRpB,QAASsL,EAAOwF,QAEA/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErC,MAAMgB,EAAK1Q,KAAK2O,SAchB,OAZAzE,EAAOwF,GAAWgB,EAAI,GACtBxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAE1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAE1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAEnBxG,GAMT,IAAI6J,EAEJ,MAAMC,EAAa,CAElBC,WAAY,SAAWC,GAEtB,GAAK,UAAU7M,KAAM6M,EAAMC,KAE1B,OAAOD,EAAMC,IAId,GAAiC,oBAArBC,kBAEX,OAAOF,EAAMC,IAId,IAAIE,EAEJ,GAAKH,aAAiBE,kBAErBC,EAASH,MAEH,MAEWvT,IAAZoT,IAAwBA,EAAUlM,SAASyM,gBAAiB,+BAAgC,WAEjGP,EAAQ5F,MAAQ+F,EAAM/F,MACtB4F,EAAQ3F,OAAS8F,EAAM9F,OAEvB,MAAMmG,EAAUR,EAAQS,WAAY,MAE/BN,aAAiBO,UAErBF,EAAQG,aAAcR,EAAO,EAAG,GAIhCK,EAAQI,UAAWT,EAAO,EAAG,EAAGA,EAAM/F,MAAO+F,EAAM9F,QAIpDiG,EAASN,EAIV,OAAKM,EAAOlG,MAAQ,MAAQkG,EAAOjG,OAAS,KAEpCiG,EAAOO,UAAW,aAAc,IAIhCP,EAAOO,UAAW,eAQ5B,IAAIC,EAAY,EAEhB,SAASC,EAASZ,EAAOa,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,EAAYC,GAE/FtW,OAAO2C,eAAgB3B,KAAM,KAAM,CAAEnB,MAAOgW,MAE5C7U,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKmB,KAAO,GAEZnB,KAAKkU,WAAkBvT,IAAVuT,EAAsBA,EAAQY,EAAQU,cACnDxV,KAAKyV,QAAU,GAEfzV,KAAK+U,aAAsBpU,IAAZoU,EAAwBA,EAAUD,EAAQY,gBAEzD1V,KAAKgV,WAAkBrU,IAAVqU,EAAsBA,EAhyCR,KAiyC3BhV,KAAKiV,WAAkBtU,IAAVsU,EAAsBA,EAjyCR,KAmyC3BjV,KAAKkV,eAA0BvU,IAAduU,EAA0BA,EA9xCvB,KA+xCpBlV,KAAKmV,eAA0BxU,IAAdwU,EAA0BA,EA7xCX,KA+xChCnV,KAAKqV,gBAA4B1U,IAAf0U,EAA2BA,EAAa,EAE1DrV,KAAKoV,YAAoBzU,IAAXyU,EAAuBA,EAlxCnB,KAmxClBpV,KAAK2V,eAAiB,KACtB3V,KAAKlB,UAAgB6B,IAAT7B,EAAqBA,EAlyCT,KAoyCxBkB,KAAK0P,OAAS,IAAIxB,EAAS,EAAG,GAC9BlO,KAAK4V,OAAS,IAAI1H,EAAS,EAAG,GAC9BlO,KAAK6P,OAAS,IAAI3B,EAAS,EAAG,GAC9BlO,KAAK2T,SAAW,EAEhB3T,KAAK6V,kBAAmB,EACxB7V,KAAK0S,OAAS,IAAI3C,EAElB/P,KAAK8V,iBAAkB,EACvB9V,KAAK+V,kBAAmB,EACxB/V,KAAKgW,OAAQ,EACbhW,KAAKiW,gBAAkB,EAMvBjW,KAAKsV,cAAwB3U,IAAb2U,EAAyBA,EApuCnB,IAsuCtBtV,KAAKkW,QAAU,EACflW,KAAKmW,SAAW,KAIjBrB,EAAQU,mBAAgB7U,EACxBmU,EAAQY,gBA70CU,IA+0ClBZ,EAAQxT,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAE9E4B,YAAa4R,EAEbuB,WAAW,EAEXC,aAAc,WAEbtW,KAAK0S,OAAO6D,eAAgBvW,KAAK0P,OAAO9G,EAAG5I,KAAK0P,OAAO7D,EAAG7L,KAAK4V,OAAOhN,EAAG5I,KAAK4V,OAAO/J,EAAG7L,KAAK2T,SAAU3T,KAAK6P,OAAOjH,EAAG5I,KAAK6P,OAAOhE,IAInI2K,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrCyW,KAAM,SAAWnN,GAmChB,OAjCAtJ,KAAKmB,KAAOmI,EAAOnI,KAEnBnB,KAAKkU,MAAQ5K,EAAO4K,MACpBlU,KAAKyV,QAAUnM,EAAOmM,QAAQlY,MAAO,GAErCyC,KAAK+U,QAAUzL,EAAOyL,QAEtB/U,KAAKgV,MAAQ1L,EAAO0L,MACpBhV,KAAKiV,MAAQ3L,EAAO2L,MAEpBjV,KAAKkV,UAAY5L,EAAO4L,UACxBlV,KAAKmV,UAAY7L,EAAO6L,UAExBnV,KAAKqV,WAAa/L,EAAO+L,WAEzBrV,KAAKoV,OAAS9L,EAAO8L,OACrBpV,KAAK2V,eAAiBrM,EAAOqM,eAC7B3V,KAAKlB,KAAOwK,EAAOxK,KAEnBkB,KAAK0P,OAAO+G,KAAMnN,EAAOoG,QACzB1P,KAAK4V,OAAOa,KAAMnN,EAAOsM,QACzB5V,KAAK6P,OAAO4G,KAAMnN,EAAOuG,QACzB7P,KAAK2T,SAAWrK,EAAOqK,SAEvB3T,KAAK6V,iBAAmBvM,EAAOuM,iBAC/B7V,KAAK0S,OAAO+D,KAAMnN,EAAOoJ,QAEzB1S,KAAK8V,gBAAkBxM,EAAOwM,gBAC9B9V,KAAK+V,iBAAmBzM,EAAOyM,iBAC/B/V,KAAKgW,MAAQ1M,EAAO0M,MACpBhW,KAAKiW,gBAAkB3M,EAAO2M,gBAC9BjW,KAAKsV,SAAWhM,EAAOgM,SAEhBtV,MAIR0W,OAAQ,SAAWC,GAElB,MAAMC,OAA0BjW,IAATgW,GAAsC,iBAATA,EAEpD,IAAOC,QAA+CjW,IAA/BgW,EAAKE,SAAU7W,KAAKuV,MAE1C,OAAOoB,EAAKE,SAAU7W,KAAKuV,MAI5B,MAAMrM,EAAS,CAEd4N,SAAU,CACTZ,QAAS,IACTpX,KAAM,UACNiY,UAAW,kBAGZxB,KAAMvV,KAAKuV,KACXpU,KAAMnB,KAAKmB,KAEX4T,QAAS/U,KAAK+U,QAEda,OAAQ,CAAE5V,KAAK4V,OAAOhN,EAAG5I,KAAK4V,OAAO/J,GACrC6D,OAAQ,CAAE1P,KAAK0P,OAAO9G,EAAG5I,KAAK0P,OAAO7D,GACrCgE,OAAQ,CAAE7P,KAAK6P,OAAOjH,EAAG5I,KAAK6P,OAAOhE,GACrC8H,SAAU3T,KAAK2T,SAEfqD,KAAM,CAAEhX,KAAKgV,MAAOhV,KAAKiV,OAEzBG,OAAQpV,KAAKoV,OACbtW,KAAMkB,KAAKlB,KACXwW,SAAUtV,KAAKsV,SAEfH,UAAWnV,KAAKmV,UAChBD,UAAWlV,KAAKkV,UAChBG,WAAYrV,KAAKqV,WAEjBW,MAAOhW,KAAKgW,MAEZD,iBAAkB/V,KAAK+V,iBACvBE,gBAAiBjW,KAAKiW,iBAIvB,QAAoBtV,IAAfX,KAAKkU,MAAsB,CAI/B,MAAMA,EAAQlU,KAAKkU,MAQnB,QANoBvT,IAAfuT,EAAMqB,OAEVrB,EAAMqB,KAAOhL,EAAUI,iBAIjBiM,QAA8CjW,IAA9BgW,EAAKM,OAAQ/C,EAAMqB,MAAuB,CAEhE,IAAI2B,EAEJ,GAAKjY,MAAMkY,QAASjD,GAAU,CAI7BgD,EAAM,GAEN,IAAM,IAAI/M,EAAI,EAAGC,EAAI8J,EAAM7K,OAAQc,EAAIC,EAAGD,IAEzC+M,EAAI/Y,KAAM6V,EAAWC,WAAYC,EAAO/J,UAQzC+M,EAAMlD,EAAWC,WAAYC,GAI9ByC,EAAKM,OAAQ/C,EAAMqB,MAAS,CAC3BA,KAAMrB,EAAMqB,KACZ2B,IAAKA,GAKPhO,EAAOgL,MAAQA,EAAMqB,KAUtB,OANOqB,IAEND,EAAKE,SAAU7W,KAAKuV,MAASrM,GAIvBA,GAIRkO,QAAS,WAERpX,KAAKgK,cAAe,CAAElL,KAAM,aAI7BuY,YAAa,SAAWC,GAEvB,GAt/CgB,MAs/CXtX,KAAK+U,QAAwB,OAAOuC,EAIzC,GAFAA,EAAGC,aAAcvX,KAAK0S,QAEjB4E,EAAG1O,EAAI,GAAK0O,EAAG1O,EAAI,EAEvB,OAAS5I,KAAKgV,OAEb,KAv/CmB,IAy/ClBsC,EAAG1O,EAAI0O,EAAG1O,EAAIvL,KAAKqL,MAAO4O,EAAG1O,GAC7B,MAED,KA3/CwB,KA6/CvB0O,EAAG1O,EAAI0O,EAAG1O,EAAI,EAAI,EAAI,EACtB,MAED,KA//C2B,KAigDkB,IAAvCvL,KAAK4R,IAAK5R,KAAKqL,MAAO4O,EAAG1O,GAAM,GAEnC0O,EAAG1O,EAAIvL,KAAKyP,KAAMwK,EAAG1O,GAAM0O,EAAG1O,EAI9B0O,EAAG1O,EAAI0O,EAAG1O,EAAIvL,KAAKqL,MAAO4O,EAAG1O,GAUjC,GAAK0O,EAAGzL,EAAI,GAAKyL,EAAGzL,EAAI,EAEvB,OAAS7L,KAAKiV,OAEb,KAvhDmB,IAyhDlBqC,EAAGzL,EAAIyL,EAAGzL,EAAIxO,KAAKqL,MAAO4O,EAAGzL,GAC7B,MAED,KA3hDwB,KA6hDvByL,EAAGzL,EAAIyL,EAAGzL,EAAI,EAAI,EAAI,EACtB,MAED,KA/hD2B,KAiiDkB,IAAvCxO,KAAK4R,IAAK5R,KAAKqL,MAAO4O,EAAGzL,GAAM,GAEnCyL,EAAGzL,EAAIxO,KAAKyP,KAAMwK,EAAGzL,GAAMyL,EAAGzL,EAI9ByL,EAAGzL,EAAIyL,EAAGzL,EAAIxO,KAAKqL,MAAO4O,EAAGzL,GAgBjC,OANK7L,KAAKgW,QAETsB,EAAGzL,EAAI,EAAIyL,EAAGzL,GAIRyL,KAMTtY,OAAO2C,eAAgBmT,EAAQxT,UAAW,cAAe,CAExDT,IAAK,SAAWhC,IAEA,IAAVA,GAAiBmB,KAAKkW,aAM7B,MAAMsB,EAEL5Y,YAAagK,EAAI,EAAGiD,EAAI,EAAG4L,EAAI,EAAGlJ,EAAI,GAErCvP,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EACT7L,KAAKyX,EAAIA,EACTzX,KAAKuO,EAAIA,EAIVJ,YAEC,OAAOnO,KAAKyX,EAIbtJ,UAAWtP,GAEVmB,KAAKyX,EAAI5Y,EAIVuP,aAEC,OAAOpO,KAAKuO,EAIbH,WAAYvP,GAEXmB,KAAKuO,EAAI1P,EAIVD,IAAKgK,EAAGiD,EAAG4L,EAAGlJ,GAOb,OALAvO,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EACT7L,KAAKyX,EAAIA,EACTzX,KAAKuO,EAAIA,EAEFvO,KAIRpB,UAAWyP,GAOV,OALArO,KAAK4I,EAAIyF,EACTrO,KAAK6L,EAAIwC,EACTrO,KAAKyX,EAAIpJ,EACTrO,KAAKuO,EAAIF,EAEFrO,KAIRpB,KAAMgK,GAIL,OAFA5I,KAAK4I,EAAIA,EAEF5I,KAIRpB,KAAMiN,GAIL,OAFA7L,KAAK6L,EAAIA,EAEF7L,KAIRpB,KAAM6Y,GAIL,OAFAzX,KAAKyX,EAAIA,EAEFzX,KAIRpB,KAAM2P,GAIL,OAFAvO,KAAKuO,EAAIA,EAEFvO,KAIRpB,aAAcuK,EAAOtK,GAEpB,OAASsK,GAER,KAAK,EAAGnJ,KAAK4I,EAAI/J,EAAO,MACxB,KAAK,EAAGmB,KAAK6L,EAAIhN,EAAO,MACxB,KAAK,EAAGmB,KAAKyX,EAAI5Y,EAAO,MACxB,KAAK,EAAGmB,KAAKuO,EAAI1P,EAAO,MACxB,QAAS,MAAM,IAAIyP,MAAO,0BAA4BnF,GAIvD,OAAOnJ,KAIRpB,aAAcuK,GAEb,OAASA,GAER,KAAK,EAAG,OAAOnJ,KAAK4I,EACpB,KAAK,EAAG,OAAO5I,KAAK6L,EACpB,KAAK,EAAG,OAAO7L,KAAKyX,EACpB,KAAK,EAAG,OAAOzX,KAAKuO,EACpB,QAAS,MAAM,IAAID,MAAO,0BAA4BnF,IAMxDvK,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAK4I,EAAG5I,KAAK6L,EAAG7L,KAAKyX,EAAGzX,KAAKuO,GAI3D3P,KAAM2B,GAOL,OALAP,KAAK4I,EAAIrI,EAAEqI,EACX5I,KAAK6L,EAAItL,EAAEsL,EACX7L,KAAKyX,EAAIlX,EAAEkX,EACXzX,KAAKuO,OAAc5N,IAARJ,EAAEgO,EAAoBhO,EAAEgO,EAAI,EAEhCvO,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKwO,WAAYjO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EACZzX,KAAKuO,GAAKhO,EAAEgO,EAELvO,MAIRpB,UAAWhB,GAOV,OALAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EACVoC,KAAKyX,GAAK7Z,EACVoC,KAAKuO,GAAK3Q,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAOd,OALArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EACjB7L,KAAKyX,EAAIrK,EAAEqK,EAAIpK,EAAEoK,EACjBzX,KAAKuO,EAAInB,EAAEmB,EAAIlB,EAAEkB,EAEVvO,KAIRpB,gBAAiB2B,EAAG3C,GAOnB,OALAoC,KAAK4I,GAAKrI,EAAEqI,EAAIhL,EAChBoC,KAAK6L,GAAKtL,EAAEsL,EAAIjO,EAChBoC,KAAKyX,GAAKlX,EAAEkX,EAAI7Z,EAChBoC,KAAKuO,GAAKhO,EAAEgO,EAAI3Q,EAEToC,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKyO,WAAYlO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EACZzX,KAAKuO,GAAKhO,EAAEgO,EAELvO,MAIRpB,UAAWhB,GAOV,OALAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EACVoC,KAAKyX,GAAK7Z,EACVoC,KAAKuO,GAAK3Q,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAOd,OALArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EACjB7L,KAAKyX,EAAIrK,EAAEqK,EAAIpK,EAAEoK,EACjBzX,KAAKuO,EAAInB,EAAEmB,EAAIlB,EAAEkB,EAEVvO,KAIRpB,eAAgByP,GAOf,OALArO,KAAK4I,GAAKyF,EACVrO,KAAK6L,GAAKwC,EACVrO,KAAKyX,GAAKpJ,EACVrO,KAAKuO,GAAKF,EAEHrO,KAIRpB,aAAc0M,GAEb,MAAM1C,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EAAG4L,EAAIzX,KAAKyX,EAAGlJ,EAAIvO,KAAKuO,EAC7CjK,EAAIgH,EAAEqD,SAOZ,OALA3O,KAAK4I,EAAItE,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAAInT,EAAG,IAAOiK,EAC1DvO,KAAK6L,EAAIvH,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAAInT,EAAG,IAAOiK,EAC1DvO,KAAKyX,EAAInT,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,IAAOmT,EAAInT,EAAG,IAAOiK,EAC3DvO,KAAKuO,EAAIjK,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,IAAOmT,EAAInT,EAAG,IAAOiK,EAEpDvO,KAIRpB,aAAcyP,GAEb,OAAOrO,KAAK0O,eAAgB,EAAIL,GAIjCzP,2BAA4BuO,GAM3BnN,KAAKuO,EAAI,EAAIlR,KAAKqa,KAAMvK,EAAEoB,GAE1B,MAAM3Q,EAAIP,KAAK2R,KAAM,EAAI7B,EAAEoB,EAAIpB,EAAEoB,GAgBjC,OAdK3Q,EAAI,MAERoC,KAAK4I,EAAI,EACT5I,KAAK6L,EAAI,EACT7L,KAAKyX,EAAI,IAITzX,KAAK4I,EAAIuE,EAAEvE,EAAIhL,EACfoC,KAAK6L,EAAIsB,EAAEtB,EAAIjO,EACfoC,KAAKyX,EAAItK,EAAEsK,EAAI7Z,GAIToC,KAIRpB,+BAAgC0M,GAM/B,IAAIwE,EAAOlH,EAAGiD,EAAG4L,EACjB,MAAME,EAAU,IACfC,EAAW,GAEXlH,EAAKpF,EAAEqD,SAEPkJ,EAAMnH,EAAI,GAAKoH,EAAMpH,EAAI,GAAKqH,EAAMrH,EAAI,GACxCsH,EAAMtH,EAAI,GAAKuH,EAAMvH,EAAI,GAAKwH,EAAMxH,EAAI,GACxCyH,EAAMzH,EAAI,GAAK0H,EAAM1H,EAAI,GAAK2H,EAAM3H,EAAI,IAEzC,GAAOrT,KAAK4R,IAAK6I,EAAME,GAAQL,GACxBta,KAAK4R,IAAK8I,EAAMI,GAAQR,GACxBta,KAAK4R,IAAKiJ,EAAME,GAAQT,EAAY,CAM1C,GAAOta,KAAK4R,IAAK6I,EAAME,GAAQJ,GACxBva,KAAK4R,IAAK8I,EAAMI,GAAQP,GACxBva,KAAK4R,IAAKiJ,EAAME,GAAQR,GACxBva,KAAK4R,IAAK4I,EAAMI,EAAMI,EAAM,GAAMT,EAMxC,OAFA5X,KAAKa,IAAK,EAAG,EAAG,EAAG,GAEZb,KAMR8P,EAAQzS,KAAKoN,GAEb,MAAM6N,GAAOT,EAAM,GAAM,EACnBU,GAAON,EAAM,GAAM,EACnBO,GAAOH,EAAM,GAAM,EACnBI,GAAOX,EAAME,GAAQ,EACrBU,GAAOX,EAAMI,GAAQ,EACrBQ,GAAOT,EAAME,GAAQ,EA4D3B,OA1DOE,EAAKC,GAAUD,EAAKE,EAIrBF,EAAKX,GAET/O,EAAI,EACJiD,EAAI,WACJ4L,EAAI,aAIJ7O,EAAIvL,KAAK2R,KAAMsJ,GACfzM,EAAI4M,EAAK7P,EACT6O,EAAIiB,EAAK9P,GAIC2P,EAAKC,EAIXD,EAAKZ,GAET/O,EAAI,WACJiD,EAAI,EACJ4L,EAAI,aAIJ5L,EAAIxO,KAAK2R,KAAMuJ,GACf3P,EAAI6P,EAAK5M,EACT4L,EAAIkB,EAAK9M,GAQL2M,EAAKb,GAET/O,EAAI,WACJiD,EAAI,WACJ4L,EAAI,IAIJA,EAAIpa,KAAK2R,KAAMwJ,GACf5P,EAAI8P,EAAKjB,EACT5L,EAAI8M,EAAKlB,GAMXzX,KAAKa,IAAK+H,EAAGiD,EAAG4L,EAAG3H,GAEZ9P,KAMR,IAAIpC,EAAIP,KAAK2R,MAAQoJ,EAAMF,IAAUE,EAAMF,IACxCH,EAAMI,IAAUJ,EAAMI,IACtBH,EAAMF,IAAUE,EAAMF,IAYzB,OAVKza,KAAK4R,IAAKrR,GAAM,OAAQA,EAAI,GAKjCoC,KAAK4I,GAAMwP,EAAMF,GAAQta,EACzBoC,KAAK6L,GAAMkM,EAAMI,GAAQva,EACzBoC,KAAKyX,GAAMO,EAAMF,GAAQla,EACzBoC,KAAKuO,EAAIlR,KAAKqa,MAAQG,EAAMI,EAAMI,EAAM,GAAM,GAEvCrY,KAIRpB,IAAK2B,GAOJ,OALAP,KAAK4I,EAAIvL,KAAK6N,IAAKlL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK6N,IAAKlL,KAAK6L,EAAGtL,EAAEsL,GAC7B7L,KAAKyX,EAAIpa,KAAK6N,IAAKlL,KAAKyX,EAAGlX,EAAEkX,GAC7BzX,KAAKuO,EAAIlR,KAAK6N,IAAKlL,KAAKuO,EAAGhO,EAAEgO,GAEtBvO,KAIRpB,IAAK2B,GAOJ,OALAP,KAAK4I,EAAIvL,KAAK8N,IAAKnL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK8N,IAAKnL,KAAK6L,EAAGtL,EAAEsL,GAC7B7L,KAAKyX,EAAIpa,KAAK8N,IAAKnL,KAAKyX,EAAGlX,EAAEkX,GAC7BzX,KAAKuO,EAAIlR,KAAK8N,IAAKnL,KAAKuO,EAAGhO,EAAEgO,GAEtBvO,KAIRpB,MAAOsM,EAAKC,GASX,OALAnL,KAAK4I,EAAIvL,KAAK8N,IAAKD,EAAItC,EAAGvL,KAAK6N,IAAKC,EAAIvC,EAAG5I,KAAK4I,IAChD5I,KAAK6L,EAAIxO,KAAK8N,IAAKD,EAAIW,EAAGxO,KAAK6N,IAAKC,EAAIU,EAAG7L,KAAK6L,IAChD7L,KAAKyX,EAAIpa,KAAK8N,IAAKD,EAAIuM,EAAGpa,KAAK6N,IAAKC,EAAIsM,EAAGzX,KAAKyX,IAChDzX,KAAKuO,EAAIlR,KAAK8N,IAAKD,EAAIqD,EAAGlR,KAAK6N,IAAKC,EAAIoD,EAAGvO,KAAKuO,IAEzCvO,KAIRpB,YAAagQ,EAAQC,GAOpB,OALA7O,KAAK4I,EAAIvL,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK4I,IAClD5I,KAAK6L,EAAIxO,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK6L,IAClD7L,KAAKyX,EAAIpa,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAKyX,IAClDzX,KAAKuO,EAAIlR,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAKuO,IAE3CvO,KAIRpB,YAAasM,EAAKC,GAEjB,MAAM9B,EAASrJ,KAAKqJ,SAEpB,OAAOrJ,KAAK8O,aAAczF,GAAU,GAAIqF,eAAgBrR,KAAK8N,IAAKD,EAAK7N,KAAK6N,IAAKC,EAAK9B,KAIvFzK,QAOC,OALAoB,KAAK4I,EAAIvL,KAAKqL,MAAO1I,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAKqL,MAAO1I,KAAK6L,GAC1B7L,KAAKyX,EAAIpa,KAAKqL,MAAO1I,KAAKyX,GAC1BzX,KAAKuO,EAAIlR,KAAKqL,MAAO1I,KAAKuO,GAEnBvO,KAIRpB,OAOC,OALAoB,KAAK4I,EAAIvL,KAAKyP,KAAM9M,KAAK4I,GACzB5I,KAAK6L,EAAIxO,KAAKyP,KAAM9M,KAAK6L,GACzB7L,KAAKyX,EAAIpa,KAAKyP,KAAM9M,KAAKyX,GACzBzX,KAAKuO,EAAIlR,KAAKyP,KAAM9M,KAAKuO,GAElBvO,KAIRpB,QAOC,OALAoB,KAAK4I,EAAIvL,KAAK0R,MAAO/O,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAK0R,MAAO/O,KAAK6L,GAC1B7L,KAAKyX,EAAIpa,KAAK0R,MAAO/O,KAAKyX,GAC1BzX,KAAKuO,EAAIlR,KAAK0R,MAAO/O,KAAKuO,GAEnBvO,KAIRpB,cAOC,OALAoB,KAAK4I,EAAM5I,KAAK4I,EAAI,EAAMvL,KAAKyP,KAAM9M,KAAK4I,GAAMvL,KAAKqL,MAAO1I,KAAK4I,GACjE5I,KAAK6L,EAAM7L,KAAK6L,EAAI,EAAMxO,KAAKyP,KAAM9M,KAAK6L,GAAMxO,KAAKqL,MAAO1I,KAAK6L,GACjE7L,KAAKyX,EAAMzX,KAAKyX,EAAI,EAAMpa,KAAKyP,KAAM9M,KAAKyX,GAAMpa,KAAKqL,MAAO1I,KAAKyX,GACjEzX,KAAKuO,EAAMvO,KAAKuO,EAAI,EAAMlR,KAAKyP,KAAM9M,KAAKuO,GAAMlR,KAAKqL,MAAO1I,KAAKuO,GAE1DvO,KAIRpB,SAOC,OALAoB,KAAK4I,GAAM5I,KAAK4I,EAChB5I,KAAK6L,GAAM7L,KAAK6L,EAChB7L,KAAKyX,GAAMzX,KAAKyX,EAChBzX,KAAKuO,GAAMvO,KAAKuO,EAETvO,KAIRpB,IAAK2B,GAEJ,OAAOP,KAAK4I,EAAIrI,EAAEqI,EAAI5I,KAAK6L,EAAItL,EAAEsL,EAAI7L,KAAKyX,EAAIlX,EAAEkX,EAAIzX,KAAKuO,EAAIhO,EAAEgO,EAIhE3P,WAEC,OAAOoB,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,EAAI7L,KAAKyX,EAAIzX,KAAKyX,EAAIzX,KAAKuO,EAAIvO,KAAKuO,EAI5E3P,SAEC,OAAOvB,KAAK2R,KAAMhP,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,EAAI7L,KAAKyX,EAAIzX,KAAKyX,EAAIzX,KAAKuO,EAAIvO,KAAKuO,GAIvF3P,kBAEC,OAAOvB,KAAK4R,IAAKjP,KAAK4I,GAAMvL,KAAK4R,IAAKjP,KAAK6L,GAAMxO,KAAK4R,IAAKjP,KAAKyX,GAAMpa,KAAK4R,IAAKjP,KAAKuO,GAItF3P,YAEC,OAAOoB,KAAK8O,aAAc9O,KAAKqJ,UAAY,GAI5CzK,UAAWyK,GAEV,OAAOrJ,KAAKsP,YAAYZ,eAAgBrF,GAIzCzK,KAAM2B,EAAGgP,GAOR,OALAvP,KAAK4I,IAAOrI,EAAEqI,EAAI5I,KAAK4I,GAAM2G,EAC7BvP,KAAK6L,IAAOtL,EAAEsL,EAAI7L,KAAK6L,GAAM0D,EAC7BvP,KAAKyX,IAAOlX,EAAEkX,EAAIzX,KAAKyX,GAAMlI,EAC7BvP,KAAKuO,IAAOhO,EAAEgO,EAAIvO,KAAKuO,GAAMgB,EAEtBvP,KAIRpB,YAAa4Q,EAAIC,EAAIF,GAOpB,OALAvP,KAAK4I,EAAI4G,EAAG5G,GAAM6G,EAAG7G,EAAI4G,EAAG5G,GAAM2G,EAClCvP,KAAK6L,EAAI2D,EAAG3D,GAAM4D,EAAG5D,EAAI2D,EAAG3D,GAAM0D,EAClCvP,KAAKyX,EAAIjI,EAAGiI,GAAMhI,EAAGgI,EAAIjI,EAAGiI,GAAMlI,EAClCvP,KAAKuO,EAAIiB,EAAGjB,GAAMkB,EAAGlB,EAAIiB,EAAGjB,GAAMgB,EAE3BvP,KAIRpB,OAAQ2B,GAEP,OAAWA,EAAEqI,IAAM5I,KAAK4I,GAASrI,EAAEsL,IAAM7L,KAAK6L,GAAStL,EAAEkX,IAAMzX,KAAKyX,GAASlX,EAAEgO,IAAMvO,KAAKuO,EAI3F3P,UAAWsL,EAAOwF,GASjB,YAPgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAK4I,EAAIsB,EAAOwF,GAChB1P,KAAK6L,EAAI3B,EAAOwF,EAAS,GACzB1P,KAAKyX,EAAIvN,EAAOwF,EAAS,GACzB1P,KAAKuO,EAAIrE,EAAOwF,EAAS,GAElB1P,KAIRpB,QAASsL,EAAOwF,GAUf,YARe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAK4I,EACvBsB,EAAOwF,EAAS,GAAM1P,KAAK6L,EAC3B3B,EAAOwF,EAAS,GAAM1P,KAAKyX,EAC3BvN,EAAOwF,EAAS,GAAM1P,KAAKuO,EAEpBrE,EAIRtL,oBAAqBa,EAAW0J,EAAOuG,GAatC,YAXgB/O,IAAX+O,GAEJpR,QAAQC,KAAM,uEAIfyB,KAAK4I,EAAInJ,EAAUkQ,KAAMxG,GACzBnJ,KAAK6L,EAAIpM,EAAUmQ,KAAMzG,GACzBnJ,KAAKyX,EAAIhY,EAAUmZ,KAAMzP,GACzBnJ,KAAKuO,EAAI9O,EAAUoZ,KAAM1P,GAElBnJ,KAIRpB,SAOC,OALAoB,KAAK4I,EAAIvL,KAAKC,SACd0C,KAAK6L,EAAIxO,KAAKC,SACd0C,KAAKyX,EAAIpa,KAAKC,SACd0C,KAAKuO,EAAIlR,KAAKC,SAEP0C,MAWT,SAAS8Y,EAAmB3K,EAAOC,EAAQtQ,GAE1CkC,KAAKmO,MAAQA,EACbnO,KAAKoO,OAASA,EAEdpO,KAAK+Y,QAAU,IAAIvB,EAAS,EAAG,EAAGrJ,EAAOC,GACzCpO,KAAKgZ,aAAc,EAEnBhZ,KAAKiZ,SAAW,IAAIzB,EAAS,EAAG,EAAGrJ,EAAOC,GAE1CtQ,EAAUA,GAAW,GAErBkC,KAAKkZ,QAAU,IAAIpE,OAASnU,EAAW7C,EAAQiX,QAASjX,EAAQkX,MAAOlX,EAAQmX,MAAOnX,EAAQoX,UAAWpX,EAAQqX,UAAWrX,EAAQsX,OAAQtX,EAAQgB,KAAMhB,EAAQuX,WAAYvX,EAAQwX,UAEtLtV,KAAKkZ,QAAQhF,MAAQ,GACrBlU,KAAKkZ,QAAQhF,MAAM/F,MAAQA,EAC3BnO,KAAKkZ,QAAQhF,MAAM9F,OAASA,EAE5BpO,KAAKkZ,QAAQpD,qBAA8CnV,IAA5B7C,EAAQgY,iBAAgChY,EAAQgY,gBAC/E9V,KAAKkZ,QAAQ/D,eAAkCxU,IAAtB7C,EAAQqX,UAA0BrX,EAAQqX,UAnuE/C,KAquEpBnV,KAAKmZ,iBAAsCxY,IAAxB7C,EAAQqb,aAA4Brb,EAAQqb,YAC/DnZ,KAAKoZ,mBAA0CzY,IAA1B7C,EAAQsb,eAA8Btb,EAAQsb,cACnEpZ,KAAKqZ,kBAAwC1Y,IAAzB7C,EAAQub,aAA6Bvb,EAAQub,aAAe,KA4DjF,SAASC,EAA8BnL,EAAOC,EAAQtQ,GAErDgb,EAAkBnT,KAAM3F,KAAMmO,EAAOC,EAAQtQ,GAE7CkC,KAAKuZ,QAAU,EA5DhBT,EAAkBxX,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAExF4B,YAAa4V,EAEbU,qBAAqB,EAErBC,QAAS,SAAWtL,EAAOC,GAErBpO,KAAKmO,QAAUA,GAASnO,KAAKoO,SAAWA,IAE5CpO,KAAKmO,MAAQA,EACbnO,KAAKoO,OAASA,EAEdpO,KAAKkZ,QAAQhF,MAAM/F,MAAQA,EAC3BnO,KAAKkZ,QAAQhF,MAAM9F,OAASA,EAE5BpO,KAAKoX,WAINpX,KAAKiZ,SAASpY,IAAK,EAAG,EAAGsN,EAAOC,GAChCpO,KAAK+Y,QAAQlY,IAAK,EAAG,EAAGsN,EAAOC,IAIhCoI,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrCyW,KAAM,SAAWnN,GAahB,OAXAtJ,KAAKmO,MAAQ7E,EAAO6E,MACpBnO,KAAKoO,OAAS9E,EAAO8E,OAErBpO,KAAKiZ,SAASxC,KAAMnN,EAAO2P,UAE3BjZ,KAAKkZ,QAAU5P,EAAO4P,QAAQ1C,QAE9BxW,KAAKmZ,YAAc7P,EAAO6P,YAC1BnZ,KAAKoZ,cAAgB9P,EAAO8P,cAC5BpZ,KAAKqZ,aAAe/P,EAAO+P,aAEpBrZ,MAIRoX,QAAS,WAERpX,KAAKgK,cAAe,CAAElL,KAAM,eAc9Bwa,EAA6BhY,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ0C,EAAkBxX,WAAa,CAErG4B,YAAaoW,EAEbI,gCAAgC,EAEhCjD,KAAM,SAAWnN,GAMhB,OAJAwP,EAAkBxX,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE7CtJ,KAAKuZ,QAAUjQ,EAAOiQ,QAEfvZ,QAMT,MAAM2Z,EAEL/a,YAAagK,EAAI,EAAGiD,EAAI,EAAG4L,EAAI,EAAGlJ,EAAI,GAErCvP,OAAO2C,eAAgB3B,KAAM,eAAgB,CAAEnB,OAAO,IAEtDmB,KAAK4Z,GAAKhR,EACV5I,KAAK6Z,GAAKhO,EACV7L,KAAK8Z,GAAKrC,EACVzX,KAAK+Z,GAAKxL,EAIX3P,aAAcob,EAAIC,EAAIC,EAAIpO,GAEzB,OAAOoO,EAAGzD,KAAMuD,GAAKG,MAAOF,EAAInO,GAIjClN,iBAAkBwb,EAAKC,EAAWC,EAAMC,EAAYC,EAAMC,EAAY3O,GAIrE,IAAI4O,EAAKJ,EAAMC,EAAa,GAC3BI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GACxBM,EAAKP,EAAMC,EAAa,GAEzB,MAAMO,EAAKN,EAAMC,EAAa,GAC7BM,EAAKP,EAAMC,EAAa,GACxBO,EAAKR,EAAMC,EAAa,GACxBQ,EAAKT,EAAMC,EAAa,GAEzB,GAAKI,IAAOI,GAAMP,IAAOI,GAAMH,IAAOI,GAAMH,IAAOI,EAAK,CAEvD,IAAIpd,EAAI,EAAIkO,EACZ,MAAM0B,EAAMkN,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAC9CC,EAAQ1N,GAAO,EAAI,GAAM,EACzB2N,EAAS,EAAI3N,EAAMA,EAGpB,GAAK2N,EAAS/b,OAAOkJ,QAAU,CAE9B,MAAMmF,EAAMpQ,KAAK2R,KAAMmM,GACtBC,EAAM/d,KAAK6R,MAAOzB,EAAKD,EAAM0N,GAE9Btd,EAAIP,KAAKoQ,IAAK7P,EAAIwd,GAAQ3N,EAC1B3B,EAAIzO,KAAKoQ,IAAK3B,EAAIsP,GAAQ3N,EAI3B,MAAM4N,EAAOvP,EAAIoP,EAQjB,GANAR,EAAKA,EAAK9c,EAAIkd,EAAKO,EACnBV,EAAKA,EAAK/c,EAAImd,EAAKM,EACnBT,EAAKA,EAAKhd,EAAIod,EAAKK,EACnBR,EAAKA,EAAKjd,EAAIqd,EAAKI,EAGdzd,IAAM,EAAIkO,EAAI,CAElB,MAAMyG,EAAI,EAAIlV,KAAK2R,KAAM0L,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,EAAKC,EAAKA,GAE5DH,GAAMnI,EACNoI,GAAMpI,EACNqI,GAAMrI,EACNsI,GAAMtI,GAMR6H,EAAKC,GAAcK,EACnBN,EAAKC,EAAY,GAAMM,EACvBP,EAAKC,EAAY,GAAMO,EACvBR,EAAKC,EAAY,GAAMQ,EAIxBjc,+BAAgCwb,EAAKC,EAAWC,EAAMC,EAAYC,EAAMC,GAEvE,MAAMC,EAAKJ,EAAMC,GACXI,EAAKL,EAAMC,EAAa,GACxBK,EAAKN,EAAMC,EAAa,GACxBM,EAAKP,EAAMC,EAAa,GAExBO,EAAKN,EAAMC,GACXM,EAAKP,EAAMC,EAAa,GACxBO,EAAKR,EAAMC,EAAa,GACxBQ,EAAKT,EAAMC,EAAa,GAO9B,OALAL,EAAKC,GAAcK,EAAKO,EAAKJ,EAAKC,EAAKH,EAAKK,EAAKJ,EAAKG,EACtDX,EAAKC,EAAY,GAAMM,EAAKM,EAAKJ,EAAKE,EAAKH,EAAKE,EAAKJ,EAAKM,EAC1DZ,EAAKC,EAAY,GAAMO,EAAKK,EAAKJ,EAAKG,EAAKN,EAAKK,EAAKJ,EAAKG,EAC1DV,EAAKC,EAAY,GAAMQ,EAAKI,EAAKP,EAAKI,EAAKH,EAAKI,EAAKH,EAAKI,EAEnDZ,EAIRxR,QAEC,OAAO5I,KAAK4Z,GAIbhR,MAAO/J,GAENmB,KAAK4Z,GAAK/a,EACVmB,KAAKsb,oBAINzP,QAEC,OAAO7L,KAAK6Z,GAIbhO,MAAOhN,GAENmB,KAAK6Z,GAAKhb,EACVmB,KAAKsb,oBAIN7D,QAEC,OAAOzX,KAAK8Z,GAIbrC,MAAO5Y,GAENmB,KAAK8Z,GAAKjb,EACVmB,KAAKsb,oBAIN/M,QAEC,OAAOvO,KAAK+Z,GAIbxL,MAAO1P,GAENmB,KAAK+Z,GAAKlb,EACVmB,KAAKsb,oBAIN1c,IAAKgK,EAAGiD,EAAG4L,EAAGlJ,GASb,OAPAvO,KAAK4Z,GAAKhR,EACV5I,KAAK6Z,GAAKhO,EACV7L,KAAK8Z,GAAKrC,EACVzX,KAAK+Z,GAAKxL,EAEVvO,KAAKsb,oBAEEtb,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAK4Z,GAAI5Z,KAAK6Z,GAAI7Z,KAAK8Z,GAAI9Z,KAAK+Z,IAI9Dnb,KAAM2c,GASL,OAPAvb,KAAK4Z,GAAK2B,EAAW3S,EACrB5I,KAAK6Z,GAAK0B,EAAW1P,EACrB7L,KAAK8Z,GAAKyB,EAAW9D,EACrBzX,KAAK+Z,GAAKwB,EAAWhN,EAErBvO,KAAKsb,oBAEEtb,KAIRpB,aAAc4c,EAAO3W,GAEpB,IAAS2W,IAASA,EAAMC,QAEvB,MAAM,IAAInN,MAAO,oGAIlB,MAAM1F,EAAI4S,EAAM5B,GAAI/N,EAAI2P,EAAM3B,GAAIpC,EAAI+D,EAAM1B,GAAIvM,EAAQiO,EAAME,OAMxDlO,EAAMnQ,KAAKmQ,IACXC,EAAMpQ,KAAKoQ,IAEXkO,EAAKnO,EAAK5E,EAAI,GACd8E,EAAKF,EAAK3B,EAAI,GACd+P,EAAKpO,EAAKiK,EAAI,GAEdoE,EAAKpO,EAAK7E,EAAI,GACd+E,EAAKF,EAAK5B,EAAI,GACdiQ,EAAKrO,EAAKgK,EAAI,GAEpB,OAASlK,GAER,IAAK,MACJvN,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,IAAK,MACJ9b,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,IAAK,MACJ9b,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,IAAK,MACJ9b,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,IAAK,MACJ9b,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,IAAK,MACJ9b,KAAK4Z,GAAKiC,EAAKnO,EAAKkO,EAAKD,EAAKhO,EAAKmO,EACnC9b,KAAK6Z,GAAK8B,EAAKhO,EAAKiO,EAAKC,EAAKnO,EAAKoO,EACnC9b,KAAK8Z,GAAK6B,EAAKjO,EAAKoO,EAAKD,EAAKlO,EAAKiO,EACnC5b,KAAK+Z,GAAK4B,EAAKjO,EAAKkO,EAAKC,EAAKlO,EAAKmO,EACnC,MAED,QACCxd,QAAQC,KAAM,mEAAqEgP,GAMrF,OAFgB,IAAX1I,GAAmB7E,KAAKsb,oBAEtBtb,KAIRpB,iBAAkBmd,EAAMjM,GAMvB,MAAMkM,EAAYlM,EAAQ,EAAGlS,EAAIP,KAAKoQ,IAAKuO,GAS3C,OAPAhc,KAAK4Z,GAAKmC,EAAKnT,EAAIhL,EACnBoC,KAAK6Z,GAAKkC,EAAKlQ,EAAIjO,EACnBoC,KAAK8Z,GAAKiC,EAAKtE,EAAI7Z,EACnBoC,KAAK+Z,GAAK1c,KAAKmQ,IAAKwO,GAEpBhc,KAAKsb,oBAEEtb,KAIRpB,sBAAuB0M,GAMtB,MAAMoF,EAAKpF,EAAEqD,SAEZkJ,EAAMnH,EAAI,GAAKoH,EAAMpH,EAAI,GAAKqH,EAAMrH,EAAI,GACxCsH,EAAMtH,EAAI,GAAKuH,EAAMvH,EAAI,GAAKwH,EAAMxH,EAAI,GACxCyH,EAAMzH,EAAI,GAAK0H,EAAM1H,EAAI,GAAK2H,EAAM3H,EAAI,IAExCuL,EAAQpE,EAAMI,EAAMI,EAErB,GAAK4D,EAAQ,EAAI,CAEhB,MAAMre,EAAI,GAAMP,KAAK2R,KAAMiN,EAAQ,GAEnCjc,KAAK+Z,GAAK,IAAOnc,EACjBoC,KAAK4Z,IAAOxB,EAAMF,GAAQta,EAC1BoC,KAAK6Z,IAAO9B,EAAMI,GAAQva,EAC1BoC,KAAK8Z,IAAO9B,EAAMF,GAAQla,OAEpB,GAAKia,EAAMI,GAAOJ,EAAMQ,EAAM,CAEpC,MAAMza,EAAI,EAAMP,KAAK2R,KAAM,EAAM6I,EAAMI,EAAMI,GAE7CrY,KAAK+Z,IAAO3B,EAAMF,GAAQta,EAC1BoC,KAAK4Z,GAAK,IAAOhc,EACjBoC,KAAK6Z,IAAO/B,EAAME,GAAQpa,EAC1BoC,KAAK8Z,IAAO/B,EAAMI,GAAQva,OAEpB,GAAKqa,EAAMI,EAAM,CAEvB,MAAMza,EAAI,EAAMP,KAAK2R,KAAM,EAAMiJ,EAAMJ,EAAMQ,GAE7CrY,KAAK+Z,IAAOhC,EAAMI,GAAQva,EAC1BoC,KAAK4Z,IAAO9B,EAAME,GAAQpa,EAC1BoC,KAAK6Z,GAAK,IAAOjc,EACjBoC,KAAK8Z,IAAO5B,EAAME,GAAQxa,MAEpB,CAEN,MAAMA,EAAI,EAAMP,KAAK2R,KAAM,EAAMqJ,EAAMR,EAAMI,GAE7CjY,KAAK+Z,IAAO/B,EAAMF,GAAQla,EAC1BoC,KAAK4Z,IAAO7B,EAAMI,GAAQva,EAC1BoC,KAAK6Z,IAAO3B,EAAME,GAAQxa,EAC1BoC,KAAK8Z,GAAK,IAAOlc,EAMlB,OAFAoC,KAAKsb,oBAEEtb,KAIRpB,mBAAoBsd,EAAOC,GAM1B,IAAI7I,EAAI4I,EAAME,IAAKD,GAAQ,EAiC3B,OA/BK7I,EAJO,MAMXA,EAAI,EAECjW,KAAK4R,IAAKiN,EAAMtT,GAAMvL,KAAK4R,IAAKiN,EAAMzE,IAE1CzX,KAAK4Z,IAAOsC,EAAMrQ,EAClB7L,KAAK6Z,GAAKqC,EAAMtT,EAChB5I,KAAK8Z,GAAK,EACV9Z,KAAK+Z,GAAKzG,IAIVtT,KAAK4Z,GAAK,EACV5Z,KAAK6Z,IAAOqC,EAAMzE,EAClBzX,KAAK8Z,GAAKoC,EAAMrQ,EAChB7L,KAAK+Z,GAAKzG,KAQXtT,KAAK4Z,GAAKsC,EAAMrQ,EAAIsQ,EAAI1E,EAAIyE,EAAMzE,EAAI0E,EAAItQ,EAC1C7L,KAAK6Z,GAAKqC,EAAMzE,EAAI0E,EAAIvT,EAAIsT,EAAMtT,EAAIuT,EAAI1E,EAC1CzX,KAAK8Z,GAAKoC,EAAMtT,EAAIuT,EAAItQ,EAAIqQ,EAAMrQ,EAAIsQ,EAAIvT,EAC1C5I,KAAK+Z,GAAKzG,GAIJtT,KAAKsP,YAIb1Q,QAASuO,GAER,OAAO,EAAI9P,KAAKqa,KAAMra,KAAK4R,IAAK1E,EAAUU,MAAOjL,KAAKoc,IAAKjP,IAAO,EAAG,KAItEvO,cAAeuO,EAAGkP,GAEjB,MAAMvM,EAAQ9P,KAAKsc,QAASnP,GAE5B,GAAe,IAAV2C,EAAc,OAAO9P,KAE1B,MAAM8L,EAAIzO,KAAK6N,IAAK,EAAGmR,EAAOvM,GAI9B,OAFA9P,KAAKma,MAAOhN,EAAGrB,GAER9L,KAIRpB,WAEC,OAAOoB,KAAKa,IAAK,EAAG,EAAG,EAAG,GAI3BjC,UAIC,OAAOoB,KAAKuc,YAIb3d,YAQC,OANAoB,KAAK4Z,KAAQ,EACb5Z,KAAK6Z,KAAQ,EACb7Z,KAAK8Z,KAAQ,EAEb9Z,KAAKsb,oBAEEtb,KAIRpB,IAAK2B,GAEJ,OAAOP,KAAK4Z,GAAKrZ,EAAEqZ,GAAK5Z,KAAK6Z,GAAKtZ,EAAEsZ,GAAK7Z,KAAK8Z,GAAKvZ,EAAEuZ,GAAK9Z,KAAK+Z,GAAKxZ,EAAEwZ,GAIvEnb,WAEC,OAAOoB,KAAK4Z,GAAK5Z,KAAK4Z,GAAK5Z,KAAK6Z,GAAK7Z,KAAK6Z,GAAK7Z,KAAK8Z,GAAK9Z,KAAK8Z,GAAK9Z,KAAK+Z,GAAK/Z,KAAK+Z,GAInFnb,SAEC,OAAOvB,KAAK2R,KAAMhP,KAAK4Z,GAAK5Z,KAAK4Z,GAAK5Z,KAAK6Z,GAAK7Z,KAAK6Z,GAAK7Z,KAAK8Z,GAAK9Z,KAAK8Z,GAAK9Z,KAAK+Z,GAAK/Z,KAAK+Z,IAI9Fnb,YAEC,IAAIwL,EAAIpK,KAAKqJ,SAsBb,OApBW,IAANe,GAEJpK,KAAK4Z,GAAK,EACV5Z,KAAK6Z,GAAK,EACV7Z,KAAK8Z,GAAK,EACV9Z,KAAK+Z,GAAK,IAIV3P,EAAI,EAAIA,EAERpK,KAAK4Z,GAAK5Z,KAAK4Z,GAAKxP,EACpBpK,KAAK6Z,GAAK7Z,KAAK6Z,GAAKzP,EACpBpK,KAAK8Z,GAAK9Z,KAAK8Z,GAAK1P,EACpBpK,KAAK+Z,GAAK/Z,KAAK+Z,GAAK3P,GAIrBpK,KAAKsb,oBAEEtb,KAIRpB,SAAUuO,EAAG3M,GAEZ,YAAWG,IAANH,GAEJlC,QAAQC,KAAM,0GACPyB,KAAKwc,oBAAqBrP,EAAG3M,IAI9BR,KAAKwc,oBAAqBxc,KAAMmN,GAIxCvO,YAAauO,GAEZ,OAAOnN,KAAKwc,oBAAqBrP,EAAGnN,MAIrCpB,oBAAqBwO,EAAGC,GAIvB,MAAMoP,EAAMrP,EAAEwM,GAAI8C,EAAMtP,EAAEyM,GAAI8C,EAAMvP,EAAE0M,GAAI8C,EAAMxP,EAAE2M,GAC5C8C,EAAMxP,EAAEuM,GAAIkD,EAAMzP,EAAEwM,GAAIkD,EAAM1P,EAAEyM,GAAIkD,EAAM3P,EAAE0M,GASlD,OAPA/Z,KAAK4Z,GAAK6C,EAAMO,EAAMJ,EAAMC,EAAMH,EAAMK,EAAMJ,EAAMG,EACpD9c,KAAK6Z,GAAK6C,EAAMM,EAAMJ,EAAME,EAAMH,EAAME,EAAMJ,EAAMM,EACpD/c,KAAK8Z,GAAK6C,EAAMK,EAAMJ,EAAMG,EAAMN,EAAMK,EAAMJ,EAAMG,EACpD7c,KAAK+Z,GAAK6C,EAAMI,EAAMP,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAEpD/c,KAAKsb,oBAEEtb,KAIRpB,MAAOqb,EAAInO,GAEV,GAAW,IAANA,EAAU,OAAO9L,KACtB,GAAW,IAAN8L,EAAU,OAAO9L,KAAKyW,KAAMwD,GAEjC,MAAMrR,EAAI5I,KAAK4Z,GAAI/N,EAAI7L,KAAK6Z,GAAIpC,EAAIzX,KAAK8Z,GAAIvL,EAAIvO,KAAK+Z,GAItD,IAAIkD,EAAe1O,EAAI0L,EAAGF,GAAKnR,EAAIqR,EAAGL,GAAK/N,EAAIoO,EAAGJ,GAAKpC,EAAIwC,EAAGH,GAiB9D,GAfKmD,EAAe,GAEnBjd,KAAK+Z,IAAOE,EAAGF,GACf/Z,KAAK4Z,IAAOK,EAAGL,GACf5Z,KAAK6Z,IAAOI,EAAGJ,GACf7Z,KAAK8Z,IAAOG,EAAGH,GAEfmD,GAAiBA,GAIjBjd,KAAKyW,KAAMwD,GAIPgD,GAAgB,EAOpB,OALAjd,KAAK+Z,GAAKxL,EACVvO,KAAK4Z,GAAKhR,EACV5I,KAAK6Z,GAAKhO,EACV7L,KAAK8Z,GAAKrC,EAEHzX,KAIR,MAAMkd,EAAkB,EAAMD,EAAeA,EAE7C,GAAKC,GAAmB9d,OAAOkJ,QAAU,CAExC,MAAM1K,EAAI,EAAIkO,EASd,OARA9L,KAAK+Z,GAAKnc,EAAI2Q,EAAIzC,EAAI9L,KAAK+Z,GAC3B/Z,KAAK4Z,GAAKhc,EAAIgL,EAAIkD,EAAI9L,KAAK4Z,GAC3B5Z,KAAK6Z,GAAKjc,EAAIiO,EAAIC,EAAI9L,KAAK6Z,GAC3B7Z,KAAK8Z,GAAKlc,EAAI6Z,EAAI3L,EAAI9L,KAAK8Z,GAE3B9Z,KAAKsP,YACLtP,KAAKsb,oBAEEtb,KAIR,MAAMmd,EAAe9f,KAAK2R,KAAMkO,GAC1BE,EAAY/f,KAAK6R,MAAOiO,EAAcF,GACtCI,EAAShgB,KAAKoQ,KAAO,EAAI3B,GAAMsR,GAAcD,EAClDG,EAASjgB,KAAKoQ,IAAK3B,EAAIsR,GAAcD,EAStC,OAPAnd,KAAK+Z,GAAOxL,EAAI8O,EAASrd,KAAK+Z,GAAKuD,EACnCtd,KAAK4Z,GAAOhR,EAAIyU,EAASrd,KAAK4Z,GAAK0D,EACnCtd,KAAK6Z,GAAOhO,EAAIwR,EAASrd,KAAK6Z,GAAKyD,EACnCtd,KAAK8Z,GAAOrC,EAAI4F,EAASrd,KAAK8Z,GAAKwD,EAEnCtd,KAAKsb,oBAEEtb,KAIRpB,OAAQ2c,GAEP,OAASA,EAAW3B,KAAO5Z,KAAK4Z,IAAU2B,EAAW1B,KAAO7Z,KAAK6Z,IAAU0B,EAAWzB,KAAO9Z,KAAK8Z,IAAUyB,EAAWxB,KAAO/Z,KAAK+Z,GAIpInb,UAAWsL,EAAOwF,GAWjB,YATgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAK4Z,GAAK1P,EAAOwF,GACjB1P,KAAK6Z,GAAK3P,EAAOwF,EAAS,GAC1B1P,KAAK8Z,GAAK5P,EAAOwF,EAAS,GAC1B1P,KAAK+Z,GAAK7P,EAAOwF,EAAS,GAE1B1P,KAAKsb,oBAEEtb,KAIRpB,QAASsL,EAAOwF,GAUf,YARe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAK4Z,GACvB1P,EAAOwF,EAAS,GAAM1P,KAAK6Z,GAC3B3P,EAAOwF,EAAS,GAAM1P,KAAK8Z,GAC3B5P,EAAOwF,EAAS,GAAM1P,KAAK+Z,GAEpB7P,EAIRtL,oBAAqBa,EAAW0J,GAO/B,OALAnJ,KAAK4Z,GAAKna,EAAUkQ,KAAMxG,GAC1BnJ,KAAK6Z,GAAKpa,EAAUmQ,KAAMzG,GAC1BnJ,KAAK8Z,GAAKra,EAAUmZ,KAAMzP,GAC1BnJ,KAAK+Z,GAAKta,EAAUoZ,KAAM1P,GAEnBnJ,KAIRpB,UAAW2e,GAIV,OAFAvd,KAAKsb,kBAAoBiC,EAElBvd,KAIRpB,sBAID,MAAM4e,EAEL5e,YAAagK,EAAI,EAAGiD,EAAI,EAAG4L,EAAI,GAE9BzY,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EACT7L,KAAKyX,EAAIA,EAIV7Y,IAAKgK,EAAGiD,EAAG4L,GAQV,YANW9W,IAAN8W,IAAkBA,EAAIzX,KAAKyX,GAEhCzX,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EACT7L,KAAKyX,EAAIA,EAEFzX,KAIRpB,UAAWyP,GAMV,OAJArO,KAAK4I,EAAIyF,EACTrO,KAAK6L,EAAIwC,EACTrO,KAAKyX,EAAIpJ,EAEFrO,KAIRpB,KAAMgK,GAIL,OAFA5I,KAAK4I,EAAIA,EAEF5I,KAIRpB,KAAMiN,GAIL,OAFA7L,KAAK6L,EAAIA,EAEF7L,KAIRpB,KAAM6Y,GAIL,OAFAzX,KAAKyX,EAAIA,EAEFzX,KAIRpB,aAAcuK,EAAOtK,GAEpB,OAASsK,GAER,KAAK,EAAGnJ,KAAK4I,EAAI/J,EAAO,MACxB,KAAK,EAAGmB,KAAK6L,EAAIhN,EAAO,MACxB,KAAK,EAAGmB,KAAKyX,EAAI5Y,EAAO,MACxB,QAAS,MAAM,IAAIyP,MAAO,0BAA4BnF,GAIvD,OAAOnJ,KAIRpB,aAAcuK,GAEb,OAASA,GAER,KAAK,EAAG,OAAOnJ,KAAK4I,EACpB,KAAK,EAAG,OAAO5I,KAAK6L,EACpB,KAAK,EAAG,OAAO7L,KAAKyX,EACpB,QAAS,MAAM,IAAInJ,MAAO,0BAA4BnF,IAMxDvK,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAK4I,EAAG5I,KAAK6L,EAAG7L,KAAKyX,GAInD7Y,KAAM2B,GAML,OAJAP,KAAK4I,EAAIrI,EAAEqI,EACX5I,KAAK6L,EAAItL,EAAEsL,EACX7L,KAAKyX,EAAIlX,EAAEkX,EAEJzX,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKwO,WAAYjO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EAELzX,MAIRpB,UAAWhB,GAMV,OAJAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EACVoC,KAAKyX,GAAK7Z,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAMd,OAJArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EACjB7L,KAAKyX,EAAIrK,EAAEqK,EAAIpK,EAAEoK,EAEVzX,KAIRpB,gBAAiB2B,EAAG3C,GAMnB,OAJAoC,KAAK4I,GAAKrI,EAAEqI,EAAIhL,EAChBoC,KAAK6L,GAAKtL,EAAEsL,EAAIjO,EAChBoC,KAAKyX,GAAKlX,EAAEkX,EAAI7Z,EAEToC,KAIRpB,IAAK2B,EAAGgO,GAEP,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,yFACPyB,KAAKyO,WAAYlO,EAAGgO,KAI5BvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EAELzX,MAIRpB,UAAWhB,GAMV,OAJAoC,KAAK4I,GAAKhL,EACVoC,KAAK6L,GAAKjO,EACVoC,KAAKyX,GAAK7Z,EAEHoC,KAIRpB,WAAYwO,EAAGC,GAMd,OAJArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EACjB7L,KAAKyX,EAAIrK,EAAEqK,EAAIpK,EAAEoK,EAEVzX,KAIRpB,SAAU2B,EAAGgO,GAEZ,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,mGACPyB,KAAKyd,gBAAiBld,EAAGgO,KAIjCvO,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EAELzX,MAIRpB,eAAgByP,GAMf,OAJArO,KAAK4I,GAAKyF,EACVrO,KAAK6L,GAAKwC,EACVrO,KAAKyX,GAAKpJ,EAEHrO,KAIRpB,gBAAiBwO,EAAGC,GAMnB,OAJArN,KAAK4I,EAAIwE,EAAExE,EAAIyE,EAAEzE,EACjB5I,KAAK6L,EAAIuB,EAAEvB,EAAIwB,EAAExB,EACjB7L,KAAKyX,EAAIrK,EAAEqK,EAAIpK,EAAEoK,EAEVzX,KAIRpB,WAAY4c,GAQX,OANSA,GAASA,EAAMC,SAEvBnd,QAAQ0R,MAAO,+FAIThQ,KAAK0d,gBAAiBC,EAAYC,aAAcpC,IAIxD5c,eAAgBmd,EAAMjM,GAErB,OAAO9P,KAAK0d,gBAAiBC,EAAYE,iBAAkB9B,EAAMjM,IAIlElR,aAAc0M,GAEb,MAAM1C,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EAAG4L,EAAIzX,KAAKyX,EACjCnT,EAAIgH,EAAEqD,SAMZ,OAJA3O,KAAK4I,EAAItE,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAC5CzX,KAAK6L,EAAIvH,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAC5CzX,KAAKyX,EAAInT,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAErCzX,KAIRpB,kBAAmB0M,GAElB,OAAOtL,KAAKuX,aAAcjM,GAAIgE,YAI/B1Q,aAAc0M,GAEb,MAAM1C,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EAAG4L,EAAIzX,KAAKyX,EACjCnT,EAAIgH,EAAEqD,SAENJ,EAAI,GAAMjK,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,IAAOmT,EAAInT,EAAG,KAM3D,OAJAtE,KAAK4I,GAAMtE,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAAInT,EAAG,KAASiK,EAC9DvO,KAAK6L,GAAMvH,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAAInT,EAAG,KAASiK,EAC9DvO,KAAKyX,GAAMnT,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,IAAOmT,EAAInT,EAAG,KAASiK,EAExDvO,KAIRpB,gBAAiBuO,GAEhB,MAAMvE,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EAAG4L,EAAIzX,KAAKyX,EACjCqG,EAAK3Q,EAAEvE,EAAGmV,EAAK5Q,EAAEtB,EAAGmS,EAAK7Q,EAAEsK,EAAGwG,EAAK9Q,EAAEoB,EAIrC2P,EAAKD,EAAKrV,EAAImV,EAAKtG,EAAIuG,EAAKnS,EAC5BsS,EAAKF,EAAKpS,EAAImS,EAAKpV,EAAIkV,EAAKrG,EAC5B2G,EAAKH,EAAKxG,EAAIqG,EAAKjS,EAAIkS,EAAKnV,EAC5ByV,GAAOP,EAAKlV,EAAImV,EAAKlS,EAAImS,EAAKvG,EAQpC,OAJAzX,KAAK4I,EAAIsV,EAAKD,EAAKI,GAAOP,EAAKK,GAAOH,EAAKI,GAAOL,EAClD/d,KAAK6L,EAAIsS,EAAKF,EAAKI,GAAON,EAAKK,GAAON,EAAKI,GAAOF,EAClDhe,KAAKyX,EAAI2G,EAAKH,EAAKI,GAAOL,EAAKE,GAAOH,EAAKI,GAAOL,EAE3C9d,KAIRpB,QAAS0f,GAER,OAAOte,KAAKue,aAAcD,EAAOE,oBAAqBD,aAAcD,EAAOG,kBAI5E7f,UAAW0f,GAEV,OAAOte,KAAKue,aAAcD,EAAOI,yBAA0BH,aAAcD,EAAOK,aAIjF/f,mBAAoB0M,GAKnB,MAAM1C,EAAI5I,KAAK4I,EAAGiD,EAAI7L,KAAK6L,EAAG4L,EAAIzX,KAAKyX,EACjCnT,EAAIgH,EAAEqD,SAMZ,OAJA3O,KAAK4I,EAAItE,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAC5CzX,KAAK6L,EAAIvH,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,GAAMmT,EAC5CzX,KAAKyX,EAAInT,EAAG,GAAMsE,EAAItE,EAAG,GAAMuH,EAAIvH,EAAG,IAAOmT,EAEtCzX,KAAKsP,YAIb1Q,OAAQ2B,GAMP,OAJAP,KAAK4I,GAAKrI,EAAEqI,EACZ5I,KAAK6L,GAAKtL,EAAEsL,EACZ7L,KAAKyX,GAAKlX,EAAEkX,EAELzX,KAIRpB,aAAcyP,GAEb,OAAOrO,KAAK0O,eAAgB,EAAIL,GAIjCzP,IAAK2B,GAMJ,OAJAP,KAAK4I,EAAIvL,KAAK6N,IAAKlL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK6N,IAAKlL,KAAK6L,EAAGtL,EAAEsL,GAC7B7L,KAAKyX,EAAIpa,KAAK6N,IAAKlL,KAAKyX,EAAGlX,EAAEkX,GAEtBzX,KAIRpB,IAAK2B,GAMJ,OAJAP,KAAK4I,EAAIvL,KAAK8N,IAAKnL,KAAK4I,EAAGrI,EAAEqI,GAC7B5I,KAAK6L,EAAIxO,KAAK8N,IAAKnL,KAAK6L,EAAGtL,EAAEsL,GAC7B7L,KAAKyX,EAAIpa,KAAK8N,IAAKnL,KAAKyX,EAAGlX,EAAEkX,GAEtBzX,KAIRpB,MAAOsM,EAAKC,GAQX,OAJAnL,KAAK4I,EAAIvL,KAAK8N,IAAKD,EAAItC,EAAGvL,KAAK6N,IAAKC,EAAIvC,EAAG5I,KAAK4I,IAChD5I,KAAK6L,EAAIxO,KAAK8N,IAAKD,EAAIW,EAAGxO,KAAK6N,IAAKC,EAAIU,EAAG7L,KAAK6L,IAChD7L,KAAKyX,EAAIpa,KAAK8N,IAAKD,EAAIuM,EAAGpa,KAAK6N,IAAKC,EAAIsM,EAAGzX,KAAKyX,IAEzCzX,KAIRpB,YAAagQ,EAAQC,GAMpB,OAJA7O,KAAK4I,EAAIvL,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK4I,IAClD5I,KAAK6L,EAAIxO,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAK6L,IAClD7L,KAAKyX,EAAIpa,KAAK8N,IAAKyD,EAAQvR,KAAK6N,IAAK2D,EAAQ7O,KAAKyX,IAE3CzX,KAIRpB,YAAasM,EAAKC,GAEjB,MAAM9B,EAASrJ,KAAKqJ,SAEpB,OAAOrJ,KAAK8O,aAAczF,GAAU,GAAIqF,eAAgBrR,KAAK8N,IAAKD,EAAK7N,KAAK6N,IAAKC,EAAK9B,KAIvFzK,QAMC,OAJAoB,KAAK4I,EAAIvL,KAAKqL,MAAO1I,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAKqL,MAAO1I,KAAK6L,GAC1B7L,KAAKyX,EAAIpa,KAAKqL,MAAO1I,KAAKyX,GAEnBzX,KAIRpB,OAMC,OAJAoB,KAAK4I,EAAIvL,KAAKyP,KAAM9M,KAAK4I,GACzB5I,KAAK6L,EAAIxO,KAAKyP,KAAM9M,KAAK6L,GACzB7L,KAAKyX,EAAIpa,KAAKyP,KAAM9M,KAAKyX,GAElBzX,KAIRpB,QAMC,OAJAoB,KAAK4I,EAAIvL,KAAK0R,MAAO/O,KAAK4I,GAC1B5I,KAAK6L,EAAIxO,KAAK0R,MAAO/O,KAAK6L,GAC1B7L,KAAKyX,EAAIpa,KAAK0R,MAAO/O,KAAKyX,GAEnBzX,KAIRpB,cAMC,OAJAoB,KAAK4I,EAAM5I,KAAK4I,EAAI,EAAMvL,KAAKyP,KAAM9M,KAAK4I,GAAMvL,KAAKqL,MAAO1I,KAAK4I,GACjE5I,KAAK6L,EAAM7L,KAAK6L,EAAI,EAAMxO,KAAKyP,KAAM9M,KAAK6L,GAAMxO,KAAKqL,MAAO1I,KAAK6L,GACjE7L,KAAKyX,EAAMzX,KAAKyX,EAAI,EAAMpa,KAAKyP,KAAM9M,KAAKyX,GAAMpa,KAAKqL,MAAO1I,KAAKyX,GAE1DzX,KAIRpB,SAMC,OAJAoB,KAAK4I,GAAM5I,KAAK4I,EAChB5I,KAAK6L,GAAM7L,KAAK6L,EAChB7L,KAAKyX,GAAMzX,KAAKyX,EAETzX,KAIRpB,IAAK2B,GAEJ,OAAOP,KAAK4I,EAAIrI,EAAEqI,EAAI5I,KAAK6L,EAAItL,EAAEsL,EAAI7L,KAAKyX,EAAIlX,EAAEkX,EAMjD7Y,WAEC,OAAOoB,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,EAAI7L,KAAKyX,EAAIzX,KAAKyX,EAI1D7Y,SAEC,OAAOvB,KAAK2R,KAAMhP,KAAK4I,EAAI5I,KAAK4I,EAAI5I,KAAK6L,EAAI7L,KAAK6L,EAAI7L,KAAKyX,EAAIzX,KAAKyX,GAIrE7Y,kBAEC,OAAOvB,KAAK4R,IAAKjP,KAAK4I,GAAMvL,KAAK4R,IAAKjP,KAAK6L,GAAMxO,KAAK4R,IAAKjP,KAAKyX,GAIjE7Y,YAEC,OAAOoB,KAAK8O,aAAc9O,KAAKqJ,UAAY,GAI5CzK,UAAWyK,GAEV,OAAOrJ,KAAKsP,YAAYZ,eAAgBrF,GAIzCzK,KAAM2B,EAAGgP,GAMR,OAJAvP,KAAK4I,IAAOrI,EAAEqI,EAAI5I,KAAK4I,GAAM2G,EAC7BvP,KAAK6L,IAAOtL,EAAEsL,EAAI7L,KAAK6L,GAAM0D,EAC7BvP,KAAKyX,IAAOlX,EAAEkX,EAAIzX,KAAKyX,GAAMlI,EAEtBvP,KAIRpB,YAAa4Q,EAAIC,EAAIF,GAMpB,OAJAvP,KAAK4I,EAAI4G,EAAG5G,GAAM6G,EAAG7G,EAAI4G,EAAG5G,GAAM2G,EAClCvP,KAAK6L,EAAI2D,EAAG3D,GAAM4D,EAAG5D,EAAI2D,EAAG3D,GAAM0D,EAClCvP,KAAKyX,EAAIjI,EAAGiI,GAAMhI,EAAGgI,EAAIjI,EAAGiI,GAAMlI,EAE3BvP,KAIRpB,MAAO2B,EAAGgO,GAET,YAAW5N,IAAN4N,GAEJjQ,QAAQC,KAAM,6FACPyB,KAAK4e,aAAcre,EAAGgO,IAIvBvO,KAAK4e,aAAc5e,KAAMO,GAIjC3B,aAAcwO,EAAGC,GAEhB,MAAMwR,EAAKzR,EAAExE,EAAGkW,EAAK1R,EAAEvB,EAAGkT,EAAK3R,EAAEqK,EAC3BuH,EAAK3R,EAAEzE,EAAGqW,EAAK5R,EAAExB,EAAGqT,EAAK7R,EAAEoK,EAMjC,OAJAzX,KAAK4I,EAAIkW,EAAKI,EAAKH,EAAKE,EACxBjf,KAAK6L,EAAIkT,EAAKC,EAAKH,EAAKK,EACxBlf,KAAKyX,EAAIoH,EAAKI,EAAKH,EAAKE,EAEjBhf,KAIRpB,gBAAiB2B,GAEhB,MAAM4e,EAAc5e,EAAE6e,WAEtB,GAAqB,IAAhBD,EAAoB,OAAOnf,KAAKa,IAAK,EAAG,EAAG,GAEhD,MAAMwN,EAAS9N,EAAE6b,IAAKpc,MAASmf,EAE/B,OAAOnf,KAAKyW,KAAMlW,GAAImO,eAAgBL,GAIvCzP,eAAgBygB,GAIf,OAFAC,EAAQ7I,KAAMzW,MAAOuf,gBAAiBF,GAE/Brf,KAAKwf,IAAKF,GAIlB1gB,QAAS6gB,GAKR,OAAOzf,KAAKwf,IAAKF,EAAQ7I,KAAMgJ,GAAS/Q,eAAgB,EAAI1O,KAAKoc,IAAKqD,KAIvE7gB,QAAS2B,GAER,MAAM4e,EAAc9hB,KAAK2R,KAAMhP,KAAKof,WAAa7e,EAAE6e,YAEnD,GAAqB,IAAhBD,EAAoB,OAAO9hB,KAAKoN,GAAK,EAE1C,MAAMqJ,EAAQ9T,KAAKoc,IAAK7b,GAAM4e,EAI9B,OAAO9hB,KAAKqa,KAAMnN,EAAUU,MAAO6I,GAAS,EAAG,IAIhDlV,WAAY2B,GAEX,OAAOlD,KAAK2R,KAAMhP,KAAKmP,kBAAmB5O,IAI3C3B,kBAAmB2B,GAElB,MAAM6O,EAAKpP,KAAK4I,EAAIrI,EAAEqI,EAAGyG,EAAKrP,KAAK6L,EAAItL,EAAEsL,EAAG6T,EAAK1f,KAAKyX,EAAIlX,EAAEkX,EAE5D,OAAOrI,EAAKA,EAAKC,EAAKA,EAAKqQ,EAAKA,EAIjC9gB,oBAAqB2B,GAEpB,OAAOlD,KAAK4R,IAAKjP,KAAK4I,EAAIrI,EAAEqI,GAAMvL,KAAK4R,IAAKjP,KAAK6L,EAAItL,EAAEsL,GAAMxO,KAAK4R,IAAKjP,KAAKyX,EAAIlX,EAAEkX,GAInF7Y,iBAAkBhB,GAEjB,OAAOoC,KAAK2f,uBAAwB/hB,EAAEgiB,OAAQhiB,EAAEiiB,IAAKjiB,EAAEkW,OAIxDlV,uBAAwBghB,EAAQC,EAAK/L,GAEpC,MAAMgM,EAAeziB,KAAKoQ,IAAKoS,GAAQD,EAMvC,OAJA5f,KAAK4I,EAAIkX,EAAeziB,KAAKoQ,IAAKqG,GAClC9T,KAAK6L,EAAIxO,KAAKmQ,IAAKqS,GAAQD,EAC3B5f,KAAKyX,EAAIqI,EAAeziB,KAAKmQ,IAAKsG,GAE3B9T,KAIRpB,mBAAoB0O,GAEnB,OAAOtN,KAAK+f,yBAA0BzS,EAAEsS,OAAQtS,EAAEwG,MAAOxG,EAAEzB,GAI5DjN,yBAA0BghB,EAAQ9L,EAAOjI,GAMxC,OAJA7L,KAAK4I,EAAIgX,EAASviB,KAAKoQ,IAAKqG,GAC5B9T,KAAK6L,EAAIA,EACT7L,KAAKyX,EAAImI,EAASviB,KAAKmQ,IAAKsG,GAErB9T,KAIRpB,sBAAuB0M,GAEtB,MAAMhH,EAAIgH,EAAEqD,SAMZ,OAJA3O,KAAK4I,EAAItE,EAAG,IACZtE,KAAK6L,EAAIvH,EAAG,IACZtE,KAAKyX,EAAInT,EAAG,IAELtE,KAIRpB,mBAAoB0M,GAEnB,MAAMmI,EAAKzT,KAAKggB,oBAAqB1U,EAAG,GAAIjC,SACtCqK,EAAK1T,KAAKggB,oBAAqB1U,EAAG,GAAIjC,SACtC4W,EAAKjgB,KAAKggB,oBAAqB1U,EAAG,GAAIjC,SAM5C,OAJArJ,KAAK4I,EAAI6K,EACTzT,KAAK6L,EAAI6H,EACT1T,KAAKyX,EAAIwI,EAEFjgB,KAIRpB,oBAAqB0M,EAAGnC,GAEvB,OAAOnJ,KAAK2Q,UAAWrF,EAAEqD,SAAkB,EAARxF,GAIpCvK,qBAAsB0M,EAAGnC,GAExB,OAAOnJ,KAAK2Q,UAAWrF,EAAEqD,SAAkB,EAARxF,GAIpCvK,OAAQ2B,GAEP,OAAWA,EAAEqI,IAAM5I,KAAK4I,GAASrI,EAAEsL,IAAM7L,KAAK6L,GAAStL,EAAEkX,IAAMzX,KAAKyX,EAIrE7Y,UAAWsL,EAAOwF,GAQjB,YANgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAK4I,EAAIsB,EAAOwF,GAChB1P,KAAK6L,EAAI3B,EAAOwF,EAAS,GACzB1P,KAAKyX,EAAIvN,EAAOwF,EAAS,GAElB1P,KAIRpB,QAASsL,EAAOwF,GASf,YAPe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAK4I,EACvBsB,EAAOwF,EAAS,GAAM1P,KAAK6L,EAC3B3B,EAAOwF,EAAS,GAAM1P,KAAKyX,EAEpBvN,EAIRtL,oBAAqBa,EAAW0J,EAAOuG,GAYtC,YAVgB/O,IAAX+O,GAEJpR,QAAQC,KAAM,uEAIfyB,KAAK4I,EAAInJ,EAAUkQ,KAAMxG,GACzBnJ,KAAK6L,EAAIpM,EAAUmQ,KAAMzG,GACzBnJ,KAAKyX,EAAIhY,EAAUmZ,KAAMzP,GAElBnJ,KAIRpB,SAMC,OAJAoB,KAAK4I,EAAIvL,KAAKC,SACd0C,KAAK6L,EAAIxO,KAAKC,SACd0C,KAAKyX,EAAIpa,KAAKC,SAEP0C,MAMT,MAAMsf,EAAU,IAAI9B,EACdG,EAAc,IAAIhE,EAExB,MAAMuG,EAELthB,YAAasM,EAAKC,GAEjBnM,OAAO2C,eAAgB3B,KAAM,SAAU,CAAEnB,OAAO,IAEhDmB,KAAKkL,SAAgBvK,IAARuK,EAAsBA,EAAM,IAAIsS,EAAW2C,EAAAA,EAAYA,EAAAA,EAAYA,EAAAA,GAChFngB,KAAKmL,SAAgBxK,IAARwK,EAAsBA,EAAM,IAAIqS,GAAW2C,EAAAA,GAAYA,EAAAA,GAAYA,EAAAA,GAIjFvhB,IAAKsM,EAAKC,GAKT,OAHAnL,KAAKkL,IAAIuL,KAAMvL,GACflL,KAAKmL,IAAIsL,KAAMtL,GAERnL,KAIRpB,aAAcsL,GAEb,IAAIkW,EAASD,EAAAA,EACTE,EAASF,EAAAA,EACTG,EAASH,EAAAA,EAETI,GAASJ,EAAAA,EACTK,GAASL,EAAAA,EACTM,GAASN,EAAAA,EAEb,IAAM,IAAIhW,EAAI,EAAGC,EAAIF,EAAMb,OAAQc,EAAIC,EAAGD,GAAK,EAAI,CAElD,MAAMvB,EAAIsB,EAAOC,GACX0B,EAAI3B,EAAOC,EAAI,GACfsN,EAAIvN,EAAOC,EAAI,GAEhBvB,EAAIwX,IAAOA,EAAOxX,GAClBiD,EAAIwU,IAAOA,EAAOxU,GAClB4L,EAAI6I,IAAOA,EAAO7I,GAElB7O,EAAI2X,IAAOA,EAAO3X,GAClBiD,EAAI2U,IAAOA,EAAO3U,GAClB4L,EAAIgJ,IAAOA,EAAOhJ,GAOxB,OAHAzX,KAAKkL,IAAIrK,IAAKuf,EAAMC,EAAMC,GAC1BtgB,KAAKmL,IAAItK,IAAK0f,EAAMC,EAAMC,GAEnBzgB,KAIRpB,uBAAwBa,GAEvB,IAAI2gB,EAASD,EAAAA,EACTE,EAASF,EAAAA,EACTG,EAASH,EAAAA,EAETI,GAASJ,EAAAA,EACTK,GAASL,EAAAA,EACTM,GAASN,EAAAA,EAEb,IAAM,IAAIhW,EAAI,EAAGC,EAAI3K,EAAUihB,MAAOvW,EAAIC,EAAGD,IAAO,CAEnD,MAAMvB,EAAInJ,EAAUkQ,KAAMxF,GACpB0B,EAAIpM,EAAUmQ,KAAMzF,GACpBsN,EAAIhY,EAAUmZ,KAAMzO,GAErBvB,EAAIwX,IAAOA,EAAOxX,GAClBiD,EAAIwU,IAAOA,EAAOxU,GAClB4L,EAAI6I,IAAOA,EAAO7I,GAElB7O,EAAI2X,IAAOA,EAAO3X,GAClBiD,EAAI2U,IAAOA,EAAO3U,GAClB4L,EAAIgJ,IAAOA,EAAOhJ,GAOxB,OAHAzX,KAAKkL,IAAIrK,IAAKuf,EAAMC,EAAMC,GAC1BtgB,KAAKmL,IAAItK,IAAK0f,EAAMC,EAAMC,GAEnBzgB,KAIRpB,cAAe+hB,GAEd3gB,KAAK4gB,YAEL,IAAM,IAAIzW,EAAI,EAAG0W,EAAKF,EAAOtX,OAAQc,EAAI0W,EAAI1W,IAE5CnK,KAAK8gB,cAAeH,EAAQxW,IAI7B,OAAOnK,KAIRpB,qBAAsBiR,EAAQ3K,GAE7B,MAAM6b,EAAWC,EAAUvK,KAAMvR,GAAOwJ,eAAgB,IAKxD,OAHA1O,KAAKkL,IAAIuL,KAAM5G,GAAS2P,IAAKuB,GAC7B/gB,KAAKmL,IAAIsL,KAAM5G,GAASoR,IAAKF,GAEtB/gB,KAIRpB,cAAesiB,GAId,OAFAlhB,KAAK4gB,YAEE5gB,KAAKmhB,eAAgBD,GAI7BtiB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMwiB,GAKL,OAHAphB,KAAKkL,IAAIuL,KAAM2K,EAAIlW,KACnBlL,KAAKmL,IAAIsL,KAAM2K,EAAIjW,KAEZnL,KAIRpB,YAKC,OAHAoB,KAAKkL,IAAItC,EAAI5I,KAAKkL,IAAIW,EAAI7L,KAAKkL,IAAIuM,EAAM0I,EAAAA,EACzCngB,KAAKmL,IAAIvC,EAAI5I,KAAKmL,IAAIU,EAAI7L,KAAKmL,IAAIsM,GAAM0I,EAAAA,EAElCngB,KAIRpB,UAIC,OAASoB,KAAKmL,IAAIvC,EAAI5I,KAAKkL,IAAItC,GAAS5I,KAAKmL,IAAIU,EAAI7L,KAAKkL,IAAIW,GAAS7L,KAAKmL,IAAIsM,EAAIzX,KAAKkL,IAAIuM,EAI9F7Y,UAAWoK,GASV,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,mDACdyK,EAAS,IAAIwU,GAIPxd,KAAKqhB,UAAYrY,EAAOnI,IAAK,EAAG,EAAG,GAAMmI,EAAOwF,WAAYxO,KAAKkL,IAAKlL,KAAKmL,KAAMuD,eAAgB,IAIzG9P,QAASoK,GASR,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,iDACdyK,EAAS,IAAIwU,GAIPxd,KAAKqhB,UAAYrY,EAAOnI,IAAK,EAAG,EAAG,GAAMmI,EAAOyF,WAAYzO,KAAKmL,IAAKnL,KAAKkL,KAInFtM,cAAe0iB,GAKd,OAHAthB,KAAKkL,IAAIA,IAAKoW,GACdthB,KAAKmL,IAAIA,IAAKmW,GAEPthB,KAIRpB,eAAgB2iB,GAKf,OAHAvhB,KAAKkL,IAAIsU,IAAK+B,GACdvhB,KAAKmL,IAAI8V,IAAKM,GAEPvhB,KAIRpB,eAAgByP,GAKf,OAHArO,KAAKkL,IAAIsW,WAAanT,GACtBrO,KAAKmL,IAAIqW,UAAWnT,GAEbrO,KAIRpB,eAAgBsiB,GAKfA,EAAOO,mBAAmB,GAAO,GAEjC,MAAMC,EAAWR,EAAOQ,cAEN/gB,IAAb+gB,IAE0B,OAAzBA,EAASC,aAEbD,EAASE,qBAIVC,EAAKpL,KAAMiL,EAASC,aACpBE,EAAKtD,aAAc2C,EAAOvC,aAE1B3e,KAAK8hB,MAAOD,IAIb,MAAME,EAAWb,EAAOa,SAExB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5CnK,KAAKmhB,eAAgBY,EAAU5X,IAIhC,OAAOnK,KAIRpB,cAAe0iB,GAEd,QAAOA,EAAM1Y,EAAI5I,KAAKkL,IAAItC,GAAK0Y,EAAM1Y,EAAI5I,KAAKmL,IAAIvC,GACjD0Y,EAAMzV,EAAI7L,KAAKkL,IAAIW,GAAKyV,EAAMzV,EAAI7L,KAAKmL,IAAIU,GAC3CyV,EAAM7J,EAAIzX,KAAKkL,IAAIuM,GAAK6J,EAAM7J,EAAIzX,KAAKmL,IAAIsM,GAI7C7Y,YAAawiB,GAEZ,OAAOphB,KAAKkL,IAAItC,GAAKwY,EAAIlW,IAAItC,GAAKwY,EAAIjW,IAAIvC,GAAK5I,KAAKmL,IAAIvC,GACvD5I,KAAKkL,IAAIW,GAAKuV,EAAIlW,IAAIW,GAAKuV,EAAIjW,IAAIU,GAAK7L,KAAKmL,IAAIU,GACjD7L,KAAKkL,IAAIuM,GAAK2J,EAAIlW,IAAIuM,GAAK2J,EAAIjW,IAAIsM,GAAKzX,KAAKmL,IAAIsM,EAInD7Y,aAAc0iB,EAAOtY,GAYpB,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,sDACdyK,EAAS,IAAIwU,GAIPxU,EAAOnI,KACXygB,EAAM1Y,EAAI5I,KAAKkL,IAAItC,IAAQ5I,KAAKmL,IAAIvC,EAAI5I,KAAKkL,IAAItC,IACjD0Y,EAAMzV,EAAI7L,KAAKkL,IAAIW,IAAQ7L,KAAKmL,IAAIU,EAAI7L,KAAKkL,IAAIW,IACjDyV,EAAM7J,EAAIzX,KAAKkL,IAAIuM,IAAQzX,KAAKmL,IAAIsM,EAAIzX,KAAKkL,IAAIuM,IAKrD7Y,cAAewiB,GAGd,QAAOA,EAAIjW,IAAIvC,EAAI5I,KAAKkL,IAAItC,GAAKwY,EAAIlW,IAAItC,EAAI5I,KAAKmL,IAAIvC,GACrDwY,EAAIjW,IAAIU,EAAI7L,KAAKkL,IAAIW,GAAKuV,EAAIlW,IAAIW,EAAI7L,KAAKmL,IAAIU,GAC/CuV,EAAIjW,IAAIsM,EAAIzX,KAAKkL,IAAIuM,GAAK2J,EAAIlW,IAAIuM,EAAIzX,KAAKmL,IAAIsM,GAIjD7Y,iBAAkBojB,GAMjB,OAHAhiB,KAAKiiB,WAAYD,EAAOnS,OAAQmR,GAGzBA,EAAU7R,kBAAmB6S,EAAOnS,SAAcmS,EAAOpC,OAASoC,EAAOpC,OAIjFhhB,gBAAiBsjB,GAKhB,IAAIhX,EAAKC,EAsCT,OApCK+W,EAAMzC,OAAO7W,EAAI,GAErBsC,EAAMgX,EAAMzC,OAAO7W,EAAI5I,KAAKkL,IAAItC,EAChCuC,EAAM+W,EAAMzC,OAAO7W,EAAI5I,KAAKmL,IAAIvC,IAIhCsC,EAAMgX,EAAMzC,OAAO7W,EAAI5I,KAAKmL,IAAIvC,EAChCuC,EAAM+W,EAAMzC,OAAO7W,EAAI5I,KAAKkL,IAAItC,GAI5BsZ,EAAMzC,OAAO5T,EAAI,GAErBX,GAAOgX,EAAMzC,OAAO5T,EAAI7L,KAAKkL,IAAIW,EACjCV,GAAO+W,EAAMzC,OAAO5T,EAAI7L,KAAKmL,IAAIU,IAIjCX,GAAOgX,EAAMzC,OAAO5T,EAAI7L,KAAKmL,IAAIU,EACjCV,GAAO+W,EAAMzC,OAAO5T,EAAI7L,KAAKkL,IAAIW,GAI7BqW,EAAMzC,OAAOhI,EAAI,GAErBvM,GAAOgX,EAAMzC,OAAOhI,EAAIzX,KAAKkL,IAAIuM,EACjCtM,GAAO+W,EAAMzC,OAAOhI,EAAIzX,KAAKmL,IAAIsM,IAIjCvM,GAAOgX,EAAMzC,OAAOhI,EAAIzX,KAAKmL,IAAIsM,EACjCtM,GAAO+W,EAAMzC,OAAOhI,EAAIzX,KAAKkL,IAAIuM,GAIzBvM,IAASgX,EAAMC,UAAYhX,IAAS+W,EAAMC,SAIpDvjB,mBAAoBwjB,GAEnB,GAAKpiB,KAAKqhB,UAET,OAAO,EAKRrhB,KAAKqiB,UAAWC,GAChBC,EAAS9T,WAAYzO,KAAKmL,IAAKmX,GAG/BE,EAAI/T,WAAY2T,EAAShV,EAAGkV,GAC5BG,EAAIhU,WAAY2T,EAAS/U,EAAGiV,GAC5BI,EAAIjU,WAAY2T,EAAS9U,EAAGgV,GAG5BK,EAAIlU,WAAYgU,EAAKD,GACrBI,EAAInU,WAAYiU,EAAKD,GACrBI,EAAIpU,WAAY+T,EAAKE,GAKrB,IAAII,EAAO,CACV,GAAKH,EAAIlL,EAAGkL,EAAI9W,EAAG,GAAK+W,EAAInL,EAAGmL,EAAI/W,EAAG,GAAKgX,EAAIpL,EAAGoL,EAAIhX,EACtD8W,EAAIlL,EAAG,GAAKkL,EAAI/Z,EAAGga,EAAInL,EAAG,GAAKmL,EAAIha,EAAGia,EAAIpL,EAAG,GAAKoL,EAAIja,GACpD+Z,EAAI9W,EAAG8W,EAAI/Z,EAAG,GAAKga,EAAI/W,EAAG+W,EAAIha,EAAG,GAAKia,EAAIhX,EAAGgX,EAAIja,EAAG,GAEvD,QAAOma,EAAYD,EAAMN,EAAKC,EAAKC,EAAKH,KAOxCO,EAAO,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,KAC1BC,EAAYD,EAAMN,EAAKC,EAAKC,EAAKH,KAQxCS,EAAgBpE,aAAc+D,EAAKC,GACnCE,EAAO,CAAEE,EAAgBpa,EAAGoa,EAAgBnX,EAAGmX,EAAgBvL,GAExDsL,EAAYD,EAAMN,EAAKC,EAAKC,EAAKH,KAIzC3jB,WAAY0iB,EAAOtY,GASlB,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,oDACdyK,EAAS,IAAIwU,GAIPxU,EAAOyN,KAAM6K,GAAQrW,MAAOjL,KAAKkL,IAAKlL,KAAKmL,KAInDvM,gBAAiB0iB,GAIhB,OAFqBN,EAAUvK,KAAM6K,GAAQrW,MAAOjL,KAAKkL,IAAKlL,KAAKmL,KAE/CqU,IAAK8B,GAAQjY,SAIlCzK,kBAAmBoK,GAalB,YAXgBrI,IAAXqI,GAEJ1K,QAAQ0R,MAAO,2DAKhBhQ,KAAKqiB,UAAWrZ,EAAO6G,QAEvB7G,EAAO4W,OAA8C,GAArC5f,KAAKijB,QAASjC,GAAY3X,SAEnCL,EAIRpK,UAAWwiB,GAQV,OANAphB,KAAKkL,IAAIC,IAAKiW,EAAIlW,KAClBlL,KAAKmL,IAAID,IAAKkW,EAAIjW,KAGbnL,KAAKqhB,WAAYrhB,KAAK4gB,YAEpB5gB,KAIRpB,MAAOwiB,GAKN,OAHAphB,KAAKkL,IAAIA,IAAKkW,EAAIlW,KAClBlL,KAAKmL,IAAIA,IAAKiW,EAAIjW,KAEXnL,KAIRpB,aAAc8T,GAGb,OAAK1S,KAAKqhB,YAGV6B,EAAS,GAAIriB,IAAKb,KAAKkL,IAAItC,EAAG5I,KAAKkL,IAAIW,EAAG7L,KAAKkL,IAAIuM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKkL,IAAItC,EAAG5I,KAAKkL,IAAIW,EAAG7L,KAAKmL,IAAIsM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKkL,IAAItC,EAAG5I,KAAKmL,IAAIU,EAAG7L,KAAKkL,IAAIuM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKkL,IAAItC,EAAG5I,KAAKmL,IAAIU,EAAG7L,KAAKmL,IAAIsM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKmL,IAAIvC,EAAG5I,KAAKkL,IAAIW,EAAG7L,KAAKkL,IAAIuM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKmL,IAAIvC,EAAG5I,KAAKkL,IAAIW,EAAG7L,KAAKmL,IAAIsM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKmL,IAAIvC,EAAG5I,KAAKmL,IAAIU,EAAG7L,KAAKkL,IAAIuM,GAAI8G,aAAc7L,GACrEwQ,EAAS,GAAIriB,IAAKb,KAAKmL,IAAIvC,EAAG5I,KAAKmL,IAAIU,EAAG7L,KAAKmL,IAAIsM,GAAI8G,aAAc7L,GAErE1S,KAAKmjB,cAAeD,IAZSljB,KAkB9BpB,UAAW8Q,GAKV,OAHA1P,KAAKkL,IAAI+V,IAAKvR,GACd1P,KAAKmL,IAAI8V,IAAKvR,GAEP1P,KAIRpB,OAAQwiB,GAEP,OAAOA,EAAIlW,IAAIkY,OAAQpjB,KAAKkL,MAASkW,EAAIjW,IAAIiY,OAAQpjB,KAAKmL,MAM5D,SAAS4X,EAAYD,EAAMO,EAAI7T,EAAIC,EAAI6T,GAEtC,IAAM,IAAInZ,EAAI,EAAGoZ,EAAIT,EAAKzZ,OAAS,EAAGc,GAAKoZ,EAAGpZ,GAAK,EAAI,CAEtDqZ,EAAU7S,UAAWmS,EAAM3Y,GAE3B,MAAMmJ,EAAIgQ,EAAQ1a,EAAIvL,KAAK4R,IAAKuU,EAAU5a,GAAM0a,EAAQzX,EAAIxO,KAAK4R,IAAKuU,EAAU3X,GAAMyX,EAAQ7L,EAAIpa,KAAK4R,IAAKuU,EAAU/L,GAEhHgM,EAAKJ,EAAGjH,IAAKoH,GACbE,EAAKlU,EAAG4M,IAAKoH,GACbG,EAAKlU,EAAG2M,IAAKoH,GAEnB,GAAKnmB,KAAK8N,KAAO9N,KAAK8N,IAAKsY,EAAIC,EAAIC,GAAMtmB,KAAK6N,IAAKuY,EAAIC,EAAIC,IAASrQ,EAInE,OAAO,EAMT,OAAO,EAIR,MAAM4P,EAAU,CACf,IAAI1F,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,EACJ,IAAIA,GAGCwD,EAAY,IAAIxD,EAEhBqE,EAAO,IAAI3B,EAIXsC,EAAM,IAAIhF,EACViF,EAAM,IAAIjF,EACVkF,EAAM,IAAIlF,EAIVmF,EAAM,IAAInF,EACVoF,EAAM,IAAIpF,EACVqF,EAAM,IAAIrF,EAEV8E,EAAU,IAAI9E,EACd+E,EAAW,IAAI/E,EACfwF,EAAkB,IAAIxF,EACtBgG,EAAY,IAAIhG,EAEhBoG,EAAS,IAAI1D,EAEnB,MAAM2D,EAELjlB,YAAaiR,EAAQ+P,GAEpB5f,KAAK6P,YAAsBlP,IAAXkP,EAAyBA,EAAS,IAAI2N,EACtDxd,KAAK4f,YAAsBjf,IAAXif,EAAyBA,GAAW,EAIrDhhB,IAAKiR,EAAQ+P,GAKZ,OAHA5f,KAAK6P,OAAO4G,KAAM5G,GAClB7P,KAAK4f,OAASA,EAEP5f,KAIRpB,cAAe+hB,EAAQmD,GAEtB,MAAMjU,EAAS7P,KAAK6P,YAEIlP,IAAnBmjB,EAEJjU,EAAO4G,KAAMqN,GAIbF,EAAOT,cAAexC,GAAS0B,UAAWxS,GAI3C,IAAIkU,EAAc,EAElB,IAAM,IAAI5Z,EAAI,EAAG0W,EAAKF,EAAOtX,OAAQc,EAAI0W,EAAI1W,IAE5C4Z,EAAc1mB,KAAK8N,IAAK4Y,EAAalU,EAAOV,kBAAmBwR,EAAQxW,KAMxE,OAFAnK,KAAK4f,OAASviB,KAAK2R,KAAM+U,GAElB/jB,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMojB,GAKL,OAHAhiB,KAAK6P,OAAO4G,KAAMuL,EAAOnS,QACzB7P,KAAK4f,OAASoC,EAAOpC,OAEd5f,KAIRpB,UAEC,OAASoB,KAAK4f,OAAS,EAIxBhhB,YAKC,OAHAoB,KAAK6P,OAAOhP,IAAK,EAAG,EAAG,GACvBb,KAAK4f,QAAW,EAET5f,KAIRpB,cAAe0iB,GAEd,OAASA,EAAMnS,kBAAmBnP,KAAK6P,SAAc7P,KAAK4f,OAAS5f,KAAK4f,OAIzEhhB,gBAAiB0iB,GAEhB,OAASA,EAAM0C,WAAYhkB,KAAK6P,QAAW7P,KAAK4f,OAIjDhhB,iBAAkBojB,GAEjB,MAAMiC,EAAYjkB,KAAK4f,OAASoC,EAAOpC,OAEvC,OAAOoC,EAAOnS,OAAOV,kBAAmBnP,KAAK6P,SAAcoU,EAAYA,EAIxErlB,cAAewiB,GAEd,OAAOA,EAAI8C,iBAAkBlkB,MAI9BpB,gBAAiBsjB,GAEhB,OAAO7kB,KAAK4R,IAAKiT,EAAMiC,gBAAiBnkB,KAAK6P,UAAc7P,KAAK4f,OAIjEhhB,WAAY0iB,EAAOtY,GAElB,MAAMob,EAAgBpkB,KAAK6P,OAAOV,kBAAmBmS,GAkBrD,YAhBgB3gB,IAAXqI,IAEJ1K,QAAQC,KAAM,sDACdyK,EAAS,IAAIwU,GAIdxU,EAAOyN,KAAM6K,GAER8C,EAAkBpkB,KAAK4f,OAAS5f,KAAK4f,SAEzC5W,EAAOwW,IAAKxf,KAAK6P,QAASP,YAC1BtG,EAAO0F,eAAgB1O,KAAK4f,QAASqB,IAAKjhB,KAAK6P,SAIzC7G,EAIRpK,eAAgBoK,GASf,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,0DACdyK,EAAS,IAAIkX,GAITlgB,KAAKqhB,WAGTrY,EAAO4X,YACA5X,IAIRA,EAAOnI,IAAKb,KAAK6P,OAAQ7P,KAAK6P,QAC9B7G,EAAOqb,eAAgBrkB,KAAK4f,QAErB5W,GAIRpK,aAAc8T,GAKb,OAHA1S,KAAK6P,OAAO0O,aAAc7L,GAC1B1S,KAAK4f,OAAS5f,KAAK4f,OAASlN,EAAO4R,oBAE5BtkB,KAIRpB,UAAW8Q,GAIV,OAFA1P,KAAK6P,OAAOoR,IAAKvR,GAEV1P,KAIRpB,OAAQojB,GAEP,OAAOA,EAAOnS,OAAOuT,OAAQpjB,KAAK6P,SAAcmS,EAAOpC,SAAW5f,KAAK4f,QAMzE,MAAM2E,EAAY,IAAI/G,EAChBgH,GAAa,IAAIhH,EACjBiH,GAAU,IAAIjH,EACdkH,GAAQ,IAAIlH,EAEZmH,GAAS,IAAInH,EACboH,GAAS,IAAIpH,EACbqH,GAAU,IAAIrH,EAEpB,MAAMsH,GAELlmB,YAAammB,EAAQC,GAEpBhlB,KAAK+kB,YAAsBpkB,IAAXokB,EAAyBA,EAAS,IAAIvH,EACtDxd,KAAKglB,eAA4BrkB,IAAdqkB,EAA4BA,EAAY,IAAIxH,EAAS,EAAG,GAAK,GAIjF5e,IAAKmmB,EAAQC,GAKZ,OAHAhlB,KAAK+kB,OAAOtO,KAAMsO,GAClB/kB,KAAKglB,UAAUvO,KAAMuO,GAEdhlB,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMqmB,GAKL,OAHAjlB,KAAK+kB,OAAOtO,KAAMwO,EAAIF,QACtB/kB,KAAKglB,UAAUvO,KAAMwO,EAAID,WAElBhlB,KAIRpB,GAAIkN,EAAG9C,GASN,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,2CACdyK,EAAS,IAAIwU,GAIPxU,EAAOyN,KAAMzW,KAAKglB,WAAYtW,eAAgB5C,GAAImV,IAAKjhB,KAAK+kB,QAIpEnmB,OAAQ2B,GAIP,OAFAP,KAAKglB,UAAUvO,KAAMlW,GAAIif,IAAKxf,KAAK+kB,QAASzV,YAErCtP,KAIRpB,OAAQkN,GAIP,OAFA9L,KAAK+kB,OAAOtO,KAAMzW,KAAKklB,GAAIpZ,EAAGyY,IAEvBvkB,KAIRpB,oBAAqB0iB,EAAOtY,QAEXrI,IAAXqI,IAEJ1K,QAAQC,KAAM,4DACdyK,EAAS,IAAIwU,GAIdxU,EAAOyF,WAAY6S,EAAOthB,KAAK+kB,QAE/B,MAAMI,EAAoBnc,EAAOoT,IAAKpc,KAAKglB,WAE3C,OAAKG,EAAoB,EAEjBnc,EAAOyN,KAAMzW,KAAK+kB,QAInB/b,EAAOyN,KAAMzW,KAAKglB,WAAYtW,eAAgByW,GAAoBlE,IAAKjhB,KAAK+kB,QAIpFnmB,gBAAiB0iB,GAEhB,OAAOjkB,KAAK2R,KAAMhP,KAAKolB,kBAAmB9D,IAI3C1iB,kBAAmB0iB,GAElB,MAAM6D,EAAoBZ,EAAU9V,WAAY6S,EAAOthB,KAAK+kB,QAAS3I,IAAKpc,KAAKglB,WAI/E,OAAKG,EAAoB,EAEjBnlB,KAAK+kB,OAAO5V,kBAAmBmS,IAIvCiD,EAAU9N,KAAMzW,KAAKglB,WAAYtW,eAAgByW,GAAoBlE,IAAKjhB,KAAK+kB,QAExER,EAAUpV,kBAAmBmS,IAIrC1iB,oBAAqBykB,EAAI7T,EAAI6V,EAAoBC,GAShDd,GAAW/N,KAAM4M,GAAKpC,IAAKzR,GAAKd,eAAgB,IAChD+V,GAAQhO,KAAMjH,GAAKgQ,IAAK6D,GAAK/T,YAC7BoV,GAAMjO,KAAMzW,KAAK+kB,QAASvF,IAAKgF,IAE/B,MAAMe,EAAkC,GAAtBlC,EAAGW,WAAYxU,GAC3BgW,GAAQxlB,KAAKglB,UAAU5I,IAAKqI,IAC5BgB,EAAKf,GAAMtI,IAAKpc,KAAKglB,WACrBtZ,GAAOgZ,GAAMtI,IAAKqI,IAClBnX,EAAIoX,GAAMtF,WACVrM,EAAM1V,KAAK4R,IAAK,EAAIuW,EAAMA,GAChC,IAAIE,EAAI7J,EAAI8J,EAASC,EAErB,GAAK7S,EAAM,EAQV,GAJA2S,EAAKF,EAAM9Z,EAAK+Z,EAChB5J,EAAK2J,EAAMC,EAAK/Z,EAChBka,EAASL,EAAYxS,EAEhB2S,GAAM,EAEV,GAAK7J,IAAQ+J,EAEZ,GAAK/J,GAAM+J,EAAS,CAKnB,MAAMC,EAAS,EAAI9S,EACnB2S,GAAMG,EACNhK,GAAMgK,EACNF,EAAUD,GAAOA,EAAKF,EAAM3J,EAAK,EAAI4J,GAAO5J,GAAO2J,EAAME,EAAK7J,EAAK,EAAInQ,GAAO4B,OAM9EuO,EAAK0J,EACLG,EAAKroB,KAAK8N,IAAK,IAAOqa,EAAM3J,EAAK4J,IACjCE,GAAYD,EAAKA,EAAK7J,GAAOA,EAAK,EAAInQ,GAAO4B,OAQ9CuO,GAAO0J,EACPG,EAAKroB,KAAK8N,IAAK,IAAOqa,EAAM3J,EAAK4J,IACjCE,GAAYD,EAAKA,EAAK7J,GAAOA,EAAK,EAAInQ,GAAO4B,OAMzCuO,IAAQ+J,GAIZF,EAAKroB,KAAK8N,IAAK,KAASqa,EAAMD,EAAYE,IAC1C5J,EAAO6J,EAAK,GAAQH,EAAYloB,KAAK6N,IAAK7N,KAAK8N,KAAOoa,GAAa7Z,GAAM6Z,GACzEI,GAAYD,EAAKA,EAAK7J,GAAOA,EAAK,EAAInQ,GAAO4B,GAElCuO,GAAM+J,GAIjBF,EAAK,EACL7J,EAAKxe,KAAK6N,IAAK7N,KAAK8N,KAAOoa,GAAa7Z,GAAM6Z,GAC9CI,EAAU9J,GAAOA,EAAK,EAAInQ,GAAO4B,IAMjCoY,EAAKroB,KAAK8N,IAAK,IAAOqa,EAAMD,EAAYE,IACxC5J,EAAO6J,EAAK,EAAMH,EAAYloB,KAAK6N,IAAK7N,KAAK8N,KAAOoa,GAAa7Z,GAAM6Z,GACvEI,GAAYD,EAAKA,EAAK7J,GAAOA,EAAK,EAAInQ,GAAO4B,QAU/CuO,EAAO2J,EAAM,GAAQD,EAAYA,EACjCG,EAAKroB,KAAK8N,IAAK,IAAOqa,EAAM3J,EAAK4J,IACjCE,GAAYD,EAAKA,EAAK7J,GAAOA,EAAK,EAAInQ,GAAO4B,EAgB9C,OAZK+X,GAEJA,EAAmB5O,KAAMzW,KAAKglB,WAAYtW,eAAgBgX,GAAKzE,IAAKjhB,KAAK+kB,QAIrEO,GAEJA,EAAuB7O,KAAMgO,IAAU/V,eAAgBmN,GAAKoF,IAAKuD,IAI3DmB,EAIR/mB,gBAAiBojB,EAAQhZ,GAExBub,EAAU9V,WAAYuT,EAAOnS,OAAQ7P,KAAK+kB,QAC1C,MAAMe,EAAMvB,EAAUnI,IAAKpc,KAAKglB,WAC1Bla,EAAKyZ,EAAUnI,IAAKmI,GAAcuB,EAAMA,EACxCC,EAAU/D,EAAOpC,OAASoC,EAAOpC,OAEvC,GAAK9U,EAAKib,EAAU,OAAO,KAE3B,MAAMC,EAAM3oB,KAAK2R,KAAM+W,EAAUjb,GAG3Bmb,EAAKH,EAAME,EAGXE,EAAKJ,EAAME,EAGjB,OAAKC,EAAK,GAAKC,EAAK,EAAW,KAK1BD,EAAK,EAAWjmB,KAAKklB,GAAIgB,EAAIld,GAG3BhJ,KAAKklB,GAAIe,EAAIjd,GAIrBpK,iBAAkBojB,GAEjB,OAAOhiB,KAAKolB,kBAAmBpD,EAAOnS,SAAcmS,EAAOpC,OAASoC,EAAOpC,OAI5EhhB,gBAAiBsjB,GAEhB,MAAM/C,EAAc+C,EAAMzC,OAAOrD,IAAKpc,KAAKglB,WAE3C,GAAqB,IAAhB7F,EAGJ,OAA8C,IAAzC+C,EAAMiC,gBAAiBnkB,KAAK+kB,QAEzB,EAMD,KAIR,MAAMjZ,IAAQ9L,KAAK+kB,OAAO3I,IAAK8F,EAAMzC,QAAWyC,EAAMC,UAAahD,EAInE,OAAOrT,GAAK,EAAIA,EAAI,KAIrBlN,eAAgBsjB,EAAOlZ,GAEtB,MAAM8C,EAAI9L,KAAKmmB,gBAAiBjE,GAEhC,OAAW,OAANpW,EAEG,KAID9L,KAAKklB,GAAIpZ,EAAG9C,GAIpBpK,gBAAiBsjB,GAIhB,MAAMkE,EAAclE,EAAMiC,gBAAiBnkB,KAAK+kB,QAEhD,GAAqB,IAAhBqB,EAEJ,OAAO,EAMR,OAFoBlE,EAAMzC,OAAOrD,IAAKpc,KAAKglB,WAExBoB,EAAc,EAYlCxnB,aAAcwiB,EAAKpY,GAElB,IAAIqd,EAAMC,EAAMC,EAAOC,EAAOC,EAAOC,EAErC,MAAMC,EAAU,EAAI3mB,KAAKglB,UAAUpc,EAClCge,EAAU,EAAI5mB,KAAKglB,UAAUnZ,EAC7Bgb,EAAU,EAAI7mB,KAAKglB,UAAUvN,EAExBsN,EAAS/kB,KAAK+kB,OA0BpB,OAxBK4B,GAAW,GAEfN,GAASjF,EAAIlW,IAAItC,EAAImc,EAAOnc,GAAM+d,EAClCL,GAASlF,EAAIjW,IAAIvC,EAAImc,EAAOnc,GAAM+d,IAIlCN,GAASjF,EAAIjW,IAAIvC,EAAImc,EAAOnc,GAAM+d,EAClCL,GAASlF,EAAIlW,IAAItC,EAAImc,EAAOnc,GAAM+d,GAI9BC,GAAW,GAEfL,GAAUnF,EAAIlW,IAAIW,EAAIkZ,EAAOlZ,GAAM+a,EACnCJ,GAAUpF,EAAIjW,IAAIU,EAAIkZ,EAAOlZ,GAAM+a,IAInCL,GAAUnF,EAAIjW,IAAIU,EAAIkZ,EAAOlZ,GAAM+a,EACnCJ,GAAUpF,EAAIlW,IAAIW,EAAIkZ,EAAOlZ,GAAM+a,GAI7BP,EAAOG,GAAaD,EAAQD,EAAgB,OAK9CC,EAAQF,GAAQA,GAASA,KAAOA,EAAOE,IAEvCC,EAAQF,GAAQA,GAASA,KAAOA,EAAOE,GAEvCK,GAAW,GAEfJ,GAAUrF,EAAIlW,IAAIuM,EAAIsN,EAAOtN,GAAMoP,EACnCH,GAAUtF,EAAIjW,IAAIsM,EAAIsN,EAAOtN,GAAMoP,IAInCJ,GAAUrF,EAAIjW,IAAIsM,EAAIsN,EAAOtN,GAAMoP,EACnCH,GAAUtF,EAAIlW,IAAIuM,EAAIsN,EAAOtN,GAAMoP,GAI7BR,EAAOK,GAAaD,EAAQH,EAAgB,OAE9CG,EAAQJ,GAAQA,GAASA,KAAOA,EAAOI,IAEvCC,EAAQJ,GAAQA,GAASA,KAAOA,EAAOI,GAIvCJ,EAAO,EAAW,KAEhBtmB,KAAKklB,GAAImB,GAAQ,EAAIA,EAAOC,EAAMtd,KAI1CpK,cAAewiB,GAEd,OAA+C,OAAxCphB,KAAK8mB,aAAc1F,EAAKmD,GAIhC3lB,kBAAmBwO,EAAGC,EAAGC,EAAGyZ,EAAiB/d,GAM5C2b,GAAOlW,WAAYpB,EAAGD,GACtBwX,GAAOnW,WAAYnB,EAAGF,GACtByX,GAAQjG,aAAc+F,GAAQC,IAO9B,IACIjc,EADAqe,EAAMhnB,KAAKglB,UAAU5I,IAAKyI,IAG9B,GAAKmC,EAAM,EAAI,CAEd,GAAKD,EAAkB,OAAO,KAC9Bpe,EAAO,MAED,CAAA,KAAKqe,EAAM,GAOjB,OAAO,KALPre,GAAS,EACTqe,GAAQA,EAQTtC,GAAMjW,WAAYzO,KAAK+kB,OAAQ3X,GAC/B,MAAM6Z,EAASte,EAAO3I,KAAKglB,UAAU5I,IAAKwI,GAAOhG,aAAc8F,GAAOE,KAGtE,GAAKqC,EAAS,EAEb,OAAO,KAIR,MAAMC,EAASve,EAAO3I,KAAKglB,UAAU5I,IAAKuI,GAAOwC,MAAOzC,KAGxD,GAAKwC,EAAS,EAEb,OAAO,KAKR,GAAKD,EAASC,EAASF,EAEtB,OAAO,KAKR,MAAMI,GAAQze,EAAO+b,GAAMtI,IAAKyI,IAGhC,OAAKuC,EAAM,EAEH,KAKDpnB,KAAKklB,GAAIkC,EAAMJ,EAAKhe,GAI5BpK,aAAcsU,GAKb,OAHAlT,KAAK+kB,OAAOxG,aAAcrL,GAC1BlT,KAAKglB,UAAUqC,mBAAoBnU,GAE5BlT,KAIRpB,OAAQqmB,GAEP,OAAOA,EAAIF,OAAO3B,OAAQpjB,KAAK+kB,SAAYE,EAAID,UAAU5B,OAAQpjB,KAAKglB,YAMxE,MAAMsC,GAEL1oB,cAECI,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAK2O,SAAW,CAEf,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAILvF,UAAUC,OAAS,GAEvB/K,QAAQ0R,MAAO,iFAMjBpR,IAAKqR,EAAKC,EAAKC,EAAKoX,EAAKnX,EAAKC,EAAKC,EAAKkX,EAAKjX,EAAKC,EAAKC,EAAKgX,EAAKC,EAAKC,EAAKC,EAAKC,GAE/E,MAAMnX,EAAK1Q,KAAK2O,SAOhB,OALA+B,EAAI,GAAMT,EAAKS,EAAI,GAAMR,EAAKQ,EAAI,GAAMP,EAAKO,EAAI,IAAO6W,EACxD7W,EAAI,GAAMN,EAAKM,EAAI,GAAML,EAAKK,EAAI,GAAMJ,EAAKI,EAAI,IAAO8W,EACxD9W,EAAI,GAAMH,EAAKG,EAAI,GAAMF,EAAKE,EAAI,IAAOD,EAAKC,EAAI,IAAO+W,EACzD/W,EAAI,GAAMgX,EAAKhX,EAAI,GAAMiX,EAAKjX,EAAI,IAAOkX,EAAKlX,EAAI,IAAOmX,EAElD7nB,KAIRpB,WAWC,OATAoB,KAAKa,IAEJ,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIHb,KAIRpB,QAEC,OAAO,IAAI0oB,IAAU3W,UAAW3Q,KAAK2O,UAItC/P,KAAM0M,GAEL,MAAMoF,EAAK1Q,KAAK2O,SACViC,EAAKtF,EAAEqD,SAOb,OALA+B,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GACvEF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GACvEF,EAAI,GAAME,EAAI,GAAKF,EAAI,GAAME,EAAI,GAAKF,EAAI,IAAOE,EAAI,IAAMF,EAAI,IAAOE,EAAI,IAC1EF,EAAI,IAAOE,EAAI,IAAMF,EAAI,IAAOE,EAAI,IAAMF,EAAI,IAAOE,EAAI,IAAMF,EAAI,IAAOE,EAAI,IAEvE5Q,KAIRpB,aAAc0M,GAEb,MAAMoF,EAAK1Q,KAAK2O,SAAUiC,EAAKtF,EAAEqD,SAMjC,OAJA+B,EAAI,IAAOE,EAAI,IACfF,EAAI,IAAOE,EAAI,IACfF,EAAI,IAAOE,EAAI,IAER5Q,KAIRpB,aAAciS,EAAOC,EAAOC,GAM3B,OAJAF,EAAMmP,oBAAqBhgB,KAAM,GACjC8Q,EAAMkP,oBAAqBhgB,KAAM,GACjC+Q,EAAMiP,oBAAqBhgB,KAAM,GAE1BA,KAIRpB,UAAWiS,EAAOC,EAAOC,GASxB,OAPA/Q,KAAKa,IACJgQ,EAAMjI,EAAGkI,EAAMlI,EAAGmI,EAAMnI,EAAG,EAC3BiI,EAAMhF,EAAGiF,EAAMjF,EAAGkF,EAAMlF,EAAG,EAC3BgF,EAAM4G,EAAG3G,EAAM2G,EAAG1G,EAAM0G,EAAG,EAC3B,EAAG,EAAG,EAAG,GAGHzX,KAIRpB,gBAAiB0M,GAIhB,MAAMoF,EAAK1Q,KAAK2O,SACViC,EAAKtF,EAAEqD,SAEPmZ,EAAS,EAAIC,GAAM/H,oBAAqB1U,EAAG,GAAIjC,SAC/C2e,EAAS,EAAID,GAAM/H,oBAAqB1U,EAAG,GAAIjC,SAC/C4e,EAAS,EAAIF,GAAM/H,oBAAqB1U,EAAG,GAAIjC,SAsBrD,OApBAqH,EAAI,GAAME,EAAI,GAAMkX,EACpBpX,EAAI,GAAME,EAAI,GAAMkX,EACpBpX,EAAI,GAAME,EAAI,GAAMkX,EACpBpX,EAAI,GAAM,EAEVA,EAAI,GAAME,EAAI,GAAMoX,EACpBtX,EAAI,GAAME,EAAI,GAAMoX,EACpBtX,EAAI,GAAME,EAAI,GAAMoX,EACpBtX,EAAI,GAAM,EAEVA,EAAI,GAAME,EAAI,GAAMqX,EACpBvX,EAAI,GAAME,EAAI,GAAMqX,EACpBvX,EAAI,IAAOE,EAAI,IAAOqX,EACtBvX,EAAI,IAAO,EAEXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJ1Q,KAIRpB,sBAAuB4c,GAEbA,GAASA,EAAMC,SAEvBnd,QAAQ0R,MAAO,yGAIhB,MAAMU,EAAK1Q,KAAK2O,SAEV/F,EAAI4S,EAAM5S,EAAGiD,EAAI2P,EAAM3P,EAAG4L,EAAI+D,EAAM/D,EACpCrK,EAAI/P,KAAKmQ,IAAK5E,GAAKyE,EAAIhQ,KAAKoQ,IAAK7E,GACjC0E,EAAIjQ,KAAKmQ,IAAK3B,GAAKyG,EAAIjV,KAAKoQ,IAAK5B,GACjCvH,EAAIjH,KAAKmQ,IAAKiK,GAAKlF,EAAIlV,KAAKoQ,IAAKgK,GAEvC,GAAqB,QAAhB+D,EAAMjO,MAAkB,CAE5B,MAAM2D,EAAK9D,EAAI9I,EAAG4jB,EAAK9a,EAAImF,EAAGpB,EAAK9D,EAAI/I,EAAG6jB,EAAK9a,EAAIkF,EAEnD7B,EAAI,GAAMpD,EAAIhJ,EACdoM,EAAI,IAAQpD,EAAIiF,EAChB7B,EAAI,GAAM4B,EAEV5B,EAAI,GAAMwX,EAAK/W,EAAKmB,EACpB5B,EAAI,GAAMQ,EAAKiX,EAAK7V,EACpB5B,EAAI,IAAQrD,EAAIC,EAEhBoD,EAAI,GAAMyX,EAAKjX,EAAKoB,EACpB5B,EAAI,GAAMS,EAAK+W,EAAK5V,EACpB5B,EAAI,IAAOtD,EAAIE,OAET,GAAqB,QAAhBkO,EAAMjO,MAAkB,CAEnC,MAAM6a,EAAK9a,EAAIhJ,EAAG+jB,EAAK/a,EAAIiF,EAAG+V,EAAKhW,EAAIhO,EAAGikB,EAAKjW,EAAIC,EAEnD7B,EAAI,GAAM0X,EAAKG,EAAKlb,EACpBqD,EAAI,GAAM4X,EAAKjb,EAAIgb,EACnB3X,EAAI,GAAMtD,EAAIkF,EAEd5B,EAAI,GAAMtD,EAAImF,EACd7B,EAAI,GAAMtD,EAAI9I,EACdoM,EAAI,IAAQrD,EAEZqD,EAAI,GAAM2X,EAAKhb,EAAIib,EACnB5X,EAAI,GAAM6X,EAAKH,EAAK/a,EACpBqD,EAAI,IAAOtD,EAAIE,OAET,GAAqB,QAAhBkO,EAAMjO,MAAkB,CAEnC,MAAM6a,EAAK9a,EAAIhJ,EAAG+jB,EAAK/a,EAAIiF,EAAG+V,EAAKhW,EAAIhO,EAAGikB,EAAKjW,EAAIC,EAEnD7B,EAAI,GAAM0X,EAAKG,EAAKlb,EACpBqD,EAAI,IAAQtD,EAAImF,EAChB7B,EAAI,GAAM4X,EAAKD,EAAKhb,EAEpBqD,EAAI,GAAM2X,EAAKC,EAAKjb,EACpBqD,EAAI,GAAMtD,EAAI9I,EACdoM,EAAI,GAAM6X,EAAKH,EAAK/a,EAEpBqD,EAAI,IAAQtD,EAAIkF,EAChB5B,EAAI,GAAMrD,EACVqD,EAAI,IAAOtD,EAAIE,OAET,GAAqB,QAAhBkO,EAAMjO,MAAkB,CAEnC,MAAM2D,EAAK9D,EAAI9I,EAAG4jB,EAAK9a,EAAImF,EAAGpB,EAAK9D,EAAI/I,EAAG6jB,EAAK9a,EAAIkF,EAEnD7B,EAAI,GAAMpD,EAAIhJ,EACdoM,EAAI,GAAMS,EAAKmB,EAAI4V,EACnBxX,EAAI,GAAMQ,EAAKoB,EAAI6V,EAEnBzX,EAAI,GAAMpD,EAAIiF,EACd7B,EAAI,GAAMyX,EAAK7V,EAAIpB,EACnBR,EAAI,GAAMwX,EAAK5V,EAAInB,EAEnBT,EAAI,IAAQ4B,EACZ5B,EAAI,GAAMrD,EAAIC,EACdoD,EAAI,IAAOtD,EAAIE,OAET,GAAqB,QAAhBkO,EAAMjO,MAAkB,CAEnC,MAAMib,EAAKpb,EAAIE,EAAGmb,EAAKrb,EAAIkF,EAAGoW,EAAKrb,EAAIC,EAAGqb,EAAKtb,EAAIiF,EAEnD5B,EAAI,GAAMpD,EAAIhJ,EACdoM,EAAI,GAAMiY,EAAKH,EAAKjW,EACpB7B,EAAI,GAAMgY,EAAKnW,EAAIkW,EAEnB/X,EAAI,GAAM6B,EACV7B,EAAI,GAAMtD,EAAI9I,EACdoM,EAAI,IAAQrD,EAAI/I,EAEhBoM,EAAI,IAAQ4B,EAAIhO,EAChBoM,EAAI,GAAM+X,EAAKlW,EAAImW,EACnBhY,EAAI,IAAO8X,EAAKG,EAAKpW,OAEf,GAAqB,QAAhBiJ,EAAMjO,MAAkB,CAEnC,MAAMib,EAAKpb,EAAIE,EAAGmb,EAAKrb,EAAIkF,EAAGoW,EAAKrb,EAAIC,EAAGqb,EAAKtb,EAAIiF,EAEnD5B,EAAI,GAAMpD,EAAIhJ,EACdoM,EAAI,IAAQ6B,EACZ7B,EAAI,GAAM4B,EAAIhO,EAEdoM,EAAI,GAAM8X,EAAKjW,EAAIoW,EACnBjY,EAAI,GAAMtD,EAAI9I,EACdoM,EAAI,GAAM+X,EAAKlW,EAAImW,EAEnBhY,EAAI,GAAMgY,EAAKnW,EAAIkW,EACnB/X,EAAI,GAAMrD,EAAI/I,EACdoM,EAAI,IAAOiY,EAAKpW,EAAIiW,EAerB,OAVA9X,EAAI,GAAM,EACVA,EAAI,GAAM,EACVA,EAAI,IAAO,EAGXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EACXA,EAAI,IAAO,EAEJ1Q,KAIRpB,2BAA4BuO,GAE3B,OAAOnN,KAAK4oB,QAASC,GAAO1b,EAAG2b,IAIhClqB,OAAQmqB,EAAK/f,EAAQggB,GAEpB,MAAMtY,EAAK1Q,KAAK2O,SAyChB,OAvCAmL,GAAGrL,WAAYsa,EAAK/f,GAEG,IAAlB8Q,GAAGsF,aAIPtF,GAAGrC,EAAI,GAIRqC,GAAGxK,YACHsK,GAAGgF,aAAcoK,EAAIlP,IAEE,IAAlBF,GAAGwF,aAImB,IAArB/hB,KAAK4R,IAAK+Z,EAAGvR,GAEjBqC,GAAGlR,GAAK,KAIRkR,GAAGrC,GAAK,KAITqC,GAAGxK,YACHsK,GAAGgF,aAAcoK,EAAIlP,KAItBF,GAAGtK,YACHuK,GAAG+E,aAAc9E,GAAIF,IAErBlJ,EAAI,GAAMkJ,GAAGhR,EAAG8H,EAAI,GAAMmJ,GAAGjR,EAAG8H,EAAI,GAAMoJ,GAAGlR,EAC7C8H,EAAI,GAAMkJ,GAAG/N,EAAG6E,EAAI,GAAMmJ,GAAGhO,EAAG6E,EAAI,GAAMoJ,GAAGjO,EAC7C6E,EAAI,GAAMkJ,GAAGnC,EAAG/G,EAAI,GAAMmJ,GAAGpC,EAAG/G,EAAI,IAAOoJ,GAAGrC,EAEvCzX,KAIRpB,SAAU0M,EAAGD,GAEZ,YAAW1K,IAAN0K,GAEJ/M,QAAQC,KAAM,oGACPyB,KAAKiR,iBAAkB3F,EAAGD,IAI3BrL,KAAKiR,iBAAkBjR,KAAMsL,GAIrC1M,YAAa0M,GAEZ,OAAOtL,KAAKiR,iBAAkB3F,EAAGtL,MAIlCpB,iBAAkBwO,EAAGC,GAEpB,MAAM6D,EAAK9D,EAAEuB,SACPwC,EAAK9D,EAAEsB,SACP+B,EAAK1Q,KAAK2O,SAEVyC,EAAMF,EAAI,GAAKG,EAAMH,EAAI,GAAKI,EAAMJ,EAAI,GAAK+X,EAAM/X,EAAI,IACvDK,EAAML,EAAI,GAAKM,EAAMN,EAAI,GAAKO,EAAMP,EAAI,GAAKgY,EAAMhY,EAAI,IACvDQ,EAAMR,EAAI,GAAKS,EAAMT,EAAI,GAAKU,EAAMV,EAAI,IAAMiY,EAAMjY,EAAI,IACxDkY,EAAMlY,EAAI,GAAKmY,EAAMnY,EAAI,GAAKoY,EAAMpY,EAAI,IAAMqY,EAAMrY,EAAI,IAExDW,EAAMV,EAAI,GAAKW,EAAMX,EAAI,GAAKY,EAAMZ,EAAI,GAAKqY,EAAMrY,EAAI,IACvDa,EAAMb,EAAI,GAAKc,EAAMd,EAAI,GAAKe,EAAMf,EAAI,GAAKsY,EAAMtY,EAAI,IACvDgB,EAAMhB,EAAI,GAAKiB,EAAMjB,EAAI,GAAKkB,EAAMlB,EAAI,IAAMuY,EAAMvY,EAAI,IACxDwY,EAAMxY,EAAI,GAAKyY,EAAMzY,EAAI,GAAK0Y,EAAM1Y,EAAI,IAAM2Y,EAAM3Y,EAAI,IAsB9D,OApBAT,EAAI,GAAMU,EAAMS,EAAMR,EAAMW,EAAMV,EAAMa,EAAM8W,EAAMU,EACpDjZ,EAAI,GAAMU,EAAMU,EAAMT,EAAMY,EAAMX,EAAMc,EAAM6W,EAAMW,EACpDlZ,EAAI,GAAMU,EAAMW,EAAMV,EAAMa,EAAMZ,EAAMe,EAAM4W,EAAMY,EACpDnZ,EAAI,IAAOU,EAAMoY,EAAMnY,EAAMoY,EAAMnY,EAAMoY,EAAMT,EAAMa,EAErDpZ,EAAI,GAAMa,EAAMM,EAAML,EAAMQ,EAAMP,EAAMU,EAAM+W,EAAMS,EACpDjZ,EAAI,GAAMa,EAAMO,EAAMN,EAAMS,EAAMR,EAAMW,EAAM8W,EAAMU,EACpDlZ,EAAI,GAAMa,EAAMQ,EAAMP,EAAMU,EAAMT,EAAMY,EAAM6W,EAAMW,EACpDnZ,EAAI,IAAOa,EAAMiY,EAAMhY,EAAMiY,EAAMhY,EAAMiY,EAAMR,EAAMY,EAErDpZ,EAAI,GAAMgB,EAAMG,EAAMF,EAAMK,EAAMJ,EAAMO,EAAMgX,EAAMQ,EACpDjZ,EAAI,GAAMgB,EAAMI,EAAMH,EAAMM,EAAML,EAAMQ,EAAM+W,EAAMS,EACpDlZ,EAAI,IAAOgB,EAAMK,EAAMJ,EAAMO,EAAMN,EAAMS,EAAM8W,EAAMU,EACrDnZ,EAAI,IAAOgB,EAAM8X,EAAM7X,EAAM8X,EAAM7X,EAAM8X,EAAMP,EAAMW,EAErDpZ,EAAI,GAAM0Y,EAAMvX,EAAMwX,EAAMrX,EAAMsX,EAAMnX,EAAMoX,EAAMI,EACpDjZ,EAAI,GAAM0Y,EAAMtX,EAAMuX,EAAMpX,EAAMqX,EAAMlX,EAAMmX,EAAMK,EACpDlZ,EAAI,IAAO0Y,EAAMrX,EAAMsX,EAAMnX,EAAMoX,EAAMjX,EAAMkX,EAAMM,EACrDnZ,EAAI,IAAO0Y,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,EAAMH,EAAMO,EAE9C9pB,KAIRpB,eAAgBhB,GAEf,MAAM8S,EAAK1Q,KAAK2O,SAOhB,OALA+B,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,KAAQ9S,EACtD8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,KAAQ9S,EACtD8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,KAAQ9S,EAAG8S,EAAI,KAAQ9S,EACvD8S,EAAI,IAAO9S,EAAG8S,EAAI,IAAO9S,EAAG8S,EAAI,KAAQ9S,EAAG8S,EAAI,KAAQ9S,EAEhDoC,KAIRpB,cAEC,MAAM8R,EAAK1Q,KAAK2O,SAEVsB,EAAMS,EAAI,GAAKR,EAAMQ,EAAI,GAAKP,EAAMO,EAAI,GAAK6W,EAAM7W,EAAI,IACvDN,EAAMM,EAAI,GAAKL,EAAMK,EAAI,GAAKJ,EAAMI,EAAI,GAAK8W,EAAM9W,EAAI,IACvDH,EAAMG,EAAI,GAAKF,EAAME,EAAI,GAAKD,EAAMC,EAAI,IAAM+W,EAAM/W,EAAI,IAM9D,OALYA,EAAI,KAOZ6W,EAAMjX,EAAME,EACXL,EAAMqX,EAAMhX,EACZ+W,EAAMlX,EAAMI,EACZP,EAAMsX,EAAM/W,EACZN,EAAME,EAAMoX,EACZvX,EAAMI,EAAMmX,GAZU/W,EAAI,KAe3BT,EAAMK,EAAMmX,EACXxX,EAAMuX,EAAM/W,EACZ8W,EAAMnX,EAAMK,EACZN,EAAMC,EAAMqX,EACZtX,EAAMqX,EAAMjX,EACZgX,EAAMjX,EAAMC,GApByBG,EAAI,MAuB1CT,EAAMuX,EAAMhX,EACXP,EAAMI,EAAMoX,EACZF,EAAMnX,EAAMI,EACZN,EAAME,EAAMqX,EACZF,EAAMlX,EAAME,EACZL,EAAMsX,EAAMjX,GA5ByCG,EAAI,MA+B1DP,EAAME,EAAME,EACXN,EAAMK,EAAME,EACZP,EAAMI,EAAMI,EACZN,EAAMC,EAAMI,EACZN,EAAME,EAAMK,EACZP,EAAMI,EAAMC,GAOlB3R,YAEC,MAAM8R,EAAK1Q,KAAK2O,SAChB,IAAIsE,EAUJ,OARAA,EAAMvC,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMuC,EAC5CA,EAAMvC,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMuC,EAC5CA,EAAMvC,EAAI,GAAKA,EAAI,GAAMA,EAAI,GAAKA,EAAI,GAAMuC,EAE5CA,EAAMvC,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOuC,EAC9CA,EAAMvC,EAAI,GAAKA,EAAI,GAAMA,EAAI,IAAMA,EAAI,IAAOuC,EAC9CA,EAAMvC,EAAI,IAAMA,EAAI,IAAOA,EAAI,IAAMA,EAAI,IAAOuC,EAEzCjT,KAIRpB,YAAagK,EAAGiD,EAAG4L,GAElB,MAAM/G,EAAK1Q,KAAK2O,SAgBhB,OAdK/F,EAAEmhB,WAENrZ,EAAI,IAAO9H,EAAEA,EACb8H,EAAI,IAAO9H,EAAEiD,EACb6E,EAAI,IAAO9H,EAAE6O,IAIb/G,EAAI,IAAO9H,EACX8H,EAAI,IAAO7E,EACX6E,EAAI,IAAO+G,GAILzX,KAIRpB,WAAY0M,EAAGqH,QAEahS,IAAtBgS,GAEJrU,QAAQC,KAAM,oFAKf,MAAMmS,EAAK1Q,KAAK2O,SACfiC,EAAKtF,EAAEqD,SAEPsB,EAAMW,EAAI,GAAKR,EAAMQ,EAAI,GAAKL,EAAMK,EAAI,GAAK8W,EAAM9W,EAAI,GACvDV,EAAMU,EAAI,GAAKP,EAAMO,EAAI,GAAKJ,EAAMI,EAAI,GAAK+W,EAAM/W,EAAI,GACvDT,EAAMS,EAAI,GAAKN,EAAMM,EAAI,GAAKH,EAAMG,EAAI,IAAMgX,EAAMhX,EAAI,IACxD2W,EAAM3W,EAAI,IAAM4W,EAAM5W,EAAI,IAAM6W,EAAM7W,EAAI,IAAMiX,EAAMjX,EAAI,IAE1DgC,EAAMtC,EAAMmX,EAAME,EAAMH,EAAM/W,EAAMkX,EAAMH,EAAMhX,EAAMoX,EAAMvX,EAAMoX,EAAMG,EAAMtX,EAAME,EAAMqX,EAAMxX,EAAMI,EAAMoX,EAC5GhV,EAAM0U,EAAM9W,EAAMkX,EAAMxX,EAAMsX,EAAME,EAAMJ,EAAM/W,EAAMoX,EAAM1X,EAAMuX,EAAMG,EAAMzX,EAAMK,EAAMqX,EAAM3X,EAAMO,EAAMoX,EAC5G/U,EAAM3C,EAAMqX,EAAMG,EAAMJ,EAAMjX,EAAMqX,EAAMJ,EAAMlX,EAAMuX,EAAM1X,EAAMsX,EAAMI,EAAMzX,EAAME,EAAMwX,EAAM3X,EAAMI,EAAMuX,EAC5GmC,EAAMzC,EAAMjX,EAAME,EAAML,EAAMqX,EAAMhX,EAAM+W,EAAMlX,EAAMI,EAAMP,EAAMsX,EAAM/W,EAAMN,EAAME,EAAMoX,EAAMvX,EAAMI,EAAMmX,EAEvG1U,EAAM9C,EAAM2C,EAAMxC,EAAMyC,EAAMtC,EAAMuC,EAAM4U,EAAMsC,EAEtD,GAAa,IAARjX,EAAY,OAAO/S,KAAKa,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE/E,MAAMmS,EAAS,EAAID,EAsBnB,OApBArC,EAAI,GAAMkC,EAAMI,EAChBtC,EAAI,IAAQ8W,EAAM/W,EAAMiX,EAAMpX,EAAMmX,EAAMC,EAAMF,EAAMjX,EAAMqX,EAAMxX,EAAMqX,EAAMG,EAAMtX,EAAMC,EAAMsX,EAAMzX,EAAMK,EAAMoX,GAAQ7U,EAC1HtC,EAAI,IAAQL,EAAMoX,EAAMC,EAAMF,EAAMhX,EAAMkX,EAAMF,EAAMjX,EAAMoX,EAAMvX,EAAMqX,EAAME,EAAMtX,EAAME,EAAMsX,EAAMzX,EAAMI,EAAMqX,GAAQ7U,EAC1HtC,EAAI,IAAQJ,EAAME,EAAMkX,EAAMrX,EAAMI,EAAMiX,EAAMpX,EAAMC,EAAMoX,EAAMvX,EAAMK,EAAMkX,EAAMtX,EAAME,EAAMqX,EAAMxX,EAAMI,EAAMoX,GAAQ5U,EAE1HtC,EAAI,GAAMmC,EAAMG,EAChBtC,EAAI,IAAQP,EAAMsX,EAAMC,EAAMH,EAAM9W,EAAMiX,EAAMH,EAAMhX,EAAMqX,EAAM3X,EAAMwX,EAAMG,EAAMzX,EAAMI,EAAMsX,EAAM5X,EAAMQ,EAAMoX,GAAQ7U,EAC1HtC,EAAI,IAAQ6W,EAAM/W,EAAMkX,EAAMxX,EAAMuX,EAAMC,EAAMH,EAAMhX,EAAMoX,EAAM1X,EAAMwX,EAAME,EAAMzX,EAAMK,EAAMsX,EAAM5X,EAAMO,EAAMqX,GAAQ7U,EAC1HtC,EAAI,IAAQR,EAAMO,EAAMiX,EAAMvX,EAAMK,EAAMkX,EAAMvX,EAAMI,EAAMoX,EAAM1X,EAAMQ,EAAMkX,EAAMzX,EAAMK,EAAMqX,EAAM3X,EAAMO,EAAMoX,GAAQ5U,EAE1HtC,EAAI,GAAMoC,EAAME,EAChBtC,EAAI,IAAQ6W,EAAMjX,EAAMoX,EAAMvX,EAAMqX,EAAME,EAAMH,EAAMnX,EAAMwX,EAAM3X,EAAMuX,EAAMI,EAAMzX,EAAMC,EAAMyX,EAAM5X,EAAMK,EAAMuX,GAAQ7U,EAC1HtC,EAAI,KAASR,EAAMsX,EAAME,EAAMH,EAAMlX,EAAMqX,EAAMH,EAAMnX,EAAMuX,EAAM1X,EAAMuX,EAAMG,EAAMzX,EAAME,EAAMyX,EAAM5X,EAAMI,EAAMwX,GAAQ7U,EAC3HtC,EAAI,KAASP,EAAME,EAAMqX,EAAMxX,EAAMI,EAAMoX,EAAMvX,EAAMC,EAAMuX,EAAM1X,EAAMK,EAAMqX,EAAMzX,EAAME,EAAMwX,EAAM3X,EAAMI,EAAMuX,GAAQ5U,EAE3HtC,EAAI,IAAOsZ,EAAMhX,EACjBtC,EAAI,KAASP,EAAMqX,EAAMjX,EAAMgX,EAAMjX,EAAMC,EAAMgX,EAAMnX,EAAMK,EAAMR,EAAMuX,EAAM/W,EAAMN,EAAMC,EAAMqX,EAAMxX,EAAMK,EAAMmX,GAAQzU,EAC3HtC,EAAI,KAAS6W,EAAMlX,EAAME,EAAML,EAAMsX,EAAMjX,EAAMgX,EAAMnX,EAAMI,EAAMP,EAAMuX,EAAMhX,EAAMN,EAAME,EAAMqX,EAAMxX,EAAMI,EAAMoX,GAAQzU,EAC3HtC,EAAI,KAASR,EAAMI,EAAMC,EAAMJ,EAAME,EAAME,EAAMJ,EAAMC,EAAMI,EAAMP,EAAMK,EAAME,EAAMN,EAAME,EAAMK,EAAMR,EAAMI,EAAMI,GAAQuC,EAEpHhT,KAIRpB,MAAO2B,GAEN,MAAMmQ,EAAK1Q,KAAK2O,SACV/F,EAAIrI,EAAEqI,EAAGiD,EAAItL,EAAEsL,EAAG4L,EAAIlX,EAAEkX,EAO9B,OALA/G,EAAI,IAAO9H,EAAG8H,EAAI,IAAO7E,EAAG6E,EAAI,IAAO+G,EACvC/G,EAAI,IAAO9H,EAAG8H,EAAI,IAAO7E,EAAG6E,EAAI,IAAO+G,EACvC/G,EAAI,IAAO9H,EAAG8H,EAAI,IAAO7E,EAAG6E,EAAI,KAAQ+G,EACxC/G,EAAI,IAAO9H,EAAG8H,EAAI,IAAO7E,EAAG6E,EAAI,KAAQ+G,EAEjCzX,KAIRpB,oBAEC,MAAM8R,EAAK1Q,KAAK2O,SAEVsb,EAAWvZ,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEwZ,EAAWxZ,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GACjEyZ,EAAWzZ,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,GAAMA,EAAI,IAAOA,EAAI,IAExE,OAAOrT,KAAK2R,KAAM3R,KAAK8N,IAAK8e,EAAUC,EAAUC,IAIjDvrB,gBAAiBgK,EAAGiD,EAAG4L,GAWtB,OATAzX,KAAKa,IAEJ,EAAG,EAAG,EAAG+H,EACT,EAAG,EAAG,EAAGiD,EACT,EAAG,EAAG,EAAG4L,EACT,EAAG,EAAG,EAAG,GAIHzX,KAIRpB,cAAekV,GAEd,MAAMxG,EAAIjQ,KAAKmQ,IAAKsG,GAASlW,EAAIP,KAAKoQ,IAAKqG,GAW3C,OATA9T,KAAKa,IAEJ,EAAG,EAAG,EAAG,EACT,EAAGyM,GAAK1P,EAAG,EACX,EAAGA,EAAG0P,EAAG,EACT,EAAG,EAAG,EAAG,GAIHtN,KAIRpB,cAAekV,GAEd,MAAMxG,EAAIjQ,KAAKmQ,IAAKsG,GAASlW,EAAIP,KAAKoQ,IAAKqG,GAW3C,OATA9T,KAAKa,IAEHyM,EAAG,EAAG1P,EAAG,EACT,EAAG,EAAG,EAAG,GACRA,EAAG,EAAG0P,EAAG,EACV,EAAG,EAAG,EAAG,GAIJtN,KAIRpB,cAAekV,GAEd,MAAMxG,EAAIjQ,KAAKmQ,IAAKsG,GAASlW,EAAIP,KAAKoQ,IAAKqG,GAW3C,OATA9T,KAAKa,IAEJyM,GAAK1P,EAAG,EAAG,EACXA,EAAG0P,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIHtN,KAIRpB,iBAAkBmd,EAAMjM,GAIvB,MAAMxC,EAAIjQ,KAAKmQ,IAAKsC,GACdlS,EAAIP,KAAKoQ,IAAKqC,GACdhE,EAAI,EAAIwB,EACR1E,EAAImT,EAAKnT,EAAGiD,EAAIkQ,EAAKlQ,EAAG4L,EAAIsE,EAAKtE,EACjClE,EAAKzH,EAAIlD,EAAG4K,EAAK1H,EAAID,EAW3B,OATA7L,KAAKa,IAEJ0S,EAAK3K,EAAI0E,EAAGiG,EAAK1H,EAAIjO,EAAI6Z,EAAGlE,EAAKkE,EAAI7Z,EAAIiO,EAAG,EAC5C0H,EAAK1H,EAAIjO,EAAI6Z,EAAGjE,EAAK3H,EAAIyB,EAAGkG,EAAKiE,EAAI7Z,EAAIgL,EAAG,EAC5C2K,EAAKkE,EAAI7Z,EAAIiO,EAAG2H,EAAKiE,EAAI7Z,EAAIgL,EAAGkD,EAAI2L,EAAIA,EAAInK,EAAG,EAC/C,EAAG,EAAG,EAAG,GAIHtN,KAIRpB,UAAWgK,EAAGiD,EAAG4L,GAWhB,OATAzX,KAAKa,IAEJ+H,EAAG,EAAG,EAAG,EACT,EAAGiD,EAAG,EAAG,EACT,EAAG,EAAG4L,EAAG,EACT,EAAG,EAAG,EAAG,GAIHzX,KAIRpB,UAAWgK,EAAGiD,EAAG4L,GAWhB,OATAzX,KAAKa,IAEJ,EAAGgL,EAAG4L,EAAG,EACT7O,EAAG,EAAG6O,EAAG,EACT7O,EAAGiD,EAAG,EAAG,EACT,EAAG,EAAG,EAAG,GAIH7L,KAIRpB,QAASwrB,EAAU7O,EAAY8O,GAE9B,MAAM3Z,EAAK1Q,KAAK2O,SAEV/F,EAAI2S,EAAW3B,GAAI/N,EAAI0P,EAAW1B,GAAIpC,EAAI8D,EAAWzB,GAAIvL,EAAIgN,EAAWxB,GACxEuQ,EAAK1hB,EAAIA,EAAG2hB,EAAK1e,EAAIA,EAAG2e,EAAK/S,EAAIA,EACjCa,EAAK1P,EAAI0hB,EAAI7R,EAAK7P,EAAI2hB,EAAI7R,EAAK9P,EAAI4hB,EACnCjS,EAAK1M,EAAI0e,EAAI5R,EAAK9M,EAAI2e,EAAIhS,EAAKf,EAAI+S,EACnCC,EAAKlc,EAAI+b,EAAII,EAAKnc,EAAIgc,EAAII,EAAKpc,EAAIic,EAEnC/W,EAAK4W,EAAMzhB,EAAG8K,EAAK2W,EAAMxe,EAAGoU,EAAKoK,EAAM5S,EAsB7C,OApBA/G,EAAI,IAAQ,GAAM6H,EAAKC,IAAS/E,EAChC/C,EAAI,IAAQ+H,EAAKkS,GAAOlX,EACxB/C,EAAI,IAAQgI,EAAKgS,GAAOjX,EACxB/C,EAAI,GAAM,EAEVA,EAAI,IAAQ+H,EAAKkS,GAAOjX,EACxBhD,EAAI,IAAQ,GAAM4H,EAAKE,IAAS9E,EAChChD,EAAI,IAAQiI,EAAK8R,GAAO/W,EACxBhD,EAAI,GAAM,EAEVA,EAAI,IAAQgI,EAAKgS,GAAOzK,EACxBvP,EAAI,IAAQiI,EAAK8R,GAAOxK,EACxBvP,EAAI,KAAS,GAAM4H,EAAKC,IAAS0H,EACjCvP,EAAI,IAAO,EAEXA,EAAI,IAAO0Z,EAASxhB,EACpB8H,EAAI,IAAO0Z,EAASve,EACpB6E,EAAI,IAAO0Z,EAAS3S,EACpB/G,EAAI,IAAO,EAEJ1Q,KAIRpB,UAAWwrB,EAAU7O,EAAY8O,GAEhC,MAAM3Z,EAAK1Q,KAAK2O,SAEhB,IAAI8E,EAAKsU,GAAMlnB,IAAK6P,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMrH,SAChD,MAAMqK,EAAKqU,GAAMlnB,IAAK6P,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAAMrH,SAC5C4W,EAAK8H,GAAMlnB,IAAK6P,EAAI,GAAKA,EAAI,GAAKA,EAAI,KAAOrH,SAGvCrJ,KAAK4qB,cACN,IAAInX,GAAOA,GAEtB2W,EAASxhB,EAAI8H,EAAI,IACjB0Z,EAASve,EAAI6E,EAAI,IACjB0Z,EAAS3S,EAAI/G,EAAI,IAGjBma,GAAIpU,KAAMzW,MAEV,MAAM8qB,EAAQ,EAAIrX,EACZsX,EAAQ,EAAIrX,EACZsX,EAAQ,EAAI/K,EAoBlB,OAlBA4K,GAAIlc,SAAU,IAAOmc,EACrBD,GAAIlc,SAAU,IAAOmc,EACrBD,GAAIlc,SAAU,IAAOmc,EAErBD,GAAIlc,SAAU,IAAOoc,EACrBF,GAAIlc,SAAU,IAAOoc,EACrBF,GAAIlc,SAAU,IAAOoc,EAErBF,GAAIlc,SAAU,IAAOqc,EACrBH,GAAIlc,SAAU,IAAOqc,EACrBH,GAAIlc,SAAU,KAAQqc,EAEtBzP,EAAW0P,sBAAuBJ,IAElCR,EAAMzhB,EAAI6K,EACV4W,EAAMxe,EAAI6H,EACV2W,EAAM5S,EAAIwI,EAEHjgB,KAIRpB,gBAAiBssB,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,QAEnC5qB,IAAR4qB,GAEJjtB,QAAQC,KAAM,wGAIf,MAAMmS,EAAK1Q,KAAK2O,SACV/F,EAAI,EAAI0iB,GAASH,EAAQD,GACzBrf,EAAI,EAAIyf,GAASF,EAAMC,GAEvBje,GAAM+d,EAAQD,IAAWC,EAAQD,GACjC7d,GAAM+d,EAAMC,IAAaD,EAAMC,GAC/B/d,IAAQie,EAAMD,IAAWC,EAAMD,GAC/BhZ,GAAM,EAAIiZ,EAAMD,GAASC,EAAMD,GAOrC,OALA5a,EAAI,GAAM9H,EAAG8H,EAAI,GAAM,EAAGA,EAAI,GAAMtD,EAAGsD,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAM7E,EAAG6E,EAAI,GAAMrD,EAAGqD,EAAI,IAAO,EAClDA,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAOpD,EAAGoD,EAAI,IAAO4B,EACnD5B,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAGA,EAAI,IAAO,EAE9C1Q,KAIRpB,iBAAkBssB,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,GAEjD,MAAM7a,EAAK1Q,KAAK2O,SACVJ,EAAI,GAAQ4c,EAAQD,GACpBzY,EAAI,GAAQ2Y,EAAMC,GAClB7qB,EAAI,GAAQ+qB,EAAMD,GAElB1iB,GAAMuiB,EAAQD,GAAS3c,EACvB1C,GAAMuf,EAAMC,GAAW5Y,EACvBgF,GAAM8T,EAAMD,GAAS9qB,EAO3B,OALAkQ,EAAI,GAAM,EAAInC,EAAGmC,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS9H,EACxD8H,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAI+B,EAAG/B,EAAI,GAAM,EAAGA,EAAI,KAAS7E,EACxD6E,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,KAAS,EAAIlQ,EAAGkQ,EAAI,KAAS+G,EAC3D/G,EAAI,GAAM,EAAGA,EAAI,GAAM,EAAGA,EAAI,IAAO,EAAGA,EAAI,IAAO,EAE5C1Q,KAIRpB,OAAQ8T,GAEP,MAAMhC,EAAK1Q,KAAK2O,SACViC,EAAK8B,EAAO/D,SAElB,IAAM,IAAIxE,EAAI,EAAGA,EAAI,GAAIA,IAExB,GAAKuG,EAAIvG,KAAQyG,EAAIzG,GAAM,OAAO,EAInC,OAAO,EAIRvL,UAAWsL,EAAOwF,QAED/O,IAAX+O,IAAuBA,EAAS,GAErC,IAAM,IAAIvF,EAAI,EAAGA,EAAI,GAAIA,IAExBnK,KAAK2O,SAAUxE,GAAMD,EAAOC,EAAIuF,GAIjC,OAAO1P,KAIRpB,QAASsL,EAAOwF,QAEA/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErC,MAAMgB,EAAK1Q,KAAK2O,SAsBhB,OApBAzE,EAAOwF,GAAWgB,EAAI,GACtBxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAE1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAE1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,GAAMgB,EAAI,GAC1BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAC3BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAE3BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAC3BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAC3BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAC3BxG,EAAOwF,EAAS,IAAOgB,EAAI,IAEpBxG,GAMT,MAAM6d,GAAQ,IAAIvK,EACZqN,GAAM,IAAIvD,GACVuB,GAAQ,IAAIrL,EAAS,EAAG,EAAG,GAC3BsL,GAAO,IAAItL,EAAS,EAAG,EAAG,GAC1B5D,GAAK,IAAI4D,EACT3D,GAAK,IAAI2D,EACT1D,GAAK,IAAI0D,EAEf,MAAMgO,GAEL5sB,YAAagK,EAAI,EAAGiD,EAAI,EAAG4L,EAAI,EAAGlK,EAAQie,GAAMC,cAE/CzsB,OAAO2C,eAAgB3B,KAAM,UAAW,CAAEnB,OAAO,IAEjDmB,KAAK4Z,GAAKhR,EACV5I,KAAK6Z,GAAKhO,EACV7L,KAAK8Z,GAAKrC,EACVzX,KAAK0b,OAASnO,EAIf3E,QAEC,OAAO5I,KAAK4Z,GAIbhR,MAAO/J,GAENmB,KAAK4Z,GAAK/a,EACVmB,KAAKsb,oBAINzP,QAEC,OAAO7L,KAAK6Z,GAIbhO,MAAOhN,GAENmB,KAAK6Z,GAAKhb,EACVmB,KAAKsb,oBAIN7D,QAEC,OAAOzX,KAAK8Z,GAIbrC,MAAO5Y,GAENmB,KAAK8Z,GAAKjb,EACVmB,KAAKsb,oBAIN/N,YAEC,OAAOvN,KAAK0b,OAIbnO,UAAW1O,GAEVmB,KAAK0b,OAAS7c,EACdmB,KAAKsb,oBAIN1c,IAAKgK,EAAGiD,EAAG4L,EAAGlK,GASb,OAPAvN,KAAK4Z,GAAKhR,EACV5I,KAAK6Z,GAAKhO,EACV7L,KAAK8Z,GAAKrC,EACVzX,KAAK0b,OAASnO,GAASvN,KAAK0b,OAE5B1b,KAAKsb,oBAEEtb,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAK4Z,GAAI5Z,KAAK6Z,GAAI7Z,KAAK8Z,GAAI9Z,KAAK0b,QAI9D9c,KAAM4c,GASL,OAPAxb,KAAK4Z,GAAK4B,EAAM5B,GAChB5Z,KAAK6Z,GAAK2B,EAAM3B,GAChB7Z,KAAK8Z,GAAK0B,EAAM1B,GAChB9Z,KAAK0b,OAASF,EAAME,OAEpB1b,KAAKsb,oBAEEtb,KAIRpB,sBAAuB0M,EAAGiC,EAAO1I,GAEhC,MAAMoG,EAAQV,EAAUU,MAIlByF,EAAKpF,EAAEqD,SACPkJ,EAAMnH,EAAI,GAAKoH,EAAMpH,EAAI,GAAKqH,EAAMrH,EAAI,GACxCsH,EAAMtH,EAAI,GAAKuH,EAAMvH,EAAI,GAAKwH,EAAMxH,EAAI,GACxCyH,EAAMzH,EAAI,GAAK0H,EAAM1H,EAAI,GAAK2H,EAAM3H,EAAI,IAI9C,OAFAnD,EAAQA,GAASvN,KAAK0b,QAIrB,IAAK,MAEJ1b,KAAK6Z,GAAKxc,KAAKquB,KAAMzgB,EAAO8M,GAAO,EAAG,IAEjC1a,KAAK4R,IAAK8I,GAAQ,UAEtB/X,KAAK4Z,GAAKvc,KAAK6R,OAASgJ,EAAKG,GAC7BrY,KAAK8Z,GAAKzc,KAAK6R,OAAS4I,EAAKD,KAI7B7X,KAAK4Z,GAAKvc,KAAK6R,MAAOkJ,EAAKH,GAC3BjY,KAAK8Z,GAAK,GAIX,MAED,IAAK,MAEJ9Z,KAAK4Z,GAAKvc,KAAKquB,MAAQzgB,EAAOiN,GAAO,EAAG,IAEnC7a,KAAK4R,IAAKiJ,GAAQ,UAEtBlY,KAAK6Z,GAAKxc,KAAK6R,MAAO6I,EAAKM,GAC3BrY,KAAK8Z,GAAKzc,KAAK6R,MAAO8I,EAAKC,KAI3BjY,KAAK6Z,GAAKxc,KAAK6R,OAASiJ,EAAKN,GAC7B7X,KAAK8Z,GAAK,GAIX,MAED,IAAK,MAEJ9Z,KAAK4Z,GAAKvc,KAAKquB,KAAMzgB,EAAOmN,GAAO,EAAG,IAEjC/a,KAAK4R,IAAKmJ,GAAQ,UAEtBpY,KAAK6Z,GAAKxc,KAAK6R,OAASiJ,EAAKE,GAC7BrY,KAAK8Z,GAAKzc,KAAK6R,OAAS4I,EAAKG,KAI7BjY,KAAK6Z,GAAK,EACV7Z,KAAK8Z,GAAKzc,KAAK6R,MAAO8I,EAAKH,IAI5B,MAED,IAAK,MAEJ7X,KAAK6Z,GAAKxc,KAAKquB,MAAQzgB,EAAOkN,GAAO,EAAG,IAEnC9a,KAAK4R,IAAKkJ,GAAQ,UAEtBnY,KAAK4Z,GAAKvc,KAAK6R,MAAOkJ,EAAKC,GAC3BrY,KAAK8Z,GAAKzc,KAAK6R,MAAO8I,EAAKH,KAI3B7X,KAAK4Z,GAAK,EACV5Z,KAAK8Z,GAAKzc,KAAK6R,OAAS4I,EAAKG,IAI9B,MAED,IAAK,MAEJjY,KAAK8Z,GAAKzc,KAAKquB,KAAMzgB,EAAO+M,GAAO,EAAG,IAEjC3a,KAAK4R,IAAK+I,GAAQ,UAEtBhY,KAAK4Z,GAAKvc,KAAK6R,OAASgJ,EAAKD,GAC7BjY,KAAK6Z,GAAKxc,KAAK6R,OAASiJ,EAAKN,KAI7B7X,KAAK4Z,GAAK,EACV5Z,KAAK6Z,GAAKxc,KAAK6R,MAAO6I,EAAKM,IAI5B,MAED,IAAK,MAEJrY,KAAK8Z,GAAKzc,KAAKquB,MAAQzgB,EAAO6M,GAAO,EAAG,IAEnCza,KAAK4R,IAAK6I,GAAQ,UAEtB9X,KAAK4Z,GAAKvc,KAAK6R,MAAOkJ,EAAKH,GAC3BjY,KAAK6Z,GAAKxc,KAAK6R,MAAO6I,EAAKF,KAI3B7X,KAAK4Z,GAAKvc,KAAK6R,OAASgJ,EAAKG,GAC7BrY,KAAK6Z,GAAK,GAIX,MAED,QAECvb,QAAQC,KAAM,uEAAyEgP,GAQzF,OAJAvN,KAAK0b,OAASnO,GAEE,IAAX1I,GAAmB7E,KAAKsb,oBAEtBtb,KAIRpB,kBAAmBuO,EAAGI,EAAO1I,GAI5B,OAFA8mB,GAAQC,2BAA4Bze,GAE7BnN,KAAKirB,sBAAuBU,GAASpe,EAAO1I,GAIpDjG,eAAgB2B,EAAGgN,GAElB,OAAOvN,KAAKa,IAAKN,EAAEqI,EAAGrI,EAAEsL,EAAGtL,EAAEkX,EAAGlK,GAASvN,KAAK0b,QAI/C9c,QAASitB,GAMR,OAFAC,GAAclO,aAAc5d,MAErBA,KAAK+rB,kBAAmBD,GAAeD,GAI/CjtB,OAAQ4c,GAEP,OAASA,EAAM5B,KAAO5Z,KAAK4Z,IAAU4B,EAAM3B,KAAO7Z,KAAK6Z,IAAU2B,EAAM1B,KAAO9Z,KAAK8Z,IAAU0B,EAAME,SAAW1b,KAAK0b,OAIpH9c,UAAWsL,GASV,OAPAlK,KAAK4Z,GAAK1P,EAAO,GACjBlK,KAAK6Z,GAAK3P,EAAO,GACjBlK,KAAK8Z,GAAK5P,EAAO,QACGvJ,IAAfuJ,EAAO,KAAoBlK,KAAK0b,OAASxR,EAAO,IAErDlK,KAAKsb,oBAEEtb,KAIRpB,QAASsL,EAAOwF,GAUf,YARe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAK4Z,GACvB1P,EAAOwF,EAAS,GAAM1P,KAAK6Z,GAC3B3P,EAAOwF,EAAS,GAAM1P,KAAK8Z,GAC3B5P,EAAOwF,EAAS,GAAM1P,KAAK0b,OAEpBxR,EAIRtL,UAAWotB,GAEV,OAAKA,EAEGA,EAAenrB,IAAKb,KAAK4Z,GAAI5Z,KAAK6Z,GAAI7Z,KAAK8Z,IAI3C,IAAI0D,EAASxd,KAAK4Z,GAAI5Z,KAAK6Z,GAAI7Z,KAAK8Z,IAM7Clb,UAAW2e,GAIV,OAFAvd,KAAKsb,kBAAoBiC,EAElBvd,KAIRpB,sBAID4sB,GAAMC,aAAe,MACrBD,GAAMS,eAAiB,CAAE,MAAO,MAAO,MAAO,MAAO,MAAO,OAE5D,MAAMN,GAAU,IAAIrE,GACdwE,GAAgB,IAAInS,EAE1B,MAAMuS,GAELttB,cAECoB,KAAKmsB,KAAO,EAIbvtB,IAAKwtB,GAEJpsB,KAAKmsB,KAAO,GAAKC,EAAU,EAI5BxtB,OAAQwtB,GAEPpsB,KAAKmsB,MAAQ,GAAKC,EAAU,EAI7BxtB,YAECoB,KAAKmsB,MAAO,EAIbvtB,OAAQwtB,GAEPpsB,KAAKmsB,MAAQ,GAAKC,EAAU,EAI7BxtB,QAASwtB,GAERpsB,KAAKmsB,QAAY,GAAKC,EAAU,GAIjCxtB,aAECoB,KAAKmsB,KAAO,EAIbvtB,KAAMytB,GAEL,OAAuC,IAA9BrsB,KAAKmsB,KAAOE,EAAOF,OAM9B,IAAIG,GAAc,EAElB,MAAMC,GAAQ,IAAI/O,EACZgP,GAAM,IAAI7S,EACV8S,GAAQ,IAAInF,GACZoF,GAAU,IAAIlP,EAEdmP,GAAY,IAAInP,EAChBoP,GAAS,IAAIpP,EACbqP,GAAgB,IAAIlT,EAEpBmT,GAAS,IAAItP,EAAS,EAAG,EAAG,GAC5BuP,GAAS,IAAIvP,EAAS,EAAG,EAAG,GAC5BwP,GAAS,IAAIxP,EAAS,EAAG,EAAG,GAE5ByP,GAAc,CAAEnuB,KAAM,SACtBouB,GAAgB,CAAEpuB,KAAM,WAE9B,SAASquB,KAERnuB,OAAO2C,eAAgB3B,KAAM,KAAM,CAAEnB,MAAOytB,OAE5CtsB,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKmB,KAAO,GACZnB,KAAKlB,KAAO,WAEZkB,KAAKotB,OAAS,KACdptB,KAAK+hB,SAAW,GAEhB/hB,KAAKgpB,GAAKmE,GAASE,UAAU7W,QAE7B,MAAM4T,EAAW,IAAI5M,EACf7J,EAAW,IAAI6X,GACfjQ,EAAa,IAAI5B,EACjB0Q,EAAQ,IAAI7M,EAAS,EAAG,EAAG,GAcjC7J,EAAS2Z,WAZT,WAEC/R,EAAWqC,aAAcjK,GAAU,MAWpC4H,EAAW+R,WAPX,WAEC3Z,EAASoY,kBAAmBxQ,OAAY5a,GAAW,MAOpD3B,OAAOuuB,iBAAkBvtB,KAAM,CAC9BoqB,SAAU,CACTtoB,cAAc,EACdC,YAAY,EACZlD,MAAOurB,GAERzW,SAAU,CACT7R,cAAc,EACdC,YAAY,EACZlD,MAAO8U,GAER4H,WAAY,CACXzZ,cAAc,EACdC,YAAY,EACZlD,MAAO0c,GAER8O,MAAO,CACNvoB,cAAc,EACdC,YAAY,EACZlD,MAAOwrB,GAERmD,gBAAiB,CAChB3uB,MAAO,IAAIyoB,IAEZmG,aAAc,CACb5uB,MAAO,IAAIkR,KAIb/P,KAAK0S,OAAS,IAAI4U,GAClBtnB,KAAK2e,YAAc,IAAI2I,GAEvBtnB,KAAK6V,iBAAmBsX,GAASO,wBACjC1tB,KAAK2tB,wBAAyB,EAE9B3tB,KAAKqsB,OAAS,IAAIH,GAClBlsB,KAAK4tB,SAAU,EAEf5tB,KAAK6tB,YAAa,EAClB7tB,KAAK8tB,eAAgB,EAErB9tB,KAAK+tB,eAAgB,EACrB/tB,KAAKguB,YAAc,EAEnBhuB,KAAKiuB,SAAW,GAIjBd,GAASE,UAAY,IAAI7P,EAAS,EAAG,EAAG,GACxC2P,GAASO,yBAA0B,EAEnCP,GAAS7rB,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAE/E4B,YAAaiqB,GAEbe,YAAY,EAEZC,eAAgB,aAChBC,cAAe,aAEf7P,aAAc,SAAW7L,GAEnB1S,KAAK6V,kBAAmB7V,KAAKsW,eAElCtW,KAAK0S,OAAO2b,YAAa3b,GAEzB1S,KAAK0S,OAAO4b,UAAWtuB,KAAKoqB,SAAUpqB,KAAKub,WAAYvb,KAAKqqB,QAI7D3M,gBAAiB,SAAWvQ,GAI3B,OAFAnN,KAAKub,WAAW8S,YAAalhB,GAEtBnN,MAIRuuB,yBAA0B,SAAWxS,EAAMjM,GAI1C9P,KAAKub,WAAWsC,iBAAkB9B,EAAMjM,IAIzC0e,qBAAsB,SAAWhT,GAEhCxb,KAAKub,WAAWqC,aAAcpC,GAAO,IAItCiT,sBAAuB,SAAWnjB,GAIjCtL,KAAKub,WAAW0P,sBAAuB3f,IAIxCojB,0BAA2B,SAAWvhB,GAIrCnN,KAAKub,WAAW9E,KAAMtJ,IAIvBwhB,aAAc,SAAW5S,EAAMjM,GAS9B,OAJA0c,GAAI3O,iBAAkB9B,EAAMjM,GAE5B9P,KAAKub,WAAWqT,SAAUpC,IAEnBxsB,MAIR6uB,kBAAmB,SAAW9S,EAAMjM,GAUnC,OAJA0c,GAAI3O,iBAAkB9B,EAAMjM,GAE5B9P,KAAKub,WAAW8S,YAAa7B,IAEtBxsB,MAIR8uB,QAAS,SAAWhf,GAEnB,OAAO9P,KAAK2uB,aAAc7B,GAAQhd,IAInCif,QAAS,SAAWjf,GAEnB,OAAO9P,KAAK2uB,aAAc5B,GAAQjd,IAInCkf,QAAS,SAAWlf,GAEnB,OAAO9P,KAAK2uB,aAAc3B,GAAQld,IAInCmf,gBAAiB,SAAWlT,EAAMmT,GASjC,OAJA3C,GAAM9V,KAAMsF,GAAO2B,gBAAiB1d,KAAKub,YAEzCvb,KAAKoqB,SAASnJ,IAAKsL,GAAM7d,eAAgBwgB,IAElClvB,MAIRmvB,WAAY,SAAWD,GAEtB,OAAOlvB,KAAKivB,gBAAiBnC,GAAQoC,IAItCE,WAAY,SAAWF,GAEtB,OAAOlvB,KAAKivB,gBAAiBlC,GAAQmC,IAItCG,WAAY,SAAWH,GAEtB,OAAOlvB,KAAKivB,gBAAiBjC,GAAQkC,IAItCI,aAAc,SAAW/N,GAExB,OAAOA,EAAOhD,aAAcve,KAAK2e,cAIlC4Q,aAAc,SAAWhO,GAExB,OAAOA,EAAOhD,aAAckO,GAAMrZ,WAAYpT,KAAK2e,eAIpD6Q,OAAQ,SAAW5mB,EAAGiD,EAAG4L,GAInB7O,EAAEmhB,UAEN2C,GAAQjW,KAAM7N,GAId8jB,GAAQ7rB,IAAK+H,EAAGiD,EAAG4L,GAIpB,MAAM2V,EAASptB,KAAKotB,OAEpBptB,KAAKyhB,mBAAmB,GAAM,GAE9BkL,GAAU8C,sBAAuBzvB,KAAK2e,aAEjC3e,KAAK0vB,UAAY1vB,KAAK2vB,QAE1BlD,GAAM+C,OAAQ7C,GAAWD,GAAS1sB,KAAKgpB,IAIvCyD,GAAM+C,OAAQ9C,GAASC,GAAW3sB,KAAKgpB,IAIxChpB,KAAKub,WAAW0P,sBAAuBwB,IAElCW,IAEJX,GAAMmD,gBAAiBxC,EAAOzO,aAC9B6N,GAAIvB,sBAAuBwB,IAC3BzsB,KAAKub,WAAW8S,YAAa7B,GAAIqD,aAMnC5O,IAAK,SAAWC,GAEf,GAAK9X,UAAUC,OAAS,EAAI,CAE3B,IAAM,IAAIc,EAAI,EAAGA,EAAIf,UAAUC,OAAQc,IAEtCnK,KAAKihB,IAAK7X,UAAWe,IAItB,OAAOnK,KAIR,OAAKkhB,IAAWlhB,MAEf1B,QAAQ0R,MAAO,kEAAmEkR,GAC3ElhB,OAIDkhB,GAAUA,EAAOgN,YAEA,OAAlBhN,EAAOkM,QAEXlM,EAAOkM,OAAO0C,OAAQ5O,GAIvBA,EAAOkM,OAASptB,KAChBA,KAAK+hB,SAAS5jB,KAAM+iB,GAEpBA,EAAOlX,cAAeijB,KAItB3uB,QAAQ0R,MAAO,gEAAiEkR,GAI1ElhB,OAIR8vB,OAAQ,SAAW5O,GAElB,GAAK9X,UAAUC,OAAS,EAAI,CAE3B,IAAM,IAAIc,EAAI,EAAGA,EAAIf,UAAUC,OAAQc,IAEtCnK,KAAK8vB,OAAQ1mB,UAAWe,IAIzB,OAAOnK,KAIR,MAAMmJ,EAAQnJ,KAAK+hB,SAASnY,QAASsX,GAWrC,OATiB,IAAZ/X,IAEJ+X,EAAOkM,OAAS,KAChBptB,KAAK+hB,SAAShY,OAAQZ,EAAO,GAE7B+X,EAAOlX,cAAekjB,KAIhBltB,MAIR+vB,OAAQ,SAAW7O,GAsBlB,OAlBAlhB,KAAKyhB,mBAAmB,GAAM,GAE9BgL,GAAMrZ,WAAYpT,KAAK2e,aAEA,OAAlBuC,EAAOkM,SAEXlM,EAAOkM,OAAO3L,mBAAmB,GAAM,GAEvCgL,GAAMmC,SAAU1N,EAAOkM,OAAOzO,cAI/BuC,EAAO3C,aAAckO,IAErBvL,EAAOO,mBAAmB,GAAO,GAEjCzhB,KAAKihB,IAAKC,GAEHlhB,MAIRgwB,cAAe,SAAWC,GAEzB,OAAOjwB,KAAKkwB,oBAAqB,KAAMD,IAIxCE,gBAAiB,SAAWhvB,GAE3B,OAAOnB,KAAKkwB,oBAAqB,OAAQ/uB,IAI1C+uB,oBAAqB,SAAW/uB,EAAMtC,GAErC,GAAKmB,KAAMmB,KAAWtC,EAAQ,OAAOmB,KAErC,IAAM,IAAImK,EAAI,EAAGC,EAAIpK,KAAK+hB,SAAS1Y,OAAQc,EAAIC,EAAGD,IAAO,CAExD,MACM+W,EADQlhB,KAAK+hB,SAAU5X,GACR+lB,oBAAqB/uB,EAAMtC,GAEhD,QAAgB8B,IAAXugB,EAEJ,OAAOA,IAUVkP,iBAAkB,SAAWpnB,GAW5B,YATgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,8DACdyK,EAAS,IAAIwU,GAIdxd,KAAKqwB,mBAAmB,GAEjBrnB,EAAOymB,sBAAuBzvB,KAAK2e,cAI3C2R,mBAAoB,SAAWtnB,GAa9B,YAXgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,gEACdyK,EAAS,IAAI2Q,GAId3Z,KAAKqwB,mBAAmB,GAExBrwB,KAAK2e,YAAY2P,UAAW3B,GAAW3jB,EAAQ4jB,IAExC5jB,GAIRunB,cAAe,SAAWvnB,GAazB,YAXgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,2DACdyK,EAAS,IAAIwU,GAIdxd,KAAKqwB,mBAAmB,GAExBrwB,KAAK2e,YAAY2P,UAAW3B,GAAWE,GAAe7jB,GAE/CA,GAIRwnB,kBAAmB,SAAWxnB,QAEbrI,IAAXqI,IAEJ1K,QAAQC,KAAM,+DACdyK,EAAS,IAAIwU,GAIdxd,KAAKqwB,mBAAmB,GAExB,MAAM/rB,EAAItE,KAAK2e,YAAYhQ,SAE3B,OAAO3F,EAAOnI,IAAKyD,EAAG,GAAKA,EAAG,GAAKA,EAAG,KAAOgL,aAI9CmhB,QAAS,aAETC,SAAU,SAAWnT,GAEpBA,EAAUvd,MAEV,MAAM+hB,EAAW/hB,KAAK+hB,SAEtB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C4X,EAAU5X,GAAIumB,SAAUnT,IAM1BoT,gBAAiB,SAAWpT,GAE3B,IAAsB,IAAjBvd,KAAK4tB,QAAoB,OAE9BrQ,EAAUvd,MAEV,MAAM+hB,EAAW/hB,KAAK+hB,SAEtB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C4X,EAAU5X,GAAIwmB,gBAAiBpT,IAMjCqT,kBAAmB,SAAWrT,GAE7B,MAAM6P,EAASptB,KAAKotB,OAEJ,OAAXA,IAEJ7P,EAAU6P,GAEVA,EAAOwD,kBAAmBrT,KAM5BjH,aAAc,WAEbtW,KAAK0S,OAAOkW,QAAS5oB,KAAKoqB,SAAUpqB,KAAKub,WAAYvb,KAAKqqB,OAE1DrqB,KAAK2tB,wBAAyB,GAI/B0C,kBAAmB,SAAWQ,GAExB7wB,KAAK6V,kBAAmB7V,KAAKsW,gBAE7BtW,KAAK2tB,wBAA0BkD,KAEd,OAAhB7wB,KAAKotB,OAETptB,KAAK2e,YAAYlI,KAAMzW,KAAK0S,QAI5B1S,KAAK2e,YAAY1N,iBAAkBjR,KAAKotB,OAAOzO,YAAa3e,KAAK0S,QAIlE1S,KAAK2tB,wBAAyB,EAE9BkD,GAAQ,GAMT,MAAM9O,EAAW/hB,KAAK+hB,SAEtB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C4X,EAAU5X,GAAIkmB,kBAAmBQ,IAMnCpP,kBAAmB,SAAWqP,EAAeC,GAE5C,MAAM3D,EAASptB,KAAKotB,OAsBpB,IApBuB,IAAlB0D,GAAqC,OAAX1D,GAE9BA,EAAO3L,mBAAmB,GAAM,GAI5BzhB,KAAK6V,kBAAmB7V,KAAKsW,eAEb,OAAhBtW,KAAKotB,OAETptB,KAAK2e,YAAYlI,KAAMzW,KAAK0S,QAI5B1S,KAAK2e,YAAY1N,iBAAkBjR,KAAKotB,OAAOzO,YAAa3e,KAAK0S,SAM1C,IAAnBqe,EAA0B,CAE9B,MAAMhP,EAAW/hB,KAAK+hB,SAEtB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C4X,EAAU5X,GAAIsX,mBAAmB,GAAO,KAQ3C/K,OAAQ,SAAWC,GAGlB,MAAMC,OAA0BjW,IAATgW,GAAsC,iBAATA,EAE9CzN,EAAS,GAKV0N,IAGJD,EAAO,CACNqa,WAAY,GACZC,UAAW,GACXpa,SAAU,GACVI,OAAQ,GACRia,OAAQ,IAGThoB,EAAO4N,SAAW,CACjBZ,QAAS,IACTpX,KAAM,SACNiY,UAAW,oBAOb,MAAMmK,EAAS,GA8Bf,SAASiQ,EAAWC,EAAS/rB,GAQ5B,YANiC1E,IAA5BywB,EAAS/rB,EAAQkQ,QAErB6b,EAAS/rB,EAAQkQ,MAASlQ,EAAQqR,OAAQC,IAIpCtR,EAAQkQ,KAIhB,GAxCA2L,EAAO3L,KAAOvV,KAAKuV,KACnB2L,EAAOpiB,KAAOkB,KAAKlB,KAEA,KAAdkB,KAAKmB,OAAc+f,EAAO/f,KAAOnB,KAAKmB,OAClB,IAApBnB,KAAK6tB,aAAsB3M,EAAO2M,YAAa,IACxB,IAAvB7tB,KAAK8tB,gBAAyB5M,EAAO4M,eAAgB,IACpC,IAAjB9tB,KAAK4tB,UAAoB1M,EAAO0M,SAAU,IACnB,IAAvB5tB,KAAK+tB,gBAA0B7M,EAAO6M,eAAgB,GACjC,IAArB/tB,KAAKguB,cAAoB9M,EAAO8M,YAAchuB,KAAKguB,aACf,OAApC9uB,KAAKC,UAAWa,KAAKiuB,YAAsB/M,EAAO+M,SAAWjuB,KAAKiuB,UAEvE/M,EAAOmL,OAASrsB,KAAKqsB,OAAOF,KAC5BjL,EAAOxO,OAAS1S,KAAK0S,OAAO2e,WAEG,IAA1BrxB,KAAK6V,mBAA6BqL,EAAOrL,kBAAmB,GAI5D7V,KAAKsxB,kBAETpQ,EAAOpiB,KAAO,gBACdoiB,EAAOR,MAAQ1gB,KAAK0gB,MACpBQ,EAAOqQ,eAAiBvxB,KAAKuxB,eAAe7a,UAkBxC1W,KAAKwxB,QAAUxxB,KAAKyxB,QAAUzxB,KAAK0xB,SAAW,CAElDxQ,EAAOQ,SAAWyP,EAAWxa,EAAKqa,WAAYhxB,KAAK0hB,UAEnD,MAAMiQ,EAAa3xB,KAAK0hB,SAASiQ,WAEjC,QAAoBhxB,IAAfgxB,QAAkDhxB,IAAtBgxB,EAAWT,OAAuB,CAElE,MAAMA,EAASS,EAAWT,OAE1B,GAAKjyB,MAAMkY,QAAS+Z,GAEnB,IAAM,IAAI/mB,EAAI,EAAGC,EAAI8mB,EAAO7nB,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMynB,EAAQV,EAAQ/mB,GAEtBgnB,EAAWxa,EAAKua,OAAQU,QAMzBT,EAAWxa,EAAKua,OAAQA,IAQ3B,QAAuBvwB,IAAlBX,KAAK6xB,SAET,GAAK5yB,MAAMkY,QAASnX,KAAK6xB,UAAa,CAErC,MAAMC,EAAQ,GAEd,IAAM,IAAI3nB,EAAI,EAAGC,EAAIpK,KAAK6xB,SAASxoB,OAAQc,EAAIC,EAAGD,IAEjD2nB,EAAM3zB,KAAMgzB,EAAWxa,EAAKsa,UAAWjxB,KAAK6xB,SAAU1nB,KAIvD+W,EAAO2Q,SAAWC,OAIlB5Q,EAAO2Q,SAAWV,EAAWxa,EAAKsa,UAAWjxB,KAAK6xB,UAQpD,GAAK7xB,KAAK+hB,SAAS1Y,OAAS,EAAI,CAE/B6X,EAAOa,SAAW,GAElB,IAAM,IAAI5X,EAAI,EAAGA,EAAInK,KAAK+hB,SAAS1Y,OAAQc,IAE1C+W,EAAOa,SAAS5jB,KAAM6B,KAAK+hB,SAAU5X,GAAIuM,OAAQC,GAAOuK,QAM1D,GAAKtK,EAAe,CAEnB,MAAMoa,EAAae,EAAkBpb,EAAKqa,YACpCC,EAAYc,EAAkBpb,EAAKsa,WACnCpa,EAAWkb,EAAkBpb,EAAKE,UAClCI,EAAS8a,EAAkBpb,EAAKM,QAChCia,EAASa,EAAkBpb,EAAKua,QAEjCF,EAAW3nB,OAAS,IAAIH,EAAO8nB,WAAaA,GAC5CC,EAAU5nB,OAAS,IAAIH,EAAO+nB,UAAYA,GAC1Cpa,EAASxN,OAAS,IAAIH,EAAO2N,SAAWA,GACxCI,EAAO5N,OAAS,IAAIH,EAAO+N,OAASA,GACpCia,EAAO7nB,OAAS,IAAIH,EAAOgoB,OAASA,GAM1C,OAFAhoB,EAAOgY,OAASA,EAEThY,EAKP,SAAS6oB,EAAkBC,GAE1B,MAAMC,EAAS,GACf,IAAM,MAAM1wB,KAAOywB,EAAQ,CAE1B,MAAME,EAAOF,EAAOzwB,UACb2wB,EAAKpb,SACZmb,EAAO9zB,KAAM+zB,GAId,OAAOD,IAMTzb,MAAO,SAAW2b,GAEjB,OAAO,IAAInyB,KAAKkD,aAAcuT,KAAMzW,KAAMmyB,IAI3C1b,KAAM,SAAWnN,EAAQ6oB,GA8BxB,QA5BmBxxB,IAAdwxB,IAA0BA,GAAY,GAE3CnyB,KAAKmB,KAAOmI,EAAOnI,KAEnBnB,KAAKgpB,GAAGvS,KAAMnN,EAAO0f,IAErBhpB,KAAKoqB,SAAS3T,KAAMnN,EAAO8gB,UAC3BpqB,KAAK2T,SAASpG,MAAQjE,EAAOqK,SAASpG,MACtCvN,KAAKub,WAAW9E,KAAMnN,EAAOiS,YAC7Bvb,KAAKqqB,MAAM5T,KAAMnN,EAAO+gB,OAExBrqB,KAAK0S,OAAO+D,KAAMnN,EAAOoJ,QACzB1S,KAAK2e,YAAYlI,KAAMnN,EAAOqV,aAE9B3e,KAAK6V,iBAAmBvM,EAAOuM,iBAC/B7V,KAAK2tB,uBAAyBrkB,EAAOqkB,uBAErC3tB,KAAKqsB,OAAOF,KAAO7iB,EAAO+iB,OAAOF,KACjCnsB,KAAK4tB,QAAUtkB,EAAOskB,QAEtB5tB,KAAK6tB,WAAavkB,EAAOukB,WACzB7tB,KAAK8tB,cAAgBxkB,EAAOwkB,cAE5B9tB,KAAK+tB,cAAgBzkB,EAAOykB,cAC5B/tB,KAAKguB,YAAc1kB,EAAO0kB,YAE1BhuB,KAAKiuB,SAAW/uB,KAAKG,MAAOH,KAAKC,UAAWmK,EAAO2kB,YAEhC,IAAdkE,EAEJ,IAAM,IAAIhoB,EAAI,EAAGA,EAAIb,EAAOyY,SAAS1Y,OAAQc,IAAO,CAEnD,MAAMioB,EAAQ9oB,EAAOyY,SAAU5X,GAC/BnK,KAAKihB,IAAKmR,EAAM5b,SAMlB,OAAOxW,QAMT,MAAMqyB,GAAW,IAAI7U,EACf8U,GAAW,IAAI9U,EACf+U,GAAgB,IAAIxiB,EAE1B,MAAMyiB,GAEL5zB,YAAa6gB,EAAQ0C,GAEpBnjB,OAAO2C,eAAgB3B,KAAM,UAAW,CAAEnB,OAAO,IAIjDmB,KAAKyf,YAAsB9e,IAAX8e,EAAyBA,EAAS,IAAIjC,EAAS,EAAG,EAAG,GACrExd,KAAKmiB,cAA0BxhB,IAAbwhB,EAA2BA,EAAW,EAIzDvjB,IAAK6gB,EAAQ0C,GAKZ,OAHAniB,KAAKyf,OAAOhJ,KAAMgJ,GAClBzf,KAAKmiB,SAAWA,EAETniB,KAIRpB,cAAegK,EAAGiD,EAAG4L,EAAGlJ,GAKvB,OAHAvO,KAAKyf,OAAO5e,IAAK+H,EAAGiD,EAAG4L,GACvBzX,KAAKmiB,SAAW5T,EAETvO,KAIRpB,8BAA+B6gB,EAAQ6B,GAKtC,OAHAthB,KAAKyf,OAAOhJ,KAAMgJ,GAClBzf,KAAKmiB,UAAab,EAAMlF,IAAKpc,KAAKyf,QAE3Bzf,KAIRpB,sBAAuBwO,EAAGC,EAAGC,GAE5B,MAAMmS,EAAS4S,GAAS5jB,WAAYnB,EAAGD,GAAI8Z,MAAOmL,GAAS7jB,WAAYrB,EAAGC,IAAMiC,YAMhF,OAFAtP,KAAKyyB,8BAA+BhT,EAAQrS,GAErCpN,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMsjB,GAKL,OAHAliB,KAAKyf,OAAOhJ,KAAMyL,EAAMzC,QACxBzf,KAAKmiB,SAAWD,EAAMC,SAEfniB,KAIRpB,YAIC,MAAM8zB,EAAsB,EAAM1yB,KAAKyf,OAAOpW,SAI9C,OAHArJ,KAAKyf,OAAO/Q,eAAgBgkB,GAC5B1yB,KAAKmiB,UAAYuQ,EAEV1yB,KAIRpB,SAKC,OAHAoB,KAAKmiB,WAAc,EACnBniB,KAAKyf,OAAOkT,SAEL3yB,KAIRpB,gBAAiB0iB,GAEhB,OAAOthB,KAAKyf,OAAOrD,IAAKkF,GAAUthB,KAAKmiB,SAIxCvjB,iBAAkBojB,GAEjB,OAAOhiB,KAAKmkB,gBAAiBnC,EAAOnS,QAAWmS,EAAOpC,OAIvDhhB,aAAc0iB,EAAOtY,GASpB,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,uDACdyK,EAAS,IAAIwU,GAIPxU,EAAOyN,KAAMzW,KAAKyf,QAAS/Q,gBAAkB1O,KAAKmkB,gBAAiB7C,IAAUL,IAAKK,GAI1F1iB,cAAeg0B,EAAM5pB,QAEJrI,IAAXqI,IAEJ1K,QAAQC,KAAM,wDACdyK,EAAS,IAAIwU,GAId,MAAMwH,EAAY4N,EAAKC,MAAOR,IAExBlT,EAAcnf,KAAKyf,OAAOrD,IAAK4I,GAErC,GAAqB,IAAhB7F,EAGJ,OAA4C,IAAvCnf,KAAKmkB,gBAAiByO,EAAKE,OAExB9pB,EAAOyN,KAAMmc,EAAKE,YAK1B,EAID,MAAMhnB,IAAQ8mB,EAAKE,MAAM1W,IAAKpc,KAAKyf,QAAWzf,KAAKmiB,UAAahD,EAEhE,OAAKrT,EAAI,GAAKA,EAAI,OAAlB,EAMO9C,EAAOyN,KAAMuO,GAAYtW,eAAgB5C,GAAImV,IAAK2R,EAAKE,OAI/Dl0B,eAAgBg0B,GAIf,MAAMG,EAAY/yB,KAAKmkB,gBAAiByO,EAAKE,OACvCE,EAAUhzB,KAAKmkB,gBAAiByO,EAAKK,KAE3C,OAASF,EAAY,GAAKC,EAAU,GAASA,EAAU,GAAKD,EAAY,EAIzEn0B,cAAewiB,GAEd,OAAOA,EAAI8R,gBAAiBlzB,MAI7BpB,iBAAkBojB,GAEjB,OAAOA,EAAOkR,gBAAiBlzB,MAIhCpB,cAAeoK,GASd,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,wDACdyK,EAAS,IAAIwU,GAIPxU,EAAOyN,KAAMzW,KAAKyf,QAAS/Q,gBAAkB1O,KAAKmiB,UAI1DvjB,aAAc8T,EAAQygB,GAErB,MAAM1F,EAAe0F,GAAwBZ,GAAca,gBAAiB1gB,GAEtE2gB,EAAiBrzB,KAAKszB,cAAejB,IAAW9T,aAAc7L,GAE9D+M,EAASzf,KAAKyf,OAAOlI,aAAckW,GAAene,YAIxD,OAFAtP,KAAKmiB,UAAakR,EAAejX,IAAKqD,GAE/Bzf,KAIRpB,UAAW8Q,GAIV,OAFA1P,KAAKmiB,UAAYzS,EAAO0M,IAAKpc,KAAKyf,QAE3Bzf,KAIRpB,OAAQsjB,GAEP,OAAOA,EAAMzC,OAAO2D,OAAQpjB,KAAKyf,SAAcyC,EAAMC,WAAaniB,KAAKmiB,UAMzE,MAAMoR,GAAQ,IAAI/V,EACZgW,GAAQ,IAAIhW,EACZiW,GAAQ,IAAIjW,EACZkW,GAAM,IAAIlW,EAEVmW,GAAO,IAAInW,EACXoW,GAAO,IAAIpW,EACXqW,GAAO,IAAIrW,EACXsW,GAAO,IAAItW,EACXuW,GAAO,IAAIvW,EACXwW,GAAO,IAAIxW,EAEjB,MAAMyW,GAELr1B,YAAawO,EAAGC,EAAGC,GAElBtN,KAAKoN,OAAYzM,IAANyM,EAAoBA,EAAI,IAAIoQ,EACvCxd,KAAKqN,OAAY1M,IAAN0M,EAAoBA,EAAI,IAAImQ,EACvCxd,KAAKsN,OAAY3M,IAAN2M,EAAoBA,EAAI,IAAIkQ,EAIxC5e,iBAAkBwO,EAAGC,EAAGC,EAAGtE,QAEVrI,IAAXqI,IAEJ1K,QAAQC,KAAM,uDACdyK,EAAS,IAAIwU,GAIdxU,EAAOyF,WAAYnB,EAAGD,GACtBkmB,GAAM9kB,WAAYrB,EAAGC,GACrBrE,EAAOme,MAAOoM,IAEd,MAAMW,EAAiBlrB,EAAOoW,WAC9B,OAAK8U,EAAiB,EAEdlrB,EAAO0F,eAAgB,EAAIrR,KAAK2R,KAAMklB,IAIvClrB,EAAOnI,IAAK,EAAG,EAAG,GAM1BjC,oBAAqB0iB,EAAOlU,EAAGC,EAAGC,EAAGtE,GAEpCuqB,GAAM9kB,WAAYnB,EAAGF,GACrBomB,GAAM/kB,WAAYpB,EAAGD,GACrBqmB,GAAMhlB,WAAY6S,EAAOlU,GAEzB,MAAM+mB,EAAQZ,GAAMnX,IAAKmX,IACnBa,EAAQb,GAAMnX,IAAKoX,IACnBa,EAAQd,GAAMnX,IAAKqX,IACnBa,EAAQd,GAAMpX,IAAKoX,IACnBe,EAAQf,GAAMpX,IAAKqX,IAEnBe,EAAUL,EAAQG,EAAQF,EAAQA,EAUxC,QARgBzzB,IAAXqI,IAEJ1K,QAAQC,KAAM,0DACdyK,EAAS,IAAIwU,GAKC,IAAVgX,EAIJ,OAAOxrB,EAAOnI,KAAO,GAAK,GAAK,GAIhC,MAAM4zB,EAAW,EAAID,EACfE,GAAMJ,EAAQD,EAAQD,EAAQG,GAAUE,EACxCl0B,GAAM4zB,EAAQI,EAAQH,EAAQC,GAAUI,EAG9C,OAAOzrB,EAAOnI,IAAK,EAAI6zB,EAAIn0B,EAAGA,EAAGm0B,GAIlC91B,qBAAsB0iB,EAAOlU,EAAGC,EAAGC,GAIlC,OAFAtN,KAAK20B,aAAcrT,EAAOlU,EAAGC,EAAGC,EAAGomB,IAE1BA,GAAI9qB,GAAK,GAAS8qB,GAAI7nB,GAAK,GAAW6nB,GAAI9qB,EAAI8qB,GAAI7nB,GAAO,EAInEjN,aAAc0iB,EAAOoC,EAAIC,EAAIiR,EAAIC,EAAKC,EAAKC,EAAK/rB,GAS/C,OAPAhJ,KAAK20B,aAAcrT,EAAOoC,EAAIC,EAAIiR,EAAIlB,IAEtC1qB,EAAOnI,IAAK,EAAG,GACfmI,EAAOgsB,gBAAiBH,EAAKnB,GAAI9qB,GACjCI,EAAOgsB,gBAAiBF,EAAKpB,GAAI7nB,GACjC7C,EAAOgsB,gBAAiBD,EAAKrB,GAAIjc,GAE1BzO,EAIRpK,qBAAsBwO,EAAGC,EAAGC,EAAG0X,GAM9B,OAJAuO,GAAM9kB,WAAYnB,EAAGD,GACrBmmB,GAAM/kB,WAAYrB,EAAGC,GAGZkmB,GAAMpM,MAAOqM,IAAQpX,IAAK4I,GAAc,EAIlDpmB,IAAKwO,EAAGC,EAAGC,GAMV,OAJAtN,KAAKoN,EAAEqJ,KAAMrJ,GACbpN,KAAKqN,EAAEoJ,KAAMpJ,GACbrN,KAAKsN,EAAEmJ,KAAMnJ,GAENtN,KAIRpB,wBAAyB+hB,EAAQsU,EAAIC,EAAIC,GAMxC,OAJAn1B,KAAKoN,EAAEqJ,KAAMkK,EAAQsU,IACrBj1B,KAAKqN,EAAEoJ,KAAMkK,EAAQuU,IACrBl1B,KAAKsN,EAAEmJ,KAAMkK,EAAQwU,IAEdn1B,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMwjB,GAML,OAJApiB,KAAKoN,EAAEqJ,KAAM2L,EAAShV,GACtBpN,KAAKqN,EAAEoJ,KAAM2L,EAAS/U,GACtBrN,KAAKsN,EAAEmJ,KAAM2L,EAAS9U,GAEftN,KAIRpB,UAKC,OAHA20B,GAAM9kB,WAAYzO,KAAKsN,EAAGtN,KAAKqN,GAC/BmmB,GAAM/kB,WAAYzO,KAAKoN,EAAGpN,KAAKqN,GAEQ,GAAhCkmB,GAAMpM,MAAOqM,IAAQnqB,SAI7BzK,YAAaoK,GASZ,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,yDACdyK,EAAS,IAAIwU,GAIPxU,EAAOwF,WAAYxO,KAAKoN,EAAGpN,KAAKqN,GAAI4T,IAAKjhB,KAAKsN,GAAIoB,eAAgB,EAAI,GAI9E9P,UAAWoK,GAEV,OAAOirB,GAASmB,UAAWp1B,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,EAAGtE,GAIpDpK,SAAUoK,GAST,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,sDACdyK,EAAS,IAAIwpB,IAIPxpB,EAAOqsB,sBAAuBr1B,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,GAI3D1O,aAAc0iB,EAAOtY,GAEpB,OAAOirB,GAASU,aAAcrT,EAAOthB,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,EAAGtE,GAI9DpK,MAAO0iB,EAAOuT,EAAKC,EAAKC,EAAK/rB,GAE5B,OAAOirB,GAASqB,MAAOhU,EAAOthB,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,EAAGunB,EAAKC,EAAKC,EAAK/rB,GAItEpK,cAAe0iB,GAEd,OAAO2S,GAASsB,cAAejU,EAAOthB,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,GAI5D1O,cAAeomB,GAEd,OAAOiP,GAASuB,cAAex1B,KAAKoN,EAAGpN,KAAKqN,EAAGrN,KAAKsN,EAAG0X,GAIxDpmB,cAAewiB,GAEd,OAAOA,EAAIqU,mBAAoBz1B,MAIhCpB,oBAAqB4B,EAAGwI,QAEPrI,IAAXqI,IAEJ1K,QAAQC,KAAM,iEACdyK,EAAS,IAAIwU,GAId,MAAMpQ,EAAIpN,KAAKoN,EAAGC,EAAIrN,KAAKqN,EAAGC,EAAItN,KAAKsN,EACvC,IAAI/M,EAAGgO,EAQPolB,GAAKllB,WAAYpB,EAAGD,GACpBwmB,GAAKnlB,WAAYnB,EAAGF,GACpB0mB,GAAKrlB,WAAYjO,EAAG4M,GACpB,MAAMvC,EAAK8oB,GAAKvX,IAAK0X,IACfhpB,EAAK8oB,GAAKxX,IAAK0X,IACrB,GAAKjpB,GAAM,GAAKC,GAAM,EAGrB,OAAO9B,EAAOyN,KAAMrJ,GAIrB2mB,GAAKtlB,WAAYjO,EAAG6M,GACpB,MAAMtC,EAAK4oB,GAAKvX,IAAK2X,IACf2B,EAAK9B,GAAKxX,IAAK2X,IACrB,GAAKhpB,GAAM,GAAK2qB,GAAM3qB,EAGrB,OAAO/B,EAAOyN,KAAMpJ,GAIrB,MAAMsoB,EAAK9qB,EAAK6qB,EAAK3qB,EAAKD,EAC1B,GAAK6qB,GAAM,GAAK9qB,GAAM,GAAKE,GAAM,EAIhC,OAFAxK,EAAIsK,GAAOA,EAAKE,GAET/B,EAAOyN,KAAMrJ,GAAI4nB,gBAAiBrB,GAAMpzB,GAIhDyzB,GAAKvlB,WAAYjO,EAAG8M,GACpB,MAAMsoB,EAAKjC,GAAKvX,IAAK4X,IACf6B,EAAKjC,GAAKxX,IAAK4X,IACrB,GAAK6B,GAAM,GAAKD,GAAMC,EAGrB,OAAO7sB,EAAOyN,KAAMnJ,GAIrB,MAAMwoB,EAAKF,EAAK9qB,EAAKD,EAAKgrB,EAC1B,GAAKC,GAAM,GAAKhrB,GAAM,GAAK+qB,GAAM,EAIhC,OAFAtnB,EAAIzD,GAAOA,EAAK+qB,GAET7sB,EAAOyN,KAAMrJ,GAAI4nB,gBAAiBpB,GAAMrlB,GAIhD,MAAMwnB,EAAKhrB,EAAK8qB,EAAKD,EAAKF,EAC1B,GAAKK,GAAM,GAAOL,EAAK3qB,GAAQ,GAAO6qB,EAAKC,GAAQ,EAKlD,OAHAhC,GAAKplB,WAAYnB,EAAGD,GACpBkB,GAAMmnB,EAAK3qB,IAAW2qB,EAAK3qB,GAAS6qB,EAAKC,IAElC7sB,EAAOyN,KAAMpJ,GAAI2nB,gBAAiBnB,GAAMtlB,GAKhD,MAAMimB,EAAQ,GAAMuB,EAAKD,EAAKH,GAK9B,OAHAp1B,EAAIu1B,EAAKtB,EACTjmB,EAAIonB,EAAKnB,EAEFxrB,EAAOyN,KAAMrJ,GAAI4nB,gBAAiBrB,GAAMpzB,GAAIy0B,gBAAiBpB,GAAMrlB,GAI3E3P,OAAQwjB,GAEP,OAAOA,EAAShV,EAAEgW,OAAQpjB,KAAKoN,IAAOgV,EAAS/U,EAAE+V,OAAQpjB,KAAKqN,IAAO+U,EAAS9U,EAAE8V,OAAQpjB,KAAKsN,IAM/F,MAAM0oB,GAAiB,CAAEC,UAAa,SAAUC,aAAgB,SAAUC,KAAQ,MAAUC,WAAc,QAAUC,MAAS,SAC5HC,MAAS,SAAUC,OAAU,SAAUC,MAAS,EAAUC,eAAkB,SAAUC,KAAQ,IAAUC,WAAc,QACtHC,MAAS,SAAUC,UAAa,SAAUC,UAAa,QAAUC,WAAc,QAAUC,UAAa,SAAUC,MAAS,SACzHC,eAAkB,QAAUC,SAAY,SAAUC,QAAW,SAAUC,KAAQ,MAAUC,SAAY,IAAUC,SAAY,MAC3HC,cAAiB,SAAUC,SAAY,SAAUC,UAAa,MAAUC,SAAY,SAAUC,UAAa,SAAUC,YAAe,QACpIC,eAAkB,QAAUC,WAAc,SAAUC,WAAc,SAAUC,QAAW,QAAUC,WAAc,SAAUC,aAAgB,QACzIC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,QAAUC,cAAiB,MAAUC,WAAc,QAC1HC,SAAY,SAAUC,YAAe,MAAUC,QAAW,QAAUC,QAAW,QAAUC,WAAc,QAAUC,UAAa,SAC9HC,YAAe,SAAUC,YAAe,QAAUC,QAAW,SAAUC,UAAa,SAAUC,WAAc,SAAUC,KAAQ,SAC9HC,UAAa,SAAUC,KAAQ,QAAUC,MAAS,MAAUC,YAAe,SAAUC,KAAQ,QAAUC,SAAY,SAAUC,QAAW,SACxIC,UAAa,SAAUC,OAAU,QAAUC,MAAS,SAAUC,MAAS,SAAUC,SAAY,SAAUC,cAAiB,SAAUC,UAAa,QAC/IC,aAAgB,SAAUC,UAAa,SAAUC,WAAc,SAAUC,UAAa,SAAUC,qBAAwB,SAAUC,UAAa,SAC/IC,WAAc,QAAUC,UAAa,SAAUC,UAAa,SAAUC,YAAe,SAAUC,cAAiB,QAAUC,aAAgB,QAC1IC,eAAkB,QAAUC,eAAkB,QAAUC,eAAkB,SAAUC,YAAe,SAAUC,KAAQ,MAAUC,UAAa,QAC5IC,MAAS,SAAUC,QAAW,SAAUC,OAAU,QAAUC,iBAAoB,QAAUC,WAAc,IAAUC,aAAgB,SAClIC,aAAgB,QAAUC,eAAkB,QAAUC,gBAAmB,QAAUC,kBAAqB,MAAUC,gBAAmB,QACrIC,gBAAmB,SAAUC,aAAgB,QAAUC,UAAa,SAAUC,UAAa,SAAUC,SAAY,SAAUC,YAAe,SAC1IC,KAAQ,IAAUC,QAAW,SAAUC,MAAS,QAAUC,UAAa,QAAUC,OAAU,SAAUC,UAAa,SAAUC,OAAU,SACtIC,cAAiB,SAAUC,UAAa,SAAUC,cAAiB,SAAUC,cAAiB,SAAUC,WAAc,SAAUC,UAAa,SAC7IC,KAAQ,SAAUC,KAAQ,SAAUC,KAAQ,SAAUC,WAAc,SAAUC,OAAU,QAAUC,cAAiB,QAAUC,IAAO,SAAUC,UAAa,SAC3JC,UAAa,QAAUC,YAAe,QAAUC,OAAU,SAAUC,WAAc,SAAUC,SAAY,QAAUC,SAAY,SAC9HC,OAAU,SAAUC,OAAU,SAAUC,QAAW,QAAUC,UAAa,QAAUC,UAAa,QAAUC,UAAa,QAAUC,KAAQ,SAC1IC,YAAe,MAAUC,UAAa,QAAUC,IAAO,SAAUC,KAAQ,MAAUC,QAAW,SAAUC,OAAU,SAAUC,UAAa,QACzIC,OAAU,SAAUC,MAAS,SAAUC,MAAS,SAAUC,WAAc,SAAUC,OAAU,SAAUC,YAAe,UAEhHC,GAAQ,CAAE5sB,EAAG,EAAG7U,EAAG,EAAGwM,EAAG,GACzBk1B,GAAQ,CAAE7sB,EAAG,EAAG7U,EAAG,EAAGwM,EAAG,GAE/B,SAASm1B,GAAS/+B,EAAG2M,EAAGrB,GAIvB,OAFKA,EAAI,IAAIA,GAAK,GACbA,EAAI,IAAIA,GAAK,GACbA,EAAI,EAAI,EAAWtL,EAAgB,GAAV2M,EAAI3M,GAAUsL,EACvCA,EAAI,GAAeqB,EACnBrB,EAAI,EAAI,EAAWtL,EAAgB,GAAV2M,EAAI3M,IAAY,EAAI,EAAIsL,GAC/CtL,EAIR,SAASg/B,GAAclyB,GAEtB,OAASA,EAAI,OAAgB,YAAJA,EAAmBjQ,KAAKkL,IAAS,YAAJ+E,EAAmB,YAAc,KAIxF,SAASmyB,GAAcnyB,GAEtB,OAASA,EAAI,SAAkB,MAAJA,EAAY,MAAUjQ,KAAKkL,IAAK+E,EAAG,QAAc,KAI7E,MAAMoyB,GAEL9gC,YAAa0U,EAAGd,EAAGnF,GAIlB,OAFArO,OAAO2C,eAAgB3B,KAAM,UAAW,CAAEnB,OAAO,SAEtC8B,IAAN6R,QAAyB7R,IAAN0M,EAGhBrN,KAAKa,IAAKyS,GAIXtT,KAAK2/B,OAAQrsB,EAAGd,EAAGnF,GAI3BzO,IAAKC,GAgBJ,OAdKA,GAASA,EAAM+gC,QAEnB5/B,KAAKyW,KAAM5X,GAEiB,iBAAVA,EAElBmB,KAAK6/B,OAAQhhC,GAEe,iBAAVA,GAElBmB,KAAK8/B,SAAUjhC,GAITmB,KAIRpB,UAAWyP,GAMV,OAJArO,KAAKsT,EAAIjF,EACTrO,KAAKwS,EAAInE,EACTrO,KAAKqN,EAAIgB,EAEFrO,KAIRpB,OAAQmhC,GAQP,OANAA,EAAM1iC,KAAKqL,MAAOq3B,GAElB//B,KAAKsT,GAAMysB,GAAO,GAAK,KAAQ,IAC/B//B,KAAKwS,GAAMutB,GAAO,EAAI,KAAQ,IAC9B//B,KAAKqN,GAAY,IAAN0yB,GAAc,IAElB//B,KAIRpB,OAAQ0U,EAAGd,EAAGnF,GAMb,OAJArN,KAAKsT,EAAIA,EACTtT,KAAKwS,EAAIA,EACTxS,KAAKqN,EAAIA,EAEFrN,KAIRpB,OAAQ6T,EAAG7U,EAAGwM,GAOb,GAJAqI,EAAIlI,EAAUa,gBAAiBqH,EAAG,GAClC7U,EAAI2M,EAAUU,MAAOrN,EAAG,EAAG,GAC3BwM,EAAIG,EAAUU,MAAOb,EAAG,EAAG,GAEhB,IAANxM,EAEJoC,KAAKsT,EAAItT,KAAKwS,EAAIxS,KAAKqN,EAAIjD,MAErB,CAEN,MAAM5J,EAAI4J,GAAK,GAAMA,GAAM,EAAIxM,GAAMwM,EAAIxM,EAAMwM,EAAIxM,EAC7CuP,EAAM,EAAI/C,EAAM5J,EAEtBR,KAAKsT,EAAIisB,GAASpyB,EAAG3M,EAAGiS,EAAI,EAAI,GAChCzS,KAAKwS,EAAI+sB,GAASpyB,EAAG3M,EAAGiS,GACxBzS,KAAKqN,EAAIkyB,GAASpyB,EAAG3M,EAAGiS,EAAI,EAAI,GAIjC,OAAOzS,KAIRpB,SAAUohC,GAET,SAASC,EAAaC,QAELv/B,IAAXu/B,GAEAC,WAAYD,GAAW,GAE3B5hC,QAAQC,KAAM,mCAAqCyhC,EAAQ,qBAO7D,IAAI10B,EAEJ,GAAKA,EAAI,kCAAkC80B,KAAMJ,GAAU,CAI1D,IAAIK,EACJ,MAAMl/B,EAAOmK,EAAG,GACVg1B,EAAah1B,EAAG,GAEtB,OAASnK,GAER,IAAK,MACL,IAAK,OAEJ,GAAKk/B,EAAQ,gEAAgED,KAAME,GASlF,OANAtgC,KAAKsT,EAAIjW,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IACvDrgC,KAAKwS,EAAInV,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IACvDrgC,KAAKqN,EAAIhQ,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IAEvDJ,EAAaI,EAAO,IAEbrgC,KAIR,GAAKqgC,EAAQ,sEAAsED,KAAME,GASxF,OANAtgC,KAAKsT,EAAIjW,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IACvDrgC,KAAKwS,EAAInV,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IACvDrgC,KAAKqN,EAAIhQ,KAAK6N,IAAK,IAAKq1B,SAAUF,EAAO,GAAK,KAAS,IAEvDJ,EAAaI,EAAO,IAEbrgC,KAIR,MAED,IAAK,MACL,IAAK,OAEJ,GAAKqgC,EAAQ,gFAAgFD,KAAME,GAAe,CAGjH,MAAM7tB,EAAI0tB,WAAYE,EAAO,IAAQ,IAC/BziC,EAAI2iC,SAAUF,EAAO,GAAK,IAAO,IACjCj2B,EAAIm2B,SAAUF,EAAO,GAAK,IAAO,IAIvC,OAFAJ,EAAaI,EAAO,IAEbrgC,KAAKwgC,OAAQ/tB,EAAG7U,EAAGwM,UAQvB,GAAKkB,EAAI,qBAAqB80B,KAAMJ,GAAU,CAIpD,MAAMD,EAAMz0B,EAAG,GACTpG,EAAO66B,EAAI12B,OAEjB,GAAc,IAATnE,EAOJ,OAJAlF,KAAKsT,EAAIitB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAC7DzgC,KAAKwS,EAAI+tB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAC7DzgC,KAAKqN,EAAIkzB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAEtDzgC,KAED,GAAc,IAATkF,EAOX,OAJAlF,KAAKsT,EAAIitB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAC7DzgC,KAAKwS,EAAI+tB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAC7DzgC,KAAKqN,EAAIkzB,SAAUR,EAAIU,OAAQ,GAAMV,EAAIU,OAAQ,GAAK,IAAO,IAEtDzgC,KAMT,OAAKggC,GAASA,EAAM32B,OAAS,EAErBrJ,KAAK0gC,aAAcV,GAIpBhgC,KAIRpB,aAAcohC,GAGb,MAAMD,EAAM/J,GAAgBgK,GAc5B,YAZar/B,IAARo/B,EAGJ//B,KAAK6/B,OAAQE,GAKbzhC,QAAQC,KAAM,8BAAgCyhC,GAIxChgC,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,YAAalD,KAAKsT,EAAGtT,KAAKwS,EAAGxS,KAAKqN,GAInDzO,KAAMyhC,GAML,OAJArgC,KAAKsT,EAAI+sB,EAAM/sB,EACftT,KAAKwS,EAAI6tB,EAAM7tB,EACfxS,KAAKqN,EAAIgzB,EAAMhzB,EAERrN,KAIRpB,kBAAmByhC,EAAOM,GAQzB,YANqBhgC,IAAhBggC,IAA4BA,EAAc,GAE/C3gC,KAAKsT,EAAIjW,KAAKkL,IAAK83B,EAAM/sB,EAAGqtB,GAC5B3gC,KAAKwS,EAAInV,KAAKkL,IAAK83B,EAAM7tB,EAAGmuB,GAC5B3gC,KAAKqN,EAAIhQ,KAAKkL,IAAK83B,EAAMhzB,EAAGszB,GAErB3gC,KAIRpB,kBAAmByhC,EAAOM,QAEJhgC,IAAhBggC,IAA4BA,EAAc,GAE/C,MAAMC,EAAgBD,EAAc,EAAQ,EAAMA,EAAgB,EAMlE,OAJA3gC,KAAKsT,EAAIjW,KAAKkL,IAAK83B,EAAM/sB,EAAGstB,GAC5B5gC,KAAKwS,EAAInV,KAAKkL,IAAK83B,EAAM7tB,EAAGouB,GAC5B5gC,KAAKqN,EAAIhQ,KAAKkL,IAAK83B,EAAMhzB,EAAGuzB,GAErB5gC,KAIRpB,qBAAsB+hC,GAIrB,OAFA3gC,KAAK6gC,kBAAmB7gC,KAAM2gC,GAEvB3gC,KAIRpB,qBAAsB+hC,GAIrB,OAFA3gC,KAAK8gC,kBAAmB9gC,KAAM2gC,GAEvB3gC,KAIRpB,iBAAkByhC,GAMjB,OAJArgC,KAAKsT,EAAIksB,GAAca,EAAM/sB,GAC7BtT,KAAKwS,EAAIgtB,GAAca,EAAM7tB,GAC7BxS,KAAKqN,EAAImyB,GAAca,EAAMhzB,GAEtBrN,KAIRpB,iBAAkByhC,GAMjB,OAJArgC,KAAKsT,EAAImsB,GAAcY,EAAM/sB,GAC7BtT,KAAKwS,EAAIitB,GAAcY,EAAM7tB,GAC7BxS,KAAKqN,EAAIoyB,GAAcY,EAAMhzB,GAEtBrN,KAIRpB,sBAIC,OAFAoB,KAAK+gC,iBAAkB/gC,MAEhBA,KAIRpB,sBAIC,OAFAoB,KAAKghC,iBAAkBhhC,MAEhBA,KAIRpB,SAEC,OAAkB,IAAToB,KAAKsT,GAAa,GAAgB,IAATtT,KAAKwS,GAAa,EAAe,IAATxS,KAAKqN,GAAa,EAI7EzO,eAEC,OAAS,SAAWoB,KAAKihC,SAASn4B,SAAU,KAAOvL,OAAS,GAI7DqB,OAAQoK,QAISrI,IAAXqI,IAEJ1K,QAAQC,KAAM,iDACdyK,EAAS,CAAEyJ,EAAG,EAAG7U,EAAG,EAAGwM,EAAG,IAI3B,MAAMkJ,EAAItT,KAAKsT,EAAGd,EAAIxS,KAAKwS,EAAGnF,EAAIrN,KAAKqN,EAEjClC,EAAM9N,KAAK8N,IAAKmI,EAAGd,EAAGnF,GACtBnC,EAAM7N,KAAK6N,IAAKoI,EAAGd,EAAGnF,GAE5B,IAAI6zB,EAAKC,EACT,MAAMC,GAAcl2B,EAAMC,GAAQ,EAElC,GAAKD,IAAQC,EAEZ+1B,EAAM,EACNC,EAAa,MAEP,CAEN,MAAMtO,EAAQ1nB,EAAMD,EAIpB,OAFAi2B,EAAaC,GAAa,GAAMvO,GAAU1nB,EAAMD,GAAQ2nB,GAAU,EAAI1nB,EAAMD,GAEnEC,GAER,KAAKmI,EAAG4tB,GAAQ1uB,EAAInF,GAAMwlB,GAAUrgB,EAAInF,EAAI,EAAI,GAAK,MACrD,KAAKmF,EAAG0uB,GAAQ7zB,EAAIiG,GAAMuf,EAAQ,EAAG,MACrC,KAAKxlB,EAAG6zB,GAAQ5tB,EAAId,GAAMqgB,EAAQ,EAInCqO,GAAO,EAQR,OAJAl4B,EAAOyJ,EAAIyuB,EACXl4B,EAAOpL,EAAIujC,EACXn4B,EAAOoB,EAAIg3B,EAEJp4B,EAIRpK,WAEC,MAAO,QAAsB,IAAToB,KAAKsT,EAAY,GAAM,KAAmB,IAATtT,KAAKwS,EAAY,GAAM,KAAmB,IAATxS,KAAKqN,EAAY,GAAM,IAI9GzO,UAAW6T,EAAG7U,EAAGwM,GAQhB,OANApK,KAAKqhC,OAAQhC,IAEbA,GAAM5sB,GAAKA,EAAG4sB,GAAMzhC,GAAKA,EAAGyhC,GAAMj1B,GAAKA,EAEvCpK,KAAKwgC,OAAQnB,GAAM5sB,EAAG4sB,GAAMzhC,EAAGyhC,GAAMj1B,GAE9BpK,KAIRpB,IAAKyhC,GAMJ,OAJArgC,KAAKsT,GAAK+sB,EAAM/sB,EAChBtT,KAAKwS,GAAK6tB,EAAM7tB,EAChBxS,KAAKqN,GAAKgzB,EAAMhzB,EAETrN,KAIRpB,UAAW0iC,EAAQC,GAMlB,OAJAvhC,KAAKsT,EAAIguB,EAAOhuB,EAAIiuB,EAAOjuB,EAC3BtT,KAAKwS,EAAI8uB,EAAO9uB,EAAI+uB,EAAO/uB,EAC3BxS,KAAKqN,EAAIi0B,EAAOj0B,EAAIk0B,EAAOl0B,EAEpBrN,KAIRpB,UAAWhB,GAMV,OAJAoC,KAAKsT,GAAK1V,EACVoC,KAAKwS,GAAK5U,EACVoC,KAAKqN,GAAKzP,EAEHoC,KAIRpB,IAAKyhC,GAMJ,OAJArgC,KAAKsT,EAAIjW,KAAK8N,IAAK,EAAGnL,KAAKsT,EAAI+sB,EAAM/sB,GACrCtT,KAAKwS,EAAInV,KAAK8N,IAAK,EAAGnL,KAAKwS,EAAI6tB,EAAM7tB,GACrCxS,KAAKqN,EAAIhQ,KAAK8N,IAAK,EAAGnL,KAAKqN,EAAIgzB,EAAMhzB,GAE9BrN,KAIRpB,SAAUyhC,GAMT,OAJArgC,KAAKsT,GAAK+sB,EAAM/sB,EAChBtT,KAAKwS,GAAK6tB,EAAM7tB,EAChBxS,KAAKqN,GAAKgzB,EAAMhzB,EAETrN,KAIRpB,eAAgBhB,GAMf,OAJAoC,KAAKsT,GAAK1V,EACVoC,KAAKwS,GAAK5U,EACVoC,KAAKqN,GAAKzP,EAEHoC,KAIRpB,KAAMyhC,EAAO9wB,GAMZ,OAJAvP,KAAKsT,IAAO+sB,EAAM/sB,EAAItT,KAAKsT,GAAM/D,EACjCvP,KAAKwS,IAAO6tB,EAAM7tB,EAAIxS,KAAKwS,GAAMjD,EACjCvP,KAAKqN,IAAOgzB,EAAMhzB,EAAIrN,KAAKqN,GAAMkC,EAE1BvP,KAIRpB,QAASyhC,EAAO9wB,GAEfvP,KAAKqhC,OAAQhC,IACbgB,EAAMgB,OAAQ/B,IAEd,MAAM7sB,EAAIlI,EAAUqB,KAAMyzB,GAAM5sB,EAAG6sB,GAAM7sB,EAAGlD,GACtC3R,EAAI2M,EAAUqB,KAAMyzB,GAAMzhC,EAAG0hC,GAAM1hC,EAAG2R,GACtCnF,EAAIG,EAAUqB,KAAMyzB,GAAMj1B,EAAGk1B,GAAMl1B,EAAGmF,GAI5C,OAFAvP,KAAKwgC,OAAQ/tB,EAAG7U,EAAGwM,GAEZpK,KAIRpB,OAAQ0O,GAEP,OAASA,EAAEgG,IAAMtT,KAAKsT,GAAShG,EAAEkF,IAAMxS,KAAKwS,GAASlF,EAAED,IAAMrN,KAAKqN,EAInEzO,UAAWsL,EAAOwF,GAQjB,YANgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAKsT,EAAIpJ,EAAOwF,GAChB1P,KAAKwS,EAAItI,EAAOwF,EAAS,GACzB1P,KAAKqN,EAAInD,EAAOwF,EAAS,GAElB1P,KAIRpB,QAASsL,EAAOwF,GASf,YAPe/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErCxF,EAAOwF,GAAW1P,KAAKsT,EACvBpJ,EAAOwF,EAAS,GAAM1P,KAAKwS,EAC3BtI,EAAOwF,EAAS,GAAM1P,KAAKqN,EAEpBnD,EAIRtL,oBAAqBa,EAAW0J,GAgB/B,OAdAnJ,KAAKsT,EAAI7T,EAAUkQ,KAAMxG,GACzBnJ,KAAKwS,EAAI/S,EAAUmQ,KAAMzG,GACzBnJ,KAAKqN,EAAI5N,EAAUmZ,KAAMzP,IAEK,IAAzB1J,EAAU+hC,aAIdxhC,KAAKsT,GAAK,IACVtT,KAAKwS,GAAK,IACVxS,KAAKqN,GAAK,KAIJrN,KAIRpB,SAEC,OAAOoB,KAAKihC,UAMdvB,GAAM+B,MAAQzL,GACd0J,GAAMp+B,UAAUgS,EAAI,EACpBosB,GAAMp+B,UAAUkR,EAAI,EACpBktB,GAAMp+B,UAAU+L,EAAI,EAEpB,MAAMq0B,GAEL9iC,YAAawO,EAAGC,EAAGC,EAAGmS,EAAQ4gB,EAAOsB,GAEpC3hC,KAAKoN,EAAIA,EACTpN,KAAKqN,EAAIA,EACTrN,KAAKsN,EAAIA,EAETtN,KAAKyf,OAAWA,GAAUA,EAAOsK,UAActK,EAAS,IAAIjC,EAC5Dxd,KAAK4hC,cAAgB3iC,MAAMkY,QAASsI,GAAWA,EAAS,GAExDzf,KAAKqgC,MAAUA,GAASA,EAAMT,QAAYS,EAAQ,IAAIX,GACtD1/B,KAAK6hC,aAAe5iC,MAAMkY,QAASkpB,GAAUA,EAAQ,GAErDrgC,KAAK2hC,mBAAkChhC,IAAlBghC,EAA8BA,EAAgB,EAIpE/iC,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAM0K,GAELtJ,KAAKoN,EAAI9D,EAAO8D,EAChBpN,KAAKqN,EAAI/D,EAAO+D,EAChBrN,KAAKsN,EAAIhE,EAAOgE,EAEhBtN,KAAKyf,OAAOhJ,KAAMnN,EAAOmW,QACzBzf,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAK2hC,cAAgBr4B,EAAOq4B,cAE5B,IAAM,IAAIx3B,EAAI,EAAG0W,EAAKvX,EAAOs4B,cAAcv4B,OAAQc,EAAI0W,EAAI1W,IAE1DnK,KAAK4hC,cAAez3B,GAAMb,EAAOs4B,cAAez3B,GAAIqM,QAIrD,IAAM,IAAIrM,EAAI,EAAG0W,EAAKvX,EAAOu4B,aAAax4B,OAAQc,EAAI0W,EAAI1W,IAEzDnK,KAAK6hC,aAAc13B,GAAMb,EAAOu4B,aAAc13B,GAAIqM,QAInD,OAAOxW,MAMT,IAAI8hC,GAAa,EAEjB,SAASC,KAER/iC,OAAO2C,eAAgB3B,KAAM,KAAM,CAAEnB,MAAOijC,OAE5C9hC,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKmB,KAAO,GACZnB,KAAKlB,KAAO,WAEZkB,KAAKgiC,KAAM,EAEXhiC,KAAKiiC,SA9oQiB,EA+oQtBjiC,KAAKkiC,KAppQY,EAqpQjBliC,KAAKmiC,aAAc,EACnBniC,KAAK6hC,cAAe,EAEpB7hC,KAAKoiC,QAAU,EACfpiC,KAAKqiC,aAAc,EAEnBriC,KAAKsiC,SAxoQiB,IAyoQtBtiC,KAAKuiC,SAxoQyB,IAyoQ9BviC,KAAKwiC,cAnpQc,IAopQnBxiC,KAAKyiC,cAAgB,KACrBziC,KAAK0iC,cAAgB,KACrB1iC,KAAK2iC,mBAAqB,KAE1B3iC,KAAK4iC,UAroQiB,EAsoQtB5iC,KAAK6iC,WAAY,EACjB7iC,KAAK8iC,YAAa,EAElB9iC,KAAK+iC,iBAAmB,IACxB/iC,KAAKgjC,YA7gQoB,IA8gQzBhjC,KAAKijC,WAAa,EAClBjjC,KAAKkjC,gBAAkB,IACvBljC,KAAKmjC,YAjhQgB,KAkhQrBnjC,KAAKojC,aAlhQgB,KAmhQrBpjC,KAAKqjC,aAnhQgB,KAohQrBrjC,KAAKsjC,cAAe,EAEpBtjC,KAAKujC,eAAiB,KACtBvjC,KAAKwjC,kBAAmB,EACxBxjC,KAAKyjC,aAAc,EAEnBzjC,KAAK0jC,WAAa,KAElB1jC,KAAK2jC,YAAa,EAElB3jC,KAAK4jC,UAAY,KAEjB5jC,KAAK6jC,eAAgB,EACrB7jC,KAAK8jC,oBAAsB,EAC3B9jC,KAAK+jC,mBAAqB,EAE1B/jC,KAAKgkC,WAAY,EAEjBhkC,KAAKikC,UAAY,EACjBjkC,KAAKkkC,oBAAqB,EAE1BlkC,KAAK4tB,SAAU,EAEf5tB,KAAKmkC,YAAa,EAElBnkC,KAAKiuB,SAAW,GAEhBjuB,KAAKkW,QAAU,EA0ZhB,SAASkuB,GAAmBzS,GAE3BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,oBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKqkC,IAAM,KAEXrkC,KAAKskC,SAAW,KAChBtkC,KAAKukC,kBAAoB,EAEzBvkC,KAAKwkC,MAAQ,KACbxkC,KAAKykC,eAAiB,EAEtBzkC,KAAK0kC,YAAc,KAEnB1kC,KAAK2kC,SAAW,KAEhB3kC,KAAK4kC,OAAS,KACd5kC,KAAK6kC,QArlRoB,EAslRzB7kC,KAAK8kC,aAAe,EACpB9kC,KAAK+kC,gBAAkB,IAEvB/kC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAC1BjlC,KAAKklC,iBAAmB,QACxBllC,KAAKmlC,kBAAoB,QAEzBnlC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EAEpBrlC,KAAKslC,UAAW3T,GAvbjBoQ,GAASzgC,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAE/E4B,YAAa6+B,GAEbwD,YAAY,EAEZC,gBAAiB,aAEjBC,sBAAuB,WAEtB,OAAOzlC,KAAKwlC,gBAAgB18B,YAI7Bw8B,UAAW,SAAWrT,GAErB,QAAgBtxB,IAAXsxB,EAEL,IAAM,MAAM1wB,KAAO0wB,EAAS,CAE3B,MAAMyT,EAAWzT,EAAQ1wB,GAEzB,QAAkBZ,IAAb+kC,EAAyB,CAE7BpnC,QAAQC,KAAM,oBAAsBgD,EAAM,6BAC1C,SAKD,GAAa,YAARA,EAAoB,CAExBjD,QAAQC,KAAM,SAAWyB,KAAKlB,KAAO,sEACrCkB,KAAKmiC,YA1uQW,IA0uQKuD,EACrB,SAID,MAAMC,EAAe3lC,KAAMuB,QAELZ,IAAjBglC,EAOAA,GAAgBA,EAAa/F,QAEjC+F,EAAa9kC,IAAK6kC,GAELC,GAAgBA,EAAa5b,WAAiB2b,GAAYA,EAAS3b,UAEhF4b,EAAalvB,KAAMivB,GAInB1lC,KAAMuB,GAAQmkC,EAfdpnC,QAAQC,KAAM,SAAWyB,KAAKlB,KAAO,MAAQyC,EAAM,2CAuBtDmV,OAAQ,SAAWC,GAElB,MAAMivB,OAAoBjlC,IAATgW,GAAsC,iBAATA,EAEzCivB,IAEJjvB,EAAO,CACNE,SAAU,GACVI,OAAQ,KAKV,MAAMib,EAAO,CACZpb,SAAU,CACTZ,QAAS,IACTpX,KAAM,WACNiY,UAAW,oBA+Jb,SAASgb,EAAkBC,GAE1B,MAAMC,EAAS,GAEf,IAAM,MAAM1wB,KAAOywB,EAAQ,CAE1B,MAAME,EAAOF,EAAOzwB,UACb2wB,EAAKpb,SACZmb,EAAO9zB,KAAM+zB,GAId,OAAOD,EAIR,GA1KAC,EAAK3c,KAAOvV,KAAKuV,KACjB2c,EAAKpzB,KAAOkB,KAAKlB,KAEE,KAAdkB,KAAKmB,OAAc+wB,EAAK/wB,KAAOnB,KAAKmB,MAEpCnB,KAAKqgC,OAASrgC,KAAKqgC,MAAMT,UAAU1N,EAAKmO,MAAQrgC,KAAKqgC,MAAMY,eAExCtgC,IAAnBX,KAAK6lC,YAA0B3T,EAAK2T,UAAY7lC,KAAK6lC,gBAClCllC,IAAnBX,KAAK8lC,YAA0B5T,EAAK4T,UAAY9lC,KAAK8lC,WAErD9lC,KAAK+lC,OAAS/lC,KAAK+lC,MAAMnG,UAAU1N,EAAK6T,MAAQ/lC,KAAK+lC,MAAM9E,UAC3DjhC,KAAKgmC,UAAYhmC,KAAKgmC,SAASpG,UAAU1N,EAAK8T,SAAWhmC,KAAKgmC,SAAS/E,UACvEjhC,KAAKimC,mBAAgD,IAA3BjmC,KAAKimC,oBAA0B/T,EAAK+T,kBAAoBjmC,KAAKimC,mBAEvFjmC,KAAKkmC,UAAYlmC,KAAKkmC,SAAStG,UAAU1N,EAAKgU,SAAWlmC,KAAKkmC,SAASjF,eACpDtgC,IAAnBX,KAAKmmC,YAA0BjU,EAAKiU,UAAYnmC,KAAKmmC,gBAClCxlC,IAAnBX,KAAKomC,YAA0BlU,EAAKkU,UAAYpmC,KAAKomC,gBACzBzlC,IAA5BX,KAAKqmC,qBAAmCnU,EAAKmU,mBAAqBrmC,KAAKqmC,oBAEvErmC,KAAKsmC,cAAgBtmC,KAAKsmC,aAAajwB,YAE3C6b,EAAKoU,aAAetmC,KAAKsmC,aAAa5vB,OAAQC,GAAOpB,MAIjDvV,KAAKumC,uBAAyBvmC,KAAKumC,sBAAsBlwB,YAE7D6b,EAAKqU,sBAAwBvmC,KAAKumC,sBAAsB7vB,OAAQC,GAAOpB,MAInEvV,KAAKwmC,oBAAsBxmC,KAAKwmC,mBAAmBnwB,YAEvD6b,EAAKsU,mBAAqBxmC,KAAKwmC,mBAAmB9vB,OAAQC,GAAOpB,KACjE2c,EAAKuU,qBAAuBzmC,KAAKymC,qBAAqBpV,WAIlDrxB,KAAKqkC,KAAOrkC,KAAKqkC,IAAIhuB,YAAY6b,EAAKmS,IAAMrkC,KAAKqkC,IAAI3tB,OAAQC,GAAOpB,MACpEvV,KAAK0mC,QAAU1mC,KAAK0mC,OAAOrwB,YAAY6b,EAAKwU,OAAS1mC,KAAK0mC,OAAOhwB,OAAQC,GAAOpB,MAChFvV,KAAK2kC,UAAY3kC,KAAK2kC,SAAStuB,YAAY6b,EAAKyS,SAAW3kC,KAAK2kC,SAASjuB,OAAQC,GAAOpB,MACxFvV,KAAKskC,UAAYtkC,KAAKskC,SAASjuB,YAAY6b,EAAKoS,SAAWtkC,KAAKskC,SAAS5tB,OAAQC,GAAOpB,MAExFvV,KAAKwkC,OAASxkC,KAAKwkC,MAAMnuB,YAE7B6b,EAAKsS,MAAQxkC,KAAKwkC,MAAM9tB,OAAQC,GAAOpB,KACvC2c,EAAKuS,eAAiBzkC,KAAKykC,gBAIvBzkC,KAAK2mC,SAAW3mC,KAAK2mC,QAAQtwB,YAEjC6b,EAAKyU,QAAU3mC,KAAK2mC,QAAQjwB,OAAQC,GAAOpB,KAC3C2c,EAAK0U,UAAY5mC,KAAK4mC,WAIlB5mC,KAAK6mC,WAAa7mC,KAAK6mC,UAAUxwB,YAErC6b,EAAK2U,UAAY7mC,KAAK6mC,UAAUnwB,OAAQC,GAAOpB,KAC/C2c,EAAK4U,cAAgB9mC,KAAK8mC,cAC1B5U,EAAK6U,YAAc/mC,KAAK+mC,YAAY1V,WAIhCrxB,KAAKgnC,iBAAmBhnC,KAAKgnC,gBAAgB3wB,YAEjD6b,EAAK8U,gBAAkBhnC,KAAKgnC,gBAAgBtwB,OAAQC,GAAOpB,KAC3D2c,EAAK+U,kBAAoBjnC,KAAKinC,kBAC9B/U,EAAKgV,iBAAmBlnC,KAAKknC,kBAIzBlnC,KAAKmnC,cAAgBnnC,KAAKmnC,aAAa9wB,YAAY6b,EAAKiV,aAAennC,KAAKmnC,aAAazwB,OAAQC,GAAOpB,MACxGvV,KAAKonC,cAAgBpnC,KAAKonC,aAAa/wB,YAAY6b,EAAKkV,aAAepnC,KAAKonC,aAAa1wB,OAAQC,GAAOpB,MAExGvV,KAAKqnC,aAAernC,KAAKqnC,YAAYhxB,YAAY6b,EAAKmV,YAAcrnC,KAAKqnC,YAAY3wB,OAAQC,GAAOpB,MACpGvV,KAAK0kC,aAAe1kC,KAAK0kC,YAAYruB,YAAY6b,EAAKwS,YAAc1kC,KAAK0kC,YAAYhuB,OAAQC,GAAOpB,MAEpGvV,KAAK4kC,QAAU5kC,KAAK4kC,OAAOvuB,YAE/B6b,EAAK0S,OAAS5kC,KAAK4kC,OAAOluB,OAAQC,GAAOpB,KACzC2c,EAAK4S,aAAe9kC,KAAK8kC,aACzB5S,EAAK6S,gBAAkB/kC,KAAK+kC,qBAENpkC,IAAjBX,KAAK6kC,UAAwB3S,EAAK2S,QAAU7kC,KAAK6kC,cACxBlkC,IAAzBX,KAAKsnC,kBAAgCpV,EAAKoV,gBAAkBtnC,KAAKsnC,kBAIlEtnC,KAAKunC,aAAevnC,KAAKunC,YAAYlxB,YAEzC6b,EAAKqV,YAAcvnC,KAAKunC,YAAY7wB,OAAQC,GAAOpB,WAIjC5U,IAAdX,KAAKkF,OAAqBgtB,EAAKhtB,KAAOlF,KAAKkF,WAClBvE,IAAzBX,KAAKwnC,kBAAgCtV,EAAKsV,gBAAkBxnC,KAAKwnC,iBA/3QjD,IAi4QhBxnC,KAAKiiC,WAA8B/P,EAAK+P,SAAWjiC,KAAKiiC,WACnC,IAArBjiC,KAAKmiC,cAAuBjQ,EAAKiQ,YAAcniC,KAAKmiC,aAv4QzC,IAw4QXniC,KAAKkiC,OAAqBhQ,EAAKgQ,KAAOliC,KAAKkiC,MAC3CliC,KAAK6hC,eAAe3P,EAAK2P,cAAe,GAExC7hC,KAAKoiC,QAAU,IAAIlQ,EAAKkQ,QAAUpiC,KAAKoiC,UAClB,IAArBpiC,KAAKqiC,cAAuBnQ,EAAKmQ,YAAcriC,KAAKqiC,aAEzDnQ,EAAK0Q,UAAY5iC,KAAK4iC,UACtB1Q,EAAK2Q,UAAY7iC,KAAK6iC,UACtB3Q,EAAK4Q,WAAa9iC,KAAK8iC,WAEvB5Q,EAAKoR,aAAetjC,KAAKsjC,aACzBpR,EAAK6Q,iBAAmB/iC,KAAK+iC,iBAC7B7Q,EAAK8Q,YAAchjC,KAAKgjC,YACxB9Q,EAAK+Q,WAAajjC,KAAKijC,WACvB/Q,EAAKgR,gBAAkBljC,KAAKkjC,gBAC5BhR,EAAKiR,YAAcnjC,KAAKmjC,YACxBjR,EAAKkR,aAAepjC,KAAKojC,aACzBlR,EAAKmR,aAAerjC,KAAKqjC,aAGpBrjC,KAAK2T,UAA8B,IAAlB3T,KAAK2T,WAAiBue,EAAKve,SAAW3T,KAAK2T,WAErC,IAAvB3T,KAAK6jC,gBAAyB3R,EAAK2R,eAAgB,GACtB,IAA7B7jC,KAAK8jC,sBAA4B5R,EAAK4R,oBAAsB9jC,KAAK8jC,qBACrC,IAA5B9jC,KAAK+jC,qBAA2B7R,EAAK6R,mBAAqB/jC,KAAK+jC,oBAE/D/jC,KAAKynC,WAAgC,IAAnBznC,KAAKynC,YAAkBvV,EAAKuV,UAAYznC,KAAKynC,gBAC7C9mC,IAAlBX,KAAK0nC,WAAyBxV,EAAKwV,SAAW1nC,KAAK0nC,eAClC/mC,IAAjBX,KAAK2nC,UAAwBzV,EAAKyV,QAAU3nC,KAAK2nC,cAClChnC,IAAfX,KAAKqqB,QAAsB6H,EAAK7H,MAAQrqB,KAAKqqB,QAE1B,IAAnBrqB,KAAKgkC,YAAqB9R,EAAK8R,WAAY,GAE3ChkC,KAAKikC,UAAY,IAAI/R,EAAK+R,UAAYjkC,KAAKikC,YACf,IAA5BjkC,KAAKkkC,qBAA8BhS,EAAKgS,mBAAqBlkC,KAAKkkC,qBAE/C,IAAnBlkC,KAAKglC,YAAqB9S,EAAK8S,UAAYhlC,KAAKglC,WAChDhlC,KAAKilC,mBAAqB,IAAI/S,EAAK+S,mBAAqBjlC,KAAKilC,oBACnC,UAA1BjlC,KAAKklC,mBAA+BhT,EAAKgT,iBAAmBllC,KAAKklC,kBACtC,UAA3BllC,KAAKmlC,oBAAgCjT,EAAKiT,kBAAoBnlC,KAAKmlC,oBAE7C,IAAtBnlC,KAAKqlC,eAAwBnT,EAAKmT,cAAe,IAC3B,IAAtBrlC,KAAK4nC,eAAwB1V,EAAK0V,cAAe,IAC/B,IAAlB5nC,KAAKolC,WAAoBlT,EAAKkT,UAAW,IAExB,IAAjBplC,KAAK4tB,UAAoBsE,EAAKtE,SAAU,IAEpB,IAApB5tB,KAAKmkC,aAAuBjS,EAAKiS,YAAa,GAEV,OAApCjlC,KAAKC,UAAWa,KAAKiuB,YAAsBiE,EAAKjE,SAAWjuB,KAAKiuB,UAoBhE2X,EAAS,CAEb,MAAM/uB,EAAWkb,EAAkBpb,EAAKE,UAClCI,EAAS8a,EAAkBpb,EAAKM,QAEjCJ,EAASxN,OAAS,IAAI6oB,EAAKrb,SAAWA,GACtCI,EAAO5N,OAAS,IAAI6oB,EAAKjb,OAASA,GAIxC,OAAOib,GAIR1b,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrCyW,KAAM,SAAWnN,GAEhBtJ,KAAKmB,KAAOmI,EAAOnI,KAEnBnB,KAAKgiC,IAAM14B,EAAO04B,IAElBhiC,KAAKiiC,SAAW34B,EAAO24B,SACvBjiC,KAAKkiC,KAAO54B,EAAO44B,KACnBliC,KAAKmiC,YAAc74B,EAAO64B,YAC1BniC,KAAK6hC,aAAev4B,EAAOu4B,aAE3B7hC,KAAKoiC,QAAU94B,EAAO84B,QACtBpiC,KAAKqiC,YAAc/4B,EAAO+4B,YAE1BriC,KAAKsiC,SAAWh5B,EAAOg5B,SACvBtiC,KAAKuiC,SAAWj5B,EAAOi5B,SACvBviC,KAAKwiC,cAAgBl5B,EAAOk5B,cAC5BxiC,KAAKyiC,cAAgBn5B,EAAOm5B,cAC5BziC,KAAK0iC,cAAgBp5B,EAAOo5B,cAC5B1iC,KAAK2iC,mBAAqBr5B,EAAOq5B,mBAEjC3iC,KAAK4iC,UAAYt5B,EAAOs5B,UACxB5iC,KAAK6iC,UAAYv5B,EAAOu5B,UACxB7iC,KAAK8iC,WAAax5B,EAAOw5B,WAEzB9iC,KAAK+iC,iBAAmBz5B,EAAOy5B,iBAC/B/iC,KAAKgjC,YAAc15B,EAAO05B,YAC1BhjC,KAAKijC,WAAa35B,EAAO25B,WACzBjjC,KAAKkjC,gBAAkB55B,EAAO45B,gBAC9BljC,KAAKmjC,YAAc75B,EAAO65B,YAC1BnjC,KAAKojC,aAAe95B,EAAO85B,aAC3BpjC,KAAKqjC,aAAe/5B,EAAO+5B,aAC3BrjC,KAAKsjC,aAAeh6B,EAAOg6B,aAE3B,MAAMuE,EAAYv+B,EAAOi6B,eACzB,IAAIuE,EAAY,KAEhB,GAAmB,OAAdD,EAAqB,CAEzB,MAAMx8B,EAAIw8B,EAAUx+B,OACpBy+B,EAAY,IAAI7oC,MAAOoM,GAEvB,IAAM,IAAIlB,EAAI,EAAGA,IAAMkB,IAAMlB,EAE5B29B,EAAW39B,GAAM09B,EAAW19B,GAAIqM,QA+BlC,OAzBAxW,KAAKujC,eAAiBuE,EACtB9nC,KAAKwjC,iBAAmBl6B,EAAOk6B,iBAC/BxjC,KAAKyjC,YAAcn6B,EAAOm6B,YAE1BzjC,KAAK0jC,WAAap6B,EAAOo6B,WAEzB1jC,KAAK2jC,WAAar6B,EAAOq6B,WAEzB3jC,KAAK4jC,UAAYt6B,EAAOs6B,UAExB5jC,KAAK6jC,cAAgBv6B,EAAOu6B,cAC5B7jC,KAAK8jC,oBAAsBx6B,EAAOw6B,oBAClC9jC,KAAK+jC,mBAAqBz6B,EAAOy6B,mBAEjC/jC,KAAKgkC,UAAY16B,EAAO06B,UAExBhkC,KAAKikC,UAAY36B,EAAO26B,UACxBjkC,KAAKkkC,mBAAqB56B,EAAO46B,mBAEjClkC,KAAK4tB,QAAUtkB,EAAOskB,QAEtB5tB,KAAKmkC,WAAa76B,EAAO66B,WAEzBnkC,KAAKiuB,SAAW/uB,KAAKG,MAAOH,KAAKC,UAAWmK,EAAO2kB,WAE5CjuB,MAIRoX,QAAS,WAERpX,KAAKgK,cAAe,CAAElL,KAAM,eAM9BE,OAAO2C,eAAgBogC,GAASzgC,UAAW,cAAe,CAEzDT,IAAK,SAAWhC,IAEA,IAAVA,GAAiBmB,KAAKkW,aA2E7BkuB,GAAkB9iC,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACtD8iC,GAAkB9iC,UAAU4B,YAAckhC,GAE1CA,GAAkB9iC,UAAUymC,qBAAsB,EAElD3D,GAAkB9iC,UAAUmV,KAAO,SAAWnN,GA+B7C,OA7BAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAKskC,SAAWh7B,EAAOg7B,SACvBtkC,KAAKukC,kBAAoBj7B,EAAOi7B,kBAEhCvkC,KAAKwkC,MAAQl7B,EAAOk7B,MACpBxkC,KAAKykC,eAAiBn7B,EAAOm7B,eAE7BzkC,KAAK0kC,YAAcp7B,EAAOo7B,YAE1B1kC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAK4kC,OAASt7B,EAAOs7B,OACrB5kC,KAAK6kC,QAAUv7B,EAAOu7B,QACtB7kC,KAAK8kC,aAAex7B,EAAOw7B,aAC3B9kC,KAAK+kC,gBAAkBz7B,EAAOy7B,gBAE9B/kC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBACjCjlC,KAAKklC,iBAAmB57B,EAAO47B,iBAC/BllC,KAAKmlC,kBAAoB77B,EAAO67B,kBAEhCnlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAEpBrlC,MAIR,MAAMgoC,GAAY,IAAIxqB,EAChByqB,GAAa,IAAI/5B,EAEvB,SAASg6B,GAAiBh+B,EAAOi+B,EAAU3G,GAE1C,GAAKviC,MAAMkY,QAASjN,GAEnB,MAAM,IAAIjB,UAAW,yDAItBjJ,KAAKmB,KAAO,GAEZnB,KAAKkK,MAAQA,EACblK,KAAKmoC,SAAWA,EAChBnoC,KAAK0gB,WAAkB/f,IAAVuJ,EAAsBA,EAAMb,OAAS8+B,EAAW,EAC7DnoC,KAAKwhC,YAA4B,IAAfA,EAElBxhC,KAAKooC,MAriRkB,MAsiRvBpoC,KAAKqoC,YAAc,CAAE34B,OAAQ,EAAGgR,OAAS,GAEzC1gB,KAAKkW,QAAU,EAgYhB,SAASoyB,GAAqBp+B,EAAOi+B,EAAU3G,GAE9C0G,GAAgBviC,KAAM3F,KAAM,IAAIuoC,UAAWr+B,GAASi+B,EAAU3G,GAQ/D,SAASgH,GAAsBt+B,EAAOi+B,EAAU3G,GAE/C0G,GAAgBviC,KAAM3F,KAAM,IAAIyoC,WAAYv+B,GAASi+B,EAAU3G,GAQhE,SAASkH,GAA6Bx+B,EAAOi+B,EAAU3G,GAEtD0G,GAAgBviC,KAAM3F,KAAM,IAAI2oC,kBAAmBz+B,GAASi+B,EAAU3G,GAQvE,SAASoH,GAAsB1+B,EAAOi+B,EAAU3G,GAE/C0G,GAAgBviC,KAAM3F,KAAM,IAAI6oC,WAAY3+B,GAASi+B,EAAU3G,GAQhE,SAASsH,GAAuB5+B,EAAOi+B,EAAU3G,GAEhD0G,GAAgBviC,KAAM3F,KAAM,IAAI+oC,YAAa7+B,GAASi+B,EAAU3G,GAQjE,SAASwH,GAAsB9+B,EAAOi+B,EAAU3G,GAE/C0G,GAAgBviC,KAAM3F,KAAM,IAAIipC,WAAY/+B,GAASi+B,EAAU3G,GAQhE,SAAS0H,GAAuBh/B,EAAOi+B,EAAU3G,GAEhD0G,GAAgBviC,KAAM3F,KAAM,IAAImpC,YAAaj/B,GAASi+B,EAAU3G,GAQjE,SAAS4H,GAAwBl/B,EAAOi+B,EAAU3G,GAEjD0G,GAAgBviC,KAAM3F,KAAM,IAAIqpC,aAAcn/B,GAASi+B,EAAU3G,GAQlE,SAAS8H,GAAwBp/B,EAAOi+B,EAAU3G,GAEjD0G,GAAgBviC,KAAM3F,KAAM,IAAIupC,aAAcr/B,GAASi+B,EAAU3G,GA9clExiC,OAAO2C,eAAgBumC,GAAgB5mC,UAAW,cAAe,CAEhET,IAAK,SAAWhC,IAEA,IAAVA,GAAiBmB,KAAKkW,aAM7BlX,OAAOuG,OAAQ2iC,GAAgB5mC,UAAW,CAEzCkoC,mBAAmB,EAEnBC,iBAAkB,aAElBC,SAAU,SAAW7qC,GAIpB,OAFAmB,KAAKooC,MAAQvpC,EAENmB,MAIRyW,KAAM,SAAWnN,GAUhB,OARAtJ,KAAKmB,KAAOmI,EAAOnI,KACnBnB,KAAKkK,MAAQ,IAAIZ,EAAOY,MAAMhH,YAAaoG,EAAOY,OAClDlK,KAAKmoC,SAAW7+B,EAAO6+B,SACvBnoC,KAAK0gB,MAAQpX,EAAOoX,MACpB1gB,KAAKwhC,WAAal4B,EAAOk4B,WAEzBxhC,KAAKooC,MAAQ9+B,EAAO8+B,MAEbpoC,MAIR2pC,OAAQ,SAAWC,EAAQnqC,EAAWoqC,GAErCD,GAAU5pC,KAAKmoC,SACf0B,GAAUpqC,EAAU0oC,SAEpB,IAAM,IAAIh+B,EAAI,EAAGC,EAAIpK,KAAKmoC,SAAUh+B,EAAIC,EAAGD,IAE1CnK,KAAKkK,MAAO0/B,EAASz/B,GAAM1K,EAAUyK,MAAO2/B,EAAS1/B,GAItD,OAAOnK,MAIR8pC,UAAW,SAAW5/B,GAIrB,OAFAlK,KAAKkK,MAAMrJ,IAAKqJ,GAETlK,MAIR+pC,gBAAiB,SAAWC,GAE3B,MAAM9/B,EAAQlK,KAAKkK,MACnB,IAAIwF,EAAS,EAEb,IAAM,IAAIvF,EAAI,EAAGC,EAAI4/B,EAAO3gC,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,IAAIk2B,EAAQ2J,EAAQ7/B,QAELxJ,IAAV0/B,IAEJ/hC,QAAQC,KAAM,8DAA+D4L,GAC7Ek2B,EAAQ,IAAIX,IAIbx1B,EAAOwF,KAAc2wB,EAAM/sB,EAC3BpJ,EAAOwF,KAAc2wB,EAAM7tB,EAC3BtI,EAAOwF,KAAc2wB,EAAMhzB,EAI5B,OAAOrN,MAIRiqC,kBAAmB,SAAWC,GAE7B,MAAMhgC,EAAQlK,KAAKkK,MACnB,IAAIwF,EAAS,EAEb,IAAM,IAAIvF,EAAI,EAAGC,EAAI8/B,EAAQ7gC,OAAQc,EAAIC,EAAGD,IAAO,CAElD,IAAIoX,EAAS2oB,EAAS//B,QAENxJ,IAAX4gB,IAEJjjB,QAAQC,KAAM,iEAAkE4L,GAChFoX,EAAS,IAAIrT,GAIdhE,EAAOwF,KAAc6R,EAAO3Y,EAC5BsB,EAAOwF,KAAc6R,EAAO1V,EAI7B,OAAO7L,MAIRmqC,kBAAmB,SAAWD,GAE7B,MAAMhgC,EAAQlK,KAAKkK,MACnB,IAAIwF,EAAS,EAEb,IAAM,IAAIvF,EAAI,EAAGC,EAAI8/B,EAAQ7gC,OAAQc,EAAIC,EAAGD,IAAO,CAElD,IAAIoX,EAAS2oB,EAAS//B,QAENxJ,IAAX4gB,IAEJjjB,QAAQC,KAAM,iEAAkE4L,GAChFoX,EAAS,IAAI/D,GAIdtT,EAAOwF,KAAc6R,EAAO3Y,EAC5BsB,EAAOwF,KAAc6R,EAAO1V,EAC5B3B,EAAOwF,KAAc6R,EAAO9J,EAI7B,OAAOzX,MAIRoqC,kBAAmB,SAAWF,GAE7B,MAAMhgC,EAAQlK,KAAKkK,MACnB,IAAIwF,EAAS,EAEb,IAAM,IAAIvF,EAAI,EAAGC,EAAI8/B,EAAQ7gC,OAAQc,EAAIC,EAAGD,IAAO,CAElD,IAAIoX,EAAS2oB,EAAS//B,QAENxJ,IAAX4gB,IAEJjjB,QAAQC,KAAM,iEAAkE4L,GAChFoX,EAAS,IAAI/J,GAIdtN,EAAOwF,KAAc6R,EAAO3Y,EAC5BsB,EAAOwF,KAAc6R,EAAO1V,EAC5B3B,EAAOwF,KAAc6R,EAAO9J,EAC5BvN,EAAOwF,KAAc6R,EAAOhT,EAI7B,OAAOvO,MAIRuX,aAAc,SAAWjM,GAExB,GAAuB,IAAlBtL,KAAKmoC,SAET,IAAM,IAAIh+B,EAAI,EAAGC,EAAIpK,KAAK0gB,MAAOvW,EAAIC,EAAGD,IAEvC89B,GAAWoC,oBAAqBrqC,KAAMmK,GACtC89B,GAAW1wB,aAAcjM,GAEzBtL,KAAKsqC,MAAOngC,EAAG89B,GAAWr/B,EAAGq/B,GAAWp8B,QAInC,GAAuB,IAAlB7L,KAAKmoC,SAEhB,IAAM,IAAIh+B,EAAI,EAAGC,EAAIpK,KAAK0gB,MAAOvW,EAAIC,EAAGD,IAEvC69B,GAAUqC,oBAAqBrqC,KAAMmK,GACrC69B,GAAUzwB,aAAcjM,GAExBtL,KAAKuqC,OAAQpgC,EAAG69B,GAAUp/B,EAAGo/B,GAAUn8B,EAAGm8B,GAAUvwB,GAMtD,OAAOzX,MAIRue,aAAc,SAAWjT,GAExB,IAAM,IAAInB,EAAI,EAAGC,EAAIpK,KAAK0gB,MAAOvW,EAAIC,EAAGD,IAEvC69B,GAAUp/B,EAAI5I,KAAK2P,KAAMxF,GACzB69B,GAAUn8B,EAAI7L,KAAK4P,KAAMzF,GACzB69B,GAAUvwB,EAAIzX,KAAK4Y,KAAMzO,GAEzB69B,GAAUzpB,aAAcjT,GAExBtL,KAAKuqC,OAAQpgC,EAAG69B,GAAUp/B,EAAGo/B,GAAUn8B,EAAGm8B,GAAUvwB,GAIrD,OAAOzX,MAIRwqC,kBAAmB,SAAWl/B,GAE7B,IAAM,IAAInB,EAAI,EAAGC,EAAIpK,KAAK0gB,MAAOvW,EAAIC,EAAGD,IAEvC69B,GAAUp/B,EAAI5I,KAAK2P,KAAMxF,GACzB69B,GAAUn8B,EAAI7L,KAAK4P,KAAMzF,GACzB69B,GAAUvwB,EAAIzX,KAAK4Y,KAAMzO,GAEzB69B,GAAUwC,kBAAmBl/B,GAE7BtL,KAAKuqC,OAAQpgC,EAAG69B,GAAUp/B,EAAGo/B,GAAUn8B,EAAGm8B,GAAUvwB,GAIrD,OAAOzX,MAIRqnB,mBAAoB,SAAW/b,GAE9B,IAAM,IAAInB,EAAI,EAAGC,EAAIpK,KAAK0gB,MAAOvW,EAAIC,EAAGD,IAEvC69B,GAAUp/B,EAAI5I,KAAK2P,KAAMxF,GACzB69B,GAAUn8B,EAAI7L,KAAK4P,KAAMzF,GACzB69B,GAAUvwB,EAAIzX,KAAK4Y,KAAMzO,GAEzB69B,GAAU3gB,mBAAoB/b,GAE9BtL,KAAKuqC,OAAQpgC,EAAG69B,GAAUp/B,EAAGo/B,GAAUn8B,EAAGm8B,GAAUvwB,GAIrD,OAAOzX,MAIRa,IAAK,SAAWhC,EAAO6Q,GAMtB,YAJgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAKkK,MAAMrJ,IAAKhC,EAAO6Q,GAEhB1P,MAIR2P,KAAM,SAAWxG,GAEhB,OAAOnJ,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,WAIjCsC,KAAM,SAAWthC,EAAOP,GAIvB,OAFA5I,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,UAAav/B,EAE/B5I,MAIR4P,KAAM,SAAWzG,GAEhB,OAAOnJ,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,IAI5CuC,KAAM,SAAWvhC,EAAO0C,GAIvB,OAFA7L,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,GAAMt8B,EAEnC7L,MAIR4Y,KAAM,SAAWzP,GAEhB,OAAOnJ,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,IAI5CwC,KAAM,SAAWxhC,EAAOsO,GAIvB,OAFAzX,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,GAAM1wB,EAEnCzX,MAIR6Y,KAAM,SAAW1P,GAEhB,OAAOnJ,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,IAI5CyC,KAAM,SAAWzhC,EAAOoF,GAIvB,OAFAvO,KAAKkK,MAAOf,EAAQnJ,KAAKmoC,SAAW,GAAM55B,EAEnCvO,MAIRsqC,MAAO,SAAWnhC,EAAOP,EAAGiD,GAO3B,OALA1C,GAASnJ,KAAKmoC,SAEdnoC,KAAKkK,MAAOf,EAAQ,GAAMP,EAC1B5I,KAAKkK,MAAOf,EAAQ,GAAM0C,EAEnB7L,MAIRuqC,OAAQ,SAAWphC,EAAOP,EAAGiD,EAAG4L,GAQ/B,OANAtO,GAASnJ,KAAKmoC,SAEdnoC,KAAKkK,MAAOf,EAAQ,GAAMP,EAC1B5I,KAAKkK,MAAOf,EAAQ,GAAM0C,EAC1B7L,KAAKkK,MAAOf,EAAQ,GAAMsO,EAEnBzX,MAIR6qC,QAAS,SAAW1hC,EAAOP,EAAGiD,EAAG4L,EAAGlJ,GASnC,OAPApF,GAASnJ,KAAKmoC,SAEdnoC,KAAKkK,MAAOf,EAAQ,GAAMP,EAC1B5I,KAAKkK,MAAOf,EAAQ,GAAM0C,EAC1B7L,KAAKkK,MAAOf,EAAQ,GAAMsO,EAC1BzX,KAAKkK,MAAOf,EAAQ,GAAMoF,EAEnBvO,MAIR8qC,SAAU,SAAWvtB,GAIpB,OAFAvd,KAAKypC,iBAAmBlsB,EAEjBvd,MAIRwW,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,YAAalD,KAAKkK,MAAOlK,KAAKmoC,UAAW1xB,KAAMzW,OAIhE0W,OAAQ,WAEP,MAAO,CACNyxB,SAAUnoC,KAAKmoC,SACfrpC,KAAMkB,KAAKkK,MAAMhH,YAAY/B,KAC7B+I,MAAOjL,MAAMqC,UAAU/D,MAAMoI,KAAM3F,KAAKkK,OACxCs3B,WAAYxhC,KAAKwhC,eAepB8G,GAAoBhnC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAC/DgnC,GAAoBhnC,UAAU4B,YAAcolC,GAS5CE,GAAqBlnC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAChEknC,GAAqBlnC,UAAU4B,YAAcslC,GAS7CE,GAA4BpnC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WACvEonC,GAA4BpnC,UAAU4B,YAAcwlC,GASpDE,GAAqBtnC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAChEsnC,GAAqBtnC,UAAU4B,YAAc0lC,GAS7CE,GAAsBxnC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WACjEwnC,GAAsBxnC,UAAU4B,YAAc4lC,GAS9CE,GAAqB1nC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAChE0nC,GAAqB1nC,UAAU4B,YAAc8lC,GAS7CE,GAAsB5nC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WACjE4nC,GAAsB5nC,UAAU4B,YAAcgmC,GAS9CE,GAAuB9nC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAClE8nC,GAAuB9nC,UAAU4B,YAAckmC,GAS/CE,GAAuBhoC,UAAYtC,OAAOoX,OAAQ8xB,GAAgB5mC,WAClEgoC,GAAuBhoC,UAAU4B,YAAcomC,GAE/C,MAAMyB,GAELnsC,cAECoB,KAAKgrC,SAAW,GAChBhrC,KAAKirC,QAAU,GACfjrC,KAAKgqC,OAAS,GACdhqC,KAAKkrC,IAAM,GACXlrC,KAAKmrC,KAAO,GAEZnrC,KAAKorC,OAAS,GAEdprC,KAAKqlC,aAAe,GAEpBrlC,KAAKqrC,YAAc,GACnBrrC,KAAKsrC,YAAc,GAInBtrC,KAAK2hB,YAAc,KACnB3hB,KAAKurC,eAAiB,KAItBvrC,KAAKwrC,oBAAqB,EAC1BxrC,KAAKyrC,mBAAoB,EACzBzrC,KAAK0rC,kBAAmB,EACxB1rC,KAAK2rC,eAAgB,EACrB3rC,KAAK4rC,kBAAmB,EAIzBhtC,cAAe8iB,GAEd,MAAM0pB,EAAS,GAEf,IAAIS,EAAO1hC,EACPw3B,OAAgBhhC,EAEpB,MAAMmrC,EAAQpqB,EAASoqB,MAEvB,IAAM3hC,EAAI,EAAGA,EAAI2hC,EAAMziC,OAAQc,IAAO,CAErC,MAAM4hC,EAAOD,EAAO3hC,GAIf4hC,EAAKpK,gBAAkBA,IAE3BA,EAAgBoK,EAAKpK,mBAENhhC,IAAVkrC,IAEJA,EAAMnrB,MAAc,EAAJvW,EAAU0hC,EAAM/Y,MAChCsY,EAAOjtC,KAAM0tC,IAIdA,EAAQ,CACP/Y,MAAW,EAAJ3oB,EACPw3B,cAAeA,SAOHhhC,IAAVkrC,IAEJA,EAAMnrB,MAAc,EAAJvW,EAAU0hC,EAAM/Y,MAChCsY,EAAOjtC,KAAM0tC,IAId7rC,KAAKorC,OAASA,EAIfxsC,aAAc8iB,GAEb,MAAMoqB,EAAQpqB,EAASoqB,MACjBd,EAAWtpB,EAASspB,SACpBgB,EAAgBtqB,EAASsqB,cAEzBC,EAAkBD,EAAe,IAAOA,EAAe,GAAI3iC,OAAS,EACpE6iC,EAAmBF,EAAe,IAAOA,EAAe,GAAI3iC,OAAS,EAIrEg8B,EAAe3jB,EAAS2jB,aACxB8G,EAAqB9G,EAAah8B,OAExC,IAAI+iC,EAEJ,GAAKD,EAAqB,EAAI,CAE7BC,EAAuB,GAEvB,IAAM,IAAIjiC,EAAI,EAAGA,EAAIgiC,EAAoBhiC,IAExCiiC,EAAsBjiC,GAAM,CAC3BhJ,KAAMkkC,EAAcl7B,GAAIhJ,KACvB+wB,KAAM,IAKTlyB,KAAKqlC,aAAajb,SAAWgiB,EAI9B,MAAMxE,EAAelmB,EAASkmB,aACxByE,EAAqBzE,EAAav+B,OAExC,IAAIijC,EAEJ,GAAKD,EAAqB,EAAI,CAE7BC,EAAqB,GAErB,IAAM,IAAIniC,EAAI,EAAGA,EAAIkiC,EAAoBliC,IAExCmiC,EAAoBniC,GAAM,CACzBhJ,KAAMymC,EAAcz9B,GAAIhJ,KACvB+wB,KAAM,IAKTlyB,KAAKqlC,aAAa5lB,OAAS6sB,EAM5B,MAAMhB,EAAc5pB,EAAS4pB,YACvBD,EAAc3pB,EAAS2pB,YAEvBkB,EAAiBjB,EAAYjiC,SAAW2hC,EAAS3hC,OACjDmjC,EAAiBnB,EAAYhiC,SAAW2hC,EAAS3hC,OAIlD2hC,EAAS3hC,OAAS,GAAsB,IAAjByiC,EAAMziC,QAEjC/K,QAAQ0R,MAAO,gEAIhB,IAAM,IAAI7F,EAAI,EAAGA,EAAI2hC,EAAMziC,OAAQc,IAAO,CAEzC,MAAM4hC,EAAOD,EAAO3hC,GAEpBnK,KAAKgrC,SAAS7sC,KAAM6sC,EAAUe,EAAK3+B,GAAK49B,EAAUe,EAAK1+B,GAAK29B,EAAUe,EAAKz+B,IAE3E,MAAMs0B,EAAgBmK,EAAKnK,cAE3B,GAA8B,IAAzBA,EAAcv4B,OAElBrJ,KAAKirC,QAAQ9sC,KAAMyjC,EAAe,GAAKA,EAAe,GAAKA,EAAe,QAEpE,CAEN,MAAMniB,EAASssB,EAAKtsB,OAEpBzf,KAAKirC,QAAQ9sC,KAAMshB,EAAQA,EAAQA,GAIpC,MAAMoiB,EAAekK,EAAKlK,aAE1B,GAA6B,IAAxBA,EAAax4B,OAEjBrJ,KAAKgqC,OAAO7rC,KAAM0jC,EAAc,GAAKA,EAAc,GAAKA,EAAc,QAEhE,CAEN,MAAMxB,EAAQ0L,EAAK1L,MAEnBrgC,KAAKgqC,OAAO7rC,KAAMkiC,EAAOA,EAAOA,GAIjC,IAAyB,IAApB4L,EAA2B,CAE/B,MAAMQ,EAAYT,EAAe,GAAK7hC,QAEnBxJ,IAAd8rC,EAEJzsC,KAAKkrC,IAAI/sC,KAAMsuC,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI1DnuC,QAAQC,KAAM,2DAA4D4L,GAE1EnK,KAAKkrC,IAAI/sC,KAAM,IAAI+P,EAAW,IAAIA,EAAW,IAAIA,IAMnD,IAA0B,IAArBg+B,EAA4B,CAEhC,MAAMO,EAAYT,EAAe,GAAK7hC,QAEnBxJ,IAAd8rC,EAEJzsC,KAAKmrC,KAAKhtC,KAAMsuC,EAAW,GAAKA,EAAW,GAAKA,EAAW,KAI3DnuC,QAAQC,KAAM,4DAA6D4L,GAE3EnK,KAAKmrC,KAAKhtC,KAAM,IAAI+P,EAAW,IAAIA,EAAW,IAAIA,IAQpD,IAAM,IAAIqV,EAAI,EAAGA,EAAI4oB,EAAoB5oB,IAAO,CAE/C,MAAMmpB,EAAcrH,EAAc9hB,GAAIynB,SAEtCoB,EAAsB7oB,GAAI2O,KAAK/zB,KAAMuuC,EAAaX,EAAK3+B,GAAKs/B,EAAaX,EAAK1+B,GAAKq/B,EAAaX,EAAKz+B,IAItG,IAAM,IAAIiW,EAAI,EAAGA,EAAI8oB,EAAoB9oB,IAAO,CAE/C,MAAMopB,EAAc/E,EAAcrkB,GAAIqe,cAAez3B,GAErDmiC,EAAoB/oB,GAAI2O,KAAK/zB,KAAMwuC,EAAYv/B,EAAGu/B,EAAYt/B,EAAGs/B,EAAYr/B,GAMzEi/B,GAEJvsC,KAAKsrC,YAAYntC,KAAMmtC,EAAaS,EAAK3+B,GAAKk+B,EAAaS,EAAK1+B,GAAKi+B,EAAaS,EAAKz+B,IAInFk/B,GAEJxsC,KAAKqrC,YAAYltC,KAAMktC,EAAaU,EAAK3+B,GAAKi+B,EAAaU,EAAK1+B,GAAKg+B,EAAaU,EAAKz+B,IA0BzF,OApBAtN,KAAK4sC,cAAelrB,GAEpB1hB,KAAKwrC,mBAAqB9pB,EAAS8pB,mBACnCxrC,KAAKyrC,kBAAoB/pB,EAAS+pB,kBAClCzrC,KAAK0rC,iBAAmBhqB,EAASgqB,iBACjC1rC,KAAK2rC,cAAgBjqB,EAASiqB,cAC9B3rC,KAAK4rC,iBAAmBlqB,EAASkqB,iBAEA,OAA5BlqB,EAAS6pB,iBAEbvrC,KAAKurC,eAAiB7pB,EAAS6pB,eAAe/0B,SAIjB,OAAzBkL,EAASC,cAEb3hB,KAAK2hB,YAAcD,EAASC,YAAYnL,SAIlCxW,MAMT,SAAS6sC,GAAU3iC,GAElB,GAAsB,IAAjBA,EAAMb,OAAe,OAAS8W,EAAAA,EAEnC,IAAIhV,EAAMjB,EAAO,GAEjB,IAAM,IAAIC,EAAI,EAAGC,EAAIF,EAAMb,OAAQc,EAAIC,IAAMD,EAEvCD,EAAOC,GAAMgB,IAAMA,EAAMjB,EAAOC,IAItC,OAAOgB,EAIR,IAAI2hC,GAAoB,EAExB,MAAMC,GAAQ,IAAIzlB,GACZ5oB,GAAO,IAAIyuB,GACX6f,GAAU,IAAIxvB,EACdyvB,GAAS,IAAI/sB,EACbgtB,GAAmB,IAAIhtB,EACvBitB,GAAY,IAAI3vB,EAEtB,SAAS4vB,KAERpuC,OAAO2C,eAAgB3B,KAAM,KAAM,CAAEnB,MAAOiuC,IAAqB,IAEjE9sC,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKmB,KAAO,GACZnB,KAAKlB,KAAO,iBAEZkB,KAAKmJ,MAAQ,KACbnJ,KAAKI,WAAa,GAElBJ,KAAKqtC,gBAAkB,GACvBrtC,KAAKstC,sBAAuB,EAE5BttC,KAAKorC,OAAS,GAEdprC,KAAK2hB,YAAc,KACnB3hB,KAAKurC,eAAiB,KAEtBvrC,KAAKutC,UAAY,CAAEza,MAAO,EAAGpS,MAAOP,EAAAA,GAEpCngB,KAAKiuB,SAAW,GAIjBmf,GAAe9rC,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAErF4B,YAAakqC,GAEbI,kBAAkB,EAElBC,SAAU,WAET,OAAOztC,KAAKmJ,OAIbukC,SAAU,SAAWvkC,GAEflK,MAAMkY,QAAShO,GAEnBnJ,KAAKmJ,MAAQ,IAAM0jC,GAAU1jC,GAAU,MAAQ+/B,GAAwBJ,IAAyB3/B,EAAO,GAIvGnJ,KAAKmJ,MAAQA,GAMfwkC,aAAc,SAAWxsC,GAExB,OAAOnB,KAAKI,WAAYe,IAIzBwC,aAAc,SAAWxC,EAAM1B,GAI9B,OAFAO,KAAKI,WAAYe,GAAS1B,EAEnBO,MAIR4tC,gBAAiB,SAAWzsC,GAI3B,cAFOnB,KAAKI,WAAYe,GAEjBnB,MAIR6tC,SAAU,SAAW/a,EAAOpS,EAAOihB,GAElC3hC,KAAKorC,OAAOjtC,KAAM,CAEjB20B,MAAOA,EACPpS,MAAOA,EACPihB,mBAAiChhC,IAAlBghC,EAA8BA,EAAgB,KAM/DmM,YAAa,WAEZ9tC,KAAKorC,OAAS,IAIf2C,aAAc,SAAWjb,EAAOpS,GAE/B1gB,KAAKutC,UAAUza,MAAQA,EACvB9yB,KAAKutC,UAAU7sB,MAAQA,GAIxBnC,aAAc,SAAW7L,GAExB,MAAM0X,EAAWpqB,KAAKI,WAAWgqB,cAEfzpB,IAAbypB,IAEJA,EAAS7L,aAAc7L,GAEvB0X,EAAS4jB,aAAc,GAIxB,MAAMvuB,EAASzf,KAAKI,WAAWqf,OAE/B,QAAgB9e,IAAX8e,EAAuB,CAE3B,MAAMgO,GAAe,IAAI1d,GAAUqjB,gBAAiB1gB,GAEpD+M,EAAO+qB,kBAAmB/c,GAE1BhO,EAAOuuB,aAAc,EAItB,MAAMC,EAAUjuC,KAAKI,WAAW6tC,QAsBhC,YApBiBttC,IAAZstC,IAEJA,EAAQ5mB,mBAAoB3U,GAE5Bu7B,EAAQD,aAAc,GAIG,OAArBhuC,KAAK2hB,aAET3hB,KAAK4hB,qBAIuB,OAAxB5hB,KAAKurC,gBAETvrC,KAAKkuC,wBAICluC,MAIR8uB,QAAS,SAAWhf,GAQnB,OAJAi9B,GAAMoB,cAAer+B,GAErB9P,KAAKue,aAAcwuB,IAEZ/sC,MAIR+uB,QAAS,SAAWjf,GAQnB,OAJAi9B,GAAMqB,cAAet+B,GAErB9P,KAAKue,aAAcwuB,IAEZ/sC,MAIRgvB,QAAS,SAAWlf,GAQnB,OAJAi9B,GAAMsB,cAAev+B,GAErB9P,KAAKue,aAAcwuB,IAEZ/sC,MAIRsuC,UAAW,SAAW1lC,EAAGiD,EAAG4L,GAQ3B,OAJAs1B,GAAMwB,gBAAiB3lC,EAAGiD,EAAG4L,GAE7BzX,KAAKue,aAAcwuB,IAEZ/sC,MAIRqqB,MAAO,SAAWzhB,EAAGiD,EAAG4L,GAQvB,OAJAs1B,GAAMyB,UAAW5lC,EAAGiD,EAAG4L,GAEvBzX,KAAKue,aAAcwuB,IAEZ/sC,MAIRwvB,OAAQ,SAAWjO,GAQlB,OANA7iB,GAAK8wB,OAAQjO,GAEb7iB,GAAK4X,eAELtW,KAAKue,aAAc7f,GAAKgU,QAEjB1S,MAIR6P,OAAQ,WAQP,OANA7P,KAAK4hB,qBAEL5hB,KAAK2hB,YAAYU,UAAW2qB,IAAUra,SAEtC3yB,KAAKsuC,UAAWtB,GAAQpkC,EAAGokC,GAAQnhC,EAAGmhC,GAAQv1B,GAEvCzX,MAIRyuC,cAAe,SAAWvtB,GAIzB,MAAMQ,EAAWR,EAAOQ,SAExB,GAAKR,EAAOwQ,UAAYxQ,EAAOuQ,OAAS,CAEvC,MAAMid,EAAY,IAAItF,GAAmD,EAA3B1nB,EAASspB,SAAS3hC,OAAY,GACtE2gC,EAAS,IAAIZ,GAAiD,EAAzB1nB,EAASsoB,OAAO3gC,OAAY,GAKvE,GAHArJ,KAAK2D,aAAc,WAAY+qC,EAAUvE,kBAAmBzoB,EAASspB,WACrEhrC,KAAK2D,aAAc,QAASqmC,EAAOD,gBAAiBroB,EAASsoB,SAExDtoB,EAASitB,eAAiBjtB,EAASitB,cAActlC,SAAWqY,EAASspB,SAAS3hC,OAAS,CAE3F,MAAMslC,EAAgB,IAAIvF,GAAwB1nB,EAASitB,cAActlC,OAAQ,GAEjFrJ,KAAK2D,aAAc,eAAgBgrC,EAAc7E,UAAWpoB,EAASitB,gBAIrC,OAA5BjtB,EAAS6pB,iBAEbvrC,KAAKurC,eAAiB7pB,EAAS6pB,eAAe/0B,SAIjB,OAAzBkL,EAASC,cAEb3hB,KAAK2hB,YAAcD,EAASC,YAAYnL,cAI9B0K,EAAOsQ,QAEb9P,GAAYA,EAASktB,YAEzB5uC,KAAK6uC,aAAcntB,GAMrB,OAAO1hB,MAIRmjB,cAAe,SAAWxC,GAEzB,MAAMyJ,EAAW,GAEjB,IAAM,IAAIjgB,EAAI,EAAGC,EAAIuW,EAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMmX,EAAQX,EAAQxW,GACtBigB,EAASjsB,KAAMmjB,EAAM1Y,EAAG0Y,EAAMzV,EAAGyV,EAAM7J,GAAK,GAM7C,OAFAzX,KAAK2D,aAAc,WAAY,IAAIylC,GAAwBhf,EAAU,IAE9DpqB,MAIR8uC,iBAAkB,SAAW5tB,GAE5B,IAAIQ,EAAWR,EAAOQ,SAEtB,GAAKR,EAAOsQ,OAAS,CAEpB,IAAIud,EAASrtB,EAASstB,iBAStB,IAPqC,IAAhCttB,EAASutB,qBAEbF,OAASpuC,EACT+gB,EAASutB,oBAAqB,QAIftuC,IAAXouC,EAEJ,OAAO/uC,KAAK6uC,aAAcntB,GAI3BqtB,EAAOvD,mBAAqB9pB,EAAS8pB,mBACrCuD,EAAOtD,kBAAoB/pB,EAAS+pB,kBACpCsD,EAAOrD,iBAAmBhqB,EAASgqB,iBACnCqD,EAAOpD,cAAgBjqB,EAASiqB,cAChCoD,EAAOnD,iBAAmBlqB,EAASkqB,iBAEnClqB,EAAS8pB,oBAAqB,EAC9B9pB,EAAS+pB,mBAAoB,EAC7B/pB,EAASgqB,kBAAmB,EAC5BhqB,EAASiqB,eAAgB,EACzBjqB,EAASkqB,kBAAmB,EAE5BlqB,EAAWqtB,EAIZ,IAAqC,IAAhCrtB,EAAS8pB,mBAA8B,CAE3C,MAAM/rC,EAAYO,KAAKI,WAAWgqB,cAEfzpB,IAAdlB,IAEJA,EAAU0qC,kBAAmBzoB,EAASspB,UACtCvrC,EAAUuuC,aAAc,GAIzBtsB,EAAS8pB,oBAAqB,EAI/B,IAAoC,IAA/B9pB,EAAS+pB,kBAA6B,CAE1C,MAAMhsC,EAAYO,KAAKI,WAAWqf,YAEf9e,IAAdlB,IAEJA,EAAU0qC,kBAAmBzoB,EAASupB,SACtCxrC,EAAUuuC,aAAc,GAIzBtsB,EAAS+pB,mBAAoB,EAI9B,IAAmC,IAA9B/pB,EAASgqB,iBAA4B,CAEzC,MAAMjsC,EAAYO,KAAKI,WAAWigC,WAEf1/B,IAAdlB,IAEJA,EAAUsqC,gBAAiBroB,EAASsoB,QACpCvqC,EAAUuuC,aAAc,GAIzBtsB,EAASgqB,kBAAmB,EAI7B,GAAKhqB,EAASiqB,cAAgB,CAE7B,MAAMlsC,EAAYO,KAAKI,WAAWkX,QAEf3W,IAAdlB,IAEJA,EAAUwqC,kBAAmBvoB,EAASwpB,KACtCzrC,EAAUuuC,aAAc,GAIzBtsB,EAASiqB,eAAgB,EAI1B,GAAKjqB,EAASwtB,wBAA0B,CAEvC,MAAMzvC,EAAYO,KAAKI,WAAW+uC,kBAEfxuC,IAAdlB,IAEJA,EAAUqqC,UAAWpoB,EAASitB,eAC9BlvC,EAAUuuC,aAAc,GAIzBtsB,EAASwtB,yBAA0B,EAapC,OATKxtB,EAASkqB,mBAEblqB,EAASkrB,cAAe1rB,EAAOQ,UAC/B1hB,KAAKorC,OAAS1pB,EAAS0pB,OAEvB1pB,EAASkqB,kBAAmB,GAItB5rC,MAIR6uC,aAAc,SAAWntB,GAIxB,OAFAA,EAASstB,kBAAmB,IAAIjE,IAAiB8D,aAAcntB,GAExD1hB,KAAKovC,mBAAoB1tB,EAASstB,mBAI1CI,mBAAoB,SAAW1tB,GAE9B,MAAMgtB,EAAY,IAAIrF,aAAyC,EAA3B3nB,EAASspB,SAAS3hC,QAGtD,GAFArJ,KAAK2D,aAAc,WAAY,IAAIukC,GAAiBwG,EAAW,GAAIvE,kBAAmBzoB,EAASspB,WAE1FtpB,EAASupB,QAAQ5hC,OAAS,EAAI,CAElC,MAAM4hC,EAAU,IAAI5B,aAAwC,EAA1B3nB,EAASupB,QAAQ5hC,QACnDrJ,KAAK2D,aAAc,SAAU,IAAIukC,GAAiB+C,EAAS,GAAId,kBAAmBzoB,EAASupB,UAI5F,GAAKvpB,EAASsoB,OAAO3gC,OAAS,EAAI,CAEjC,MAAM2gC,EAAS,IAAIX,aAAuC,EAAzB3nB,EAASsoB,OAAO3gC,QACjDrJ,KAAK2D,aAAc,QAAS,IAAIukC,GAAiB8B,EAAQ,GAAID,gBAAiBroB,EAASsoB,SAIxF,GAAKtoB,EAASwpB,IAAI7hC,OAAS,EAAI,CAE9B,MAAM6hC,EAAM,IAAI7B,aAAoC,EAAtB3nB,EAASwpB,IAAI7hC,QAC3CrJ,KAAK2D,aAAc,KAAM,IAAIukC,GAAiBgD,EAAK,GAAIjB,kBAAmBvoB,EAASwpB,MAIpF,GAAKxpB,EAASypB,KAAK9hC,OAAS,EAAI,CAE/B,MAAM8hC,EAAO,IAAI9B,aAAqC,EAAvB3nB,EAASypB,KAAK9hC,QAC7CrJ,KAAK2D,aAAc,MAAO,IAAIukC,GAAiBiD,EAAM,GAAIlB,kBAAmBvoB,EAASypB,OAMtFnrC,KAAKorC,OAAS1pB,EAAS0pB,OAIvB,IAAM,MAAMjqC,KAAQugB,EAAS2jB,aAAe,CAE3C,MAAMn7B,EAAQ,GACRm7B,EAAe3jB,EAAS2jB,aAAclkC,GAE5C,IAAM,IAAIgJ,EAAI,EAAGC,EAAIi7B,EAAah8B,OAAQc,EAAIC,EAAGD,IAAO,CAEvD,MAAMuiC,EAAcrH,EAAcl7B,GAE5B1K,EAAY,IAAI2pC,GAAkD,EAA1BsD,EAAYxa,KAAK7oB,OAAY,GAC3E5J,EAAU0B,KAAOurC,EAAYvrC,KAE7B+I,EAAM/L,KAAMsB,EAAU0qC,kBAAmBuC,EAAYxa,OAItDlyB,KAAKqtC,gBAAiBlsC,GAAS+I,EAMhC,GAAKwX,EAAS4pB,YAAYjiC,OAAS,EAAI,CAEtC,MAAMiiC,EAAc,IAAIlC,GAAsD,EAA9B1nB,EAAS4pB,YAAYjiC,OAAY,GACjFrJ,KAAK2D,aAAc,YAAa2nC,EAAYlB,kBAAmB1oB,EAAS4pB,cAIzE,GAAK5pB,EAAS2pB,YAAYhiC,OAAS,EAAI,CAEtC,MAAMgiC,EAAc,IAAIjC,GAAsD,EAA9B1nB,EAAS2pB,YAAYhiC,OAAY,GACjFrJ,KAAK2D,aAAc,aAAc0nC,EAAYjB,kBAAmB1oB,EAAS2pB,cAkB1E,OAZiC,OAA5B3pB,EAAS6pB,iBAEbvrC,KAAKurC,eAAiB7pB,EAAS6pB,eAAe/0B,SAIjB,OAAzBkL,EAASC,cAEb3hB,KAAK2hB,YAAcD,EAASC,YAAYnL,SAIlCxW,MAIR4hB,mBAAoB,WAEO,OAArB5hB,KAAK2hB,cAET3hB,KAAK2hB,YAAc,IAAIzB,GAIxB,MAAMkK,EAAWpqB,KAAKI,WAAWgqB,SAC3BilB,EAA0BrvC,KAAKqtC,gBAAgBjjB,SAErD,GAAKA,GAAYA,EAASklB,oBASzB,OAPAhxC,QAAQ0R,MAAO,kJAAmJhQ,WAElKA,KAAK2hB,YAAY9gB,IAChB,IAAI2c,GAAW2C,EAAAA,GAAYA,EAAAA,GAAYA,EAAAA,GACvC,IAAI3C,EAAW2C,EAAAA,EAAYA,EAAAA,EAAYA,EAAAA,IAOzC,QAAkBxf,IAAbypB,GAMJ,GAJApqB,KAAK2hB,YAAY4tB,uBAAwBnlB,GAIpCilB,EAEJ,IAAM,IAAIllC,EAAI,EAAG0W,EAAKwuB,EAAwBhmC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpE,MAAMqlC,EAAiBH,EAAyBllC,GAChD8iC,GAAOsC,uBAAwBC,GAE1BxvC,KAAKstC,sBAETH,GAAU3+B,WAAYxO,KAAK2hB,YAAYzW,IAAK+hC,GAAO/hC,KACnDlL,KAAK2hB,YAAYb,cAAeqsB,IAEhCA,GAAU3+B,WAAYxO,KAAK2hB,YAAYxW,IAAK8hC,GAAO9hC,KACnDnL,KAAK2hB,YAAYb,cAAeqsB,MAIhCntC,KAAK2hB,YAAYb,cAAemsB,GAAO/hC,KACvClL,KAAK2hB,YAAYb,cAAemsB,GAAO9hC,YAU1CnL,KAAK2hB,YAAYf,aAIb6uB,MAAOzvC,KAAK2hB,YAAYzW,IAAItC,IAAO6mC,MAAOzvC,KAAK2hB,YAAYzW,IAAIW,IAAO4jC,MAAOzvC,KAAK2hB,YAAYzW,IAAIuM,KAEtGnZ,QAAQ0R,MAAO,sIAAuIhQ,OAMxJkuC,sBAAuB,WAEO,OAAxBluC,KAAKurC,iBAETvrC,KAAKurC,eAAiB,IAAI1nB,GAI3B,MAAMuG,EAAWpqB,KAAKI,WAAWgqB,SAC3BilB,EAA0BrvC,KAAKqtC,gBAAgBjjB,SAErD,GAAKA,GAAYA,EAASklB,oBAMzB,OAJAhxC,QAAQ0R,MAAO,wJAAyJhQ,WAExKA,KAAKurC,eAAe1qC,IAAK,IAAI2c,EAAW2C,EAAAA,GAMzC,GAAKiK,EAAW,CAIf,MAAMva,EAAS7P,KAAKurC,eAAe17B,OAMnC,GAJAo9B,GAAOsC,uBAAwBnlB,GAI1BilB,EAEJ,IAAM,IAAIllC,EAAI,EAAG0W,EAAKwuB,EAAwBhmC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpE,MAAMqlC,EAAiBH,EAAyBllC,GAChD+iC,GAAiBqC,uBAAwBC,GAEpCxvC,KAAKstC,sBAETH,GAAU3+B,WAAYy+B,GAAO/hC,IAAKgiC,GAAiBhiC,KACnD+hC,GAAOnsB,cAAeqsB,IAEtBA,GAAU3+B,WAAYy+B,GAAO9hC,IAAK+hC,GAAiB/hC,KACnD8hC,GAAOnsB,cAAeqsB,MAItBF,GAAOnsB,cAAeosB,GAAiBhiC,KACvC+hC,GAAOnsB,cAAeosB,GAAiB/hC,MAQ1C8hC,GAAO5qB,UAAWxS,GAKlB,IAAIkU,EAAc,EAElB,IAAM,IAAI5Z,EAAI,EAAG0W,EAAKuJ,EAAS1J,MAAOvW,EAAI0W,EAAI1W,IAE7CgjC,GAAU9C,oBAAqBjgB,EAAUjgB,GAEzC4Z,EAAc1mB,KAAK8N,IAAK4Y,EAAalU,EAAOV,kBAAmBg+B,KAMhE,GAAKkC,EAEJ,IAAM,IAAIllC,EAAI,EAAG0W,EAAKwuB,EAAwBhmC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpE,MAAMqlC,EAAiBH,EAAyBllC,GAC1CmjC,EAAuBttC,KAAKstC,qBAElC,IAAM,IAAI/pB,EAAI,EAAGmsB,EAAKF,EAAe9uB,MAAO6C,EAAImsB,EAAInsB,IAEnD4pB,GAAU9C,oBAAqBmF,EAAgBjsB,GAE1C+pB,IAEJN,GAAQ3C,oBAAqBjgB,EAAU7G,GACvC4pB,GAAUlsB,IAAK+rB,KAIhBjpB,EAAc1mB,KAAK8N,IAAK4Y,EAAalU,EAAOV,kBAAmBg+B,KAQlEntC,KAAKurC,eAAe3rB,OAASviB,KAAK2R,KAAM+U,GAEnC0rB,MAAOzvC,KAAKurC,eAAe3rB,SAE/BthB,QAAQ0R,MAAO,+HAAgIhQ,QAQlJ2vC,mBAAoB,aAMpBC,qBAAsB,WAErB,MAAMzmC,EAAQnJ,KAAKmJ,MACb0mC,EAAoB7vC,KAAK2tC,aAAc,YAE7C,QAA2BhtC,IAAtBkvC,EAAkC,CAEtC,IAAIC,EAAkB9vC,KAAK2tC,aAAc,UAEzC,QAAyBhtC,IAApBmvC,EAEJA,EAAkB,IAAI5H,GAAiB,IAAImB,aAAwC,EAA1BwG,EAAkBnvB,OAAa,GACxF1gB,KAAK2D,aAAc,SAAUmsC,QAM7B,IAAM,IAAI3lC,EAAI,EAAG0W,EAAKivB,EAAgBpvB,MAAOvW,EAAI0W,EAAI1W,IAEpD2lC,EAAgBvF,OAAQpgC,EAAG,EAAG,EAAG,GAMnC,MAAM4lC,EAAK,IAAIvyB,EAAWwyB,EAAK,IAAIxyB,EAAWyyB,EAAK,IAAIzyB,EACjD0yB,EAAK,IAAI1yB,EAAW2yB,EAAK,IAAI3yB,EAAW4yB,EAAK,IAAI5yB,EACjD6yB,EAAK,IAAI7yB,EAAW8yB,EAAK,IAAI9yB,EAInC,GAAKrU,EAEJ,IAAM,IAAIgB,EAAI,EAAG0W,EAAK1X,EAAMuX,MAAOvW,EAAI0W,EAAI1W,GAAK,EAAI,CAEnD,MAAMomC,EAAKpnC,EAAMwG,KAAMxF,EAAI,GACrBqmC,EAAKrnC,EAAMwG,KAAMxF,EAAI,GACrBsmC,EAAKtnC,EAAMwG,KAAMxF,EAAI,GAE3B4lC,EAAG1F,oBAAqBwF,EAAmBU,GAC3CP,EAAG3F,oBAAqBwF,EAAmBW,GAC3CP,EAAG5F,oBAAqBwF,EAAmBY,GAE3CJ,EAAG5hC,WAAYwhC,EAAID,GACnBM,EAAG7hC,WAAYshC,EAAIC,GACnBK,EAAGlpB,MAAOmpB,GAEVJ,EAAG7F,oBAAqByF,EAAiBS,GACzCJ,EAAG9F,oBAAqByF,EAAiBU,GACzCJ,EAAG/F,oBAAqByF,EAAiBW,GAEzCP,EAAGjvB,IAAKovB,GACRF,EAAGlvB,IAAKovB,GACRD,EAAGnvB,IAAKovB,GAERP,EAAgBvF,OAAQgG,EAAIL,EAAGtnC,EAAGsnC,EAAGrkC,EAAGqkC,EAAGz4B,GAC3Cq4B,EAAgBvF,OAAQiG,EAAIL,EAAGvnC,EAAGunC,EAAGtkC,EAAGskC,EAAG14B,GAC3Cq4B,EAAgBvF,OAAQkG,EAAIL,EAAGxnC,EAAGwnC,EAAGvkC,EAAGukC,EAAG34B,QAQ5C,IAAM,IAAItN,EAAI,EAAG0W,EAAKgvB,EAAkBnvB,MAAOvW,EAAI0W,EAAI1W,GAAK,EAE3D4lC,EAAG1F,oBAAqBwF,EAAmB1lC,EAAI,GAC/C6lC,EAAG3F,oBAAqBwF,EAAmB1lC,EAAI,GAC/C8lC,EAAG5F,oBAAqBwF,EAAmB1lC,EAAI,GAE/CkmC,EAAG5hC,WAAYwhC,EAAID,GACnBM,EAAG7hC,WAAYshC,EAAIC,GACnBK,EAAGlpB,MAAOmpB,GAEVR,EAAgBvF,OAAQpgC,EAAI,EAAGkmC,EAAGznC,EAAGynC,EAAGxkC,EAAGwkC,EAAG54B,GAC9Cq4B,EAAgBvF,OAAQpgC,EAAI,EAAGkmC,EAAGznC,EAAGynC,EAAGxkC,EAAGwkC,EAAG54B,GAC9Cq4B,EAAgBvF,OAAQpgC,EAAI,EAAGkmC,EAAGznC,EAAGynC,EAAGxkC,EAAGwkC,EAAG54B,GAMhDzX,KAAK0wC,mBAELZ,EAAgB9B,aAAc,IAMhC2C,MAAO,SAAWjvB,EAAUhS,GAE3B,IAASgS,IAAYA,EAAS8rB,iBAG7B,YADAlvC,QAAQ0R,MAAO,kFAAmF0R,QAKnF/gB,IAAX+O,IAEJA,EAAS,EAETpR,QAAQC,KACP,2JAMF,MAAM6B,EAAaJ,KAAKI,WAExB,IAAM,MAAMmB,KAAOnB,EAAa,CAE/B,QAAoCO,IAA/B+gB,EAASthB,WAAYmB,GAAsB,SAEhD,MACMqvC,EADaxwC,EAAYmB,GACI2I,MAE7B2mC,EAAanvB,EAASthB,WAAYmB,GAClCuvC,EAAkBD,EAAW3mC,MAE7B6mC,EAAkBF,EAAW1I,SAAWz4B,EACxCrG,EAAShM,KAAK6N,IAAK4lC,EAAgBznC,OAAQunC,EAAgBvnC,OAAS0nC,GAE1E,IAAM,IAAI5mC,EAAI,EAAGoZ,EAAIwtB,EAAiB5mC,EAAId,EAAQc,IAAMoZ,IAEvDqtB,EAAiBrtB,GAAMutB,EAAiB3mC,GAM1C,OAAOnK,MAIR0wC,iBAAkB,WAEjB,MAAMzF,EAAUjrC,KAAKI,WAAWqf,OAEhC,IAAM,IAAItV,EAAI,EAAG0W,EAAKoqB,EAAQvqB,MAAOvW,EAAI0W,EAAI1W,IAE5CgjC,GAAU9C,oBAAqBY,EAAS9gC,GAExCgjC,GAAU79B,YAEV27B,EAAQV,OAAQpgC,EAAGgjC,GAAUvkC,EAAGukC,GAAUthC,EAAGshC,GAAU11B,IAMzDu5B,aAAc,WAEb,SAASC,EAAwBxxC,EAAWyxC,GAE3C,MAAMhnC,EAAQzK,EAAUyK,MAClBi+B,EAAW1oC,EAAU0oC,SACrB3G,EAAa/hC,EAAU+hC,WAEvB2P,EAAS,IAAIjnC,EAAMhH,YAAaguC,EAAQ7nC,OAAS8+B,GAEvD,IAAIh/B,EAAQ,EAAG0gC,EAAS,EAExB,IAAM,IAAI1/B,EAAI,EAAGC,EAAI8mC,EAAQ7nC,OAAQc,EAAIC,EAAGD,IAAO,CAElDhB,EAAQ+nC,EAAS/mC,GAAMg+B,EAEvB,IAAM,IAAI5kB,EAAI,EAAGA,EAAI4kB,EAAU5kB,IAE9B4tB,EAAQtH,KAAc3/B,EAAOf,KAM/B,OAAO,IAAI++B,GAAiBiJ,EAAQhJ,EAAU3G,GAM/C,GAAoB,OAAfxhC,KAAKmJ,MAGT,OADA7K,QAAQC,KAAM,yEACPyB,KAIR,MAAMoxC,EAAY,IAAIhE,GAEhB8D,EAAUlxC,KAAKmJ,MAAMe,MACrB9J,EAAaJ,KAAKI,WAIxB,IAAM,MAAMe,KAAQf,EAAa,CAEhC,MAEMixC,EAAeJ,EAFH7wC,EAAYe,GAE0B+vC,GAExDE,EAAUztC,aAAcxC,EAAMkwC,GAM/B,MAAMhE,EAAkBrtC,KAAKqtC,gBAE7B,IAAM,MAAMlsC,KAAQksC,EAAkB,CAErC,MAAMiE,EAAa,GACb9B,EAAiBnC,EAAiBlsC,GAExC,IAAM,IAAIgJ,EAAI,EAAG0W,EAAK2uB,EAAenmC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE3D,MAEMknC,EAAeJ,EAFHzB,EAAgBrlC,GAEsB+mC,GAExDI,EAAWnzC,KAAMkzC,GAIlBD,EAAU/D,gBAAiBlsC,GAASmwC,EAIrCF,EAAU9D,qBAAuBttC,KAAKstC,qBAItC,MAAMlC,EAASprC,KAAKorC,OAEpB,IAAM,IAAIjhC,EAAI,EAAGC,EAAIghC,EAAO/hC,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAM0hC,EAAQT,EAAQjhC,GACtBinC,EAAUvD,SAAUhC,EAAM/Y,MAAO+Y,EAAMnrB,MAAOmrB,EAAMlK,eAIrD,OAAOyP,GAIR16B,OAAQ,WAEP,MAAMwb,EAAO,CACZpb,SAAU,CACTZ,QAAS,IACTpX,KAAM,iBACNiY,UAAW,0BAWb,GALAmb,EAAK3c,KAAOvV,KAAKuV,KACjB2c,EAAKpzB,KAAOkB,KAAKlB,KACE,KAAdkB,KAAKmB,OAAc+wB,EAAK/wB,KAAOnB,KAAKmB,MACpCnC,OAAOuyC,KAAMvxC,KAAKiuB,UAAW5kB,OAAS,IAAI6oB,EAAKjE,SAAWjuB,KAAKiuB,eAE3CttB,IAApBX,KAAK2xB,WAA2B,CAEpC,MAAMA,EAAa3xB,KAAK2xB,WAExB,IAAM,MAAMpwB,KAAOowB,OAEShxB,IAAtBgxB,EAAYpwB,KAAsB2wB,EAAM3wB,GAAQowB,EAAYpwB,IAIlE,OAAO2wB,EAIRA,EAAKA,KAAO,CAAE9xB,WAAY,IAE1B,MAAM+I,EAAQnJ,KAAKmJ,MAEJ,OAAVA,IAEJ+oB,EAAKA,KAAK/oB,MAAQ,CACjBrK,KAAMqK,EAAMe,MAAMhH,YAAY/B,KAC9B+I,MAAOjL,MAAMqC,UAAU/D,MAAMoI,KAAMwD,EAAMe,SAK3C,MAAM9J,EAAaJ,KAAKI,WAExB,IAAM,MAAMmB,KAAOnB,EAAa,CAE/B,MAAMX,EAAYW,EAAYmB,GAExBiwC,EAAgB/xC,EAAUiX,OAAQwb,EAAKA,MAErB,KAAnBzyB,EAAU0B,OAAcqwC,EAAcrwC,KAAO1B,EAAU0B,MAE5D+wB,EAAKA,KAAK9xB,WAAYmB,GAAQiwC,EAI/B,MAAMnE,EAAkB,GACxB,IAAIoE,GAAqB,EAEzB,IAAM,MAAMlwC,KAAOvB,KAAKqtC,gBAAkB,CAEzC,MAAMqE,EAAiB1xC,KAAKqtC,gBAAiB9rC,GAEvC2I,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAG0W,EAAK6wB,EAAeroC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE3D,MAAM1K,EAAYiyC,EAAgBvnC,GAE5BqnC,EAAgB/xC,EAAUiX,OAAQwb,EAAKA,MAErB,KAAnBzyB,EAAU0B,OAAcqwC,EAAcrwC,KAAO1B,EAAU0B,MAE5D+I,EAAM/L,KAAMqzC,GAIRtnC,EAAMb,OAAS,IAEnBgkC,EAAiB9rC,GAAQ2I,EAEzBunC,GAAqB,GAMlBA,IAEJvf,EAAKA,KAAKmb,gBAAkBA,EAC5Bnb,EAAKA,KAAKob,qBAAuBttC,KAAKstC,sBAIvC,MAAMlC,EAASprC,KAAKorC,OAEfA,EAAO/hC,OAAS,IAEpB6oB,EAAKA,KAAKkZ,OAASlsC,KAAKG,MAAOH,KAAKC,UAAWisC,KAIhD,MAAMG,EAAiBvrC,KAAKurC,eAW5B,OATwB,OAAnBA,IAEJrZ,EAAKA,KAAKqZ,eAAiB,CAC1B17B,OAAQ07B,EAAe17B,OAAOwhB,UAC9BzR,OAAQ2rB,EAAe3rB,SAKlBsS,GAIR1b,MAAO,WA0BN,OAAO,IAAI42B,IAAiB32B,KAAMzW,OAInCyW,KAAM,SAAWnN,GAIhBtJ,KAAKmJ,MAAQ,KACbnJ,KAAKI,WAAa,GAClBJ,KAAKqtC,gBAAkB,GACvBrtC,KAAKorC,OAAS,GACdprC,KAAK2hB,YAAc,KACnB3hB,KAAKurC,eAAiB,KAItB,MAAMrZ,EAAO,GAIblyB,KAAKmB,KAAOmI,EAAOnI,KAInB,MAAMgI,EAAQG,EAAOH,MAEN,OAAVA,GAEJnJ,KAAK0tC,SAAUvkC,EAAMqN,MAAO0b,IAM7B,MAAM9xB,EAAakJ,EAAOlJ,WAE1B,IAAM,MAAMe,KAAQf,EAAa,CAEhC,MAAMX,EAAYW,EAAYe,GAC9BnB,KAAK2D,aAAcxC,EAAM1B,EAAU+W,MAAO0b,IAM3C,MAAMmb,EAAkB/jC,EAAO+jC,gBAE/B,IAAM,MAAMlsC,KAAQksC,EAAkB,CAErC,MAAMnjC,EAAQ,GACRslC,EAAiBnC,EAAiBlsC,GAExC,IAAM,IAAIgJ,EAAI,EAAGC,EAAIolC,EAAenmC,OAAQc,EAAIC,EAAGD,IAElDD,EAAM/L,KAAMqxC,EAAgBrlC,GAAIqM,MAAO0b,IAIxClyB,KAAKqtC,gBAAiBlsC,GAAS+I,EAIhClK,KAAKstC,qBAAuBhkC,EAAOgkC,qBAInC,MAAMlC,EAAS9hC,EAAO8hC,OAEtB,IAAM,IAAIjhC,EAAI,EAAGC,EAAIghC,EAAO/hC,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAM0hC,EAAQT,EAAQjhC,GACtBnK,KAAK6tC,SAAUhC,EAAM/Y,MAAO+Y,EAAMnrB,MAAOmrB,EAAMlK,eAMhD,MAAMhgB,EAAcrY,EAAOqY,YAEN,OAAhBA,IAEJ3hB,KAAK2hB,YAAcA,EAAYnL,SAMhC,MAAM+0B,EAAiBjiC,EAAOiiC,eAiB9B,OAfwB,OAAnBA,IAEJvrC,KAAKurC,eAAiBA,EAAe/0B,SAMtCxW,KAAKutC,UAAUza,MAAQxpB,EAAOikC,UAAUza,MACxC9yB,KAAKutC,UAAU7sB,MAAQpX,EAAOikC,UAAU7sB,MAIxC1gB,KAAKiuB,SAAW3kB,EAAO2kB,SAEhBjuB,MAIRoX,QAAS,WAERpX,KAAKgK,cAAe,CAAElL,KAAM,eAM9B,MAAM6yC,GAAiB,IAAIrqB,GACrBsqB,GAAO,IAAI9sB,GACX+sB,GAAU,IAAIhuB,EAEdiuB,GAAM,IAAIt0B,EACVu0B,GAAM,IAAIv0B,EACVw0B,GAAM,IAAIx0B,EAEVy0B,GAAS,IAAIz0B,EACb00B,GAAS,IAAI10B,EACb20B,GAAS,IAAI30B,EAEb40B,GAAU,IAAI50B,EACd60B,GAAU,IAAI70B,EACd80B,GAAU,IAAI90B,EAEd+0B,GAAO,IAAIrkC,EACXskC,GAAO,IAAItkC,EACXukC,GAAO,IAAIvkC,EAEXwkC,GAAqB,IAAIl1B,EACzBm1B,GAA0B,IAAIn1B,EAEpC,SAASo1B,GAAMlxB,EAAUmQ,GAExB1E,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,OAEZkB,KAAK0hB,cAAwB/gB,IAAb+gB,EAAyBA,EAAW,IAAI0rB,GACxDptC,KAAK6xB,cAAwBlxB,IAAbkxB,EAAyBA,EAAW,IAAIuS,GAExDpkC,KAAK6yC,qBAkSN,SAASC,GAAmB5xB,EAAQ2Q,EAAUkhB,EAAW9tB,EAAK8qB,EAAIC,EAAIC,EAAI3uB,GAEzE,IAAI0xB,EAYJ,GARCA,EA39Ve,IAy9VXnhB,EAASqQ,KAEDjd,EAAIguB,kBAAmBhD,EAAID,EAAID,GAAI,EAAMzuB,GAIzC2D,EAAIguB,kBAAmBlD,EAAIC,EAAIC,EA99V1B,IA89V8Bpe,EAASqQ,KAAqB5gB,GAI3D,OAAd0xB,EAAqB,OAAO,KAEjCL,GAAwBl8B,KAAM6K,GAC9BqxB,GAAwBp0B,aAAc2C,EAAOvC,aAE7C,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAY2uB,IAElD,OAAKzjB,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,IAAa,KAE7D,CACN2D,SAAUA,EACV5N,MAAOqxB,GAAwBn8B,QAC/B0K,OAAQA,GAKV,SAASgyB,GAAiChyB,EAAQ2Q,EAAUkhB,EAAW9tB,EAAKmF,EAAU+oB,EAAe7F,EAAsBh2B,EAAIwd,EAAK1nB,EAAGC,EAAGC,GAEzIwkC,GAAIzH,oBAAqBjgB,EAAUhd,GACnC2kC,GAAI1H,oBAAqBjgB,EAAU/c,GACnC2kC,GAAI3H,oBAAqBjgB,EAAU9c,GAEnC,MAAM8lC,EAAkBlyB,EAAOmyB,sBAE/B,GAAKxhB,EAASwT,cAAgB8N,GAAiBC,EAAkB,CAEhEhB,GAAQvxC,IAAK,EAAG,EAAG,GACnBwxC,GAAQxxC,IAAK,EAAG,EAAG,GACnByxC,GAAQzxC,IAAK,EAAG,EAAG,GAEnB,IAAM,IAAIsJ,EAAI,EAAG0W,EAAKsyB,EAAc9pC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE1D,MAAMmpC,EAAYF,EAAiBjpC,GAC7BqlC,EAAiB2D,EAAehpC,GAEnB,IAAdmpC,IAELrB,GAAO5H,oBAAqBmF,EAAgBpiC,GAC5C8kC,GAAO7H,oBAAqBmF,EAAgBniC,GAC5C8kC,GAAO9H,oBAAqBmF,EAAgBliC,GAEvCggC,GAEJ8E,GAAQpd,gBAAiBid,GAAQqB,GACjCjB,GAAQrd,gBAAiBkd,GAAQoB,GACjChB,GAAQtd,gBAAiBmd,GAAQmB,KAIjClB,GAAQpd,gBAAiBid,GAAOzyB,IAAKsyB,IAAOwB,GAC5CjB,GAAQrd,gBAAiBkd,GAAO1yB,IAAKuyB,IAAOuB,GAC5ChB,GAAQtd,gBAAiBmd,GAAO3yB,IAAKwyB,IAAOsB,KAM9CxB,GAAI7wB,IAAKmxB,IACTL,GAAI9wB,IAAKoxB,IACTL,GAAI/wB,IAAKqxB,IAILpxB,EAAOqyB,gBAEXryB,EAAOsyB,cAAepmC,EAAG0kC,IACzB5wB,EAAOsyB,cAAenmC,EAAG0kC,IACzB7wB,EAAOsyB,cAAelmC,EAAG0kC,KAI1B,MAAMyB,EAAeX,GAAmB5xB,EAAQ2Q,EAAUkhB,EAAW9tB,EAAK6sB,GAAKC,GAAKC,GAAKU,IAEzF,GAAKe,EAAe,CAEdn8B,IAEJi7B,GAAKlI,oBAAqB/yB,EAAIlK,GAC9BolC,GAAKnI,oBAAqB/yB,EAAIjK,GAC9BolC,GAAKpI,oBAAqB/yB,EAAIhK,GAE9BmmC,EAAan8B,GAAK2c,GAASqB,MAAOod,GAAoBZ,GAAKC,GAAKC,GAAKO,GAAMC,GAAMC,GAAM,IAAIvkC,IAIvF4mB,IAEJyd,GAAKlI,oBAAqBvV,EAAK1nB,GAC/BolC,GAAKnI,oBAAqBvV,EAAKznB,GAC/BolC,GAAKpI,oBAAqBvV,EAAKxnB,GAE/BmmC,EAAa3e,IAAMb,GAASqB,MAAOod,GAAoBZ,GAAKC,GAAKC,GAAKO,GAAMC,GAAMC,GAAM,IAAIvkC,IAI7F,MAAM69B,EAAO,IAAIrK,GAAOt0B,EAAGC,EAAGC,GAC9B2mB,GAASmB,UAAW0c,GAAKC,GAAKC,GAAKjG,EAAKtsB,QAExCg0B,EAAa1H,KAAOA,EAIrB,OAAO0H,EAnZRb,GAAKtxC,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEpE4B,YAAa0vC,GAEbphB,QAAQ,EAER/a,KAAM,SAAWnN,GAmBhB,OAjBA6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,QAEE3I,IAAjC2I,EAAO+pC,wBAEXrzC,KAAKqzC,sBAAwB/pC,EAAO+pC,sBAAsB91C,cAIrBoD,IAAjC2I,EAAOoqC,wBAEX1zC,KAAK0zC,sBAAwB10C,OAAOuG,OAAQ,GAAI+D,EAAOoqC,wBAIxD1zC,KAAK6xB,SAAWvoB,EAAOuoB,SACvB7xB,KAAK0hB,SAAWpY,EAAOoY,SAEhB1hB,MAIR6yC,mBAAoB,WAEnB,MAAMnxB,EAAW1hB,KAAK0hB,SAEtB,GAAKA,EAAS8rB,iBAAmB,CAEhC,MAAMH,EAAkB3rB,EAAS2rB,gBAC3BkE,EAAOvyC,OAAOuyC,KAAMlE,GAE1B,GAAKkE,EAAKloC,OAAS,EAAI,CAEtB,MAAMmmC,EAAiBnC,EAAiBkE,EAAM,IAE9C,QAAwB5wC,IAAnB6uC,EAA+B,CAEnCxvC,KAAKqzC,sBAAwB,GAC7BrzC,KAAK0zC,sBAAwB,GAE7B,IAAM,IAAIpoC,EAAI,EAAGqoC,EAAKnE,EAAenmC,OAAQiC,EAAIqoC,EAAIroC,IAAO,CAE3D,MAAMnK,EAAOquC,EAAgBlkC,GAAInK,MAAQ/D,OAAQkO,GAEjDtL,KAAKqzC,sBAAsBl1C,KAAM,GACjC6B,KAAK0zC,sBAAuBvyC,GAASmK,SAQlC,CAEN,MAAM+5B,EAAe3jB,EAAS2jB,kBAER1kC,IAAjB0kC,GAA8BA,EAAah8B,OAAS,GAExD/K,QAAQ0R,MAAO,0GAQlBygB,QAAS,SAAWsiB,EAAWa,GAE9B,MAAMlyB,EAAW1hB,KAAK0hB,SAChBmQ,EAAW7xB,KAAK6xB,SAChBlT,EAAc3e,KAAK2e,YAEzB,QAAkBhe,IAAbkxB,EAAyB,OAS9B,GALiC,OAA5BnQ,EAAS6pB,gBAA0B7pB,EAASwsB,wBAEjD2D,GAAQp7B,KAAMiL,EAAS6pB,gBACvBsG,GAAQtzB,aAAcI,IAE6B,IAA9Co0B,EAAU9tB,IAAIf,iBAAkB2tB,IAAsB,OAS3D,GALAF,GAAev+B,WAAYuL,GAC3BizB,GAAKn7B,KAAMs8B,EAAU9tB,KAAM1G,aAAcozB,IAIX,OAAzBjwB,EAASC,cAEuC,IAA/CiwB,GAAKiC,cAAenyB,EAASC,aAA0B,OAI7D,IAAI8xB,EAEJ,GAAK/xB,EAAS8rB,iBAAmB,CAEhC,MAAMrkC,EAAQuY,EAASvY,MACjBihB,EAAW1I,EAASthB,WAAWgqB,SAC/B+oB,EAAgBzxB,EAAS2rB,gBAAgBjjB,SACzCkjB,EAAuB5rB,EAAS4rB,qBAChCh2B,EAAKoK,EAASthB,WAAWkX,GACzBwd,EAAMpT,EAASthB,WAAW00B,IAC1BsW,EAAS1pB,EAAS0pB,OAClBmC,EAAY7rB,EAAS6rB,UAE3B,GAAe,OAAVpkC,EAIJ,GAAKlK,MAAMkY,QAAS0a,GAEnB,IAAM,IAAI1nB,EAAI,EAAG0W,EAAKuqB,EAAO/hC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEnD,MAAM0hC,EAAQT,EAAQjhC,GAChB2pC,EAAgBjiB,EAAUga,EAAMlK,eAKtC,IAAM,IAAIpe,EAHIlmB,KAAK8N,IAAK0gC,EAAM/Y,MAAOya,EAAUza,OAG1B4c,EAFTryC,KAAK6N,IAAO2gC,EAAM/Y,MAAQ+Y,EAAMnrB,MAAW6sB,EAAUza,MAAQya,EAAU7sB,OAEpD6C,EAAImsB,EAAInsB,GAAK,EAAI,CAE/C,MAAMnW,EAAIjE,EAAMwG,KAAM4T,GAChBlW,EAAIlE,EAAMwG,KAAM4T,EAAI,GACpBjW,EAAInE,EAAMwG,KAAM4T,EAAI,GAE1BkwB,EAAeP,GAAiClzC,KAAM8zC,EAAef,EAAWnB,GAAMxnB,EAAU+oB,EAAe7F,EAAsBh2B,EAAIwd,EAAK1nB,EAAGC,EAAGC,GAE/ImmC,IAEJA,EAAaM,UAAY12C,KAAKqL,MAAO6a,EAAI,GACzCkwB,EAAa1H,KAAKpK,cAAgBkK,EAAMlK,cACxCiS,EAAWz1C,KAAMs1C,SAQd,CAKN,IAAM,IAAItpC,EAHI9M,KAAK8N,IAAK,EAAGoiC,EAAUza,OAGhBjS,EAFTxjB,KAAK6N,IAAK/B,EAAMuX,MAAS6sB,EAAUza,MAAQya,EAAU7sB,OAElCvW,EAAI0W,EAAI1W,GAAK,EAAI,CAE/C,MAAMiD,EAAIjE,EAAMwG,KAAMxF,GAChBkD,EAAIlE,EAAMwG,KAAMxF,EAAI,GACpBmD,EAAInE,EAAMwG,KAAMxF,EAAI,GAE1BspC,EAAeP,GAAiClzC,KAAM6xB,EAAUkhB,EAAWnB,GAAMxnB,EAAU+oB,EAAe7F,EAAsBh2B,EAAIwd,EAAK1nB,EAAGC,EAAGC,GAE1ImmC,IAEJA,EAAaM,UAAY12C,KAAKqL,MAAOyB,EAAI,GACzCypC,EAAWz1C,KAAMs1C,UAQd,QAAkB9yC,IAAbypB,EAIX,GAAKnrB,MAAMkY,QAAS0a,GAEnB,IAAM,IAAI1nB,EAAI,EAAG0W,EAAKuqB,EAAO/hC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEnD,MAAM0hC,EAAQT,EAAQjhC,GAChB2pC,EAAgBjiB,EAAUga,EAAMlK,eAKtC,IAAM,IAAIpe,EAHIlmB,KAAK8N,IAAK0gC,EAAM/Y,MAAOya,EAAUza,OAG1B4c,EAFTryC,KAAK6N,IAAO2gC,EAAM/Y,MAAQ+Y,EAAMnrB,MAAW6sB,EAAUza,MAAQya,EAAU7sB,OAEpD6C,EAAImsB,EAAInsB,GAAK,EAAI,CAM/CkwB,EAAeP,GAAiClzC,KAAM8zC,EAAef,EAAWnB,GAAMxnB,EAAU+oB,EAAe7F,EAAsBh2B,EAAIwd,EAJ/HvR,EACAA,EAAI,EACJA,EAAI,GAITkwB,IAEJA,EAAaM,UAAY12C,KAAKqL,MAAO6a,EAAI,GACzCkwB,EAAa1H,KAAKpK,cAAgBkK,EAAMlK,cACxCiS,EAAWz1C,KAAMs1C,SAQd,CAKN,IAAM,IAAItpC,EAHI9M,KAAK8N,IAAK,EAAGoiC,EAAUza,OAGhBjS,EAFTxjB,KAAK6N,IAAKkf,EAAS1J,MAAS6sB,EAAUza,MAAQya,EAAU7sB,OAErCvW,EAAI0W,EAAI1W,GAAK,EAAI,CAM/CspC,EAAeP,GAAiClzC,KAAM6xB,EAAUkhB,EAAWnB,GAAMxnB,EAAU+oB,EAAe7F,EAAsBh2B,EAAIwd,EAJ1H3qB,EACAA,EAAI,EACJA,EAAI,GAITspC,IAEJA,EAAaM,UAAY12C,KAAKqL,MAAOyB,EAAI,GACzCypC,EAAWz1C,KAAMs1C,WAUf,GAAK/xB,EAASktB,WAAa,CAEjC,MAAMoF,EAAkB/0C,MAAMkY,QAAS0a,GAEjCmZ,EAAWtpB,EAASspB,SACpBc,EAAQpqB,EAASoqB,MACvB,IAAIZ,EAEJ,MAAMc,EAAgBtqB,EAASsqB,cAAe,GACzCA,EAAc3iC,OAAS,IAAI6hC,EAAMc,GAEtC,IAAM,IAAIz5B,EAAI,EAAG0hC,EAAKnI,EAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAElD,MAAMw5B,EAAOD,EAAOv5B,GACd2hC,EAAeF,EAAkBniB,EAAUka,EAAKpK,eAAkB9P,EAExE,QAAsBlxB,IAAjBuzC,EAA6B,SAElC,MAAMC,EAAMnJ,EAAUe,EAAK3+B,GACrBgnC,EAAMpJ,EAAUe,EAAK1+B,GACrBgnC,EAAMrJ,EAAUe,EAAKz+B,GAI3B,GAFAmmC,EAAeX,GAAmB9yC,KAAMk0C,EAAcnB,EAAWnB,GAAMuC,EAAKC,EAAKC,EAAK3B,IAEjFe,EAAe,CAEnB,GAAKvI,GAAOA,EAAK34B,GAAM,CAEtB,MAAM+hC,EAAQpJ,EAAK34B,GACnBggC,GAAK97B,KAAM69B,EAAO,IAClB9B,GAAK/7B,KAAM69B,EAAO,IAClB7B,GAAKh8B,KAAM69B,EAAO,IAElBb,EAAan8B,GAAK2c,GAASqB,MAAOod,GAAoByB,EAAKC,EAAKC,EAAK9B,GAAMC,GAAMC,GAAM,IAAIvkC,GAI5FulC,EAAa1H,KAAOA,EACpB0H,EAAaM,UAAYxhC,EACzBqhC,EAAWz1C,KAAMs1C,SAqItB,IAAIc,GAAc,EAClB,MAAMC,GAAQ,IAAIltB,GACZmtB,GAAS,IAAItnB,GACbunB,GAAY,IAAIl3B,EAEtB,SAASm3B,KAER31C,OAAO2C,eAAgB3B,KAAM,KAAM,CAAEnB,MAAO01C,IAAe,IAE3Dv0C,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKmB,KAAO,GACZnB,KAAKlB,KAAO,WAEZkB,KAAKgrC,SAAW,GAChBhrC,KAAKgqC,OAAS,GACdhqC,KAAK8rC,MAAQ,GACb9rC,KAAKgsC,cAAgB,CAAC,IAEtBhsC,KAAKqlC,aAAe,GACpBrlC,KAAK4nC,aAAe,GAEpB5nC,KAAKqrC,YAAc,GACnBrrC,KAAKsrC,YAAc,GAEnBtrC,KAAK2uC,cAAgB,GAErB3uC,KAAK2hB,YAAc,KACnB3hB,KAAKurC,eAAiB,KAItBvrC,KAAKivC,oBAAqB,EAC1BjvC,KAAKwrC,oBAAqB,EAC1BxrC,KAAK2rC,eAAgB,EACrB3rC,KAAKyrC,mBAAoB,EACzBzrC,KAAK0rC,kBAAmB,EACxB1rC,KAAKkvC,yBAA0B,EAC/BlvC,KAAK4rC,kBAAmB,EAIzB+I,GAASrzC,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAE/E4B,YAAayxC,GAEb/F,YAAY,EAEZrwB,aAAc,SAAW7L,GAExB,MAAM+a,GAAe,IAAI1d,GAAUqjB,gBAAiB1gB,GAEpD,IAAM,IAAIvI,EAAI,EAAG0W,EAAK7gB,KAAKgrC,SAAS3hC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE3CnK,KAAKgrC,SAAU7gC,GACvBoU,aAAc7L,GAItB,IAAM,IAAIvI,EAAI,EAAG0W,EAAK7gB,KAAK8rC,MAAMziC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAM4hC,EAAO/rC,KAAK8rC,MAAO3hC,GACzB4hC,EAAKtsB,OAAOlI,aAAckW,GAAene,YAEzC,IAAM,IAAIiU,EAAI,EAAGmsB,EAAK3D,EAAKnK,cAAcv4B,OAAQka,EAAImsB,EAAInsB,IAExDwoB,EAAKnK,cAAere,GAAIhM,aAAckW,GAAene,YAqBvD,OAf0B,OAArBtP,KAAK2hB,aAET3hB,KAAK4hB,qBAIuB,OAAxB5hB,KAAKurC,gBAETvrC,KAAKkuC,wBAINluC,KAAKwrC,oBAAqB,EAC1BxrC,KAAKyrC,mBAAoB,EAElBzrC,MAIR8uB,QAAS,SAAWhf,GAQnB,OAJA0kC,GAAMrG,cAAer+B,GAErB9P,KAAKue,aAAci2B,IAEZx0C,MAIR+uB,QAAS,SAAWjf,GAQnB,OAJA0kC,GAAMpG,cAAet+B,GAErB9P,KAAKue,aAAci2B,IAEZx0C,MAIRgvB,QAAS,SAAWlf,GAQnB,OAJA0kC,GAAMnG,cAAev+B,GAErB9P,KAAKue,aAAci2B,IAEZx0C,MAIRsuC,UAAW,SAAW1lC,EAAGiD,EAAG4L,GAQ3B,OAJA+8B,GAAMjG,gBAAiB3lC,EAAGiD,EAAG4L,GAE7BzX,KAAKue,aAAci2B,IAEZx0C,MAIRqqB,MAAO,SAAWzhB,EAAGiD,EAAG4L,GAQvB,OAJA+8B,GAAMhG,UAAW5lC,EAAGiD,EAAG4L,GAEvBzX,KAAKue,aAAci2B,IAEZx0C,MAIRwvB,OAAQ,SAAWjO,GAQlB,OANAkzB,GAAOjlB,OAAQjO,GAEfkzB,GAAOn+B,eAEPtW,KAAKue,aAAck2B,GAAO/hC,QAEnB1S,MAIR40C,mBAAoB,SAAWlzB,GAE9B,MAAMmzB,EAAQ70C,KAERmJ,EAA2B,OAAnBuY,EAASvY,MAAiBuY,EAASvY,WAAQxI,EACnDP,EAAashB,EAASthB,WAE5B,QAA6BO,IAAxBP,EAAWgqB,SAGf,OADA9rB,QAAQ0R,MAAO,oFACRhQ,KAIR,MAAMoqB,EAAWhqB,EAAWgqB,SACtB3K,EAASrf,EAAWqf,OACpB4gB,EAAQjgC,EAAWigC,MACnB/oB,EAAKlX,EAAWkX,GAChBwd,EAAM10B,EAAW00B,SAEVn0B,IAARm0B,IAAoB90B,KAAKgsC,cAAe,GAAM,IAEnD,IAAM,IAAI7hC,EAAI,EAAGA,EAAIigB,EAAS1J,MAAOvW,IAEpC0qC,EAAM7J,SAAS7sC,MAAM,IAAIqf,GAAU6sB,oBAAqBjgB,EAAUjgB,SAEnDxJ,IAAV0/B,GAEJwU,EAAM7K,OAAO7rC,MAAM,IAAIuhC,IAAQ2K,oBAAqBhK,EAAOl2B,IAM7D,SAAS2qC,EAAS1nC,EAAGC,EAAGC,EAAGq0B,GAE1B,MAAME,OAA2BlhC,IAAV0/B,EAAwB,GAAK,CACnDwU,EAAM7K,OAAQ58B,GAAIoJ,QAClBq+B,EAAM7K,OAAQ38B,GAAImJ,QAClBq+B,EAAM7K,OAAQ18B,GAAIkJ,SAGborB,OAA6BjhC,IAAX8e,EAAyB,GAAK,EACrD,IAAIjC,GAAU6sB,oBAAqB5qB,EAAQrS,IAC3C,IAAIoQ,GAAU6sB,oBAAqB5qB,EAAQpS,IAC3C,IAAImQ,GAAU6sB,oBAAqB5qB,EAAQnS,IAGtCy+B,EAAO,IAAIrK,GAAOt0B,EAAGC,EAAGC,EAAGs0B,EAAeC,EAAcF,GAE9DkT,EAAM/I,MAAM3tC,KAAM4tC,QAENprC,IAAP2W,GAEJu9B,EAAM7I,cAAe,GAAI7tC,KAAM,EAC9B,IAAI+P,GAAUm8B,oBAAqB/yB,EAAIlK,IACvC,IAAIc,GAAUm8B,oBAAqB/yB,EAAIjK,IACvC,IAAIa,GAAUm8B,oBAAqB/yB,EAAIhK,UAK5B3M,IAARm0B,GAEJ+f,EAAM7I,cAAe,GAAI7tC,KAAM,EAC9B,IAAI+P,GAAUm8B,oBAAqBvV,EAAK1nB,IACxC,IAAIc,GAAUm8B,oBAAqBvV,EAAKznB,IACxC,IAAIa,GAAUm8B,oBAAqBvV,EAAKxnB,KAO3C,MAAM89B,EAAS1pB,EAAS0pB,OAExB,GAAKA,EAAO/hC,OAAS,EAEpB,IAAM,IAAIc,EAAI,EAAGA,EAAIihC,EAAO/hC,OAAQc,IAAO,CAE1C,MAAM0hC,EAAQT,EAAQjhC,GAEhB2oB,EAAQ+Y,EAAM/Y,MAGpB,IAAM,IAAIvP,EAAIuP,EAAO4c,EAAK5c,EAFZ+Y,EAAMnrB,MAEqB6C,EAAImsB,EAAInsB,GAAK,OAEtC5iB,IAAVwI,EAEJ2rC,EAAS3rC,EAAMwG,KAAM4T,GAAKpa,EAAMwG,KAAM4T,EAAI,GAAKpa,EAAMwG,KAAM4T,EAAI,GAAKsoB,EAAMlK,eAI1EmT,EAASvxB,EAAGA,EAAI,EAAGA,EAAI,EAAGsoB,EAAMlK,oBAUnC,QAAehhC,IAAVwI,EAEJ,IAAM,IAAIgB,EAAI,EAAGA,EAAIhB,EAAMuX,MAAOvW,GAAK,EAEtC2qC,EAAS3rC,EAAMwG,KAAMxF,GAAKhB,EAAMwG,KAAMxF,EAAI,GAAKhB,EAAMwG,KAAMxF,EAAI,SAMhE,IAAM,IAAIA,EAAI,EAAGA,EAAIigB,EAAS1J,MAAOvW,GAAK,EAEzC2qC,EAAS3qC,EAAGA,EAAI,EAAGA,EAAI,GAsB1B,OAdAnK,KAAK2vC,qBAEyB,OAAzBjuB,EAASC,cAEb3hB,KAAK2hB,YAAcD,EAASC,YAAYnL,SAIR,OAA5BkL,EAAS6pB,iBAEbvrC,KAAKurC,eAAiB7pB,EAAS6pB,eAAe/0B,SAIxCxW,MAIR6P,OAAQ,WAQP,OANA7P,KAAK4hB,qBAEL5hB,KAAK2hB,YAAYU,UAAWqyB,IAAY/hB,SAExC3yB,KAAKsuC,UAAWoG,GAAU9rC,EAAG8rC,GAAU7oC,EAAG6oC,GAAUj9B,GAE7CzX,MAIRsP,UAAW,WAEVtP,KAAKkuC,wBAEL,MAAMr+B,EAAS7P,KAAKurC,eAAe17B,OAC7B+P,EAAS5f,KAAKurC,eAAe3rB,OAE7BhiB,EAAe,IAAXgiB,EAAe,EAAI,EAAMA,EAE7BlN,EAAS,IAAI4U,GAUnB,OATA5U,EAAO7R,IACNjD,EAAG,EAAG,GAAKA,EAAIiS,EAAOjH,EACtB,EAAGhL,EAAG,GAAKA,EAAIiS,EAAOhE,EACtB,EAAG,EAAGjO,GAAKA,EAAIiS,EAAO4H,EACtB,EAAG,EAAG,EAAG,GAGVzX,KAAKue,aAAc7L,GAEZ1S,MAIR2vC,mBAAoB,WAEnB,MAAMU,EAAK,IAAI7yB,EAAW8yB,EAAK,IAAI9yB,EAEnC,IAAM,IAAIjL,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEnBg+B,EAAKvwC,KAAKgrC,SAAUe,EAAK3+B,GACzBojC,EAAKxwC,KAAKgrC,SAAUe,EAAK1+B,GACzBojC,EAAKzwC,KAAKgrC,SAAUe,EAAKz+B,GAE/B+iC,EAAG5hC,WAAYgiC,EAAID,GACnBF,EAAG7hC,WAAY8hC,EAAIC,GACnBH,EAAGlpB,MAAOmpB,GAEVD,EAAG/gC,YAEHy8B,EAAKtsB,OAAOhJ,KAAM45B,KAMpBT,qBAAsB,SAAWmF,QAEVp0C,IAAjBo0C,IAA6BA,GAAe,GAEjD,MAAM/J,EAAW,IAAI/rC,MAAOe,KAAKgrC,SAAS3hC,QAE1C,IAAM,IAAI9I,EAAI,EAAGy0C,EAAKh1C,KAAKgrC,SAAS3hC,OAAQ9I,EAAIy0C,EAAIz0C,IAEnDyqC,EAAUzqC,GAAM,IAAIid,EAIrB,GAAKu3B,EAAe,CAKnB,MAAM1E,EAAK,IAAI7yB,EAAW8yB,EAAK,IAAI9yB,EAEnC,IAAM,IAAIjL,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEnBg+B,EAAKvwC,KAAKgrC,SAAUe,EAAK3+B,GACzBojC,EAAKxwC,KAAKgrC,SAAUe,EAAK1+B,GACzBojC,EAAKzwC,KAAKgrC,SAAUe,EAAKz+B,GAE/B+iC,EAAG5hC,WAAYgiC,EAAID,GACnBF,EAAG7hC,WAAY8hC,EAAIC,GACnBH,EAAGlpB,MAAOmpB,GAEVtF,EAAUe,EAAK3+B,GAAI6T,IAAKovB,GACxBrF,EAAUe,EAAK1+B,GAAI4T,IAAKovB,GACxBrF,EAAUe,EAAKz+B,GAAI2T,IAAKovB,QAInB,CAENrwC,KAAK2vC,qBAEL,IAAM,IAAIp9B,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEzBy4B,EAAUe,EAAK3+B,GAAI6T,IAAK8qB,EAAKtsB,QAC7BurB,EAAUe,EAAK1+B,GAAI4T,IAAK8qB,EAAKtsB,QAC7BurB,EAAUe,EAAKz+B,GAAI2T,IAAK8qB,EAAKtsB,SAM/B,IAAM,IAAIlf,EAAI,EAAGy0C,EAAKh1C,KAAKgrC,SAAS3hC,OAAQ9I,EAAIy0C,EAAIz0C,IAEnDyqC,EAAUzqC,GAAI+O,YAIf,IAAM,IAAIiD,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEnBqvB,EAAgBmK,EAAKnK,cAEG,IAAzBA,EAAcv4B,QAElBu4B,EAAe,GAAInrB,KAAMu0B,EAAUe,EAAK3+B,IACxCw0B,EAAe,GAAInrB,KAAMu0B,EAAUe,EAAK1+B,IACxCu0B,EAAe,GAAInrB,KAAMu0B,EAAUe,EAAKz+B,MAIxCs0B,EAAe,GAAMoJ,EAAUe,EAAK3+B,GAAIoJ,QACxCorB,EAAe,GAAMoJ,EAAUe,EAAK1+B,GAAImJ,QACxCorB,EAAe,GAAMoJ,EAAUe,EAAKz+B,GAAIkJ,SAMrCxW,KAAK8rC,MAAMziC,OAAS,IAExBrJ,KAAKyrC,mBAAoB,IAM3BwJ,yBAA0B,WAEzBj1C,KAAK2vC,qBAEL,IAAM,IAAIp9B,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEnBqvB,EAAgBmK,EAAKnK,cAEG,IAAzBA,EAAcv4B,QAElBu4B,EAAe,GAAInrB,KAAMs1B,EAAKtsB,QAC9BmiB,EAAe,GAAInrB,KAAMs1B,EAAKtsB,QAC9BmiB,EAAe,GAAInrB,KAAMs1B,EAAKtsB,UAI9BmiB,EAAe,GAAMmK,EAAKtsB,OAAOjJ,QACjCorB,EAAe,GAAMmK,EAAKtsB,OAAOjJ,QACjCorB,EAAe,GAAMmK,EAAKtsB,OAAOjJ,SAM9BxW,KAAK8rC,MAAMziC,OAAS,IAExBrJ,KAAKyrC,mBAAoB,IAM3ByJ,oBAAqB,WAMpB,IAAM,IAAI3iC,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAElBw5B,EAAKoJ,qBAMXpJ,EAAKoJ,qBAAqB1+B,KAAMs1B,EAAKtsB,QAJrCssB,EAAKoJ,qBAAuBpJ,EAAKtsB,OAAOjJ,QAQlCu1B,EAAKqJ,0BAA0BrJ,EAAKqJ,wBAA0B,IAErE,IAAM,IAAIjrC,EAAI,EAAG0W,EAAKkrB,EAAKnK,cAAcv4B,OAAQc,EAAI0W,EAAI1W,IAEjD4hC,EAAKqJ,wBAAyBjrC,GAMpC4hC,EAAKqJ,wBAAyBjrC,GAAIsM,KAAMs1B,EAAKnK,cAAez3B,IAJ5D4hC,EAAKqJ,wBAAyBjrC,GAAM4hC,EAAKnK,cAAez3B,GAAIqM,QAc/D,MAAM6+B,EAAS,IAAIV,GACnBU,EAAOvJ,MAAQ9rC,KAAK8rC,MAEpB,IAAM,IAAI3hC,EAAI,EAAG0W,EAAK7gB,KAAKqlC,aAAah8B,OAAQc,EAAI0W,EAAI1W,IAAO,CAI9D,IAAOnK,KAAK4nC,aAAcz9B,GAAM,CAE/BnK,KAAK4nC,aAAcz9B,GAAM,GACzBnK,KAAK4nC,aAAcz9B,GAAImrC,YAAc,GACrCt1C,KAAK4nC,aAAcz9B,GAAIy3B,cAAgB,GAEvC,MAAM2T,EAAiBv1C,KAAK4nC,aAAcz9B,GAAImrC,YACxCE,EAAmBx1C,KAAK4nC,aAAcz9B,GAAIy3B,cAEhD,IAAM,IAAIrvB,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMkjC,EAAa,IAAIj4B,EACjBokB,EAAgB,CAAEx0B,EAAG,IAAIoQ,EAAWnQ,EAAG,IAAImQ,EAAWlQ,EAAG,IAAIkQ,GAEnE+3B,EAAep3C,KAAMs3C,GACrBD,EAAiBr3C,KAAMyjC,IAMzB,MAAMgG,EAAe5nC,KAAK4nC,aAAcz9B,GAIxCkrC,EAAOrK,SAAWhrC,KAAKqlC,aAAcl7B,GAAI6gC,SAIzCqK,EAAO1F,qBACP0F,EAAOzF,uBAIP,IAAM,IAAIr9B,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEnBkjC,EAAa7N,EAAa0N,YAAa/iC,GACvCqvB,EAAgBgG,EAAahG,cAAervB,GAElDkjC,EAAWh/B,KAAMs1B,EAAKtsB,QAEtBmiB,EAAcx0B,EAAEqJ,KAAMs1B,EAAKnK,cAAe,IAC1CA,EAAcv0B,EAAEoJ,KAAMs1B,EAAKnK,cAAe,IAC1CA,EAAct0B,EAAEmJ,KAAMs1B,EAAKnK,cAAe,KAQ5C,IAAM,IAAIrvB,EAAI,EAAG0hC,EAAKj0C,KAAK8rC,MAAMziC,OAAQkJ,EAAI0hC,EAAI1hC,IAAO,CAEvD,MAAMw5B,EAAO/rC,KAAK8rC,MAAOv5B,GAEzBw5B,EAAKtsB,OAASssB,EAAKoJ,qBACnBpJ,EAAKnK,cAAgBmK,EAAKqJ,0BAM5BxzB,mBAAoB,WAEO,OAArB5hB,KAAK2hB,cAET3hB,KAAK2hB,YAAc,IAAIzB,GAIxBlgB,KAAK2hB,YAAYwB,cAAenjB,KAAKgrC,WAItCkD,sBAAuB,WAEO,OAAxBluC,KAAKurC,iBAETvrC,KAAKurC,eAAiB,IAAI1nB,GAI3B7jB,KAAKurC,eAAepoB,cAAenjB,KAAKgrC,WAIzC2F,MAAO,SAAWjvB,EAAUhP,EAAQgjC,GAEnC,IAASh0B,IAAYA,EAASktB,WAG7B,YADAtwC,QAAQ0R,MAAO,sEAAuE0R,GAKvF,IAAI+L,EACJ,MAAMkoB,EAAe31C,KAAKgrC,SAAS3hC,OAClCusC,EAAY51C,KAAKgrC,SACjB6K,EAAYn0B,EAASspB,SACrB8K,EAAS91C,KAAK8rC,MACdiK,EAASr0B,EAASoqB,MAClBkK,EAAUh2C,KAAKgqC,OACfiM,EAAUv0B,EAASsoB,YAESrpC,IAAxB+0C,IAAoCA,EAAsB,QAE/C/0C,IAAX+R,IAEJ+a,GAAe,IAAI1d,GAAUqjB,gBAAiB1gB,IAM/C,IAAM,IAAIvI,EAAI,EAAG0W,EAAKg1B,EAAUxsC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAEM+rC,EAFSL,EAAW1rC,GAEAqM,aAEV7V,IAAX+R,GAAuBwjC,EAAW33B,aAAc7L,GAErDkjC,EAAUz3C,KAAM+3C,GAMjB,IAAM,IAAI/rC,EAAI,EAAG0W,EAAKo1B,EAAQ5sC,OAAQc,EAAI0W,EAAI1W,IAE7C6rC,EAAQ73C,KAAM83C,EAAS9rC,GAAIqM,SAM5B,IAAM,IAAIrM,EAAI,EAAG0W,EAAKk1B,EAAO1sC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEnD,MAAM4hC,EAAOgK,EAAQ5rC,GACrB,IAAIsV,EAAQ4gB,EACZ,MAAM8V,EAAoBpK,EAAKnK,cAC9BwU,EAAmBrK,EAAKlK,aAEnBwU,EAAW,IAAI3U,GAAOqK,EAAK3+B,EAAIuoC,EAAc5J,EAAK1+B,EAAIsoC,EAAc5J,EAAKz+B,EAAIqoC,GACnFU,EAAS52B,OAAOhJ,KAAMs1B,EAAKtsB,aAEL9e,IAAjB8sB,GAEJ4oB,EAAS52B,OAAOlI,aAAckW,GAAene,YAI9C,IAAM,IAAIiU,EAAI,EAAGmsB,EAAKyG,EAAkB9sC,OAAQka,EAAImsB,EAAInsB,IAEvD9D,EAAS02B,EAAmB5yB,GAAI/M,aAEV7V,IAAjB8sB,GAEJhO,EAAOlI,aAAckW,GAAene,YAIrC+mC,EAASzU,cAAczjC,KAAMshB,GAI9B42B,EAAShW,MAAM5pB,KAAMs1B,EAAK1L,OAE1B,IAAM,IAAI9c,EAAI,EAAGmsB,EAAK0G,EAAiB/sC,OAAQka,EAAImsB,EAAInsB,IAEtD8c,EAAQ+V,EAAkB7yB,GAC1B8yB,EAASxU,aAAa1jC,KAAMkiC,EAAM7pB,SAInC6/B,EAAS1U,cAAgBoK,EAAKpK,cAAgB+T,EAE9CI,EAAO33C,KAAMk4C,GAMd,IAAM,IAAIlsC,EAAI,EAAG0W,EAAKa,EAASsqB,cAAc3iC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEnE,MAAMmsC,EAAiB50B,EAASsqB,cAAe7hC,QAEdxJ,IAA5BX,KAAKgsC,cAAe7hC,KAAoBnK,KAAKgsC,cAAe7hC,GAAM,IAEvE,IAAM,IAAIoZ,EAAI,EAAGmsB,EAAK4G,EAAejtC,OAAQka,EAAImsB,EAAInsB,IAAO,CAE3D,MAAM4nB,EAAOmL,EAAgB/yB,GAAKgzB,EAAU,GAE5C,IAAM,IAAIr1C,EAAI,EAAGs1C,EAAKrL,EAAK9hC,OAAQnI,EAAIs1C,EAAIt1C,IAE1Cq1C,EAAQp4C,KAAMgtC,EAAMjqC,GAAIsV,SAIzBxW,KAAKgsC,cAAe7hC,GAAIhM,KAAMo4C,MAQjCE,UAAW,SAAWC,GAEZA,GAAQA,EAAKllB,QAOjBklB,EAAK7gC,kBAAmB6gC,EAAKpgC,eAElCtW,KAAK2wC,MAAO+F,EAAKh1B,SAAUg1B,EAAKhkC,SAP/BpU,QAAQ0R,MAAO,kEAAmE0mC,IAiBpFC,cAAe,WAEd,MAAMC,EAAc,GACdC,EAAS,GAAIC,EAAU,GAGvBlT,EAAYvmC,KAAKkL,IAAK,GADJ,GAGxB,IAAM,IAAI4B,EAAI,EAAG0W,EAAK7gB,KAAKgrC,SAAS3hC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE1D,MAAM5J,EAAIP,KAAKgrC,SAAU7gC,GACnB5I,EAAMlE,KAAK0R,MAAOxO,EAAEqI,EAAIg7B,GAAc,IAAMvmC,KAAK0R,MAAOxO,EAAEsL,EAAI+3B,GAAc,IAAMvmC,KAAK0R,MAAOxO,EAAEkX,EAAImsB,QAE9EjjC,IAAvBi2C,EAAar1C,IAEjBq1C,EAAar1C,GAAQ4I,EACrB0sC,EAAO14C,KAAM6B,KAAKgrC,SAAU7gC,IAC5B2sC,EAAS3sC,GAAM0sC,EAAOxtC,OAAS,GAK/BytC,EAAS3sC,GAAM2sC,EAASF,EAAar1C,IASvC,MAAMw1C,EAAsB,GAE5B,IAAM,IAAI5sC,EAAI,EAAG0W,EAAK7gB,KAAK8rC,MAAMziC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAM4hC,EAAO/rC,KAAK8rC,MAAO3hC,GAEzB4hC,EAAK3+B,EAAI0pC,EAAS/K,EAAK3+B,GACvB2+B,EAAK1+B,EAAIypC,EAAS/K,EAAK1+B,GACvB0+B,EAAKz+B,EAAIwpC,EAAS/K,EAAKz+B,GAEvB,MAAM4jC,EAAU,CAAEnF,EAAK3+B,EAAG2+B,EAAK1+B,EAAG0+B,EAAKz+B,GAIvC,IAAM,IAAIjC,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAK6lC,EAAS7lC,KAAQ6lC,GAAW7lC,EAAI,GAAM,GAAM,CAEhD0rC,EAAoB54C,KAAMgM,GAC1B,OAQH,IAAM,IAAIA,EAAI4sC,EAAoB1tC,OAAS,EAAGc,GAAK,EAAGA,IAAO,CAE5D,MAAM6sC,EAAMD,EAAqB5sC,GAEjCnK,KAAK8rC,MAAM/hC,OAAQitC,EAAK,GAExB,IAAM,IAAIzzB,EAAI,EAAGmsB,EAAK1vC,KAAKgsC,cAAc3iC,OAAQka,EAAImsB,EAAInsB,IAExDvjB,KAAKgsC,cAAezoB,GAAIxZ,OAAQitC,EAAK,GAQvC,MAAMC,EAAOj3C,KAAKgrC,SAAS3hC,OAASwtC,EAAOxtC,OAE3C,OADArJ,KAAKgrC,SAAW6L,EACTI,GAIR9zB,cAAe,SAAWxC,GAEzB3gB,KAAKgrC,SAAW,GAEhB,IAAM,IAAI7gC,EAAI,EAAGC,EAAIuW,EAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMmX,EAAQX,EAAQxW,GACtBnK,KAAKgrC,SAAS7sC,KAAM,IAAIqf,EAAS8D,EAAM1Y,EAAG0Y,EAAMzV,EAAGyV,EAAM7J,GAAK,IAI/D,OAAOzX,MAIRk3C,yBAA0B,WAEzB,MAAMpL,EAAQ9rC,KAAK8rC,MACbziC,EAASyiC,EAAMziC,OAIrB,IAAM,IAAIc,EAAI,EAAGA,EAAId,EAAQc,IAE5B2hC,EAAO3hC,GAAIgtC,IAAMhtC,EAYlB2hC,EAAMsL,MANN,SAA4BhqC,EAAGC,GAE9B,OAAOD,EAAEu0B,cAAgBt0B,EAAEs0B,iBAQ5B,MAAM0V,EAAOr3C,KAAKgsC,cAAe,GAC3Bb,EAAOnrC,KAAKgsC,cAAe,GAEjC,IAAIsL,EAASC,EAERF,GAAQA,EAAKhuC,SAAWA,IAASiuC,EAAU,IAC3CnM,GAAQA,EAAK9hC,SAAWA,IAASkuC,EAAU,IAEhD,IAAM,IAAIptC,EAAI,EAAGA,EAAId,EAAQc,IAAO,CAEnC,MAAM8lB,EAAK6b,EAAO3hC,GAAIgtC,IAEjBG,GAAUA,EAAQn5C,KAAMk5C,EAAMpnB,IAC9BsnB,GAAUA,EAAQp5C,KAAMgtC,EAAMlb,IAI/BqnB,IAAUt3C,KAAKgsC,cAAe,GAAMsL,GACpCC,IAAUv3C,KAAKgsC,cAAe,GAAMuL,IAI1C7gC,OAAQ,WAEP,MAAMwb,EAAO,CACZpb,SAAU,CACTZ,QAAS,IACTpX,KAAM,WACNiY,UAAW,oBAUb,GAJAmb,EAAK3c,KAAOvV,KAAKuV,KACjB2c,EAAKpzB,KAAOkB,KAAKlB,KACE,KAAdkB,KAAKmB,OAAc+wB,EAAK/wB,KAAOnB,KAAKmB,WAEhBR,IAApBX,KAAK2xB,WAA2B,CAEpC,MAAMA,EAAa3xB,KAAK2xB,WAExB,IAAM,MAAMpwB,KAAOowB,OAEShxB,IAAtBgxB,EAAYpwB,KAAsB2wB,EAAM3wB,GAAQowB,EAAYpwB,IAIlE,OAAO2wB,EAIR,MAAM8Y,EAAW,GAEjB,IAAM,IAAI7gC,EAAI,EAAGA,EAAInK,KAAKgrC,SAAS3hC,OAAQc,IAAO,CAEjD,MAAMqtC,EAASx3C,KAAKgrC,SAAU7gC,GAC9B6gC,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI3C,MAAMq0B,EAAQ,GACRb,EAAU,GACVwM,EAAc,GACdzN,EAAS,GACT0N,EAAa,GACbxM,EAAM,GACNyM,EAAU,GAEhB,IAAM,IAAIxtC,EAAI,EAAGA,EAAInK,KAAK8rC,MAAMziC,OAAQc,IAAO,CAE9C,MAAM4hC,EAAO/rC,KAAK8rC,MAAO3hC,GAEnBytC,GAAc,EACdC,GAAY,EACZ5L,OAAmDtrC,IAAjCX,KAAKgsC,cAAe,GAAK7hC,GAC3C2tC,EAAgB/L,EAAKtsB,OAAOpW,SAAW,EACvC0uC,EAAsBhM,EAAKnK,cAAcv4B,OAAS,EAClD2uC,EAAgC,IAAjBjM,EAAK1L,MAAM/sB,GAA4B,IAAjBy4B,EAAK1L,MAAM7tB,GAA4B,IAAjBu5B,EAAK1L,MAAMhzB,EACtE4qC,EAAqBlM,EAAKlK,aAAax4B,OAAS,EAEtD,IAAI6uC,EAAW,EAef,GAbAA,EAAWC,EAAQD,EAAU,EAAG,GAChCA,EAAWC,EAAQD,EAAU,EAAGN,GAChCM,EAAWC,EAAQD,EAAU,EAAGL,GAChCK,EAAWC,EAAQD,EAAU,EAAGjM,GAChCiM,EAAWC,EAAQD,EAAU,EAAGJ,GAChCI,EAAWC,EAAQD,EAAU,EAAGH,GAChCG,EAAWC,EAAQD,EAAU,EAAGF,GAChCE,EAAWC,EAAQD,EAAU,EAAGD,GAEhCnM,EAAM3tC,KAAM+5C,GACZpM,EAAM3tC,KAAM4tC,EAAK3+B,EAAG2+B,EAAK1+B,EAAG0+B,EAAKz+B,GACjCw+B,EAAM3tC,KAAM4tC,EAAKpK,eAEZsK,EAAkB,CAEtB,MAAMD,EAAgBhsC,KAAKgsC,cAAe,GAAK7hC,GAE/C2hC,EAAM3tC,KACLi6C,EAAYpM,EAAe,IAC3BoM,EAAYpM,EAAe,IAC3BoM,EAAYpM,EAAe,KAW7B,GANK8L,GAEJhM,EAAM3tC,KAAMk6C,EAAgBtM,EAAKtsB,SAI7Bs4B,EAAsB,CAE1B,MAAMnW,EAAgBmK,EAAKnK,cAE3BkK,EAAM3tC,KACLk6C,EAAgBzW,EAAe,IAC/ByW,EAAgBzW,EAAe,IAC/ByW,EAAgBzW,EAAe,KAWjC,GANKoW,GAEJlM,EAAM3tC,KAAMm6C,EAAevM,EAAK1L,QAI5B4X,EAAqB,CAEzB,MAAMpW,EAAekK,EAAKlK,aAE1BiK,EAAM3tC,KACLm6C,EAAezW,EAAc,IAC7ByW,EAAezW,EAAc,IAC7ByW,EAAezW,EAAc,MAOhC,SAASsW,EAAQt5C,EAAOurB,EAAUmuB,GAEjC,OAAOA,EAAU15C,EAAU,GAAKurB,EAAavrB,IAAc,GAAKurB,GAIjE,SAASiuB,EAAgB54B,GAExB,MAAM+4B,EAAO/4B,EAAO7W,EAAEE,WAAa2W,EAAO5T,EAAE/C,WAAa2W,EAAOhI,EAAE3O,WAElE,YAA6BnI,IAAxB82C,EAAae,KAMlBf,EAAae,GAASvN,EAAQ5hC,OAAS,EACvC4hC,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,IALjCggC,EAAae,GAWtB,SAASF,EAAejY,GAEvB,MAAMmY,EAAOnY,EAAM/sB,EAAExK,WAAau3B,EAAM7tB,EAAE1J,WAAau3B,EAAMhzB,EAAEvE,WAE/D,YAA4BnI,IAAvB+2C,EAAYc,KAMjBd,EAAYc,GAASxO,EAAO3gC,OAC5B2gC,EAAO7rC,KAAMkiC,EAAMY,WALXyW,EAAYc,GAWrB,SAASJ,EAAY9gC,GAEpB,MAAMkhC,EAAOlhC,EAAG1O,EAAEE,WAAawO,EAAGzL,EAAE/C,WAEpC,YAAyBnI,IAApBg3C,EAASa,KAMdb,EAASa,GAAStN,EAAI7hC,OAAS,EAC/B6hC,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,IALX8rC,EAASa,GAmBlB,OARAtmB,EAAKA,KAAO,GAEZA,EAAKA,KAAK8Y,SAAWA,EACrB9Y,EAAKA,KAAK+Y,QAAUA,EACfjB,EAAO3gC,OAAS,IAAI6oB,EAAKA,KAAK8X,OAASA,GACvCkB,EAAI7hC,OAAS,IAAI6oB,EAAKA,KAAKgZ,IAAM,CAAEA,IACxChZ,EAAKA,KAAK4Z,MAAQA,EAEX5Z,GAIR1b,MAAO,WA0BN,OAAO,IAAIm+B,IAAWl+B,KAAMzW,OAI7ByW,KAAM,SAAWnN,GAIhBtJ,KAAKgrC,SAAW,GAChBhrC,KAAKgqC,OAAS,GACdhqC,KAAK8rC,MAAQ,GACb9rC,KAAKgsC,cAAgB,CAAC,IACtBhsC,KAAKqlC,aAAe,GACpBrlC,KAAK4nC,aAAe,GACpB5nC,KAAKqrC,YAAc,GACnBrrC,KAAKsrC,YAAc,GACnBtrC,KAAK2uC,cAAgB,GACrB3uC,KAAK2hB,YAAc,KACnB3hB,KAAKurC,eAAiB,KAItBvrC,KAAKmB,KAAOmI,EAAOnI,KAInB,MAAM6pC,EAAW1hC,EAAO0hC,SAExB,IAAM,IAAI7gC,EAAI,EAAG0W,EAAKmqB,EAAS3hC,OAAQc,EAAI0W,EAAI1W,IAE9CnK,KAAKgrC,SAAS7sC,KAAM6sC,EAAU7gC,GAAIqM,SAMnC,MAAMwzB,EAAS1gC,EAAO0gC,OAEtB,IAAM,IAAI7/B,EAAI,EAAG0W,EAAKmpB,EAAO3gC,OAAQc,EAAI0W,EAAI1W,IAE5CnK,KAAKgqC,OAAO7rC,KAAM6rC,EAAQ7/B,GAAIqM,SAM/B,MAAMs1B,EAAQxiC,EAAOwiC,MAErB,IAAM,IAAI3hC,EAAI,EAAG0W,EAAKirB,EAAMziC,OAAQc,EAAI0W,EAAI1W,IAE3CnK,KAAK8rC,MAAM3tC,KAAM2tC,EAAO3hC,GAAIqM,SAM7B,IAAM,IAAIrM,EAAI,EAAG0W,EAAKvX,EAAO0iC,cAAc3iC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEjE,MAAM6hC,EAAgB1iC,EAAO0iC,cAAe7hC,QAEXxJ,IAA5BX,KAAKgsC,cAAe7hC,KAExBnK,KAAKgsC,cAAe7hC,GAAM,IAI3B,IAAM,IAAIoZ,EAAI,EAAGmsB,EAAK1D,EAAc3iC,OAAQka,EAAImsB,EAAInsB,IAAO,CAE1D,MAAM2nB,EAAMc,EAAezoB,GAAKgzB,EAAU,GAE1C,IAAM,IAAIr1C,EAAI,EAAGs1C,EAAKtL,EAAI7hC,OAAQnI,EAAIs1C,EAAIt1C,IAAO,CAEhD,MAAMoW,EAAK4zB,EAAKhqC,GAEhBq1C,EAAQp4C,KAAMmZ,EAAGd,SAIlBxW,KAAKgsC,cAAe7hC,GAAIhM,KAAMo4C,IAQhC,MAAMlR,EAAe/7B,EAAO+7B,aAE5B,IAAM,IAAIl7B,EAAI,EAAG0W,EAAKwkB,EAAah8B,OAAQc,EAAI0W,EAAI1W,IAAO,CAEzD,MAAMuiC,EAAc,GAKpB,GAJAA,EAAYvrC,KAAOkkC,EAAcl7B,GAAIhJ,UAIDR,IAA/B0kC,EAAcl7B,GAAI6gC,SAAyB,CAE/C0B,EAAY1B,SAAW,GAEvB,IAAM,IAAIznB,EAAI,EAAGmsB,EAAKrK,EAAcl7B,GAAI6gC,SAAS3hC,OAAQka,EAAImsB,EAAInsB,IAEhEmpB,EAAY1B,SAAS7sC,KAAMknC,EAAcl7B,GAAI6gC,SAAUznB,GAAI/M,SAQ7D,QAAmC7V,IAA9B0kC,EAAcl7B,GAAI8gC,QAAwB,CAE9CyB,EAAYzB,QAAU,GAEtB,IAAM,IAAI1nB,EAAI,EAAGmsB,EAAKrK,EAAcl7B,GAAI8gC,QAAQ5hC,OAAQka,EAAImsB,EAAInsB,IAE/DmpB,EAAYzB,QAAQ9sC,KAAMknC,EAAcl7B,GAAI8gC,QAAS1nB,GAAI/M,SAM3DxW,KAAKqlC,aAAalnC,KAAMuuC,GAMzB,MAAM9E,EAAet+B,EAAOs+B,aAE5B,IAAM,IAAIz9B,EAAI,EAAG0W,EAAK+mB,EAAav+B,OAAQc,EAAI0W,EAAI1W,IAAO,CAEzD,MAAMwiC,EAAc,GAIpB,QAAyChsC,IAApCinC,EAAcz9B,GAAIy3B,cAA8B,CAEpD+K,EAAY/K,cAAgB,GAE5B,IAAM,IAAIre,EAAI,EAAGmsB,EAAK9H,EAAcz9B,GAAIy3B,cAAcv4B,OAAQka,EAAImsB,EAAInsB,IAAO,CAE5E,MAAMk1B,EAAkB7Q,EAAcz9B,GAAIy3B,cAAere,GACnDm1B,EAAmB,GAEzBA,EAAiBtrC,EAAIqrC,EAAgBrrC,EAAEoJ,QACvCkiC,EAAiBrrC,EAAIorC,EAAgBprC,EAAEmJ,QACvCkiC,EAAiBprC,EAAImrC,EAAgBnrC,EAAEkJ,QAEvCm2B,EAAY/K,cAAczjC,KAAMu6C,IAQlC,QAAuC/3C,IAAlCinC,EAAcz9B,GAAImrC,YAA4B,CAElD3I,EAAY2I,YAAc,GAE1B,IAAM,IAAI/xB,EAAI,EAAGmsB,EAAK9H,EAAcz9B,GAAImrC,YAAYjsC,OAAQka,EAAImsB,EAAInsB,IAEnEopB,EAAY2I,YAAYn3C,KAAMypC,EAAcz9B,GAAImrC,YAAa/xB,GAAI/M,SAMnExW,KAAK4nC,aAAazpC,KAAMwuC,GAMzB,MAAMtB,EAAc/hC,EAAO+hC,YAE3B,IAAM,IAAIlhC,EAAI,EAAG0W,EAAKwqB,EAAYhiC,OAAQc,EAAI0W,EAAI1W,IAEjDnK,KAAKqrC,YAAYltC,KAAMktC,EAAalhC,GAAIqM,SAMzC,MAAM80B,EAAchiC,EAAOgiC,YAE3B,IAAM,IAAInhC,EAAI,EAAG0W,EAAKyqB,EAAYjiC,OAAQc,EAAI0W,EAAI1W,IAEjDnK,KAAKsrC,YAAYntC,KAAMmtC,EAAanhC,GAAIqM,SAMzC,MAAMm4B,EAAgBrlC,EAAOqlC,cAE7B,IAAM,IAAIxkC,EAAI,EAAG0W,EAAK8tB,EAActlC,OAAQc,EAAI0W,EAAI1W,IAEnDnK,KAAK2uC,cAAcxwC,KAAMwwC,EAAexkC,IAMzC,MAAMwX,EAAcrY,EAAOqY,YAEN,OAAhBA,IAEJ3hB,KAAK2hB,YAAcA,EAAYnL,SAMhC,MAAM+0B,EAAiBjiC,EAAOiiC,eAkB9B,OAhBwB,OAAnBA,IAEJvrC,KAAKurC,eAAiBA,EAAe/0B,SAMtCxW,KAAKivC,mBAAqB3lC,EAAO2lC,mBACjCjvC,KAAKwrC,mBAAqBliC,EAAOkiC,mBACjCxrC,KAAK2rC,cAAgBriC,EAAOqiC,cAC5B3rC,KAAKyrC,kBAAoBniC,EAAOmiC,kBAChCzrC,KAAK0rC,iBAAmBpiC,EAAOoiC,iBAC/B1rC,KAAKkvC,wBAA0B5lC,EAAO4lC,wBACtClvC,KAAK4rC,iBAAmBtiC,EAAOsiC,iBAExB5rC,MAIRoX,QAAS,WAERpX,KAAKgK,cAAe,CAAElL,KAAM,eAkC9B,MAAM65C,WAA0BvL,GAE/BxuC,YAAauP,EAAQ,EAAGC,EAAS,EAAGwqC,EAAQ,EAAGC,EAAgB,EAAGC,EAAiB,EAAGC,EAAgB,GAErGh5C,QAEAC,KAAKlB,KAAO,oBAEZkB,KAAK2xB,WAAa,CACjBxjB,MAAOA,EACPC,OAAQA,EACRwqC,MAAOA,EACPC,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB,MAAMlE,EAAQ70C,KAId64C,EAAgBx7C,KAAKqL,MAAOmwC,GAC5BC,EAAiBz7C,KAAKqL,MAAOowC,GAC7BC,EAAgB17C,KAAKqL,MAAOqwC,GAI5B,MAAM7H,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAI8N,EAAmB,EACnBC,EAAa,EAkBjB,SAASC,EAAYxkB,EAAGn0B,EAAGgO,EAAG4qC,EAAMC,EAAMjrC,EAAOC,EAAQwqC,EAAOS,EAAOC,EAAO3X,GAE7E,MAAM4X,EAAeprC,EAAQkrC,EACvBG,EAAgBprC,EAASkrC,EAEzBG,EAAYtrC,EAAQ,EACpBurC,EAAatrC,EAAS,EACtBurC,EAAYf,EAAQ,EAEpBgB,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEvB,IAAIQ,EAAgB,EAChBC,EAAa,EAEjB,MAAMx4B,EAAS,IAAI/D,EAInB,IAAM,IAAIW,EAAK,EAAGA,EAAK07B,EAAQ17B,IAAQ,CAEtC,MAAMtS,EAAIsS,EAAKq7B,EAAgBE,EAE/B,IAAM,IAAIx7B,EAAK,EAAGA,EAAK07B,EAAQ17B,IAAQ,CAEtC,MAAMtV,EAAIsV,EAAKq7B,EAAeE,EAI9Bl4B,EAAQmT,GAAM9rB,EAAIuwC,EAClB53B,EAAQhhB,GAAMsL,EAAIutC,EAClB73B,EAAQhT,GAAMorC,EAId3O,EAAS7sC,KAAMojB,EAAO3Y,EAAG2Y,EAAO1V,EAAG0V,EAAO9J,GAI1C8J,EAAQmT,GAAM,EACdnT,EAAQhhB,GAAM,EACdghB,EAAQhT,GAAMqqC,EAAQ,EAAI,GAAM,EAIhC3N,EAAQ9sC,KAAMojB,EAAO3Y,EAAG2Y,EAAO1V,EAAG0V,EAAO9J,GAIzCyzB,EAAI/sC,KAAM+f,EAAKm7B,GACfnO,EAAI/sC,KAAM,EAAMggB,EAAKm7B,GAIrBQ,GAAiB,GAYnB,IAAM,IAAI37B,EAAK,EAAGA,EAAKm7B,EAAOn7B,IAE7B,IAAM,IAAID,EAAK,EAAGA,EAAKm7B,EAAOn7B,IAAQ,CAErC,MAAM9Q,EAAI4rC,EAAmB96B,EAAK07B,EAASz7B,EACrC9Q,EAAI2rC,EAAmB96B,EAAK07B,GAAWz7B,EAAK,GAC5C7Q,EAAI0rC,GAAqB96B,EAAK,GAAM07B,GAAWz7B,EAAK,GACpD7L,EAAI0mC,GAAqB96B,EAAK,GAAM07B,EAASz7B,EAInD+yB,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAIpBynC,GAAc,EAQhBlF,EAAMhH,SAAUoL,EAAYc,EAAYpY,GAIxCsX,GAAcc,EAIdf,GAAoBc,EAhHrBZ,EAAY,IAAK,IAAK,KAAO,GAAK,EAAGN,EAAOxqC,EAAQD,EAAO4qC,EAAeD,EAAgB,GAC1FI,EAAY,IAAK,IAAK,IAAK,GAAK,EAAGN,EAAOxqC,GAAUD,EAAO4qC,EAAeD,EAAgB,GAC1FI,EAAY,IAAK,IAAK,IAAK,EAAG,EAAG/qC,EAAOyqC,EAAOxqC,EAAQyqC,EAAeE,EAAe,GACrFG,EAAY,IAAK,IAAK,IAAK,GAAK,EAAG/qC,EAAOyqC,GAASxqC,EAAQyqC,EAAeE,EAAe,GACzFG,EAAY,IAAK,IAAK,IAAK,GAAK,EAAG/qC,EAAOC,EAAQwqC,EAAOC,EAAeC,EAAgB,GACxFI,EAAY,IAAK,IAAK,KAAO,GAAK,EAAG/qC,EAAOC,GAAUwqC,EAAOC,EAAeC,EAAgB,GAI5F94C,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAgH5D,SAAS8O,GAAe7lC,GAEvB,MAAMiG,EAAM,GAEZ,IAAM,MAAMsa,KAAKvgB,EAAM,CAEtBiG,EAAKsa,GAAM,GAEX,IAAM,MAAMl0B,KAAK2T,EAAKugB,GAAM,CAE3B,MAAM9uB,EAAWuO,EAAKugB,GAAKl0B,GAEtBoF,IAAcA,EAASg6B,SAC3Bh6B,EAASq0C,WAAar0C,EAASs0C,WAC/Bt0C,EAASu0C,WAAav0C,EAASmkB,WAAankB,EAASw0C,WACrDx0C,EAASyQ,WAET+D,EAAKsa,GAAKl0B,GAAMoF,EAAS4Q,QAEdvX,MAAMkY,QAASvR,GAE1BwU,EAAKsa,GAAKl0B,GAAMoF,EAASrI,QAIzB6c,EAAKsa,GAAKl0B,GAAMoF,GAQnB,OAAOwU,EAIR,SAASigC,GAAeC,GAEvB,MAAMC,EAAS,GAEf,IAAM,IAAI7lB,EAAI,EAAGA,EAAI4lB,EAASjxC,OAAQqrB,IAAO,CAE5C,MAAMzhB,EAAM+mC,GAAeM,EAAU5lB,IAErC,IAAM,MAAMl0B,KAAKyS,EAEhBsnC,EAAQ/5C,GAAMyS,EAAKzS,GAMrB,OAAO+5C,EAMR,MAAMC,GAAgB,CAAEhkC,MAAOwjC,GAAerJ,MAAO0J,IAyBrD,SAASI,GAAgB9oB,GAExBoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,iBAEZkB,KAAK06C,QAAU,GACf16C,KAAKs6C,SAAW,GAEhBt6C,KAAK26C,aAhCe,gGAiCpB36C,KAAK46C,eA/BiB,iEAiCtB56C,KAAKynC,UAAY,EAEjBznC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAE1BjlC,KAAKgiC,KAAM,EACXhiC,KAAK66C,QAAS,EACd76C,KAAK86C,UAAW,EAEhB96C,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAK+6C,WAAa,CACjBC,aAAa,EACbC,WAAW,EACXC,aAAa,EACbC,kBAAkB,GAKnBn7C,KAAKo7C,uBAAyB,CAC7B/a,MAAS,CAAE,EAAG,EAAG,GACjB/oB,GAAM,CAAE,EAAG,GACXwd,IAAO,CAAE,EAAG,IAGb90B,KAAKq7C,yBAAsB16C,EAC3BX,KAAKs7C,oBAAqB,EAE1Bt7C,KAAKu7C,YAAc,UAEC56C,IAAfgxB,SAE2BhxB,IAA1BgxB,EAAWvxB,YAEf9B,QAAQ0R,MAAO,2FAIhBhQ,KAAKslC,UAAW3T,IAqIlB,SAAS6pB,KAERruB,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,SAEZkB,KAAKwe,mBAAqB,IAAI8I,GAE9BtnB,KAAKye,iBAAmB,IAAI6I,GAC5BtnB,KAAK0e,wBAA0B,IAAI4I,GAgEpC,SAASm0B,GAAmBC,EAAKC,EAAQrwB,EAAMC,GAE9CiwB,GAAO71C,KAAM3F,MAEbA,KAAKlB,KAAO,oBAEZkB,KAAK07C,SAAc/6C,IAAR+6C,EAAoBA,EAAM,GACrC17C,KAAK47C,KAAO,EAEZ57C,KAAKsrB,UAAgB3qB,IAAT2qB,EAAqBA,EAAO,GACxCtrB,KAAKurB,SAAc5qB,IAAR4qB,EAAoBA,EAAM,IACrCvrB,KAAK67C,MAAQ,GAEb77C,KAAK27C,YAAoBh7C,IAAXg7C,EAAuBA,EAAS,EAC9C37C,KAAK87C,KAAO,KAEZ97C,KAAK+7C,UAAY,GACjB/7C,KAAKg8C,WAAa,EAElBh8C,KAAKi8C,yBA3NNxB,GAAen5C,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACnDm5C,GAAen5C,UAAU4B,YAAcu3C,GAEvCA,GAAen5C,UAAU46C,kBAAmB,EAE5CzB,GAAen5C,UAAUmV,KAAO,SAAWnN,GA0B1C,OAxBAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK46C,eAAiBtxC,EAAOsxC,eAC7B56C,KAAK26C,aAAerxC,EAAOqxC,aAE3B36C,KAAKs6C,SAAWN,GAAe1wC,EAAOgxC,UAEtCt6C,KAAK06C,QAAU17C,OAAOuG,OAAQ,GAAI+D,EAAOoxC,SAEzC16C,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBAEjCjlC,KAAK66C,OAASvxC,EAAOuxC,OACrB76C,KAAK86C,SAAWxxC,EAAOwxC,SAEvB96C,KAAKolC,SAAW97B,EAAO87B,SAEvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAE3B5nC,KAAK+6C,WAAa/7C,OAAOuG,OAAQ,GAAI+D,EAAOyxC,YAE5C/6C,KAAKu7C,YAAcjyC,EAAOiyC,YAEnBv7C,MAIRy6C,GAAen5C,UAAUoV,OAAS,SAAWC,GAE5C,MAAMub,EAAO6P,GAASzgC,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAEnDub,EAAKqpB,YAAcv7C,KAAKu7C,YACxBrpB,EAAKooB,SAAW,GAEhB,IAAM,MAAMn5C,KAAQnB,KAAKs6C,SAAW,CAEnC,MACMz7C,EADUmB,KAAKs6C,SAAUn5C,GACTtC,MAEjBA,GAASA,EAAMwX,UAEnB6b,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,IACND,MAAOA,EAAM6X,OAAQC,GAAOpB,MAGlB1W,GAASA,EAAM+gC,QAE1B1N,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,IACND,MAAOA,EAAMoiC,UAGHpiC,GAASA,EAAMs7C,UAE1BjoB,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,KACND,MAAOA,EAAMwyB,WAGHxyB,GAASA,EAAMkrB,UAE1BmI,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,KACND,MAAOA,EAAMwyB,WAGHxyB,GAASA,EAAMu7C,UAE1BloB,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,KACND,MAAOA,EAAMwyB,WAGHxyB,GAASA,EAAMo7C,UAE1B/nB,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,KACND,MAAOA,EAAMwyB,WAGHxyB,GAASA,EAAMq7C,UAE1BhoB,EAAKooB,SAAUn5C,GAAS,CACvBrC,KAAM,KACND,MAAOA,EAAMwyB,WAKda,EAAKooB,SAAUn5C,GAAS,CACvBtC,MAAOA,GASLG,OAAOuyC,KAAMvxC,KAAK06C,SAAUrxC,OAAS,IAAI6oB,EAAKwoB,QAAU16C,KAAK06C,SAElExoB,EAAKyoB,aAAe36C,KAAK26C,aACzBzoB,EAAK0oB,eAAiB56C,KAAK46C,eAE3B,MAAMG,EAAa,GAEnB,IAAM,MAAMx5C,KAAOvB,KAAK+6C,YAES,IAA3B/6C,KAAK+6C,WAAYx5C,KAAiBw5C,EAAYx5C,IAAQ,GAM5D,OAFKvC,OAAOuyC,KAAMwJ,GAAa1xC,OAAS,IAAI6oB,EAAK6oB,WAAaA,GAEvD7oB,GAiBRspB,GAAOl6C,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEtE4B,YAAas4C,GAEb9rB,UAAU,EAEVjZ,KAAM,SAAWnN,EAAQ6oB,GASxB,OAPAhF,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,EAAQ6oB,GAE5CnyB,KAAKwe,mBAAmB/H,KAAMnN,EAAOkV,oBAErCxe,KAAKye,iBAAiBhI,KAAMnN,EAAOmV,kBACnCze,KAAK0e,wBAAwBjI,KAAMnN,EAAOoV,yBAEnC1e,MAIRwwB,kBAAmB,SAAWxnB,QAEbrI,IAAXqI,IAEJ1K,QAAQC,KAAM,6DACdyK,EAAS,IAAIwU,GAIdxd,KAAKqwB,mBAAmB,GAExB,MAAM/rB,EAAItE,KAAK2e,YAAYhQ,SAE3B,OAAO3F,EAAOnI,KAAOyD,EAAG,IAAOA,EAAG,IAAOA,EAAG,KAAOgL,aAIpD+gB,kBAAmB,SAAWQ,GAE7B1D,GAAS7rB,UAAU+uB,kBAAkB1qB,KAAM3F,KAAM6wB,GAEjD7wB,KAAKwe,mBAAmBpL,WAAYpT,KAAK2e,cAI1C8C,kBAAmB,SAAWqP,EAAeC,GAE5C5D,GAAS7rB,UAAUmgB,kBAAkB9b,KAAM3F,KAAM8wB,EAAeC,GAEhE/wB,KAAKwe,mBAAmBpL,WAAYpT,KAAK2e,cAI1CnI,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,SA6BtCy7C,GAAkBn6C,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQolC,GAAOl6C,WAAa,CAE/E4B,YAAau4C,GAEbU,qBAAqB,EAErB1lC,KAAM,SAAWnN,EAAQ6oB,GAiBxB,OAfAqpB,GAAOl6C,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,EAAQ6oB,GAE1CnyB,KAAK07C,IAAMpyC,EAAOoyC,IAClB17C,KAAK47C,KAAOtyC,EAAOsyC,KAEnB57C,KAAKsrB,KAAOhiB,EAAOgiB,KACnBtrB,KAAKurB,IAAMjiB,EAAOiiB,IAClBvrB,KAAK67C,MAAQvyC,EAAOuyC,MAEpB77C,KAAK27C,OAASryC,EAAOqyC,OACrB37C,KAAK87C,KAAuB,OAAhBxyC,EAAOwyC,KAAgB,KAAO98C,OAAOuG,OAAQ,GAAI+D,EAAOwyC,MAEpE97C,KAAK+7C,UAAYzyC,EAAOyyC,UACxB/7C,KAAKg8C,WAAa1yC,EAAO0yC,WAElBh8C,MAYRo8C,eAAgB,SAAWC,GAG1B,MAAMC,EAAe,GAAMt8C,KAAKu8C,gBAAkBF,EAElDr8C,KAAK07C,IAA0B,EAApBnxC,EAAUG,QAAcrN,KAAKm/C,KAAMF,GAC9Ct8C,KAAKi8C,0BAONQ,eAAgB,WAEf,MAAMH,EAAej/C,KAAKqhC,IAAyB,GAApBn0B,EAAUC,QAAgBxK,KAAK07C,KAE9D,MAAO,GAAM17C,KAAKu8C,gBAAkBD,GAIrCI,gBAAiB,WAEhB,OAA2B,EAApBnyC,EAAUG,QAAcrN,KAAKm/C,KACnCn/C,KAAKqhC,IAAyB,GAApBn0B,EAAUC,QAAgBxK,KAAK07C,KAAQ17C,KAAK47C,OAIxDe,aAAc,WAGb,OAAO38C,KAAK+7C,UAAY1+C,KAAK6N,IAAKlL,KAAK27C,OAAQ,IAIhDY,cAAe,WAGd,OAAOv8C,KAAK+7C,UAAY1+C,KAAK8N,IAAKnL,KAAK27C,OAAQ,IAuChDiB,cAAe,SAAWC,EAAWC,EAAYl0C,EAAGiD,EAAGsC,EAAOC,GAE7DpO,KAAK27C,OAASkB,EAAYC,EAEP,OAAd98C,KAAK87C,OAET97C,KAAK87C,KAAO,CACXvD,SAAS,EACTsE,UAAW,EACXC,WAAY,EACZC,QAAS,EACTC,QAAS,EACT7uC,MAAO,EACPC,OAAQ,IAKVpO,KAAK87C,KAAKvD,SAAU,EACpBv4C,KAAK87C,KAAKe,UAAYA,EACtB78C,KAAK87C,KAAKgB,WAAaA,EACvB98C,KAAK87C,KAAKiB,QAAUn0C,EACpB5I,KAAK87C,KAAKkB,QAAUnxC,EACpB7L,KAAK87C,KAAK3tC,MAAQA,EAClBnO,KAAK87C,KAAK1tC,OAASA,EAEnBpO,KAAKi8C,0BAINgB,gBAAiB,WAEG,OAAdj9C,KAAK87C,OAET97C,KAAK87C,KAAKvD,SAAU,GAIrBv4C,KAAKi8C,0BAINA,uBAAwB,WAEvB,MAAM3wB,EAAOtrB,KAAKsrB,KAClB,IAAIF,EAAME,EAAOjuB,KAAKqhC,IAAyB,GAApBn0B,EAAUC,QAAgBxK,KAAK07C,KAAQ17C,KAAK47C,KACnExtC,EAAS,EAAIgd,EACbjd,EAAQnO,KAAK27C,OAASvtC,EACtB8c,GAAS,GAAM/c,EACnB,MAAM2tC,EAAO97C,KAAK87C,KAElB,GAAmB,OAAd97C,KAAK87C,MAAiB97C,KAAK87C,KAAKvD,QAAU,CAE9C,MAAMsE,EAAYf,EAAKe,UACtBC,EAAahB,EAAKgB,WAEnB5xB,GAAQ4wB,EAAKiB,QAAU5uC,EAAQ0uC,EAC/BzxB,GAAO0wB,EAAKkB,QAAU5uC,EAAS0uC,EAC/B3uC,GAAS2tC,EAAK3tC,MAAQ0uC,EACtBzuC,GAAU0tC,EAAK1tC,OAAS0uC,EAIzB,MAAMI,EAAOl9C,KAAKg8C,WACJ,IAATkB,IAAahyB,GAAQI,EAAO4xB,EAAOl9C,KAAK28C,gBAE7C38C,KAAKye,iBAAiB0+B,gBAAiBjyB,EAAMA,EAAO/c,EAAOid,EAAKA,EAAMhd,EAAQkd,EAAMtrB,KAAKurB,KAEzFvrB,KAAK0e,wBAAwBtL,WAAYpT,KAAKye,mBAI/C/H,OAAQ,SAAWC,GAElB,MAAMub,EAAO/E,GAAS7rB,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAgBnD,OAdAub,EAAKhR,OAAOw6B,IAAM17C,KAAK07C,IACvBxpB,EAAKhR,OAAO06B,KAAO57C,KAAK47C,KAExB1pB,EAAKhR,OAAOoK,KAAOtrB,KAAKsrB,KACxB4G,EAAKhR,OAAOqK,IAAMvrB,KAAKurB,IACvB2G,EAAKhR,OAAO26B,MAAQ77C,KAAK67C,MAEzB3pB,EAAKhR,OAAOy6B,OAAS37C,KAAK27C,OAEP,OAAd37C,KAAK87C,OAAgB5pB,EAAKhR,OAAO46B,KAAO98C,OAAOuG,OAAQ,GAAIvF,KAAK87C,OAErE5pB,EAAKhR,OAAO66B,UAAY/7C,KAAK+7C,UAC7B7pB,EAAKhR,OAAO86B,WAAah8C,KAAKg8C,WAEvB9pB,KAQT,SAASkrB,GAAY9xB,EAAMC,EAAK8xB,GAM/B,GAJAlwB,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,cAEkC,IAAzCu+C,EAAaC,wBAGjB,YADAh/C,QAAQ0R,MAAO,0GAKhBhQ,KAAKq9C,aAAeA,EAEpB,MAAME,EAAW,IAAI9B,GAjBV,GAAa,EAiB6BnwB,EAAMC,GAC3DgyB,EAASlxB,OAASrsB,KAAKqsB,OACvBkxB,EAASv0B,GAAGnoB,IAAK,GAAK,EAAG,GACzB08C,EAAS/tB,OAAQ,IAAIhS,EAAS,EAAG,EAAG,IACpCxd,KAAKihB,IAAKs8B,GAEV,MAAMC,EAAW,IAAI/B,GAvBV,GAAa,EAuB6BnwB,EAAMC,GAC3DiyB,EAASnxB,OAASrsB,KAAKqsB,OACvBmxB,EAASx0B,GAAGnoB,IAAK,GAAK,EAAG,GACzB28C,EAAShuB,OAAQ,IAAIhS,GAAW,EAAG,EAAG,IACtCxd,KAAKihB,IAAKu8B,GAEV,MAAMC,EAAW,IAAIhC,GA7BV,GAAa,EA6B6BnwB,EAAMC,GAC3DkyB,EAASpxB,OAASrsB,KAAKqsB,OACvBoxB,EAASz0B,GAAGnoB,IAAK,EAAG,EAAG,GACvB48C,EAASjuB,OAAQ,IAAIhS,EAAS,EAAG,EAAG,IACpCxd,KAAKihB,IAAKw8B,GAEV,MAAMC,EAAW,IAAIjC,GAnCV,GAAa,EAmC6BnwB,EAAMC,GAC3DmyB,EAASrxB,OAASrsB,KAAKqsB,OACvBqxB,EAAS10B,GAAGnoB,IAAK,EAAG,GAAK,GACzB68C,EAASluB,OAAQ,IAAIhS,EAAS,GAAK,EAAG,IACtCxd,KAAKihB,IAAKy8B,GAEV,MAAMC,EAAW,IAAIlC,GAzCV,GAAa,EAyC6BnwB,EAAMC,GAC3DoyB,EAAStxB,OAASrsB,KAAKqsB,OACvBsxB,EAAS30B,GAAGnoB,IAAK,GAAK,EAAG,GACzB88C,EAASnuB,OAAQ,IAAIhS,EAAS,EAAG,EAAG,IACpCxd,KAAKihB,IAAK08B,GAEV,MAAMC,EAAW,IAAInC,GA/CV,GAAa,EA+C6BnwB,EAAMC,GAC3DqyB,EAASvxB,OAASrsB,KAAKqsB,OACvBuxB,EAAS50B,GAAGnoB,IAAK,GAAK,EAAG,GACzB+8C,EAASpuB,OAAQ,IAAIhS,EAAS,EAAG,GAAK,IACtCxd,KAAKihB,IAAK28B,GAEV59C,KAAK6E,OAAS,SAAWg5C,EAAUC,GAEb,OAAhB99C,KAAKotB,QAAkBptB,KAAKqwB,oBAEjC,MAAM0tB,EAAmBF,EAASx3C,GAAGkyC,QAC/ByF,EAAsBH,EAASI,kBAErCJ,EAASx3C,GAAGkyC,SAAU,EAEtB,MAAMziC,EAAkBunC,EAAankC,QAAQpD,gBAE7CunC,EAAankC,QAAQpD,iBAAkB,EAEvC+nC,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAOP,GAExBM,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAON,GAExBK,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAOL,GAExBI,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAOJ,GAExBG,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAOH,GAExBN,EAAankC,QAAQpD,gBAAkBA,EAEvC+nC,EAASK,gBAAiBb,EAAc,GACxCQ,EAASM,OAAQL,EAAOF,GAExBC,EAASK,gBAAiBF,GAE1BH,EAASx3C,GAAGkyC,QAAUwF,GAIvB/9C,KAAKo+C,MAAQ,SAAWP,EAAUxd,EAAOuY,EAAOyF,GAE/C,MAAML,EAAsBH,EAASI,kBAErC,IAAM,IAAI9zC,EAAI,EAAGA,EAAI,EAAGA,IAEvB0zC,EAASK,gBAAiBb,EAAclzC,GAExC0zC,EAASO,MAAO/d,EAAOuY,EAAOyF,GAI/BR,EAASK,gBAAiBF,IAS5B,SAASM,GAAuBp5C,EAAMpH,EAASygD,GAEzCn/C,OAAOoJ,UAAW1K,KAEtBQ,QAAQC,KAAM,oGAEdT,EAAUygD,GAIXzlC,EAAkBnT,KAAM3F,KAAMkF,EAAMA,EAAMpH,GAE1CkC,KAAKkZ,QAAQslC,gCAAiC,EAoG/C,SAASC,GAAavsB,EAAM/jB,EAAOC,EAAQgH,EAAQtW,EAAMiW,EAASC,EAAOC,EAAOC,EAAWC,EAAWE,EAAYC,GAEjHR,EAAQnP,KAAM3F,KAAM,KAAM+U,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,EAAYC,GAEjGtV,KAAKkU,MAAQ,CAAEge,KAAMA,GAAQ,KAAM/jB,MAAOA,GAAS,EAAGC,OAAQA,GAAU,GAExEpO,KAAKkV,eAA0BvU,IAAduU,EAA0BA,EAr1atB,KAs1arBlV,KAAKmV,eAA0BxU,IAAdwU,EAA0BA,EAt1atB,KAw1arBnV,KAAK8V,iBAAkB,EACvB9V,KAAKgW,OAAQ,EACbhW,KAAKiW,gBAAkB,EAEvBjW,KAAKguC,aAAc,EAhIpBoP,GAAW97C,UAAYtC,OAAOoX,OAAQ+W,GAAS7rB,WAC/C87C,GAAW97C,UAAU4B,YAAck6C,GAkBnCkB,GAAsBh9C,UAAYtC,OAAOoX,OAAQ0C,EAAkBxX,WACnEg9C,GAAsBh9C,UAAU4B,YAAco7C,GAE9CA,GAAsBh9C,UAAUg8C,yBAA0B,EAE1DgB,GAAsBh9C,UAAUo9C,2BAA6B,SAAWb,EAAU3kC,GAEjFlZ,KAAKkZ,QAAQpa,KAAOoa,EAAQpa,KAC5BkB,KAAKkZ,QAAQ9D,OAnuaK,KAoualBpV,KAAKkZ,QAAQ5D,SAAW4D,EAAQ5D,SAEhCtV,KAAKkZ,QAAQpD,gBAAkBoD,EAAQpD,gBACvC9V,KAAKkZ,QAAQ/D,UAAY+D,EAAQ/D,UACjCnV,KAAKkZ,QAAQhE,UAAYgE,EAAQhE,UAEjC,MAAMypC,EAAS,CAEdrE,SAAU,CACTsE,UAAW,CAAE//C,MAAO,OAGrB87C,aAAwB,iXAoBxBC,eAA0B,8TAoBrBl5B,EAAW,IAAIi3B,GAAmB,EAAG,EAAG,GAExC9mB,EAAW,IAAI4oB,GAAgB,CAEpCt5C,KAAM,sBAENm5C,SAAUN,GAAe2E,EAAOrE,UAChCK,aAAcgE,EAAOhE,aACrBC,eAAgB+D,EAAO/D,eACvB1Y,KA12ae,EA22afD,SAx2aiB,IA42alBpQ,EAASyoB,SAASsE,UAAU//C,MAAQqa,EAEpC,MAAMw9B,EAAO,IAAI9D,GAAMlxB,EAAUmQ,GAE3BgtB,EAAmB3lC,EAAQ/D,UAzzaD,OA4za3B+D,EAAQ/D,YAAyC+D,EAAQ/D,UA9za1C,MAw0apB,OARe,IAAIioC,GAAY,EAAG,GAAIp9C,MAC/B6E,OAAQg5C,EAAUnH,GAEzBx9B,EAAQ/D,UAAY0pC,EAEpBnI,EAAKh1B,SAAStK,UACds/B,EAAK7kB,SAASza,UAEPpX,MAqBRy+C,GAAYn9C,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WAC/Cm9C,GAAYn9C,UAAU4B,YAAcu7C,GAEpCA,GAAYn9C,UAAUw9C,eAAgB,EAEtC,MAAMC,GAAY,IAAIl7B,EAChBm7B,GAAY,IAAIxhC,EAEtB,MAAMyhC,GAELrgD,YAAa6kB,EAAIC,EAAIC,EAAIiR,EAAIsqB,EAAIC,GAEhCn/C,KAAKo/C,OAAS,MAEJz+C,IAAP8iB,EAAqBA,EAAK,IAAI+O,QACvB7xB,IAAP+iB,EAAqBA,EAAK,IAAI8O,QACvB7xB,IAAPgjB,EAAqBA,EAAK,IAAI6O,QACvB7xB,IAAPi0B,EAAqBA,EAAK,IAAIpC,QACvB7xB,IAAPu+C,EAAqBA,EAAK,IAAI1sB,QACvB7xB,IAAPw+C,EAAqBA,EAAK,IAAI3sB,IAMlC5zB,IAAK6kB,EAAIC,EAAIC,EAAIiR,EAAIsqB,EAAIC,GAExB,MAAMC,EAASp/C,KAAKo/C,OASpB,OAPAA,EAAQ,GAAI3oC,KAAMgN,GAClB27B,EAAQ,GAAI3oC,KAAMiN,GAClB07B,EAAQ,GAAI3oC,KAAMkN,GAClBy7B,EAAQ,GAAI3oC,KAAMme,GAClBwqB,EAAQ,GAAI3oC,KAAMyoC,GAClBE,EAAQ,GAAI3oC,KAAM0oC,GAEXn/C,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMygD,GAEL,MAAMD,EAASp/C,KAAKo/C,OAEpB,IAAM,IAAIj1C,EAAI,EAAGA,EAAI,EAAGA,IAEvBi1C,EAAQj1C,GAAIsM,KAAM4oC,EAAQD,OAAQj1C,IAInC,OAAOnK,KAIRpB,wBAAyB0M,GAExB,MAAM8zC,EAASp/C,KAAKo/C,OACdxuC,EAAKtF,EAAEqD,SACP2wC,EAAM1uC,EAAI,GAAK2uC,EAAM3uC,EAAI,GAAK4uC,EAAM5uC,EAAI,GAAK6uC,EAAM7uC,EAAI,GACvD8uC,EAAM9uC,EAAI,GAAK+uC,EAAM/uC,EAAI,GAAKgvC,EAAMhvC,EAAI,GAAKivC,EAAMjvC,EAAI,GACvDkvC,EAAMlvC,EAAI,GAAKmvC,EAAMnvC,EAAI,GAAKovC,EAAOpvC,EAAI,IAAMqvC,EAAOrvC,EAAI,IAC1DsvC,EAAOtvC,EAAI,IAAMuvC,EAAOvvC,EAAI,IAAMwvC,EAAOxvC,EAAI,IAAMyvC,EAAOzvC,EAAI,IASpE,OAPAwuC,EAAQ,GAAIkB,cAAeb,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO5wC,YAC3E8vC,EAAQ,GAAIkB,cAAeb,EAAMH,EAAKO,EAAMH,EAAKO,EAAOH,EAAKO,EAAOH,GAAO5wC,YAC3E8vC,EAAQ,GAAIkB,cAAeb,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAO7wC,YAC3E8vC,EAAQ,GAAIkB,cAAeb,EAAMF,EAAKM,EAAMF,EAAKM,EAAOF,EAAKM,EAAOF,GAAO7wC,YAC3E8vC,EAAQ,GAAIkB,cAAeb,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAO9wC,YAC5E8vC,EAAQ,GAAIkB,cAAeb,EAAMD,EAAKK,EAAMD,EAAKK,EAAOD,EAAMK,EAAOD,GAAO9wC,YAErEtP,KAIRpB,iBAAkBsiB,GAEjB,MAAMQ,EAAWR,EAAOQ,SAMxB,OAJiC,OAA5BA,EAAS6pB,gBAA0B7pB,EAASwsB,wBAEjD6Q,GAAUtoC,KAAMiL,EAAS6pB,gBAAiBhtB,aAAc2C,EAAOvC,aAExD3e,KAAKkkB,iBAAkB66B,IAI/BngD,iBAAkB2hD,GAMjB,OAJAxB,GAAUlvC,OAAOhP,IAAK,EAAG,EAAG,GAC5Bk+C,GAAUn/B,OAAS,kBACnBm/B,GAAUxgC,aAAcgiC,EAAO5hC,aAExB3e,KAAKkkB,iBAAkB66B,IAI/BngD,iBAAkBojB,GAEjB,MAAMo9B,EAASp/C,KAAKo/C,OACdvvC,EAASmS,EAAOnS,OAChB2wC,GAAcx+B,EAAOpC,OAE3B,IAAM,IAAIzV,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAI9B,GAFiBi1C,EAAQj1C,GAAIga,gBAAiBtU,GAE9B2wC,EAEf,OAAO,EAMT,OAAO,EAIR5hD,cAAewiB,GAEd,MAAMg+B,EAASp/C,KAAKo/C,OAEpB,IAAM,IAAIj1C,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAM+X,EAAQk9B,EAAQj1C,GAQtB,GAJA60C,GAAUp2C,EAAIsZ,EAAMzC,OAAO7W,EAAI,EAAIwY,EAAIjW,IAAIvC,EAAIwY,EAAIlW,IAAItC,EACvDo2C,GAAUnzC,EAAIqW,EAAMzC,OAAO5T,EAAI,EAAIuV,EAAIjW,IAAIU,EAAIuV,EAAIlW,IAAIW,EACvDmzC,GAAUvnC,EAAIyK,EAAMzC,OAAOhI,EAAI,EAAI2J,EAAIjW,IAAIsM,EAAI2J,EAAIlW,IAAIuM,EAElDyK,EAAMiC,gBAAiB66B,IAAc,EAEzC,OAAO,EAMT,OAAO,EAIRpgD,cAAe0iB,GAEd,MAAM89B,EAASp/C,KAAKo/C,OAEpB,IAAM,IAAIj1C,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAKi1C,EAAQj1C,GAAIga,gBAAiB7C,GAAU,EAE3C,OAAO,EAMT,OAAO,GAMT,SAASm/B,KAER,IAAIlsC,EAAU,KACVmsC,GAAc,EACdC,EAAgB,KAChBC,EAAY,KAEhB,SAASC,EAAkBC,EAAMC,GAEhCJ,EAAeG,EAAMC,GAErBH,EAAYrsC,EAAQysC,sBAAuBH,GAI5C,MAAO,CAEN/tB,MAAO,YAEe,IAAhB4tB,GACkB,OAAlBC,IAELC,EAAYrsC,EAAQysC,sBAAuBH,GAE3CH,GAAc,IAIfO,KAAM,WAEL1sC,EAAQ2sC,qBAAsBN,GAE9BF,GAAc,GAIfS,iBAAkB,SAAW5jC,GAE5BojC,EAAgBpjC,GAIjB6jC,WAAY,SAAWviD,GAEtB0V,EAAU1V,IAQb,SAASwiD,GAAiBC,EAAIC,GAE7B,MAAMC,EAAWD,EAAaC,SAExBC,EAAU,IAAIC,QA6JpB,MAAO,CAEN1/C,IAjED,SAAcvC,GAIb,OAFKA,EAAUkiD,+BAA+BliD,EAAYA,EAAUyyB,MAE7DuvB,EAAQz/C,IAAKvC,IA8DpBqwB,OA1DD,SAAiBrwB,GAEXA,EAAUkiD,+BAA+BliD,EAAYA,EAAUyyB,MAEpE,MAAMA,EAAOuvB,EAAQz/C,IAAKvC,GAErByyB,IAEJovB,EAAGM,aAAc1vB,EAAK2vB,QAEtBJ,EAAQK,OAAQriD,KAiDjBoF,OA3CD,SAAiBpF,EAAWsiD,GAE3B,GAAKtiD,EAAU6vC,oBAAsB,CAEpC,IAAI0S,EAASP,EAAQz/C,IAAKvC,GAa1B,cAXOuiD,GAAUA,EAAO9rC,QAAUzW,EAAUyW,UAE3CurC,EAAQ5gD,IAAKpB,EAAW,CACvBoiD,OAAQpiD,EAAUoiD,OAClB/iD,KAAMW,EAAUX,KAChBmjD,gBAAiBxiD,EAAUyiD,YAC3BhsC,QAASzW,EAAUyW,WASjBzW,EAAUkiD,+BAA+BliD,EAAYA,EAAUyyB,MAEpE,MAAMA,EAAOuvB,EAAQz/C,IAAKvC,QAEZkB,IAATuxB,EAEJuvB,EAAQ5gD,IAAKpB,EA/If,SAAuBA,EAAWsiD,GAEjC,MAAM73C,EAAQzK,EAAUyK,MAClBk+B,EAAQ3oC,EAAU2oC,MAElByZ,EAASP,EAAGa,eAElBb,EAAGc,WAAYL,EAAYF,GAC3BP,EAAGe,WAAYN,EAAY73C,EAAOk+B,GAElC3oC,EAAUgqC,mBAEV,IAAI3qC,EAAO,KAoCX,OAlCKoL,aAAiBm/B,aAErBvqC,EAAO,KAEIoL,aAAiBq/B,aAE5BjrC,QAAQC,KAAM,wEAEH2L,aAAiB6+B,YAE5BjqC,EAAO,KAEIoL,aAAiB2+B,WAE5B/pC,EAAO,KAEIoL,aAAiBi/B,YAE5BrqC,EAAO,KAEIoL,aAAiB++B,WAE5BnqC,EAAO,KAEIoL,aAAiBq+B,UAE5BzpC,EAAO,KAEIoL,aAAiBu+B,aAE5B3pC,EAAO,MAID,CACN+iD,OAAQA,EACR/iD,KAAMA,EACNmjD,gBAAiB/3C,EAAMo4C,kBACvBpsC,QAASzW,EAAUyW,SA2FKisC,CAAc1iD,EAAWsiD,IAEtC7vB,EAAKhc,QAAUzW,EAAUyW,WAxFtC,SAAuB2rC,EAAQpiD,EAAWsiD,GAEzC,MAAM73C,EAAQzK,EAAUyK,MAClBm+B,EAAc5oC,EAAU4oC,YAE9BiZ,EAAGc,WAAYL,EAAYF,IAEE,IAAxBxZ,EAAY3nB,MAIhB4gC,EAAGiB,cAAeR,EAAY,EAAG73C,IAI5Bs3C,EAEJF,EAAGiB,cAAeR,EAAY1Z,EAAY34B,OAASxF,EAAMo4C,kBACxDp4C,EAAOm+B,EAAY34B,OAAQ24B,EAAY3nB,OAIxC4gC,EAAGiB,cAAeR,EAAY1Z,EAAY34B,OAASxF,EAAMo4C,kBACxDp4C,EAAMs4C,SAAUna,EAAY34B,OAAQ24B,EAAY34B,OAAS24B,EAAY3nB,QAIvE2nB,EAAY3nB,OAAU,GA+DtB+hC,CAAcvwB,EAAK2vB,OAAQpiD,EAAWsiD,GAEtC7vB,EAAKhc,QAAUzW,EAAUyW,WA0C5B,MAAMwsC,WAA4BtV,GAEjCxuC,YAAauP,EAAOC,EAAQyqC,EAAeC,GAE1C/4C,QACAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjBxjB,MAAOA,EACPC,OAAQA,EACRyqC,cAAeA,EACfC,eAAgBA,GAMjB,MAAM6J,GAHNx0C,EAAQA,GAAS,GAGU,EACrBy0C,GAHNx0C,EAASA,GAAU,GAGU,EAEvBirC,EAAQh8C,KAAKqL,MAAOmwC,IAAmB,EACvCS,EAAQj8C,KAAKqL,MAAOowC,IAAoB,EAExCc,EAASP,EAAQ,EACjBQ,EAASP,EAAQ,EAEjBuJ,EAAgB10C,EAAQkrC,EACxByJ,EAAiB10C,EAASkrC,EAI1BpI,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAM,IAAI/sB,EAAK,EAAGA,EAAK07B,EAAQ17B,IAAQ,CAEtC,MAAMtS,EAAIsS,EAAK2kC,EAAiBF,EAEhC,IAAM,IAAI1kC,EAAK,EAAGA,EAAK07B,EAAQ17B,IAAQ,CAEtC,MAAMtV,EAAIsV,EAAK2kC,EAAgBF,EAE/B3X,EAAS7sC,KAAMyK,GAAKiD,EAAG,GAEvBo/B,EAAQ9sC,KAAM,EAAG,EAAG,GAEpB+sC,EAAI/sC,KAAM+f,EAAKm7B,GACfnO,EAAI/sC,KAAM,EAAMggB,EAAKm7B,IAQvB,IAAM,IAAIn7B,EAAK,EAAGA,EAAKm7B,EAAOn7B,IAE7B,IAAM,IAAID,EAAK,EAAGA,EAAKm7B,EAAOn7B,IAAQ,CAErC,MAAM9Q,EAAI8Q,EAAK07B,EAASz7B,EAClB9Q,EAAI6Q,EAAK07B,GAAWz7B,EAAK,GACzB7Q,EAAM4Q,EAAK,EAAM07B,GAAWz7B,EAAK,GACjC7L,EAAM4L,EAAK,EAAM07B,EAASz7B,EAIhC+yB,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAQtBtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAwQ5D,MAAM6X,GAAc,CACnBC,kBAnQuB,iFAoQvBC,uBAlQ4B,6DAmQ5BC,mBAjQwB,yEAkQxBC,eAhQoB,2aAiQpBC,oBA/PyB,wFAgQzBC,aA9PkB,uCA+PlBC,mBA7PwB,+GA8PxBC,MA5PW,4pPA6PXC,sBA3P2B,i9BA4P3BC,yBA1P8B,6nBA2P9BC,8BAzPmC,4HA0PnCC,4BAxPiC,qEAyPjCC,uBAvP4B,2EAwP5BC,eAtPoB,0DAuPpBC,oBArPyB,mDAsPzBC,kBApPuB,8FAqPvBC,aAnPkB,8NAoPlBC,OAlPY,s0FAmPZC,4BAjPiC,21HAkPjCC,qBAhP0B,2jBAiP1BC,4BA/OiC,kJAgPjCC,uBA9O4B,mKA+O5BC,qBA7O0B,6MA8O1BC,0BA5O+B,mEA6O/BC,mBA3OwB,sDA4OxBC,wBA1O6B,4uFA2O7BC,gBAzOqB,g3CA0OrBC,4BAxOiC,yOAyOjCC,qBAvO0B,yTAwO1BC,mBAtOwB,+RAuOxBC,8BAjNmC,02EAkNnCC,cAtOmB,4oBAuOnBC,WArOgB,uDAsOhBC,gBApOqB,oDAqOrBC,aAnOkB,wRAoOlBC,kBAlOuB,0MAmOvBC,0BAjO+B,iYAkO/BC,kBAhOuB,4LAiOvBC,uBA/N4B,iGAgO5BC,sBA9N2B,wwFA+N3BC,kBA7NuB,szIA8NvBC,qBA1N0B,oEA2N1BC,0BAzN+B,u9BA0N/BC,sBAxN2B,sMAyN3BC,2BAvNgC,qxCAwNhCC,yBAtN8B,w0CAuN9BC,8BArNmC,wjLAsNnCC,sBApN2B,62HAqN3BC,qBAnN0B,63BAoN1BC,oBAlNyB,2QAmNzBC,qBAjN0B,mLAkN1BC,0BAhN+B,yKAiN/BC,wBA/M6B,sLAgN7BC,mBA9MwB,+XA+MxBC,aA7MkB,oJA8MlBC,kBA5MuB,mDA6MvBC,sBA3M2B,kVA4M3BC,2BA1MgC,uMA2MhCC,sBAzM2B,uKA0M3BC,2BAxMgC,qEAyMhCC,mBAvMwB,uUAwMxBC,wBAtM6B,0NAuM7BC,mBArMwB,omBAsMxBC,sBApM2B,63BAqM3BC,qBAnM0B,6pBAoM1BC,wBAlM6B,q6BAmM7BC,gCAjMqC,qEAkMrCC,+BAhMoC,oWAiMpCC,wBA/L6B,mRAgM7BC,QA9La,wjDA+LbC,6BA7LkC,4EA8LlCC,eA5LoB,oNA6LpBC,mBA3LwB,gFA4LxBC,wBA1L6B,2UA2L7BC,sBAzL2B,uKA0L3BC,2BAxLgC,qEAyLhCC,wBAvL6B,26RAwL7BC,sBAtL2B,mxCAuL3BC,iBArLsB,kzCAsLtBC,yBApL8B,k5CAqL9BC,gBAnLqB,kOAoLrBC,qBAlL0B,ghCAmL1BC,gBAjLqB,+XAkLrBC,kBAhLuB,qdAiLvBC,qBA/K0B,0LAgL1BC,0BA9K+B,mEA+K/BC,qBA7K0B,6FA8K1BC,0BA5K+B,kyCA6K/BC,yBA3K8B,kGA4K9BC,8BA1KmC,2EA2KnCC,iBAzKsB,yFA0KtBC,eAxKoB,wIAyKpBC,UAvKe,qEAwKfC,kBAtKuB,oFAuKvBC,gBArKqB,yIAsKrBC,WApKgB,8GAqKhBC,gBAnKqB,kRAqKrBC,gBAnKqB,4NAoKrBC,gBAlKqB,8JAmKrBC,UAjKe,0VAkKfC,UAhKe,iOAiKfC,WA/JgB,01BAgKhBC,WA9JgB,wuBA+JhBC,kBA7JuB,6rBA8JvBC,kBA5JuB,ktBA6JvBC,cA3JmB,0WA4JnBC,cA1JmB,+LA2JnBC,gBAzJqB,myBA0JrBC,gBAxJqB,+hBAyJrBC,eAvJoB,gqDAwJpBC,eAtJoB,q2BAuJpBC,iBArJsB,60EAsJtBC,iBApJsB,6nCAqJtBC,gBAnJqB,6gDAoJrBC,gBAlJqB,69BAmJrBC,cAjJmB,yvDAkJnBC,cAhJmB,ymCAiJnBC,eA/IoB,kiEAgJpBC,eA9IoB,qqCA+IpBC,kBA7IuB,6kGA8IvBC,kBA5IuB,+1CA6IvBC,YA3IiB,muBA4IjBC,YA1IiB,myCA2IjBC,YAzIiB,ovBA0IjBC,YAxIiB,qrBAyIjBC,YAvIiB,maAwIjBC,YAtIiB,qZAuIjBC,YArIiB,0tBAsIjBC,YApIiB,unCA2IZC,GAAc,CAEnBhH,OAAQ,CAEPiH,QAAS,CAAErsD,MAAO,IAAI6gC,GAAO,WAC7B0C,QAAS,CAAEvjC,MAAO,GAElBwlC,IAAK,CAAExlC,MAAO,MACdssD,YAAa,CAAEtsD,MAAO,IAAIkR,GAC1Bq7C,aAAc,CAAEvsD,MAAO,IAAIkR,GAE3B40B,SAAU,CAAE9lC,MAAO,OAIpBwsD,YAAa,CAEZ3mB,YAAa,CAAE7lC,MAAO,OAIvBysD,OAAQ,CAEP1mB,OAAQ,CAAE/lC,MAAO,MACjB0sD,WAAY,CAAE1sD,OAAS,GACvBimC,aAAc,CAAEjmC,MAAO,GACvBkmC,gBAAiB,CAAElmC,MAAO,KAC1B2sD,YAAa,CAAE3sD,MAAO,IAIvB4sD,MAAO,CAENjnB,MAAO,CAAE3lC,MAAO,MAChB4lC,eAAgB,CAAE5lC,MAAO,IAI1B6sD,SAAU,CAETpnB,SAAU,CAAEzlC,MAAO,MACnB0lC,kBAAmB,CAAE1lC,MAAO,IAI7B8sD,YAAa,CAEZtkB,YAAa,CAAExoC,MAAO,OAIvB+sD,QAAS,CAERjlB,QAAS,CAAE9nC,MAAO,MAClB+nC,UAAW,CAAE/nC,MAAO,IAIrBgtD,UAAW,CAEVhlB,UAAW,CAAEhoC,MAAO,MACpBkoC,YAAa,CAAEloC,MAAO,IAAIqP,EAAS,EAAG,KAIvC49C,gBAAiB,CAEhB9kB,gBAAiB,CAAEnoC,MAAO,MAC1BooC,kBAAmB,CAAEpoC,MAAO,GAC5BqoC,iBAAkB,CAAEroC,MAAO,IAI5BktD,aAAc,CAEb5kB,aAAc,CAAEtoC,MAAO,OAIxBmtD,aAAc,CAEb5kB,aAAc,CAAEvoC,MAAO,OAIxBotD,YAAa,CAEZ1kB,YAAa,CAAE1oC,MAAO,OAIvBmjC,IAAK,CAEJkqB,WAAY,CAAErtD,MAAO,OACrBstD,QAAS,CAAEttD,MAAO,GAClButD,OAAQ,CAAEvtD,MAAO,KACjBwtD,SAAU,CAAExtD,MAAO,IAAI6gC,GAAO,YAI/Bmb,OAAQ,CAEPyR,kBAAmB,CAAEztD,MAAO,IAE5B0tD,WAAY,CAAE1tD,MAAO,IAErB2tD,kBAAmB,CAAE3tD,MAAO,GAAIsD,WAAY,CAC3C6iB,UAAW,GACXqb,MAAO,KAGRosB,wBAAyB,CAAE5tD,MAAO,GAAIsD,WAAY,CACjDuqD,WAAY,GACZC,iBAAkB,GAClBC,aAAc,GACdC,cAAe,KAGhBC,qBAAsB,CAAEjuD,MAAO,IAC/BkuD,wBAAyB,CAAEluD,MAAO,IAElCmuD,WAAY,CAAEnuD,MAAO,GAAIsD,WAAY,CACpCk+B,MAAO,GACPjW,SAAU,GACVpF,UAAW,GACXkK,SAAU,GACV+9B,QAAS,GACTC,YAAa,GACbC,MAAO,KAGRC,iBAAkB,CAAEvuD,MAAO,GAAIsD,WAAY,CAC1CuqD,WAAY,GACZC,iBAAkB,GAClBC,aAAc,GACdC,cAAe,KAGhBQ,cAAe,CAAExuD,MAAO,IACxByuD,iBAAkB,CAAEzuD,MAAO,IAE3B0uD,YAAa,CAAE1uD,MAAO,GAAIsD,WAAY,CACrCk+B,MAAO,GACPjW,SAAU,GACV+iC,MAAO,GACPj+B,SAAU,KAGXs+B,kBAAmB,CAAE3uD,MAAO,GAAIsD,WAAY,CAC3CuqD,WAAY,GACZC,iBAAkB,GAClBC,aAAc,GACdC,cAAe,GACfY,iBAAkB,GAClBC,gBAAiB,KAGlBC,eAAgB,CAAE9uD,MAAO,IACzB+uD,kBAAmB,CAAE/uD,MAAO,IAE5BgvD,iBAAkB,CAAEhvD,MAAO,GAAIsD,WAAY,CAC1C6iB,UAAW,GACX8oC,SAAU,GACVC,YAAa,KAIdC,eAAgB,CAAEnvD,MAAO,GAAIsD,WAAY,CACxCk+B,MAAO,GACPjW,SAAU,GACVjc,MAAO,GACPC,OAAQ,KAGT6/C,MAAO,CAAEpvD,MAAO,MAChBqvD,MAAO,CAAErvD,MAAO,OAIjB8hB,OAAQ,CAEPuqC,QAAS,CAAErsD,MAAO,IAAI6gC,GAAO,WAC7B0C,QAAS,CAAEvjC,MAAO,GAClBqG,KAAM,CAAErG,MAAO,GACfwrB,MAAO,CAAExrB,MAAO,GAChBwlC,IAAK,CAAExlC,MAAO,MACd8lC,SAAU,CAAE9lC,MAAO,MACnBssD,YAAa,CAAEtsD,MAAO,IAAIkR,IAI3BwwC,OAAQ,CAEP2K,QAAS,CAAErsD,MAAO,IAAI6gC,GAAO,WAC7B0C,QAAS,CAAEvjC,MAAO,GAClBgR,OAAQ,CAAEhR,MAAO,IAAIqP,EAAS,GAAK,KACnCyF,SAAU,CAAE9U,MAAO,GACnBwlC,IAAK,CAAExlC,MAAO,MACd8lC,SAAU,CAAE9lC,MAAO,MACnBssD,YAAa,CAAEtsD,MAAO,IAAIkR,KAMtBo+C,GAAY,CAEjBC,MAAO,CAEN9T,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYI,YACZJ,GAAYK,OACZL,GAAYQ,MACZR,GAAYS,SACZT,GAAYjpB,MAGb2Y,aAAcoI,GAAY+G,eAC1BlP,eAAgBmI,GAAY8G,gBAI7BwE,QAAS,CAER/T,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYI,YACZJ,GAAYK,OACZL,GAAYQ,MACZR,GAAYS,SACZT,GAAYU,YACZV,GAAYjpB,IACZipB,GAAYpQ,OACZ,CACC7U,SAAU,CAAEnnC,MAAO,IAAI6gC,GAAO,OAIhCib,aAAcoI,GAAYiH,iBAC1BpP,eAAgBmI,GAAYgH,kBAI7BuE,MAAO,CAENhU,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYI,YACZJ,GAAYK,OACZL,GAAYQ,MACZR,GAAYS,SACZT,GAAYU,YACZV,GAAYW,QACZX,GAAYY,UACZZ,GAAYa,gBACZb,GAAYjpB,IACZipB,GAAYpQ,OACZ,CACC7U,SAAU,CAAEnnC,MAAO,IAAI6gC,GAAO,IAC9BwG,SAAU,CAAErnC,MAAO,IAAI6gC,GAAO,UAC9ByG,UAAW,CAAEtnC,MAAO,OAItB87C,aAAcoI,GAAYuH,eAC1B1P,eAAgBmI,GAAYsH,gBAI7BkE,SAAU,CAETjU,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYK,OACZL,GAAYQ,MACZR,GAAYS,SACZT,GAAYU,YACZV,GAAYW,QACZX,GAAYY,UACZZ,GAAYa,gBACZb,GAAYc,aACZd,GAAYe,aACZf,GAAYjpB,IACZipB,GAAYpQ,OACZ,CACC7U,SAAU,CAAEnnC,MAAO,IAAI6gC,GAAO,IAC9BmG,UAAW,CAAEhnC,MAAO,GACpBinC,UAAW,CAAEjnC,MAAO,GACpByoC,gBAAiB,CAAEzoC,MAAO,MAI5B87C,aAAcoI,GAAYyH,kBAC1B5P,eAAgBmI,GAAYwH,mBAI7BiE,KAAM,CAELlU,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYQ,MACZR,GAAYS,SACZT,GAAYU,YACZV,GAAYW,QACZX,GAAYY,UACZZ,GAAYa,gBACZb,GAAYgB,YACZhB,GAAYjpB,IACZipB,GAAYpQ,OACZ,CACC7U,SAAU,CAAEnnC,MAAO,IAAI6gC,GAAO,OAIhCib,aAAcoI,GAAYqH,cAC1BxP,eAAgBmI,GAAYoH,eAI7BzjB,OAAQ,CAEP4T,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYW,QACZX,GAAYY,UACZZ,GAAYa,gBACZb,GAAYjpB,IACZ,CACC0E,OAAQ,CAAE7nC,MAAO,SAInB87C,aAAcoI,GAAYmH,gBAC1BtP,eAAgBmI,GAAYkH,iBAI7BtpC,OAAQ,CAEP25B,SAAUD,GAAe,CACxB4Q,GAAYtqC,OACZsqC,GAAYjpB,MAGb2Y,aAAcoI,GAAY6H,YAC1BhQ,eAAgBmI,GAAY4H,aAI7B8D,OAAQ,CAEPnU,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYjpB,IACZ,CACC3X,MAAO,CAAExrB,MAAO,GAChB6oC,SAAU,CAAE7oC,MAAO,GACnB6vD,UAAW,CAAE7vD,MAAO,MAItB87C,aAAcoI,GAAY6G,gBAC1BhP,eAAgBmI,GAAY4G,iBAI7B/Q,MAAO,CAEN0B,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYa,kBAGbnR,aAAcoI,GAAYuG,WAC1B1O,eAAgBmI,GAAYsG,YAI7B5pC,OAAQ,CAEP66B,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYW,QACZX,GAAYY,UACZZ,GAAYa,gBACZ,CACC1pB,QAAS,CAAEvjC,MAAO,MAIpB87C,aAAcoI,GAAY2H,YAC1B9P,eAAgBmI,GAAY0H,aAI7BlK,OAAQ,CAEPjG,SAAUD,GAAe,CACxB4Q,GAAY1K,OACZ0K,GAAYjpB,MAGb2Y,aAAcoI,GAAYiI,YAC1BpQ,eAAgBmI,GAAYgI,aAI7B4D,WAAY,CAEXrU,SAAU,CACT6Q,YAAa,CAAEtsD,MAAO,IAAIkR,GAC1B6+C,IAAK,CAAE/vD,MAAO,OAGf87C,aAAcoI,GAAYmG,gBAC1BtO,eAAgBmI,GAAYkG,iBAO7B4F,KAAM,CAELvU,SAAUD,GAAe,CACxB4Q,GAAYK,OACZ,CACClpB,QAAS,CAAEvjC,MAAO,MAIpB87C,aAAcoI,GAAYqG,UAC1BxO,eAAgBmI,GAAYoG,WAI7B2F,SAAU,CAETxU,SAAU,CACTsE,UAAW,CAAE//C,MAAO,OAGrB87C,aAAcoI,GAAY2G,cAC1B9O,eAAgBmI,GAAY0G,eAI7BsF,aAAc,CAEbzU,SAAUD,GAAe,CACxB4Q,GAAYhH,OACZgH,GAAYa,gBACZ,CACCkD,kBAAmB,CAAEnwD,MAAO,IAAI2e,GAChCyxC,aAAc,CAAEpwD,MAAO,GACvBqwD,YAAa,CAAErwD,MAAO,QAIxB87C,aAAcoI,GAAYyG,kBAC1B5O,eAAgBmI,GAAYwG,mBAI7B4F,OAAQ,CAEP7U,SAAUD,GAAe,CACxB4Q,GAAYpQ,OACZoQ,GAAYjpB,IACZ,CACC3B,MAAO,CAAExhC,MAAO,IAAI6gC,GAAO,IAC3B0C,QAAS,CAAEvjC,MAAO,MAIpB87C,aAAcoI,GAAY+H,YAC1BlQ,eAAgBmI,GAAY8H,cA4B9B,SAASuE,GAAiBvR,EAAUwR,EAAUC,EAAOC,EAASrrB,GAE7D,MAAMsrB,EAAa,IAAI9vB,GAAO,GAC9B,IAEI+vB,EACAC,EAHAC,EAAa,EAKbC,EAAoB,KACpBC,EAA2B,EAC3BC,EAAqB,KA8KzB,SAASC,EAAU1vB,EAAO9wB,GAEzB+/C,EAAM7N,QAAQphB,MAAM0vB,SAAU1vB,EAAM/sB,EAAG+sB,EAAM7tB,EAAG6tB,EAAMhzB,EAAGkC,EAAO20B,GAIjE,MAAO,CAEN8rB,cAAe,WAEd,OAAOR,GAGRS,cAAe,SAAW5vB,EAAO9wB,GAEhCigD,EAAW3uD,IAAKw/B,GAChBsvB,OAAuBhvD,IAAV4O,EAAsBA,EAAQ,EAC3CwgD,EAAUP,EAAYG,IAGvBO,cAAe,WAEd,OAAOP,GAGRQ,cAAe,SAAW5gD,GAEzBogD,EAAapgD,EACbwgD,EAAUP,EAAYG,IAGvBxR,OA3MD,SAAiBiS,EAAYtS,EAAOx/B,EAAQ+xC,GAE3C,IAAI1B,GAA+B,IAAlB7Q,EAAMwS,QAAmBxS,EAAM6Q,WAAa,KAExDA,GAAcA,EAAWt4C,YAE7Bs4C,EAAaU,EAASrtD,IAAK2sD,IAO5B,MAAMtoD,EAAKw3C,EAASx3C,GACdkqD,EAAUlqD,EAAGmqD,YAAcnqD,EAAGmqD,aAE/BD,GAA4C,aAAjCA,EAAQE,uBAEvB9B,EAAa,MAIM,OAAfA,EAEJoB,EAAUP,EAAYG,GAEXhB,GAAcA,EAAW/uB,UAEpCmwB,EAAUpB,EAAY,GACtB0B,GAAa,IAITxS,EAAS6S,WAAaL,IAE1BxS,EAASO,MAAOP,EAAS8S,eAAgB9S,EAAS+S,eAAgB/S,EAASgT,kBAIvElC,IAAgBA,EAAWmC,eAAiBnC,EAAWrR,yBAA2BqR,EAAWnQ,gCAxxdpE,MAwxdsGmQ,EAAW55C,eAE7HpU,IAAZ+uD,IAEJA,EAAU,IAAI9c,GACb,IAAI+F,GAAmB,EAAG,EAAG,GAC7B,IAAI8B,GAAgB,CACnBt5C,KAAM,yBACNm5C,SAAUN,GAAemU,GAAUU,KAAKvU,UACxCK,aAAcwT,GAAUU,KAAKlU,aAC7BC,eAAgBuT,GAAUU,KAAKjU,eAC/B1Y,KAn1dW,EAo1dXW,WAAW,EACXC,YAAY,EACZd,KAAK,KAIP0tB,EAAQhuC,SAASksB,gBAAiB,UAClC8hB,EAAQhuC,SAASksB,gBAAiB,MAElC8hB,EAAQvhC,eAAiB,SAAW0vB,EAAUC,EAAOx/B,GAEpDte,KAAK2e,YAAYoyC,aAAczyC,EAAOK,cAKvC3f,OAAO2C,eAAgB+tD,EAAQ79B,SAAU,SAAU,CAElD7vB,IAAK,WAEJ,OAAOhC,KAAKs6C,SAAS1V,OAAO/lC,SAM9B0wD,EAAQ1qD,OAAQ6qD,IAIZf,EAAWrR,0BAIfqR,EAAaA,EAAWz1C,SAIzBw2C,EAAQ79B,SAASyoB,SAAS1V,OAAO/lC,MAAQ8vD,EACzCe,EAAQ79B,SAASyoB,SAASiR,WAAW1sD,MAAQ8vD,EAAWmC,eAAkB,EAAI,EAEzElB,IAAsBjB,GAC1BkB,IAA6BlB,EAAWz4C,SACxC45C,IAAuBjS,EAASmT,cAEhCtB,EAAQ79B,SAASmc,aAAc,EAE/B4hB,EAAoBjB,EACpBkB,EAA2BlB,EAAWz4C,QACtC45C,EAAqBjS,EAASmT,aAK/BZ,EAAWa,QAASvB,EAASA,EAAQhuC,SAAUguC,EAAQ79B,SAAU,EAAG,EAAG,OAE5D88B,GAAcA,EAAWt4C,iBAEjB1V,IAAd8uD,IAEJA,EAAY,IAAI7c,GACf,IAAI8P,GAAqB,EAAG,GAC5B,IAAIjI,GAAgB,CACnBt5C,KAAM,qBACNm5C,SAAUN,GAAemU,GAAUQ,WAAWrU,UAC9CK,aAAcwT,GAAUQ,WAAWhU,aACnCC,eAAgBuT,GAAUQ,WAAW/T,eACrC1Y,KAx5dY,EAy5dZW,WAAW,EACXC,YAAY,EACZd,KAAK,KAIPytB,EAAU/tC,SAASksB,gBAAiB,UAGpC5uC,OAAO2C,eAAgB8tD,EAAU59B,SAAU,MAAO,CAEjD7vB,IAAK,WAEJ,OAAOhC,KAAKs6C,SAASsU,IAAI/vD,SAM3B0wD,EAAQ1qD,OAAQ4qD,IAIjBA,EAAU59B,SAASyoB,SAASsU,IAAI/vD,MAAQ8vD,GAEH,IAAhCA,EAAW94C,kBAEf84C,EAAWr4C,eAIZm5C,EAAU59B,SAASyoB,SAAS6Q,YAAYtsD,MAAM4X,KAAMk4C,EAAWj8C,QAE1Dk9C,IAAsBjB,GAC1BkB,IAA6BlB,EAAWz4C,SACxC45C,IAAuBjS,EAASmT,cAEhCvB,EAAU59B,SAASmc,aAAc,EAEjC4hB,EAAoBjB,EACpBkB,EAA2BlB,EAAWz4C,QACtC45C,EAAqBjS,EAASmT,aAM/BZ,EAAWa,QAASxB,EAAWA,EAAU/tC,SAAU+tC,EAAU59B,SAAU,EAAG,EAAG,SA2ChF,SAASq/B,GAAoB5P,EAAIvG,EAAY36C,EAAYmhD,GAExD,MAAM4P,EAAsB7P,EAAG8P,aAAc,OAEvCC,EAAY9P,EAAaC,SAAW,KAAOzG,EAAW/4C,IAAK,2BAC3DsvD,EAAe/P,EAAaC,UAA0B,OAAd6P,EAExCE,EAAgB,GAEhBC,EAAeC,EAAoB,MACzC,IAAIC,EAAeF,EAyEnB,SAASG,EAAuBC,GAE/B,OAAKrQ,EAAaC,SAAkBF,EAAGuQ,gBAAiBD,GAEjDP,EAAUS,mBAAoBF,GAItC,SAASG,EAAyBH,GAEjC,OAAKrQ,EAAaC,SAAkBF,EAAG0Q,kBAAmBJ,GAEnDP,EAAUY,qBAAsBL,GAuCxC,SAASH,EAAoBG,GAE5B,MAAMM,EAAgB,GAChBC,EAAoB,GACpBC,EAAoB,GAE1B,IAAM,IAAIjoD,EAAI,EAAGA,EAAIgnD,EAAqBhnD,IAEzC+nD,EAAe/nD,GAAM,EACrBgoD,EAAmBhoD,GAAM,EACzBioD,EAAmBjoD,GAAM,EAI1B,MAAO,CAGNuX,SAAU,KACV2wC,QAAS,KACTrtB,WAAW,EAEXktB,cAAeA,EACfC,kBAAmBA,EACnBC,kBAAmBA,EACnBlxC,OAAQ0wC,EACRxxD,WAAY,GACZ+I,MAAO,MA4DT,SAASmpD,IAER,MAAMJ,EAAgBR,EAAaQ,cAEnC,IAAM,IAAI/nD,EAAI,EAAG0W,EAAKqxC,EAAc7oD,OAAQc,EAAI0W,EAAI1W,IAEnD+nD,EAAe/nD,GAAM,EAMvB,SAASooD,EAAiB9yD,GAEzB+yD,EAA2B/yD,EAAW,GAIvC,SAAS+yD,EAA2B/yD,EAAWgzD,GAE9C,MAAMP,EAAgBR,EAAaQ,cAC7BC,EAAoBT,EAAaS,kBACjCC,EAAoBV,EAAaU,kBAWvC,GATAF,EAAezyD,GAAc,EAEW,IAAnC0yD,EAAmB1yD,KAEvB6hD,EAAGoR,wBAAyBjzD,GAC5B0yD,EAAmB1yD,GAAc,GAI7B2yD,EAAmB3yD,KAAgBgzD,EAAmB,EAExClR,EAAaC,SAAWF,EAAKvG,EAAW/4C,IAAK,2BAEpDu/C,EAAaC,SAAW,sBAAwB,4BAA8B/hD,EAAWgzD,GACpGL,EAAmB3yD,GAAcgzD,GAMnC,SAASE,IAER,MAAMT,EAAgBR,EAAaQ,cAC7BC,EAAoBT,EAAaS,kBAEvC,IAAM,IAAIhoD,EAAI,EAAG0W,EAAKsxC,EAAkB9oD,OAAQc,EAAI0W,EAAI1W,IAElDgoD,EAAmBhoD,KAAQ+nD,EAAe/nD,KAE9Cm3C,EAAGsR,yBAA0BzoD,GAC7BgoD,EAAmBhoD,GAAM,GAQ5B,SAAS0oD,EAAqB1pD,EAAOjE,EAAMpG,EAAM0iC,EAAYsxB,EAAQpjD,IAErC,IAA1B6xC,EAAaC,UAAgC,OAAT1iD,GAA0B,OAATA,EAMzDwiD,EAAGuR,oBAAqB1pD,EAAOjE,EAAMpG,EAAM0iC,EAAYsxB,EAAQpjD,GAJ/D4xC,EAAGyR,qBAAsB5pD,EAAOjE,EAAMpG,EAAMg0D,EAAQpjD,GA8PtD,SAASsjD,IAERC,IAEKvB,IAAiBF,IAEtBE,EAAeF,EACfG,EAAuBD,EAAaxwC,SAMrC,SAAS+xC,IAERzB,EAAa9vC,SAAW,KACxB8vC,EAAaa,QAAU,KACvBb,EAAaxsB,WAAY,EAI1B,MAAO,CAENkuB,MAviBD,SAAgBhyC,EAAQ2Q,EAAUwgC,EAAS3wC,EAAUvY,GAEpD,IAAIgqD,GAAgB,EAEpB,GAAK7B,EAAe,CAEnB,MAAMhC,EAiFR,SAA0B5tC,EAAU2wC,EAASxgC,GAE5C,MAAMmT,GAAqC,IAAvBnT,EAASmT,UAE7B,IAAIouB,EAAa7B,EAAe7vC,EAASuO,SAErBtvB,IAAfyyD,IAEJA,EAAa,GACb7B,EAAe7vC,EAASuO,IAAOmjC,GAIhC,IAAIC,EAAWD,EAAYf,EAAQpiC,SAEjBtvB,IAAb0yD,IAEJA,EAAW,GACXD,EAAYf,EAAQpiC,IAAOojC,GAI5B,IAAI/D,EAAQ+D,EAAUruB,QAEPrkC,IAAV2uD,IAEJA,EAAQmC,EAhDJlQ,EAAaC,SAAkBF,EAAGgS,oBAEhCjC,EAAUkC,wBA+ChBF,EAAUruB,GAAcsqB,GAIzB,OAAOA,EAhHQkE,CAAiB9xC,EAAU2wC,EAASxgC,GAE7C6/B,IAAiBpC,IAErBoC,EAAepC,EACfqC,EAAuBD,EAAaxwC,SAIrCiyC,EA2IF,SAAsBzxC,EAAUvY,GAE/B,MAAMsqD,EAAmB/B,EAAatxD,WAChCszD,EAAqBhyC,EAASthB,WAEpC,GAAKpB,OAAOuyC,KAAMkiB,GAAmBpqD,SAAWrK,OAAOuyC,KAAMmiB,GAAqBrqD,OAAS,OAAO,EAElG,IAAM,MAAM9H,KAAOmyD,EAAqB,CAEvC,MAAMC,EAAkBF,EAAkBlyD,GACpCqyD,EAAoBF,EAAoBnyD,GAE9C,QAAyBZ,IAApBgzD,EAAgC,OAAO,EAE5C,GAAKA,EAAgBl0D,YAAcm0D,EAAoB,OAAO,EAE9D,GAAKD,EAAgBzhC,OAAS0hC,EAAkB1hC,KAAO,OAAO,EAI/D,OAAKw/B,EAAavoD,QAAUA,EA/JX6kC,CAAatsB,EAAUvY,GAElCgqD,GAmKP,SAAoBzxC,EAAUvY,GAE7B,MAAM6oB,EAAQ,GACR5xB,EAAashB,EAASthB,WAE5B,IAAM,MAAMmB,KAAOnB,EAAa,CAE/B,MAAMX,EAAYW,EAAYmB,GAExB2wB,EAAO,GACbA,EAAKzyB,UAAYA,EAEZA,EAAUyyB,OAEdA,EAAKA,KAAOzyB,EAAUyyB,MAIvBF,EAAOzwB,GAAQ2wB,EAIhBw/B,EAAatxD,WAAa4xB,EAE1B0/B,EAAavoD,MAAQA,EA3LC0qD,CAAWnyC,EAAUvY,OAEpC,CAEN,MAAM67B,GAAqC,IAAvBnT,EAASmT,UAExB0sB,EAAahwC,WAAaA,EAASuO,IACvCyhC,EAAaW,UAAYA,EAAQpiC,IACjCyhC,EAAa1sB,YAAcA,IAE3B0sB,EAAahwC,SAAWA,EAASuO,GACjCyhC,EAAaW,QAAUA,EAAQpiC,GAC/ByhC,EAAa1sB,UAAYA,EAEzBmuB,GAAgB,IAMc,IAA3BjyC,EAAOoQ,kBAEX6hC,GAAgB,GAIF,OAAVhqD,GAEJ/I,EAAWyE,OAAQsE,EAAO,OAItBgqD,KA2ON,SAAgCjyC,EAAQ2Q,EAAUwgC,EAAS3wC,GAE1D,IAA+B,IAA1B6/B,EAAaC,WAAwBtgC,EAAOoQ,iBAAmB5P,EAASoyC,4BAExB,OAA/C/Y,EAAW/4C,IAAK,0BAAsC,OAI5DswD,IAEA,MAAMoB,EAAqBhyC,EAASthB,WAE9B2zD,EAAoB1B,EAAQ2B,gBAE5BC,EAAiCpiC,EAASupB,uBAEhD,IAAM,MAAMj6C,KAAQ4yD,EAAoB,CAEvC,MAAMG,EAAmBH,EAAmB5yD,GAE5C,GAAK+yD,GAAoB,EAAI,CAE5B,MAAMN,EAAoBF,EAAoBvyD,GAE9C,QAA2BR,IAAtBizD,EAAkC,CAEtC,MAAMpyB,EAAaoyB,EAAkBpyB,WAC/Bt8B,EAAO0uD,EAAkBzrB,SAEzB1oC,EAAYW,EAAW4B,IAAK4xD,GAIlC,QAAmBjzD,IAAdlB,EAA0B,SAE/B,MAAMoiD,EAASpiD,EAAUoiD,OACnB/iD,EAAOW,EAAUX,KACjBmjD,EAAkBxiD,EAAUwiD,gBAElC,GAAK2R,EAAkBjS,6BAA+B,CAErD,MAAMzvB,EAAO0hC,EAAkB1hC,KACzB4gC,EAAS5gC,EAAK4gC,OACdpjD,EAASkkD,EAAkBlkD,OAE5BwiB,GAAQA,EAAKiiC,8BAEjB3B,EAA2B0B,EAAkBhiC,EAAKugC,uBAEd9xD,IAA/B+gB,EAAS0yC,oBAEb1yC,EAAS0yC,kBAAoBliC,EAAKugC,iBAAmBvgC,EAAKxR,QAM3D6xC,EAAiB2B,GAIlB5S,EAAGc,WAAY,MAAOP,GACtBgR,EAAqBqB,EAAkBhvD,EAAMpG,EAAM0iC,EAAYsxB,EAAS7Q,EAAiBvyC,EAASuyC,QAI7F2R,EAAkBS,4BAEtB7B,EAA2B0B,EAAkBN,EAAkBnB,uBAE3B9xD,IAA/B+gB,EAAS0yC,oBAEb1yC,EAAS0yC,kBAAoBR,EAAkBnB,iBAAmBmB,EAAkBlzC,QAMrF6xC,EAAiB2B,GAIlB5S,EAAGc,WAAY,MAAOP,GACtBgR,EAAqBqB,EAAkBhvD,EAAMpG,EAAM0iC,EAAY,EAAG,QAI7D,GAAc,mBAATrgC,EAA4B,CAEvC,MAAM1B,EAAYW,EAAW4B,IAAKkf,EAAOqQ,gBAIzC,QAAmB5wB,IAAdlB,EAA0B,SAE/B,MAAMoiD,EAASpiD,EAAUoiD,OACnB/iD,EAAOW,EAAUX,KAEvB0zD,EAA2B0B,EAAmB,EAAG,GACjD1B,EAA2B0B,EAAmB,EAAG,GACjD1B,EAA2B0B,EAAmB,EAAG,GACjD1B,EAA2B0B,EAAmB,EAAG,GAEjD5S,EAAGc,WAAY,MAAOP,GAEtBP,EAAGuR,oBAAqBqB,EAAmB,EAAG,EAAGp1D,GAAM,EAAO,GAAI,GAClEwiD,EAAGuR,oBAAqBqB,EAAmB,EAAG,EAAGp1D,GAAM,EAAO,GAAI,IAClEwiD,EAAGuR,oBAAqBqB,EAAmB,EAAG,EAAGp1D,GAAM,EAAO,GAAI,IAClEwiD,EAAGuR,oBAAqBqB,EAAmB,EAAG,EAAGp1D,GAAM,EAAO,GAAI,SAE5D,GAAc,kBAATqC,EAA2B,CAEtC,MAAM1B,EAAYW,EAAW4B,IAAKkf,EAAOozC,eAIzC,QAAmB3zD,IAAdlB,EAA0B,SAE/B,MAAMoiD,EAASpiD,EAAUoiD,OACnB/iD,EAAOW,EAAUX,KAEvB0zD,EAA2B0B,EAAkB,GAE7C5S,EAAGc,WAAY,MAAOP,GAEtBP,EAAGuR,oBAAqBqB,EAAkB,EAAGp1D,GAAM,EAAO,GAAI,QAExD,QAAwC6B,IAAnCszD,EAA+C,CAE1D,MAAMp1D,EAAQo1D,EAAgC9yD,GAE9C,QAAeR,IAAV9B,EAEJ,OAASA,EAAMwK,QAEd,KAAK,EACJi4C,EAAGiT,gBAAiBL,EAAkBr1D,GACtC,MAED,KAAK,EACJyiD,EAAGkT,gBAAiBN,EAAkBr1D,GACtC,MAED,KAAK,EACJyiD,EAAGmT,gBAAiBP,EAAkBr1D,GACtC,MAED,QACCyiD,EAAGoT,gBAAiBR,EAAkBr1D,MAY5C8zD,IAzYCgC,CAAuBzzC,EAAQ2Q,EAAUwgC,EAAS3wC,GAEnC,OAAVvY,GAEJm4C,EAAGc,WAAY,MAAOhiD,EAAW4B,IAAKmH,GAAQ04C,UAifhDmR,MAAOA,EACPC,kBAAmBA,EACnB77C,QA1GD,WAEC47C,IAEA,IAAM,MAAM4B,KAAcrD,EAAgB,CAEzC,MAAM6B,EAAa7B,EAAeqD,GAElC,IAAM,MAAMC,KAAazB,EAAa,CAErC,MAAMC,EAAWD,EAAYyB,GAE7B,IAAM,MAAM7vB,KAAaquB,EAExBtB,EAAyBsB,EAAUruB,GAAY9jB,eAExCmyC,EAAUruB,UAIXouB,EAAYyB,UAIbtD,EAAeqD,KAmFvBE,wBA7ED,SAAkCpzC,GAEjC,QAAsC/gB,IAAjC4wD,EAAe7vC,EAASuO,IAAqB,OAElD,MAAMmjC,EAAa7B,EAAe7vC,EAASuO,IAE3C,IAAM,MAAM4kC,KAAazB,EAAa,CAErC,MAAMC,EAAWD,EAAYyB,GAE7B,IAAM,MAAM7vB,KAAaquB,EAExBtB,EAAyBsB,EAAUruB,GAAY9jB,eAExCmyC,EAAUruB,UAIXouB,EAAYyB,UAIbtD,EAAe7vC,EAASuO,KAwD/B8kC,uBApDD,SAAiC1C,GAEhC,IAAM,MAAMuC,KAAcrD,EAAgB,CAEzC,MAAM6B,EAAa7B,EAAeqD,GAElC,QAAkCj0D,IAA7ByyD,EAAYf,EAAQpiC,IAAqB,SAE9C,MAAMojC,EAAWD,EAAYf,EAAQpiC,IAErC,IAAM,MAAM+U,KAAaquB,EAExBtB,EAAyBsB,EAAUruB,GAAY9jB,eAExCmyC,EAAUruB,UAIXouB,EAAYf,EAAQpiC,MAoC5BqiC,eAAgBA,EAChBC,gBAAiBA,EACjBI,wBAAyBA,GAM3B,SAASqC,GAAqB1T,EAAIvG,EAAYka,EAAM1T,GAEnD,MAAMC,EAAWD,EAAaC,SAE9B,IAAI0T,EAiDJl1D,KAAKm1D,QA/CL,SAAkBt2D,GAEjBq2D,EAAOr2D,GA8CRmB,KAAKm+C,OA1CL,SAAiBrrB,EAAOpS,GAEvB4gC,EAAG8T,WAAYF,EAAMpiC,EAAOpS,GAE5Bu0C,EAAKpwD,OAAQ6b,EAAOw0C,EAAM,IAuC3Bl1D,KAAKq1D,gBAnCL,SAA0BviC,EAAOpS,EAAO40C,GAEvC,GAAmB,IAAdA,EAAkB,OAEvB,IAAIjE,EAAWkE,EAEf,GAAK/T,EAEJ6P,EAAY/P,EACZiU,EAAa,2BAOb,GAHAlE,EAAYtW,EAAW/4C,IAAK,0BAC5BuzD,EAAa,2BAEM,OAAdlE,EAGJ,YADA/yD,QAAQ0R,MAAO,kIAOjBqhD,EAAWkE,GAAcL,EAAMpiC,EAAOpS,EAAO40C,GAE7CL,EAAKpwD,OAAQ6b,EAAOw0C,EAAMI,IAY5B,SAASE,GAAmBlU,EAAIvG,EAAYppB,GAE3C,IAAI8jC,EAsBJ,SAASC,EAAiB9xB,GAEzB,GAAmB,UAAdA,EAAwB,CAE5B,GAAK0d,EAAGqU,yBAA0B,MAAO,OAAQ/xB,UAAY,GAC5D0d,EAAGqU,yBAA0B,MAAO,OAAQ/xB,UAAY,EAExD,MAAO,QAIRA,EAAY,UAIb,MAAmB,YAAdA,GAEC0d,EAAGqU,yBAA0B,MAAO,OAAQ/xB,UAAY,GAC5D0d,EAAGqU,yBAA0B,MAAO,OAAQ/xB,UAAY,EAEjD,UAMF,OAKR,MAAM4d,EAA+C,oBAA3BoU,wBAA0CtU,aAAcsU,wBACtC,oBAAlCC,+BAAiDvU,aAAcuU,8BAGzE,IAAIjyB,OAAqCjjC,IAAzBgxB,EAAWiS,UAA0BjS,EAAWiS,UAAY,QAC5E,MAAMkyB,EAAeJ,EAAiB9xB,GAEjCkyB,IAAiBlyB,IAErBtlC,QAAQC,KAAM,uBAAwBqlC,EAAW,uBAAwBkyB,EAAc,YACvFlyB,EAAYkyB,GAIb,MAAMC,GAA+D,IAAtCpkC,EAAWokC,uBAEpCC,EAAc1U,EAAG8P,aAAc,OAC/B6E,EAAoB3U,EAAG8P,aAAc,OACrC8E,EAAiB5U,EAAG8P,aAAc,MAClC+E,EAAiB7U,EAAG8P,aAAc,OAElCgF,EAAgB9U,EAAG8P,aAAc,OACjCiF,EAAoB/U,EAAG8P,aAAc,OACrCkF,EAAchV,EAAG8P,aAAc,OAC/BmF,EAAsBjV,EAAG8P,aAAc,OAEvCoF,EAAiBP,EAAoB,EACrCQ,EAAwBjV,KAAezG,EAAW/4C,IAAK,qBAK7D,MAAO,CAENw/C,SAAUA,EAEVkV,iBAvFD,WAEC,QAAuB/1D,IAAlB80D,EAA8B,OAAOA,EAE1C,MAAMpE,EAAYtW,EAAW/4C,IAAK,kCAYlC,OARCyzD,EAFkB,OAAdpE,EAEY/P,EAAG8P,aAAcC,EAAUsF,gCAI3B,EAIVlB,GAwEPC,gBAAiBA,EAEjB9xB,UAAWA,EACXmyB,uBAAwBA,EAExBC,YAAaA,EACbC,kBAAmBA,EACnBC,eAAgBA,EAChBC,eAAgBA,EAEhBC,cAAeA,EACfC,kBAAmBA,EACnBC,YAAaA,EACbC,oBAAqBA,EAErBC,eAAgBA,EAChBC,sBAAuBA,EACvBG,oBA1B2BJ,GAAkBC,EA4B7CI,WA1BkBrV,EAAWF,EAAG8P,aAAc,OAAU,GAgC1D,SAAS0F,GAAe30D,GAEvB,MAAM0yC,EAAQ70C,KAEd,IAAI+2D,EAAc,KACjBC,EAAkB,EAClBC,GAAuB,EACvBC,GAAmB,EAEpB,MAAMh1C,EAAQ,IAAIsQ,GACjB2kC,EAAmB,IAAIpnD,EAEvBqnD,EAAU,CAAEv4D,MAAO,KAAMmvC,aAAa,GAyFvC,SAASqpB,IAEHD,EAAQv4D,QAAUk4D,IAEtBK,EAAQv4D,MAAQk4D,EAChBK,EAAQppB,YAAcgpB,EAAkB,GAIzCniB,EAAMyiB,UAAYN,EAClBniB,EAAM0iB,gBAAkB,EAIzB,SAASC,EAAepY,EAAQ9gC,EAAQjE,EAAWo9C,GAElD,MAAMC,EAAqB,OAAXtY,EAAkBA,EAAO/1C,OAAS,EAClD,IAAIsuD,EAAW,KAEf,GAAiB,IAAZD,EAAgB,CAIpB,GAFAC,EAAWP,EAAQv4D,OAEI,IAAlB44D,GAAuC,OAAbE,EAAoB,CAElD,MAAMC,EAAWv9C,EAAsB,EAAVq9C,EAC5BG,EAAav5C,EAAOE,mBAErB24C,EAAiB/jC,gBAAiBykC,IAEhB,OAAbF,GAAqBA,EAAStuD,OAASuuD,KAE3CD,EAAW,IAAItuB,aAAcuuB,IAI9B,IAAM,IAAIztD,EAAI,EAAG2tD,EAAKz9C,EAAWlQ,IAAMutD,IAAYvtD,EAAG2tD,GAAM,EAE3D51C,EAAMzL,KAAM2oC,EAAQj1C,IAAMoU,aAAcs5C,EAAYV,GAEpDj1C,EAAMzC,OAAO4R,QAASsmC,EAAUG,GAChCH,EAAUG,EAAK,GAAM51C,EAAMC,SAM7Bi1C,EAAQv4D,MAAQ84D,EAChBP,EAAQppB,aAAc,EAOvB,OAHA6G,EAAMyiB,UAAYI,EAClB7iB,EAAM0iB,gBAAkB,EAEjBI,EA9IR33D,KAAKo3D,QAAUA,EACfp3D,KAAKs3D,UAAY,EACjBt3D,KAAKu3D,gBAAkB,EAEvBv3D,KAAK+3D,KAAO,SAAW3Y,EAAQ4Y,EAAqB15C,GAEnD,MAAMi6B,EACa,IAAlB6G,EAAO/1C,QACP2uD,GAGoB,IAApBhB,GACAC,EAOD,OALAA,EAAuBe,EAEvBjB,EAAcS,EAAepY,EAAQ9gC,EAAQ,GAC7C04C,EAAkB5X,EAAO/1C,OAElBkvC,GAIRv4C,KAAKi4D,aAAe,WAEnBf,GAAmB,EACnBM,EAAe,OAIhBx3D,KAAKk4D,WAAa,WAEjBhB,GAAmB,EACnBG,KAIDr3D,KAAKm4D,SAAW,SAAWtmC,EAAUvT,EAAQ85C,GAE5C,MAAMhZ,EAASvtB,EAAS0R,eACvBC,EAAmB3R,EAAS2R,iBAC5BC,EAAc5R,EAAS4R,YAElB40B,EAAqBl2D,EAAWH,IAAK6vB,GAE3C,IAAOolC,GAAmC,OAAX7X,GAAqC,IAAlBA,EAAO/1C,QAAgB6tD,IAAsBzzB,EAIzFyzB,EAIJM,EAAe,MAIfH,QAIK,CAEN,MAAMiB,EAAUpB,EAAmB,EAAIF,EACtCuB,EAAoB,EAAVD,EAEX,IAAIX,EAAWU,EAAmBG,eAAiB,KAEnDpB,EAAQv4D,MAAQ84D,EAEhBA,EAAWH,EAAepY,EAAQ9gC,EAAQi6C,EAASH,GAEnD,IAAM,IAAIjuD,EAAI,EAAGA,IAAMouD,IAAYpuD,EAElCwtD,EAAUxtD,GAAM4sD,EAAa5sD,GAI9BkuD,EAAmBG,cAAgBb,EACnC33D,KAAKu3D,gBAAkB/zB,EAAmBxjC,KAAKs3D,UAAY,EAC3Dt3D,KAAKs3D,WAAagB,IAoErB,SAASG,GAAe5a,GAEvB,IAAIwR,EAAW,IAAI3N,QAEnB,SAASgX,EAAmBx/C,EAASnE,GAYpC,OAx2fuC,MA81flCA,EAEJmE,EAAQnE,QAl2fmB,IAGW,MAi2f3BA,IAEXmE,EAAQnE,QAr2fmB,KAy2frBmE,EA6DR,MAAO,CACNlX,IA1DD,SAAckX,GAEb,GAAKA,GAAWA,EAAQ7C,UAAY,CAEnC,MAAMtB,EAAUmE,EAAQnE,QAExB,GAl3fsC,MAk3fjCA,GAj3fiC,MAi3feA,EAA+C,CAEnG,GAAKs6C,EAASprD,IAAKiV,GAAY,CAG9B,OAAOw/C,EADSrJ,EAASrtD,IAAKkX,GAAUA,QACLA,EAAQnE,SAErC,CAEN,MAAMb,EAAQgF,EAAQhF,MAEtB,GAAKA,GAASA,EAAM9F,OAAS,EAAI,CAEhC,MAAMuqD,EAAoB9a,EAAS+a,gBAC7B5a,EAAsBH,EAASI,kBAC/B4a,EAAqBhb,EAASib,iBAE9Bzb,EAAe,IAAIiB,GAAuBpqC,EAAM9F,OAAS,GAQ/D,OAPAivC,EAAaqB,2BAA4Bb,EAAU3kC,GACnDm2C,EAASxuD,IAAKqY,EAASmkC,GAEvBQ,EAASK,gBAAiBF,GAC1BH,EAASkb,cAAeJ,GACxB9a,EAASmb,eAAgBH,GAElBH,EAAmBrb,EAAankC,QAASA,EAAQnE,SAMxD,OAAO,OAUX,OAAOmE,GAYP9B,QARD,WAECi4C,EAAW,IAAI3N,UAWjB,SAASuX,GAAiB3X,GAEzB,MAAMvG,EAAa,GAEnB,MAAO,CAEN92C,IAAK,SAAW9C,GAEf,QAA4BR,IAAvBo6C,EAAY55C,GAEhB,OAA8B,OAAvB45C,EAAY55C,GAIpB,IAAIkwD,EAEJ,OAASlwD,GAER,IAAK,sBACJkwD,EAAY/P,EAAG4X,aAAc,wBAA2B5X,EAAG4X,aAAc,4BAA+B5X,EAAG4X,aAAc,8BACzH,MAED,IAAK,iCACJ7H,EAAY/P,EAAG4X,aAAc,mCAAsC5X,EAAG4X,aAAc,uCAA0C5X,EAAG4X,aAAc,yCAC/I,MAED,IAAK,gCACJ7H,EAAY/P,EAAG4X,aAAc,kCAAqC5X,EAAG4X,aAAc,sCAAyC5X,EAAG4X,aAAc,wCAC7I,MAED,IAAK,iCACJ7H,EAAY/P,EAAG4X,aAAc,mCAAsC5X,EAAG4X,aAAc,yCACpF,MAED,QACC7H,EAAY/P,EAAG4X,aAAc/3D,GAM/B,OAFA45C,EAAY55C,GAASkwD,EAEA,OAAdA,GAIRrvD,IAAK,SAAWb,GAQf,OANOnB,KAAKiE,IAAK9C,IAEhB7C,QAAQC,KAAM,wBAA0B4C,EAAO,6BAIzC45C,EAAY55C,KAQtB,SAASg4D,GAAiB7X,EAAIlhD,EAAY60D,EAAM1D,GAE/C,MAAMvgC,EAAa,IAAI0wB,QACjB0X,EAAsB,IAAI1X,QAEhC,SAAS2X,EAAmBpvD,GAE3B,MAAMyX,EAAWzX,EAAMjB,OACjBswD,EAAiBtoC,EAAWhvB,IAAK0f,GAET,OAAzB43C,EAAenwD,OAEnB/I,EAAW0vB,OAAQwpC,EAAenwD,OAInC,IAAM,MAAMhI,KAAQm4D,EAAel5D,WAElCA,EAAW0vB,OAAQwpC,EAAel5D,WAAYe,IAI/CugB,EAASzjB,oBAAqB,UAAWo7D,GAEzCroC,EAAW8wB,OAAQpgC,GAEnB,MAAMjiB,EAAY25D,EAAoBp3D,IAAKs3D,GAEtC75D,IAEJW,EAAW0vB,OAAQrwB,GACnB25D,EAAoBtX,OAAQwX,IAI7B/H,EAAcuD,wBAAyBpzC,IAEK,IAAvCA,EAASoyC,kCAENpyC,EAAS0yC,kBAMjBa,EAAKsE,OAAOvoC,aAkEb,SAASwoC,EAA0B93C,GAElC,MAAMwvB,EAAU,GAEVuoB,EAAgB/3C,EAASvY,MACzBuwD,EAAmBh4C,EAASthB,WAAWgqB,SAC7C,IAAIlU,EAAU,EAEd,GAAuB,OAAlBujD,EAAyB,CAE7B,MAAMvvD,EAAQuvD,EAAcvvD,MAC5BgM,EAAUujD,EAAcvjD,QAExB,IAAM,IAAI/L,EAAI,EAAGC,EAAIF,EAAMb,OAAQc,EAAIC,EAAGD,GAAK,EAAI,CAElD,MAAMiD,EAAIlD,EAAOC,EAAI,GACfkD,EAAInD,EAAOC,EAAI,GACfmD,EAAIpD,EAAOC,EAAI,GAErB+mC,EAAQ/yC,KAAMiP,EAAGC,EAAGA,EAAGC,EAAGA,EAAGF,QAIxB,CAEN,MAAMlD,EAAQwvD,EAAiBxvD,MAC/BgM,EAAUwjD,EAAiBxjD,QAE3B,IAAM,IAAI/L,EAAI,EAAGC,EAAMF,EAAMb,OAAS,EAAM,EAAGc,EAAIC,EAAGD,GAAK,EAAI,CAE9D,MAAMiD,EAAIjD,EAAI,EACRkD,EAAIlD,EAAI,EACRmD,EAAInD,EAAI,EAEd+mC,EAAQ/yC,KAAMiP,EAAGC,EAAGA,EAAGC,EAAGA,EAAGF,IAM/B,MAAM3N,EAAY,IAAMotC,GAAUqE,GAAY,MAAQhI,GAAwBJ,IAAyBoI,EAAS,GAChHzxC,EAAUyW,QAAUA,EAMpB,MAAMyjD,EAAoBP,EAAoBp3D,IAAK0f,GAE9Ci4C,GAAoBv5D,EAAW0vB,OAAQ6pC,GAI5CP,EAAoBv4D,IAAK6gB,EAAUjiB,GAkCpC,MAAO,CAENuC,IAvJD,SAAckf,EAAQQ,GAErB,IAAI43C,EAAiBtoC,EAAWhvB,IAAK0f,GAErC,OAAK43C,IAEL53C,EAAS1jB,iBAAkB,UAAWq7D,GAEjC33C,EAAS8rB,iBAEb8rB,EAAiB53C,EAENA,EAASktB,kBAEcjuC,IAA7B+gB,EAASk4C,kBAEbl4C,EAASk4C,iBAAkB,IAAIxsB,IAAiBqB,cAAevtB,IAIhEo4C,EAAiB53C,EAASk4C,iBAI3B5oC,EAAWnwB,IAAK6gB,EAAU43C,GAE1BrE,EAAKsE,OAAOvoC,aAELsoC,IA4HPz0D,OAxHD,SAAiB6c,GAEhB,MAAMgyC,EAAqBhyC,EAASthB,WAIpC,IAAM,MAAMe,KAAQuyD,EAEnBtzD,EAAWyE,OAAQ6uD,EAAoBvyD,GAAQ,OAMhD,MAAMksC,EAAkB3rB,EAAS2rB,gBAEjC,IAAM,MAAMlsC,KAAQksC,EAAkB,CAErC,MAAMnjC,EAAQmjC,EAAiBlsC,GAE/B,IAAM,IAAIgJ,EAAI,EAAGC,EAAIF,EAAMb,OAAQc,EAAIC,EAAGD,IAEzC/J,EAAWyE,OAAQqF,EAAOC,GAAK,SAoGjC0vD,sBAnCD,SAAgCn4C,GAE/B,MAAMo4C,EAAmBV,EAAoBp3D,IAAK0f,GAElD,GAAKo4C,EAAmB,CAEvB,MAAML,EAAgB/3C,EAASvY,MAER,OAAlBswD,GAICK,EAAiB5jD,QAAUujD,EAAcvjD,SAE7CsjD,EAA0B93C,QAQ5B83C,EAA0B93C,GAI3B,OAAO03C,EAAoBp3D,IAAK0f,KAelC,SAASq4C,GAA4BzY,EAAIvG,EAAYka,EAAM1T,GAE1D,MAAMC,EAAWD,EAAaC,SAE9B,IAAI0T,EAQAp2D,EAAMmjD,EAkDVjiD,KAAKm1D,QAxDL,SAAkBt2D,GAEjBq2D,EAAOr2D,GAuDRmB,KAAK0tC,SAjDL,SAAmB7uC,GAElBC,EAAOD,EAAMC,KACbmjD,EAAkBpjD,EAAMojD,iBA+CzBjiD,KAAKm+C,OA3CL,SAAiBrrB,EAAOpS,GAEvB4gC,EAAG0Y,aAAc9E,EAAMx0C,EAAO5hB,EAAMg0B,EAAQmvB,GAE5CgT,EAAKpwD,OAAQ6b,EAAOw0C,EAAM,IAwC3Bl1D,KAAKq1D,gBApCL,SAA0BviC,EAAOpS,EAAO40C,GAEvC,GAAmB,IAAdA,EAAkB,OAEvB,IAAIjE,EAAWkE,EAEf,GAAK/T,EAEJ6P,EAAY/P,EACZiU,EAAa,6BAOb,GAHAlE,EAAYtW,EAAW/4C,IAAK,0BAC5BuzD,EAAa,6BAEM,OAAdlE,EAGJ,YADA/yD,QAAQ0R,MAAO,yIAOjBqhD,EAAWkE,GAAcL,EAAMx0C,EAAO5hB,EAAMg0B,EAAQmvB,EAAiBqT,GAErEL,EAAKpwD,OAAQ6b,EAAOw0C,EAAMI,IAa5B,SAAS2E,GAAW3Y,GAEnB,MAKMnD,EAAS,CACd4C,MAAO,EACPmZ,MAAO,EACPC,UAAW,EACXx5C,OAAQ,EACRy5C,MAAO,GA+CR,MAAO,CACNb,OA1Dc,CACdvoC,WAAY,EACZna,SAAU,GAyDVsnC,OAAQA,EACRkc,SAAU,KACVC,WAAW,EACXtH,MAfD,WAEC7U,EAAO4C,QACP5C,EAAO+b,MAAQ,EACf/b,EAAOgc,UAAY,EACnBhc,EAAOx9B,OAAS,EAChBw9B,EAAOic,MAAQ,GAUfv1D,OAlDD,SAAiB6b,EAAOw0C,EAAMqF,GAI7B,OAFApc,EAAO+b,QAEEhF,GAER,KAAK,EACJ/W,EAAOgc,WAAaI,GAAkB75C,EAAQ,GAC9C,MAED,KAAK,EACJy9B,EAAOic,OAASG,GAAkB75C,EAAQ,GAC1C,MAED,KAAK,EACJy9B,EAAOic,OAASG,GAAkB75C,EAAQ,GAC1C,MAED,KAAK,EACJy9B,EAAOic,OAASG,EAAgB75C,EAChC,MAED,KAAK,EACJy9B,EAAOx9B,QAAU45C,EAAgB75C,EACjC,MAED,QACCpiB,QAAQ0R,MAAO,sCAAuCklD,MA4B1D,SAASsF,GAAeptD,EAAGC,GAE1B,OAAOD,EAAG,GAAMC,EAAG,GAIpB,SAASotD,GAAkBrtD,EAAGC,GAE7B,OAAOhQ,KAAK4R,IAAK5B,EAAG,IAAQhQ,KAAK4R,IAAK7B,EAAG,IAI1C,SAASstD,GAAmBpZ,GAE3B,MAAMqZ,EAAiB,GACjBvnB,EAAkB,IAAI/J,aAAc,GAEpCuxB,EAAiB,GAEvB,IAAM,IAAIzwD,EAAI,EAAGA,EAAI,EAAGA,IAEvBywD,EAAgBzwD,GAAM,CAAEA,EAAG,GAwH5B,MAAO,CAENtF,OAtHD,SAAiBqc,EAAQQ,EAAUmQ,EAAUwgC,GAE5C,MAAMwI,EAAmB35C,EAAOmyB,sBAK1BhqC,OAA8B1I,IAArBk6D,EAAiC,EAAIA,EAAiBxxD,OAErE,IAAIyxD,EAAaH,EAAgBj5C,EAASuO,IAE1C,QAAoBtvB,IAAfm6D,EAA2B,CAI/BA,EAAa,GAEb,IAAM,IAAI3wD,EAAI,EAAGA,EAAId,EAAQc,IAE5B2wD,EAAY3wD,GAAM,CAAEA,EAAG,GAIxBwwD,EAAgBj5C,EAASuO,IAAO6qC,EAMjC,IAAM,IAAI3wD,EAAI,EAAGA,EAAId,EAAQc,IAAO,CAEnC,MAAMmpC,EAAYwnB,EAAY3wD,GAE9BmpC,EAAW,GAAMnpC,EACjBmpC,EAAW,GAAMunB,EAAkB1wD,GAIpC2wD,EAAW1jB,KAAMqjB,IAEjB,IAAM,IAAItwD,EAAI,EAAGA,EAAI,EAAGA,IAElBA,EAAId,GAAUyxD,EAAY3wD,GAAK,IAEnCywD,EAAgBzwD,GAAK,GAAM2wD,EAAY3wD,GAAK,GAC5CywD,EAAgBzwD,GAAK,GAAM2wD,EAAY3wD,GAAK,KAI5CywD,EAAgBzwD,GAAK,GAAM/K,OAAO27D,iBAClCH,EAAgBzwD,GAAK,GAAM,GAM7BywD,EAAexjB,KAAMojB,IAErB,MAAMn1B,EAAexT,EAASwT,cAAgB3jB,EAAS2rB,gBAAgBjjB,SACjEwd,EAAe/V,EAAS+V,cAAgBlmB,EAAS2rB,gBAAgB5tB,OAEvE,IAAIu7C,EAAqB,EAEzB,IAAM,IAAI7wD,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAMmpC,EAAYsnB,EAAgBzwD,GAC5BhB,EAAQmqC,EAAW,GACnBz0C,EAAQy0C,EAAW,GAEpBnqC,IAAU/J,OAAO27D,kBAAoBl8D,GAEpCwmC,GAAgB3jB,EAASisB,aAAc,cAAgBxjC,KAAQk7B,EAAcl8B,IAEjFuY,EAAS/d,aAAc,cAAgBwG,EAAGk7B,EAAcl8B,IAIpDy+B,GAAgBlmB,EAASisB,aAAc,cAAgBxjC,KAAQy9B,EAAcz+B,IAEjFuY,EAAS/d,aAAc,cAAgBwG,EAAGy9B,EAAcz+B,IAIzDiqC,EAAiBjpC,GAAMtL,EACvBm8D,GAAsBn8D,IAIjBwmC,QAA+D1kC,IAA/C+gB,EAASisB,aAAc,cAAgBxjC,IAE3DuX,EAASksB,gBAAiB,cAAgBzjC,GAItCy9B,QAA+DjnC,IAA/C+gB,EAASisB,aAAc,cAAgBxjC,IAE3DuX,EAASksB,gBAAiB,cAAgBzjC,GAI3CipC,EAAiBjpC,GAAM,GASzB,MAAM8wD,EAAqBv5C,EAAS4rB,qBAAuB,EAAI,EAAI0tB,EAEnE3I,EAAQ6I,cAAcC,SAAU7Z,EAAI,2BAA4B2Z,GAChE5I,EAAQ6I,cAAcC,SAAU7Z,EAAI,wBAAyBlO,KAY/D,SAASgoB,GAAc9Z,EAAItwB,EAAY5wB,EAAY60D,GAElD,IAAIoG,EAAY,IAAI3Z,QA+CpB,MAAO,CAEN78C,OA/CD,SAAiBqc,GAEhB,MAAM6/B,EAAQkU,EAAK9W,OAAO4C,MAEpBr/B,EAAWR,EAAOQ,SAClB43C,EAAiBtoC,EAAWhvB,IAAKkf,EAAQQ,GA8B/C,OA1BK25C,EAAUr5D,IAAKs3D,KAAqBvY,IAEnCr/B,EAASktB,YAEb0qB,EAAexqB,iBAAkB5tB,GAIlC8P,EAAWnsB,OAAQy0D,GAEnB+B,EAAUx6D,IAAKy4D,EAAgBvY,IAI3B7/B,EAAOoQ,kBAEXlxB,EAAWyE,OAAQqc,EAAOqQ,eAAgB,OAEZ,OAAzBrQ,EAAOozC,eAEXl0D,EAAWyE,OAAQqc,EAAOozC,cAAe,QAMpCgF,GAaPliD,QATD,WAECikD,EAAY,IAAI3Z,UAalB,SAAS4Z,GAAarkD,EAAQlC,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,EAAYC,GAEpG2B,OAAoBtW,IAAXsW,EAAuBA,EAAS,GACzClC,OAAsBpU,IAAZoU,EAAwBA,EAzhhBL,IA0hhB7BK,OAAoBzU,IAAXyU,EAAuBA,EA9/gBf,KAgghBjBN,EAAQnP,KAAM3F,KAAMiX,EAAQlC,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,EAAYC,GAEnGtV,KAAKgW,OAAQ,EAyBd,SAASulD,GAAoBrpC,EAAM/jB,EAAOC,EAAQwqC,GAEjD9jC,EAAQnP,KAAM3F,KAAM,MAEpBA,KAAKkU,MAAQ,CAAEge,KAAMA,GAAQ,KAAM/jB,MAAOA,GAAS,EAAGC,OAAQA,GAAU,EAAGwqC,MAAOA,GAAS,GAE3F54C,KAAKkV,UApjhBgB,KAqjhBrBlV,KAAKmV,UArjhBgB,KAujhBrBnV,KAAKw7D,MAzjhBsB,KA2jhB3Bx7D,KAAK8V,iBAAkB,EACvB9V,KAAKgW,OAAQ,EAEbhW,KAAKguC,aAAc,EAQpB,SAASytB,GAAevpC,EAAM/jB,EAAOC,EAAQwqC,GAU5C9jC,EAAQnP,KAAM3F,KAAM,MAEpBA,KAAKkU,MAAQ,CAAEge,KAAMA,GAAQ,KAAM/jB,MAAOA,GAAS,EAAGC,OAAQA,GAAU,EAAGwqC,MAAOA,GAAS,GAE3F54C,KAAKkV,UAllhBgB,KAmlhBrBlV,KAAKmV,UAnlhBgB,KAqlhBrBnV,KAAKw7D,MAvlhBsB,KAylhB3Bx7D,KAAK8V,iBAAkB,EACvB9V,KAAKgW,OAAQ,EAEbhW,KAAKguC,aAAc,EAh5DpBmgB,GAAUuN,SAAW,CAEpBphB,SAAUD,GAAe,CACxB8T,GAAUI,SAASjU,SACnB,CACClU,UAAW,CAAEvnC,MAAO,GACpBynC,aAAc,CAAEznC,MAAO,MACvBwnC,mBAAoB,CAAExnC,MAAO,GAC7B0nC,sBAAuB,CAAE1nC,MAAO,MAChC4nC,qBAAsB,CAAE5nC,MAAO,IAAIqP,EAAS,EAAG,IAC/Cs4B,mBAAoB,CAAE3nC,MAAO,MAC7BknC,MAAO,CAAElnC,MAAO,IAAI6gC,GAAO,IAC3Bi8B,aAAc,CAAE98D,MAAO,GACvB+8D,gBAAiB,CAAE/8D,MAAO,SAI5B87C,aAAcoI,GAAYyH,kBAC1B5P,eAAgBmI,GAAYwH,mBA6zD7B+Q,GAAYh6D,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WAC/Cg6D,GAAYh6D,UAAU4B,YAAco4D,GAEpCA,GAAYh6D,UAAUwvD,eAAgB,EAEtC9xD,OAAO2C,eAAgB25D,GAAYh6D,UAAW,SAAU,CAEvDU,IAAK,WAEJ,OAAOhC,KAAKkU,OAIbrT,IAAK,SAAWhC,GAEfmB,KAAKkU,MAAQrV,KAwBf08D,GAAmBj6D,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WACtDi6D,GAAmBj6D,UAAU4B,YAAcq4D,GAC3CA,GAAmBj6D,UAAUu6D,sBAAuB,EA6BpDJ,GAAcn6D,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WACjDm6D,GAAcn6D,UAAU4B,YAAcu4D,GACtCA,GAAcn6D,UAAUw6D,iBAAkB,EA6C1C,MAAMC,GAAe,IAAIjnD,EACnBknD,GAAsB,IAAIT,GAC1BU,GAAiB,IAAIR,GACrBS,GAAmB,IAAIZ,GAMvBa,GAAgB,GAChBC,GAAgB,GAIhBC,GAAY,IAAIhzB,aAAc,IAC9BizB,GAAY,IAAIjzB,aAAc,GAC9BkzB,GAAY,IAAIlzB,aAAc,GAIpC,SAASmzB,GAAStyD,EAAOuyD,EAASC,GAEjC,MAAMC,EAAYzyD,EAAO,GAEzB,GAAKyyD,GAAa,GAAKA,EAAY,EAAI,OAAOzyD,EAI9C,MAAMmB,EAAIoxD,EAAUC,EACpB,IAAIppD,EAAI6oD,GAAe9wD,GASvB,QAPW1K,IAAN2S,IAEJA,EAAI,IAAI+1B,aAAch+B,GACtB8wD,GAAe9wD,GAAMiI,GAIL,IAAZmpD,EAAgB,CAEpBE,EAAUtrC,QAAS/d,EAAG,GAEtB,IAAM,IAAInJ,EAAI,EAAGuF,EAAS,EAAGvF,IAAMsyD,IAAYtyD,EAE9CuF,GAAUgtD,EACVxyD,EAAOC,GAAIknB,QAAS/d,EAAG5D,GAMzB,OAAO4D,EAIR,SAASspD,GAAaxvD,EAAGC,GAExB,GAAKD,EAAE/D,SAAWgE,EAAEhE,OAAS,OAAO,EAEpC,IAAM,IAAIc,EAAI,EAAGC,EAAIgD,EAAE/D,OAAQc,EAAIC,EAAGD,IAErC,GAAKiD,EAAGjD,KAAQkD,EAAGlD,GAAM,OAAO,EAIjC,OAAO,EAIR,SAAS2/B,GAAW18B,EAAGC,GAEtB,IAAM,IAAIlD,EAAI,EAAGC,EAAIiD,EAAEhE,OAAQc,EAAIC,EAAGD,IAErCiD,EAAGjD,GAAMkD,EAAGlD,GAQd,SAAS0yD,GAAehmD,EAAUxL,GAEjC,IAAIiI,EAAI8oD,GAAe/wD,QAEZ1K,IAAN2S,IAEJA,EAAI,IAAI21B,WAAY59B,GACpB+wD,GAAe/wD,GAAMiI,GAItB,IAAM,IAAInJ,EAAI,EAAGA,IAAMkB,IAAMlB,EAE5BmJ,EAAGnJ,GAAM0M,EAASimD,sBAInB,OAAOxpD,EAWR,SAASypD,GAAazb,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEdA,EAAO,KAAQzxB,IAEpB+gD,EAAG0b,UAAWh9D,KAAKi9D,KAAM18D,GAEzByxB,EAAO,GAAMzxB,GAMd,SAAS28D,GAAa5b,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEnB,QAAarxB,IAARJ,EAAEqI,EAEDopB,EAAO,KAAQzxB,EAAEqI,GAAKopB,EAAO,KAAQzxB,EAAEsL,IAE3Cy1C,EAAG6b,UAAWn9D,KAAKi9D,KAAM18D,EAAEqI,EAAGrI,EAAEsL,GAEhCmmB,EAAO,GAAMzxB,EAAEqI,EACfopB,EAAO,GAAMzxB,EAAEsL,OAIV,CAEN,GAAK+wD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAG8b,WAAYp9D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAMpB,SAAS88D,GAAa/b,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEnB,QAAarxB,IAARJ,EAAEqI,EAEDopB,EAAO,KAAQzxB,EAAEqI,GAAKopB,EAAO,KAAQzxB,EAAEsL,GAAKmmB,EAAO,KAAQzxB,EAAEkX,IAEjE6pC,EAAGgc,UAAWt9D,KAAKi9D,KAAM18D,EAAEqI,EAAGrI,EAAEsL,EAAGtL,EAAEkX,GAErCua,EAAO,GAAMzxB,EAAEqI,EACfopB,EAAO,GAAMzxB,EAAEsL,EACfmmB,EAAO,GAAMzxB,EAAEkX,QAIV,QAAa9W,IAARJ,EAAE+S,EAER0e,EAAO,KAAQzxB,EAAE+S,GAAK0e,EAAO,KAAQzxB,EAAEiS,GAAKwf,EAAO,KAAQzxB,EAAE8M,IAEjEi0C,EAAGgc,UAAWt9D,KAAKi9D,KAAM18D,EAAE+S,EAAG/S,EAAEiS,EAAGjS,EAAE8M,GAErC2kB,EAAO,GAAMzxB,EAAE+S,EACf0e,EAAO,GAAMzxB,EAAEiS,EACfwf,EAAO,GAAMzxB,EAAE8M,OAIV,CAEN,GAAKuvD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAGic,WAAYv9D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAMpB,SAASi9D,GAAalc,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEnB,QAAarxB,IAARJ,EAAEqI,EAEDopB,EAAO,KAAQzxB,EAAEqI,GAAKopB,EAAO,KAAQzxB,EAAEsL,GAAKmmB,EAAO,KAAQzxB,EAAEkX,GAAKua,EAAO,KAAQzxB,EAAEgO,IAEvF+yC,EAAGmc,UAAWz9D,KAAKi9D,KAAM18D,EAAEqI,EAAGrI,EAAEsL,EAAGtL,EAAEkX,EAAGlX,EAAEgO,GAE1CyjB,EAAO,GAAMzxB,EAAEqI,EACfopB,EAAO,GAAMzxB,EAAEsL,EACfmmB,EAAO,GAAMzxB,EAAEkX,EACfua,EAAO,GAAMzxB,EAAEgO,OAIV,CAEN,GAAKquD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAGoc,WAAY19D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAQpB,SAASo9D,GAAYrc,EAAI/gD,GAExB,MAAMyxB,EAAQhyB,KAAKgyB,MACbrjB,EAAWpO,EAAEoO,SAEnB,QAAkBhO,IAAbgO,EAAyB,CAE7B,GAAKiuD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAGsc,iBAAkB59D,KAAKi9D,MAAM,EAAO18D,GAEvCupC,GAAW9X,EAAOzxB,OAEZ,CAEN,GAAKq8D,GAAa5qC,EAAOrjB,GAAa,OAEtC4tD,GAAU17D,IAAK8N,GAEf2yC,EAAGsc,iBAAkB59D,KAAKi9D,MAAM,EAAOV,IAEvCzyB,GAAW9X,EAAOrjB,IAMpB,SAASkvD,GAAYvc,EAAI/gD,GAExB,MAAMyxB,EAAQhyB,KAAKgyB,MACbrjB,EAAWpO,EAAEoO,SAEnB,QAAkBhO,IAAbgO,EAAyB,CAE7B,GAAKiuD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAGwc,iBAAkB99D,KAAKi9D,MAAM,EAAO18D,GAEvCupC,GAAW9X,EAAOzxB,OAEZ,CAEN,GAAKq8D,GAAa5qC,EAAOrjB,GAAa,OAEtC2tD,GAAUz7D,IAAK8N,GAEf2yC,EAAGwc,iBAAkB99D,KAAKi9D,MAAM,EAAOX,IAEvCxyB,GAAW9X,EAAOrjB,IAMpB,SAASovD,GAAYzc,EAAI/gD,GAExB,MAAMyxB,EAAQhyB,KAAKgyB,MACbrjB,EAAWpO,EAAEoO,SAEnB,QAAkBhO,IAAbgO,EAAyB,CAE7B,GAAKiuD,GAAa5qC,EAAOzxB,GAAM,OAE/B+gD,EAAG0c,iBAAkBh+D,KAAKi9D,MAAM,EAAO18D,GAEvCupC,GAAW9X,EAAOzxB,OAEZ,CAEN,GAAKq8D,GAAa5qC,EAAOrjB,GAAa,OAEtC0tD,GAAUx7D,IAAK8N,GAEf2yC,EAAG0c,iBAAkBh+D,KAAKi9D,MAAM,EAAOZ,IAEvCvyB,GAAW9X,EAAOrjB,IAQpB,SAASsvD,GAAY3c,EAAI/gD,EAAGsW,GAE3B,MAAMmb,EAAQhyB,KAAKgyB,MACbksC,EAAOrnD,EAASimD,sBAEjB9qC,EAAO,KAAQksC,IAEnB5c,EAAG6c,UAAWn+D,KAAKi9D,KAAMiB,GACzBlsC,EAAO,GAAMksC,GAIdrnD,EAASunD,iBAAkB79D,GAAKw7D,GAAcmC,GAI/C,SAASG,GAAmB/c,EAAI/gD,EAAGsW,GAElC,MAAMmb,EAAQhyB,KAAKgyB,MACbksC,EAAOrnD,EAASimD,sBAEjB9qC,EAAO,KAAQksC,IAEnB5c,EAAG6c,UAAWn+D,KAAKi9D,KAAMiB,GACzBlsC,EAAO,GAAMksC,GAIdrnD,EAASynD,kBAAmB/9D,GAAKy7D,GAAqBkC,GAIvD,SAASK,GAAcjd,EAAI/gD,EAAGsW,GAE7B,MAAMmb,EAAQhyB,KAAKgyB,MACbksC,EAAOrnD,EAASimD,sBAEjB9qC,EAAO,KAAQksC,IAEnB5c,EAAG6c,UAAWn+D,KAAKi9D,KAAMiB,GACzBlsC,EAAO,GAAMksC,GAIdrnD,EAAS2nD,aAAcj+D,GAAK07D,GAAgBiC,GAI7C,SAASO,GAAYnd,EAAI/gD,EAAGsW,GAE3B,MAAMmb,EAAQhyB,KAAKgyB,MACbksC,EAAOrnD,EAASimD,sBAEjB9qC,EAAO,KAAQksC,IAEnB5c,EAAG6c,UAAWn+D,KAAKi9D,KAAMiB,GACzBlsC,EAAO,GAAMksC,GAIdrnD,EAAS6nD,mBAAoBn+D,GAAK27D,GAAkBgC,GAMrD,SAASS,GAAard,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEdA,EAAO,KAAQzxB,IAEpB+gD,EAAG6c,UAAWn+D,KAAKi9D,KAAM18D,GAEzByxB,EAAO,GAAMzxB,GAId,SAASq+D,GAAatd,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEd4qC,GAAa5qC,EAAOzxB,KAEzB+gD,EAAGud,WAAY7+D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAInB,SAASu+D,GAAaxd,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEd4qC,GAAa5qC,EAAOzxB,KAEzB+gD,EAAGyd,WAAY/+D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAInB,SAASy+D,GAAa1d,EAAI/gD,GAEzB,MAAMyxB,EAAQhyB,KAAKgyB,MAEd4qC,GAAa5qC,EAAOzxB,KAEzB+gD,EAAG2d,WAAYj/D,KAAKi9D,KAAM18D,GAE1BupC,GAAW9X,EAAOzxB,IAMnB,SAAS2+D,GAAc5d,EAAI/gD,GAE1B,MAAMyxB,EAAQhyB,KAAKgyB,MAEdA,EAAO,KAAQzxB,IAEpB+gD,EAAG6d,WAAYn/D,KAAKi9D,KAAM18D,GAE1ByxB,EAAO,GAAMzxB,GAuDd,SAAS6+D,GAAkB9d,EAAI/gD,GAE9B+gD,EAAG+d,WAAYr/D,KAAKi9D,KAAM18D,GAK3B,SAAS++D,GAAkBhe,EAAI/gD,GAE9B+gD,EAAGie,WAAYv/D,KAAKi9D,KAAM18D,GAI3B,SAASi/D,GAAkBle,EAAI/gD,GAE9B+gD,EAAGud,WAAY7+D,KAAKi9D,KAAM18D,GAI3B,SAASk/D,GAAkBne,EAAI/gD,GAE9B+gD,EAAGyd,WAAY/+D,KAAKi9D,KAAM18D,GAI3B,SAASm/D,GAAkBpe,EAAI/gD,GAE9B+gD,EAAG2d,WAAYj/D,KAAKi9D,KAAM18D,GAO3B,SAASo/D,GAAkBre,EAAI/gD,GAE9B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,GAEpCo8C,EAAG8b,WAAYp9D,KAAKi9D,KAAM/qC,GAI3B,SAAS0tC,GAAkBte,EAAI/gD,GAE9B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,GAEpCo8C,EAAGic,WAAYv9D,KAAKi9D,KAAM/qC,GAI3B,SAAS2tC,GAAkBve,EAAI/gD,GAE9B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,GAEpCo8C,EAAGoc,WAAY19D,KAAKi9D,KAAM/qC,GAM3B,SAAS4tC,GAAiBxe,EAAI/gD,GAE7B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,GAEpCo8C,EAAGsc,iBAAkB59D,KAAKi9D,MAAM,EAAO/qC,GAIxC,SAAS6tC,GAAiBze,EAAI/gD,GAE7B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,GAEpCo8C,EAAGwc,iBAAkB99D,KAAKi9D,MAAM,EAAO/qC,GAIxC,SAAS8tC,GAAiB1e,EAAI/gD,GAE7B,MAAM2xB,EAAOsqC,GAASj8D,EAAGP,KAAKkF,KAAM,IAEpCo8C,EAAG0c,iBAAkBh+D,KAAKi9D,MAAM,EAAO/qC,GAMxC,SAAS+tC,GAAiB3e,EAAI/gD,EAAGsW,GAEhC,MAAMxL,EAAI9K,EAAE8I,OAEN62D,EAAQrD,GAAehmD,EAAUxL,GAEvCi2C,EAAGie,WAAYv/D,KAAKi9D,KAAMiD,GAE1B,IAAM,IAAI/1D,EAAI,EAAGA,IAAMkB,IAAMlB,EAE5B0M,EAASunD,iBAAkB79D,EAAG4J,IAAO4xD,GAAcmE,EAAO/1D,IAM5D,SAASg2D,GAAiB7e,EAAI/gD,EAAGsW,GAEhC,MAAMxL,EAAI9K,EAAE8I,OAEN62D,EAAQrD,GAAehmD,EAAUxL,GAEvCi2C,EAAGie,WAAYv/D,KAAKi9D,KAAMiD,GAE1B,IAAM,IAAI/1D,EAAI,EAAGA,IAAMkB,IAAMlB,EAE5B0M,EAAS6nD,mBAAoBn+D,EAAG4J,IAAO+xD,GAAkBgE,EAAO/1D,IA6ClE,SAASi2D,GAAenwC,EAAIowC,EAAYpD,GAEvCj9D,KAAKiwB,GAAKA,EACVjwB,KAAKi9D,KAAOA,EACZj9D,KAAKgyB,MAAQ,GACbhyB,KAAKm7D,SAnNN,SAA4Br8D,GAE3B,OAASA,GAER,KAAK,KAAQ,OAAOi+D,GACpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOG,GAEpB,KAAK,MAAQ,OAAOG,GACpB,KAAK,MAAQ,OAAOE,GACpB,KAAK,MAAQ,OAAOE,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOY,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOC,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GAEjC,KAAK,KAAQ,OAAOE,GAEpB,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOjB,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOM,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOJ,IAyKOiC,CAAmBD,EAAWvhE,MAM/C,SAASyhE,GAAkBtwC,EAAIowC,EAAYpD,GAE1Cj9D,KAAKiwB,GAAKA,EACVjwB,KAAKi9D,KAAOA,EACZj9D,KAAKgyB,MAAQ,GACbhyB,KAAKkF,KAAOm7D,EAAWn7D,KACvBlF,KAAKm7D,SAtDN,SAA6Br8D,GAE5B,OAASA,GAER,KAAK,KAAQ,OAAOsgE,GACpB,KAAK,MAAQ,OAAOO,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GACpB,KAAK,MAAQ,OAAOC,GAEpB,KAAK,KAAQ,KAAK,MAAQ,OAAOV,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOE,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOC,GACjC,KAAK,MAAQ,KAAK,MAAQ,OAAOC,GAEjC,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOO,GAER,KAAK,MACL,KAAK,MACL,KAAK,MACL,KAAK,MACJ,OAAOE,IAyBOK,CAAoBH,EAAWvhE,MAoBhD,SAAS2hE,GAAmBxwC,GAE3BjwB,KAAKiwB,GAAKA,EAEVjwB,KAAK0gE,IAAM,GACX1gE,KAAKqkC,IAAM,GAnBZk8B,GAAiBj/D,UAAUq/D,YAAc,SAAWzuC,GAEnD,MAAMF,EAAQhyB,KAAKgyB,MAEdE,aAAgBmX,cAAgBrX,EAAM3oB,SAAW6oB,EAAK7oB,SAE1DrJ,KAAKgyB,MAAQ,IAAIqX,aAAcnX,EAAK7oB,SAIrCygC,GAAW9X,EAAOE,IAanBuuC,GAAkBn/D,UAAU65D,SAAW,SAAW7Z,EAAIziD,EAAOgY,GAE5D,MAAM6pD,EAAM1gE,KAAK0gE,IAEjB,IAAM,IAAIv2D,EAAI,EAAGkB,EAAIq1D,EAAIr3D,OAAQc,IAAMkB,IAAMlB,EAAI,CAEhD,MAAMuqB,EAAIgsC,EAAKv2D,GACfuqB,EAAEymC,SAAU7Z,EAAIziD,EAAO61B,EAAEzE,IAAMpZ,KAUjC,MAAM+pD,GAAa,2BAWnB,SAASC,GAAYC,EAAWC,GAE/BD,EAAUJ,IAAIviE,KAAM4iE,GACpBD,EAAUz8B,IAAK08B,EAAc9wC,IAAO8wC,EAIrC,SAASC,GAAcX,EAAYpD,EAAM6D,GAExC,MAAMG,EAAOZ,EAAWl/D,KACvB+/D,EAAaD,EAAK53D,OAKnB,IAFAu3D,GAAWO,UAAY,IAER,CAEd,MAAMp4D,EAAQ63D,GAAWxgC,KAAM6gC,GAC9BG,EAAWR,GAAWO,UAEvB,IAAIlxC,EAAKlnB,EAAO,GAChB,MAAMs4D,EAA2B,MAAft4D,EAAO,GACxBu4D,EAAYv4D,EAAO,GAIpB,GAFKs4D,IAAYpxC,GAAU,QAERtvB,IAAd2gE,GAAyC,MAAdA,GAAqBF,EAAW,IAAMF,EAAa,CAIlFL,GAAYC,OAAyBngE,IAAd2gE,EACtB,IAAIlB,GAAenwC,EAAIowC,EAAYpD,GACnC,IAAIsD,GAAkBtwC,EAAIowC,EAAYpD,IAEvC,MAEM,CAKN,IAAIsE,EADQT,EAAUz8B,IACNpU,QAEFtvB,IAAT4gE,IAEJA,EAAO,IAAId,GAAmBxwC,GAC9B4wC,GAAYC,EAAWS,IAIxBT,EAAYS,IAUf,SAASC,GAAelgB,EAAI+Q,GAE3BryD,KAAK0gE,IAAM,GACX1gE,KAAKqkC,IAAM,GAEX,MAAMh5B,EAAIi2C,EAAGmgB,oBAAqBpP,EAAS,OAE3C,IAAM,IAAIloD,EAAI,EAAGA,EAAIkB,IAAMlB,EAAI,CAE9B,MAAM8qD,EAAO3T,EAAGogB,iBAAkBrP,EAASloD,GAG3C62D,GAAc/L,EAFN3T,EAAGqgB,mBAAoBtP,EAAS4C,EAAK9zD,MAEnBnB,OA0D5B,SAAS4hE,GAAatgB,EAAIxiD,EAAMohC,GAE/B,MAAMye,EAAS2C,EAAGugB,aAAc/iE,GAKhC,OAHAwiD,EAAGwgB,aAAcnjB,EAAQze,GACzBohB,EAAGygB,cAAepjB,GAEXA,EA3DR6iB,GAAclgE,UAAU65D,SAAW,SAAW7Z,EAAIngD,EAAMtC,EAAOgY,GAE9D,MAAM6d,EAAI10B,KAAKqkC,IAAKljC,QAETR,IAAN+zB,GAAkBA,EAAEymC,SAAU7Z,EAAIziD,EAAOgY,IAI/C2qD,GAAclgE,UAAU0gE,YAAc,SAAW1gB,EAAIpgC,EAAQ/f,GAE5D,MAAMZ,EAAI2gB,EAAQ/f,QAEPR,IAANJ,GAAkBP,KAAKm7D,SAAU7Z,EAAIngD,EAAMZ,IAOjDihE,GAAcS,OAAS,SAAW3gB,EAAIof,EAAKzuC,EAAQpb,GAElD,IAAM,IAAI1M,EAAI,EAAGkB,EAAIq1D,EAAIr3D,OAAQc,IAAMkB,IAAMlB,EAAI,CAEhD,MAAMuqB,EAAIgsC,EAAKv2D,GACd5J,EAAI0xB,EAAQyC,EAAEzE,KAEQ,IAAlB1vB,EAAEytC,aAGNtZ,EAAEymC,SAAU7Z,EAAI/gD,EAAE1B,MAAOgY,KAQ5B2qD,GAAcU,aAAe,SAAWxB,EAAKzuC,GAE5C,MAAM3e,EAAI,GAEV,IAAM,IAAInJ,EAAI,EAAGkB,EAAIq1D,EAAIr3D,OAAQc,IAAMkB,IAAMlB,EAAI,CAEhD,MAAMuqB,EAAIgsC,EAAKv2D,GACVuqB,EAAEzE,MAAMgC,GAAS3e,EAAEnV,KAAMu2B,GAI/B,OAAOphB,GAeR,IAAI6uD,GAAiB,EAgBrB,SAASC,GAAuB9sD,GAE/B,OAASA,GAER,KAl6iBqB,IAm6iBpB,MAAO,CAAE,SAAU,aACpB,KAn6iBmB,KAo6iBlB,MAAO,CAAE,OAAQ,aAClB,KAn6iBmB,KAo6iBlB,MAAO,CAAE,OAAQ,aAClB,KAn6iBoB,KAo6iBnB,MAAO,CAAE,OAAQ,kBAClB,KAp6iBqB,KAq6iBpB,MAAO,CAAE,OAAQ,mBAClB,KAr6iBmB,KAs6iBlB,MAAO,CAAE,OAAQ,oBAClB,KA56iBoB,KA66iBnB,MAAO,CAAE,QAAS,oCACnB,KA56iBqB,KA66iBpB,MAAO,CAAE,SAAU,aACpB,QAEC,OADAhX,QAAQC,KAAM,4CAA6C+W,GACpD,CAAE,SAAU,cAMtB,SAAS+sD,GAAiB/gB,EAAI3C,EAAQ7/C,GAErC,MAAMwjE,EAAShhB,EAAGihB,mBAAoB5jB,EAAQ,OACxC5xC,EAAMu0C,EAAGkhB,iBAAkB7jB,GAAS8jB,OAE1C,GAAKH,GAAkB,KAARv1D,EAAa,MAAO,GAOnC,MAAO,4CAA8CjO,EAAO,KAAOiO,EAtDpE,SAAyBmzB,GAExB,MAAMk6B,EAAQl6B,EAAOwiC,MAAO,MAE5B,IAAM,IAAIv4D,EAAI,EAAGA,EAAIiwD,EAAM/wD,OAAQc,IAElCiwD,EAAOjwD,GAAQA,EAAI,EAAM,KAAOiwD,EAAOjwD,GAIxC,OAAOiwD,EAAMuI,KAAM,MA4CsDC,CAF1DthB,EAAGuhB,gBAAiBlkB,IAMpC,SAASmkB,GAA0BC,EAAcztD,GAEhD,MAAMgrB,EAAa8hC,GAAuB9sD,GAC1C,MAAO,QAAUytD,EAAe,2BAA6BziC,EAAY,GAAM,WAAaA,EAAY,GAAM,MAI/G,SAAS0iC,GAA0BD,EAAcztD,GAEhD,MAAMgrB,EAAa8hC,GAAuB9sD,GAC1C,MAAO,QAAUytD,EAAe,mCAAqCziC,EAAY,GAAMA,EAAY,GAAM,MAI1G,SAAS2iC,GAAwBF,EAAc/R,GAE9C,IAAIkS,EAEJ,OAASlS,GAER,KArkjBwB,EAskjBvBkS,EAAkB,SAClB,MAED,KAxkjB0B,EAykjBzBA,EAAkB,WAClB,MAED,KA3kjBwB,EA4kjBvBA,EAAkB,kBAClB,MAED,KA9kjB4B,EA+kjB3BA,EAAkB,aAClB,MAED,KAjljBwB,EAkljBvBA,EAAkB,SAClB,MAED,QACC5kE,QAAQC,KAAM,+CAAgDyyD,GAC9DkS,EAAkB,SAIpB,MAAO,QAAUH,EAAe,2BAA6BG,EAAkB,0BAwDhF,SAASC,GAAiBjjC,GAEzB,MAAkB,KAAXA,EAIR,SAASkjC,GAAkBljC,EAAQvO,GAElC,OAAOuO,EACLmjC,QAAS,kBAAmB1xC,EAAW2xC,cACvCD,QAAS,mBAAoB1xC,EAAW4xC,eACxCF,QAAS,wBAAyB1xC,EAAW6xC,mBAC7CH,QAAS,oBAAqB1xC,EAAW8xC,gBACzCJ,QAAS,mBAAoB1xC,EAAW+xC,eACxCL,QAAS,yBAA0B1xC,EAAWgyC,oBAC9CN,QAAS,0BAA2B1xC,EAAWiyC,qBAC/CP,QAAS,2BAA4B1xC,EAAWkyC,sBAInD,SAASC,GAA0B5jC,EAAQvO,GAE1C,OAAOuO,EACLmjC,QAAS,uBAAwB1xC,EAAWoyC,mBAC5CV,QAAS,yBAA4B1xC,EAAWoyC,kBAAoBpyC,EAAWqyC,qBAMlF,MAAMC,GAAiB,mCAEvB,SAASC,GAAiBhkC,GAEzB,OAAOA,EAAOmjC,QAASY,GAAgBE,IAIxC,SAASA,GAAiBp7D,EAAOq7D,GAEhC,MAAMlkC,EAAS6iB,GAAaqhB,GAE5B,QAAgBzjE,IAAXu/B,EAEJ,MAAM,IAAI5xB,MAAO,6BAA+B81D,EAAU,KAI3D,OAAOF,GAAiBhkC,GAMzB,MAAMmkC,GAA8B,+FAC9BC,GAAoB,+IAE1B,SAASC,GAAarkC,GAErB,OAAOA,EACLmjC,QAASiB,GAAmBE,IAC5BnB,QAASgB,GAA6BI,IAIzC,SAASA,GAAwB17D,EAAO+pB,EAAOG,EAAKyxC,GAGnD,OADApmE,QAAQC,KAAM,uHACPimE,GAAcz7D,EAAO+pB,EAAOG,EAAKyxC,GAIzC,SAASF,GAAcz7D,EAAO+pB,EAAOG,EAAKyxC,GAEzC,IAAIxkC,EAAS,GAEb,IAAM,IAAI/1B,EAAIo2B,SAAUzN,GAAS3oB,EAAIo2B,SAAUtN,GAAO9oB,IAErD+1B,GAAUwkC,EACRrB,QAAS,eAAgB,KAAOl5D,EAAI,MACpCk5D,QAAS,uBAAwBl5D,GAIpC,OAAO+1B,EAMR,SAASykC,GAAmBhzC,GAE3B,IAAIizC,EAAkB,aAAejzC,EAAWiS,UAAY,sBAAwBjS,EAAWiS,UAAY,QAgB3G,MAd8B,UAAzBjS,EAAWiS,UAEfghC,GAAmB,2BAEiB,YAAzBjzC,EAAWiS,UAEtBghC,GAAmB,6BAEiB,SAAzBjzC,EAAWiS,YAEtBghC,GAAmB,2BAIbA,EAsGR,SAASC,GAAchnB,EAAUinB,EAAUnzC,EAAY4/B,GAEtD,MAAMjQ,EAAKzD,EAASrpC,aAEdkmC,EAAU/oB,EAAW+oB,QAE3B,IAAIC,EAAehpB,EAAWgpB,aAC1BC,EAAiBjpB,EAAWipB,eAEhC,MAAMmqB,EA3GP,SAAsCpzC,GAErC,IAAIozC,EAAsB,uBAgB1B,OAl0jBoB,IAozjBfpzC,EAAWqzC,cAEfD,EAAsB,qBArzjBC,IAuzjBZpzC,EAAWqzC,cAEtBD,EAAsB,0BAxzjBH,IA0zjBRpzC,EAAWqzC,gBAEtBD,EAAsB,sBAIhBA,EAyFqBE,CAA6BtzC,GACnDuzC,EAtFP,SAAmCvzC,GAElC,IAAIuzC,EAAmB,mBAEvB,GAAKvzC,EAAWiT,OAEf,OAASjT,EAAWwzC,YAEnB,KA9xjB2B,IA+xjB3B,KA9xjB2B,IA+xjB1BD,EAAmB,mBACnB,MAED,KA/xjB6B,IAgyjB7B,KA/xjB6B,IAgyjB5BA,EAAmB,sBAOtB,OAAOA,EAgEkBE,CAA0BzzC,GAC7C0zC,EA7DP,SAAmC1zC,GAElC,IAAI0zC,EAAmB,yBAEvB,GAAK1zC,EAAWiT,OAEf,OAASjT,EAAWwzC,YAEnB,KAvzjB2B,IAwzjB3B,KApzjB6B,IAszjB5BE,EAAmB,yBAOtB,OAAOA,EA2CkBC,CAA0B3zC,GAC7C4zC,EAxCP,SAAuC5zC,GAEtC,IAAI4zC,EAAuB,uBAE3B,GAAK5zC,EAAWiT,OAEf,OAASjT,EAAWkT,SAEnB,KAz1jBuB,EA01jBtB0gC,EAAuB,2BACvB,MAED,KA51jBkB,EA61jBjBA,EAAuB,sBACvB,MAED,KA/1jBkB,EAg2jBjBA,EAAuB,sBAO1B,OAAOA,EAgBsBC,CAA8B7zC,GAGrD8zC,EAAsB5nB,EAASld,YAAc,EAAMkd,EAASld,YAAc,EAE1E+kC,EAAmB/zC,EAAW6vB,SAAW,GAvRhD,SAA6B7vB,GAS5B,MAPe,CACZA,EAAWg0C,sBAAwBh0C,EAAWi0C,cAAgBj0C,EAAWgV,SAAWhV,EAAWk0C,uBAAyBl0C,EAAW6U,oBAAsB7U,EAAWwQ,aAAuC,aAAxBxQ,EAAWm0C,SAA4B,kDAAoD,IAC9Qn0C,EAAWo0C,oBAAsBp0C,EAAWokC,yBAA4BpkC,EAAWq0C,2BAA6B,wCAA0C,GAC1Jr0C,EAAWs0C,sBAAwBt0C,EAAWu0C,6BAAiC,2CAA6C,IAC5Hv0C,EAAWw0C,2BAA6Bx0C,EAAWiT,SAAYjT,EAAWy0C,kCAAoC,gDAAkD,IAGrJC,OAAQlD,IAAkBR,KAAM,MA8QM2D,CAAoB30C,GAElE40C,EA5QP,SAA0B7rB,GAEzB,MAAM8rB,EAAS,GAEf,IAAM,MAAMrlE,KAAQu5C,EAAU,CAE7B,MAAM77C,EAAQ67C,EAASv5C,IAER,IAAVtC,GAEL2nE,EAAOroE,KAAM,WAAagD,EAAO,IAAMtC,GAIxC,OAAO2nE,EAAO7D,KAAM,MA8PE8D,CAAiB/rB,GAEjC2X,EAAU/Q,EAAGolB,gBAEnB,IAAIC,EAAcC,EACdC,EAAgBl1C,EAAW4pB,YAAc,YAAc5pB,EAAW4pB,YAAc,KAAO,GAEtF5pB,EAAWm1C,qBAEfH,EAAe,CAEdJ,GAECF,OAAQlD,IAAkBR,KAAM,MAE7BgE,EAAat9D,OAAS,IAE1Bs9D,GAAgB,MAIjBC,EAAiB,CAEhBlB,EACAa,GAECF,OAAQlD,IAAkBR,KAAM,MAE7BiE,EAAev9D,OAAS,IAE5Bu9D,GAAkB,QAMnBD,EAAe,CAEdhC,GAAmBhzC,GAEnB,uBAAyBA,EAAWo1C,WAEpCR,EAEA50C,EAAWq1C,WAAa,yBAA2B,GACnDr1C,EAAWs1C,gBAAkB,+BAAiC,GAE9Dt1C,EAAWu1C,uBAAyB,0BAA4B,GAEhE,wBAA0BzB,EAE1B,qBAAuB9zC,EAAWw1C,SAChCx1C,EAAWy1C,QAAUz1C,EAAWqQ,IAAQ,kBAAoB,GAC5DrQ,EAAWy1C,QAAUz1C,EAAW01C,QAAY,mBAAqB,GAEnE11C,EAAW0S,IAAM,kBAAoB,GACrC1S,EAAWiT,OAAS,qBAAuB,GAC3CjT,EAAWiT,OAAS,WAAaygC,EAAmB,GACpD1zC,EAAW2S,SAAW,uBAAyB,GAC/C3S,EAAW6S,MAAQ,oBAAsB,GACzC7S,EAAW0V,YAAc,0BAA4B,GACrD1V,EAAWgV,QAAU,sBAAwB,GAC7ChV,EAAWkV,UAAY,wBAA0B,GAC/ClV,EAAWkV,WAAalV,EAAW21C,qBAAyB,gCAAkC,GAC9F31C,EAAWkV,WAAalV,EAAWk0C,sBAA0B,iCAAmC,GAElGl0C,EAAW2U,aAAe,2BAA6B,GACvD3U,EAAW4U,sBAAwB,qCAAuC,GAC1E5U,EAAW6U,mBAAqB,kCAAoC,GACpE7U,EAAWqV,iBAAmBrV,EAAWu1C,uBAAyB,8BAAgC,GAClGv1C,EAAW+S,YAAc,0BAA4B,GACrD/S,EAAWwV,aAAe,2BAA6B,GACvDxV,EAAWyV,aAAe,2BAA6B,GACvDzV,EAAWgT,SAAW,uBAAyB,GAC/ChT,EAAWiqC,gBAAkB,8BAAgC,GAE7DjqC,EAAW41C,eAAiB,sBAAwB,GACpD51C,EAAWkQ,aAAe,oBAAsB,GAChDlQ,EAAW8a,UAAY,iBAAmB,GAC1C9a,EAAW61C,cAAgB,0BAA4B,GAEvD71C,EAAWwQ,YAAc,sBAAwB,GAEjDxQ,EAAWyT,SAAW,uBAAyB,GAC/CzT,EAAW81C,iBAAmB,uBAAyB,GAEvD91C,EAAW0T,aAAe,2BAA6B,GACvD1T,EAAWiW,eAA2C,IAA3BjW,EAAWwQ,YAAwB,2BAA6B,GAC3FxQ,EAAW+1C,YAAc,uBAAyB,GAClD/1C,EAAWg2C,UAAY,qBAAuB,GAE9Ch2C,EAAWi2C,iBAAmB,wBAA0B,GACxDj2C,EAAWi2C,iBAAmB,WAAa7C,EAAsB,GAEjEpzC,EAAW6V,gBAAkB,8BAAgC,GAE7D7V,EAAWokC,uBAAyB,0BAA4B,GAC9DpkC,EAAWokC,wBAA0BpkC,EAAWq0C,2BAA+B,8BAAgC,GAEjH,4BACA,gCACA,iCACA,2BACA,6BACA,+BACA,+BAEA,wBAEA,mCAEA,SAEA,8BAEA,kCAEA,SAEA,2BACA,yBACA,qBAEA,qBAEA,4BAEA,SAEA,mBAEA,0BAEA,SAEA,0BAEA,iCACA,iCACA,iCACA,iCAEA,4BAEA,mCACA,mCACA,mCACA,mCAEA,UAEA,mCACA,mCACA,mCACA,mCAEA,WAEA,SAEA,sBAEA,8BACA,+BAEA,SAEA,MAECK,OAAQlD,IAAkBR,KAAM,MAElCiE,EAAiB,CAEhBlB,EAEAf,GAAmBhzC,GAEnB,uBAAyBA,EAAWo1C,WAEpCR,EAEA50C,EAAWsS,UAAY,qBAAuBtS,EAAWsS,WAActS,EAAWsS,UAAY,EAAI,GAAK,MAAS,GAEhH,wBAA0BwhC,EAExB9zC,EAAWy1C,QAAUz1C,EAAWqQ,IAAQ,kBAAoB,GAC5DrQ,EAAWy1C,QAAUz1C,EAAW01C,QAAY,mBAAqB,GAEnE11C,EAAW0S,IAAM,kBAAoB,GACrC1S,EAAW+U,OAAS,qBAAuB,GAC3C/U,EAAWiT,OAAS,qBAAuB,GAC3CjT,EAAWiT,OAAS,WAAasgC,EAAmB,GACpDvzC,EAAWiT,OAAS,WAAaygC,EAAmB,GACpD1zC,EAAWiT,OAAS,WAAa2gC,EAAuB,GACxD5zC,EAAW2S,SAAW,uBAAyB,GAC/C3S,EAAW6S,MAAQ,oBAAsB,GACzC7S,EAAW0V,YAAc,0BAA4B,GACrD1V,EAAWgV,QAAU,sBAAwB,GAC7ChV,EAAWkV,UAAY,wBAA0B,GAC/ClV,EAAWkV,WAAalV,EAAW21C,qBAAyB,gCAAkC,GAC9F31C,EAAWkV,WAAalV,EAAWk0C,sBAA0B,iCAAmC,GAClGl0C,EAAW2U,aAAe,2BAA6B,GACvD3U,EAAW4U,sBAAwB,qCAAuC,GAC1E5U,EAAW6U,mBAAqB,kCAAoC,GACpE7U,EAAW+S,YAAc,0BAA4B,GACrD/S,EAAWwV,aAAe,2BAA6B,GACvDxV,EAAWyV,aAAe,2BAA6B,GACvDzV,EAAWgT,SAAW,uBAAyB,GAE/ChT,EAAWoU,MAAQ,oBAAsB,GACzCpU,EAAWiqC,gBAAkB,8BAAgC,GAE7DjqC,EAAW41C,eAAiB,sBAAwB,GACpD51C,EAAWkQ,cAAgBlQ,EAAWs1C,gBAAkB,oBAAsB,GAC9Et1C,EAAW8a,UAAY,iBAAmB,GAC1C9a,EAAW61C,cAAgB,0BAA4B,GAEvD71C,EAAW4V,YAAc,0BAA4B,GAErD5V,EAAWwQ,YAAc,sBAAwB,GAEjDxQ,EAAW+1C,YAAc,uBAAyB,GAClD/1C,EAAWg2C,UAAY,qBAAuB,GAE9Ch2C,EAAWi2C,iBAAmB,wBAA0B,GACxDj2C,EAAWi2C,iBAAmB,WAAa7C,EAAsB,GAEjEpzC,EAAWuS,mBAAqB,8BAAgC,GAEhEvS,EAAWk2C,wBAA0B,oCAAsC,GAE3El2C,EAAWokC,uBAAyB,0BAA4B,GAC9DpkC,EAAWokC,wBAA0BpkC,EAAWq0C,2BAA+B,8BAAgC,IAE7Gr0C,EAAWw0C,2BAA6Bx0C,EAAWiT,SAAYjT,EAAWy0C,kCAAsC,0BAA4B,GAEhJ,2BACA,+BACA,+BA3mkBmB,IA6mkBjBz0C,EAAWq/B,YAAkC,uBAAyB,GA7mkBrD,IA8mkBjBr/B,EAAWq/B,YAAkCjO,6BAA6C,GA9mkBzE,IA+mkBjBpxB,EAAWq/B,YAAkCiS,GAAwB,cAAetxC,EAAWq/B,aAAgB,GAEjHr/B,EAAWqS,UAAY,oBAAsB,GAE7C+e,2BACApxB,EAAW0S,IAAMy+B,GAA0B,mBAAoBnxC,EAAWm2C,aAAgB,GAC1Fn2C,EAAW+U,OAASo8B,GAA0B,sBAAuBnxC,EAAWo2C,gBAAmB,GACnGp2C,EAAWiT,OAASk+B,GAA0B,sBAAuBnxC,EAAWq2C,gBAAmB,GACnGr2C,EAAW0V,YAAcy7B,GAA0B,2BAA4BnxC,EAAWs2C,qBAAwB,GAClHt2C,EAAW2S,SAAWw+B,GAA0B,wBAAyBnxC,EAAWu2C,kBAAqB,GACzGlF,GAA0B,sBAAuBrxC,EAAWw2C,gBAE5Dx2C,EAAWy2C,aAAe,yBAA2Bz2C,EAAWy2C,aAAe,GAE/E,MAEC/B,OAAQlD,IAAkBR,KAAM,OAInChoB,EAAeupB,GAAiBvpB,GAChCA,EAAeyoB,GAAkBzoB,EAAchpB,GAC/CgpB,EAAempB,GAA0BnpB,EAAchpB,GAEvDipB,EAAiBspB,GAAiBtpB,GAClCA,EAAiBwoB,GAAkBxoB,EAAgBjpB,GACnDipB,EAAiBkpB,GAA0BlpB,EAAgBjpB,GAE3DgpB,EAAe4pB,GAAa5pB,GAC5BC,EAAiB2pB,GAAa3pB,GAEzBjpB,EAAW6vB,WAA+C,IAAnC7vB,EAAWm1C,sBAItCD,EAAgB,oBAEhBF,EAAe,CACd,uBACA,sBACA,6BACChE,KAAM,MAAS,KAAOgE,EAExBC,EAAiB,CAChB,qBAlikBW,WAmikBTj1C,EAAW4pB,YAA0B,GAAK,+BAnikBjC,WAoikBT5pB,EAAW4pB,YAA0B,GAAK,oCAC5C,uCACA,4BACA,8BACA,oCACA,qCACA,6CACA,uCACA,uCACA,+CACA,0CACConB,KAAM,MAAS,KAAOiE,GAIzB,MACMyB,EAAexB,EAAgBD,EAAiBhsB,EAKhD0tB,EAAiB1G,GAAatgB,EAAI,MANrBulB,EAAgBF,EAAehsB,GAO5C4tB,EAAmB3G,GAAatgB,EAAI,MAAO+mB,GAqBjD,GAnBA/mB,EAAGknB,aAAcnW,EAASiW,GAC1BhnB,EAAGknB,aAAcnW,EAASkW,QAIc5nE,IAAnCgxB,EAAW0pB,oBAEfiG,EAAGmnB,mBAAoBpW,EAAS,EAAG1gC,EAAW0pB,sBAEP,IAA5B1pB,EAAW0T,cAGtBic,EAAGmnB,mBAAoBpW,EAAS,EAAG,YAIpC/Q,EAAGonB,YAAarW,GAGXxU,EAAS8qB,MAAMC,kBAAoB,CAEvC,MAAMC,EAAavnB,EAAGwnB,kBAAmBzW,GAAUoQ,OAC7CsG,EAAYznB,EAAGkhB,iBAAkB8F,GAAiB7F,OAClDuG,EAAc1nB,EAAGkhB,iBAAkB+F,GAAmB9F,OAE5D,IAAIwG,GAAW,EACXC,GAAkB,EAEtB,IAAkD,IAA7C5nB,EAAGmgB,oBAAqBpP,EAAS,OAAoB,CAEzD4W,GAAW,EAEX,MAAME,EAAe9G,GAAiB/gB,EAAIgnB,EAAgB,UACpDc,EAAiB/G,GAAiB/gB,EAAIinB,EAAkB,YAE9DjqE,QAAQ0R,MAAO,qCAAsCsxC,EAAG+nB,WAAY,QAAS/nB,EAAGmgB,oBAAqBpP,EAAS,OAAS,uBAAwBwW,EAAYM,EAAcC,OAE/I,KAAfP,EAEXvqE,QAAQC,KAAM,6CAA8CsqE,GAEnC,KAAdE,GAAoC,KAAhBC,IAE/BE,GAAkB,GAIdA,IAEJlpE,KAAKspE,YAAc,CAElBL,SAAUA,EAEVJ,WAAYA,EAEZluB,aAAc,CAEb5tC,IAAKg8D,EACLQ,OAAQ5C,GAIT/rB,eAAgB,CAEf7tC,IAAKi8D,EACLO,OAAQ3C,KAqBZ,IAAI4C,EAgBA/V,EAmCJ,OAxDAnS,EAAGmoB,aAAcnB,GACjBhnB,EAAGmoB,aAAclB,GAMjBvoE,KAAKk7D,YAAc,WAQlB,YANwBv6D,IAAnB6oE,IAEJA,EAAiB,IAAIhI,GAAelgB,EAAI+Q,IAIlCmX,GAQRxpE,KAAKg0D,cAAgB,WAQpB,YAN0BrzD,IAArB8yD,IAEJA,EA9pBH,SAAkCnS,EAAI+Q,GAErC,MAAMjyD,EAAa,GAEbiL,EAAIi2C,EAAGmgB,oBAAqBpP,EAAS,OAE3C,IAAM,IAAIloD,EAAI,EAAGA,EAAIkB,EAAGlB,IAAO,CAE9B,MACMhJ,EADOmgD,EAAGooB,gBAAiBrX,EAASloD,GACxBhJ,KAIlBf,EAAYe,GAASmgD,EAAGqoB,kBAAmBtX,EAASlxD,GAIrD,OAAOf,EA6oBcwpE,CAAyBtoB,EAAI+Q,IAI1CoB,GAMRzzD,KAAK6pE,QAAU,WAEdtY,EAAcwD,uBAAwB/0D,MAEtCshD,EAAGwoB,cAAezX,GAClBryD,KAAKqyD,aAAU1xD,GAMhBX,KAAKmB,KAAOwwB,EAAWo1C,WACvB/mE,KAAKiwB,GAAKkyC,KACVniE,KAAK8kE,SAAWA,EAChB9kE,KAAK+pE,UAAY,EACjB/pE,KAAKqyD,QAAUA,EACfryD,KAAK26C,aAAe2tB,EACpBtoE,KAAK46C,eAAiB2tB,EAEfvoE,KAIR,SAASgqE,GAAensB,EAAUwR,EAAUtU,EAAYwG,EAAcgQ,EAAezW,GAEpF,MAAMuf,EAAW,GAEX7Y,EAAWD,EAAaC,SACxBuU,EAAyBxU,EAAawU,uBACtCa,EAAsBrV,EAAaqV,oBACnCP,EAAoB9U,EAAa8U,kBACjCG,EAAiBjV,EAAaiV,eAEpC,IAAI5yB,EAAY2d,EAAa3d,UAE7B,MAAMqmC,EAAY,CACjBC,kBAAmB,QACnBC,qBAAsB,eACtBC,mBAAoB,SACpBhmC,kBAAmB,QACnBimC,oBAAqB,UACrBC,kBAAmB,QACnBC,iBAAkB,OAClBC,qBAAsB,WACtBC,qBAAsB,WACtBC,mBAAoB,SACpBC,kBAAmB,QACnBC,mBAAoB,SACpBC,eAAgB,SAChBC,eAAgB,SAChBC,eAAgB,UAGXC,EAAiB,CACtB,YAAa,WAAY,yBAA0B,iBAAkB,aAAc,kBACnF,MAAO,cAAe,SAAU,iBAAkB,SAAU,aAAc,iBAAkB,eAC5F,WAAY,mBAAoB,QAAS,cAAe,sBAAuB,UAAW,YAAa,uBAAwB,wBAAyB,eAAgB,wBAAyB,qBAAsB,kBAAmB,cAC1O,eAAgB,eAAgB,cAChC,WAAY,UAAW,eAAgB,iBAAkB,YAAa,gBAAiB,MAAO,SAAU,UACxG,cAAe,kBAAmB,yBAA0B,WAC5D,WAAY,mBAAoB,eAAgB,eAChD,kBAAmB,kBAAmB,qBACtC,eAAgB,iBAAkB,gBAAiB,gBAAiB,oBACpE,qBAAsB,uBAAwB,sBAC9C,mBAAoB,gBAAiB,cAAe,0BACpD,YAAa,cAAe,YAAa,oBAAqB,sBAAuB,eAAgB,YACrG,QAAS,mBAuCV,SAASC,EAA2B5mC,GAEnC,IAAI/uB,EAiBJ,OAfO+uB,EAIKA,EAAIhuB,UAEff,EAAW+uB,EAAI/uB,SAEJ+uB,EAAI7qB,sBAEflb,QAAQC,KAAM,6HACd+W,EAAW+uB,EAAInrB,QAAQ5D,UATvBA,EAlzkBoB,IA+zkBdA,EA8RR,MAAO,CACN41D,cA3RD,SAAwBr5C,EAAUgpB,EAAQswB,EAASrtB,EAAO58B,GAEzD,MAAM8gB,EAAM8b,EAAM9b,IACZopC,EAAcv5C,EAASw5C,uBAAyBvtB,EAAMstB,YAAc,KAEpExmC,EAASyqB,EAASrtD,IAAK6vB,EAAS+S,QAAUwmC,GAE1CtF,EAAWmE,EAAWp4C,EAAS/yB,MAK/BqoE,EAAWjmD,EAAOqyB,cAvEzB,SAAsBryB,GAErB,MACMoqD,EADWpqD,EAAOqqD,SACDD,MAEvB,GAAK1U,EAEJ,OAAO,KAED,CASN,MAAM4U,EAAkBnV,EAClBoV,EAAkBpuE,KAAKqL,OAAS8iE,EAAkB,IAAO,GAEzDrE,EAAW9pE,KAAK6N,IAAKugE,EAAiBH,EAAMjiE,QAElD,OAAK89D,EAAWmE,EAAMjiE,QAErB/K,QAAQC,KAAM,qCAAuC+sE,EAAMjiE,OAAS,6BAA+B89D,EAAW,KACvG,GAIDA,GAyCgCuE,CAAaxqD,GAAW,EAchE,IAAIy5B,EAAcC,EAElB,GAd4B,OAAvB/oB,EAAS+R,YAEbA,EAAY2d,EAAamU,gBAAiB7jC,EAAS+R,WAE9CA,IAAc/R,EAAS+R,WAE3BtlC,QAAQC,KAAM,oCAAqCszB,EAAS+R,UAAW,uBAAwBA,EAAW,aAQvGkiC,EAAW,CAEf,MAAMnnB,EAASwP,GAAW2X,GAE1BnrB,EAAegE,EAAOhE,aACtBC,EAAiB+D,EAAO/D,oBAIxBD,EAAe9oB,EAAS8oB,aACxBC,EAAiB/oB,EAAS+oB,eAI3B,MAAMoD,EAAsBH,EAASI,kBA4HrC,MA1HmB,CAElBuD,SAAUA,EAEVskB,SAAUA,EACViB,WAAYl1C,EAAS/yB,KAErB67C,aAAcA,EACdC,eAAgBA,EAChBF,QAAS7oB,EAAS6oB,QAElBosB,qBAAsD,IAAjCj1C,EAASi1C,oBAC9BvrB,YAAa1pB,EAAS0pB,YAEtB3X,UAAWA,EAEXojC,YAAuC,IAA3B9lD,EAAOoQ,gBACnB21C,iBAA4C,IAA3B/lD,EAAOoQ,iBAAqD,OAAzBpQ,EAAOozC,cAE3D4S,uBAAwB1Q,EACxB2R,eAA0C,OAAxBnqB,EAAiCitB,EAA2BjtB,EAAoB9kC,SAAY2kC,EAASsqB,eACvH9jC,MAAQxS,EAASwS,IACjByjC,YAAamD,EAA2Bp5C,EAASwS,KACjDqC,SAAW7U,EAAS6U,OACpBqhC,eAAgBkD,EAA2Bp5C,EAAS6U,QACpD9B,SAAWA,EACXugC,WAAYvgC,GAAUA,EAAO7vB,QAC7BizD,eAAgBiD,EAA2BrmC,GAC3CghC,eAAmBhhC,IAv+kBU,MAu+kBMA,EAAO7vB,SAt+kBb,MAs+kBwD6vB,EAAO7vB,SAC5FuvB,WAAazS,EAASyS,SACtB4jC,iBAAkB+C,EAA2Bp5C,EAASyS,UACtDE,QAAU3S,EAAS2S,MACnB6C,cAAgBxV,EAASwV,YACzB4gC,oBAAqBgD,EAA2Bp5C,EAASwV,aACzDV,UAAY9U,EAAS8U,QACrBE,YAAchV,EAASgV,UACvBygC,qBAx4kB0B,IAw4kBJz1C,EAASiV,cAC/B++B,sBA14kB2B,IA04kBJh0C,EAASiV,cAChCR,eAAiBzU,EAASyU,aAC1BC,wBAA0B1U,EAAS0U,sBACnCC,qBAAuB3U,EAAS2U,mBAChCQ,kBAAoBnV,EAASmV,gBAC7BG,eAAiBtV,EAASsV,aAC1BC,eAAiBvV,EAASuV,aAC1B1C,cAAgB7S,EAAS6S,YACzBC,WAAa9S,EAAS8S,SAEtB4C,cAAgB1V,EAAS0V,YAEzBxB,QAAUlU,EAASkU,MAEnB61B,kBAAoB/pC,EAAS+pC,gBAE7B/2B,QAAShT,EAASgT,QAElB0iC,eAAkB11C,EAASgV,WAAahV,EAAS01C,eACjD1lC,aAAchQ,EAASgQ,aACvB4K,aAAc5a,EAASwS,KAAUxS,EAAS8U,SAAc9U,EAASgV,WAAgBhV,EAAS6S,aAAkB7S,EAAS8S,UAAe9S,EAASwV,aAAkBxV,EAASsV,cAAmBtV,EAASuV,cAAmBvV,EAASyU,cAAmBzU,EAAS0U,uBAA4B1U,EAAS2U,oBAAyB3U,EAASmV,iBAAsBnV,EAAS+pC,iBAClW4L,gBAAsB31C,EAASwS,KAAUxS,EAAS8U,SAAc9U,EAASgV,WAAgBhV,EAAS6S,aAAkB7S,EAAS8S,UAAe9S,EAASwV,aAAkBxV,EAASsV,cAAmBtV,EAASuV,cAAmBvV,EAAS2U,oBAAyB3U,EAAS+pC,kBAAwB/pC,EAASmV,iBAE3ShF,MAAQA,EACRolC,OAAQv1C,EAASmQ,IACjBqlC,QAAWrlC,GAAOA,EAAI2pC,UAEtBxpC,YAAatQ,EAASsQ,YAEtBqF,gBAAiB3V,EAAS2V,gBAC1BuuB,uBAAwBA,EAExB3wB,SAAUvT,EAASuT,UAAY+hC,EAAW,EAC1CA,SAAUA,EACVM,iBAAkB7Q,EAElBvxB,aAAcxT,EAASwT,aACvBuC,aAAc/V,EAAS+V,aACvBgkC,gBAAiB/tB,EAAS+tB,gBAC1BC,gBAAiBhuB,EAASguB,gBAE1BvI,aAAczoB,EAAOixB,YAAYziE,OACjCo6D,eAAgB5oB,EAAOv5B,MAAMjY,OAC7Bk6D,cAAe1oB,EAAOkxB,KAAK1iE,OAC3Bm6D,kBAAmB3oB,EAAOmxB,SAAS3iE,OACnCq6D,cAAe7oB,EAAOoxB,KAAK5iE,OAE3Bs6D,mBAAoB9oB,EAAOiS,qBAAqBzjD,OAChDw6D,qBAAsBhpB,EAAO8S,eAAetkD,OAC5Cu6D,oBAAqB/oB,EAAOwS,cAAchkD,OAE1C06D,kBAAmBjpB,EAASwc,UAC5B0M,oBAAqBlpB,EAASyc,gBAE9BvzB,UAAWnS,EAASmS,UAEpB4jC,iBAAkB/pB,EAASquB,UAAU3zB,SAAW4yB,EAAQ9hE,OAAS,EACjE27D,cAAennB,EAASquB,UAAUptE,KAElCkyD,YAAan/B,EAASsS,WAAa0Z,EAASmT,YAvjlBzB,EAwjlBnB6W,wBAAyBhqB,EAASgqB,wBAElC3jC,mBAAoBrS,EAASqS,mBAE7BD,UAAWpS,EAASoS,UACpByjC,YAhmlBgB,IAgmlBH71C,EAASqQ,KACtBylC,UAlmlBc,IAkmlBH91C,EAASqQ,KAEpBkmC,kBAA0CznE,IAA1BkxB,EAASu2C,cAA+Bv2C,EAASu2C,aAEjE/sB,oBAAqBxpB,EAASwpB,oBAE9BsqB,qBAAsB9zC,EAASkpB,YAAclpB,EAASkpB,WAAWC,YACjE+qB,mBAAoBl0C,EAASkpB,YAAclpB,EAASkpB,WAAWE,UAC/DgrB,qBAAsBp0C,EAASkpB,YAAclpB,EAASkpB,WAAWG,YACjEirB,0BAA2Bt0C,EAASkpB,YAAclpB,EAASkpB,WAAWI,iBAEtE6qB,2BAA4BxkB,GAAYzG,EAAW92C,IAAK,kBACxDiiE,6BAA8B1kB,GAAYzG,EAAW92C,IAAK,sBAC1DmiE,kCAAmC5kB,GAAYzG,EAAW92C,IAAK,0BAE/DwhC,sBAAuB5T,EAAS4T,0BA0HjC0mC,mBAlHD,SAA6Bx6C,GAE5B,MAAMznB,EAAQ,GAad,GAXKynB,EAAWm0C,SAEf57D,EAAM/L,KAAMwzB,EAAWm0C,WAIvB57D,EAAM/L,KAAMwzB,EAAWipB,gBACvB1wC,EAAM/L,KAAMwzB,EAAWgpB,oBAIIh6C,IAAvBgxB,EAAW+oB,QAEf,IAAM,MAAMv5C,KAAQwwB,EAAW+oB,QAE9BxwC,EAAM/L,KAAMgD,GACZ+I,EAAM/L,KAAMwzB,EAAW+oB,QAASv5C,IAMlC,IAAwC,IAAnCwwB,EAAWm1C,oBAAgC,CAE/C,IAAM,IAAI38D,EAAI,EAAGA,EAAI6gE,EAAe3hE,OAAQc,IAE3CD,EAAM/L,KAAMwzB,EAAYq5C,EAAgB7gE,KAIzCD,EAAM/L,KAAM0/C,EAASsqB,gBACrBj+D,EAAM/L,KAAM0/C,EAASld,aAMtB,OAFAz2B,EAAM/L,KAAMwzB,EAAW8T,uBAEhBv7B,EAAMy4D,QA0EbzH,YAtED,SAAsBrpC,GAErB,MAAMi0C,EAAWmE,EAAWp4C,EAAS/yB,MACrC,IAAIw7C,EAEJ,GAAKwrB,EAAW,CAEf,MAAMnnB,EAASwP,GAAW2X,GAC1BxrB,EAAWE,GAAchkC,MAAOmoC,EAAOrE,eAIvCA,EAAWzoB,EAASyoB,SAIrB,OAAOA,GAuDP8xB,eAnDD,SAAyBz6C,EAAYmzC,GAEpC,IAAIzS,EAGJ,IAAM,IAAI7xD,EAAI,EAAG6rE,EAAKhS,EAAShxD,OAAQ7I,EAAI6rE,EAAI7rE,IAAO,CAErD,MAAM8rE,EAAqBjS,EAAU75D,GAErC,GAAK8rE,EAAmBxH,WAAaA,EAAW,CAE/CzS,EAAUia,IACPja,EAAQ0X,UAEX,OAaF,YAPiBppE,IAAZ0xD,IAEJA,EAAU,IAAIwS,GAAchnB,EAAUinB,EAAUnzC,EAAY4/B,GAC5D8I,EAASl8D,KAAMk0D,IAITA,GAyBPka,eArBD,SAAyBla,GAExB,GAA8B,KAAtBA,EAAQ0X,UAAkB,CAGjC,MAAM5/D,EAAIkwD,EAASzwD,QAASyoD,GAC5BgI,EAAUlwD,GAAMkwD,EAAUA,EAAShxD,OAAS,GAC5CgxD,EAASmS,MAGTna,EAAQwX,YAaTxP,SAAUA,GAKZ,SAASoS,KAER,IAAItqE,EAAa,IAAIu/C,QAmCrB,MAAO,CACN1/C,IAlCD,SAAckf,GAEb,IAAImjB,EAAMliC,EAAWH,IAAKkf,GAS1B,YAPavgB,IAAR0jC,IAEJA,EAAM,GACNliC,EAAWtB,IAAKqgB,EAAQmjB,IAIlBA,GAwBPvU,OApBD,SAAiB5O,GAEhB/e,EAAW2/C,OAAQ5gC,IAmBnBrc,OAfD,SAAiBqc,EAAQ3f,EAAK1C,GAE7BsD,EAAWH,IAAKkf,GAAU3f,GAAQ1C,GAclCuY,QAVD,WAECjV,EAAa,IAAIu/C,UAanB,SAASgrB,GAAmBt/D,EAAGC,GAE9B,OAAKD,EAAEu/D,aAAet/D,EAAEs/D,WAEhBv/D,EAAEu/D,WAAat/D,EAAEs/D,WAEbv/D,EAAE4gB,cAAgB3gB,EAAE2gB,YAExB5gB,EAAE4gB,YAAc3gB,EAAE2gB,YAEd5gB,EAAEilD,UAAYhlD,EAAEglD,QAEpBjlD,EAAEilD,QAAQpiC,GAAK5iB,EAAEglD,QAAQpiC,GAErB7iB,EAAEykB,SAAS5B,KAAO5iB,EAAEwkB,SAAS5B,GAEjC7iB,EAAEykB,SAAS5B,GAAK5iB,EAAEwkB,SAAS5B,GAEvB7iB,EAAEqK,IAAMpK,EAAEoK,EAEdrK,EAAEqK,EAAIpK,EAAEoK,EAIRrK,EAAE6iB,GAAK5iB,EAAE4iB,GAMlB,SAAS28C,GAA0Bx/D,EAAGC,GAErC,OAAKD,EAAEu/D,aAAet/D,EAAEs/D,WAEhBv/D,EAAEu/D,WAAat/D,EAAEs/D,WAEbv/D,EAAE4gB,cAAgB3gB,EAAE2gB,YAExB5gB,EAAE4gB,YAAc3gB,EAAE2gB,YAEd5gB,EAAEqK,IAAMpK,EAAEoK,EAEdpK,EAAEoK,EAAIrK,EAAEqK,EAIRrK,EAAE6iB,GAAK5iB,EAAE4iB,GAOlB,SAAS48C,GAAiB1qE,GAEzB,MAAM2qE,EAAc,GACpB,IAAIC,EAAmB,EAEvB,MAAMC,EAAS,GACT3qC,EAAc,GAEd4qC,EAAiB,CAAEh9C,IAAM,GAW/B,SAASi9C,EAAmBhsD,EAAQQ,EAAUmQ,EAAU86C,EAAYl1D,EAAGo0B,GAEtE,IAAIshC,EAAaL,EAAaC,GAC9B,MAAM1U,EAAqBl2D,EAAWH,IAAK6vB,GAkC3C,YAhCoBlxB,IAAfwsE,GAEJA,EAAa,CACZl9C,GAAI/O,EAAO+O,GACX/O,OAAQA,EACRQ,SAAUA,EACVmQ,SAAUA,EACVwgC,QAASgG,EAAmBhG,SAAW4a,EACvCN,WAAYA,EACZ3+C,YAAa9M,EAAO8M,YACpBvW,EAAGA,EACHo0B,MAAOA,GAGRihC,EAAaC,GAAqBI,IAIlCA,EAAWl9C,GAAK/O,EAAO+O,GACvBk9C,EAAWjsD,OAASA,EACpBisD,EAAWzrD,SAAWA,EACtByrD,EAAWt7C,SAAWA,EACtBs7C,EAAW9a,QAAUgG,EAAmBhG,SAAW4a,EACnDE,EAAWR,WAAaA,EACxBQ,EAAWn/C,YAAc9M,EAAO8M,YAChCm/C,EAAW11D,EAAIA,EACf01D,EAAWthC,MAAQA,GAIpBkhC,IAEOI,EAgDR,MAAO,CAENH,OAAQA,EACR3qC,YAAaA,EAEb01B,KAnGD,WAECgV,EAAmB,EAEnBC,EAAO3jE,OAAS,EAChBg5B,EAAYh5B,OAAS,GA+FrBlL,KAlDD,SAAe+iB,EAAQQ,EAAUmQ,EAAU86C,EAAYl1D,EAAGo0B,GAEzD,MAAMshC,EAAaD,EAAmBhsD,EAAQQ,EAAUmQ,EAAU86C,EAAYl1D,EAAGo0B,KAEtD,IAAzBha,EAASwQ,YAAuBA,EAAc2qC,GAAS7uE,KAAMgvE,IA+C/Dlc,QA3CD,SAAkB/vC,EAAQQ,EAAUmQ,EAAU86C,EAAYl1D,EAAGo0B,GAE5D,MAAMshC,EAAaD,EAAmBhsD,EAAQQ,EAAUmQ,EAAU86C,EAAYl1D,EAAGo0B,KAEtD,IAAzBha,EAASwQ,YAAuBA,EAAc2qC,GAAS/b,QAASkc,IAwClEC,OA7BD,WAIC,IAAM,IAAIjjE,EAAI4iE,EAAkBlsD,EAAKisD,EAAYzjE,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvE,MAAMgjE,EAAaL,EAAa3iE,GAEhC,GAAuB,OAAlBgjE,EAAWl9C,GAAc,MAE9Bk9C,EAAWl9C,GAAK,KAChBk9C,EAAWjsD,OAAS,KACpBisD,EAAWzrD,SAAW,KACtByrD,EAAWt7C,SAAW,KACtBs7C,EAAW9a,QAAU,KACrB8a,EAAWthC,MAAQ,OAgBpBuL,KAtCD,SAAei2B,EAAkBC,GAE3BN,EAAO3jE,OAAS,GAAI2jE,EAAO51B,KAAMi2B,GAAoBX,IACrDrqC,EAAYh5B,OAAS,GAAIg5B,EAAY+U,KAAMk2B,GAAyBV,MAwC3E,SAASW,GAAkBprE,GAE1B,IAAIqrE,EAAQ,IAAI9rB,QAmChB,MAAO,CACN1/C,IAlCD,SAAc87C,EAAOx/B,GAEpB,MAAMmvD,EAAUD,EAAMxrE,IAAK87C,GAC3B,IAAI4vB,EAoBJ,YAlBiB/sE,IAAZ8sE,GAEJC,EAAO,IAAIb,GAAiB1qE,GAC5BqrE,EAAM3sE,IAAKi9C,EAAO,IAAI4D,SACtB8rB,EAAMxrE,IAAK87C,GAAQj9C,IAAKyd,EAAQovD,KAIhCA,EAAOD,EAAQzrE,IAAKsc,QACN3d,IAAT+sE,IAEJA,EAAO,IAAIb,GAAiB1qE,GAC5BsrE,EAAQ5sE,IAAKyd,EAAQovD,KAMhBA,GAYPt2D,QARD,WAECo2D,EAAQ,IAAI9rB,UAWd,SAASisB,KAER,MAAM9yB,EAAS,GAEf,MAAO,CAEN74C,IAAK,SAAW4rE,GAEf,QAA4BjtE,IAAvBk6C,EAAQ+yB,EAAM39C,IAElB,OAAO4qB,EAAQ+yB,EAAM39C,IAItB,IAAIqqB,EAEJ,OAASszB,EAAM9uE,MAEd,IAAK,mBACJw7C,EAAW,CACVt1B,UAAW,IAAIxH,EACf6iB,MAAO,IAAIX,IAEZ,MAED,IAAK,YACJ4a,EAAW,CACVlwB,SAAU,IAAI5M,EACdwH,UAAW,IAAIxH,EACf6iB,MAAO,IAAIX,GACXxQ,SAAU,EACV+9B,QAAS,EACTC,YAAa,EACbC,MAAO,GAER,MAED,IAAK,aACJ7S,EAAW,CACVlwB,SAAU,IAAI5M,EACd6iB,MAAO,IAAIX,GACXxQ,SAAU,EACVi+B,MAAO,GAER,MAED,IAAK,kBACJ7S,EAAW,CACVt1B,UAAW,IAAIxH,EACfswC,SAAU,IAAIpuB,GACdquB,YAAa,IAAIruB,IAElB,MAED,IAAK,gBACJ4a,EAAW,CACVja,MAAO,IAAIX,GACXtV,SAAU,IAAI5M,EACdqwD,UAAW,IAAIrwD,EACfswD,WAAY,IAAItwD,GAQnB,OAFAq9B,EAAQ+yB,EAAM39C,IAAOqqB,EAEdA,IAuEV,IAAIyzB,GAAc,EAElB,SAASC,GAA0BC,EAAQC,GAE1C,OAASA,EAAOrgD,WAAa,EAAI,IAAQogD,EAAOpgD,WAAa,EAAI,GAIlE,SAASsgD,KAER,MAAMn8C,EAAQ,IAAI27C,GAEZS,EA3EP,WAEC,MAAMvzB,EAAS,GAEf,MAAO,CAEN74C,IAAK,SAAW4rE,GAEf,QAA4BjtE,IAAvBk6C,EAAQ+yB,EAAM39C,IAElB,OAAO4qB,EAAQ+yB,EAAM39C,IAItB,IAAIqqB,EAEJ,OAASszB,EAAM9uE,MAEd,IAAK,mBASL,IAAK,YACJw7C,EAAW,CACVoS,WAAY,EACZC,iBAAkB,EAClBC,aAAc,EACdC,cAAe,IAAI3+C,GAEpB,MAED,IAAK,aACJosC,EAAW,CACVoS,WAAY,EACZC,iBAAkB,EAClBC,aAAc,EACdC,cAAe,IAAI3+C,EACnBu/C,iBAAkB,EAClBC,gBAAiB,KAUpB,OAFA7S,EAAQ+yB,EAAM39C,IAAOqqB,EAEdA,IAsBW+zB,GAEd/e,EAAQ,CAEbp5C,QAAS,EAETsiC,KAAM,CACL81B,mBAAqB,EACrBC,aAAe,EACfC,YAAc,EACdC,gBAAkB,EAClBC,YAAc,EAEdC,uBAAyB,EACzBC,iBAAmB,EACnBC,gBAAkB,GAGnBC,QAAS,CAAE,EAAG,EAAG,GACjBC,MAAO,GACPjD,YAAa,GACbkD,kBAAmB,GACnBliB,qBAAsB,GACtBC,wBAAyB,GACzBgf,KAAM,GACNkD,WAAY,GACZ5hB,cAAe,GACfC,iBAAkB,GAClB0e,SAAU,GACVkD,aAAc,KACdC,aAAc,KACd7tD,MAAO,GACP8tD,YAAa,GACbzhB,eAAgB,GAChBC,kBAAmB,GACnBqe,KAAM,IAIP,IAAM,IAAI9hE,EAAI,EAAGA,EAAI,EAAGA,IAAOmlD,EAAMyf,MAAM5wE,KAAM,IAAIqf,GAErD,MAAM6xD,EAAU,IAAI7xD,EACdtK,EAAU,IAAIoU,GACdgoD,EAAW,IAAIhoD,GAsQrB,MAAO,CACN4rC,MArQD,SAAgBrY,EAAQswB,EAAS7sD,GAEhC,IAAIhL,EAAI,EAAGd,EAAI,EAAGnF,EAAI,EAEtB,IAAM,IAAIlD,EAAI,EAAGA,EAAI,EAAGA,IAAOmlD,EAAMyf,MAAO5kE,GAAItJ,IAAK,EAAG,EAAG,GAE3D,IAAIytE,EAAoB,EACpBC,EAAc,EACdC,EAAa,EACbC,EAAiB,EACjBC,EAAa,EAEbC,EAAwB,EACxBC,EAAkB,EAClBC,EAAiB,EAErB,MAAMhX,EAAav5C,EAAOE,mBAE1Bq8B,EAAOzD,KAAM42B,IAEb,IAAM,IAAI7jE,EAAI,EAAGC,EAAIywC,EAAOxxC,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMyjE,EAAQ/yB,EAAQ1wC,GAEhBk2B,EAAQutC,EAAMvtC,MACdkvC,EAAY3B,EAAM2B,UAClBrgD,EAAW0+C,EAAM1+C,SAEjBg9C,EAAc0B,EAAMze,QAAUye,EAAMze,OAAO9qB,IAAQupC,EAAMze,OAAO9qB,IAAInrB,QAAU,KAEpF,GAAK00D,EAAM4B,eAEVl8D,GAAK+sB,EAAM/sB,EAAIi8D,EACf/8D,GAAK6tB,EAAM7tB,EAAI+8D,EACfliE,GAAKgzB,EAAMhzB,EAAIkiE,OAET,GAAK3B,EAAM6B,aAEjB,IAAM,IAAIlsD,EAAI,EAAGA,EAAI,EAAGA,IAEvB+rC,EAAMyf,MAAOxrD,GAAIyR,gBAAiB44C,EAAM8B,GAAGC,aAAcpsD,GAAKgsD,QAIzD,GAAK3B,EAAMgC,mBAAqB,CAEtC,MAAMt1B,EAAWtoB,EAAMhwB,IAAK4rE,GAQ5B,GANAtzB,EAASja,MAAM5pB,KAAMm3D,EAAMvtC,OAAQ3xB,eAAgBk/D,EAAM2B,WACzDj1B,EAASt1B,UAAUyK,sBAAuBm+C,EAAMjvD,aAChD0wD,EAAQ5/C,sBAAuBm+C,EAAM5kE,OAAO2V,aAC5C27B,EAASt1B,UAAUxF,IAAK6vD,GACxB/0B,EAASt1B,UAAUqC,mBAAoBwwC,GAElC+V,EAAM//C,WAAa,CAEvB,MAAMshC,EAASye,EAAMze,OAEf0gB,EAAiBzB,EAAYpsE,IAAK4rE,GAExCiC,EAAenjB,WAAayC,EAAO2gB,KACnCD,EAAeljB,iBAAmBwC,EAAO4gB,WACzCF,EAAejjB,aAAeuC,EAAOvvC,OACrCiwD,EAAehjB,cAAgBsC,EAAO6gB,QAEtC1gB,EAAM0f,kBAAmBV,GAAsBuB,EAC/CvgB,EAAMxC,qBAAsBwhB,GAAsBpC,EAClD5c,EAAMvC,wBAAyBuhB,GAAsBV,EAAMze,OAAOz8C,OAElEi8D,IAIDrf,EAAMwc,YAAawC,GAAsBh0B,EAEzCg0B,SAEM,GAAKV,EAAMqC,YAAc,CAE/B,MAAM31B,EAAWtoB,EAAMhwB,IAAK4rE,GAiB5B,GAfAtzB,EAASlwB,SAASqF,sBAAuBm+C,EAAMjvD,aAC/C27B,EAASlwB,SAAS7L,aAAcs5C,GAEhCvd,EAASja,MAAM5pB,KAAM4pB,GAAQ3xB,eAAgB6gE,GAC7Cj1B,EAASprB,SAAWA,EAEpBorB,EAASt1B,UAAUyK,sBAAuBm+C,EAAMjvD,aAChD0wD,EAAQ5/C,sBAAuBm+C,EAAM5kE,OAAO2V,aAC5C27B,EAASt1B,UAAUxF,IAAK6vD,GACxB/0B,EAASt1B,UAAUqC,mBAAoBwwC,GAEvCvd,EAAS2S,QAAU5vD,KAAKmQ,IAAKogE,EAAM99D,OACnCwqC,EAAS4S,YAAc7vD,KAAKmQ,IAAKogE,EAAM99D,OAAU,EAAI89D,EAAMsC,WAC3D51B,EAAS6S,MAAQygB,EAAMzgB,MAElBygB,EAAM//C,WAAa,CAEvB,MAAMshC,EAASye,EAAMze,OAEf0gB,EAAiBzB,EAAYpsE,IAAK4rE,GAExCiC,EAAenjB,WAAayC,EAAO2gB,KACnCD,EAAeljB,iBAAmBwC,EAAO4gB,WACzCF,EAAejjB,aAAeuC,EAAOvvC,OACrCiwD,EAAehjB,cAAgBsC,EAAO6gB,QAEtC1gB,EAAM2f,WAAYT,GAAeqB,EACjCvgB,EAAMjC,cAAemhB,GAAetC,EACpC5c,EAAMhC,iBAAkBkhB,GAAeZ,EAAMze,OAAOz8C,OAEpDm8D,IAIDvf,EAAMyc,KAAMyC,GAAel0B,EAE3Bk0B,SAEM,GAAKZ,EAAMuC,gBAAkB,CAEnC,MAAM71B,EAAWtoB,EAAMhwB,IAAK4rE,GAM5BtzB,EAASja,MAAM5pB,KAAM4pB,GAAQ3xB,eAAgB6gE,GAE7Cj1B,EAASlwB,SAASqF,sBAAuBm+C,EAAMjvD,aAC/C27B,EAASlwB,SAAS7L,aAAcs5C,GAGhCyX,EAASc,WACTl9D,EAAQuD,KAAMm3D,EAAMjvD,aACpBzL,EAAQmb,YAAawpC,GACrByX,EAAS1/C,gBAAiB1c,GAE1BonC,EAASuzB,UAAUhtE,IAAmB,GAAd+sE,EAAMz/D,MAAa,EAAK,GAChDmsC,EAASwzB,WAAWjtE,IAAK,EAAoB,GAAf+sE,EAAMx/D,OAAc,GAElDksC,EAASuzB,UAAUtvD,aAAc+wD,GACjCh1B,EAASwzB,WAAWvvD,aAAc+wD,GAKlChgB,EAAM0c,SAAUyC,GAAmBn0B,EAEnCm0B,SAEM,GAAKb,EAAMyC,aAAe,CAEhC,MAAM/1B,EAAWtoB,EAAMhwB,IAAK4rE,GAS5B,GAPAtzB,EAASlwB,SAASqF,sBAAuBm+C,EAAMjvD,aAC/C27B,EAASlwB,SAAS7L,aAAcs5C,GAEhCvd,EAASja,MAAM5pB,KAAMm3D,EAAMvtC,OAAQ3xB,eAAgBk/D,EAAM2B,WACzDj1B,EAASprB,SAAW0+C,EAAM1+C,SAC1BorB,EAAS6S,MAAQygB,EAAMzgB,MAElBygB,EAAM//C,WAAa,CAEvB,MAAMshC,EAASye,EAAMze,OAEf0gB,EAAiBzB,EAAYpsE,IAAK4rE,GAExCiC,EAAenjB,WAAayC,EAAO2gB,KACnCD,EAAeljB,iBAAmBwC,EAAO4gB,WACzCF,EAAejjB,aAAeuC,EAAOvvC,OACrCiwD,EAAehjB,cAAgBsC,EAAO6gB,QACtCH,EAAepiB,iBAAmB0B,EAAO7wC,OAAOgN,KAChDukD,EAAeniB,gBAAkByB,EAAO7wC,OAAOiN,IAE/C+jC,EAAM8f,YAAab,GAAgBsB,EACnCvgB,EAAM3B,eAAgB4gB,GAAgBrC,EACtC5c,EAAM1B,kBAAmB2gB,GAAgBX,EAAMze,OAAOz8C,OAEtDk8D,IAIDtf,EAAMhuC,MAAOitD,GAAgBj0B,EAE7Bi0B,SAEM,GAAKX,EAAM0C,kBAAoB,CAErC,MAAMh2B,EAAWtoB,EAAMhwB,IAAK4rE,GAE5BtzB,EAASt1B,UAAUyK,sBAAuBm+C,EAAMjvD,aAChD27B,EAASt1B,UAAUqC,mBAAoBwwC,GACvCvd,EAASt1B,UAAU1V,YAEnBgrC,EAASwT,SAASr3C,KAAMm3D,EAAMvtC,OAAQ3xB,eAAgB6gE,GACtDj1B,EAASyT,YAAYt3C,KAAMm3D,EAAM7f,aAAcr/C,eAAgB6gE,GAE/DjgB,EAAM2c,KAAMyC,GAAep0B,EAE3Bo0B,KAMGD,EAAiB,IAErBnf,EAAM4f,aAAejkB,GAAYslB,MACjCjhB,EAAM6f,aAAelkB,GAAYulB,OAIlClhB,EAAMwf,QAAS,GAAMx7D,EACrBg8C,EAAMwf,QAAS,GAAMt8D,EACrB88C,EAAMwf,QAAS,GAAMzhE,EAErB,MAAMmrC,EAAO8W,EAAM9W,KAEdA,EAAK81B,oBAAsBA,GAC/B91B,EAAK+1B,cAAgBA,GACrB/1B,EAAKg2B,aAAeA,GACpBh2B,EAAKi2B,iBAAmBA,GACxBj2B,EAAKk2B,aAAeA,GACpBl2B,EAAKm2B,wBAA0BA,GAC/Bn2B,EAAKo2B,kBAAoBA,GACzBp2B,EAAKq2B,iBAAmBA,IAExBvf,EAAMwc,YAAYziE,OAASilE,EAC3Bhf,EAAMyc,KAAK1iE,OAASmlE,EACpBlf,EAAM0c,SAAS3iE,OAASolE,EACxBnf,EAAMhuC,MAAMjY,OAASklE,EACrBjf,EAAM2c,KAAK5iE,OAASqlE,EAEpBpf,EAAM0f,kBAAkB3lE,OAASslE,EACjCrf,EAAMxC,qBAAqBzjD,OAASslE,EACpCrf,EAAM8f,YAAY/lE,OAASulE,EAC3Btf,EAAM3B,eAAetkD,OAASulE,EAC9Btf,EAAM2f,WAAW5lE,OAASwlE,EAC1Bvf,EAAMjC,cAAchkD,OAASwlE,EAC7Bvf,EAAMvC,wBAAwB1jD,OAASslE,EACvCrf,EAAM1B,kBAAkBvkD,OAASulE,EACjCtf,EAAMhC,iBAAiBjkD,OAASwlE,EAEhCr2B,EAAK81B,kBAAoBA,EACzB91B,EAAK+1B,YAAcA,EACnB/1B,EAAKg2B,WAAaA,EAClBh2B,EAAKi2B,eAAiBA,EACtBj2B,EAAKk2B,WAAaA,EAElBl2B,EAAKm2B,sBAAwBA,EAC7Bn2B,EAAKo2B,gBAAkBA,EACvBp2B,EAAKq2B,eAAiBA,EAEtBvf,EAAMp5C,QAAU63D,OAQjBze,MAAOA,GAKT,SAASmhB,KAER,MAAM51B,EAAS,IAAIszB,GAEbuC,EAAc,GACdC,EAAe,GAkCrB,MAAO,CACN5Y,KAjCD,WAEC2Y,EAAYrnE,OAAS,EACrBsnE,EAAatnE,OAAS,GA+BtBimD,MATa,CACbohB,YAAaA,EACbC,aAAcA,EAEd91B,OAAQA,GAMR+1B,YAhBD,SAAsBtyD,GAErBu8B,EAAOqY,MAAOwd,EAAaC,EAAcryD,IAgBzCuyD,UA9BD,SAAoBjD,GAEnB8C,EAAYvyE,KAAMyvE,IA6BlBkD,WAzBD,SAAqBC,GAEpBJ,EAAaxyE,KAAM4yE,KA4BrB,SAASC,KAER,IAAIC,EAAe,IAAIvvB,QAqCvB,MAAO,CACN1/C,IApCD,SAAc87C,EAAOx/B,GAEpB,IAAI4yD,EAuBJ,OArBmC,IAA9BD,EAAahtE,IAAK65C,IAEtBozB,EAAc,IAAIT,GAClBQ,EAAapwE,IAAKi9C,EAAO,IAAI4D,SAC7BuvB,EAAajvE,IAAK87C,GAAQj9C,IAAKyd,EAAQ4yD,KAIU,IAA5CD,EAAajvE,IAAK87C,GAAQ75C,IAAKqa,IAEnC4yD,EAAc,IAAIT,GAClBQ,EAAajvE,IAAK87C,GAAQj9C,IAAKyd,EAAQ4yD,IAIvCA,EAAcD,EAAajvE,IAAK87C,GAAQ97C,IAAKsc,GAMxC4yD,GAYP95D,QARD,WAEC65D,EAAe,IAAIvvB,UA6BrB,SAASwoB,GAAmBv4C,GAE3BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,oBAEZkB,KAAKooE,aA76mBoB,KA+6mBzBpoE,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EAEpBrlC,KAAKqkC,IAAM,KAEXrkC,KAAK2kC,SAAW,KAEhB3kC,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAE1BjlC,KAAKgiC,KAAM,EAEXhiC,KAAKslC,UAAW3T,GAsDjB,SAASw4C,GAAsBx4C,GAE9BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,uBAEZkB,KAAKgvD,kBAAoB,IAAIxxC,EAC7Bxd,KAAKivD,aAAe,EACpBjvD,KAAKkvD,YAAc,IAEnBlvD,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EAEpBrlC,KAAKqkC,IAAM,KAEXrkC,KAAK2kC,SAAW,KAEhB3kC,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAKgiC,KAAM,EAEXhiC,KAAKslC,UAAW3T,GAzEjBu4C,GAAkB5oE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACtD4oE,GAAkB5oE,UAAU4B,YAAcgnE,GAE1CA,GAAkB5oE,UAAU6vE,qBAAsB,EAElDjH,GAAkB5oE,UAAUmV,KAAO,SAAWnN,GAoB7C,OAlBAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKooE,aAAe9+D,EAAO8+D,aAE3BpoE,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAE3BrlC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBAE1BjlC,MAoDRmqE,GAAqB7oE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACzD6oE,GAAqB7oE,UAAU4B,YAAcinE,GAE7CA,GAAqB7oE,UAAU8vE,wBAAyB,EAExDjH,GAAqB7oE,UAAUmV,KAAO,SAAWnN,GAmBhD,OAjBAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKgvD,kBAAkBv4C,KAAMnN,EAAO0lD,mBACpChvD,KAAKivD,aAAe3lD,EAAO2lD,aAC3BjvD,KAAKkvD,YAAc5lD,EAAO4lD,YAE1BlvD,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAE3BrlC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAExBlnC,MAQR,SAASqxE,GAAgBC,EAAWC,EAAUrb,GAE7C,IAAIsb,EAAW,IAAIvyB,GAEnB,MAAMwyB,EAAiB,IAAIvjE,EAC1BwjE,EAAgB,IAAIxjE,EAEpByjE,EAAY,IAAIn6D,EAEhBo6D,EAAkB,GAClBC,EAAqB,GAErBC,EAAiB,GAEZpuC,EAAa,CAAEquC,EAltnBL,EAktnBkBC,EAntnBjB,EAmtnB+BC,EAjtnB9B,GAmtnBZC,EAAyB,IAAIz3B,GAAgB,CAElDC,QAAS,CACRy3B,YAAa,EAAM,EACnBC,iBAAkB,EAAM,GAGzB93B,SAAU,CACT+3B,YAAa,CAAExzE,MAAO,MACtByzE,WAAY,CAAEzzE,MAAO,IAAIqP,GACzB0R,OAAQ,CAAE/gB,MAAO,IAGlB87C,aA/Ba,2DAiCbC,eAnCa,ggCAuCR23B,EAA0BL,EAAuB17D,QACvD+7D,EAAwB73B,QAAQ83B,eAAiB,EAEjD,MAAMC,EAAgB,IAAIrlC,GAC1BqlC,EAAc9uE,aACb,WACA,IAAIukC,GACH,IAAImB,aAAc,EAAI,GAAK,EAAG,GAAK,GAAK,EAAG,IAAO,EAAG,EAAG,KACxD,IAIF,MAAMqpC,EAAiB,IAAI9/B,GAAM6/B,EAAeP,GAE1Cr9B,EAAQ70C,KA4Id,SAAS2yE,EAASxjB,EAAQ7wC,GAEzB,MAAMoD,EAAW6vD,EAAS1sE,OAAQ6tE,GAIlCR,EAAuB53B,SAAS+3B,YAAYxzE,MAAQswD,EAAO9qB,IAAInrB,QAC/Dg5D,EAAuB53B,SAASg4B,WAAWzzE,MAAQswD,EAAO6gB,QAC1DkC,EAAuB53B,SAAS16B,OAAO/gB,MAAQswD,EAAOvvC,OACtD0xD,EAAUpzB,gBAAiBiR,EAAOyjB,SAClCtB,EAAUlzB,QACVkzB,EAAUuB,mBAAoBv0D,EAAQ,KAAMoD,EAAUwwD,EAAwBQ,EAAgB,MAI9FH,EAAwBj4B,SAAS+3B,YAAYxzE,MAAQswD,EAAOyjB,QAAQ15D,QACpEq5D,EAAwBj4B,SAASg4B,WAAWzzE,MAAQswD,EAAO6gB,QAC3DuC,EAAwBj4B,SAAS16B,OAAO/gB,MAAQswD,EAAOvvC,OACvD0xD,EAAUpzB,gBAAiBiR,EAAO9qB,KAClCitC,EAAUlzB,QACVkzB,EAAUuB,mBAAoBv0D,EAAQ,KAAMoD,EAAU6wD,EAAyBG,EAAgB,MAIhG,SAASI,EAAyBC,EAAaC,EAAaC,GAE3D,MAAM9pE,EAAQ4pE,GAAe,EAAIC,GAAe,EAAIC,GAAiB,EAErE,IAAIphD,EAAW+/C,EAAiBzoE,GAiBhC,YAfkBxI,IAAbkxB,IAEJA,EAAW,IAAIq4C,GAAmB,CAEjC9B,aA9wnBqB,KAgxnBrB/iC,aAAc0tC,EACd3tC,SAAU4tC,IAIXpB,EAAiBzoE,GAAU0oB,GAIrBA,EAIR,SAASqhD,EAA4BH,EAAaC,EAAaC,GAE9D,MAAM9pE,EAAQ4pE,GAAe,EAAIC,GAAe,EAAIC,GAAiB,EAErE,IAAIphD,EAAWggD,EAAoB1oE,GAenC,YAbkBxI,IAAbkxB,IAEJA,EAAW,IAAIs4C,GAAsB,CAEpC9kC,aAAc0tC,EACd3tC,SAAU4tC,IAIXnB,EAAoB1oE,GAAU0oB,GAIxBA,EAIR,SAASshD,EAAkBjyD,EAAQQ,EAAUmQ,EAAU+7C,EAAOngB,EAAkBC,EAAiB5uD,GAEhG,IAAIyF,EAAS,KAET6uE,EAAqBN,EACrBO,EAAiBnyD,EAAOoyD,oBAS5B,IAP4B,IAAvB1F,EAAMyC,eAEV+C,EAAqBF,EACrBG,EAAiBnyD,EAAOqyD,6BAID5yE,IAAnB0yE,EAA+B,CAEnC,IAAIN,GAAc,GAEa,IAA1BlhD,EAASwT,eAEb0tC,EAAcrxD,EAAS2rB,iBAAmB3rB,EAAS2rB,gBAAgBjjB,UAAY1I,EAAS2rB,gBAAgBjjB,SAAS/gB,OAAS,GAI3H,IAAI2pE,GAAc,GAEY,IAAzB9xD,EAAOqyB,iBAEgB,IAAtB1hB,EAASuT,SAEb4tC,GAAc,EAId10E,QAAQC,KAAM,+EAAgF2iB,IAQhG3c,EAAS6uE,EAAoBL,EAAaC,GAFO,IAA3B9xD,EAAOoQ,sBAM7B/sB,EAAS8uE,EAIV,GAAK/B,EAAUra,uBACY,IAAzBplC,EAAS4R,aAC0B,IAAnC5R,EAAS0R,eAAel6B,OAAe,CAKxC,MAAMmqE,EAAOjvE,EAAOgR,KAAMk+D,EAAO5hD,EAAStc,KAE1C,IAAIm+D,EAAsB5B,EAAgB0B,QAEb7yE,IAAxB+yE,IAEJA,EAAsB,GACtB5B,EAAgB0B,GAASE,GAI1B,IAAIC,EAAiBD,EAAqBD,QAElB9yE,IAAnBgzE,IAEJA,EAAiBpvE,EAAOiS,QACxBk9D,EAAqBD,GAASE,GAI/BpvE,EAASovE,EAgCV,OA5BApvE,EAAOqpB,QAAUiE,EAASjE,QAC1BrpB,EAAOygC,UAAYnT,EAASmT,UAI3BzgC,EAAO29B,KAjioBW,IA+hoBdpjC,EAEoC,OAAxB+yB,EAAS6R,WAAwB7R,EAAS6R,WAAa7R,EAASqQ,KAIxC,OAAxBrQ,EAAS6R,WAAwB7R,EAAS6R,WAAaA,EAAY7R,EAASqQ,MAI7F39B,EAAOk/B,YAAc5R,EAAS4R,YAC9Bl/B,EAAOg/B,eAAiB1R,EAAS0R,eACjCh/B,EAAOi/B,iBAAmB3R,EAAS2R,iBAEnCj/B,EAAO0gC,mBAAqBpT,EAASoT,mBACrC1gC,EAAOkjC,UAAY5V,EAAS4V,WAEA,IAAvBmmC,EAAMyC,eAA2D,IAAlC9rE,EAAO6sE,yBAE1C7sE,EAAOyqD,kBAAkBv/B,sBAAuBm+C,EAAMjvD,aACtDpa,EAAO0qD,aAAexB,EACtBlpD,EAAO2qD,YAAcxB,GAIfnpD,EAIR,SAASqvE,EAAc1yD,EAAQ5C,EAAQu1D,EAAcjG,EAAO9uE,GAE3D,IAAwB,IAAnBoiB,EAAO0M,QAAoB,OAIhC,GAFgB1M,EAAOmL,OAAOhlB,KAAMiX,EAAO+N,UAEzBnL,EAAOsQ,QAAUtQ,EAAOuQ,QAAUvQ,EAAOwQ,YAEnDxQ,EAAO2M,YAAgB3M,EAAO4M,eApkoBnB,IAokoBoChvB,MAAiCoiB,EAAO6M,eAAiByjD,EAASsC,iBAAkB5yD,IAAa,CAEtJA,EAAOsM,gBAAgBvc,iBAAkB4iE,EAAar1D,mBAAoB0C,EAAOvC,aAEjF,MAAM+C,EAAW6vD,EAAS1sE,OAAQqc,GAC5B2Q,EAAW3Q,EAAO2Q,SAExB,GAAK5yB,MAAMkY,QAAS0a,GAAa,CAEhC,MAAMuZ,EAAS1pB,EAAS0pB,OAExB,IAAM,IAAIlqC,EAAI,EAAGs1C,EAAKpL,EAAO/hC,OAAQnI,EAAIs1C,EAAIt1C,IAAO,CAEnD,MAAM2qC,EAAQT,EAAQlqC,GAChB4yC,EAAgBjiB,EAAUga,EAAMlK,eAEtC,GAAKmS,GAAiBA,EAAclmB,QAAU,CAE7C,MAAMmmD,EAAgBZ,EAAkBjyD,EAAQQ,EAAUoyB,EAAe85B,EAAOiG,EAAavoD,KAAMuoD,EAAatoD,IAAKzsB,GAErHwyE,EAAUuB,mBAAoBgB,EAAc,KAAMnyD,EAAUqyD,EAAe7yD,EAAQ2qB,UAM/E,GAAKha,EAASjE,QAAU,CAE9B,MAAMmmD,EAAgBZ,EAAkBjyD,EAAQQ,EAAUmQ,EAAU+7C,EAAOiG,EAAavoD,KAAMuoD,EAAatoD,IAAKzsB,GAEhHwyE,EAAUuB,mBAAoBgB,EAAc,KAAMnyD,EAAUqyD,EAAe7yD,EAAQ,OAQtF,MAAMa,EAAWb,EAAOa,SAExB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5CypE,EAAc7xD,EAAU5X,GAAKmU,EAAQu1D,EAAcjG,EAAO9uE,GArX5DkB,KAAKu4C,SAAU,EAEfv4C,KAAKg0E,YAAa,EAClBh0E,KAAKguC,aAAc,EAEnBhuC,KAAKlB,KAhwnBe,EAkwnBpBkB,KAAKm+C,OAAS,SAAWtD,EAAQiD,EAAOx/B,GAEvC,IAAuB,IAAlBu2B,EAAM0D,QAAoB,OAC/B,IAA0B,IAArB1D,EAAMm/B,aAA8C,IAAtBn/B,EAAM7G,YAAwB,OAEjE,GAAuB,IAAlB6M,EAAOxxC,OAAe,OAE3B,MAAM20C,EAAsBszB,EAAUrzB,kBAChCg2B,EAAiB3C,EAAU4C,oBAC3BC,EAAoB7C,EAAU8C,uBAE9BC,EAAS/C,EAAUhiB,MAGzB+kB,EAAOC,YAzwnBU,GA0wnBjBD,EAAO5yB,QAAQphB,MAAM0vB,SAAU,EAAG,EAAG,EAAG,GACxCskB,EAAO5yB,QAAQ7I,MAAM27B,SAAS,GAC9BF,EAAOG,gBAAgB,GAIvB,IAAM,IAAIrqE,EAAI,EAAG0W,EAAKg6B,EAAOxxC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEnD,MAAMyjE,EAAQ/yB,EAAQ1wC,GAChBglD,EAASye,EAAMze,OAErB,IAA2B,IAAtBA,EAAO6kB,aAA+C,IAAvB7kB,EAAOnhB,YAAwB,SAEnE,QAAgBrtC,IAAXwuD,EAAuB,CAE3B7wD,QAAQC,KAAM,wBAAyBqvE,EAAO,kBAC9C,SAID6D,EAAeh7D,KAAM04C,EAAO6gB,SAE5B,MAAMyE,EAAqBtlB,EAAOulB,kBA0BlC,GAxBAjD,EAAe7iD,SAAU6lD,GAEzB/C,EAAcj7D,KAAM04C,EAAO6gB,UAEtByB,EAAe7oE,EAAIstD,GAAkBub,EAAe5lE,EAAIqqD,KAEvDub,EAAe7oE,EAAIstD,IAEvBwb,EAAc9oE,EAAIvL,KAAKqL,MAAOwtD,EAAiBue,EAAmB7rE,GAClE6oE,EAAe7oE,EAAI8oE,EAAc9oE,EAAI6rE,EAAmB7rE,EACxDumD,EAAO6gB,QAAQpnE,EAAI8oE,EAAc9oE,GAI7B6oE,EAAe5lE,EAAIqqD,IAEvBwb,EAAc7lE,EAAIxO,KAAKqL,MAAOwtD,EAAiBue,EAAmB5oE,GAClE4lE,EAAe5lE,EAAI6lE,EAAc7lE,EAAI4oE,EAAmB5oE,EACxDsjD,EAAO6gB,QAAQnkE,EAAI6lE,EAAc7lE,IAMf,OAAfsjD,EAAO9qB,MAAkB8qB,EAAOwlB,oBA/znBnB,IA+znByC30E,KAAKlB,KAAwB,CAEvF,MAAM81E,EAAO,CAAEz/D,UAvwnBE,KAuwnBuBD,UAvwnBvB,KAuwnBgDE,OAtvnBlD,MAwvnBf+5C,EAAO9qB,IAAM,IAAIvrB,EAAmB24D,EAAe7oE,EAAG6oE,EAAe5lE,EAAG+oE,GACxEzlB,EAAO9qB,IAAInrB,QAAQ/X,KAAOysE,EAAMzsE,KAAO,aAEvCguD,EAAOyjB,QAAU,IAAI95D,EAAmB24D,EAAe7oE,EAAG6oE,EAAe5lE,EAAG+oE,GAE5EzlB,EAAO7wC,OAAO29B,yBAIf,GAAoB,OAAfkT,EAAO9qB,IAAe,CAE1B,MAAMuwC,EAAO,CAAEz/D,UAvxnBG,KAuxnBuBD,UAvxnBvB,KAuxnBiDE,OAnwnBpD,MAqwnBf+5C,EAAO9qB,IAAM,IAAIvrB,EAAmB24D,EAAe7oE,EAAG6oE,EAAe5lE,EAAG+oE,GACxEzlB,EAAO9qB,IAAInrB,QAAQ/X,KAAOysE,EAAMzsE,KAAO,aAEvCguD,EAAO7wC,OAAO29B,yBAIfq1B,EAAUpzB,gBAAiBiR,EAAO9qB,KAClCitC,EAAUlzB,QAEV,MAAMy2B,EAAgB1lB,EAAO2lB,mBAE7B,IAAM,IAAIC,EAAK,EAAGA,EAAKF,EAAeE,IAAQ,CAE7C,MAAM97D,EAAWk2C,EAAO6lB,YAAaD,GAErCpD,EAAU9wE,IACT6wE,EAAc9oE,EAAIqQ,EAASrQ,EAC3B8oE,EAAc7lE,EAAIoN,EAASpN,EAC3B6lE,EAAc9oE,EAAIqQ,EAASxB,EAC3Bi6D,EAAc7lE,EAAIoN,EAAS1K,GAG5B8lE,EAAOp7D,SAAU04D,GAEjBxiB,EAAO8lB,eAAgBrH,EAAOmH,GAE9BvD,EAAWriB,EAAO+lB,aAElBtB,EAAc91B,EAAOx/B,EAAQ6wC,EAAO7wC,OAAQsvD,EAAO5tE,KAAKlB,MAMlDqwD,EAAOwlB,oBAn3nBI,IAm3nBkB30E,KAAKlB,MAExC6zE,EAASxjB,EAAQ7wC,GAIlB6wC,EAAOnhB,aAAc,EAItB6G,EAAM7G,aAAc,EAEpBsjC,EAAUpzB,gBAAiBF,EAAqBi2B,EAAgBE,IAuPlE,SAASgB,GAAY7zB,EAAIvG,EAAYwG,GAEpC,MAAMC,EAAWD,EAAaC,SAmT9B,MAAM4zB,EAAc,IAjTpB,WAEC,IAAIC,GAAS,EAEb,MAAMh1C,EAAQ,IAAI7oB,EAClB,IAAI89D,EAAmB,KACvB,MAAMC,EAAoB,IAAI/9D,EAAS,EAAG,EAAG,EAAG,GAEhD,MAAO,CAENg+D,QAAS,SAAWC,GAEdH,IAAqBG,GAAeJ,IAExC/zB,EAAGm0B,UAAWA,EAAWA,EAAWA,EAAWA,GAC/CH,EAAmBG,IAMrBC,UAAW,SAAWC,GAErBN,EAASM,GAIV5lB,SAAU,SAAWz8C,EAAGd,EAAGnF,EAAGD,EAAG82B,IAEJ,IAAvBA,IAEJ5wB,GAAKlG,EAAGoF,GAAKpF,EAAGC,GAAKD,GAItBizB,EAAMx/B,IAAKyS,EAAGd,EAAGnF,EAAGD,IAEuB,IAAtCmoE,EAAkBnyD,OAAQid,KAE9BihB,EAAGkO,WAAYl8C,EAAGd,EAAGnF,EAAGD,GACxBmoE,EAAkB9+D,KAAM4pB,KAM1B2yB,MAAO,WAENqiB,GAAS,EAETC,EAAmB,KACnBC,EAAkB10E,KAAO,EAAG,EAAG,EAAG,MA+P/BsY,EAAc,IAvPpB,WAEC,IAAIk8D,GAAS,EAETO,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,KAExB,MAAO,CAENvB,QAAS,SAAW1xC,GAEdA,EAEJkzC,EAAQ,MAIRC,EAAS,OAMXR,QAAS,SAAWS,GAEdL,IAAqBK,GAAeZ,IAExC/zB,EAAG20B,UAAWA,GACdL,EAAmBK,IAMrBC,QAAS,SAAWtzC,GAEnB,GAAKizC,IAAqBjzC,EAAY,CAErC,GAAKA,EAEJ,OAASA,GAER,KArsoBY,EAusoBX0e,EAAG1e,UAAW,KACd,MAED,KAzsoBa,EA2soBZ0e,EAAG1e,UAAW,KACd,MAED,KA7soBW,EA+soBV0e,EAAG1e,UAAW,KACd,MAED,KAjtoBgB,EAmtoBf0e,EAAG1e,UAAW,KACd,MAED,KArtoBY,EAutoBX0e,EAAG1e,UAAW,KACd,MAED,KAztoBmB,EA2toBlB0e,EAAG1e,UAAW,KACd,MAED,KA7toBc,EA+toBb0e,EAAG1e,UAAW,KACd,MAED,KAjuoBe,EAmuoBd0e,EAAG1e,UAAW,KACd,MAED,QAEC0e,EAAG1e,UAAW,UAMhB0e,EAAG1e,UAAW,KAIfizC,EAAmBjzC,IAMrB8yC,UAAW,SAAWC,GAErBN,EAASM,GAIV5lB,SAAU,SAAWnX,GAEfk9B,IAAsBl9B,IAE1B0I,EAAG60B,WAAYv9B,GACfk9B,EAAoBl9B,IAMtBoa,MAAO,WAENqiB,GAAS,EAETO,EAAmB,KACnBC,EAAmB,KACnBC,EAAoB,QA4HjB18D,EAAgB,IApHtB,WAEC,IAAIi8D,GAAS,EAETe,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,KAE1B,MAAO,CAENpC,QAAS,SAAWqC,GAEZvB,IAEDuB,EAEJb,EAAQ,MAIRC,EAAS,QAQZR,QAAS,SAAWqB,GAEdT,IAAuBS,GAAiBxB,IAE5C/zB,EAAGu1B,YAAaA,GAChBT,EAAqBS,IAMvBX,QAAS,SAAWlzC,EAAaC,EAAY4zC,GAEvCR,IAAuBrzC,GACvBszC,IAAsBrzC,GACtBszC,IAA2BM,IAE/Bv1B,EAAGte,YAAaA,EAAaC,EAAY4zC,GAEzCR,EAAqBrzC,EACrBszC,EAAoBrzC,EACpBszC,EAAyBM,IAM3BC,MAAO,SAAW3zC,EAAaC,EAAcC,GAEvCmzC,IAAuBrzC,GACvBszC,IAAwBrzC,GACxBszC,IAAwBrzC,IAE5Bie,EAAGy1B,UAAW5zC,EAAaC,EAAcC,GAEzCmzC,EAAqBrzC,EACrBszC,EAAsBrzC,EACtBszC,EAAsBrzC,IAMxBqyC,UAAW,SAAWC,GAErBN,EAASM,GAIV5lB,SAAU,SAAW1R,GAEfs4B,IAAwBt4B,IAE5BiD,EAAG01B,aAAc34B,GACjBs4B,EAAsBt4B,IAMxB2U,MAAO,WAENqiB,GAAS,EAETe,EAAqB,KACrBC,EAAqB,KACrBC,EAAoB,KACpBC,EAAyB,KACzBC,EAAqB,KACrBC,EAAsB,KACtBC,EAAsB,KACtBC,EAAsB,QAczB,IAAIM,EAAsB,GAEtBC,EAAiB,KAEjBC,EAAyB,KACzBC,EAAkB,KAClBC,EAAuB,KACvBC,EAAkB,KAClBC,EAAkB,KAClBC,EAA4B,KAC5BC,EAAuB,KACvBC,EAAuB,KACvBC,GAA2B,EAE3BC,EAAmB,KACnBC,EAAkB,KAElBC,EAAmB,KAEnBC,EAA6B,KAC7BC,EAA4B,KAEhC,MAAMhiB,EAAc1U,EAAG8P,aAAc,OAErC,IAAI6mB,GAAqB,EACrB/hE,EAAU,EACd,MAAMgiE,EAAY52B,EAAG8P,aAAc,OAEK,IAAnC8mB,EAAUtuE,QAAS,UAEvBsM,EAAUiqB,WAAY,kBAAkBC,KAAM83C,GAAa,IAC3DD,EAAuB/hE,GAAW,IAEgB,IAAvCgiE,EAAUtuE,QAAS,eAE9BsM,EAAUiqB,WAAY,uBAAuBC,KAAM83C,GAAa,IAChED,EAAuB/hE,GAAW,GAInC,IAAIiiE,EAAqB,KACrBC,EAAuB,GAE3B,MAAMC,EAAiB,IAAI7gE,EACrB8gE,EAAkB,IAAI9gE,EAE5B,SAAS+gE,EAAez5E,EAAMkK,EAAQ0X,GAErC,MAAMwR,EAAO,IAAIuW,WAAY,GACvBvvB,EAAUooC,EAAGi3B,gBAEnBj3B,EAAGk3B,YAAa15E,EAAMoa,GACtBooC,EAAGm3B,cAAe35E,EAAM,MAAO,MAC/BwiD,EAAGm3B,cAAe35E,EAAM,MAAO,MAE/B,IAAM,IAAIqL,EAAI,EAAGA,EAAIuW,EAAOvW,IAE3Bm3C,EAAGo3B,WAAY1vE,EAASmB,EAAG,EAAG,KAAM,EAAG,EAAG,EAAG,KAAM,KAAM+nB,GAI1D,OAAOhZ,EAIR,MAAMy/D,EAAgB,GAqBtB,SAAS5C,EAAQ9lD,IAEmB,IAA9BgnD,EAAqBhnD,KAEzBqxB,EAAGy0B,OAAQ9lD,GACXgnD,EAAqBhnD,IAAO,GAM9B,SAAS+lD,EAAS/lD,IAEkB,IAA9BgnD,EAAqBhnD,KAEzBqxB,EAAG00B,QAAS/lD,GACZgnD,EAAqBhnD,IAAO,GApC9B0oD,EAAe,MAASJ,EAAe,KAAM,KAAM,GACnDI,EAAe,OAAUJ,EAAe,MAAO,MAAO,GAItDnD,EAAYrlB,SAAU,EAAG,EAAG,EAAG,GAC/B52C,EAAY42C,SAAU,GACtB32C,EAAc22C,SAAU,GAExBgmB,EAAQ,MACR58D,EAAY+8D,QA79oBU,GA+9oBtB0C,GAAc,GACdC,EAlgpBoB,GAmgpBpB9C,EAAQ,MAERzB,EA5/oBkB,GAsipBlB,MAAMwE,EAAe,CACpBC,IAAiB,MACjBC,IAAsB,MACtBC,IAA6B,OAG9B,GAAKz3B,EAEJs3B,EAripBkB,KAqipBY,MAC9BA,EAripBkB,KAqipBY,UAExB,CAEN,MAAMznB,EAAYtW,EAAW/4C,IAAK,oBAEf,OAAdqvD,IAEJynB,EA9ipBiB,KA8ipBaznB,EAAU6nB,QACxCJ,EA9ipBiB,KA8ipBaznB,EAAU8nB,SAM1C,MAAMC,EAAa,CAClBC,IAAgB,EAChBC,IAAe,EACfC,IAAoB,IACpBC,IAAoB,IACpBC,IAA4B,IAC5BC,IAAoB,IACpBC,IAAoB,IACpBC,IAA4B,IAC5BC,IAA4B,IAC5BC,IAA4B,IAC5BC,IAA4B,KAG7B,SAASzF,EAAaryC,EAAUO,EAAeF,EAAUC,EAAUI,EAAoBF,EAAeC,EAAewB,GAEpH,GA9kpBiB,IA8kpBZjC,GAoBL,GAPOk1C,IAENpB,EAAQ,MACRoB,GAAyB,GAzlpBL,IA6lpBhBl1C,EAmFLU,EAAqBA,GAAsBH,EAC3CC,EAAgBA,GAAiBH,EACjCI,EAAgBA,GAAiBH,EAE5BC,IAAkB60C,GAAwB10C,IAAuB60C,IAErEl2B,EAAG04B,sBAAuBlB,EAAct2C,GAAiBs2C,EAAcn2C,IAEvE00C,EAAuB70C,EACvBg1C,EAA4B70C,GAIxBL,IAAag1C,GAAmB/0C,IAAag1C,GAAmB90C,IAAkBg1C,GAAwB/0C,IAAkBg1C,IAEhIp2B,EAAG24B,kBAAmBb,EAAY92C,GAAY82C,EAAY72C,GAAY62C,EAAY32C,GAAiB22C,EAAY12C,IAE/G40C,EAAkBh1C,EAClBi1C,EAAkBh1C,EAClBk1C,EAAuBh1C,EACvBi1C,EAAuBh1C,GAIxB00C,EAAkBn1C,EAClB01C,EAA2B,UA1G1B,GAAK11C,IAAam1C,GAAmBlzC,IAAuByzC,EAA2B,CAWtF,GAzmpBgB,MAgmpBXN,GAhmpBW,MAgmpB6BG,IAE5Cl2B,EAAG9e,cAAe,OAElB60C,EApmpBe,IAqmpBfG,EArmpBe,KAympBXtzC,EAEJ,OAASjC,GAER,KAlnpBiB,EAmnpBhBqf,EAAG24B,kBAAmB,EAAG,IAAK,EAAG,KACjC,MAED,KArnpBmB,EAsnpBlB34B,EAAG44B,UAAW,EAAG,GACjB,MAED,KAxnpBsB,EAynpBrB54B,EAAG24B,kBAAmB,EAAG,EAAG,IAAK,KACjC,MAED,KA3npBmB,EA4npBlB34B,EAAG24B,kBAAmB,EAAG,IAAK,EAAG,KACjC,MAED,QACC37E,QAAQ0R,MAAO,uCAAwCiyB,QAOzD,OAASA,GAER,KA5opBiB,EA6opBhBqf,EAAG24B,kBAAmB,IAAK,IAAK,EAAG,KACnC,MAED,KA/opBmB,EAgppBlB34B,EAAG44B,UAAW,IAAK,GACnB,MAED,KAlppBsB,EAmppBrB54B,EAAG44B,UAAW,EAAG,KACjB,MAED,KArppBmB,EAsppBlB54B,EAAG44B,UAAW,EAAG,KACjB,MAED,QACC57E,QAAQ0R,MAAO,uCAAwCiyB,GAO1Dq1C,EAAkB,KAClBC,EAAkB,KAClBE,EAAuB,KACvBC,EAAuB,KAEvBN,EAAkBn1C,EAClB01C,EAA2BzzC,QA3FvBizC,IAEJnB,EAAS,MACTmB,GAAyB,GAmK5B,SAASyB,EAAcjR,GAEjBiQ,IAAqBjQ,IAEpBA,EAEJrmB,EAAG64B,UAAW,MAId74B,EAAG64B,UAAW,MAIfvC,EAAmBjQ,GAMrB,SAASkR,EAAauB,GApxpBF,IAsxpBdA,GAEJrE,EAAQ,MAEHqE,IAAavC,IAzxpBA,IA2xpBZuC,EAEJ94B,EAAG84B,SAAU,MA5xpBI,IA8xpBNA,EAEX94B,EAAG84B,SAAU,MAIb94B,EAAG84B,SAAU,QAQfpE,EAAS,MAIV6B,EAAkBuC,EAgBnB,SAASC,EAAkBx2C,EAAey2C,EAAQpa,GAE5Cr8B,GAEJkyC,EAAQ,OAEHgC,IAA+BuC,GAAUtC,IAA8B9X,IAE3E5e,EAAGzd,cAAey2C,EAAQpa,GAE1B6X,EAA6BuC,EAC7BtC,EAA4B9X,IAM7B8V,EAAS,OAsBX,SAASuE,EAAeC,QAEJ75E,IAAd65E,IAA0BA,EAAY,MAAQxkB,EAAc,GAE5DmiB,IAAuBqC,IAE3Bl5B,EAAGi5B,cAAeC,GAClBrC,EAAqBqC,GAyIvB,MAAO,CAEN/4B,QAAS,CACRphB,MAAO+0C,EACPx8B,MAAOz/B,EACPklC,QAASjlC,GAGV28D,OAAQA,EACRC,QAASA,EAETyE,WApeD,SAAqBpoB,GAEpB,OAAK6kB,IAAmB7kB,IAEvB/Q,EAAGm5B,WAAYpoB,GAEf6kB,EAAiB7kB,GAEV,IA8dRiiB,YAAaA,EACboG,YA3SD,SAAsB7oD,EAAU8oD,GAptpBd,IAstpBjB9oD,EAASqQ,KACN8zC,EAAS,MACTD,EAAQ,MAEX,IAAIpO,EA3tpBW,IA2tpBG91C,EAASqQ,KACtBy4C,IAAchT,GAAcA,GAEjCiR,EAAcjR,GA1tpBO,IA4tpBnB91C,EAASoQ,WAAwD,IAAzBpQ,EAASwQ,YAChDiyC,EA9tpBc,GA+tpBdA,EAAaziD,EAASoQ,SAAUpQ,EAAS2Q,cAAe3Q,EAASyQ,SAAUzQ,EAAS0Q,SAAU1Q,EAAS8Q,mBAAoB9Q,EAAS4Q,cAAe5Q,EAAS6Q,cAAe7Q,EAASqS,oBAEvL/qB,EAAY+8D,QAASrkD,EAAS+Q,WAC9BzpB,EAAYo7D,QAAS1iD,EAASgR,WAC9B1pB,EAAYq8D,QAAS3jD,EAASiR,YAC9BsyC,EAAYI,QAAS3jD,EAAS8R,YAE9B,MAAML,EAAezR,EAASyR,aAC9BlqB,EAAcm7D,QAASjxC,GAClBA,IAEJlqB,EAAco8D,QAAS3jD,EAASkR,kBAChC3pB,EAAc88D,QAASrkD,EAASmR,YAAanR,EAASoR,WAAYpR,EAASqR,iBAC3E9pB,EAAc09D,MAAOjlD,EAASsR,YAAatR,EAASuR,aAAcvR,EAASwR,eAI5Eg3C,EAAkBxoD,EAASgS,cAAehS,EAASiS,oBAAqBjS,EAASkS,qBA+QjF60C,aAAcA,EACdC,YAAaA,EAEb+B,aAtND,SAAuBzsE,GAEjBA,IAAU2pE,IAETG,GAAqB32B,EAAGu5B,UAAW1sE,GAExC2pE,EAAmB3pE,IAiNpBksE,iBAAkBA,EAElB7F,eAtLD,SAAyBx7D,GAEnBA,EAEJ+8D,EAAQ,MAIRC,EAAS,OAgLVuE,cAAeA,EACf/B,YA5JD,SAAsBsC,EAAWC,GAEJ,OAAvB5C,GAEJoC,IAID,IAAIS,EAAe5C,EAAsBD,QAEnBx3E,IAAjBq6E,IAEJA,EAAe,CAAEl8E,UAAM6B,EAAWuY,aAASvY,GAC3Cy3E,EAAsBD,GAAuB6C,GAIzCA,EAAal8E,OAASg8E,GAAaE,EAAa9hE,UAAY6hE,IAEhEz5B,EAAGk3B,YAAasC,EAAWC,GAAgBpC,EAAemC,IAE1DE,EAAal8E,KAAOg8E,EACpBE,EAAa9hE,QAAU6hE,IAuIxBE,cAjID,WAEC,MAAMD,EAAe5C,EAAsBD,QAErBx3E,IAAjBq6E,QAAoDr6E,IAAtBq6E,EAAal8E,OAE/CwiD,EAAGk3B,YAAawC,EAAal8E,KAAM,MAEnCk8E,EAAal8E,UAAO6B,EACpBq6E,EAAa9hE,aAAUvY,IAyHxBu6E,qBAnHD,WAEC,IAEC55B,EAAG45B,qBAAqBC,MAAO75B,EAAIl4C,WAElC,MAAQ4G,GAET1R,QAAQ0R,MAAO,oBAAqBA,KA4GrC0oE,WAtGD,WAEC,IAECp3B,EAAGo3B,WAAWyC,MAAO75B,EAAIl4C,WAExB,MAAQ4G,GAET1R,QAAQ0R,MAAO,oBAAqBA,KA+FrCorE,WAzFD,WAEC,IAEC95B,EAAG85B,WAAWD,MAAO75B,EAAIl4C,WAExB,MAAQ4G,GAET1R,QAAQ0R,MAAO,oBAAqBA,KAmFrC+I,QA3ED,SAAkBA,IAEyB,IAArCs/D,EAAej1D,OAAQrK,KAE3BuoC,EAAGvoC,QAASA,EAAQnQ,EAAGmQ,EAAQlN,EAAGkN,EAAQtB,EAAGsB,EAAQxK,GACrD8pE,EAAe5hE,KAAMsC,KAuEtBE,SAjED,SAAmBA,IAE0B,IAAvCq/D,EAAgBl1D,OAAQnK,KAE5BqoC,EAAGroC,SAAUA,EAASrQ,EAAGqQ,EAASpN,EAAGoN,EAASxB,EAAGwB,EAAS1K,GAC1D+pE,EAAgB7hE,KAAMwC,KA8DvB+5C,MAtDD,WAECikB,EAAsB,GAEtBkB,EAAqB,KACrBC,EAAuB,GAEvBlB,EAAiB,KAEjBE,EAAkB,KAElBQ,EAAmB,KACnBC,EAAkB,KAElBzC,EAAYpiB,QACZ75C,EAAY65C,QACZ55C,EAAc45C,UA4ChB,SAASqoB,GAAeC,EAAKvgC,EAAYuU,EAAOntD,EAAYo/C,EAAcg6B,EAAOtmB,GAEhF,MAAMzT,EAAWD,EAAaC,SACxBwU,EAAczU,EAAayU,YAC3BG,EAAiB5U,EAAa4U,eAC9BD,EAAiB3U,EAAa2U,eAC9BW,EAAatV,EAAasV,WAE1B2kB,EAAiB,IAAI95B,QAC3B,IAAI3tC,EAMA0nE,GAAqB,EAEzB,IAECA,EAAgD,oBAApBC,iBAC+B,OAArD,IAAIA,gBAAiB,EAAG,GAAIlnE,WAAY,MAE7C,MAAQmnE,IAMV,SAASC,EAAcztE,EAAOC,GAI7B,OAAOqtE,EACN,IAAIC,gBAAiBvtE,EAAOC,GAC5BvG,SAASyM,gBAAiB,+BAAgC,UAI5D,SAASunE,EAAa3nE,EAAO4nE,EAAiBC,EAAgBC,GAE7D,IAAI3xD,EAAQ,EAYZ,IARKnW,EAAM/F,MAAQ6tE,GAAW9nE,EAAM9F,OAAS4tE,KAE5C3xD,EAAQ2xD,EAAU3+E,KAAK8N,IAAK+I,EAAM/F,MAAO+F,EAAM9F,SAM3Cic,EAAQ,IAAyB,IAApByxD,EAA2B,CAI5C,GAAmC,oBAArBG,kBAAoC/nE,aAAiB+nE,kBACnC,oBAAtB7nE,mBAAqCF,aAAiBE,mBACtC,oBAAhB8nE,aAA+BhoE,aAAiBgoE,YAAgB,CAEzE,MAAMxzE,EAAQozE,EAAkBvxE,EAAU0C,gBAAkB5P,KAAKqL,MAE3DyF,EAAQzF,EAAO2hB,EAAQnW,EAAM/F,OAC7BC,EAAS1F,EAAO2hB,EAAQnW,EAAM9F,aAEnBzN,IAAZoT,IAAwBA,EAAU6nE,EAAcztE,EAAOC,IAI5D,MAAMiG,EAAS0nE,EAAiBH,EAAcztE,EAAOC,GAAW2F,EAEhEM,EAAOlG,MAAQA,EACfkG,EAAOjG,OAASA,EAOhB,OALgBiG,EAAOG,WAAY,MAC3BG,UAAWT,EAAO,EAAG,EAAG/F,EAAOC,GAEvC9P,QAAQC,KAAM,uDAAyD2V,EAAM/F,MAAQ,IAAM+F,EAAM9F,OAAS,SAAWD,EAAQ,IAAMC,EAAS,MAErIiG,EAUP,MANK,SAAUH,GAEd5V,QAAQC,KAAM,yDAA2D2V,EAAM/F,MAAQ,IAAM+F,EAAM9F,OAAS,MAItG8F,EAMT,OAAOA,EAIR,SAAStH,EAAcsH,GAEtB,OAAO3J,EAAUqC,aAAcsH,EAAM/F,QAAW5D,EAAUqC,aAAcsH,EAAM9F,QAa/E,SAAS+tE,EAA6BjjE,EAASkjE,GAE9C,OAAOljE,EAAQpD,iBAAmBsmE,GAzlqBd,OA0lqBnBljE,EAAQ/D,WAvlqBU,OAulqBqB+D,EAAQ/D,UAIjD,SAASknE,EAAgBrzE,EAAQkQ,EAAS/K,EAAOC,GAEhDktE,EAAIe,eAAgBrzE,GAEM7G,EAAWH,IAAKkX,GAGxBojE,cAAgBj/E,KAAK0P,IAAK1P,KAAK8N,IAAKgD,EAAOC,IAAa/Q,KAAKk/E,MAIhF,SAASC,EAAmBC,EAAoBC,EAAUC,GAEzD,IAAkB,IAAbn7B,EAAqB,OAAOk7B,EAEjC,GAA4B,OAAvBD,EAA8B,CAElC,QAAmC97E,IAA9B26E,EAAKmB,GAAqC,OAAOnB,EAAKmB,GAE3Dn+E,QAAQC,KAAM,2EAA8Ek+E,EAAqB,KAIlH,IAAI9mE,EAAiB+mE,EAiCrB,OA/BkB,OAAbA,IAEY,OAAXC,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,QAIvB,OAAb+mE,IAEY,OAAXC,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,QAIvB,OAAb+mE,IAEY,OAAXC,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,OACxB,OAAXgnE,IAAkBhnE,EAAiB,QAIjB,QAAnBA,GAA+C,QAAnBA,GACb,QAAnBA,GAA+C,QAAnBA,GAE5BolC,EAAW/4C,IAAK,0BAIV2T,EAMR,SAASinE,EAAgBrqE,GAExB,OA9pqBoB,OA8pqBfA,GA7pqB4B,OA6pqBLA,GA5pqBI,OA4pqBgCA,EAExD,KAID,KAMR,SAASsqE,EAAkB5yE,GAE1B,MAAMiP,EAAUjP,EAAMjB,OAEtBkQ,EAAQjb,oBAAqB,UAAW4+E,GA4BzC,SAA4B3jE,GAE3B,MAAM4jE,EAAoB36E,EAAWH,IAAKkX,GAE1C,QAAuCvY,IAAlCm8E,EAAkBC,YAA4B,OAEnDzB,EAAI0B,cAAeF,EAAkBG,gBAErC96E,EAAW2tB,OAAQ5W,GAlCnBgkE,CAAmBhkE,GAEdA,EAAQikE,gBAEZ3B,EAAe15B,OAAQ5oC,GAIxB+7C,EAAKsE,OAAO1iD,WAIb,SAASumE,EAAuBnzE,GAE/B,MAAMozC,EAAepzC,EAAMjB,OAE3Bq0C,EAAap/C,oBAAqB,UAAWm/E,GAsB9C,SAAiC//B,GAEhC,MAAMggC,EAAyBl7E,EAAWH,IAAKq7C,GACzCy/B,EAAoB36E,EAAWH,IAAKq7C,EAAankC,SAEvD,IAAOmkC,EAAe,YAEoB18C,IAArCm8E,EAAkBG,gBAEtB3B,EAAI0B,cAAeF,EAAkBG,gBAIjC5/B,EAAahkC,cAEjBgkC,EAAahkC,aAAajC,UAI3B,GAAKimC,EAAaC,wBAEjB,IAAM,IAAInzC,EAAI,EAAGA,EAAI,EAAGA,IAEvBmxE,EAAIgC,kBAAmBD,EAAuBE,mBAAoBpzE,IAC7DkzE,EAAuBG,oBAAqBlC,EAAImC,mBAAoBJ,EAAuBG,mBAAoBrzE,SAMrHmxE,EAAIgC,kBAAmBD,EAAuBE,oBACzCF,EAAuBG,oBAAqBlC,EAAImC,mBAAoBJ,EAAuBG,oBAC3FH,EAAuBK,gCAAiCpC,EAAIgC,kBAAmBD,EAAuBK,gCACtGL,EAAuBM,0BAA2BrC,EAAImC,mBAAoBJ,EAAuBM,0BACjGN,EAAuBO,0BAA2BtC,EAAImC,mBAAoBJ,EAAuBO,0BAIvGz7E,EAAW2tB,OAAQutB,EAAankC,SAChC/W,EAAW2tB,OAAQutB,GA3DnBwgC,CAAwBxgC,GAExB4X,EAAKsE,OAAO1iD,WA+Db,IAAIinE,EAAe,EA0BnB,SAASC,EAAc7kE,EAAS8kE,GAE/B,MAAMlB,EAAoB36E,EAAWH,IAAKkX,GAI1C,GAFKA,EAAQikE,gBA42Bd,SAA6BjkE,GAE5B,MAAM6nC,EAAQkU,EAAK9W,OAAO4C,MAIrBy6B,EAAex5E,IAAKkX,KAAc6nC,IAEtCy6B,EAAe36E,IAAKqY,EAAS6nC,GAC7B7nC,EAAQrU,UAr3BqBo5E,CAAoB/kE,GAE7CA,EAAQhD,QAAU,GAAK4mE,EAAkBoB,YAAchlE,EAAQhD,QAAU,CAE7E,MAAMhC,EAAQgF,EAAQhF,MAEtB,QAAevT,IAAVuT,EAEJ5V,QAAQC,KAAM,6EAER,CAAA,IAAwB,IAAnB2V,EAAMiqE,SAOjB,YADAC,EAAetB,EAAmB5jE,EAAS8kE,GAJ3C1/E,QAAQC,KAAM,2EAWhB+wD,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,KAAMsE,EAAkBG,gBAoC5C,SAASoB,EAAgBnlE,EAAS8kE,GAEjC,GAA8B,IAAzB9kE,EAAQhF,MAAM7K,OAAe,OAElC,MAAMyzE,EAAoB36E,EAAWH,IAAKkX,GAE1C,GAAKA,EAAQhD,QAAU,GAAK4mE,EAAkBoB,YAAchlE,EAAQhD,QAAU,CAE7EooE,EAAaxB,EAAmB5jE,GAEhCo2C,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,MAAOsE,EAAkBG,gBAE5C3B,EAAIiD,YAAa,MAAOrlE,EAAQlD,OAEhC,MAAMwoE,EAAiBtlE,IAAaA,EAAQulE,qBAAuBvlE,EAAQhF,MAAO,GAAIuqE,qBAChF3/B,EAAkB5lC,EAAQhF,MAAO,IAAOgF,EAAQhF,MAAO,GAAI4qC,cAE3D4/B,EAAY,GAElB,IAAM,IAAIv0E,EAAI,EAAGA,EAAI,EAAGA,IAQtBu0E,EAAWv0E,GANLq0E,GAAkB1/B,EAMPA,EAAgB5lC,EAAQhF,MAAO/J,GAAI+J,MAAQgF,EAAQhF,MAAO/J,GAJ1D0xE,EAAa3iE,EAAQhF,MAAO/J,IAAK,GAAO,EAAMgsD,GAUjE,MAAMjiD,EAAQwqE,EAAW,GACxBtC,EAAexvE,EAAcsH,IAAWstC,EACxCk7B,EAAWnB,EAAMoD,QAASzlE,EAAQ9D,QAClCunE,EAASpB,EAAMoD,QAASzlE,EAAQpa,MAChC8/E,EAAmBpC,EAAmBtjE,EAAQvD,eAAgB+mE,EAAUC,GAIzE,IAAIlnE,EAEJ,GAJAopE,EAAsB,MAAO3lE,EAASkjE,GAIjCoC,EAAe,CAEnB,IAAM,IAAIr0E,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9BsL,EAAUipE,EAAWv0E,GAAIsL,QAEzB,IAAM,IAAI8N,EAAI,EAAGA,EAAI9N,EAAQpM,OAAQka,IAAO,CAE3C,MAAMu7D,EAASrpE,EAAS8N,GA73qBX,OA+3qBRrK,EAAQ9D,QAh4qBD,OAg4qB0B8D,EAAQ9D,OAE3B,OAAbsnE,EAEJptB,EAAM4rB,qBAAsB,MAAQ/wE,EAAGoZ,EAAGq7D,EAAkBE,EAAO3wE,MAAO2wE,EAAO1wE,OAAQ,EAAG0wE,EAAO5sD,MAInG5zB,QAAQC,KAAM,mGAMf+wD,EAAMopB,WAAY,MAAQvuE,EAAGoZ,EAAGq7D,EAAkBE,EAAO3wE,MAAO2wE,EAAO1wE,OAAQ,EAAGsuE,EAAUC,EAAQmC,EAAO5sD,OAQ9G4qD,EAAkBR,cAAgB7mE,EAAQpM,OAAS,MAE7C,CAENoM,EAAUyD,EAAQzD,QAElB,IAAM,IAAItL,EAAI,EAAGA,EAAI,EAAGA,IAEvB,GAAK20C,EAAgB,CAEpBwQ,EAAMopB,WAAY,MAAQvuE,EAAG,EAAGy0E,EAAkBF,EAAWv0E,GAAIgE,MAAOuwE,EAAWv0E,GAAIiE,OAAQ,EAAGsuE,EAAUC,EAAQ+B,EAAWv0E,GAAI+nB,MAEnI,IAAM,IAAI3O,EAAI,EAAGA,EAAI9N,EAAQpM,OAAQka,IAAO,CAE3C,MACMw7D,EADStpE,EAAS8N,GACGrP,MAAO/J,GAAI+J,MAEtCo7C,EAAMopB,WAAY,MAAQvuE,EAAGoZ,EAAI,EAAGq7D,EAAkBG,EAAY5wE,MAAO4wE,EAAY3wE,OAAQ,EAAGsuE,EAAUC,EAAQoC,EAAY7sD,WAIzH,CAENo9B,EAAMopB,WAAY,MAAQvuE,EAAG,EAAGy0E,EAAkBlC,EAAUC,EAAQ+B,EAAWv0E,IAE/E,IAAM,IAAIoZ,EAAI,EAAGA,EAAI9N,EAAQpM,OAAQka,IAAO,CAE3C,MAAMu7D,EAASrpE,EAAS8N,GAExB+rC,EAAMopB,WAAY,MAAQvuE,EAAGoZ,EAAI,EAAGq7D,EAAkBlC,EAAUC,EAAQmC,EAAO5qE,MAAO/J,KAQzF2yE,EAAkBR,cAAgB7mE,EAAQpM,OAItC8yE,EAA6BjjE,EAASkjE,IAG1CC,EAAgB,MAAOnjE,EAAShF,EAAM/F,MAAO+F,EAAM9F,QAIpD0uE,EAAkBoB,UAAYhlE,EAAQhD,QAEjCgD,EAAQ/C,UAAW+C,EAAQ/C,SAAU+C,QAI1Co2C,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,MAAOsE,EAAkBG,gBAM9C,SAAS+B,EAAuB9lE,EAAS8kE,GAExC1uB,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,MAAOr2E,EAAWH,IAAKkX,GAAU+jE,gBAIrD,MAAMgC,EAAe,CACpBC,IAAoB,MACpBC,KAAyB,MACzBC,KAA4B,OAGvBC,EAAa,CAClBC,KAAmB,KACnBC,KAAgC,KAChCC,KAA+B,KAE/BC,KAAkB,KAClBC,KAA+B,KAC/BC,KAA8B,MAG/B,SAASd,EAAsBe,EAAa1mE,EAASkjE,GAE/CA,GAEJd,EAAI7C,cAAemH,EAAa,MAAOX,EAAc/lE,EAAQlE,QAC7DsmE,EAAI7C,cAAemH,EAAa,MAAOX,EAAc/lE,EAAQjE,QAExC,QAAhB2qE,GAAyC,QAAhBA,GAE7BtE,EAAI7C,cAAemH,EAAa,MAAOX,EAAc/lE,EAAQsiD,QAI9D8f,EAAI7C,cAAemH,EAAa,MAAOP,EAAYnmE,EAAQhE,YAC3DomE,EAAI7C,cAAemH,EAAa,MAAOP,EAAYnmE,EAAQ/D,cAI3DmmE,EAAI7C,cAAemH,EAAa,MAAO,OACvCtE,EAAI7C,cAAemH,EAAa,MAAO,OAElB,QAAhBA,GAAyC,QAAhBA,GAE7BtE,EAAI7C,cAAemH,EAAa,MAAO,OAthrBf,OA0hrBpB1mE,EAAQlE,OA1hrBY,OA0hrBqBkE,EAAQjE,OAErD3W,QAAQC,KAAM,iIAIf+8E,EAAI7C,cAAemH,EAAa,MAAOhD,EAAgB1jE,EAAQhE,YAC/DomE,EAAI7C,cAAemH,EAAa,MAAOhD,EAAgB1jE,EAAQ/D,YA/hrB5C,OAiirBd+D,EAAQ/D,WA9hrBK,OA8hrB0B+D,EAAQ/D,WAEnD7W,QAAQC,KAAM,oIAMhB,MAAM8yD,EAAYtW,EAAW/4C,IAAK,kCAElC,GAAKqvD,EAAY,CAEhB,GAjirBe,OAiirBVn4C,EAAQpa,MAAuE,OAAjDi8C,EAAW/4C,IAAK,4BAAwC,OAC3F,GAjirBmB,OAiirBdkX,EAAQpa,MAAgG,QAApE0iD,GAAYzG,EAAW/4C,IAAK,kCAA+C,QAE/GkX,EAAQ7D,WAAa,GAAKlT,EAAWH,IAAKkX,GAAU2mE,uBAExDvE,EAAIwE,cAAeF,EAAavuB,EAAU0uB,2BAA4B1iF,KAAK6N,IAAKgO,EAAQ7D,WAAYksC,EAAamV,qBACjHv0D,EAAWH,IAAKkX,GAAU2mE,oBAAsB3mE,EAAQ7D,aAQ3D,SAASipE,EAAaxB,EAAmB5jE,QAEDvY,IAAlCm8E,EAAkBC,cAEtBD,EAAkBC,aAAc,EAEhC7jE,EAAQlb,iBAAkB,UAAW6+E,GAErCC,EAAkBG,eAAiB3B,EAAI/C,gBAEvCtjB,EAAKsE,OAAO1iD,YAMd,SAASunE,EAAetB,EAAmB5jE,EAAS8kE,GAEnD,IAAI4B,EAAc,KAEb1mE,EAAQ2iD,uBAAuB+jB,EAAc,OAC7C1mE,EAAQ4iD,kBAAkB8jB,EAAc,OAE7CtB,EAAaxB,EAAmB5jE,GAEhCo2C,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAaoH,EAAa9C,EAAkBG,gBAElD3B,EAAIiD,YAAa,MAAOrlE,EAAQlD,OAChCslE,EAAIiD,YAAa,MAAOrlE,EAAQnD,kBAChCulE,EAAIiD,YAAa,KAAMrlE,EAAQjD,iBAE/B,MAAM6lE,EA7gBP,SAAiC5iE,GAEhC,OAAKsoC,IAllqBqB,OAolqBjBtoC,EAAQlE,OAplqBS,OAolqBwBkE,EAAQjE,OAllqBtC,OAmlqBjBiE,EAAQ/D,WAhlqBQ,OAglqBuB+D,EAAQ/D,WAwgB1B6qE,CAAwB9mE,KAA+C,IAAlCtM,EAAcsM,EAAQhF,OAC7EA,EAAQ2nE,EAAa3iE,EAAQhF,MAAO4nE,GAAiB,EAAO5lB,GAE5DkmB,EAAexvE,EAAcsH,IAAWstC,EAC7Ck7B,EAAWnB,EAAMoD,QAASzlE,EAAQ9D,QAEnC,IAKI0pE,EALAnC,EAASpB,EAAMoD,QAASzlE,EAAQpa,MACnC8/E,EAAmBpC,EAAmBtjE,EAAQvD,eAAgB+mE,EAAUC,GAEzEkC,EAAsBe,EAAa1mE,EAASkjE,GAG5C,MAAM3mE,EAAUyD,EAAQzD,QAExB,GAAKyD,EAAQ+mE,eAIZrB,EAAmB,KAEdp9B,EAIHo9B,EAvmrBa,OAqmrBT1lE,EAAQpa,KAEO,MAxmrBA,OA0mrBRoa,EAAQpa,KAEA,MAtmrBG,OAwmrBXoa,EAAQpa,KAEA,MAIA,MAnnrBN,OAynrBToa,EAAQpa,MAEZR,QAAQ0R,MAAO,gEA/mrBA,OAunrBZkJ,EAAQ9D,QAA+C,OAArBwpE,GAtorBhB,OA2orBjB1lE,EAAQpa,MAzorBO,OAyorBuBoa,EAAQpa,OAElDR,QAAQC,KAAM,+FAEd2a,EAAQpa,KA/orBa,KAgprBrB69E,EAASpB,EAAMoD,QAASzlE,EAAQpa,OAhorBV,OAsorBnBoa,EAAQ9D,QAAsD,OAArBwpE,IAI7CA,EAAmB,MAlprBI,OAuprBlB1lE,EAAQpa,OAEZR,QAAQC,KAAM,oFAEd2a,EAAQpa,KA3prBc,KA4prBtB69E,EAASpB,EAAMoD,QAASzlE,EAAQpa,QAQlCwwD,EAAMopB,WAAY,KAAM,EAAGkG,EAAkB1qE,EAAM/F,MAAO+F,EAAM9F,OAAQ,EAAGsuE,EAAUC,EAAQ,WAEvF,GAAKzjE,EAAQ4lC,cAMnB,GAAKrpC,EAAQpM,OAAS,GAAK+yE,EAAe,CAEzC,IAAM,IAAIjyE,EAAI,EAAG0W,EAAKpL,EAAQpM,OAAQc,EAAI0W,EAAI1W,IAE7C20E,EAASrpE,EAAStL,GAClBmlD,EAAMopB,WAAY,KAAMvuE,EAAGy0E,EAAkBE,EAAO3wE,MAAO2wE,EAAO1wE,OAAQ,EAAGsuE,EAAUC,EAAQmC,EAAO5sD,MAIvGhZ,EAAQpD,iBAAkB,EAC1BgnE,EAAkBR,cAAgB7mE,EAAQpM,OAAS,OAInDimD,EAAMopB,WAAY,KAAM,EAAGkG,EAAkB1qE,EAAM/F,MAAO+F,EAAM9F,OAAQ,EAAGsuE,EAAUC,EAAQzoE,EAAMge,MACnG4qD,EAAkBR,cAAgB,OAI7B,GAAKpjE,EAAQulE,oBAAsB,CAEzC,IAAM,IAAIt0E,EAAI,EAAG0W,EAAKpL,EAAQpM,OAAQc,EAAI0W,EAAI1W,IAE7C20E,EAASrpE,EAAStL,GAhsrBH,OAksrBV+O,EAAQ9D,QAnsrBC,OAmsrBwB8D,EAAQ9D,OAE3B,OAAbsnE,EAEJptB,EAAM4rB,qBAAsB,KAAM/wE,EAAGy0E,EAAkBE,EAAO3wE,MAAO2wE,EAAO1wE,OAAQ,EAAG0wE,EAAO5sD,MAI9F5zB,QAAQC,KAAM,kGAMf+wD,EAAMopB,WAAY,KAAMvuE,EAAGy0E,EAAkBE,EAAO3wE,MAAO2wE,EAAO1wE,OAAQ,EAAGsuE,EAAUC,EAAQmC,EAAO5sD,MAMxG4qD,EAAkBR,cAAgB7mE,EAAQpM,OAAS,OAE7C,GAAK6P,EAAQ2iD,qBAEnBvM,EAAM8rB,WAAY,MAAO,EAAGwD,EAAkB1qE,EAAM/F,MAAO+F,EAAM9F,OAAQ8F,EAAM0kC,MAAO,EAAG8jC,EAAUC,EAAQzoE,EAAMge,MACjH4qD,EAAkBR,cAAgB,OAE5B,GAAKpjE,EAAQ4iD,gBAEnBxM,EAAM8rB,WAAY,MAAO,EAAGwD,EAAkB1qE,EAAM/F,MAAO+F,EAAM9F,OAAQ8F,EAAM0kC,MAAO,EAAG8jC,EAAUC,EAAQzoE,EAAMge,MACjH4qD,EAAkBR,cAAgB,OAUlC,GAAK7mE,EAAQpM,OAAS,GAAK+yE,EAAe,CAEzC,IAAM,IAAIjyE,EAAI,EAAG0W,EAAKpL,EAAQpM,OAAQc,EAAI0W,EAAI1W,IAE7C20E,EAASrpE,EAAStL,GAClBmlD,EAAMopB,WAAY,KAAMvuE,EAAGy0E,EAAkBlC,EAAUC,EAAQmC,GAIhE5lE,EAAQpD,iBAAkB,EAC1BgnE,EAAkBR,cAAgB7mE,EAAQpM,OAAS,OAInDimD,EAAMopB,WAAY,KAAM,EAAGkG,EAAkBlC,EAAUC,EAAQzoE,GAC/D4oE,EAAkBR,cAAgB,EAM/BH,EAA6BjjE,EAASkjE,IAE1CC,EAAgBuD,EAAa1mE,EAAShF,EAAM/F,MAAO+F,EAAM9F,QAI1D0uE,EAAkBoB,UAAYhlE,EAAQhD,QAEjCgD,EAAQ/C,UAAW+C,EAAQ/C,SAAU+C,GAO3C,SAASgnE,EAAyBC,EAAa9iC,EAAc+iC,EAAYC,GAExE,MAAM3D,EAAWnB,EAAMoD,QAASthC,EAAankC,QAAQ9D,QAC/CunE,EAASpB,EAAMoD,QAASthC,EAAankC,QAAQpa,MAC7C8/E,EAAmBpC,EAAmBn/B,EAAankC,QAAQvD,eAAgB+mE,EAAUC,GAC3FrtB,EAAMopB,WAAY2H,EAAe,EAAGzB,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,OAAQ,EAAGsuE,EAAUC,EAAQ,MACpHrB,EAAIgF,gBAAiB,MAAOH,GAC5B7E,EAAIiF,qBAAsB,MAAOH,EAAYC,EAAel+E,EAAWH,IAAKq7C,EAAankC,SAAU+jE,eAAgB,GACnH3B,EAAIgF,gBAAiB,MAAO,MAK7B,SAASE,EAA0BC,EAAcpjC,EAAcqjC,GAI9D,GAFApF,EAAIqF,iBAAkB,MAAOF,GAExBpjC,EAAalkC,cAAiBkkC,EAAajkC,cAAgB,CAE/D,IAAIwlE,EAAmB,MAEvB,GAAK8B,EAAgB,CAEpB,MAAMrnE,EAAegkC,EAAahkC,aAE7BA,GAAgBA,EAAa4mE,iBA/yrBpB,OAizrBR5mE,EAAava,KAEjB8/E,EAAmB,MApzrBD,OAszrBPvlE,EAAava,OAExB8/E,EAAmB,QAMrB,MAAMrlE,EAAUqnE,EAAwBvjC,GAExCi+B,EAAIuF,+BAAgC,MAAOtnE,EAASqlE,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,aAIvGktE,EAAIwF,oBAAqB,MAAOlC,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,QAIpFktE,EAAIyF,wBAAyB,MAAO,MAAO,MAAON,QAE5C,GAAKpjC,EAAalkC,aAAekkC,EAAajkC,cAAgB,CAEpE,GAAKsnE,EAAgB,CAEpB,MAAMnnE,EAAUqnE,EAAwBvjC,GAExCi+B,EAAIuF,+BAAgC,MAAOtnE,EAAS,MAAO8jC,EAAalvC,MAAOkvC,EAAajvC,aAI5FktE,EAAIwF,oBAAqB,MAAO,MAAOzjC,EAAalvC,MAAOkvC,EAAajvC,QAKzEktE,EAAIyF,wBAAyB,MAAO,MAAO,MAAON,OAE5C,CAEN,MAAM/D,EAAWnB,EAAMoD,QAASthC,EAAankC,QAAQ9D,QAC/CunE,EAASpB,EAAMoD,QAASthC,EAAankC,QAAQpa,MAC7C8/E,EAAmBpC,EAAmBn/B,EAAankC,QAAQvD,eAAgB+mE,EAAUC,GAE3F,GAAK+D,EAAgB,CAEpB,MAAMnnE,EAAUqnE,EAAwBvjC,GAExCi+B,EAAIuF,+BAAgC,MAAOtnE,EAASqlE,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,aAIvGktE,EAAIwF,oBAAqB,MAAOlC,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,QAMrFktE,EAAIqF,iBAAkB,MAAO,MAkD9B,SAASK,EAAwB3jC,GAEhC,MAAMggC,EAAyBl7E,EAAWH,IAAKq7C,GAEzC4jC,GAAoD,IAAzC5jC,EAAaC,wBAE9B,GAAKD,EAAahkC,aAAe,CAEhC,GAAK4nE,EAAS,MAAM,IAAI3yE,MAAO,6DArDjC,SAA4B6xE,EAAa9iC,GAGxC,GADiBA,GAAgBA,EAAaC,wBAChC,MAAM,IAAIhvC,MAAO,2DAI/B,GAFAgtE,EAAIgF,gBAAiB,MAAOH,IAEnB9iC,EAAahkC,eAAgBgkC,EAAahkC,aAAa4mE,eAE/D,MAAM,IAAI3xE,MAAO,uEAKXnM,EAAWH,IAAKq7C,EAAahkC,cAAe4jE,gBACjD5/B,EAAahkC,aAAanF,MAAM/F,QAAUkvC,EAAalvC,OACvDkvC,EAAahkC,aAAanF,MAAM9F,SAAWivC,EAAajvC,SAEzDivC,EAAahkC,aAAanF,MAAM/F,MAAQkvC,EAAalvC,MACrDkvC,EAAahkC,aAAanF,MAAM9F,OAASivC,EAAajvC,OACtDivC,EAAahkC,aAAa20B,aAAc,GAIzC+vC,EAAc1gC,EAAahkC,aAAc,GAEzC,MAAM6nE,EAAoB/+E,EAAWH,IAAKq7C,EAAahkC,cAAe4jE,eAEtE,GAn4rBkB,OAm4rBb5/B,EAAahkC,aAAajE,OAE9BkmE,EAAIiF,qBAAsB,MAAO,MAAO,KAAMW,EAAmB,OAE3D,CAAA,GAt4rBkB,OAs4rBb7jC,EAAahkC,aAAajE,OAMrC,MAAM,IAAI9G,MAAO,+BAJjBgtE,EAAIiF,qBAAsB,MAAO,MAAO,KAAMW,EAAmB,IAqBjEC,CAAmB9D,EAAuBE,mBAAoBlgC,QAI9D,GAAK4jC,EAAS,CAEb5D,EAAuBG,mBAAqB,GAE5C,IAAM,IAAIrzE,EAAI,EAAGA,EAAI,EAAGA,IAEvBmxE,EAAIgF,gBAAiB,MAAOjD,EAAuBE,mBAAoBpzE,IACvEkzE,EAAuBG,mBAAoBrzE,GAAMmxE,EAAI8F,qBACrDZ,EAA0BnD,EAAuBG,mBAAoBrzE,GAAKkzC,GAAc,QAMzFi+B,EAAIgF,gBAAiB,MAAOjD,EAAuBE,oBACnDF,EAAuBG,mBAAqBlC,EAAI8F,qBAChDZ,EAA0BnD,EAAuBG,mBAAoBngC,GAAc,GAMrFi+B,EAAIgF,gBAAiB,MAAO,MAsL7B,SAASM,EAAwBvjC,GAEhC,OAASmE,GAAYnE,EAAa3jC,+BACjCrc,KAAK6N,IAAK2rD,EAAYxZ,EAAa9jC,SAAY,EAqBjD,IAAI8nE,GAAkB,EAClBC,GAAoB,EAyDxBthF,KAAK88D,oBA78BL,WAEC,MAAMykB,EAAczD,EAUpB,OARKyD,GAAevrB,GAEnB13D,QAAQC,KAAM,sCAAwCgjF,EAAc,+CAAiDvrB,GAItH8nB,GAAgB,EAETyD,GAk8BRvhF,KAAKwhF,kBAp9BL,WAEC1D,EAAe,GAo9BhB99E,KAAK+9E,aAAeA,EACpB/9E,KAAKs+D,kBA/5BL,SAA4BplD,EAAS8kE,GAEpC,MAAMlB,EAAoB36E,EAAWH,IAAKkX,GAErCA,EAAQhD,QAAU,GAAK4mE,EAAkBoB,YAAchlE,EAAQhD,QAEnEkoE,EAAetB,EAAmB5jE,EAAS8kE,IAK5C1uB,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,MAAOsE,EAAkBG,kBAo5B7Cj9E,KAAKw+D,aAh5BL,SAAuBtlD,EAAS8kE,GAE/B,MAAMlB,EAAoB36E,EAAWH,IAAKkX,GAErCA,EAAQhD,QAAU,GAAK4mE,EAAkBoB,YAAchlE,EAAQhD,QAEnEkoE,EAAetB,EAAmB5jE,EAAS8kE,IAK5C1uB,EAAMirB,cAAe,MAAQyD,GAC7B1uB,EAAMkpB,YAAa,MAAOsE,EAAkBG,kBAq4B7Cj9E,KAAKq+E,eAAiBA,EACtBr+E,KAAKg/E,sBAAwBA,EAC7Bh/E,KAAKyhF,kBA3QL,SAA4BpkC,GAE3B,MAAMggC,EAAyBl7E,EAAWH,IAAKq7C,GACzCy/B,EAAoB36E,EAAWH,IAAKq7C,EAAankC,SAEvDmkC,EAAar/C,iBAAkB,UAAWo/E,GAE1CN,EAAkBG,eAAiB3B,EAAI/C,gBAEvCtjB,EAAKsE,OAAO1iD,WAEZ,MAAMoqE,GAAoD,IAAzC5jC,EAAaC,wBACxBojC,GAAkE,IAAhDrjC,EAAa3jC,+BAC/B0iE,EAAexvE,EAAcywC,IAAkBmE,EAcrD,IAVKA,GAn9rBW,OAm9rBCnE,EAAankC,QAAQ9D,QA19rBtB,OA09rBgDioC,EAAankC,QAAQpa,MAz9rBjE,OAy9rBuFu+C,EAAankC,QAAQpa,OAE/Hu+C,EAAankC,QAAQ9D,OAp9rBL,KAs9rBhB9W,QAAQC,KAAM,4GAMV0iF,EAAS,CAEb5D,EAAuBE,mBAAqB,GAE5C,IAAM,IAAIpzE,EAAI,EAAGA,EAAI,EAAGA,IAEvBkzE,EAAuBE,mBAAoBpzE,GAAMmxE,EAAIoG,yBAQtD,GAFArE,EAAuBE,mBAAqBjC,EAAIoG,oBAE3ChB,EAEJ,GAAKl/B,EAAW,CAEf67B,EAAuBK,+BAAiCpC,EAAIoG,oBAC5DrE,EAAuBM,yBAA2BrC,EAAI8F,qBAEtD9F,EAAIqF,iBAAkB,MAAOtD,EAAuBM,0BAEpD,MAAMjB,EAAWnB,EAAMoD,QAASthC,EAAankC,QAAQ9D,QAC/CunE,EAASpB,EAAMoD,QAASthC,EAAankC,QAAQpa,MAC7C8/E,EAAmBpC,EAAmBn/B,EAAankC,QAAQvD,eAAgB+mE,EAAUC,GACrFpjE,EAAUqnE,EAAwBvjC,GACxCi+B,EAAIuF,+BAAgC,MAAOtnE,EAASqlE,EAAkBvhC,EAAalvC,MAAOkvC,EAAajvC,QAEvGktE,EAAIgF,gBAAiB,MAAOjD,EAAuBK,gCACnDpC,EAAIyF,wBAAyB,MAAO,MAAO,MAAO1D,EAAuBM,0BACzErC,EAAIqF,iBAAkB,MAAO,MAExBtjC,EAAalkC,cAEjBkkE,EAAuBO,yBAA2BtC,EAAI8F,qBACtDZ,EAA0BnD,EAAuBO,yBAA0BvgC,GAAc,IAI1Fi+B,EAAIgF,gBAAiB,MAAO,WAK5BhiF,QAAQC,KAAM,mFAUjB,GAAK0iF,EAAS,CAEb3xB,EAAMkpB,YAAa,MAAOsE,EAAkBG,gBAC5C4B,EAAsB,MAAOxhC,EAAankC,QAASkjE,GAEnD,IAAM,IAAIjyE,EAAI,EAAGA,EAAI,EAAGA,IAEvB+1E,EAAyB7C,EAAuBE,mBAAoBpzE,GAAKkzC,EAAc,MAAO,MAAQlzC,GAIlGgyE,EAA6B9+B,EAAankC,QAASkjE,IAEvDC,EAAgB,MAAOh/B,EAAankC,QAASmkC,EAAalvC,MAAOkvC,EAAajvC,QAI/EkhD,EAAMkpB,YAAa,MAAO,WAI1BlpB,EAAMkpB,YAAa,KAAMsE,EAAkBG,gBAC3C4B,EAAsB,KAAMxhC,EAAankC,QAASkjE,GAClD8D,EAAyB7C,EAAuBE,mBAAoBlgC,EAAc,MAAO,MAEpF8+B,EAA6B9+B,EAAankC,QAASkjE,IAEvDC,EAAgB,KAAMh/B,EAAankC,QAASmkC,EAAalvC,MAAOkvC,EAAajvC,QAI9EkhD,EAAMkpB,YAAa,KAAM,MAMrBn7B,EAAalkC,aAEjB6nE,EAAwB3jC,IAmJ1Br9C,KAAK2hF,yBA7IL,SAAmCtkC,GAElC,MAAMnkC,EAAUmkC,EAAankC,QAG7B,GAAKijE,EAA6BjjE,EAFbtM,EAAcywC,IAAkBmE,GAEO,CAE3D,MAAMx4C,EAASq0C,EAAaC,wBAA0B,MAAQ,KACxDy9B,EAAe54E,EAAWH,IAAKkX,GAAU+jE,eAE/C3tB,EAAMkpB,YAAaxvE,EAAQ+xE,GAC3BsB,EAAgBrzE,EAAQkQ,EAASmkC,EAAalvC,MAAOkvC,EAAajvC,QAClEkhD,EAAMkpB,YAAaxvE,EAAQ,QAkI7BhJ,KAAK4hF,8BA5HL,SAAwCvkC,GAEvC,GAAKA,EAAa3jC,+BAEjB,GAAK8nC,EAAW,CAEf,MAAM67B,EAAyBl7E,EAAWH,IAAKq7C,GAE/Ci+B,EAAIgF,gBAAiB,MAAOjD,EAAuBK,gCACnDpC,EAAIgF,gBAAiB,MAAOjD,EAAuBE,oBAEnD,MAAMpvE,EAAQkvC,EAAalvC,MACrBC,EAASivC,EAAajvC,OAC5B,IAAI+d,EAAO,MAENkxB,EAAalkC,cAAcgT,GAAQ,KACnCkxB,EAAajkC,gBAAgB+S,GAAQ,MAE1CmvD,EAAIuG,gBAAiB,EAAG,EAAG1zE,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,EAAQ+d,EAAM,MAErEmvD,EAAIgF,gBAAiB,MAAOjD,EAAuBK,qCAInDp/E,QAAQC,KAAM,oFAsGjByB,KAAKo+D,iBAnEL,SAA2BllD,EAAS8kE,GAE9B9kE,GAAWA,EAAQM,uBAEE,IAApB6nE,IAEJ/iF,QAAQC,KAAM,oHACd8iF,GAAkB,GAInBnoE,EAAUA,EAAQA,SAInB6kE,EAAc7kE,EAAS8kE,IAqDxBh+E,KAAK0+D,mBAjDL,SAA6BxlD,EAAS8kE,GAEhC9kE,GAAWA,EAAQokC,2BAEI,IAAtBgkC,IAEJhjF,QAAQC,KAAM,2HACd+iF,GAAoB,GAIrBpoE,EAAUA,EAAQA,SAMZA,GAAWA,EAAQ43C,eACvB7xD,MAAMkY,QAAS+B,EAAQhF,QAAoC,IAAzBgF,EAAQhF,MAAM7K,OAKlDg1E,EAAgBnlE,EAAS8kE,GAKzBgB,EAAuB9lE,EAAS8kE,IAyBnC,SAAS8D,GAAYxgC,EAAIvG,EAAYwG,GAEpC,MAAMC,EAAWD,EAAaC,SA2L9B,MAAO,CAAEm9B,QAzLT,SAAkBn+E,GAEjB,IAAI6wD,EAEJ,GA3usBuB,OA2usBlB7wD,EAAyB,OAAO,KACrC,GApusB4B,OAousBvBA,EAA8B,OAAO,MAC1C,GApusB4B,OAousBvBA,EAA8B,OAAO,MAC1C,GApusB2B,OAousBtBA,EAA6B,OAAO,MAEzC,GA/usBe,OA+usBVA,EAAiB,OAAO,KAC7B,GA/usBgB,OA+usBXA,EAAkB,OAAO,KAC9B,GA/usBwB,OA+usBnBA,EAA0B,OAAO,KACtC,GA/usBc,OA+usBTA,EAAgB,OAAO,KAC5B,GA/usBsB,OA+usBjBA,EAAwB,OAAO,KACpC,GA/usBgB,OA+usBXA,EAAkB,OAAO,KAE9B,GAhvsBoB,OAgvsBfA,EAEJ,OAAKghD,EAAkB,MAEvB6P,EAAYtW,EAAW/4C,IAAK,0BAET,OAAdqvD,EAEGA,EAAU0wB,eAIV,MAMT,GA7vsBkB,OA6vsBbvhF,EAAoB,OAAO,KAChC,GA7vsBgB,OA6vsBXA,EAAkB,OAAO,KAC9B,GA7vsBiB,OA6vsBZA,EAAmB,OAAO,KAC/B,GA7vsBsB,OA6vsBjBA,EAAwB,OAAO,KACpC,GA7vsB2B,OA6vsBtBA,EAA6B,OAAO,KACzC,GA5vsBkB,OA4vsBbA,EAAoB,OAAO,KAChC,GA5vsByB,OA4vsBpBA,EAA2B,OAAO,MACvC,GA5vsBgB,OA4vsBXA,EAAkB,OAAO,KAI9B,GA/vsBuB,OA+vsBlBA,EAAyB,OAAO,MACrC,GA/vsBe,OA+vsBVA,EAAiB,OAAO,MAC7B,GA/vsBsB,OA+vsBjBA,EAAwB,OAAO,MACpC,GA/vsBuB,OA+vsBlBA,EAAyB,OAAO,MACrC,GA/vsBwB,OA+vsBnBA,EAA0B,OAAO,MAEtC,GA/vsB2B,QA+vsBtBA,GA9vsBuB,QA8vsBOA,GA7vsBP,QA8vsB3BA,GA7vsB2B,QA6vsBIA,EAA8B,CAI7D,GAFA6wD,EAAYtW,EAAW/4C,IAAK,iCAET,OAAdqvD,EASJ,OAAO,KAPP,GAtwsByB,QAswsBpB7wD,EAA6B,OAAO6wD,EAAU2wB,6BACnD,GAtwsB0B,QAswsBrBxhF,EAA8B,OAAO6wD,EAAU4wB,8BACpD,GAtwsB0B,QAswsBrBzhF,EAA8B,OAAO6wD,EAAU6wB,8BACpD,GAtwsB0B,QAswsBrB1hF,EAA8B,OAAO6wD,EAAU8wB,8BAUtD,GA/wsB8B,QA+wsBzB3hF,GA9wsByB,QA8wsBQA,GA7wsBP,QA8wsB9BA,GA7wsB8B,QA6wsBIA,EAAiC,CAInE,GAFA6wD,EAAYtW,EAAW/4C,IAAK,kCAET,OAAdqvD,EASJ,OAAO,KAPP,GAtxsB4B,QAsxsBvB7wD,EAAgC,OAAO6wD,EAAU+wB,gCACtD,GAtxsB4B,QAsxsBvB5hF,EAAgC,OAAO6wD,EAAUgxB,gCACtD,GAtxsB6B,QAsxsBxB7hF,EAAiC,OAAO6wD,EAAUixB,iCACvD,GAtxsB6B,QAsxsBxB9hF,EAAiC,OAAO6wD,EAAUkxB,iCAUzD,GA/xsBsB,QA+xsBjB/hF,EAIJ,OAFA6wD,EAAYtW,EAAW/4C,IAAK,iCAET,OAAdqvD,EAEGA,EAAUmxB,0BAIV,KAMT,IA9ysBsB,QA8ysBjBhiF,GA7ysBsB,QA6ysBGA,KAE7B6wD,EAAYtW,EAAW/4C,IAAK,gCAET,OAAdqvD,GAAqB,CAEzB,GApzsBoB,QAozsBf7wD,EAAwB,OAAO6wD,EAAUoxB,qBAC9C,GApzsByB,QAozsBpBjiF,EAA6B,OAAO6wD,EAAUqxB,0BAMrD,OAzzsB2B,QAyzsBtBliF,GAxzsBsB,QAwzsBQA,GAvzsBR,QAuzsBsCA,GAtzsBtC,QAuzsB1BA,GAtzsB0B,QAszsBIA,GArzsBJ,QAqzsBkCA,GApzsBlC,QAqzsB1BA,GApzsB0B,QAozsBIA,GAnzsBH,QAmzsBiCA,GAlzsBjC,QAmzsB3BA,GAlzsB2B,QAkzsBIA,GAjzsBH,QAizsBkCA,GAhzsBlC,QAizsB5BA,GAhzsB4B,QAgzsBIA,GA9ysBE,QA+ysBlCA,GA9ysBkC,QA8ysBIA,GA7ysBJ,QA6ysB0CA,GA5ysB1C,QA6ysBlCA,GA5ysBkC,QA4ysBIA,GA3ysBJ,QA2ysB0CA,GA1ysB1C,QA2ysBlCA,GA1ysBkC,QA0ysBIA,GAzysBH,QAyysByCA,GAxysBzC,QAyysBnCA,GAxysBmC,QAwysBIA,GAvysBH,QAuysB0CA,GAtysB1C,QAuysBpCA,GAtysBoC,QAsysBIA,GAExC6wD,EAAYtW,EAAW/4C,IAAK,iCAET,OAAdqvD,EAIG7wD,EAIA,MAh0sBc,QAs0sBlBA,GAEJ6wD,EAAYtW,EAAW/4C,IAAK,gCAET,OAAdqvD,EAIG7wD,EAIA,MA33sBgB,OAi4sBpBA,EAECghD,EAAkB,OAEvB6P,EAAYtW,EAAW/4C,IAAK,uBAET,OAAdqvD,EAEGA,EAAUsxB,wBAIV,WAZT,IAwBF,SAASC,GAAa14E,GAErBuxC,GAAkB91C,KAAM3F,MAExBA,KAAKytE,QAAUvjE,GAAS,GAYzB,SAAS24E,KAER11D,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,QAYb,SAASgkF,KAER9iF,KAAK+iF,WAAa,KAClB/iF,KAAKgjF,MAAQ,KACbhjF,KAAKijF,MAAQ,KAmPd,SAASC,GAAcrlC,EAAUyD,GAEhC,MAAMzM,EAAQ70C,KAEd,IAAIuwD,EAAU,KAEV4yB,EAAyB,EAEzBC,EAAiB,KACjBC,EAAqB,cAErBC,EAAO,KAEX,MAAMC,EAAc,GACdC,EAAkB,IAAIziF,IAItB0iF,EAAU,IAAIhoC,GACpBgoC,EAAQp3D,OAAO0pD,OAAQ,GACvB0N,EAAQxqE,SAAW,IAAIzB,EAEvB,MAAMksE,EAAU,IAAIjoC,GACpBioC,EAAQr3D,OAAO0pD,OAAQ,GACvB2N,EAAQzqE,SAAW,IAAIzB,EAEvB,MAAMi2D,EAAU,CAAEgW,EAASC,GAErBC,EAAW,IAAIf,GACrBe,EAASt3D,OAAO0pD,OAAQ,GACxB4N,EAASt3D,OAAO0pD,OAAQ,GAExB,IAAI6N,EAAoB,KACpBC,EAAmB,KAuDvB,SAASC,EAAgB75E,GAExB,MAAM85E,EAAaP,EAAgBxhF,IAAKiI,EAAM+5E,aAEzCD,GAEJA,EAAW/5E,cAAe,CAAElL,KAAMmL,EAAMnL,OAM1C,SAASmlF,IAERT,EAAgBljF,SAAS,SAAWyjF,EAAYC,GAE/CD,EAAWG,WAAYF,MAIxBR,EAAgBplC,QAIhBP,EAASsmC,eAAgB,MACzBtmC,EAASK,gBAAiBL,EAASI,mBACnCmmC,EAAUnjC,OAEVpM,EAAMwvC,cAAe,EAErBxvC,EAAM7qC,cAAe,CAAElL,KAAM,eAI9B,SAASwlF,EAAyBzlF,GAEjCukF,EAAiBvkF,EAEjBulF,EAAUhjC,WAAYmP,GACtB6zB,EAAUtxD,QAEV+hB,EAAMwvC,cAAe,EAErBxvC,EAAM7qC,cAAe,CAAElL,KAAM,iBAqF9B,SAASylF,EAAoBt6E,GAE5B,MAAMu6E,EAAej0B,EAAQi0B,aAI7B,IAAM,IAAIr6E,EAAI,EAAGA,EAAIo5E,EAAYl6E,OAAQc,IAExCq5E,EAAgB3iF,IAAK2jF,EAAcr6E,GAAKo5E,EAAap5E,IAMtD,IAAM,IAAIA,EAAI,EAAGA,EAAIF,EAAMw6E,QAAQp7E,OAAQc,IAAO,CAEjD,MAAM65E,EAAc/5E,EAAMw6E,QAASt6E,GAC7B45E,EAAaP,EAAgBxhF,IAAKgiF,GAEnCD,IAEJA,EAAW/5E,cAAe,CAAElL,KAAM,eAAgBozB,KAAM8xD,IACxDR,EAAgB1hC,OAAQkiC,IAQ1B,IAAM,IAAI75E,EAAI,EAAGA,EAAIF,EAAMy6E,MAAMr7E,OAAQc,IAAO,CAE/C,MAAM65E,EAAc/5E,EAAMy6E,MAAOv6E,GAC3B45E,EAAaP,EAAgBxhF,IAAKgiF,GAEnCD,GAEJA,EAAW/5E,cAAe,CAAElL,KAAM,YAAaozB,KAAM8xD,KAxNxDhkF,KAAKu4C,SAAU,EAEfv4C,KAAKqkF,cAAe,EAEpBrkF,KAAK2kF,cAAgB,SAAWx7E,GAE/B,IAAI46E,EAAaR,EAAap6E,GAS9B,YAPoBxI,IAAfojF,IAEJA,EAAa,IAAIjB,GACjBS,EAAap6E,GAAU46E,GAIjBA,EAAWa,qBAInB5kF,KAAK6kF,kBAAoB,SAAW17E,GAEnC,IAAI46E,EAAaR,EAAap6E,GAS9B,YAPoBxI,IAAfojF,IAEJA,EAAa,IAAIjB,GACjBS,EAAap6E,GAAU46E,GAIjBA,EAAWe,gBAInB9kF,KAAK+kF,QAAU,SAAW57E,GAEzB,IAAI46E,EAAaR,EAAap6E,GAS9B,YAPoBxI,IAAfojF,IAEJA,EAAa,IAAIjB,GACjBS,EAAap6E,GAAU46E,GAIjBA,EAAWiB,gBAqDnBhlF,KAAKilF,0BAA4B,SAAWpmF,GAE3CskF,EAAyBtkF,GAEG,IAAvBg2C,EAAMwvC,cAEV/lF,QAAQC,KAAM,0EAMhByB,KAAKklF,sBAAwB,SAAWrmF,GAEvCwkF,EAAqBxkF,GAEO,IAAvBg2C,EAAMwvC,cAEV/lF,QAAQC,KAAM,6EAMhByB,KAAKmlF,kBAAoB,WAExB,OAAO/B,GAIRpjF,KAAKwwD,WAAa,WAEjB,OAAOD,GAIRvwD,KAAKolF,WAAa,SAAWvmF,GAI5B,GAFA0xD,EAAU1xD,EAEO,OAAZ0xD,EAAmB,CAEvBA,EAAQvyD,iBAAkB,SAAU8lF,GACpCvzB,EAAQvyD,iBAAkB,cAAe8lF,GACzCvzB,EAAQvyD,iBAAkB,YAAa8lF,GACvCvzB,EAAQvyD,iBAAkB,UAAW8lF,GACrCvzB,EAAQvyD,iBAAkB,eAAgB8lF,GAC1CvzB,EAAQvyD,iBAAkB,aAAc8lF,GACxCvzB,EAAQvyD,iBAAkB,MAAOimF,GAEjC,MAAM7jF,EAAakhD,EAAG+jC,wBAEW,IAA5BjlF,EAAWklF,cAEfhkC,EAAGikC,mBAIJ,MAAMC,EAAY,CACjBC,UAAWrlF,EAAWqlF,UACtBl2E,MAAOnP,EAAWmP,MAClBqpC,MAAOx4C,EAAWw4C,MAClByF,QAASj+C,EAAWi+C,QACpB8kC,uBAAwBA,GAInBuC,EAAY,IAAIC,aAAcp1B,EAASjP,EAAIkkC,GAEjDj1B,EAAQq1B,kBAAmB,CAAEF,UAAWA,IAExCn1B,EAAQs1B,sBAAuBxC,GAAqByC,KAAMxB,GAI1D/zB,EAAQvyD,iBAAkB,qBAAsBumF,KAqDlD,MAAMwB,EAAa,IAAIvoE,EACjBwoE,EAAa,IAAIxoE,EAyDvB,SAASyoE,EAAc3nE,EAAQ8O,GAEd,OAAXA,EAEJ9O,EAAOK,YAAYlI,KAAM6H,EAAO5L,QAIhC4L,EAAOK,YAAY1N,iBAAkBmc,EAAOzO,YAAaL,EAAO5L,QAIjE4L,EAAOE,mBAAmBpL,WAAYkL,EAAOK,aAI9C3e,KAAKkmF,UAAY,SAAW5nE,GAE3BqlE,EAASr4D,KAAOo4D,EAAQp4D,KAAOm4D,EAAQn4D,KAAOhN,EAAOgN,KACrDq4D,EAASp4D,IAAMm4D,EAAQn4D,IAAMk4D,EAAQl4D,IAAMjN,EAAOiN,IAE7Cq4D,IAAsBD,EAASr4D,MAAQu4D,IAAqBF,EAASp4D,MAIzEglC,EAAQq1B,kBAAmB,CAC1BO,UAAWxC,EAASr4D,KACpB86D,SAAUzC,EAASp4D,MAGpBq4D,EAAoBD,EAASr4D,KAC7Bu4D,EAAmBF,EAASp4D,KAI7B,MAAM6B,EAAS9O,EAAO8O,OAChBqgD,EAAUkW,EAASlW,QAEzBwY,EAActC,EAAUv2D,GAExB,IAAM,IAAIjjB,EAAI,EAAGA,EAAIsjE,EAAQpkE,OAAQc,IAEpC87E,EAAcxY,EAAStjE,GAAKijB,GAM7B9O,EAAOK,YAAYlI,KAAMktE,EAAShlE,aAElC,MAAMoD,EAAWzD,EAAOyD,SAExB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C4X,EAAU5X,GAAIkmB,mBAAmB,GAkBlC,OAZwB,IAAnBo9C,EAAQpkE,OA7Gd,SAAiCiV,EAAQmlE,EAASC,GAEjDqC,EAAWt2D,sBAAuBg0D,EAAQ9kE,aAC1CqnE,EAAWv2D,sBAAuBi0D,EAAQ/kE,aAE1C,MAAM0nE,EAAMN,EAAW/hE,WAAYgiE,GAE7BM,EAAQ7C,EAAQhlE,iBAAiB9P,SACjC43E,EAAQ7C,EAAQjlE,iBAAiB9P,SAKjC2c,EAAOg7D,EAAO,KAASA,EAAO,IAAO,GACrC/6D,EAAM+6D,EAAO,KAASA,EAAO,IAAO,GACpCE,GAAWF,EAAO,GAAM,GAAMA,EAAO,GACrCG,GAAcH,EAAO,GAAM,GAAMA,EAAO,GAExCI,GAAYJ,EAAO,GAAM,GAAMA,EAAO,GACtCK,GAAaJ,EAAO,GAAM,GAAMA,EAAO,GACvCr7D,EAAOI,EAAOo7D,EACdv7D,EAAQG,EAAOq7D,EAIfC,EAAUP,IAAUK,EAAUC,GAC9BE,EAAUD,GAAYF,EAG5BjD,EAAQ9kE,YAAY2P,UAAWhQ,EAAO8L,SAAU9L,EAAO/C,WAAY+C,EAAO+L,OAC1E/L,EAAO6Q,WAAY03D,GACnBvoE,EAAO+Q,WAAYu3D,GACnBtoE,EAAOK,YAAYiK,QAAStK,EAAO8L,SAAU9L,EAAO/C,WAAY+C,EAAO+L,OACvE/L,EAAOE,mBAAmBpL,WAAYkL,EAAOK,aAK7C,MAAMmoE,EAAQx7D,EAAOs7D,EACfG,EAAOx7D,EAAMq7D,EACbI,EAAQ97D,EAAO27D,EACfI,EAAS97D,GAAUk7D,EAAMQ,GACzBK,EAAOV,EAASj7D,EAAMw7D,EAAOD,EAC7BK,EAAUV,EAAYl7D,EAAMw7D,EAAOD,EAEzCxoE,EAAOG,iBAAiB0+B,gBAAiB6pC,EAAOC,EAAQC,EAAMC,EAASL,EAAOC,GAkE7EK,CAAwBzD,EAAUF,EAASC,GAM3CC,EAASllE,iBAAiBhI,KAAMgtE,EAAQhlE,kBAIlCklE,GAMR,IAAI0D,EAA2B,KAmE/B,MAAMjD,EAAY,IAAI3jC,GACtB2jC,EAAUjjC,kBAlEV,SAA2BL,EAAMC,GAIhC,GAFAuiC,EAAOviC,EAAMumC,cAAelE,GAEd,OAATE,EAAgB,CAEpB,MAAMiE,EAAQjE,EAAKiE,MACb7B,EAAYn1B,EAAQ2gB,YAAYwU,UAEtC7nC,EAASsmC,eAAgBuB,EAAUvF,aAEnC,IAAIqH,GAAsB,EAIrBD,EAAMl+E,SAAWs6E,EAASlW,QAAQpkE,SAEtCs6E,EAASlW,QAAQpkE,OAAS,EAC1Bm+E,GAAsB,GAIvB,IAAM,IAAIr9E,EAAI,EAAGA,EAAIo9E,EAAMl+E,OAAQc,IAAO,CAEzC,MAAM2xC,EAAOyrC,EAAOp9E,GACd8O,EAAWysE,EAAU1Q,YAAal5B,GAElCx9B,EAASmvD,EAAStjE,GACxBmU,EAAO5L,OAAO/B,UAAWmrC,EAAK2rC,UAAU/0E,QACxC4L,EAAOG,iBAAiB9N,UAAWmrC,EAAKr9B,kBACxCH,EAAOrF,SAASpY,IAAKoY,EAASrQ,EAAGqQ,EAASpN,EAAGoN,EAAS9K,MAAO8K,EAAS7K,QAE3D,IAANjE,GAEJw5E,EAASjxE,OAAO+D,KAAM6H,EAAO5L,SAID,IAAxB80E,GAEJ7D,EAASlW,QAAQtvE,KAAMmgB,IAU1B,MAAMkmE,EAAej0B,EAAQi0B,aAE7B,IAAM,IAAIr6E,EAAI,EAAGA,EAAIo5E,EAAYl6E,OAAQc,IAAO,CAE/C,MAAM45E,EAAaR,EAAap5E,GAC1B65E,EAAcQ,EAAcr6E,GAElC45E,EAAWl/E,OAAQm/E,EAAajjC,EAAOqiC,GAInCiE,GAA2BA,EAA0BvmC,EAAMC,MAOjE/gD,KAAKmhD,iBAAmB,SAAW5jC,GAElC8pE,EAA2B9pE,GAI5Bvd,KAAKoX,QAAU,aAMhB,SAASswE,GAAgBvlF,GAyGxB,SAASwlF,EAAuBrtC,EAAUzoB,GAEzCyoB,EAASlY,QAAQvjC,MAAQgzB,EAASuQ,QAE7BvQ,EAASwO,OAEbia,EAAS4Q,QAAQrsD,MAAM4X,KAAMob,EAASwO,OAIlCxO,EAASmU,UAEbsU,EAAStU,SAASnnC,MAAM4X,KAAMob,EAASmU,UAAWt3B,eAAgBmjB,EAASoU,mBAIvEpU,EAASwS,MAEbiW,EAASjW,IAAIxlC,MAAQgzB,EAASwS,KAI1BxS,EAAS8S,WAEb2V,EAAS3V,SAAS9lC,MAAQgzB,EAAS8S,UAI/B9S,EAAS6S,cAEb4V,EAAS5V,YAAY7lC,MAAQgzB,EAAS6S,aAIvC,MAAME,EAASziC,EAAWH,IAAK6vB,GAAW+S,OAE1C,GAAKA,EAAS,CAEb0V,EAAS1V,OAAO/lC,MAAQ+lC,EAExB0V,EAASiR,WAAW1sD,MAAQ+lC,EAAOksB,eAAkB,EAAI,EAEzDxW,EAASxV,aAAajmC,MAAQgzB,EAASiT,aACvCwV,EAASvV,gBAAgBlmC,MAAQgzB,EAASkT,gBAE1C,MAAMymB,EAAcrpD,EAAWH,IAAK4iC,GAAS03C,mBAExB37E,IAAhB6qD,IAEJlR,EAASkR,YAAY3sD,MAAQ2sD,GAkC/B,IAAIo8B,EA2EAC,EAvGCh2D,EAASyS,WAEbgW,EAAShW,SAASzlC,MAAQgzB,EAASyS,SACnCgW,EAAS/V,kBAAkB1lC,MAAQgzB,EAAS0S,mBAIxC1S,EAAS2S,QAEb8V,EAAS9V,MAAM3lC,MAAQgzB,EAAS2S,MAChC8V,EAAS7V,eAAe5lC,MAAQgzB,EAAS4S,gBAoBrC5S,EAASwS,IAEbujD,EAAa/1D,EAASwS,IAEXxS,EAAS6S,YAEpBkjD,EAAa/1D,EAAS6S,YAEX7S,EAASmV,gBAEpB4gD,EAAa/1D,EAASmV,gBAEXnV,EAASgV,UAEpB+gD,EAAa/1D,EAASgV,UAEXhV,EAAS8U,QAEpBihD,EAAa/1D,EAAS8U,QAEX9U,EAASsV,aAEpBygD,EAAa/1D,EAASsV,aAEXtV,EAASuV,aAEpBwgD,EAAa/1D,EAASuV,aAEXvV,EAAS8S,SAEpBijD,EAAa/1D,EAAS8S,SAEX9S,EAASwV,YAEpBugD,EAAa/1D,EAASwV,YAEXxV,EAASyU,aAEpBshD,EAAa/1D,EAASyU,aAEXzU,EAAS2U,mBAEpBohD,EAAa/1D,EAAS2U,mBAEX3U,EAAS0U,wBAEpBqhD,EAAa/1D,EAAS0U,4BAIH5lC,IAAfinF,IAGCA,EAAWpuE,sBAEfouE,EAAaA,EAAW1uE,UAIY,IAAhC0uE,EAAW/xE,kBAEf+xE,EAAWtxE,eAIZgkC,EAAS6Q,YAAYtsD,MAAM4X,KAAMmxE,EAAWl1E,SAUxCmf,EAAS2S,MAEbqjD,EAAch2D,EAAS2S,MAEZ3S,EAASyS,WAEpBujD,EAAch2D,EAASyS,eAIH3jC,IAAhBknF,IAGCA,EAAYruE,sBAEhBquE,EAAcA,EAAY3uE,UAIW,IAAjC2uE,EAAYhyE,kBAEhBgyE,EAAYvxE,eAIbgkC,EAAS8Q,aAAavsD,MAAM4X,KAAMoxE,EAAYn1E,SA6MhD,SAASo1E,EAAyBxtC,EAAUzoB,GAE3CyoB,EAASzU,UAAUhnC,MAAQgzB,EAASgU,UACpCyU,EAASxU,UAAUjnC,MAAQgzB,EAASiU,UAE/BjU,EAASsV,eAEbmT,EAASnT,aAAatoC,MAAQgzB,EAASsV,cAInCtV,EAASuV,eAEbkT,EAASlT,aAAavoC,MAAQgzB,EAASuV,cAInCvV,EAASwV,cAEbiT,EAASjT,YAAYxoC,MAAQgzB,EAASwV,aAIlCxV,EAAS8U,UAEb2T,EAAS3T,QAAQ9nC,MAAQgzB,EAAS8U,QAClC2T,EAAS1T,UAAU/nC,MAAQgzB,EAAS+U,UAhuvBtB,IAiuvBT/U,EAASqQ,OAAoBoY,EAAS1T,UAAU/nC,QAAW,IAI5DgzB,EAASgV,YAEbyT,EAASzT,UAAUhoC,MAAQgzB,EAASgV,UACpCyT,EAASvT,YAAYloC,MAAM4X,KAAMob,EAASkV,aAxuvB5B,IAyuvBTlV,EAASqQ,MAAoBoY,EAASvT,YAAYloC,MAAM8zB,UAIzDd,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAI7B/kC,EAAWH,IAAK6vB,GAAW+S,SAKzC0V,EAAShT,gBAAgBzoC,MAAQgzB,EAASyV,iBA6I5C,MAAO,CACNygD,mBA/qBD,SAA6BztC,EAAUtY,GAEtCsY,EAAS+R,SAASxtD,MAAM4X,KAAMurB,EAAI3B,OAE7B2B,EAAIgmD,OAER1tC,EAAS6R,QAAQttD,MAAQmjC,EAAI1W,KAC7BgvB,EAAS8R,OAAOvtD,MAAQmjC,EAAIzW,KAEjByW,EAAI2pC,YAEfrxB,EAAS4R,WAAWrtD,MAAQmjC,EAAIimD,UAqqBjCC,wBA/pBD,SAAkC5tC,EAAUzoB,EAAUs2D,EAAY/5E,GAE5DyjB,EAASkW,oBAEb4/C,EAAuBrtC,EAAUzoB,GAEtBA,EAASu2D,uBAEpBT,EAAuBrtC,EAAUzoB,GA6XnC,SAAiCyoB,EAAUzoB,GAErCA,EAASwV,cAEbiT,EAASjT,YAAYxoC,MAAQgzB,EAASwV,aAhYtCghD,CAAwB/tC,EAAUzoB,IAEvBA,EAASy2D,oBAEpBX,EAAuBrtC,EAAUzoB,GAuanC,SAA8ByoB,EAAUzoB,GAElCA,EAAS0V,cAEb+S,EAAS/S,YAAY1oC,MAAQgzB,EAAS0V,aAIlC1V,EAASwV,cAEbiT,EAASjT,YAAYxoC,MAAQgzB,EAASwV,aAIlCxV,EAAS8U,UAEb2T,EAAS3T,QAAQ9nC,MAAQgzB,EAAS8U,QAClC2T,EAAS1T,UAAU/nC,MAAQgzB,EAAS+U,UA/qvBtB,IAgrvBT/U,EAASqQ,OAAoBoY,EAAS1T,UAAU/nC,QAAW,IAI5DgzB,EAASgV,YAEbyT,EAASzT,UAAUhoC,MAAQgzB,EAASgV,UACpCyT,EAASvT,YAAYloC,MAAM4X,KAAMob,EAASkV,aAvrvB5B,IAwrvBTlV,EAASqQ,MAAoBoY,EAASvT,YAAYloC,MAAM8zB,UAIzDd,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAxc3CqhD,CAAqBjuC,EAAUzoB,IAEpBA,EAAS22D,qBAEpBb,EAAuBrtC,EAAUzoB,GA6XnC,SAA+ByoB,EAAUzoB,GAExCyoB,EAASpU,SAASrnC,MAAM4X,KAAMob,EAASqU,UACvCoU,EAASnU,UAAUtnC,MAAQxB,KAAK8N,IAAK0mB,EAASsU,UAAW,MAEpDtU,EAASwV,cAEbiT,EAASjT,YAAYxoC,MAAQgzB,EAASwV,aAIlCxV,EAAS8U,UAEb2T,EAAS3T,QAAQ9nC,MAAQgzB,EAAS8U,QAClC2T,EAAS1T,UAAU/nC,MAAQgzB,EAAS+U,UAvovBtB,IAwovBT/U,EAASqQ,OAAoBoY,EAAS1T,UAAU/nC,QAAW,IAI5DgzB,EAASgV,YAEbyT,EAASzT,UAAUhoC,MAAQgzB,EAASgV,UACpCyT,EAASvT,YAAYloC,MAAM4X,KAAMob,EAASkV,aA/ovB5B,IAgpvBTlV,EAASqQ,MAAoBoY,EAASvT,YAAYloC,MAAM8zB,UAIzDd,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBA3Z3CuhD,CAAsBnuC,EAAUzoB,IAErBA,EAASw5C,wBAEpBsc,EAAuBrtC,EAAUzoB,GAE5BA,EAAS62D,uBA6fhB,SAAkCpuC,EAAUzoB,GAE3Ci2D,EAAyBxtC,EAAUzoB,GAEnCyoB,EAASxV,aAAajmC,MAAQgzB,EAASiT,aAEvCwV,EAASlU,UAAUvnC,MAAQgzB,EAASuU,UACpCkU,EAASjU,mBAAmBxnC,MAAQgzB,EAASwU,mBACxCxU,EAASkU,OAAQuU,EAASvU,MAAMlnC,MAAM4X,KAAMob,EAASkU,OAErDlU,EAASyU,eAEbgU,EAAShU,aAAaznC,MAAQgzB,EAASyU,cAInCzU,EAAS0U,wBAEb+T,EAAS/T,sBAAsB1nC,MAAQgzB,EAAS0U,uBAI5C1U,EAAS2U,qBAEb8T,EAAS7T,qBAAqB5nC,MAAM4X,KAAMob,EAAS4U,sBACnD6T,EAAS9T,mBAAmB3nC,MAAQgzB,EAAS2U,mBAzxvB/B,IA2xvBT3U,EAASqQ,MAEboY,EAAS7T,qBAAqB5nC,MAAM8zB,UAMtC2nB,EAASqhB,aAAa98D,MAAQgzB,EAAS8pC,aAElC9pC,EAAS+pC,kBAEbthB,EAASshB,gBAAgB/8D,MAAQgzB,EAAS+pC,iBAliBzC+sB,CAAyBruC,EAAUzoB,GAInCi2D,EAAyBxtC,EAAUzoB,IAIzBA,EAAS+2D,sBAEpBjB,EAAuBrtC,EAAUzoB,GA8hBnC,SAAgCyoB,EAAUzoB,GAEpCA,EAAS6U,SAEb4T,EAAS5T,OAAO7nC,MAAQgzB,EAAS6U,QAI7B7U,EAAS8U,UAEb2T,EAAS3T,QAAQ9nC,MAAQgzB,EAAS8U,QAClC2T,EAAS1T,UAAU/nC,MAAQgzB,EAAS+U,UAxzvBtB,IAyzvBT/U,EAASqQ,OAAoBoY,EAAS1T,UAAU/nC,QAAW,IAI5DgzB,EAASgV,YAEbyT,EAASzT,UAAUhoC,MAAQgzB,EAASgV,UACpCyT,EAASvT,YAAYloC,MAAM4X,KAAMob,EAASkV,aAh0vB5B,IAi0vBTlV,EAASqQ,MAAoBoY,EAASvT,YAAYloC,MAAM8zB,UAIzDd,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAzjB3C2hD,CAAuBvuC,EAAUzoB,IAEtBA,EAASs/C,qBAEpBwW,EAAuBrtC,EAAUzoB,GA2jBnC,SAA+ByoB,EAAUzoB,GAEnCA,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAhkB3C4hD,CAAsBxuC,EAAUzoB,IAErBA,EAASu/C,wBAEpBuW,EAAuBrtC,EAAUzoB,GAkkBnC,SAAkCyoB,EAAUzoB,GAEtCA,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAI5CoT,EAAS0U,kBAAkBnwD,MAAM4X,KAAMob,EAASm9B,mBAChD1U,EAAS2U,aAAapwD,MAAQgzB,EAASo9B,aACvC3U,EAAS4U,YAAYrwD,MAAQgzB,EAASq9B,YA7kBrC65B,CAAyBzuC,EAAUzoB,IAExBA,EAASm3D,sBAEpBrB,EAAuBrtC,EAAUzoB,GA6kBnC,SAAgCyoB,EAAUzoB,GAEpCA,EAAS8U,UAEb2T,EAAS3T,QAAQ9nC,MAAQgzB,EAAS8U,QAClC2T,EAAS1T,UAAU/nC,MAAQgzB,EAAS+U,UAh3vBtB,IAi3vBT/U,EAASqQ,OAAoBoY,EAAS1T,UAAU/nC,QAAW,IAI5DgzB,EAASgV,YAEbyT,EAASzT,UAAUhoC,MAAQgzB,EAASgV,UACpCyT,EAASvT,YAAYloC,MAAM4X,KAAMob,EAASkV,aAx3vB5B,IAy3vBTlV,EAASqQ,MAAoBoY,EAASvT,YAAYloC,MAAM8zB,UAIzDd,EAASmV,kBAEbsT,EAAStT,gBAAgBnoC,MAAQgzB,EAASmV,gBAC1CsT,EAASrT,kBAAkBpoC,MAAQgzB,EAASoV,kBAC5CqT,EAASpT,iBAAiBroC,MAAQgzB,EAASqV,kBAlmB3C+hD,CAAuB3uC,EAAUzoB,IAEtBA,EAASq3D,qBA8NtB,SAA8B5uC,EAAUzoB,GAEvCyoB,EAAS4Q,QAAQrsD,MAAM4X,KAAMob,EAASwO,OACtCia,EAASlY,QAAQvjC,MAAQgzB,EAASuQ,QA/NjC+mD,CAAqB7uC,EAAUzoB,GAE1BA,EAASu3D,sBAiOhB,SAA8B9uC,EAAUzoB,GAEvCyoB,EAAS5S,SAAS7oC,MAAQgzB,EAAS6V,SACnC4S,EAASoU,UAAU7vD,MAAQgzB,EAAS6V,SAAW7V,EAAS8V,QACxD2S,EAASjwB,MAAMxrB,MAAQgzB,EAASxH,MAnO9Bg/D,CAAqB/uC,EAAUzoB,IAIrBA,EAASy3D,iBAmOtB,SAAgChvC,EAAUzoB,EAAUs2D,EAAY/5E,GAE/DksC,EAAS4Q,QAAQrsD,MAAM4X,KAAMob,EAASwO,OACtCia,EAASlY,QAAQvjC,MAAQgzB,EAASuQ,QAClCkY,EAASp1C,KAAKrG,MAAQgzB,EAAS3sB,KAAOijF,EACtC7tC,EAASjwB,MAAMxrB,MAAiB,GAATuP,EAElByjB,EAASwS,MAEbiW,EAASjW,IAAIxlC,MAAQgzB,EAASwS,KAI1BxS,EAAS8S,WAEb2V,EAAS3V,SAAS9lC,MAAQgzB,EAAS8S,UAQpC,IAAIijD,EAEC/1D,EAASwS,IAEbujD,EAAa/1D,EAASwS,IAEXxS,EAAS8S,WAEpBijD,EAAa/1D,EAAS8S,eAIHhkC,IAAfinF,KAEiC,IAAhCA,EAAW/xE,kBAEf+xE,EAAWtxE,eAIZgkC,EAAS6Q,YAAYtsD,MAAM4X,KAAMmxE,EAAWl1E,SA5Q5C62E,CAAuBjvC,EAAUzoB,EAAUs2D,EAAY/5E,GAE5CyjB,EAAS23D,iBAgRtB,SAAiClvC,EAAUzoB,GAE1CyoB,EAAS4Q,QAAQrsD,MAAM4X,KAAMob,EAASwO,OACtCia,EAASlY,QAAQvjC,MAAQgzB,EAASuQ,QAClCkY,EAAS3mC,SAAS9U,MAAQgzB,EAASle,SAE9Bke,EAASwS,MAEbiW,EAASjW,IAAIxlC,MAAQgzB,EAASwS,KAI1BxS,EAAS8S,WAEb2V,EAAS3V,SAAS9lC,MAAQgzB,EAAS8S,UAQpC,IAAIijD,EAEC/1D,EAASwS,IAEbujD,EAAa/1D,EAASwS,IAEXxS,EAAS8S,WAEpBijD,EAAa/1D,EAAS8S,eAIHhkC,IAAfinF,KAEiC,IAAhCA,EAAW/xE,kBAEf+xE,EAAWtxE,eAIZgkC,EAAS6Q,YAAYtsD,MAAM4X,KAAMmxE,EAAWl1E,SAxT5C+2E,CAAwBnvC,EAAUzoB,GAEvBA,EAAS63D,kBAEpBpvC,EAASja,MAAMxhC,MAAM4X,KAAMob,EAASwO,OACpCia,EAASlY,QAAQvjC,MAAQgzB,EAASuQ,SAEvBvQ,EAASqqB,mBAEpBrqB,EAASypB,oBAAqB,KAolBjC,SAASquC,GAAeh4D,GAIvB,MAAM5d,OAAgCpT,KAFtCgxB,EAAaA,GAAc,IAEAtd,OAAuBsd,EAAWtd,OAASxM,SAASyM,gBAAiB,+BAAgC,UAC/Hs1E,OAAkCjpF,IAAvBgxB,EAAWpd,QAAwBod,EAAWpd,QAAU,KAEnEs1E,OAA8BlpF,IAArBgxB,EAAWpiB,OAAsBoiB,EAAWpiB,MACrDu6E,OAA8BnpF,IAArBgxB,EAAWinB,OAAsBjnB,EAAWinB,MACrDmxC,OAAkCppF,IAAvBgxB,EAAW0sB,SAAwB1sB,EAAW0sB,QACzD2rC,OAAsCrpF,IAAzBgxB,EAAW8zD,WAA0B9zD,EAAW8zD,UAC7DwE,OAAwDtpF,IAAlCgxB,EAAWuS,oBAAmCvS,EAAWuS,mBAC/EgmD,OAA8DvpF,IAArCgxB,EAAWw4D,uBAAsCx4D,EAAWw4D,sBACrFC,OAAkDzpF,IAA/BgxB,EAAW04D,gBAAgC14D,EAAW04D,gBAAkB,UAC3FC,OAA4E3pF,IAA5CgxB,EAAW44D,8BAA6C54D,EAAW44D,6BAEpG,IAAI5xB,EAAoB,KACpBE,EAAqB,KAIzB74D,KAAKwqF,WAAaz2E,EAGlB/T,KAAK2oE,MAAQ,CAMZC,mBAAmB,GAKpB5oE,KAAK0wD,WAAY,EACjB1wD,KAAK2wD,gBAAiB,EACtB3wD,KAAK4wD,gBAAiB,EACtB5wD,KAAK6wD,kBAAmB,EAIxB7wD,KAAKyqF,aAAc,EAInBzqF,KAAKujC,eAAiB,GACtBvjC,KAAKi3D,sBAAuB,EAI5Bj3D,KAAK2gC,YAAc,EACnB3gC,KAAKmoE,eAtzvBiB,IA0zvBtBnoE,KAAK6nE,yBAA0B,EAI/B7nE,KAAKgxD,YAt6vBgB,EAu6vBrBhxD,KAAK0qF,oBAAsB,EAI3B1qF,KAAK4rE,gBAAkB,EACvB5rE,KAAK6rE,gBAAkB,EAIvB,MAAM8e,EAAQ3qF,KAEd,IAAI4qF,GAAiB,EAIjBC,EAAe,KAEfC,EAAyB,EACzBC,EAA4B,EAC5BC,EAAuB,KACvBC,EAAsB,KACtBC,GAAuB,EAEvBC,EAAiB,KACjBC,EAAsB,KAE1B,MAAMC,EAAmB,IAAI7zE,EACvB8zE,EAAkB,IAAI9zE,EAC5B,IAAI+zE,EAAsB,KAItBC,EAASz3E,EAAQ5F,MACjBs9E,EAAU13E,EAAQ3F,OAElBs9E,EAAc,EACdC,EAAc,KACdC,EAAmB,KAEvB,MAAMja,EAAY,IAAIn6D,EAAS,EAAG,EAAGg0E,EAAQC,GACvCI,EAAW,IAAIr0E,EAAS,EAAG,EAAGg0E,EAAQC,GAC5C,IAAIK,GAAe,EAInB,MAAMta,EAAW,IAAIvyB,GAIrB,IAAI8sC,GAAmB,EACnBC,GAAwB,EAI5B,MAAMC,EAAoB,IAAI3kE,GAExB4kE,EAAW,IAAI1uE,EAEf2uE,EAAc,CAAEx9B,WAAY,KAAM3sB,IAAK,KAAMopC,YAAa,KAAMghB,iBAAkB,KAAM97B,SAAS,GAEvG,SAAS+7B,IAER,OAAgC,OAAzBrB,EAAgCU,EAAc,EAMtD,IAiFI3wC,EAAYwG,EAAc+N,EAAO2F,EACjC9yD,EAAY0U,EAAUw4C,EAAUjvD,EAAY4wB,EAAYu+B,GACxD+8B,GAAcr7D,GAAWs7D,GAAatb,GAAcn2B,GAEpD6T,GAAY69B,GAAcC,GAAgBC,GAE1CnR,GAAOhqB,GAvFP+pB,GAAMsO,EAEV,SAASp1E,GAAYm4E,EAAcC,GAElC,IAAM,IAAIziF,EAAI,EAAGA,EAAIwiF,EAAatjF,OAAQc,IAAO,CAEhD,MAAM0iF,EAAcF,EAAcxiF,GAC5BoK,EAAUR,EAAQS,WAAYq4E,EAAaD,GACjD,GAAiB,OAAZr4E,EAAmB,OAAOA,EAIhC,OAAO,KAIR,IAEC,MAAMq4E,EAAoB,CACzBr9E,MAAOs6E,EACPjxC,MAAOkxC,EACPzrC,QAAS0rC,EACTtE,UAAWuE,EACX9lD,mBAAoB+lD,EACpBE,sBAAuBD,EACvBG,gBAAiBD,EACjBG,6BAA8BD,GAQ/B,GAHAv2E,EAAQ/V,iBAAkB,mBAAoB8uF,IAAe,GAC7D/4E,EAAQ/V,iBAAkB,uBAAwB+uF,IAAkB,GAEvD,OAARzR,GAAe,CAEnB,MAAMqR,EAAe,CAAE,SAAU,QAAS,sBAU1C,IARgC,IAA3BhC,EAAMqC,kBAEVL,EAAaM,QAId3R,GAAM9mE,GAAYm4E,EAAcC,GAEnB,OAARtR,GAEJ,MAAK9mE,GAAYm4E,GAEV,IAAIr+E,MAAO,+DAIX,IAAIA,MAAO,sCAUkB3N,IAAjC26E,GAAI3lB,2BAER2lB,GAAI3lB,yBAA2B,WAE9B,MAAO,CAAEu3B,SAAY,EAAGC,SAAY,EAAGvpD,UAAa,KAMrD,MAAQ5zB,GAGT,MADA1R,QAAQ0R,MAAO,wBAA0BA,EAAMo9E,SACzCp9E,EAYP,SAASq9E,KAERtyC,EAAa,IAAIke,GAAiBqiB,IAElC/5B,EAAe,IAAIiU,GAAmB8lB,GAAKvgC,EAAYppB,IAExB,IAA1B4vB,EAAaC,WAEjBzG,EAAW/4C,IAAK,uBAChB+4C,EAAW/4C,IAAK,qBAChB+4C,EAAW/4C,IAAK,0BAChB+4C,EAAW/4C,IAAK,iCAChB+4C,EAAW/4C,IAAK,4BAChB+4C,EAAW/4C,IAAK,0BAChB+4C,EAAW/4C,IAAK,2BAChB+4C,EAAW/4C,IAAK,2BAIjB+4C,EAAW/4C,IAAK,4BAEhBu5E,GAAQ,IAAIuG,GAAYxG,GAAKvgC,EAAYwG,GAEzC+N,EAAQ,IAAI6lB,GAAYmG,GAAKvgC,EAAYwG,GACzC+N,EAAMv2C,QAASuyE,EAAgB70E,KAAMo1E,GAAWn9E,eAAgBg9E,GAAchjF,SAC9E4mD,EAAMr2C,SAAUoyE,EAAiB50E,KAAMk7D,GAAYjjE,eAAgBg9E,GAAchjF,SAEjFusD,EAAO,IAAIgF,GAAWqhB,IACtBn5E,EAAa,IAAIsqE,GACjB51D,EAAW,IAAIwkE,GAAeC,GAAKvgC,EAAYuU,EAAOntD,EAAYo/C,EAAcg6B,GAAOtmB,GACvF5F,EAAW,IAAIoJ,GAAekyB,GAC9BvqF,EAAa,IAAIihD,GAAiBi6B,GAAK/5B,GACvCgQ,GAAgB,IAAIL,GAAoBoqB,GAAKvgC,EAAY36C,EAAYmhD,GACrEvwB,EAAa,IAAImoC,GAAiBmiB,GAAKl7E,EAAY60D,EAAM1D,IACzDhC,GAAU,IAAI6L,GAAckgB,GAAKtqD,EAAY5wB,EAAY60D,GACzDu3B,GAAe,IAAI9xB,GAAmB4gB,IACtCxgC,GAAW,IAAIgc,GAAe30D,GAC9BmqF,GAAe,IAAItiB,GAAe2gB,EAAOt7B,EAAUtU,EAAYwG,EAAcgQ,GAAezW,IAC5F7pB,GAAY,IAAIy2D,GAAgBvlF,GAChCoqF,GAAc,IAAIhf,GAAkBprE,GACpC8uE,GAAe,IAAID,GACnBriB,GAAa,IAAIS,GAAiBu7B,EAAOt7B,EAAUC,EAAOC,GAAS06B,GAEnEwC,GAAiB,IAAIz3B,GAAqBsmB,GAAKvgC,EAAYka,EAAM1T,GACjEmrC,GAAwB,IAAI3yB,GAA4BuhB,GAAKvgC,EAAYka,EAAM1T,GAE/E0T,EAAKoF,SAAWiyB,GAAajyB,SAE7BswB,EAAMppC,aAAeA,EACrBopC,EAAM5vC,WAAaA,EACnB4vC,EAAMxoF,WAAaA,EACnBwoF,EAAM4B,YAAcA,GACpB5B,EAAMr7B,MAAQA,EACdq7B,EAAM11B,KAAOA,EAIdo4B,KAIA,MAAMhnF,GAAK,IAAI68E,GAAcyH,EAAOrP,IAEpCt7E,KAAKqG,GAAKA,GAIV,MAAM6lE,GAAY,IAAImF,GAAgBsZ,EAAOp7B,GAAShO,EAAa2U,gBAoRnE,SAAS42B,GAAe7iF,GAEvBA,EAAMqjF,iBAENhvF,QAAQyO,IAAK,sCAEb69E,GAAiB,EAIlB,SAASmC,KAERzuF,QAAQyO,IAAK,0CAEb69E,GAAiB,EAEjByC,KAID,SAASE,GAAmBtjF,GAE3B,MAAM4nB,EAAW5nB,EAAMjB,OAEvB6oB,EAAS5zB,oBAAqB,UAAWsvF,IAQ1C,SAA6B17D,GAE5B27D,GAAiC37D,GAEjC1vB,EAAW2tB,OAAQ+B,GAVnB47D,CAAoB57D,GAerB,SAAS27D,GAAiC37D,GAEzC,MAAM67D,EAAcvrF,EAAWH,IAAK6vB,GAAWwgC,aAE1B1xD,IAAhB+sF,GAEJpB,GAAa/f,eAAgBmhB,GAjU/B1tF,KAAKksE,UAAYA,GAIjBlsE,KAAKwU,WAAa,WAEjB,OAAO8mE,IAIRt7E,KAAKqlF,qBAAuB,WAE3B,OAAO/J,GAAI+J,wBAIZrlF,KAAK2tF,iBAAmB,WAEvB,MAAMt8B,EAAYtW,EAAW/4C,IAAK,sBAC7BqvD,GAAYA,EAAUu8B,eAI5B5tF,KAAK6tF,oBAAsB,WAE1B,MAAMx8B,EAAYtW,EAAW/4C,IAAK,sBAC7BqvD,GAAYA,EAAUy8B,kBAI5B9tF,KAAK+tF,cAAgB,WAEpB,OAAOrC,GAIR1rF,KAAKguF,cAAgB,SAAWnvF,QAEhB8B,IAAV9B,IAEL6sF,EAAc7sF,EAEdmB,KAAKyZ,QAAS+xE,EAAQC,GAAS,KAIhCzrF,KAAKijB,QAAU,SAAWja,GAUzB,YARgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,mEAEdyK,EAAS,IAAIkF,GAIPlF,EAAOnI,IAAK2qF,EAAQC,IAI5BzrF,KAAKyZ,QAAU,SAAWtL,EAAOC,EAAQ6/E,GAEnC5nF,GAAGg+E,aAEP/lF,QAAQC,KAAM,0EAKfitF,EAASr9E,EACTs9E,EAAUr9E,EAEV2F,EAAQ5F,MAAQ9Q,KAAKqL,MAAOyF,EAAQu9E,GACpC33E,EAAQ3F,OAAS/Q,KAAKqL,MAAO0F,EAASs9E,IAEjB,IAAhBuC,IAEJl6E,EAAQisB,MAAM7xB,MAAQA,EAAQ,KAC9B4F,EAAQisB,MAAM5xB,OAASA,EAAS,MAIjCpO,KAAKkuF,YAAa,EAAG,EAAG//E,EAAOC,KAIhCpO,KAAKmuF,qBAAuB,SAAWnlF,GAUtC,YARgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,gFAEdyK,EAAS,IAAIkF,GAIPlF,EAAOnI,IAAK2qF,EAASE,EAAaD,EAAUC,GAAchjF,SAIlE1I,KAAKouF,qBAAuB,SAAWjgF,EAAOC,EAAQ+5E,GAErDqD,EAASr9E,EACTs9E,EAAUr9E,EAEVs9E,EAAcvD,EAEdp0E,EAAQ5F,MAAQ9Q,KAAKqL,MAAOyF,EAAQg6E,GACpCp0E,EAAQ3F,OAAS/Q,KAAKqL,MAAO0F,EAAS+5E,GAEtCnoF,KAAKkuF,YAAa,EAAG,EAAG//E,EAAOC,IAIhCpO,KAAKquF,mBAAqB,SAAWrlF,GAUpC,YARgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,8EAEdyK,EAAS,IAAIwO,GAIPxO,EAAOyN,KAAM40E,IAIrBrrF,KAAKg1E,YAAc,SAAWhsE,GAE7B,OAAOA,EAAOyN,KAAMk7D,IAIrB3xE,KAAKkuF,YAAc,SAAWtlF,EAAGiD,EAAGsC,EAAOC,GAErCxF,EAAEwxC,UAENu3B,EAAU9wE,IAAK+H,EAAEA,EAAGA,EAAEiD,EAAGjD,EAAE6O,EAAG7O,EAAE2F,GAIhCojE,EAAU9wE,IAAK+H,EAAGiD,EAAGsC,EAAOC,GAI7BkhD,EAAMr2C,SAAUoyE,EAAiB50E,KAAMk7D,GAAYjjE,eAAgBg9E,GAAchjF,UAIlF1I,KAAKsuF,WAAa,SAAWtlF,GAE5B,OAAOA,EAAOyN,KAAMo1E,IAIrB7rF,KAAKuuF,WAAa,SAAW3lF,EAAGiD,EAAGsC,EAAOC,GAEpCxF,EAAEwxC,UAENyxC,EAAShrF,IAAK+H,EAAEA,EAAGA,EAAEiD,EAAGjD,EAAE6O,EAAG7O,EAAE2F,GAI/Bs9E,EAAShrF,IAAK+H,EAAGiD,EAAGsC,EAAOC,GAI5BkhD,EAAMv2C,QAASuyE,EAAgB70E,KAAMo1E,GAAWn9E,eAAgBg9E,GAAchjF,UAI/E1I,KAAKwuF,eAAiB,WAErB,OAAO1C,GAIR9rF,KAAKw0E,eAAiB,SAAWia,GAEhCn/B,EAAMklB,eAAgBsX,EAAe2C,IAItCzuF,KAAK0uF,cAAgB,SAAWC,GAE/BhD,EAAcgD,GAIf3uF,KAAK4uF,mBAAqB,SAAWD,GAEpC/C,EAAmB+C,GAMpB3uF,KAAKgwD,cAAgB,WAEpB,OAAOrB,GAAWqB,iBAInBhwD,KAAKiwD,cAAgB,WAEpBtB,GAAWsB,cAAckrB,MAAOxsB,GAAYvlD,YAI7CpJ,KAAKkwD,cAAgB,WAEpB,OAAOvB,GAAWuB,iBAInBlwD,KAAKmwD,cAAgB,WAEpBxB,GAAWwB,cAAcgrB,MAAOxsB,GAAYvlD,YAI7CpJ,KAAKo+C,MAAQ,SAAW/d,EAAOuY,EAAOyF,GAErC,IAAIwwC,EAAO,QAEIluF,IAAV0/B,GAAuBA,KAAQwuD,GAAQ,aAC7BluF,IAAVi4C,GAAuBA,KAAQi2C,GAAQ,WAC3BluF,IAAZ09C,GAAyBA,KAAUwwC,GAAQ,MAEhDvT,GAAIl9B,MAAOywC,IAIZ7uF,KAAKwvD,WAAa,WAEjBxvD,KAAKo+C,OAAO,GAAM,GAAO,IAI1Bp+C,KAAKm2E,WAAa,WAEjBn2E,KAAKo+C,OAAO,GAAO,GAAM,IAI1Bp+C,KAAKg3E,aAAe,WAEnBh3E,KAAKo+C,OAAO,GAAO,GAAO,IAM3Bp+C,KAAKoX,QAAU,WAEdrD,EAAQ9V,oBAAqB,mBAAoB6uF,IAAe,GAChE/4E,EAAQ9V,oBAAqB,uBAAwB8uF,IAAkB,GAEvER,GAAYn1E,UACZ65D,GAAa75D,UACbjV,EAAWiV,UACXi4C,EAASj4C,UACTm4C,GAAQn4C,UACRm6C,GAAcn6C,UAEd/Q,GAAG+Q,UAEHgtE,GAAUnjC,QAuEXjhD,KAAK8uF,sBAAwB,SAAW5tE,EAAQmxC,GAE/Cd,GAAce,iBAEd,MAAM7Q,EAAUt/C,EAAWH,IAAKkf,GAE3BA,EAAO6tE,eAAkBttC,EAAQr3B,WAAWq3B,EAAQr3B,SAAWkxD,GAAIn5B,gBACnEjhC,EAAO8tE,aAAgBvtC,EAAQhiC,SAASgiC,EAAQhiC,OAAS67D,GAAIn5B,gBAC7DjhC,EAAO+tE,SAAYxtC,EAAQnqC,KAAKmqC,EAAQnqC,GAAKgkE,GAAIn5B,gBACjDjhC,EAAOguE,YAAeztC,EAAQphB,QAAQohB,EAAQphB,MAAQi7C,GAAIn5B,gBAE/D,MAAM4R,EAAoB1B,EAAQ2B,gBAE7B9yC,EAAO6tE,eAEXzT,GAAIl5B,WAAY,MAAOX,EAAQr3B,UAC/BkxD,GAAIj5B,WAAY,MAAOnhC,EAAOiuE,cAAe,OAE7C59B,GAAcgB,gBAAiBwB,EAAkB3pC,UACjDkxD,GAAIzoB,oBAAqBkB,EAAkB3pC,SAAU,EAAG,MAAM,EAAO,EAAG,IAIpElJ,EAAO8tE,aAEX1T,GAAIl5B,WAAY,MAAOX,EAAQhiC,QAC/B67D,GAAIj5B,WAAY,MAAOnhC,EAAOkuE,YAAa,OAE3C79B,GAAcgB,gBAAiBwB,EAAkBt0C,QACjD67D,GAAIzoB,oBAAqBkB,EAAkBt0C,OAAQ,EAAG,MAAM,EAAO,EAAG,IAIlEyB,EAAO+tE,SAEX3T,GAAIl5B,WAAY,MAAOX,EAAQnqC,IAC/BgkE,GAAIj5B,WAAY,MAAOnhC,EAAOmuE,QAAS,OAEvC99B,GAAcgB,gBAAiBwB,EAAkBz8C,IACjDgkE,GAAIzoB,oBAAqBkB,EAAkBz8C,GAAI,EAAG,MAAM,EAAO,EAAG,IAI9D4J,EAAOguE,YAEX5T,GAAIl5B,WAAY,MAAOX,EAAQphB,OAC/Bi7C,GAAIj5B,WAAY,MAAOnhC,EAAOouE,WAAY,OAE1C/9B,GAAcgB,gBAAiBwB,EAAkB1zB,OACjDi7C,GAAIzoB,oBAAqBkB,EAAkB1zB,MAAO,EAAG,MAAM,EAAO,EAAG,IAItEkxB,GAAcoB,0BAEd2oB,GAAIlmB,WAAY,EAAG,EAAGl0C,EAAOR,OAE7BQ,EAAOR,MAAQ,GAIhB1gB,KAAK6yE,mBAAqB,SAAWv0D,EAAQw/B,EAAOp8B,EAAUmQ,EAAU3Q,EAAQ2qB,GAEhE,OAAViS,IAAiBA,EAAQquC,GAE9B,MAAMxR,EAAgBz5D,EAAOsQ,QAAUtQ,EAAOvC,YAAYiM,cAAgB,EAEpEynC,EAAUk9B,GAAYjxE,EAAQw/B,EAAOjsB,EAAU3Q,GAErDouC,EAAMorB,YAAa7oD,EAAU8oD,GAI7B,IAAIxxE,EAAQuY,EAASvY,MACrB,MAAMihB,EAAW1I,EAASthB,WAAWgqB,SAIrC,GAAe,OAAVjhB,GAEJ,QAAkBxI,IAAbypB,GAA6C,IAAnBA,EAAS1J,MAAc,YAEhD,GAAqB,IAAhBvX,EAAMuX,MAEjB,OAMD,IAiBIjhB,EAjBA+vF,EAAc,GAEU,IAAvB39D,EAASmT,YAEb77B,EAAQ6nB,EAAW6oC,sBAAuBn4C,GAC1C8tE,EAAc,IAIV39D,EAASwT,cAAgBxT,EAAS+V,eAEtC4kD,GAAa3nF,OAAQqc,EAAQQ,EAAUmQ,EAAUwgC,GAIlDd,GAAc2B,MAAOhyC,EAAQ2Q,EAAUwgC,EAAS3wC,EAAUvY,GAG1D,IAAI00C,EAAW4uC,GAEA,OAAVtjF,IAEJ1J,EAAYW,EAAW4B,IAAKmH,GAE5B00C,EAAW6uC,GACX7uC,EAASnQ,SAAUjuC,IAMpB,MAAMgwF,EAAwB,OAAVtmF,EAAmBA,EAAMuX,MAAQ0J,EAAS1J,MAExDgvE,EAAahuE,EAAS6rB,UAAUza,MAAQ08D,EACxCG,EAAajuE,EAAS6rB,UAAU7sB,MAAQ8uE,EAExCv2C,EAAuB,OAAVpN,EAAiBA,EAAM/Y,MAAQ08D,EAAc,EAC1Dz1C,EAAuB,OAAVlO,EAAiBA,EAAMnrB,MAAQ8uE,EAAcrvE,EAAAA,EAE1DyvE,EAAYvyF,KAAK8N,IAAKukF,EAAYz2C,GAClC42C,EAAUxyF,KAAK6N,IAAKukF,EAAWC,EAAaC,EAAY12C,EAAac,GAAe,EAEpF+1C,EAAYzyF,KAAK8N,IAAK,EAAG0kF,EAAUD,EAAY,GAErD,GAAmB,IAAdE,EAAL,CAIA,GAAK5uE,EAAOsQ,QAEiB,IAAvBK,EAASmT,WAEbsqB,EAAMsrB,aAAc/oD,EAASoT,mBAAqBonD,KAClDxuC,EAASsX,QAAS,IAIlBtX,EAASsX,QAAS,QAIb,GAAKj0C,EAAOuQ,OAAS,CAE3B,IAAIopD,EAAYhpD,EAAS4V,eAEN9mC,IAAdk6E,IAA0BA,EAAY,GAE3CvrB,EAAMsrB,aAAcC,EAAYwR,KAE3BnrE,EAAO6uE,eAEXlyC,EAASsX,QAAS,GAEPj0C,EAAO8uE,WAElBnyC,EAASsX,QAAS,GAIlBtX,EAASsX,QAAS,QAIRj0C,EAAOwQ,SAElBmsB,EAASsX,QAAS,GAEPj0C,EAAO+uE,UAElBpyC,EAASsX,QAAS,GAInB,GAAKj0C,EAAOoQ,gBAEXusB,EAASwX,gBAAiBu6B,EAAWE,EAAW5uE,EAAOR,YAEjD,GAAKgB,EAASoyC,0BAA4B,CAEhD,MAAMyG,EAAgBl9D,KAAK6N,IAAKwW,EAAS64C,cAAe74C,EAAS0yC,mBAEjEvW,EAASwX,gBAAiBu6B,EAAWE,EAAWv1B,QAIhD1c,EAASM,OAAQyxC,EAAWE,KAQ9B9vF,KAAKkwF,QAAU,SAAWpyC,EAAOx/B,GAEhCu6C,EAAqBoY,GAAajvE,IAAK87C,EAAOx/B,GAC9Cu6C,EAAmBd,OAEnBja,EAAMptB,UAAU,SAAWxP,GAErBA,EAAOyO,UAEXkpC,EAAmBgY,UAAW3vD,GAEzBA,EAAO2M,YAEXgrC,EAAmBiY,WAAY5vD,OAQlC23C,EAAmB+X,YAAatyD,GAEhC,MAAM6xE,EAAW,IAAIzuC,QAErB5D,EAAMptB,UAAU,SAAWxP,GAE1B,MAAM2Q,EAAW3Q,EAAO2Q,SAExB,GAAKA,EAEJ,GAAK5yB,MAAMkY,QAAS0a,GAEnB,IAAM,IAAI1nB,EAAI,EAAGA,EAAI0nB,EAASxoB,OAAQc,IAAO,CAE5C,MAAMimF,EAAYv+D,EAAU1nB,IAEO,IAA9BgmF,EAASlsF,IAAKmsF,KAElBC,GAAcD,EAAWtyC,EAAO58B,GAChCivE,EAAStvF,IAAKuvF,SAMwB,IAA7BD,EAASlsF,IAAK4tB,KAEzBw+D,GAAcx+D,EAAUisB,EAAO58B,GAC/BivE,EAAStvF,IAAKgxB,QAYlB,IAAIw1D,GAA2B,KAS/B,MAAMjD,GAAY,IAAI3jC,GA2JtB,SAAS6vC,GAAepvE,EAAQ5C,EAAQquD,EAAY8d,GAEnD,IAAwB,IAAnBvpE,EAAO0M,QAAoB,OAIhC,GAFgB1M,EAAOmL,OAAOhlB,KAAMiX,EAAO+N,QAI1C,GAAKnL,EAAOqvE,QAEX5jB,EAAazrD,EAAO8M,iBAEd,GAAK9M,EAAOsvE,OAES,IAAtBtvE,EAAO8yD,YAAsB9yD,EAAOrc,OAAQyZ,QAE3C,GAAK4C,EAAOyO,QAElBkpC,EAAmBgY,UAAW3vD,GAEzBA,EAAO2M,YAEXgrC,EAAmBiY,WAAY5vD,QAI1B,GAAKA,EAAO+uE,UAElB,IAAO/uE,EAAO6M,eAAiByjD,EAASif,iBAAkBvvE,GAAW,CAE/DupE,GAEJyB,EAASz8D,sBAAuBvO,EAAOvC,aACrCJ,aAAc0tE,GAIjB,MAAMvqE,EAAW6tC,GAAQ1qD,OAAQqc,GAC3B2Q,EAAW3Q,EAAO2Q,SAEnBA,EAASjE,SAEb+qC,EAAkBx6D,KAAM+iB,EAAQQ,EAAUmQ,EAAU86C,EAAYuf,EAASz0E,EAAG,YAMxE,GAAKyJ,EAAOwvE,wBAEbjG,GAEJyB,EAASz8D,sBAAuBvO,EAAOvC,aACrCJ,aAAc0tE,GAIjBtzB,EAAkBx6D,KAAM+iB,EAAQ,KAAMA,EAAO2Q,SAAU86C,EAAYuf,EAASz0E,EAAG,WAEzE,IAAKyJ,EAAOsQ,QAAUtQ,EAAOuQ,QAAUvQ,EAAOwQ,YAE/CxQ,EAAOqyB,eAINryB,EAAOqqD,SAASxqB,QAAUkU,EAAK9W,OAAO4C,QAE1C7/B,EAAOqqD,SAAS1mE,SAChBqc,EAAOqqD,SAASxqB,MAAQkU,EAAK9W,OAAO4C,QAM/B7/B,EAAO6M,eAAiByjD,EAASsC,iBAAkB5yD,IAAW,CAE/DupE,GAEJyB,EAASz8D,sBAAuBvO,EAAOvC,aACrCJ,aAAc0tE,GAIjB,MAAMvqE,EAAW6tC,GAAQ1qD,OAAQqc,GAC3B2Q,EAAW3Q,EAAO2Q,SAExB,GAAK5yB,MAAMkY,QAAS0a,GAAa,CAEhC,MAAMuZ,EAAS1pB,EAAS0pB,OAExB,IAAM,IAAIjhC,EAAI,EAAGC,EAAIghC,EAAO/hC,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAM0hC,EAAQT,EAAQjhC,GAChB2pC,EAAgBjiB,EAAUga,EAAMlK,eAEjCmS,GAAiBA,EAAclmB,SAEnC+qC,EAAkBx6D,KAAM+iB,EAAQQ,EAAUoyB,EAAe64B,EAAYuf,EAASz0E,EAAGo0B,SAMxEha,EAASjE,SAEpB+qC,EAAkBx6D,KAAM+iB,EAAQQ,EAAUmQ,EAAU86C,EAAYuf,EAASz0E,EAAG,MAUhF,MAAMsK,EAAWb,EAAOa,SAExB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5CmmF,GAAevuE,EAAU5X,GAAKmU,EAAQquD,EAAY8d,GAMpD,SAASkG,GAAevgC,EAAYtS,EAAOx/B,GAE1C,MAAM8tE,GAAqC,IAAlBtuC,EAAMwS,QAAmBxS,EAAMsuC,iBAAmB,KAE3E,IAAM,IAAIjiF,EAAI,EAAGC,EAAIgmD,EAAW/mD,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAMgjE,EAAa/c,EAAYjmD,GAEzB+W,EAASisD,EAAWjsD,OACpBQ,EAAWyrD,EAAWzrD,SACtBmQ,EAAgC,OAArBu6D,EAA4Bjf,EAAWt7C,SAAWu6D,EAC7DvgD,EAAQshC,EAAWthC,MAEzB,GAAKvtB,EAAOsyE,cAAgB,CAE3BxF,EAAsB9sE,EAEtB,MAAMmvD,EAAUnvD,EAAOmvD,QAEvB,IAAM,IAAIlqD,EAAI,EAAGmsB,EAAK+9B,EAAQpkE,OAAQka,EAAImsB,EAAInsB,IAAO,CAEpD,MAAMstE,EAAUpjB,EAASlqD,GAEpBrC,EAAOmL,OAAOhlB,KAAMwpF,EAAQxkE,UAEhCijC,EAAMr2C,SAAUoyE,EAAiB50E,KAAMo6E,EAAQ53E,WAE/C4/C,EAAmB+X,YAAaigB,GAEhCjd,GAAc1yD,EAAQ48B,EAAO+yC,EAASnvE,EAAUmQ,EAAUga,UAQ5Du/C,EAAsB,KAEtBxX,GAAc1yD,EAAQ48B,EAAOx/B,EAAQoD,EAAUmQ,EAAUga,IAQ5D,SAAS+nC,GAAc1yD,EAAQ48B,EAAOx/B,EAAQoD,EAAUmQ,EAAUga,GAQjE,GANA3qB,EAAOiN,eAAgBw8D,EAAO7sC,EAAOx/B,EAAQoD,EAAUmQ,EAAUga,GACjEgtB,EAAqBoY,GAAajvE,IAAK87C,EAAOstC,GAAuB9sE,GAErE4C,EAAOsM,gBAAgBvc,iBAAkBqN,EAAOE,mBAAoB0C,EAAOvC,aAC3EuC,EAAOuM,aAAa2F,gBAAiBlS,EAAOsM,iBAEvCtM,EAAOwvE,wBAA0B,CAErC,MAAMr+B,EAAUk9B,GAAYjxE,EAAQw/B,EAAOjsB,EAAU3Q,GAErDouC,EAAMorB,YAAa7oD,GAEnB0/B,GAAcyB,QAhnBhB,SAAgC9xC,EAAQmxC,GAEvCnxC,EAAOi9B,QAAQ,SAAWj9B,GAEzBypE,EAAMmE,sBAAuB5tE,EAAQmxC,MA8mBrCy+B,CAAuB5vE,EAAQmxC,QAI/Bs4B,EAAM9X,mBAAoBv0D,EAAQw/B,EAAOp8B,EAAUmQ,EAAU3Q,EAAQ2qB,GAItE3qB,EAAOkN,cAAeu8D,EAAO7sC,EAAOx/B,EAAQoD,EAAUmQ,EAAUga,GAChEgtB,EAAqBoY,GAAajvE,IAAK87C,EAAOstC,GAAuB9sE,GAItE,SAAS+xE,GAAcx+D,EAAUisB,EAAO58B,IAEhB,IAAlB48B,EAAMwS,UAAmBxS,EAAQquC,GAEtC,MAAM9zB,EAAqBl2D,EAAWH,IAAK6vB,GAErCgpB,EAASge,EAAmBvJ,MAAMzU,OAClC81B,EAAe9X,EAAmBvJ,MAAMqhB,aAExCogB,EAAqBl2C,EAAOyU,MAAMp5C,QAElCyb,EAAa26D,GAAaphB,cAAer5C,EAAUgpB,EAAOyU,MAAOqhB,EAAc7yB,EAAO58B,GACtF8vE,EAAkB1E,GAAangB,mBAAoBx6C,GAEzD,IAAI0gC,EAAUgG,EAAmBhG,QAC7B4+B,GAAgB,EAEpB,QAAiBtwF,IAAZ0xD,EAGJxgC,EAAS7zB,iBAAkB,UAAWuvF,SAEhC,GAAKl7B,EAAQyS,WAAaksB,EAGhCxD,GAAiC37D,QAE3B,GAAKwmC,EAAmB04B,qBAAuBA,EAErDE,GAAgB,MAEV,CAAA,QAA6BtwF,IAAxBgxB,EAAWm0C,SAAyB,CAI/C,MAAMsF,EAAcv5C,EAASw5C,uBAAyBvtB,EAAMstB,YAAc,KAG1E,YAFA/S,EAAmBzzB,OAASyqB,EAASrtD,IAAK6vB,EAAS+S,QAAUwmC,IAO7D6lB,GAAgB,EAIZA,IAEJt/D,EAAW2oB,SAAWgyC,GAAapxB,YAAarpC,GAEhDA,EAAS2T,gBAAiB7T,EAAYg5D,GAEtCt4B,EAAUi6B,GAAalgB,eAAgBz6C,EAAYq/D,GAEnD34B,EAAmBhG,QAAUA,EAC7BgG,EAAmB/d,SAAW3oB,EAAW2oB,SACzC+d,EAAmB8P,eAAiBx2C,EAAWw2C,gBAIhD,MAAM7tB,EAAW+d,EAAmB/d,UAE7BzoB,EAASqqB,kBACbrqB,EAASi1C,uBACW,IAAtBj1C,EAASipB,WAETud,EAAmB0L,kBAAoBjpB,GAASwc,UAChDe,EAAmBd,gBAAkBzc,GAASyc,gBAC9Cjd,EAAS/W,eAAiBuX,GAASsc,SAIpCiB,EAAmB+S,YAAcv5C,EAASw5C,uBAAyBvtB,EAAMstB,YAAc,KACvF/S,EAAmBr2B,IAAM8b,EAAM9b,IAC/Bq2B,EAAmBzzB,OAASyqB,EAASrtD,IAAK6vB,EAAS+S,QAAUyzB,EAAmB+S,aAIhF/S,EAAmB64B,YA+UpB,SAA8Br/D,GAE7B,OAAOA,EAASu2D,uBAAyBv2D,EAASy2D,oBAAsBz2D,EAAS22D,qBAChF32D,EAASw5C,wBAA0Bx5C,EAAS63D,kBAC1C73D,EAASqqB,mBAAwC,IAApBrqB,EAASgpB,OAnVRs2C,CAAqBt/D,GACtDwmC,EAAmB04B,mBAAqBA,EAEnC14B,EAAmB64B,cAIvB52C,EAASgS,kBAAkBztD,MAAQg8C,EAAOyU,MAAMwf,QAChDx0B,EAASiS,WAAW1tD,MAAQg8C,EAAOyU,MAAMyf,MACzCz0B,EAASkS,kBAAkB3tD,MAAQg8C,EAAOyU,MAAMwc,YAChDxxB,EAASmS,wBAAwB5tD,MAAQg8C,EAAOyU,MAAM0f,kBACtD10B,EAAS0S,WAAWnuD,MAAQg8C,EAAOyU,MAAMyc,KACzCzxB,EAAS8S,iBAAiBvuD,MAAQg8C,EAAOyU,MAAM2f,WAC/C30B,EAAS0T,eAAenvD,MAAQg8C,EAAOyU,MAAM0c,SAC7C1xB,EAAS2T,MAAMpvD,MAAQg8C,EAAOyU,MAAM4f,aACpC50B,EAAS4T,MAAMrvD,MAAQg8C,EAAOyU,MAAM6f,aACpC70B,EAASiT,YAAY1uD,MAAQg8C,EAAOyU,MAAMhuC,MAC1Cg5B,EAASkT,kBAAkB3uD,MAAQg8C,EAAOyU,MAAM8f,YAChD90B,EAASuT,iBAAiBhvD,MAAQg8C,EAAOyU,MAAM2c,KAE/C3xB,EAASwS,qBAAqBjuD,MAAQg8C,EAAOyU,MAAMxC,qBACnDxS,EAASyS,wBAAwBluD,MAAQg8C,EAAOyU,MAAMvC,wBACtDzS,EAAS+S,cAAcxuD,MAAQg8C,EAAOyU,MAAMjC,cAC5C/S,EAASgT,iBAAiBzuD,MAAQg8C,EAAOyU,MAAMhC,iBAC/ChT,EAASqT,eAAe9uD,MAAQg8C,EAAOyU,MAAM3B,eAC7CrT,EAASsT,kBAAkB/uD,MAAQg8C,EAAOyU,MAAM1B,mBAKjD,MAAMwjC,EAAe/4B,EAAmBhG,QAAQ6I,cAC1Cm2B,EAAe7vB,GAAcU,aAAckvB,EAAa1wB,IAAKpmB,GAEnE+d,EAAmBg5B,aAAeA,EAInC,SAAS9B,GAAYjxE,EAAQw/B,EAAOjsB,EAAU3Q,IAEtB,IAAlB48B,EAAMwS,UAAmBxS,EAAQquC,GAEtCt1E,EAAS2qE,oBAET,MAAMx/C,EAAM8b,EAAM9b,IACZopC,EAAcv5C,EAASw5C,uBAAyBvtB,EAAMstB,YAAc,KACpE91D,EAAsC,OAAzB01E,EAAkCL,EAAMxiB,eAAiB6iB,EAAqB9xE,QAAQ5D,SACnGsvB,EAASyqB,EAASrtD,IAAK6vB,EAAS+S,QAAUwmC,GAE1C/S,EAAqBl2D,EAAWH,IAAK6vB,GACrCgpB,EAASge,EAAmBvJ,MAAMzU,OAExC,IAA0B,IAArBkxC,KAE2B,IAA1BC,GAAkC1tE,IAAW6sE,GAAiB,CAElE,MAAM/yB,EACL95C,IAAW6sE,GACXt5D,EAAS5B,KAAOi7D,EAKjBpwC,GAASqd,SAAUtmC,EAAUvT,EAAQ85C,GAMlCvmC,EAAS3b,UAAYmiD,EAAmB6lB,UAEvCrsD,EAASmQ,KAAOq2B,EAAmBr2B,MAAQA,GAIpCq2B,EAAmB+S,cAAgBA,GAInC/S,EAAmB64B,aAAiB74B,EAAmB04B,qBAAuBl2C,EAAOyU,MAAMp5C,QANtGm6E,GAAcx+D,EAAUisB,EAAO58B,QAUqBvgB,IAAzC03D,EAAmB0L,mBAC5B1L,EAAmB0L,oBAAsBjpB,GAASwc,WACpDe,EAAmBd,kBAAoBzc,GAASyc,iBAIrCc,EAAmB8P,iBAAmB7yD,GAItC+iD,EAAmBzzB,SAAWA,IAFzCyrD,GAAcx+D,EAAUisB,EAAO58B,GAJ/BmvE,GAAcx+D,EAAUisB,EAAO58B,IAchCmvE,GAAcx+D,EAAUisB,EAAO58B,GAC/Bm3C,EAAmB6lB,UAAYrsD,EAAS3b,SAIzC,IAAIo7E,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,EAEpB,MAAMn/B,EAAUgG,EAAmBhG,QAClCo/B,EAAap/B,EAAQ6I,cACrBw2B,EAAar5B,EAAmB/d,SAkBjC,GAhBKgV,EAAMmrB,WAAYpoB,EAAQA,WAE9Bi/B,GAAiB,EACjBC,GAAkB,EAClBC,GAAgB,GAIZ3/D,EAAS5B,KAAOi7D,IAEpBA,EAAqBr5D,EAAS5B,GAE9BshE,GAAkB,GAIdD,GAAkBnG,IAAmB7sE,EAAS,CA2BlD,GAzBAmzE,EAAWt2B,SAAUmgB,GAAK,mBAAoBh9D,EAAOG,kBAEhD8iC,EAAawU,wBAEjB07B,EAAWt2B,SAAUmgB,GAAK,gBACzB,GAAQj+E,KAAK0P,IAAKuR,EAAOiN,IAAM,GAAQluB,KAAK2P,MAIzCm+E,IAAmB7sE,IAEvB6sE,EAAiB7sE,EAMjBizE,GAAkB,EAClBC,GAAgB,GAOZ3/D,EAASqqB,kBACbrqB,EAAS22D,qBACT32D,EAASy2D,oBACTz2D,EAASw5C,wBACTx5C,EAAS+S,OAAS,CAElB,MAAM+sD,EAAUF,EAAWptD,IAAIutD,oBAEdjxF,IAAZgxF,GAEJA,EAAQx2B,SAAUmgB,GACjB4Q,EAASz8D,sBAAuBnR,EAAOK,eAMrCkT,EAAS22D,qBACb32D,EAASy2D,oBACTz2D,EAASu2D,uBACTv2D,EAASkW,qBACTlW,EAASw5C,wBACTx5C,EAASqqB,mBAETu1C,EAAWt2B,SAAUmgB,GAAK,kBAAkD,IAAhCh9D,EAAOuzE,uBAI/ChgE,EAAS22D,qBACb32D,EAASy2D,oBACTz2D,EAASu2D,uBACTv2D,EAASkW,qBACTlW,EAASw5C,wBACTx5C,EAASqqB,kBACTrqB,EAAS63D,kBACT73D,EAASuT,WAETqsD,EAAWt2B,SAAUmgB,GAAK,aAAch9D,EAAOE,oBAUjD,GAAKqT,EAASuT,SAAW,CAExBqsD,EAAWzvB,YAAasZ,GAAKp6D,EAAQ,cACrCuwE,EAAWzvB,YAAasZ,GAAKp6D,EAAQ,qBAErC,MAAMqqD,EAAWrqD,EAAOqqD,SAExB,GAAKA,EAAW,CAEf,MAAMD,EAAQC,EAASD,MAEvB,GAAK/pB,EAAaqV,oBAAsB,CAEvC,QAA8Bj2D,IAAzB4qE,EAASumB,YAA4B,CAUzC,IAAI5sF,EAAO7H,KAAK2R,KAAqB,EAAfs8D,EAAMjiE,QAC5BnE,EAAOqF,EAAUsC,eAAgB3H,GACjCA,EAAO7H,KAAK8N,IAAKjG,EAAM,GAEvB,MAAM6sF,EAAe,IAAI1oD,aAAcnkC,EAAOA,EAAO,GACrD6sF,EAAalxF,IAAK0qE,EAASwmB,cAE3B,MAAMD,EAAc,IAAIrzC,GAAaszC,EAAc7sF,EAAMA,EAp2yB5C,KARD,MA82yBZqmE,EAASwmB,aAAeA,EACxBxmB,EAASumB,YAAcA,EACvBvmB,EAASymB,gBAAkB9sF,EAI5BusF,EAAWt2B,SAAUmgB,GAAK,cAAe/P,EAASumB,YAAaj7E,GAC/D46E,EAAWt2B,SAAUmgB,GAAK,kBAAmB/P,EAASymB,sBAItDP,EAAWzvB,YAAasZ,GAAK/P,EAAU,iBAyE3C,IAAwCjxB,EAAUz7C,EANjD,OA3DK0yF,GAAmBl5B,EAAmBvqC,gBAAkB5M,EAAO4M,iBAEnEuqC,EAAmBvqC,cAAgB5M,EAAO4M,cAC1C2jE,EAAWt2B,SAAUmgB,GAAK,gBAAiBp6D,EAAO4M,gBAI9CyjE,IAEJE,EAAWt2B,SAAUmgB,GAAK,sBAAuBqP,EAAMD,qBAElDryB,EAAmB64B,cAsDwBryF,EA3CJ2yF,GA2CNl3C,EA3CNo3C,GA6CxBplC,kBAAkBte,YAAcnvC,EACzCy7C,EAASiS,WAAWve,YAAcnvC,EAElCy7C,EAASkS,kBAAkBxe,YAAcnvC,EACzCy7C,EAASmS,wBAAwBze,YAAcnvC,EAC/Cy7C,EAASiT,YAAYvf,YAAcnvC,EACnCy7C,EAASkT,kBAAkBxf,YAAcnvC,EACzCy7C,EAAS0S,WAAWhf,YAAcnvC,EAClCy7C,EAAS8S,iBAAiBpf,YAAcnvC,EACxCy7C,EAAS0T,eAAehgB,YAAcnvC,EACtCy7C,EAASuT,iBAAiB7f,YAAcnvC,GAjDlCmjC,GAAOnQ,EAASmQ,KAEpB/Q,GAAU82D,mBAAoB2J,EAAY1vD,GAI3C/Q,GAAUi3D,wBAAyBwJ,EAAY7/D,EAAU65D,EAAaD,GAEtEjqB,GAAcS,OAAQqZ,GAAKjjB,EAAmBg5B,aAAcK,EAAY76E,IAIpEgb,EAASqqB,mBAAoD,IAAhCrqB,EAASypB,qBAE1CkmB,GAAcS,OAAQqZ,GAAKjjB,EAAmBg5B,aAAcK,EAAY76E,GACxEgb,EAASypB,oBAAqB,GAI1BzpB,EAAS23D,kBAEbiI,EAAWt2B,SAAUmgB,GAAK,SAAUp6D,EAAOrR,QAM5C4hF,EAAWt2B,SAAUmgB,GAAK,kBAAmBp6D,EAAOsM,iBACpDikE,EAAWt2B,SAAUmgB,GAAK,eAAgBp6D,EAAOuM,cACjDgkE,EAAWt2B,SAAUmgB,GAAK,cAAep6D,EAAOvC,aAEzC0zC,EA3uBR+xB,GAAUjjC,kBARV,SAA2BL,GAErBz6C,GAAGg+E,cACHgD,IAA2BA,GAA0BvmC,MAOpC,oBAAXtjD,QAAyB4mF,GAAUhjC,WAAY5jD,QAE3DwC,KAAKmhD,iBAAmB,SAAW5jC,GAElC8pE,GAA2B9pE,EAC3BlX,GAAG86C,iBAAkB5jC,GAEN,OAAbA,EAAsB6mE,GAAUnjC,OAASmjC,GAAUtxD,SAMtD9yB,KAAKm+C,OAAS,SAAWL,EAAOx/B,GAE/B,IAAI++B,EAAcgT,EAgBlB,QAdwB1vD,IAAnByI,UAAW,KAEf9K,QAAQC,KAAM,6GACd8+C,EAAej0C,UAAW,SAIHzI,IAAnByI,UAAW,KAEf9K,QAAQC,KAAM,iGACd8xD,EAAajnD,UAAW,SAITzI,IAAX2d,IAA4C,IAApBA,EAAOoR,SAGnC,YADApxB,QAAQ0R,MAAO,0EAKhB,IAAwB,IAAnB46E,EAA0B,OAI/Br5B,GAAc0B,oBACdi4B,GAAuB,EACvBC,EAAiB,MAIS,IAArBrtC,EAAMk2B,YAAsBl2B,EAAMztB,oBAIhB,OAAlB/R,EAAO8O,QAAkB9O,EAAO+R,qBAEjB,IAAfhqB,GAAGkyC,UAAwC,IAApBlyC,GAAGg+E,eAE9B/lE,EAASjY,GAAG6/E,UAAW5nE,KAKD,IAAlBw/B,EAAMwS,SAAmBxS,EAAM3vB,eAAgBw8D,EAAO7sC,EAAOx/B,EAAQ++B,GAAgB2tC,GAE1FnyB,EAAqBoY,GAAajvE,IAAK87C,EAAOx/B,GAC9Cu6C,EAAmBd,OAEnBk0B,EAAkBh7E,iBAAkBqN,EAAOG,iBAAkBH,EAAOE,oBACpEgzD,EAASygB,wBAAyBhG,GAElCD,EAAwBhsF,KAAKi3D,qBAC7B80B,EAAmBjxC,GAASid,KAAM/3D,KAAKujC,eAAgByoD,EAAuB1tE,GAE9Eq6C,EAAoB4zB,GAAYvqF,IAAK87C,EAAOx/B,GAC5Cq6C,EAAkBZ,OAElBu4B,GAAexyC,EAAOx/B,EAAQ,EAAGqsE,EAAMF,aAEvC9xB,EAAkByU,UAES,IAAtBud,EAAMF,aAEV9xB,EAAkBvhB,KAAMu0C,EAAaC,IAMZ,IAArBG,GAA4BjxC,GAASmd,eAE1C,MAAM0Y,EAAe9X,EAAmBvJ,MAAMqhB,aAE9CzE,GAAU/tB,OAAQwyB,EAAc7yB,EAAOx/B,GAEvCu6C,EAAmB+X,YAAatyD,IAEN,IAArBytE,GAA4BjxC,GAASod,cAIb,IAAxBl4D,KAAKi1D,KAAKqF,WAAqBt6D,KAAKi1D,KAAKjC,aAExBryD,IAAjB08C,GAEJr9C,KAAKk+C,gBAAiBb,GAMvBsR,GAAWxQ,OAAQwa,EAAmB7a,EAAOx/B,EAAQ+xC,GAIrD,MAAM6hC,EAAgBv5B,EAAkBqU,OAClCmlB,EAAqBx5B,EAAkBt2B,YAExC6vD,EAAc7oF,OAAS,GAAIsnF,GAAeuB,EAAep0C,EAAOx/B,GAChE6zE,EAAmB9oF,OAAS,GAAIsnF,GAAewB,EAAoBr0C,EAAOx/B,IAIxD,IAAlBw/B,EAAMwS,SAAmBxS,EAAM1vB,cAAeu8D,EAAO7sC,EAAOx/B,GAInC,OAAzB0sE,IAIJn0E,EAAS8qE,yBAA0BqJ,GAInCn0E,EAAS+qE,8BAA+BoJ,IAMzC17B,EAAM7N,QAAQ7I,MAAM27B,SAAS,GAC7BjlB,EAAM7N,QAAQ7I,MAAM48B,SAAS,GAC7BlmB,EAAM7N,QAAQphB,MAAMm1C,SAAS,GAE7BlmB,EAAM+qB,kBAAkB,GAIxB1hB,EAAoB,KACpBE,EAAqB,MAonBtB74D,KAAKmkF,eAAiB,SAAWtlF,GAE3BgsF,IAAiBhsF,GAAkC,OAAzBmsF,GAAgC1P,GAAIgF,gBAAiB,MAAOzhF,GAE3FgsF,EAAehsF,GAIhBmB,KAAKk0E,kBAAoB,WAExB,OAAO4W,GAIR9qF,KAAKo0E,qBAAuB,WAE3B,OAAO2W,GAIR/qF,KAAK44D,cAAgB,WAEpB,OAAOD,GAIR34D,KAAK+4D,cAAgB,SAAW3I,GAE/BuI,EAAoBvI,GAIrBpwD,KAAK84D,eAAiB,WAErB,OAAOD,GAIR74D,KAAKg5D,eAAiB,SAAWkY,GAEhCrY,EAAqBqY,GAItBlxE,KAAKi+C,gBAAkB,WAEtB,OAAO+sC,GAIRhrF,KAAKk+C,gBAAkB,SAAWb,EAAc42B,EAAiB,EAAGE,EAAoB,GAEvF6W,EAAuB3tC,EACvBytC,EAAyB7W,EACzB8W,EAA4B5W,EAEvB92B,QAAsE18C,IAAtDwB,EAAWH,IAAKq7C,GAAekgC,oBAEnD1mE,EAAS4qE,kBAAmBpkC,GAI7B,IAAI8iC,EAAc0K,EACd5J,GAAS,EAEb,GAAK5jC,EAAe,CAEnB,MAAMkgC,EAAqBp7E,EAAWH,IAAKq7C,GAAekgC,mBAErDlgC,EAAaC,yBAEjB6iC,EAAc5C,EAAoBtJ,GAClCgN,GAAS,GAITd,EAFW9iC,EAAa3jC,+BAEVvX,EAAWH,IAAKq7C,GAAeqgC,+BAI/BH,EAIf8N,EAAiB50E,KAAM4mC,EAAapkC,UACpCqyE,EAAgB70E,KAAM4mC,EAAatkC,SACnCwyE,EAAsBluC,EAAarkC,iBAInCqyE,EAAiB50E,KAAMk7D,GAAYjjE,eAAgBg9E,GAAchjF,QACjE4iF,EAAgB70E,KAAMo1E,GAAWn9E,eAAgBg9E,GAAchjF,QAC/D6iF,EAAsBO,EAevB,GAXKb,IAAwB9K,IAE5B7E,GAAIgF,gBAAiB,MAAOH,GAC5B8K,EAAsB9K,GAIvB7wB,EAAMr2C,SAAUoyE,GAChB/7B,EAAMv2C,QAASuyE,GACfh8B,EAAMklB,eAAgB+W,GAEjBtK,EAAS,CAEb,MAAMnE,EAAoB36E,EAAWH,IAAKq7C,EAAankC,SACvDoiE,GAAIiF,qBAAsB,MAAO,MAAO,MAAQtM,EAAgB6I,EAAkBG,eAAgB9I,KAMpGn0E,KAAKoyF,uBAAyB,SAAW/0C,EAAcz0C,EAAGiD,EAAGsC,EAAOC,EAAQyzC,EAAQwwC,GAEnF,IAASh1C,IAAgBA,EAAa7jC,oBAGrC,YADAlb,QAAQ0R,MAAO,4FAKhB,IAAImwE,EAAch+E,EAAWH,IAAKq7C,GAAekgC,mBAQjD,GANKlgC,EAAaC,8BAAmD38C,IAAxB0xF,IAE5ClS,EAAcA,EAAakS,IAIvBlS,EAAc,CAElB,IAAImS,GAAU,EAETnS,IAAgB8K,IAEpB3P,GAAIgF,gBAAiB,MAAOH,GAE5BmS,GAAU,GAIX,IAEC,MAAMp5E,EAAUmkC,EAAankC,QACvBq5E,EAAgBr5E,EAAQ9D,OACxBwqE,EAAc1mE,EAAQpa,KAE5B,GA1mzBe,OA0mzBVyzF,GAAgChX,GAAMoD,QAAS4T,KAAoBjX,GAAIlqB,aAAc,OAGzF,YADA9yD,QAAQ0R,MAAO,6GAKhB,KA/nzBqB,OA+nzBhB4vE,GAAoCrE,GAAMoD,QAASiB,KAAkBtE,GAAIlqB,aAAc,QAznzB9E,OA0nzBTwuB,IAA+Br+B,EAAaC,UAAYzG,EAAW/4C,IAAK,sBAAyB+4C,EAAW/4C,IAAK,8BAznzBpG,OA0nzBb49E,IAAmCr+B,EAAaC,SAAWzG,EAAW/4C,IAAK,0BAA6B+4C,EAAW/4C,IAAK,iCAG5H,YADA1D,QAAQ0R,MAAO,uHAK6B,QAAxCsrE,GAAIkX,uBAAwB,OAIzB5pF,GAAK,GAAKA,GAAOy0C,EAAalvC,MAAQA,GAAetC,GAAK,GAAKA,GAAOwxC,EAAajvC,OAASA,GAElGktE,GAAImX,WAAY7pF,EAAGiD,EAAGsC,EAAOC,EAAQmtE,GAAMoD,QAAS4T,GAAiBhX,GAAMoD,QAASiB,GAAe/9B,GAMpGvjD,QAAQ0R,MAAO,sHAMXsiF,GAEJhX,GAAIgF,gBAAiB,MAAO2K,MAUhCjrF,KAAK0yF,yBAA2B,SAAWtoE,EAAUlR,EAASy5E,QAE9ChyF,IAAVgyF,IAAsBA,EAAQ,GAEnC,MAAMC,EAAav1F,KAAKkL,IAAK,GAAKoqF,GAC5BxkF,EAAQ9Q,KAAKqL,MAAOwQ,EAAQhF,MAAM/F,MAAQykF,GAC1CxkF,EAAS/Q,KAAKqL,MAAOwQ,EAAQhF,MAAM9F,OAASwkF,GAC5ClW,EAAWnB,GAAMoD,QAASzlE,EAAQ9D,QAExCyB,EAASknE,aAAc7kE,EAAS,GAEhCoiE,GAAIuX,eAAgB,KAAMF,EAAOjW,EAAUtyD,EAASxhB,EAAGwhB,EAASve,EAAGsC,EAAOC,EAAQ,GAElFkhD,EAAM2rB,iBAIPj7E,KAAK8yF,qBAAuB,SAAW1oE,EAAU2oE,EAAYC,EAAYL,QAEzDhyF,IAAVgyF,IAAsBA,EAAQ,GAEnC,MAAMxkF,EAAQ4kF,EAAW7+E,MAAM/F,MACzBC,EAAS2kF,EAAW7+E,MAAM9F,OAC1BsuE,EAAWnB,GAAMoD,QAASqU,EAAW59E,QACrCunE,EAASpB,GAAMoD,QAASqU,EAAWl0F,MAEzC+X,EAASknE,aAAciV,EAAY,GAInC1X,GAAIiD,YAAa,MAAOyU,EAAWh9E,OACnCslE,GAAIiD,YAAa,MAAOyU,EAAWj9E,kBACnCulE,GAAIiD,YAAa,KAAMyU,EAAW/8E,iBAE7B88E,EAAWj0C,cAEfw8B,GAAI2X,cAAe,KAAMN,EAAOvoE,EAASxhB,EAAGwhB,EAASve,EAAGsC,EAAOC,EAAQsuE,EAAUC,EAAQoW,EAAW7+E,MAAMge,MAIrG6gE,EAAWtU,oBAEfnD,GAAI4X,wBAAyB,KAAMP,EAAOvoE,EAASxhB,EAAGwhB,EAASve,EAAGknF,EAAWt9E,QAAS,GAAItH,MAAO4kF,EAAWt9E,QAAS,GAAIrH,OAAQsuE,EAAUqW,EAAWt9E,QAAS,GAAIyc,MAInKopD,GAAI2X,cAAe,KAAMN,EAAOvoE,EAASxhB,EAAGwhB,EAASve,EAAG6wE,EAAUC,EAAQoW,EAAW7+E,OAOxE,IAAVy+E,GAAeK,EAAWl9E,iBAAkBwlE,GAAIe,eAAgB,MAErE/sB,EAAM2rB,iBAIPj7E,KAAKs+E,YAAc,SAAWplE,GAE7BrC,EAASknE,aAAc7kE,EAAS,GAEhCo2C,EAAM2rB,iBAI4B,oBAAvBkY,oBAEXA,mBAAmBnpF,cAAe,IAAIopF,YAAa,UAAW,CAAEC,OAAQrzF,QAM1E,SAASszF,GAAgB3hE,GAExBg4D,GAAchkF,KAAM3F,KAAM2xB,GAv0G3BixD,GAAYthF,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQqlC,GAAkBn6C,WAAa,CAEpF4B,YAAa0/E,GAEbgO,eAAe,IAYhB/N,GAAMvhF,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAErE4B,YAAa2/E,GAEb0N,SAAS,IAYVvxF,OAAOuG,OAAQu9E,GAAgBxhF,UAAW,CAEzC4B,YAAa4/E,GAEbkC,aAAc,WAEb,GAAoB,OAAfhlF,KAAKijF,QAETjjF,KAAKijF,MAAQ,IAAIJ,GACjB7iF,KAAKijF,MAAMptE,kBAAmB,EAC9B7V,KAAKijF,MAAMr1D,SAAU,EAErB5tB,KAAKijF,MAAMsQ,OAAS,GACpBvzF,KAAKijF,MAAMuQ,WAAa,CAAEC,UAAU,GAE/Bj2F,OAAOk2F,QAEX,IAAM,IAAIvpF,EAAI,EAAGA,GAAK3M,OAAOk2F,OAAOC,mBAAoBxpF,IAAO,CAG9D,MAAMypF,EAAQ,IAAI/Q,GAClB+Q,EAAM/9E,kBAAmB,EACzB+9E,EAAMhmE,SAAU,EAChB5tB,KAAKijF,MAAMsQ,OAAOp1F,KAAMy1F,GAExB5zF,KAAKijF,MAAMhiE,IAAK2yE,GAQnB,OAAO5zF,KAAKijF,OAIb2B,kBAAmB,WAUlB,OARyB,OAApB5kF,KAAK+iF,aAET/iF,KAAK+iF,WAAa,IAAIF,GACtB7iF,KAAK+iF,WAAWltE,kBAAmB,EACnC7V,KAAK+iF,WAAWn1D,SAAU,GAIpB5tB,KAAK+iF,YAIb+B,aAAc,WAUb,OARoB,OAAf9kF,KAAKgjF,QAEThjF,KAAKgjF,MAAQ,IAAIH,GACjB7iF,KAAKgjF,MAAMntE,kBAAmB,EAC9B7V,KAAKgjF,MAAMp1D,SAAU,GAIf5tB,KAAKgjF,OAIbh5E,cAAe,SAAWC,GAoBzB,OAlByB,OAApBjK,KAAK+iF,YAET/iF,KAAK+iF,WAAW/4E,cAAeC,GAIZ,OAAfjK,KAAKgjF,OAEThjF,KAAKgjF,MAAMh5E,cAAeC,GAIP,OAAfjK,KAAKijF,OAETjjF,KAAKijF,MAAMj5E,cAAeC,GAIpBjK,MAIRkkF,WAAY,SAAWF,GAsBtB,OApBAhkF,KAAKgK,cAAe,CAAElL,KAAM,eAAgBozB,KAAM8xD,IAEzB,OAApBhkF,KAAK+iF,aAET/iF,KAAK+iF,WAAWn1D,SAAU,GAIP,OAAf5tB,KAAKgjF,QAEThjF,KAAKgjF,MAAMp1D,SAAU,GAIF,OAAf5tB,KAAKijF,QAETjjF,KAAKijF,MAAMr1D,SAAU,GAIf5tB,MAIR6E,OAAQ,SAAWm/E,EAAajjC,EAAOqiC,GAEtC,IAAIyQ,EAAY,KACZC,EAAW,KACXC,EAAW,KAEf,MAAMC,EAAYh0F,KAAK+iF,WACjBkR,EAAOj0F,KAAKgjF,MACZkR,EAAOl0F,KAAKijF,MAElB,GAAKe,EAEJ,GAAKkQ,GAAQlQ,EAAYkQ,KAAO,CAE/BH,GAAW,EAEX,IAAM,IAAI5pF,EAAI,EAAGA,GAAK3M,OAAOk2F,OAAOC,mBAAoBxpF,IAEvD,GAAK65E,EAAYkQ,KAAM/pF,GAAM,CAG5B,MAAMgqF,EAAYpzC,EAAMqzC,aAAcpQ,EAAYkQ,KAAM/pF,GAAKi5E,GACvDwQ,EAAQM,EAAKX,OAAQppF,GAER,OAAdgqF,IAEJP,EAAMlhF,OAAO/B,UAAWwjF,EAAU1M,UAAU/0E,QAC5CkhF,EAAMlhF,OAAO4b,UAAWslE,EAAMxpE,SAAUwpE,EAAMjgF,SAAUigF,EAAMvpE,OAC9DupE,EAAMS,YAAcF,EAAUv0E,QAI/Bg0E,EAAMhmE,QAAwB,OAAdumE,EAKhB,MAAMG,EAAWJ,EAAKX,OAAQ/1F,OAAOk2F,OAAOa,mBACtCC,EAAWN,EAAKX,OAAQ/1F,OAAOk2F,OAAOe,mBACtCvlE,EAAWolE,EAASlqE,SAASpG,WAAYwwE,EAASpqE,UAElDsqE,EAAkB,IAClBC,EAAY,KAEbT,EAAKV,WAAWC,UAAYvkE,EAAWwlE,EAAkBC,GAE7DT,EAAKV,WAAWC,UAAW,EAC3BzzF,KAAKgK,cAAe,CACnBlL,KAAM,WACN81F,WAAY5Q,EAAY4Q,WACxB5rF,OAAQhJ,SAGIk0F,EAAKV,WAAWC,UAAYvkE,GAAYwlE,EAAkBC,IAEvET,EAAKV,WAAWC,UAAW,EAC3BzzF,KAAKgK,cAAe,CACnBlL,KAAM,aACN81F,WAAY5Q,EAAY4Q,WACxB5rF,OAAQhJ,cAWO,OAAdg0F,IAEJH,EAAY9yC,EAAM8zC,QAAS7Q,EAAY8Q,eAAgB1R,GAEpC,OAAdyQ,IAEJG,EAAUthF,OAAO/B,UAAWkjF,EAAUpM,UAAU/0E,QAChDshF,EAAUthF,OAAO4b,UAAW0lE,EAAU5pE,SAAU4pE,EAAUrgF,SAAUqgF,EAAU3pE,SAMlE,OAAT4pE,GAAiBjQ,EAAY+Q,YAEjCjB,EAAW/yC,EAAM8zC,QAAS7Q,EAAY+Q,UAAW3R,GAE/B,OAAb0Q,IAEJG,EAAKvhF,OAAO/B,UAAWmjF,EAASrM,UAAU/0E,QAC1CuhF,EAAKvhF,OAAO4b,UAAW2lE,EAAK7pE,SAAU6pE,EAAKtgF,SAAUsgF,EAAK5pE,SA4B9D,OAlBmB,OAAd2pE,IAEJA,EAAUpmE,QAA0B,OAAdimE,GAIT,OAATI,IAEJA,EAAKrmE,QAAyB,OAAbkmE,GAIJ,OAATI,IAEJA,EAAKtmE,QAAyB,OAAbmmE,GAIX/zF,QAqeThB,OAAOuG,OAAQ29E,GAAa5hF,UAAWkI,EAAgBlI,WA6lFvDgyF,GAAehyF,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQuzE,GAAcroF,WAAa,CAEnF4B,YAAaowF,GAEbtG,kBAAkB,IAInB,MAAMgI,GAELp2F,YAAayhC,EAAO4nD,GAEnBjpF,OAAO2C,eAAgB3B,KAAM,YAAa,CAAEnB,OAAO,IAEnDmB,KAAKmB,KAAO,GAEZnB,KAAKqgC,MAAQ,IAAIX,GAAOW,GACxBrgC,KAAKioF,aAAwBtnF,IAAZsnF,EAA0BA,EAAU,MAItDrpF,QAEC,OAAO,IAAIo2F,GAASh1F,KAAKqgC,MAAOrgC,KAAKioF,SAItCrpF,SAEC,MAAO,CACNE,KAAM,UACNuhC,MAAOrgC,KAAKqgC,MAAMY,SAClBgnD,QAASjoF,KAAKioF,UAOjB,MAAMgN,GAELr2F,YAAayhC,EAAO/U,EAAMC,GAEzBvsB,OAAO2C,eAAgB3B,KAAM,QAAS,CAAEnB,OAAO,IAE/CmB,KAAKmB,KAAO,GAEZnB,KAAKqgC,MAAQ,IAAIX,GAAOW,GAExBrgC,KAAKsrB,UAAkB3qB,IAAT2qB,EAAuBA,EAAO,EAC5CtrB,KAAKurB,SAAgB5qB,IAAR4qB,EAAsBA,EAAM,IAI1C3sB,QAEC,OAAO,IAAIq2F,GAAKj1F,KAAKqgC,MAAOrgC,KAAKsrB,KAAMtrB,KAAKurB,KAI7C3sB,SAEC,MAAO,CACNE,KAAM,MACNuhC,MAAOrgC,KAAKqgC,MAAMY,SAClB3V,KAAMtrB,KAAKsrB,KACXC,IAAKvrB,KAAKurB,MAOb,MAAM2pE,WAAc/nE,GAEnBvuB,cAECmB,QAEAf,OAAO2C,eAAgB3B,KAAM,UAAW,CAAEnB,OAAO,IAEjDmB,KAAKlB,KAAO,QAEZkB,KAAK2uD,WAAa,KAClB3uD,KAAKorE,YAAc,KACnBprE,KAAKgiC,IAAM,KAEXhiC,KAAKosF,iBAAmB,KAExBpsF,KAAKg0E,YAAa,EAEiB,oBAAvBmf,oBAEXA,mBAAmBnpF,cAAe,IAAIopF,YAAa,UAAW,CAAEC,OAAQrzF,QAM1EpB,KAAM0K,EAAQ6oB,GAab,OAXApyB,MAAM0W,KAAMnN,EAAQ6oB,GAEO,OAAtB7oB,EAAOqlD,aAAsB3uD,KAAK2uD,WAAarlD,EAAOqlD,WAAWn4C,SAC1C,OAAvBlN,EAAO8hE,cAAuBprE,KAAKorE,YAAc9hE,EAAO8hE,YAAY50D,SACrD,OAAflN,EAAO04B,MAAehiC,KAAKgiC,IAAM14B,EAAO04B,IAAIxrB,SAEhB,OAA5BlN,EAAO8iF,mBAA4BpsF,KAAKosF,iBAAmB9iF,EAAO8iF,iBAAiB51E,SAExFxW,KAAKg0E,WAAa1qE,EAAO0qE,WACzBh0E,KAAK6V,iBAAmBvM,EAAOuM,iBAExB7V,KAIRpB,OAAQ+X,GAEP,MAAMub,EAAOnyB,MAAM2W,OAAQC,GAM3B,OAJyB,OAApB3W,KAAK2uD,aAAsBz8B,EAAKhR,OAAOytC,WAAa3uD,KAAK2uD,WAAWj4C,OAAQC,IACvD,OAArB3W,KAAKorE,cAAuBl5C,EAAKhR,OAAOkqD,YAAcprE,KAAKorE,YAAY10D,OAAQC,IAClE,OAAb3W,KAAKgiC,MAAe9P,EAAKhR,OAAO8gB,IAAMhiC,KAAKgiC,IAAItrB,UAE7Cwb,GAMT,SAASijE,GAAmBjrF,EAAO4oD,GAElC9yD,KAAKkK,MAAQA,EACblK,KAAK8yD,OAASA,EACd9yD,KAAK0gB,WAAkB/f,IAAVuJ,EAAsBA,EAAMb,OAASypD,EAAS,EAE3D9yD,KAAKooC,MA/xzBkB,MAgyzBvBpoC,KAAKqoC,YAAc,CAAE34B,OAAQ,EAAGgR,OAAS,GAEzC1gB,KAAKkW,QAAU,EAEflW,KAAKuV,KAAOhL,EAAUI,eAIvB3L,OAAO2C,eAAgBwzF,GAAkB7zF,UAAW,cAAe,CAElET,IAAK,SAAWhC,IAEA,IAAVA,GAAiBmB,KAAKkW,aAM7BlX,OAAOuG,OAAQ4vF,GAAkB7zF,UAAW,CAE3C8zF,qBAAqB,EAErB3rD,iBAAkB,aAElBC,SAAU,SAAW7qC,GAIpB,OAFAmB,KAAKooC,MAAQvpC,EAENmB,MAIRyW,KAAM,SAAWnN,GAOhB,OALAtJ,KAAKkK,MAAQ,IAAIZ,EAAOY,MAAMhH,YAAaoG,EAAOY,OAClDlK,KAAK0gB,MAAQpX,EAAOoX,MACpB1gB,KAAK8yD,OAASxpD,EAAOwpD,OACrB9yD,KAAKooC,MAAQ9+B,EAAO8+B,MAEbpoC,MAIR2pC,OAAQ,SAAWC,EAAQnqC,EAAWoqC,GAErCD,GAAU5pC,KAAK8yD,OACfjpB,GAAUpqC,EAAUqzD,OAEpB,IAAM,IAAI3oD,EAAI,EAAGC,EAAIpK,KAAK8yD,OAAQ3oD,EAAIC,EAAGD,IAExCnK,KAAKkK,MAAO0/B,EAASz/B,GAAM1K,EAAUyK,MAAO2/B,EAAS1/B,GAItD,OAAOnK,MAIRa,IAAK,SAAWhC,EAAO6Q,GAMtB,YAJgB/O,IAAX+O,IAAuBA,EAAS,GAErC1P,KAAKkK,MAAMrJ,IAAKhC,EAAO6Q,GAEhB1P,MAIRwW,MAAO,SAAW0b,QAEUvxB,IAAtBuxB,EAAKmjE,eAETnjE,EAAKmjE,aAAe,SAIY10F,IAA5BX,KAAKkK,MAAM23C,OAAOyzC,QAEtBt1F,KAAKkK,MAAM23C,OAAOyzC,MAAQ/qF,EAAUI,qBAIiBhK,IAAjDuxB,EAAKmjE,aAAcr1F,KAAKkK,MAAM23C,OAAOyzC,SAEzCpjE,EAAKmjE,aAAcr1F,KAAKkK,MAAM23C,OAAOyzC,OAAUt1F,KAAKkK,MAAM3M,MAAO,GAAIskD,QAItE,MAEM0zC,EAAK,IAAIJ,GAFD,IAAIn1F,KAAKkK,MAAMhH,YAAagvB,EAAKmjE,aAAcr1F,KAAKkK,MAAM23C,OAAOyzC,QAEtCt1F,KAAK8yD,QAG9C,OAFAyiC,EAAG7rD,SAAU1pC,KAAKooC,OAEXmtD,GAIRzqD,SAAU,SAAWvtB,GAIpB,OAFAvd,KAAKypC,iBAAmBlsB,EAEjBvd,MAIR0W,OAAQ,SAAWwb,GAwBlB,YAtB2BvxB,IAAtBuxB,EAAKmjE,eAETnjE,EAAKmjE,aAAe,SAMY10F,IAA5BX,KAAKkK,MAAM23C,OAAOyzC,QAEtBt1F,KAAKkK,MAAM23C,OAAOyzC,MAAQ/qF,EAAUI,qBAIiBhK,IAAjDuxB,EAAKmjE,aAAcr1F,KAAKkK,MAAM23C,OAAOyzC,SAEzCpjE,EAAKmjE,aAAcr1F,KAAKkK,MAAM23C,OAAOyzC,OAAUr2F,MAAMqC,UAAU/D,MAAMoI,KAAM,IAAIwjC,YAAanpC,KAAKkK,MAAM23C,UAMjG,CACNtsC,KAAMvV,KAAKuV,KACXssC,OAAQ7hD,KAAKkK,MAAM23C,OAAOyzC,MAC1Bx2F,KAAMkB,KAAKkK,MAAMhH,YAAY/B,KAC7B2xD,OAAQ9yD,KAAK8yD,WAOhB,MAAM0iC,GAAY,IAAIh4E,EAEtB,SAASi4E,GAA4BC,EAAmBvtD,EAAUz4B,EAAQ8xB,GAEzExhC,KAAKmB,KAAO,GAEZnB,KAAKkyB,KAAOwjE,EACZ11F,KAAKmoC,SAAWA,EAChBnoC,KAAK0P,OAASA,EAEd1P,KAAKwhC,YAA4B,IAAfA,EAuQnB,SAASupC,GAAgBp5C,GAExBoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,iBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKqkC,IAAM,KAEXrkC,KAAK2kC,SAAW,KAEhB3kC,KAAK2T,SAAW,EAEhB3T,KAAKwnC,iBAAkB,EAEvBxnC,KAAKqiC,aAAc,EAEnBriC,KAAKslC,UAAW3T,GA0BjB,IAAIgkE,GA/SJ32F,OAAOuuB,iBAAkBkoE,GAA2Bn0F,UAAW,CAE9Dof,MAAO,CAEN1e,IAAK,WAEJ,OAAOhC,KAAKkyB,KAAKxR,QAMnBxW,MAAO,CAENlI,IAAK,WAEJ,OAAOhC,KAAKkyB,KAAKhoB,QAMnB8jC,YAAa,CAEZntC,IAAK,SAAWhC,GAEfmB,KAAKkyB,KAAK8b,YAAcnvC,MAQ3BG,OAAOuG,OAAQkwF,GAA2Bn0F,UAAW,CAEpDqgD,8BAA8B,EAE9BpjC,aAAc,SAAWjT,GAExB,IAAM,IAAInB,EAAI,EAAGC,EAAIpK,KAAKkyB,KAAKxR,MAAOvW,EAAIC,EAAGD,IAE5CqrF,GAAU5sF,EAAI5I,KAAK2P,KAAMxF,GACzBqrF,GAAU3pF,EAAI7L,KAAK4P,KAAMzF,GACzBqrF,GAAU/9E,EAAIzX,KAAK4Y,KAAMzO,GAEzBqrF,GAAUj3E,aAAcjT,GAExBtL,KAAKuqC,OAAQpgC,EAAGqrF,GAAU5sF,EAAG4sF,GAAU3pF,EAAG2pF,GAAU/9E,GAIrD,OAAOzX,MAIRyqC,KAAM,SAAWthC,EAAOP,GAIvB,OAFA5I,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,QAAW9G,EAErD5I,MAIR0qC,KAAM,SAAWvhC,EAAO0C,GAIvB,OAFA7L,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,GAAM7D,EAEzD7L,MAIR2qC,KAAM,SAAWxhC,EAAOsO,GAIvB,OAFAzX,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,GAAM+H,EAEzDzX,MAIR4qC,KAAM,SAAWzhC,EAAOoF,GAIvB,OAFAvO,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,GAAMnB,EAEzDvO,MAIR2P,KAAM,SAAWxG,GAEhB,OAAOnJ,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,SAIzDE,KAAM,SAAWzG,GAEhB,OAAOnJ,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,IAIlEkJ,KAAM,SAAWzP,GAEhB,OAAOnJ,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,IAIlEmJ,KAAM,SAAW1P,GAEhB,OAAOnJ,KAAKkyB,KAAKhoB,MAAOf,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAAS,IAIlE46B,MAAO,SAAWnhC,EAAOP,EAAGiD,GAO3B,OALA1C,EAAQA,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAExC1P,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMP,EAC/B5I,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAM0C,EAExB7L,MAIRuqC,OAAQ,SAAWphC,EAAOP,EAAGiD,EAAG4L,GAQ/B,OANAtO,EAAQA,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAExC1P,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMP,EAC/B5I,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAM0C,EAC/B7L,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMsO,EAExBzX,MAIR6qC,QAAS,SAAW1hC,EAAOP,EAAGiD,EAAG4L,EAAGlJ,GASnC,OAPApF,EAAQA,EAAQnJ,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAExC1P,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMP,EAC/B5I,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAM0C,EAC/B7L,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMsO,EAC/BzX,KAAKkyB,KAAKhoB,MAAOf,EAAQ,GAAMoF,EAExBvO,MAIRwW,MAAO,SAAW0b,GAEjB,QAAcvxB,IAATuxB,EAAqB,CAEzB5zB,QAAQyO,IAAK,mHAEb,MAAM7C,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAGA,EAAInK,KAAK0gB,MAAOvW,IAAO,CAEvC,MAAMhB,EAAQgB,EAAInK,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAE1C,IAAM,IAAI6T,EAAI,EAAGA,EAAIvjB,KAAKmoC,SAAU5kB,IAEnCrZ,EAAM/L,KAAM6B,KAAKkyB,KAAKhoB,MAAOf,EAAQoa,IAMvC,OAAO,IAAI2kB,GAAiB,IAAIloC,KAAKkK,MAAMhH,YAAagH,GAASlK,KAAKmoC,SAAUnoC,KAAKwhC,YAgBrF,YAZiC7gC,IAA5BuxB,EAAK0jE,qBAET1jE,EAAK0jE,mBAAqB,SAIwBj1F,IAA9CuxB,EAAK0jE,mBAAoB51F,KAAKkyB,KAAK3c,QAEvC2c,EAAK0jE,mBAAoB51F,KAAKkyB,KAAK3c,MAASvV,KAAKkyB,KAAK1b,MAAO0b,IAIvD,IAAIujE,GAA4BvjE,EAAK0jE,mBAAoB51F,KAAKkyB,KAAK3c,MAAQvV,KAAKmoC,SAAUnoC,KAAK0P,OAAQ1P,KAAKwhC,aAMrH9qB,OAAQ,SAAWwb,GAElB,QAAcvxB,IAATuxB,EAAqB,CAEzB5zB,QAAQyO,IAAK,wHAEb,MAAM7C,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAGA,EAAInK,KAAK0gB,MAAOvW,IAAO,CAEvC,MAAMhB,EAAQgB,EAAInK,KAAKkyB,KAAK4gC,OAAS9yD,KAAK0P,OAE1C,IAAM,IAAI6T,EAAI,EAAGA,EAAIvjB,KAAKmoC,SAAU5kB,IAEnCrZ,EAAM/L,KAAM6B,KAAKkyB,KAAKhoB,MAAOf,EAAQoa,IAQvC,MAAO,CACN4kB,SAAUnoC,KAAKmoC,SACfrpC,KAAMkB,KAAKkK,MAAMhH,YAAY/B,KAC7B+I,MAAOA,EACPs3B,WAAYxhC,KAAKwhC,YAmBlB,YAZiC7gC,IAA5BuxB,EAAK0jE,qBAET1jE,EAAK0jE,mBAAqB,SAIwBj1F,IAA9CuxB,EAAK0jE,mBAAoB51F,KAAKkyB,KAAK3c,QAEvC2c,EAAK0jE,mBAAoB51F,KAAKkyB,KAAK3c,MAASvV,KAAKkyB,KAAKxb,OAAQwb,IAIxD,CACNyvB,8BAA8B,EAC9BxZ,SAAUnoC,KAAKmoC,SACfjW,KAAMlyB,KAAKkyB,KAAK3c,KAChB7F,OAAQ1P,KAAK0P,OACb8xB,WAAYxhC,KAAKwhC,eAyCrBupC,GAAezpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACnDypE,GAAezpE,UAAU4B,YAAc6nE,GACvCA,GAAezpE,UAAUkoF,kBAAmB,EAE5Cze,GAAezpE,UAAUmV,KAAO,SAAWnN,GAc1C,OAZAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAK2T,SAAWrK,EAAOqK,SAEvB3T,KAAKwnC,gBAAkBl+B,EAAOk+B,gBAEvBxnC,MAMR,MAAM61F,GAAkB,IAAIr4E,EACtBs4E,GAAc,IAAIt4E,EAClBu4E,GAAc,IAAIv4E,EAElBw4E,GAAmB,IAAI9nF,EACvB+nF,GAAmB,IAAI/nF,EACvBgoF,GAAmB,IAAI5uE,GAEvB6uE,GAAQ,IAAI34E,EACZ44E,GAAQ,IAAI54E,EACZ64E,GAAQ,IAAI74E,EAEZ84E,GAAS,IAAIpoF,EACbqoF,GAAS,IAAIroF,EACbsoF,GAAS,IAAItoF,EAEnB,SAASuoF,GAAQ5kE,GAMhB,GAJA1E,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,cAEO6B,IAAdg1F,GAA0B,CAE9BA,GAAY,IAAIvoD,GAEhB,MAOMsoD,EAAoB,IAAIP,GAPT,IAAI9rD,aAAc,EACpC,IAAO,GAAK,EAAG,EAAG,EACpB,IAAO,GAAK,EAAG,EAAG,EAClB,GAAK,GAAK,EAAG,EAAG,GACd,GAAK,GAAK,EAAG,EAAG,IAG4C,GAE/DssD,GAAUjoD,SAAU,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,IACrCioD,GAAUhyF,aAAc,WAAY,IAAI8xF,GAA4BC,EAAmB,EAAG,GAAG,IAC7FC,GAAUhyF,aAAc,KAAM,IAAI8xF,GAA4BC,EAAmB,EAAG,GAAG,IAIxF11F,KAAK0hB,SAAWi0E,GAChB31F,KAAK6xB,cAA0BlxB,IAAbkxB,EAA2BA,EAAW,IAAIk5C,GAE5D/qE,KAAK6P,OAAS,IAAI3B,EAAS,GAAK,IAmGjC,SAASwoF,GAAiBC,EAAgBC,EAAY/mF,EAAQwa,EAAO5c,EAAKD,GAGzEwoF,GAAiBvnF,WAAYkoF,EAAgB9mF,GAAS2R,UAAW,IAAMoN,SAAUvE,QAGpE1pB,IAAR8M,GAEJwoF,GAAiBrtF,EAAM4E,EAAMwoF,GAAiBptF,EAAQ6E,EAAMuoF,GAAiBnqF,EAC7EoqF,GAAiBpqF,EAAM4B,EAAMuoF,GAAiBptF,EAAQ4E,EAAMwoF,GAAiBnqF,GAI7EoqF,GAAiBx/E,KAAMu/E,IAKxBW,EAAelgF,KAAMmgF,GACrBD,EAAe/tF,GAAKqtF,GAAiBrtF,EACrC+tF,EAAe9qF,GAAKoqF,GAAiBpqF,EAGrC8qF,EAAep4E,aAAc23E,IAtH9BO,GAAOn1F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEtE4B,YAAauzF,GAEbxG,UAAU,EAEVx/D,QAAS,SAAWsiB,EAAWa,GAEJ,OAArBb,EAAUz0B,QAEdhgB,QAAQ0R,MAAO,yFAIhB8lF,GAAYe,mBAAoB72F,KAAK2e,aAErCu3E,GAAiBz/E,KAAMs8B,EAAUz0B,OAAOK,aACxC3e,KAAKwtB,gBAAgBvc,iBAAkB8hC,EAAUz0B,OAAOE,mBAAoBxe,KAAK2e,aAEjFo3E,GAAYtmE,sBAAuBzvB,KAAKwtB,iBAEnCulB,EAAUz0B,OAAO69B,sBAAyD,IAAlCn8C,KAAK6xB,SAAS2V,iBAE1DsuD,GAAYpnF,gBAAkBqnF,GAAYt+E,GAI3C,MAAM9D,EAAW3T,KAAK6xB,SAASle,SAC/B,IAAIlG,EAAKD,EAES,IAAbmG,IAEJnG,EAAMnQ,KAAKmQ,IAAKmG,GAChBlG,EAAMpQ,KAAKoQ,IAAKkG,IAIjB,MAAM9D,EAAS7P,KAAK6P,OAEpB6mF,GAAiBP,GAAMt1F,KAAO,IAAO,GAAK,GAAKk1F,GAAalmF,EAAQimF,GAAaroF,EAAKD,GACtFkpF,GAAiBN,GAAMv1F,IAAK,IAAO,GAAK,GAAKk1F,GAAalmF,EAAQimF,GAAaroF,EAAKD,GACpFkpF,GAAiBL,GAAMx1F,IAAK,GAAK,GAAK,GAAKk1F,GAAalmF,EAAQimF,GAAaroF,EAAKD,GAElF8oF,GAAOz1F,IAAK,EAAG,GACf01F,GAAO11F,IAAK,EAAG,GACf21F,GAAO31F,IAAK,EAAG,GAGf,IAAImyC,EAAYD,EAAU9tB,IAAIguB,kBAAmBkjD,GAAOC,GAAOC,IAAO,EAAOR,IAE7E,GAAmB,OAAd7iD,IAGJ0jD,GAAiBN,GAAMv1F,KAAO,GAAK,GAAK,GAAKk1F,GAAalmF,EAAQimF,GAAaroF,EAAKD,GACpF+oF,GAAO11F,IAAK,EAAG,GAEfmyC,EAAYD,EAAU9tB,IAAIguB,kBAAmBkjD,GAAOE,GAAOD,IAAO,EAAOP,IACtD,OAAd7iD,GAEJ,OAMF,MAAM9jB,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAY6xE,IAE7C3mE,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,KAEvDqoB,EAAWz1C,KAAM,CAEhB+wB,SAAUA,EACV5N,MAAOu0E,GAAgBr/E,QACvBc,GAAI2c,GAASqB,MAAOugE,GAAiBM,GAAOC,GAAOC,GAAOC,GAAQC,GAAQC,GAAQ,IAAItoF,GACtF69B,KAAM,KACN7qB,OAAQlhB,QAMVyW,KAAM,SAAWnN,GAQhB,OANA6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,QAEb3I,IAAlB2I,EAAOuG,QAAuB7P,KAAK6P,OAAO4G,KAAMnN,EAAOuG,QAE5D7P,KAAK6xB,SAAWvoB,EAAOuoB,SAEhB7xB,QAiCT,MAAM82F,GAAQ,IAAIt5E,EACZu5E,GAAQ,IAAIv5E,EAElB,SAASw5E,KAER7pE,GAASxnB,KAAM3F,MAEfA,KAAKi3F,cAAgB,EAErBj3F,KAAKlB,KAAO,MAEZE,OAAOuuB,iBAAkBvtB,KAAM,CAC9Bk3F,OAAQ,CACPn1F,YAAY,EACZlD,MAAO,MAITmB,KAAKg0E,YAAa,EA+KnB,SAASmjB,GAAaz1E,EAAUmQ,GAE1BnQ,GAAYA,EAASktB,YAEzBtwC,QAAQ0R,MAAO,0FAIhB4iC,GAAKjtC,KAAM3F,KAAM0hB,EAAUmQ,GAE3B7xB,KAAKlB,KAAO,cAEZkB,KAAKo3F,SAAW,WAChBp3F,KAAKq3F,WAAa,IAAI/vE,GACtBtnB,KAAKs3F,kBAAoB,IAAIhwE,GAzL9B0vE,GAAI11F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEnE4B,YAAa8zF,GAEbxG,OAAO,EAEP/5E,KAAM,SAAWnN,GAEhB6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAAQ,GAE5C,MAAM4tF,EAAS5tF,EAAO4tF,OAEtB,IAAM,IAAI/sF,EAAI,EAAGC,EAAI8sF,EAAO7tF,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMwoF,EAAQuE,EAAQ/sF,GAEtBnK,KAAKu3F,SAAU5E,EAAMzxE,OAAO1K,QAASm8E,EAAMzjE,UAM5C,OAFAlvB,KAAKg0E,WAAa1qE,EAAO0qE,WAElBh0E,MAIRu3F,SAAU,SAAWr2E,EAAQgO,QAEVvuB,IAAbuuB,IAAyBA,EAAW,GAEzCA,EAAW7xB,KAAK4R,IAAKigB,GAErB,MAAMgoE,EAASl3F,KAAKk3F,OAEpB,IAAI9sF,EAEJ,IAAMA,EAAI,EAAGA,EAAI8sF,EAAO7tF,UAElB6lB,EAAWgoE,EAAQ9sF,GAAI8kB,UAFG9kB,KAchC,OAJA8sF,EAAOntF,OAAQK,EAAG,EAAG,CAAE8kB,SAAUA,EAAUhO,OAAQA,IAEnDlhB,KAAKihB,IAAKC,GAEHlhB,MAIRw3F,gBAAiB,WAEhB,OAAOx3F,KAAKi3F,eAIbQ,qBAAsB,SAAWvoE,GAEhC,MAAMgoE,EAASl3F,KAAKk3F,OAEpB,GAAKA,EAAO7tF,OAAS,EAAI,CAExB,IAAIc,EAAGC,EAEP,IAAMD,EAAI,EAAGC,EAAI8sF,EAAO7tF,OAAQc,EAAIC,KAE9B8kB,EAAWgoE,EAAQ/sF,GAAI+kB,UAFU/kB,KAUvC,OAAO+sF,EAAQ/sF,EAAI,GAAI+W,OAIxB,OAAO,MAIRuP,QAAS,SAAWsiB,EAAWa,GAI9B,GAFe5zC,KAAKk3F,OAER7tF,OAAS,EAAI,CAExBytF,GAAMrnE,sBAAuBzvB,KAAK2e,aAElC,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAY8yE,IAElD92F,KAAKy3F,qBAAsBvoE,GAAWuB,QAASsiB,EAAWa,KAM5D/uC,OAAQ,SAAWyZ,GAElB,MAAM44E,EAASl3F,KAAKk3F,OAEpB,GAAKA,EAAO7tF,OAAS,EAAI,CAExBytF,GAAMrnE,sBAAuBnR,EAAOK,aACpCo4E,GAAMtnE,sBAAuBzvB,KAAK2e,aAElC,MAAMuQ,EAAW4nE,GAAM9yE,WAAY+yE,IAAUz4E,EAAOs9B,KAIpD,IAAIzxC,EAAGC,EAEP,IAJA8sF,EAAQ,GAAIh2E,OAAO0M,SAAU,EAIvBzjB,EAAI,EAAGC,EAAI8sF,EAAO7tF,OAAQc,EAAIC,GAE9B8kB,GAAYgoE,EAAQ/sF,GAAI+kB,SAFS/kB,IAIrC+sF,EAAQ/sF,EAAI,GAAI+W,OAAO0M,SAAU,EACjCspE,EAAQ/sF,GAAI+W,OAAO0M,SAAU,EAY/B,IAFA5tB,KAAKi3F,cAAgB9sF,EAAI,EAEjBA,EAAIC,EAAGD,IAEd+sF,EAAQ/sF,GAAI+W,OAAO0M,SAAU,IAQhClX,OAAQ,SAAWC,GAElB,MAAMub,EAAO/E,GAAS7rB,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,IAE1B,IAApB3W,KAAKg0E,aAAuB9hD,EAAKhR,OAAO8yD,YAAa,GAE1D9hD,EAAKhR,OAAOg2E,OAAS,GAErB,MAAMA,EAASl3F,KAAKk3F,OAEpB,IAAM,IAAI/sF,EAAI,EAAGC,EAAI8sF,EAAO7tF,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMwoF,EAAQuE,EAAQ/sF,GAEtB+nB,EAAKhR,OAAOg2E,OAAO/4F,KAAM,CACxB+iB,OAAQyxE,EAAMzxE,OAAO3L,KACrB2Z,SAAUyjE,EAAMzjE,WAKlB,OAAOgD,KAwBTilE,GAAY71F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQw8B,GAAKtxC,WAAa,CAEvE4B,YAAai0F,GAEb5jD,eAAe,EAEf98B,KAAM,SAAWnN,GAUhB,OARAspC,GAAKtxC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEhCtJ,KAAKo3F,SAAW9tF,EAAO8tF,SACvBp3F,KAAKq3F,WAAW5gF,KAAMnN,EAAO+tF,YAC7Br3F,KAAKs3F,kBAAkB7gF,KAAMnN,EAAOguF,mBAEpCt3F,KAAKurE,SAAWjiE,EAAOiiE,SAEhBvrE,MAIR03F,KAAM,SAAWnsB,EAAU8rB,GAE1Br3F,KAAKurE,SAAWA,OAEI5qE,IAAf02F,IAEJr3F,KAAKqwB,mBAAmB,GAExBrwB,KAAKurE,SAASosB,oBAEdN,EAAar3F,KAAK2e,aAInB3e,KAAKq3F,WAAW5gF,KAAM4gF,GACtBr3F,KAAKs3F,kBAAkBlkF,WAAYikF,IAIpC/T,KAAM,WAELtjF,KAAKurE,SAAS+X,QAIfsU,qBAAsB,WAErB,MAAMr2E,EAAS,IAAI/J,EAEbqgF,EAAa73F,KAAK0hB,SAASthB,WAAWy3F,WAE5C,IAAM,IAAI1tF,EAAI,EAAGC,EAAIytF,EAAWn3E,MAAOvW,EAAIC,EAAGD,IAAO,CAEpDoX,EAAO3Y,EAAIivF,EAAWloF,KAAMxF,GAC5BoX,EAAO1V,EAAIgsF,EAAWjoF,KAAMzF,GAC5BoX,EAAO9J,EAAIogF,EAAWj/E,KAAMzO,GAC5BoX,EAAOhT,EAAIspF,EAAWh/E,KAAM1O,GAE5B,MAAMkgB,EAAQ,EAAM9I,EAAOu2E,kBAEtBztE,IAAUlK,EAAAA,EAEdoB,EAAO7S,eAAgB2b,GAIvB9I,EAAO1gB,IAAK,EAAG,EAAG,EAAG,GAItBg3F,EAAWhtD,QAAS1gC,EAAGoX,EAAO3Y,EAAG2Y,EAAO1V,EAAG0V,EAAO9J,EAAG8J,EAAOhT,KAM9D8hB,kBAAmB,SAAWQ,GAE7B+hB,GAAKtxC,UAAU+uB,kBAAkB1qB,KAAM3F,KAAM6wB,GAEtB,aAAlB7wB,KAAKo3F,SAETp3F,KAAKs3F,kBAAkBlkF,WAAYpT,KAAK2e,aAEX,aAAlB3e,KAAKo3F,SAEhBp3F,KAAKs3F,kBAAkBlkF,WAAYpT,KAAKq3F,YAIxC/4F,QAAQC,KAAM,6CAA+CyB,KAAKo3F,WAMpE5jD,cAAiB,WAEhB,MAAMukD,EAAe,IAAIv6E,EAEnBw6E,EAAY,IAAIxgF,EAChBqgF,EAAa,IAAIrgF,EAEjB+J,EAAS,IAAI/D,EACb9K,EAAS,IAAI4U,GAEnB,OAAO,SAAWne,EAAOH,GAExB,MAAMuiE,EAAWvrE,KAAKurE,SAChB7pD,EAAW1hB,KAAK0hB,SAEtBs2E,EAAU3tD,oBAAqB3oB,EAASthB,WAAW43F,UAAW7uF,GAC9D0uF,EAAWxtD,oBAAqB3oB,EAASthB,WAAWy3F,WAAY1uF,GAEhE4uF,EAAa1tD,oBAAqB3oB,EAASthB,WAAWgqB,SAAUjhB,GAAQoV,aAAcve,KAAKq3F,YAE3FruF,EAAOnI,IAAK,EAAG,EAAG,GAElB,IAAM,IAAIsJ,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAM8tF,EAASJ,EAAWK,aAAc/tF,GAExC,GAAgB,IAAX8tF,EAAe,CAEnB,MAAME,EAAYH,EAAUE,aAAc/tF,GAE1CuI,EAAOzB,iBAAkBs6D,EAASD,MAAO6sB,GAAYx5E,YAAa4sD,EAAS6sB,aAAcD,IAEzFnvF,EAAOgsB,gBAAiBzT,EAAO9K,KAAMshF,GAAex5E,aAAc7L,GAAUulF,IAM9E,OAAOjvF,EAAOuV,aAAcve,KAAKs3F,yBAQpC,MAAMe,GAAgB,IAAI/wE,GACpBgxE,GAAkB,IAAIhxE,GAE5B,SAASixE,GAAUjtB,EAAO8sB,GAazB,GATA9sB,EAAQA,GAAS,GAEjBtrE,KAAKsrE,MAAQA,EAAM/tE,MAAO,GAC1ByC,KAAK+xF,aAAe,IAAI1oD,aAAkC,GAApBrpC,KAAKsrE,MAAMjiE,QAEjDrJ,KAAK+gD,OAAU,OAIOpgD,IAAjBy3F,EAEJp4F,KAAK23F,yBAIL,GAAK33F,KAAKsrE,MAAMjiE,SAAW+uF,EAAa/uF,OAEvCrJ,KAAKo4F,aAAeA,EAAa76F,MAAO,OAElC,CAENe,QAAQC,KAAM,oDAEdyB,KAAKo4F,aAAe,GAEpB,IAAM,IAAIjuF,EAAI,EAAG0W,EAAK7gB,KAAKsrE,MAAMjiE,OAAQc,EAAI0W,EAAI1W,IAEhDnK,KAAKo4F,aAAaj6F,KAAM,IAAImpB,KA6IhC,SAASkxE,KAERrrE,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,OAvIbE,OAAOuG,OAAQgzF,GAASj3F,UAAW,CAElCq2F,kBAAmB,WAElB33F,KAAKo4F,aAAe,GAEpB,IAAM,IAAIjuF,EAAI,EAAG0W,EAAK7gB,KAAKsrE,MAAMjiE,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAM0lB,EAAU,IAAIvI,GAEftnB,KAAKsrE,MAAOnhE,IAEhB0lB,EAAQzc,WAAYpT,KAAKsrE,MAAOnhE,GAAIwU,aAIrC3e,KAAKo4F,aAAaj6F,KAAM0xB,KAM1ByzD,KAAM,WAIL,IAAM,IAAIn5E,EAAI,EAAG0W,EAAK7gB,KAAKsrE,MAAMjiE,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAMsuF,EAAOz4F,KAAKsrE,MAAOnhE,GAEpBsuF,GAEJA,EAAK95E,YAAYvL,WAAYpT,KAAKo4F,aAAcjuF,IAQlD,IAAM,IAAIA,EAAI,EAAG0W,EAAK7gB,KAAKsrE,MAAMjiE,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAMsuF,EAAOz4F,KAAKsrE,MAAOnhE,GAEpBsuF,IAECA,EAAKrrE,QAAUqrE,EAAKrrE,OAAOsrE,QAE/BD,EAAK/lF,OAAOU,WAAYqlF,EAAKrrE,OAAOzO,aACpC85E,EAAK/lF,OAAOkc,SAAU6pE,EAAK95E,cAI3B85E,EAAK/lF,OAAO+D,KAAMgiF,EAAK95E,aAIxB85E,EAAK/lF,OAAO4b,UAAWmqE,EAAKruE,SAAUquE,EAAKl9E,WAAYk9E,EAAKpuE,UAQ/DxlB,OAAQ,WAEP,MAAMymE,EAAQtrE,KAAKsrE,MACb8sB,EAAep4F,KAAKo4F,aACpBrG,EAAe/xF,KAAK+xF,aACpBD,EAAc9xF,KAAK8xF,YAIzB,IAAM,IAAI3nF,EAAI,EAAG0W,EAAKyqD,EAAMjiE,OAAQc,EAAI0W,EAAI1W,IAAO,CAIlD,MAAMuI,EAAS44D,EAAOnhE,GAAMmhE,EAAOnhE,GAAIwU,YAAc25E,GAErDD,GAAcpnF,iBAAkByB,EAAQ0lF,EAAcjuF,IACtDkuF,GAAchnE,QAAS0gE,EAAkB,GAAJ5nF,QAIjBxJ,IAAhBmxF,IAEJA,EAAY9jD,aAAc,IAM5Bx3B,MAAO,WAEN,OAAO,IAAI+hF,GAAUv4F,KAAKsrE,MAAOtrE,KAAKo4F,eAIvCO,cAAe,SAAWx3F,GAEzB,IAAM,IAAIgJ,EAAI,EAAG0W,EAAK7gB,KAAKsrE,MAAMjiE,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,MAAMsuF,EAAOz4F,KAAKsrE,MAAOnhE,GAEzB,GAAKsuF,EAAKt3F,OAASA,EAElB,OAAOs3F,IAUVrhF,QAAS,WAEHpX,KAAK8xF,cAET9xF,KAAK8xF,YAAY16E,UAEjBpX,KAAK8xF,iBAAcnxF,MAgBtB63F,GAAKl3F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEpE4B,YAAas1F,GAEbE,QAAQ,IAIT,MAAME,GAAuB,IAAItxE,GAC3BuxE,GAAuB,IAAIvxE,GAE3BwxE,GAAsB,GAEtBC,GAAQ,IAAInmD,GAElB,SAASomD,GAAet3E,EAAUmQ,EAAUnR,GAE3CkyB,GAAKjtC,KAAM3F,KAAM0hB,EAAUmQ,GAE3B7xB,KAAKuxB,eAAiB,IAAI2W,GAAiB,IAAImB,aAAsB,GAAR3oB,GAAc,IAC3E1gB,KAAKs0D,cAAgB,KAErBt0D,KAAK0gB,MAAQA,EAEb1gB,KAAK+tB,eAAgB,EAuGtB,SAAS48C,GAAmBh5C,GAE3BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,oBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKynC,UAAY,EACjBznC,KAAKi5F,QAAU,QACfj5F,KAAKk5F,SAAW,QAEhBl5F,KAAKqlC,cAAe,EAEpBrlC,KAAKslC,UAAW3T,GAjHjBqnE,GAAc13F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQw8B,GAAKtxC,WAAa,CAEzE4B,YAAa81F,GAEb1nE,iBAAiB,EAEjB7a,KAAM,SAAWnN,GAOhB,OALAspC,GAAKtxC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEhCtJ,KAAKuxB,eAAe9a,KAAMnN,EAAOioB,gBACjCvxB,KAAK0gB,MAAQpX,EAAOoX,MAEb1gB,MAIRm5F,WAAY,SAAWhwF,EAAOk3B,GAED,OAAvBrgC,KAAKs0D,gBAETt0D,KAAKs0D,cAAgB,IAAIpsB,GAAiB,IAAImB,aAA2B,EAAbrpC,KAAK0gB,OAAa,IAI/E2f,EAAMhP,QAASrxB,KAAKs0D,cAAcpqD,MAAe,EAARf,IAI1CiwF,YAAa,SAAWjwF,EAAOuJ,GAE9BA,EAAO/B,UAAW3Q,KAAKuxB,eAAernB,MAAe,GAARf,IAI9CsnB,QAAS,SAAWsiB,EAAWa,GAE9B,MAAMj1B,EAAc3e,KAAK2e,YACnB06E,EAAer5F,KAAK0gB,MAK1B,GAHAq4E,GAAMr3E,SAAW1hB,KAAK0hB,SACtBq3E,GAAMlnE,SAAW7xB,KAAK6xB,cAEElxB,IAAnBo4F,GAAMlnE,SAEX,IAAM,IAAIynE,EAAa,EAAGA,EAAaD,EAAcC,IAAgB,CAIpEt5F,KAAKo5F,YAAaE,EAAYV,IAE9BC,GAAqB5nF,iBAAkB0N,EAAai6E,IAIpDG,GAAMp6E,YAAck6E,GAEpBE,GAAMtoE,QAASsiB,EAAW+lD,IAI1B,IAAM,IAAI3uF,EAAI,EAAGC,EAAI0uF,GAAoBzvF,OAAQc,EAAIC,EAAGD,IAAO,CAE9D,MAAM6oC,EAAY8lD,GAAqB3uF,GACvC6oC,EAAUsmD,WAAaA,EACvBtmD,EAAU9xB,OAASlhB,KACnB4zC,EAAWz1C,KAAM60C,GAIlB8lD,GAAoBzvF,OAAS,IAM/BkwF,YAAa,SAAWpwF,EAAOuJ,GAE9BA,EAAO2e,QAASrxB,KAAKuxB,eAAernB,MAAe,GAARf,IAI5C0pC,mBAAoB,eAmCrB83B,GAAkBrpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACtDqpE,GAAkBrpE,UAAU4B,YAAcynE,GAE1CA,GAAkBrpE,UAAU4nF,qBAAsB,EAElDve,GAAkBrpE,UAAUmV,KAAO,SAAWnN,GAY7C,OAVAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKynC,UAAYn+B,EAAOm+B,UACxBznC,KAAKi5F,QAAU3vF,EAAO2vF,QACtBj5F,KAAKk5F,SAAW5vF,EAAO4vF,SAEvBl5F,KAAKqlC,aAAe/7B,EAAO+7B,aAEpBrlC,MAIR,MAAMw5F,GAAS,IAAIh8E,EACbi8E,GAAO,IAAIj8E,EACXk8E,GAAmB,IAAIpyE,GACvBqyE,GAAS,IAAI70E,GACb80E,GAAY,IAAI/1E,EAEtB,SAASg2E,GAAMn4E,EAAUmQ,EAAUqjC,GAEpB,IAATA,GAEJ52D,QAAQ0R,MAAO,+FAIhBmd,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,OAEZkB,KAAK0hB,cAAwB/gB,IAAb+gB,EAAyBA,EAAW,IAAI0rB,GACxDptC,KAAK6xB,cAAwBlxB,IAAbkxB,EAAyBA,EAAW,IAAI84C,GAExD3qE,KAAK6yC,qBAINgnD,GAAKv4F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEpE4B,YAAa22F,GAEbpoE,QAAQ,EAERhb,KAAM,SAAWnN,GAOhB,OALA6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK6xB,SAAWvoB,EAAOuoB,SACvB7xB,KAAK0hB,SAAWpY,EAAOoY,SAEhB1hB,MAIR85F,qBAAsB,WAErB,MAAMp4E,EAAW1hB,KAAK0hB,SAEtB,GAAKA,EAAS8rB,iBAIb,GAAwB,OAAnB9rB,EAASvY,MAAiB,CAE9B,MAAM0mC,EAAoBnuB,EAASthB,WAAWgqB,SACxCukB,EAAgB,CAAE,GAExB,IAAM,IAAIxkC,EAAI,EAAGC,EAAIylC,EAAkBnvB,MAAOvW,EAAIC,EAAGD,IAEpDqvF,GAAOnvD,oBAAqBwF,EAAmB1lC,EAAI,GACnDsvF,GAAKpvD,oBAAqBwF,EAAmB1lC,GAE7CwkC,EAAexkC,GAAMwkC,EAAexkC,EAAI,GACxCwkC,EAAexkC,IAAOqvF,GAAOx1E,WAAYy1E,IAI1C/3E,EAAS/d,aAAc,eAAgB,IAAIylC,GAAwBuF,EAAe,SAIlFrwC,QAAQC,KAAM,sGAIT,GAAKmjB,EAASktB,WAAa,CAEjC,MAAM5D,EAAWtpB,EAASspB,SACpB2D,EAAgBjtB,EAASitB,cAE/BA,EAAe,GAAM,EAErB,IAAM,IAAIxkC,EAAI,EAAGC,EAAI4gC,EAAS3hC,OAAQc,EAAIC,EAAGD,IAE5CwkC,EAAexkC,GAAMwkC,EAAexkC,EAAI,GACxCwkC,EAAexkC,IAAO6gC,EAAU7gC,EAAI,GAAI6Z,WAAYgnB,EAAU7gC,IAMhE,OAAOnK,MAIRywB,QAAS,SAAWsiB,EAAWa,GAE9B,MAAMlyB,EAAW1hB,KAAK0hB,SAChB/C,EAAc3e,KAAK2e,YACnBg2E,EAAY5hD,EAAUgnD,OAAOF,KAAKlF,UAUxC,GANiC,OAA5BjzE,EAAS6pB,gBAA0B7pB,EAASwsB,wBAEjD0rD,GAAUnjF,KAAMiL,EAAS6pB,gBACzBquD,GAAUr7E,aAAcI,GACxBi7E,GAAUh6E,QAAU+0E,GAEiC,IAAhD5hD,EAAU9tB,IAAIf,iBAAkB01E,IAAwB,OAI7DF,GAAiBtmF,WAAYuL,GAC7Bg7E,GAAOljF,KAAMs8B,EAAU9tB,KAAM1G,aAAcm7E,IAE3C,MAAMM,EAAiBrF,IAAgB30F,KAAKqqB,MAAMzhB,EAAI5I,KAAKqqB,MAAMxe,EAAI7L,KAAKqqB,MAAM5S,GAAM,GAChFwiF,EAAmBD,EAAiBA,EAEpCE,EAAS,IAAI18E,EACb28E,EAAO,IAAI38E,EACX48E,EAAe,IAAI58E,EACnB68E,EAAW,IAAI78E,EACfnB,EAASrc,MAAQA,KAAK+vF,eAAmB,EAAI,EAEnD,GAAKruE,EAAS8rB,iBAAmB,CAEhC,MAAMrkC,EAAQuY,EAASvY,MAEjBulC,EADahtB,EAASthB,WACCgqB,SAASlgB,MAEtC,GAAe,OAAVf,EAAiB,CAErB,MAAM+nC,EAAU/nC,EAAMe,MAEtB,IAAM,IAAIC,EAAI,EAAGC,EAAI8mC,EAAQ7nC,OAAS,EAAGc,EAAIC,EAAGD,GAAKkS,EAAO,CAE3D,MAAMjP,EAAI8jC,EAAS/mC,GACbkD,EAAI6jC,EAAS/mC,EAAI,GAEvB+vF,EAAOvpF,UAAW+9B,EAAe,EAAJthC,GAC7B+sF,EAAKxpF,UAAW+9B,EAAe,EAAJrhC,GAI3B,GAFessF,GAAOW,oBAAqBJ,EAAQC,EAAME,EAAUD,GAErDH,EAAmB,SAEjCI,EAAS97E,aAAcve,KAAK2e,aAE5B,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAYq2E,GAE7CnrE,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,KAEvDqoB,EAAWz1C,KAAM,CAEhB+wB,SAAUA,EAGV5N,MAAO84E,EAAa5jF,QAAQ+H,aAAcve,KAAK2e,aAC/CxV,MAAOgB,EACP4hC,KAAM,KACNgI,UAAW,KACX7yB,OAAQlhB,aAQV,IAAM,IAAImK,EAAI,EAAGC,EAAIskC,EAAUrlC,OAAS,EAAI,EAAGc,EAAIC,EAAGD,GAAKkS,EAAO,CAEjE69E,EAAOvpF,UAAW+9B,EAAW,EAAIvkC,GACjCgwF,EAAKxpF,UAAW+9B,EAAW,EAAIvkC,EAAI,GAInC,GAFewvF,GAAOW,oBAAqBJ,EAAQC,EAAME,EAAUD,GAErDH,EAAmB,SAEjCI,EAAS97E,aAAcve,KAAK2e,aAE5B,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAYq2E,GAE7CnrE,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,KAEvDqoB,EAAWz1C,KAAM,CAEhB+wB,SAAUA,EAGV5N,MAAO84E,EAAa5jF,QAAQ+H,aAAcve,KAAK2e,aAC/CxV,MAAOgB,EACP4hC,KAAM,KACNgI,UAAW,KACX7yB,OAAQlhB,aAQL,GAAK0hB,EAASktB,WAAa,CAEjC,MAAM5D,EAAWtpB,EAASspB,SACpBuvD,EAAavvD,EAAS3hC,OAE5B,IAAM,IAAIc,EAAI,EAAGA,EAAIowF,EAAa,EAAGpwF,GAAKkS,EAAO,CAIhD,GAFes9E,GAAOW,oBAAqBtvD,EAAU7gC,GAAK6gC,EAAU7gC,EAAI,GAAKkwF,EAAUD,GAEzEH,EAAmB,SAEjCI,EAAS97E,aAAcve,KAAK2e,aAE5B,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAYq2E,GAE7CnrE,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,KAEvDqoB,EAAWz1C,KAAM,CAEhB+wB,SAAUA,EAGV5N,MAAO84E,EAAa5jF,QAAQ+H,aAAcve,KAAK2e,aAC/CxV,MAAOgB,EACP4hC,KAAM,KACNgI,UAAW,KACX7yB,OAAQlhB,UAUZ6yC,mBAAoB,WAEnB,MAAMnxB,EAAW1hB,KAAK0hB,SAEtB,GAAKA,EAAS8rB,iBAAmB,CAEhC,MAAMH,EAAkB3rB,EAAS2rB,gBAC3BkE,EAAOvyC,OAAOuyC,KAAMlE,GAE1B,GAAKkE,EAAKloC,OAAS,EAAI,CAEtB,MAAMmmC,EAAiBnC,EAAiBkE,EAAM,IAE9C,QAAwB5wC,IAAnB6uC,EAA+B,CAEnCxvC,KAAKqzC,sBAAwB,GAC7BrzC,KAAK0zC,sBAAwB,GAE7B,IAAM,IAAIpoC,EAAI,EAAGqoC,EAAKnE,EAAenmC,OAAQiC,EAAIqoC,EAAIroC,IAAO,CAE3D,MAAMnK,EAAOquC,EAAgBlkC,GAAInK,MAAQ/D,OAAQkO,GAEjDtL,KAAKqzC,sBAAsBl1C,KAAM,GACjC6B,KAAK0zC,sBAAuBvyC,GAASmK,SAQlC,CAEN,MAAM+5B,EAAe3jB,EAAS2jB,kBAER1kC,IAAjB0kC,GAA8BA,EAAah8B,OAAS,GAExD/K,QAAQ0R,MAAO,0GAUnB,MAAMwqF,GAAW,IAAIh9E,EACfi9E,GAAS,IAAIj9E,EAEnB,SAASk9E,GAAch5E,EAAUmQ,GAEhCgoE,GAAKl0F,KAAM3F,KAAM0hB,EAAUmQ,GAE3B7xB,KAAKlB,KAAO,eAgEb,SAAS67F,GAAUj5E,EAAUmQ,GAE5BgoE,GAAKl0F,KAAM3F,KAAM0hB,EAAUmQ,GAE3B7xB,KAAKlB,KAAO,WA0Bb,SAAS+rE,GAAgBl5C,GAExBoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,iBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKqkC,IAAM,KAEXrkC,KAAK2kC,SAAW,KAEhB3kC,KAAKkF,KAAO,EACZlF,KAAKwnC,iBAAkB,EAEvBxnC,KAAKqlC,cAAe,EAEpBrlC,KAAKslC,UAAW3T,GA3GjB+oE,GAAap5F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQyjF,GAAKv4F,WAAa,CAExE4B,YAAaw3F,GAEb3K,gBAAgB,EAEhB+J,qBAAsB,WAErB,MAAMp4E,EAAW1hB,KAAK0hB,SAEtB,GAAKA,EAAS8rB,iBAIb,GAAwB,OAAnB9rB,EAASvY,MAAiB,CAE9B,MAAM0mC,EAAoBnuB,EAASthB,WAAWgqB,SACxCukB,EAAgB,GAEtB,IAAM,IAAIxkC,EAAI,EAAGC,EAAIylC,EAAkBnvB,MAAOvW,EAAIC,EAAGD,GAAK,EAEzDqwF,GAASnwD,oBAAqBwF,EAAmB1lC,GACjDswF,GAAOpwD,oBAAqBwF,EAAmB1lC,EAAI,GAEnDwkC,EAAexkC,GAAc,IAANA,EAAY,EAAIwkC,EAAexkC,EAAI,GAC1DwkC,EAAexkC,EAAI,GAAMwkC,EAAexkC,GAAMqwF,GAASx2E,WAAYy2E,IAIpE/4E,EAAS/d,aAAc,eAAgB,IAAIylC,GAAwBuF,EAAe,SAIlFrwC,QAAQC,KAAM,8GAIT,GAAKmjB,EAASktB,WAAa,CAEjC,MAAM5D,EAAWtpB,EAASspB,SACpB2D,EAAgBjtB,EAASitB,cAE/B,IAAM,IAAIxkC,EAAI,EAAGC,EAAI4gC,EAAS3hC,OAAQc,EAAIC,EAAGD,GAAK,EAEjDqwF,GAAS/jF,KAAMu0B,EAAU7gC,IACzBswF,GAAOhkF,KAAMu0B,EAAU7gC,EAAI,IAE3BwkC,EAAexkC,GAAc,IAANA,EAAY,EAAIwkC,EAAexkC,EAAI,GAC1DwkC,EAAexkC,EAAI,GAAMwkC,EAAexkC,GAAMqwF,GAASx2E,WAAYy2E,IAMrE,OAAOz6F,QAcT26F,GAASr5F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQyjF,GAAKv4F,WAAa,CAEpE4B,YAAay3F,GAEb3K,YAAY,IAuCbnlB,GAAevpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACnDupE,GAAevpE,UAAU4B,YAAc2nE,GAEvCA,GAAevpE,UAAUgoF,kBAAmB,EAE5Cze,GAAevpE,UAAUmV,KAAO,SAAWnN,GAe1C,OAbAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAKkF,KAAOoE,EAAOpE,KACnBlF,KAAKwnC,gBAAkBl+B,EAAOk+B,gBAE9BxnC,KAAKqlC,aAAe/7B,EAAO+7B,aAEpBrlC,MAIR,MAAM46F,GAAmB,IAAItzE,GACvBuzE,GAAS,IAAI/1E,GACbg2E,GAAY,IAAIj3E,EAChBk3E,GAAc,IAAIv9E,EAExB,SAASw9E,GAAQt5E,EAAUmQ,GAE1B1E,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,SAEZkB,KAAK0hB,cAAwB/gB,IAAb+gB,EAAyBA,EAAW,IAAI0rB,GACxDptC,KAAK6xB,cAAwBlxB,IAAbkxB,EAAyBA,EAAW,IAAIg5C,GAExD7qE,KAAK6yC,qBA0IN,SAASooD,GAAW35E,EAAOnY,EAAO8wF,EAAkBt7E,EAAao0B,EAAWa,EAAY1yB,GAEvF,MAAMg6E,EAAqBL,GAAOz1E,kBAAmB9D,GAErD,GAAK45E,EAAqBjB,EAAmB,CAE5C,MAAMkB,EAAiB,IAAI39E,EAE3Bq9E,GAAOO,oBAAqB95E,EAAO65E,GACnCA,EAAe58E,aAAcI,GAE7B,MAAMuQ,EAAW6jB,EAAU9tB,IAAIF,OAAOf,WAAYm3E,GAElD,GAAKjsE,EAAW6jB,EAAUznB,MAAQ4D,EAAW6jB,EAAUxnB,IAAM,OAE7DqoB,EAAWz1C,KAAM,CAEhB+wB,SAAUA,EACVmsE,cAAeh+F,KAAK2R,KAAMksF,GAC1B55E,MAAO65E,EACPhyF,MAAOA,EACP4iC,KAAM,KACN7qB,OAAQA,KAQX,SAASo6E,GAAcC,EAAOxmF,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,GAExFP,EAAQnP,KAAM3F,KAAMu7F,EAAOxmF,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,GAEtFrV,KAAKoV,YAAoBzU,IAAXyU,EAAuBA,EA7w3BpB,KA+w3BjBpV,KAAKmV,eAA0BxU,IAAdwU,EAA0BA,EA/x3BvB,KAgy3BpBnV,KAAKkV,eAA0BvU,IAAduU,EAA0BA,EAhy3BvB,KAky3BpBlV,KAAK8V,iBAAkB,EAEvB,MAAM++B,EAAQ70C,KAST,8BAA+Bu7F,GAEnCA,EAAMC,2BATP,SAASC,IAER5mD,EAAM7G,aAAc,EACpButD,EAAMC,0BAA2BC,MAiCnC,SAASC,GAAmBjmF,EAAStH,EAAOC,EAAQgH,EAAQtW,EAAMiW,EAASC,EAAOC,EAAOC,EAAWC,EAAWE,EAAYC,GAE1HR,EAAQnP,KAAM3F,KAAM,KAAM+U,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,EAAYC,GAEjGtV,KAAKkU,MAAQ,CAAE/F,MAAOA,EAAOC,OAAQA,GACrCpO,KAAKyV,QAAUA,EAKfzV,KAAKgW,OAAQ,EAKbhW,KAAK8V,iBAAkB,EASxB,SAAS6lF,GAAetnF,EAAQU,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,GAE1FP,EAAQnP,KAAM3F,KAAMqU,EAAQU,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,GAEvFrV,KAAKguC,aAAc,EAQpB,SAAS4tD,GAAcztF,EAAOC,EAAQtP,EAAMiW,EAASC,EAAOC,EAAOC,EAAWC,EAAWE,EAAYD,GAIpG,GA713BmB,QA213BnBA,OAAoBzU,IAAXyU,EAAuBA,EA313Bb,OACO,OA413BKA,EAE9B,MAAM,IAAI9G,MAAO,yFAIJ3N,IAAT7B,GAn23Bc,OAm23BQsW,IAAyBtW,EAl33B3B,WAm33BX6B,IAAT7B,GAn23BqB,OAm23BCsW,IAAgCtW,EA323BjC,MA623B1BgW,EAAQnP,KAAM3F,KAAM,KAAM+U,EAASC,EAAOC,EAAOC,EAAWC,EAAWC,EAAQtW,EAAMuW,GAErFrV,KAAKkU,MAAQ,CAAE/F,MAAOA,EAAOC,OAAQA,GAErCpO,KAAKkV,eAA0BvU,IAAduU,EAA0BA,EAl43BtB,KAm43BrBlV,KAAKmV,eAA0BxU,IAAdwU,EAA0BA,EAn43BtB,KAq43BrBnV,KAAKgW,OAAQ,EACbhW,KAAK8V,iBAAkB,EA9QxBklF,GAAO15F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAEtE4B,YAAa83F,GAEbtpE,UAAU,EAEVjb,KAAM,SAAWnN,GAOhB,OALA6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK6xB,SAAWvoB,EAAOuoB,SACvB7xB,KAAK0hB,SAAWpY,EAAOoY,SAEhB1hB,MAIRywB,QAAS,SAAWsiB,EAAWa,GAE9B,MAAMlyB,EAAW1hB,KAAK0hB,SAChB/C,EAAc3e,KAAK2e,YACnBg2E,EAAY5hD,EAAUgnD,OAAOiB,OAAOrG,UAU1C,GANiC,OAA5BjzE,EAAS6pB,gBAA0B7pB,EAASwsB,wBAEjD4sD,GAAUrkF,KAAMiL,EAAS6pB,gBACzBuvD,GAAUv8E,aAAcI,GACxBm8E,GAAUl7E,QAAU+0E,GAEiC,IAAhD5hD,EAAU9tB,IAAIf,iBAAkB42E,IAAwB,OAI7DF,GAAiBxnF,WAAYuL,GAC7Bk8E,GAAOpkF,KAAMs8B,EAAU9tB,KAAM1G,aAAcq8E,IAE3C,MAAMZ,EAAiBrF,IAAgB30F,KAAKqqB,MAAMzhB,EAAI5I,KAAKqqB,MAAMxe,EAAI7L,KAAKqqB,MAAM5S,GAAM,GAChFwiF,EAAmBD,EAAiBA,EAE1C,GAAKt4E,EAAS8rB,iBAAmB,CAEhC,MAAMrkC,EAAQuY,EAASvY,MAEjBulC,EADahtB,EAASthB,WACCgqB,SAASlgB,MAEtC,GAAe,OAAVf,EAAiB,CAErB,MAAM+nC,EAAU/nC,EAAMe,MAEtB,IAAM,IAAIC,EAAI,EAAG0W,EAAKqwB,EAAQ7nC,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpD,MAAMiD,EAAI8jC,EAAS/mC,GAEnB4wF,GAAYpqF,UAAW+9B,EAAe,EAAJthC,GAElC6tF,GAAWF,GAAa3tF,EAAG6sF,EAAkBt7E,EAAao0B,EAAWa,EAAY5zC,YAMlF,IAAM,IAAImK,EAAI,EAAGC,EAAIskC,EAAUrlC,OAAS,EAAGc,EAAIC,EAAGD,IAEjD4wF,GAAYpqF,UAAW+9B,EAAe,EAAJvkC,GAElC8wF,GAAWF,GAAa5wF,EAAG8vF,EAAkBt7E,EAAao0B,EAAWa,EAAY5zC,UAM7E,CAEN,MAAMgrC,EAAWtpB,EAASspB,SAE1B,IAAM,IAAI7gC,EAAI,EAAGC,EAAI4gC,EAAS3hC,OAAQc,EAAIC,EAAGD,IAE5C8wF,GAAWjwD,EAAU7gC,GAAKA,EAAG8vF,EAAkBt7E,EAAao0B,EAAWa,EAAY5zC,QAQtF6yC,mBAAoB,WAEnB,MAAMnxB,EAAW1hB,KAAK0hB,SAEtB,GAAKA,EAAS8rB,iBAAmB,CAEhC,MAAMH,EAAkB3rB,EAAS2rB,gBAC3BkE,EAAOvyC,OAAOuyC,KAAMlE,GAE1B,GAAKkE,EAAKloC,OAAS,EAAI,CAEtB,MAAMmmC,EAAiBnC,EAAiBkE,EAAM,IAE9C,QAAwB5wC,IAAnB6uC,EAA+B,CAEnCxvC,KAAKqzC,sBAAwB,GAC7BrzC,KAAK0zC,sBAAwB,GAE7B,IAAM,IAAIpoC,EAAI,EAAGqoC,EAAKnE,EAAenmC,OAAQiC,EAAIqoC,EAAIroC,IAAO,CAE3D,MAAMnK,EAAOquC,EAAgBlkC,GAAInK,MAAQ/D,OAAQkO,GAEjDtL,KAAKqzC,sBAAsBl1C,KAAM,GACjC6B,KAAK0zC,sBAAuBvyC,GAASmK,SAQlC,CAEN,MAAM+5B,EAAe3jB,EAAS2jB,kBAER1kC,IAAjB0kC,GAA8BA,EAAah8B,OAAS,GAExD/K,QAAQ0R,MAAO,4GAoEnBsrF,GAAah6F,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQtB,EAAQxT,WAAa,CAE3E4B,YAAao4F,GAEbne,gBAAgB,EAEhBt4E,OAAQ,WAEP,MAAM02F,EAAQv7F,KAAKkU,OAGY,IAFD,8BAA+BqnF,GAErBA,EAAMM,YAAcN,EAAMO,oBAEjE97F,KAAKguC,aAAc,MA2BtB0tD,GAAkBp6F,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WACrDo6F,GAAkBp6F,UAAU4B,YAAcw4F,GAE1CA,GAAkBp6F,UAAUm9E,qBAAsB,EAUlDkd,GAAcr6F,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WACjDq6F,GAAcr6F,UAAU4B,YAAcy4F,GACtCA,GAAcr6F,UAAUy6F,iBAAkB,EA2B1CH,GAAat6F,UAAYtC,OAAOoX,OAAQtB,EAAQxT,WAChDs6F,GAAat6F,UAAU4B,YAAc04F,GACrCA,GAAat6F,UAAU2+E,gBAAiB,EA2KxC,SAAS+b,GAAoBC,EAAMC,EAAQC,GAE1CxnD,GAAShvC,KAAM3F,MAEfA,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjBsqE,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAGTn8F,KAAK40C,mBAAoB,IAAIwnD,GAA0BH,EAAMC,EAAQC,IACrEn8F,KAAK22C,gBASN,SAASylD,GAA0BH,EAAMC,EAAQC,GAEhD/uD,GAAeznC,KAAM3F,MAErBA,KAAKlB,KAAO,2BAEZkB,KAAK2xB,WAAa,CACjBsqE,KAAMA,EACNC,OAAQA,EACRC,OAAQA,GAKT,MAAMjrD,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAENmxD,EAAM,KAEN58E,EAAS,IAAIjC,EAEbiG,EAAK,IAAIjG,EAAWkG,EAAK,IAAIlG,EAC7B8+E,EAAK,IAAI9+E,EAAW++E,EAAK,IAAI/+E,EAE9By+E,EAAK5yF,OAAS,GAElB/K,QAAQ0R,MAAO,oFAMhB,MAAMwsF,EAAaN,EAAS,EAE5B,IAAM,IAAI/xF,EAAI,EAAGA,GAAKgyF,EAAQhyF,IAAO,CAEpC,MAAM5J,EAAI4J,EAAIgyF,EAEd,IAAM,IAAI54E,EAAI,EAAGA,GAAK24E,EAAQ34E,IAAO,CAEpC,MAAMmR,EAAInR,EAAI24E,EAIdD,EAAMvnE,EAAGn0B,EAAGkjB,GACZunB,EAAS7sC,KAAMslB,EAAG7a,EAAG6a,EAAG5X,EAAG4X,EAAGhM,GAMzBid,EAAI2nE,GAAO,GAEfJ,EAAMvnE,EAAI2nE,EAAK97F,EAAGmjB,GAClB44E,EAAG7tF,WAAYgV,EAAIC,KAInBu4E,EAAMvnE,EAAI2nE,EAAK97F,EAAGmjB,GAClB44E,EAAG7tF,WAAYiV,EAAID,IAIfljB,EAAI87F,GAAO,GAEfJ,EAAMvnE,EAAGn0B,EAAI87F,EAAK34E,GAClB64E,EAAG9tF,WAAYgV,EAAIC,KAInBu4E,EAAMvnE,EAAGn0B,EAAI87F,EAAK34E,GAClB64E,EAAG9tF,WAAYiV,EAAID,IAMpBhE,EAAOb,aAAc09E,EAAIC,GAAKjtF,YAC9B27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzCyzB,EAAI/sC,KAAMu2B,EAAGn0B,IAQf,IAAM,IAAI4J,EAAI,EAAGA,EAAIgyF,EAAQhyF,IAE5B,IAAM,IAAIoZ,EAAI,EAAGA,EAAI24E,EAAQ34E,IAAO,CAEnC,MAAMnW,EAAIjD,EAAIqyF,EAAaj5E,EACrBlW,EAAIlD,EAAIqyF,EAAaj5E,EAAI,EACzBjW,GAAMnD,EAAI,GAAMqyF,EAAaj5E,EAAI,EACjCjR,GAAMnI,EAAI,GAAMqyF,EAAaj5E,EAInC2tB,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAQtBtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,IAxH3D8wD,GAAmB16F,UAAYtC,OAAOoX,OAAQu+B,GAASrzC,WACvD06F,GAAmB16F,UAAU4B,YAAc84F,GA2H3CI,GAAyB96F,UAAYtC,OAAOoX,OAAQg3B,GAAe9rC,WACnE86F,GAAyB96F,UAAU4B,YAAck5F,GA4BjD,MAAMK,WAAiCrvD,GAEtCxuC,YAAaosC,EAAUkG,EAAStxB,EAAQyzE,GAEvCtzF,QAEAC,KAAKlB,KAAO,2BAEZkB,KAAK2xB,WAAa,CACjBqZ,SAAUA,EACVkG,QAASA,EACTtxB,OAAQA,EACRyzE,OAAQA,GAGTzzE,EAASA,GAAU,EAKnB,MAAM88E,EAAe,GACfC,EAAW,GAwDjB,SAASC,EAAexvF,EAAGC,EAAGC,EAAG+lF,GAEhC,MAAMwJ,EAAOx/F,KAAKkL,IAAK,EAAG8qF,GAIpB9yF,EAAI,GAIV,IAAM,IAAI4J,EAAI,EAAGA,GAAK0yF,EAAM1yF,IAAO,CAElC5J,EAAG4J,GAAM,GAET,MAAM2yF,EAAK1vF,EAAEoJ,QAAQ5K,KAAM0B,EAAGnD,EAAI0yF,GAC5BE,EAAK1vF,EAAEmJ,QAAQ5K,KAAM0B,EAAGnD,EAAI0yF,GAE5BG,EAAOH,EAAO1yF,EAEpB,IAAM,IAAIoZ,EAAI,EAAGA,GAAKy5E,EAAMz5E,IAI1BhjB,EAAG4J,GAAKoZ,GAFE,IAANA,GAAWpZ,IAAM0yF,EAEPC,EAIAA,EAAGtmF,QAAQ5K,KAAMmxF,EAAIx5E,EAAIy5E,GAU1C,IAAM,IAAI7yF,EAAI,EAAGA,EAAI0yF,EAAM1yF,IAE1B,IAAM,IAAIoZ,EAAI,EAAGA,EAAI,GAAMs5E,EAAO1yF,GAAM,EAAGoZ,IAAO,CAEjD,MAAMriB,EAAI7D,KAAKqL,MAAO6a,EAAI,GAErBA,EAAI,GAAM,GAEd05E,EAAY18F,EAAG4J,GAAKjJ,EAAI,IACxB+7F,EAAY18F,EAAG4J,EAAI,GAAKjJ,IACxB+7F,EAAY18F,EAAG4J,GAAKjJ,MAIpB+7F,EAAY18F,EAAG4J,GAAKjJ,EAAI,IACxB+7F,EAAY18F,EAAG4J,EAAI,GAAKjJ,EAAI,IAC5B+7F,EAAY18F,EAAG4J,EAAI,GAAKjJ,MAmF5B,SAAS+7F,EAAYzlD,GAEpBklD,EAAav+F,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI/C,SAASylF,EAAkB/zF,EAAOquC,GAEjC,MAAMsb,EAAiB,EAAR3pD,EAEfquC,EAAO5uC,EAAIoiC,EAAU8nB,EAAS,GAC9Btb,EAAO3rC,EAAIm/B,EAAU8nB,EAAS,GAC9Btb,EAAO//B,EAAIuzB,EAAU8nB,EAAS,GAsC/B,SAASqqC,EAAW7lF,EAAIw7C,EAAQvxC,EAAQ67E,GAEhCA,EAAU,GAAkB,IAAT9lF,EAAG1O,IAE5B+zF,EAAU7pC,GAAWx7C,EAAG1O,EAAI,GAIT,IAAb2Y,EAAO3Y,GAA4B,IAAb2Y,EAAO9J,IAEnCklF,EAAU7pC,GAAWsqC,EAAU,EAAI//F,KAAKoN,GAAK,IAQ/C,SAAS2yF,EAAS77E,GAEjB,OAAOlkB,KAAK6R,MAAOqS,EAAO9J,GAAK8J,EAAO3Y,IAtOvC,SAAoByqF,GAEnB,MAAMjmF,EAAI,IAAIoQ,EACRnQ,EAAI,IAAImQ,EACRlQ,EAAI,IAAIkQ,EAId,IAAM,IAAIrT,EAAI,EAAGA,EAAI+mC,EAAQ7nC,OAAQc,GAAK,EAIzC+yF,EAAkBhsD,EAAS/mC,EAAI,GAAKiD,GACpC8vF,EAAkBhsD,EAAS/mC,EAAI,GAAKkD,GACpC6vF,EAAkBhsD,EAAS/mC,EAAI,GAAKmD,GAIpCsvF,EAAexvF,EAAGC,EAAGC,EAAG+lF,GA9C1BgK,CATAhK,EAASA,GAAU,GA4HnB,SAAsBzzE,GAErB,MAAM43B,EAAS,IAAIh6B,EAInB,IAAM,IAAIrT,EAAI,EAAGA,EAAIuyF,EAAarzF,OAAQc,GAAK,EAE9CqtC,EAAO5uC,EAAI8zF,EAAcvyF,EAAI,GAC7BqtC,EAAO3rC,EAAI6wF,EAAcvyF,EAAI,GAC7BqtC,EAAO//B,EAAIilF,EAAcvyF,EAAI,GAE7BqtC,EAAOloC,YAAYZ,eAAgBkR,GAEnC88E,EAAcvyF,EAAI,GAAMqtC,EAAO5uC,EAC/B8zF,EAAcvyF,EAAI,GAAMqtC,EAAO3rC,EAC/B6wF,EAAcvyF,EAAI,GAAMqtC,EAAO//B,EA/HjC6lF,CAAa19E,GAqIb,WAEC,MAAM43B,EAAS,IAAIh6B,EAEnB,IAAM,IAAIrT,EAAI,EAAGA,EAAIuyF,EAAarzF,OAAQc,GAAK,EAAI,CAElDqtC,EAAO5uC,EAAI8zF,EAAcvyF,EAAI,GAC7BqtC,EAAO3rC,EAAI6wF,EAAcvyF,EAAI,GAC7BqtC,EAAO//B,EAAIilF,EAAcvyF,EAAI,GAE7B,MAAMuqB,EAAI0oE,EAAS5lD,GAAW,EAAIn6C,KAAKoN,GAAK,GACtClK,GAqHcghB,EArHGi2B,EAuHjBn6C,KAAK6R,OAASqS,EAAO1V,EAAGxO,KAAK2R,KAAQuS,EAAO3Y,EAAI2Y,EAAO3Y,EAAQ2Y,EAAO9J,EAAI8J,EAAO9J,IAvHrDpa,KAAKoN,GAAK,IAC5CkyF,EAASx+F,KAAMu2B,EAAG,EAAIn0B,GAoHxB,IAAsBghB,GA7DtB,WAEC,MAAMnU,EAAI,IAAIoQ,EACRnQ,EAAI,IAAImQ,EACRlQ,EAAI,IAAIkQ,EAER+/E,EAAW,IAAI//E,EAEfggF,EAAM,IAAItvF,EACVuvF,EAAM,IAAIvvF,EACVwvF,EAAM,IAAIxvF,EAEhB,IAAM,IAAI/D,EAAI,EAAGoZ,EAAI,EAAGpZ,EAAIuyF,EAAarzF,OAAQc,GAAK,EAAGoZ,GAAK,EAAI,CAEjEnW,EAAEvM,IAAK67F,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,IACvEkD,EAAExM,IAAK67F,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,IACvEmD,EAAEzM,IAAK67F,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,GAAKuyF,EAAcvyF,EAAI,IAEvEqzF,EAAI38F,IAAK87F,EAAUp5E,EAAI,GAAKo5E,EAAUp5E,EAAI,IAC1Ck6E,EAAI58F,IAAK87F,EAAUp5E,EAAI,GAAKo5E,EAAUp5E,EAAI,IAC1Cm6E,EAAI78F,IAAK87F,EAAUp5E,EAAI,GAAKo5E,EAAUp5E,EAAI,IAE1Cg6E,EAAS9mF,KAAMrJ,GAAI6T,IAAK5T,GAAI4T,IAAK3T,GAAIwB,aAAc,GAEnD,MAAM6uF,EAAMP,EAASG,GAErBJ,EAAWK,EAAKj6E,EAAI,EAAGnW,EAAGuwF,GAC1BR,EAAWM,EAAKl6E,EAAI,EAAGlW,EAAGswF,GAC1BR,EAAWO,EAAKn6E,EAAI,EAAGjW,EAAGqwF,KA/E3BC,GAMD,WAIC,IAAM,IAAIzzF,EAAI,EAAGA,EAAIwyF,EAAStzF,OAAQc,GAAK,EAAI,CAI9C,MAAMuQ,EAAKiiF,EAAUxyF,EAAI,GACnB2Q,EAAK6hF,EAAUxyF,EAAI,GACnBmgB,EAAKqyE,EAAUxyF,EAAI,GAEnBgB,EAAM9N,KAAK8N,IAAKuP,EAAII,EAAIwP,GACxBpf,EAAM7N,KAAK6N,IAAKwP,EAAII,EAAIwP,GAIzBnf,EAAM,IAAOD,EAAM,KAElBwP,EAAK,KAAMiiF,EAAUxyF,EAAI,IAAO,GAChC2Q,EAAK,KAAM6hF,EAAUxyF,EAAI,IAAO,GAChCmgB,EAAK,KAAMqyE,EAAUxyF,EAAI,IAAO,KAzBvC0zF,GAnJDC,GAIA99F,KAAK2D,aAAc,WAAY,IAAIylC,GAAwBszD,EAAc,IACzE18F,KAAK2D,aAAc,SAAU,IAAIylC,GAAwBszD,EAAan/F,QAAS,IAC/EyC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwBuzD,EAAU,IAE/C,IAAXtJ,EAEJrzF,KAAK4vC,uBAIL5vC,KAAK0wC,oBAqRR,MAAMqtD,WAAkCtB,GAEvC79F,YAAaghB,EAAQyzE,GAUpBtzF,MARiB,CAChB,EAAG,EAAG,GAAM,GAAK,EAAG,GAAM,EAAG,GAAK,EAAI,GAAK,GAAK,GAGjC,CACf,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAGT6f,EAAQyzE,GAElCrzF,KAAKlB,KAAO,4BAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,IA+BX,MAAM2K,WAAiCvB,GAEtC79F,YAAaghB,EAAQyzE,GAapBtzF,MAXiB,CAChB,EAAG,EAAG,GAAM,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3B,GAAK,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,GAAK,GAGd,CACf,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxB,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxB,EAAG,EAAG,EAAG,EAAG,EAAG,GAGU6f,EAAQyzE,GAElCrzF,KAAKlB,KAAO,2BAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,IA+BX,MAAM4K,WAAkCxB,GAEvC79F,YAAaghB,EAAQyzE,GAEpB,MAAMvnF,GAAM,EAAIzO,KAAK2R,KAAM,IAAQ,EAenCjP,MAbiB,EACd,EAAG+L,EAAG,EAAI,EAAGA,EAAG,GAAM,GAAKA,EAAG,EAAI,GAAKA,EAAG,EAC5C,GAAK,EAAGA,EAAI,EAAG,EAAGA,EAAG,GAAK,GAAKA,EAAI,EAAG,GAAKA,EAC3CA,EAAG,GAAK,EAAIA,EAAG,EAAG,GAAMA,EAAG,GAAK,GAAMA,EAAG,EAAG,GAG7B,CACf,EAAG,GAAI,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GACjD,EAAG,EAAG,EAAI,EAAG,GAAI,EAAG,GAAI,GAAI,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAC/C,EAAG,EAAG,EAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAC3C,EAAG,EAAG,EAAI,EAAG,EAAG,GAAI,EAAG,EAAG,GAAI,EAAG,EAAG,EAAG,EAAG,EAAG,GAGpB8T,EAAQyzE,GAElCrzF,KAAKlB,KAAO,4BAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,IA8BX,MAAM6K,WAAmCzB,GAExC79F,YAAaghB,EAAQyzE,GAEpB,MAAMvnF,GAAM,EAAIzO,KAAK2R,KAAM,IAAQ,EAC7BsE,EAAI,EAAIxH,EAsCd/L,MApCiB,EAGd,GAAK,GAAK,GAAK,GAAK,EAAG,GACvB,EAAG,GAAK,GAAK,EAAG,EAAG,EACrB,GAAK,GAAK,EAAG,GAAK,EAAG,EACrB,EAAG,GAAK,EAAG,EAAG,EAAG,EAGjB,GAAKuT,GAAKxH,EAAG,GAAKwH,EAAGxH,EACrB,EAAGwH,GAAKxH,EAAG,EAAGwH,EAAGxH,GAGfwH,GAAKxH,EAAG,GAAKwH,EAAGxH,EAAG,EACrBwH,GAAKxH,EAAG,EAAGwH,EAAGxH,EAAG,GAGfA,EAAG,GAAKwH,EAAGxH,EAAG,GAAKwH,GACnBxH,EAAG,EAAGwH,EAAGxH,EAAG,EAAGwH,GAGF,CACf,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,EAAG,EAAG,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC5B,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,EAAI,EAAG,EAAG,GAAK,EAAG,GAAI,GAC7B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,EAC7B,GAAI,EAAG,EAAI,GAAI,EAAG,GAAK,GAAI,GAAI,EAC/B,GAAI,EAAG,GAAK,GAAI,GAAI,EAAI,GAAI,EAAG,GAC/B,EAAG,GAAI,GAAK,EAAG,GAAI,EAAI,EAAG,EAAG,GAGJsM,EAAQyzE,GAElCrzF,KAAKlB,KAAO,6BAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,IA8CX,MAAM8K,WAA2B/wD,GAEhCxuC,YAAaqiE,EAAMm9B,EAAiBx+E,EAAQy+E,EAAgBC,GAE3Dv+F,QACAC,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjBsvC,KAAMA,EACNm9B,gBAAiBA,EACjBx+E,OAAQA,EACRy+E,eAAgBA,EAChBC,OAAQA,GAGTF,EAAkBA,GAAmB,GACrCx+E,EAASA,GAAU,EACnBy+E,EAAiBA,GAAkB,EACnCC,EAASA,IAAU,EAEnB,MAAMC,EAASt9B,EAAKu9B,oBAAqBJ,EAAiBE,GAI1Dt+F,KAAKy+F,SAAWF,EAAOE,SACvBz+F,KAAKirC,QAAUszD,EAAOtzD,QACtBjrC,KAAK0+F,UAAYH,EAAOG,UAIxB,MAAMlnD,EAAS,IAAIh6B,EACbiC,EAAS,IAAIjC,EACblG,EAAK,IAAIpJ,EACf,IAAIywF,EAAI,IAAInhF,EAIZ,MAAMwtB,EAAW,GACXC,EAAU,GACVC,EAAM,GACNgG,EAAU,GAyChB,SAAS0tD,EAAiBz0F,GAIzBw0F,EAAI19B,EAAK49B,WAAY10F,EAAIi0F,EAAiBO,GAI1C,MAAMG,EAAIP,EAAOtzD,QAAS9gC,GACpB40F,EAAIR,EAAOG,UAAWv0F,GAI5B,IAAM,IAAIoZ,EAAI,EAAGA,GAAK86E,EAAgB96E,IAAO,CAE5C,MAAMhjB,EAAIgjB,EAAI86E,EAAiBhhG,KAAKoN,GAAK,EAEnCgD,EAAMpQ,KAAKoQ,IAAKlN,GAChBiN,GAAQnQ,KAAKmQ,IAAKjN,GAIxBkf,EAAO7W,EAAM4E,EAAMsxF,EAAEl2F,EAAI6E,EAAMsxF,EAAEn2F,EACjC6W,EAAO5T,EAAM2B,EAAMsxF,EAAEjzF,EAAI4B,EAAMsxF,EAAElzF,EACjC4T,EAAOhI,EAAMjK,EAAMsxF,EAAErnF,EAAIhK,EAAMsxF,EAAEtnF,EACjCgI,EAAOnQ,YAEP27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzC+/B,EAAO5uC,EAAI+1F,EAAE/1F,EAAIgX,EAASH,EAAO7W,EACjC4uC,EAAO3rC,EAAI8yF,EAAE9yF,EAAI+T,EAASH,EAAO5T,EACjC2rC,EAAO//B,EAAIknF,EAAElnF,EAAImI,EAASH,EAAOhI,EAEjCuzB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,KA7D5C,WAEC,IAAM,IAAItN,EAAI,EAAGA,EAAIi0F,EAAiBj0F,IAErCy0F,EAAiBz0F,GASlBy0F,GAA8B,IAAXN,EAAqBF,EAAkB,GA4E3D,WAEC,IAAM,IAAIj0F,EAAI,EAAGA,GAAKi0F,EAAiBj0F,IAEtC,IAAM,IAAIoZ,EAAI,EAAGA,GAAK86E,EAAgB96E,IAErCjM,EAAG1O,EAAIuB,EAAIi0F,EACX9mF,EAAGzL,EAAI0X,EAAI86E,EAEXnzD,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,GAhFrBiyF,GAiDD,WAEC,IAAM,IAAIv6E,EAAI,EAAGA,GAAK66E,EAAiB76E,IAEtC,IAAM,IAAIpZ,EAAI,EAAGA,GAAKk0F,EAAgBl0F,IAAO,CAE5C,MAAMiD,GAAMixF,EAAiB,IAAQ96E,EAAI,IAAQpZ,EAAI,GAC/CkD,GAAMgxF,EAAiB,GAAM96E,GAAMpZ,EAAI,GACvCmD,GAAM+wF,EAAiB,GAAM96E,EAAIpZ,EACjCmI,GAAM+rF,EAAiB,IAAQ96E,EAAI,GAAMpZ,EAI/C+mC,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,IA3DtB0sF,GAjCDC,GAIAj/F,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,IA+G3DtsC,SAEC,MAAMszB,EAAOkb,GAAe9rC,UAAUoV,OAAO/Q,KAAM3F,MAInD,OAFAkyB,EAAK+uC,KAAOjhE,KAAK2xB,WAAWsvC,KAAKvqD,SAE1Bwb,GAoCT,MAAMgtE,WAAgC9xD,GAErCxuC,YAAaghB,EAAQu/E,EAAMf,EAAiBC,EAAgB79F,EAAG2M,GAE9DpN,QACAC,KAAKlB,KAAO,0BAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRu/E,KAAMA,EACNf,gBAAiBA,EACjBC,eAAgBA,EAChB79F,EAAGA,EACH2M,EAAGA,GAGJyS,EAASA,GAAU,EACnBu/E,EAAOA,GAAQ,GACff,EAAkB/gG,KAAKqL,MAAO01F,IAAqB,GACnDC,EAAiBhhG,KAAKqL,MAAO21F,IAAoB,EACjD79F,EAAIA,GAAK,EACT2M,EAAIA,GAAK,EAIT,MAAM+jC,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAINsM,EAAS,IAAIh6B,EACbiC,EAAS,IAAIjC,EAEb4hF,EAAK,IAAI5hF,EACT6hF,EAAK,IAAI7hF,EAETuhF,EAAI,IAAIvhF,EACR8hF,EAAI,IAAI9hF,EACRshF,EAAI,IAAIthF,EAId,IAAM,IAAIrT,EAAI,EAAGA,GAAKi0F,IAAoBj0F,EAAI,CAI7C,MAAMuqB,EAAIvqB,EAAIi0F,EAAkB59F,EAAInD,KAAKoN,GAAK,EAK9C80F,EAA0B7qE,EAAGl0B,EAAG2M,EAAGyS,EAAQw/E,GAC3CG,EAA0B7qE,EAAI,IAAMl0B,EAAG2M,EAAGyS,EAAQy/E,GAIlDC,EAAE7wF,WAAY4wF,EAAID,GAClBN,EAAEtwF,WAAY6wF,EAAID,GAClBL,EAAEngF,aAAc0gF,EAAGR,GACnBA,EAAElgF,aAAcmgF,EAAGO,GAInBP,EAAEzvF,YACFwvF,EAAExvF,YAEF,IAAM,IAAIiU,EAAI,EAAGA,GAAK86E,IAAmB96E,EAAI,CAK5C,MAAMhjB,EAAIgjB,EAAI86E,EAAiBhhG,KAAKoN,GAAK,EACnCmJ,GAAOurF,EAAO9hG,KAAKmQ,IAAKjN,GACxBsT,EAAKsrF,EAAO9hG,KAAKoQ,IAAKlN,GAK5Bi3C,EAAO5uC,EAAIw2F,EAAGx2F,GAAMgL,EAAKkrF,EAAEl2F,EAAIiL,EAAKkrF,EAAEn2F,GACtC4uC,EAAO3rC,EAAIuzF,EAAGvzF,GAAM+H,EAAKkrF,EAAEjzF,EAAIgI,EAAKkrF,EAAElzF,GACtC2rC,EAAO//B,EAAI2nF,EAAG3nF,GAAM7D,EAAKkrF,EAAErnF,EAAI5D,EAAKkrF,EAAEtnF,GAEtCuzB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CgI,EAAOhR,WAAY+oC,EAAQ4nD,GAAK9vF,YAEhC27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzCyzB,EAAI/sC,KAAMgM,EAAIi0F,GACdlzD,EAAI/sC,KAAMolB,EAAI86E,IAQhB,IAAM,IAAI96E,EAAI,EAAGA,GAAK66E,EAAiB76E,IAEtC,IAAM,IAAIpZ,EAAI,EAAGA,GAAKk0F,EAAgBl0F,IAAO,CAI5C,MAAMiD,GAAMixF,EAAiB,IAAQ96E,EAAI,IAAQpZ,EAAI,GAC/CkD,GAAMgxF,EAAiB,GAAM96E,GAAMpZ,EAAI,GACvCmD,GAAM+wF,EAAiB,GAAM96E,EAAIpZ,EACjCmI,GAAM+rF,EAAiB,IAAQ96E,EAAI,GAAMpZ,EAI/C+mC,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAetB,SAASitF,EAA0B7qE,EAAGl0B,EAAG2M,EAAGyS,EAAQwK,GAEnD,MAAMo1E,EAAKniG,KAAKmQ,IAAKknB,GACf+qE,EAAKpiG,KAAKoQ,IAAKinB,GACfgrE,EAAUvyF,EAAI3M,EAAIk0B,EAClBirE,EAAKtiG,KAAKmQ,IAAKkyF,GAErBt1E,EAASxhB,EAAIgX,GAAW,EAAI+/E,GAAO,GAAMH,EACzCp1E,EAASve,EAAI+T,GAAW,EAAI+/E,GAAOF,EAAK,GACxCr1E,EAAS3S,EAAImI,EAASviB,KAAKoQ,IAAKiyF,GAAY,GAhB7C1/F,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAgD5D,MAAM00D,WAA4BxyD,GAEjCxuC,YAAaghB,EAAQu/E,EAAMd,EAAgBD,EAAiByB,GAE3D9/F,QACAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRu/E,KAAMA,EACNd,eAAgBA,EAChBD,gBAAiBA,EACjByB,IAAKA,GAGNjgF,EAASA,GAAU,EACnBu/E,EAAOA,GAAQ,GACfd,EAAiBhhG,KAAKqL,MAAO21F,IAAoB,EACjDD,EAAkB/gG,KAAKqL,MAAO01F,IAAqB,EACnDyB,EAAMA,GAAiB,EAAVxiG,KAAKoN,GAIlB,MAAMymC,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAINr7B,EAAS,IAAI2N,EACbg6B,EAAS,IAAIh6B,EACbiC,EAAS,IAAIjC,EAInB,IAAM,IAAI+F,EAAI,EAAGA,GAAK86E,EAAgB96E,IAErC,IAAM,IAAIpZ,EAAI,EAAGA,GAAKi0F,EAAiBj0F,IAAO,CAE7C,MAAMuqB,EAAIvqB,EAAIi0F,EAAkByB,EAC1Bt/F,EAAIgjB,EAAI86E,EAAiBhhG,KAAKoN,GAAK,EAIzC+sC,EAAO5uC,GAAMgX,EAASu/E,EAAO9hG,KAAKmQ,IAAKjN,IAAQlD,KAAKmQ,IAAKknB,GACzD8iB,EAAO3rC,GAAM+T,EAASu/E,EAAO9hG,KAAKmQ,IAAKjN,IAAQlD,KAAKoQ,IAAKinB,GACzD8iB,EAAO//B,EAAI0nF,EAAO9hG,KAAKoQ,IAAKlN,GAE5ByqC,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1C5H,EAAOjH,EAAIgX,EAASviB,KAAKmQ,IAAKknB,GAC9B7kB,EAAOhE,EAAI+T,EAASviB,KAAKoQ,IAAKinB,GAC9BjV,EAAOhR,WAAY+oC,EAAQ3nC,GAASP,YAEpC27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzCyzB,EAAI/sC,KAAMgM,EAAIi0F,GACdlzD,EAAI/sC,KAAMolB,EAAI86E,GAQhB,IAAM,IAAI96E,EAAI,EAAGA,GAAK86E,EAAgB96E,IAErC,IAAM,IAAIpZ,EAAI,EAAGA,GAAKi0F,EAAiBj0F,IAAO,CAI7C,MAAMiD,GAAMgxF,EAAkB,GAAM76E,EAAIpZ,EAAI,EACtCkD,GAAM+wF,EAAkB,IAAQ76E,EAAI,GAAMpZ,EAAI,EAC9CmD,GAAM8wF,EAAkB,IAAQ76E,EAAI,GAAMpZ,EAC1CmI,GAAM8rF,EAAkB,GAAM76E,EAAIpZ,EAIxC+mC,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAQtBtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAU5D,MAAM40D,GAEQ,SAAW5tE,EAAM6tE,EAAaC,GAE1CA,EAAMA,GAAO,EAEb,MAAMC,EAAWF,GAAeA,EAAY12F,OACtC62F,EAAWD,EAAWF,EAAa,GAAMC,EAAM9tE,EAAK7oB,OAC1D,IAAI82F,EAAYC,GAAYluE,EAAM,EAAGguE,EAAUF,GAAK,GACpD,MAAM7lC,EAAY,GAElB,IAAOgmC,GAAaA,EAAU5+B,OAAS4+B,EAAUE,KAAO,OAAOlmC,EAE/D,IAAI/5C,EAAMC,EAAME,EAAMC,EAAM5X,EAAGiD,EAAGy0F,EAKlC,GAHKL,IAAWE,EAqTlB,SAAyBjuE,EAAM6tE,EAAaI,EAAWH,GAEtD,MAAMO,EAAQ,GACd,IAAIp2F,EAAGiR,EAAK0X,EAAOG,EAAKy6C,EAExB,IAAMvjE,EAAI,EAAGiR,EAAM2kF,EAAY12F,OAAQc,EAAIiR,EAAKjR,IAE/C2oB,EAAQitE,EAAa51F,GAAM61F,EAC3B/sE,EAAM9oB,EAAIiR,EAAM,EAAI2kF,EAAa51F,EAAI,GAAM61F,EAAM9tE,EAAK7oB,OACtDqkE,EAAO0yB,GAAYluE,EAAMY,EAAOG,EAAK+sE,GAAK,GACrCtyB,IAASA,EAAKnM,OAAOmM,EAAK8yB,SAAU,GACzCD,EAAMpiG,KAAMsiG,GAAa/yB,IAO1B,IAHA6yB,EAAMnpD,KAAMspD,IAGNv2F,EAAI,EAAGA,EAAIo2F,EAAMl3F,OAAQc,IAE9Bw2F,GAAeJ,EAAOp2F,GAAKg2F,GAC3BA,EAAYS,GAAcT,EAAWA,EAAU5+B,MAIhD,OAAO4+B,EA9UsBU,CAAgB3uE,EAAM6tE,EAAaI,EAAWH,IAGrE9tE,EAAK7oB,OAAS,GAAK22F,EAAM,CAE7B5/E,EAAOG,EAAO2R,EAAM,GACpB7R,EAAOG,EAAO0R,EAAM,GAEpB,IAAM,IAAI/nB,EAAI61F,EAAK71F,EAAI+1F,EAAU/1F,GAAK61F,EAErCp3F,EAAIspB,EAAM/nB,GACV0B,EAAIqmB,EAAM/nB,EAAI,GACTvB,EAAIwX,IAAOA,EAAOxX,GAClBiD,EAAIwU,IAAOA,EAAOxU,GAClBjD,EAAI2X,IAAOA,EAAO3X,GAClBiD,EAAI2U,IAAOA,EAAO3U,GAKxBy0F,EAAUjjG,KAAK8N,IAAKoV,EAAOH,EAAMI,EAAOH,GACxCigF,EAAsB,IAAZA,EAAgB,EAAIA,EAAU,EAMzC,OAFAQ,GAAcX,EAAWhmC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,GAE9CnmC,GAOT,SAASimC,GAAYluE,EAAMY,EAAOG,EAAK+sE,EAAKe,GAE3C,IAAI52F,EAAG62F,EAEP,GAAKD,IA+sBN,SAAqB7uE,EAAMY,EAAOG,EAAK+sE,GAEtC,IAAIiB,EAAM,EACV,IAAM,IAAI92F,EAAI2oB,EAAOvP,EAAI0P,EAAM+sE,EAAK71F,EAAI8oB,EAAK9oB,GAAK61F,EAEjDiB,IAAS/uE,EAAM3O,GAAM2O,EAAM/nB,KAAU+nB,EAAM/nB,EAAI,GAAM+nB,EAAM3O,EAAI,IAC/DA,EAAIpZ,EAIL,OAAO82F,EAztBcC,CAAYhvE,EAAMY,EAAOG,EAAK+sE,GAAQ,EAE1D,IAAM71F,EAAI2oB,EAAO3oB,EAAI8oB,EAAK9oB,GAAK61F,EAAMgB,EAAOG,GAAYh3F,EAAG+nB,EAAM/nB,GAAK+nB,EAAM/nB,EAAI,GAAK62F,QAIrF,IAAM72F,EAAI8oB,EAAM+sE,EAAK71F,GAAK2oB,EAAO3oB,GAAK61F,EAAMgB,EAAOG,GAAYh3F,EAAG+nB,EAAM/nB,GAAK+nB,EAAM/nB,EAAI,GAAK62F,GAW7F,OAPKA,GAAQ59E,GAAQ49E,EAAMA,EAAKz/B,QAE/B6/B,GAAYJ,GACZA,EAAOA,EAAKz/B,MAINy/B,EAKR,SAASJ,GAAc9tE,EAAOG,GAE7B,IAAOH,EAAQ,OAAOA,EACfG,IAAMA,EAAMH,GAEnB,IACCuuE,EADG7gG,EAAIsyB,EAER,GAIC,GAFAuuE,GAAQ,EAED7gG,EAAEggG,UAAap9E,GAAQ5iB,EAAGA,EAAE+gE,OAAwC,IAA9B+/B,GAAM9gG,EAAE6/F,KAAM7/F,EAAGA,EAAE+gE,MAS/D/gE,EAAIA,EAAE+gE,SAT0E,CAIhF,GAFA6/B,GAAY5gG,GACZA,EAAIyyB,EAAMzyB,EAAE6/F,KACP7/F,IAAMA,EAAE+gE,KAAO,MACpB8/B,GAAQ,SAQAA,GAAS7gG,IAAMyyB,GAEzB,OAAOA,EAKR,SAAS6tE,GAAcS,EAAKpnC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,EAASkB,GAEhE,IAAOD,EAAM,QAGNC,GAAQlB,GA0VhB,SAAqBxtE,EAAO1S,EAAMC,EAAMigF,GAEvC,IAAI9/F,EAAIsyB,EACR,GAEc,OAARtyB,EAAEiX,IAAajX,EAAEiX,EAAIgqF,GAAQjhG,EAAEoI,EAAGpI,EAAEqL,EAAGuU,EAAMC,EAAMigF,IACxD9/F,EAAEkhG,MAAQlhG,EAAE6/F,KACZ7/F,EAAEmhG,MAAQnhG,EAAE+gE,KACZ/gE,EAAIA,EAAE+gE,WAEG/gE,IAAMsyB,GAEhBtyB,EAAEkhG,MAAMC,MAAQ,KAChBnhG,EAAEkhG,MAAQ,KAQX,SAAqBh0B,GAEpB,IAAIvjE,EAAG3J,EAAG2M,EAAG7I,EAAGs9F,EAAMC,EAAWC,EAAOC,EACvCC,EAAS,EAEV,EAAG,CAOF,IALAxhG,EAAIktE,EACJA,EAAO,KACPk0B,EAAO,KACPC,EAAY,EAEJrhG,GAAI,CAKX,IAHAqhG,IACA10F,EAAI3M,EACJshG,EAAQ,EACF33F,EAAI,EAAGA,EAAI63F,IAEhBF,IACA30F,EAAIA,EAAEw0F,MACCx0F,GAJiBhD,KAUzB,IAFA43F,EAAQC,EAEAF,EAAQ,GAAOC,EAAQ,GAAK50F,GAEpB,IAAV20F,IAA2B,IAAVC,IAAiB50F,GAAK3M,EAAEiX,GAAKtK,EAAEsK,IAEpDnT,EAAI9D,EACJA,EAAIA,EAAEmhG,MACNG,MAIAx9F,EAAI6I,EACJA,EAAIA,EAAEw0F,MACNI,KAIIH,EAAOA,EAAKD,MAAQr9F,EACpBopE,EAAOppE,EAEZA,EAAEo9F,MAAQE,EACVA,EAAOt9F,EAIR9D,EAAI2M,EAILy0F,EAAKD,MAAQ,KACbK,GAAU,QAEDH,EAAY,GAhEtBI,CAAYzhG,GAzWa0hG,CAAYX,EAAKnhF,EAAMC,EAAMigF,GAEtD,IACCD,EAAM9+B,EADHtgB,EAAOsgD,EAIX,KAAQA,EAAIlB,OAASkB,EAAIhgC,MAKxB,GAHA8+B,EAAOkB,EAAIlB,KACX9+B,EAAOggC,EAAIhgC,KAEN++B,EAAU6B,GAAaZ,EAAKnhF,EAAMC,EAAMigF,GAAY8B,GAAOb,GAG/DpnC,EAAUh8D,KAAMkiG,EAAKl2F,EAAI61F,GACzB7lC,EAAUh8D,KAAMojG,EAAIp3F,EAAI61F,GACxB7lC,EAAUh8D,KAAMojE,EAAKp3D,EAAI61F,GAEzBoB,GAAYG,GAGZA,EAAMhgC,EAAKA,KACXtgB,EAAOsgB,EAAKA,UASb,IAHAggC,EAAMhgC,KAGOtgB,EAAO,CAGZugD,EAMc,IAATA,EAGXV,GADAS,EAAMc,GAAwBzB,GAAcW,GAAOpnC,EAAW6lC,GAC3C7lC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,EAAS,GAIpC,IAATkB,GAEXc,GAAaf,EAAKpnC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,GAb9CQ,GAAcF,GAAcW,GAAOpnC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,EAAS,GAiBzE,OASH,SAAS8B,GAAOb,GAEf,MAAMn0F,EAAIm0F,EAAIlB,KACbhzF,EAAIk0F,EACJj0F,EAAIi0F,EAAIhgC,KAET,GAAK+/B,GAAMl0F,EAAGC,EAAGC,IAAO,EAAI,OAAO,EAGnC,IAAI9M,EAAI+gG,EAAIhgC,KAAKA,KAEjB,KAAQ/gE,IAAM+gG,EAAIlB,MAAO,CAExB,GAAKkC,GAAiBn1F,EAAExE,EAAGwE,EAAEvB,EAAGwB,EAAEzE,EAAGyE,EAAExB,EAAGyB,EAAE1E,EAAG0E,EAAEzB,EAAGrL,EAAEoI,EAAGpI,EAAEqL,IAC1Dy1F,GAAM9gG,EAAE6/F,KAAM7/F,EAAGA,EAAE+gE,OAAU,EAAI,OAAO,EACzC/gE,EAAIA,EAAE+gE,KAIP,OAAO,EAIR,SAAS4gC,GAAaZ,EAAKnhF,EAAMC,EAAMigF,GAEtC,MAAMlzF,EAAIm0F,EAAIlB,KACbhzF,EAAIk0F,EACJj0F,EAAIi0F,EAAIhgC,KAET,GAAK+/B,GAAMl0F,EAAGC,EAAGC,IAAO,EAAI,OAAO,EAGnC,MAAMk1F,EAAQp1F,EAAExE,EAAIyE,EAAEzE,EAAMwE,EAAExE,EAAI0E,EAAE1E,EAAIwE,EAAExE,EAAI0E,EAAE1E,EAAQyE,EAAEzE,EAAI0E,EAAE1E,EAAIyE,EAAEzE,EAAI0E,EAAE1E,EAC3E65F,EAAQr1F,EAAEvB,EAAIwB,EAAExB,EAAMuB,EAAEvB,EAAIyB,EAAEzB,EAAIuB,EAAEvB,EAAIyB,EAAEzB,EAAQwB,EAAExB,EAAIyB,EAAEzB,EAAIwB,EAAExB,EAAIyB,EAAEzB,EACtE62F,EAAQt1F,EAAExE,EAAIyE,EAAEzE,EAAMwE,EAAExE,EAAI0E,EAAE1E,EAAIwE,EAAExE,EAAI0E,EAAE1E,EAAQyE,EAAEzE,EAAI0E,EAAE1E,EAAIyE,EAAEzE,EAAI0E,EAAE1E,EACtE+5F,EAAQv1F,EAAEvB,EAAIwB,EAAExB,EAAMuB,EAAEvB,EAAIyB,EAAEzB,EAAIuB,EAAEvB,EAAIyB,EAAEzB,EAAQwB,EAAExB,EAAIyB,EAAEzB,EAAIwB,EAAExB,EAAIyB,EAAEzB,EAGjEyU,EAAOmhF,GAAQe,EAAOC,EAAOriF,EAAMC,EAAMigF,GAC9C7/E,EAAOghF,GAAQiB,EAAOC,EAAOviF,EAAMC,EAAMigF,GAE1C,IAAI9/F,EAAI+gG,EAAIG,MACXr2F,EAAIk2F,EAAII,MAGT,KAAQnhG,GAAKA,EAAEiX,GAAK6I,GAAQjV,GAAKA,EAAEoM,GAAKgJ,GAAO,CAE9C,GAAKjgB,IAAM+gG,EAAIlB,MAAQ7/F,IAAM+gG,EAAIhgC,MAChCghC,GAAiBn1F,EAAExE,EAAGwE,EAAEvB,EAAGwB,EAAEzE,EAAGyE,EAAExB,EAAGyB,EAAE1E,EAAG0E,EAAEzB,EAAGrL,EAAEoI,EAAGpI,EAAEqL,IACtDy1F,GAAM9gG,EAAE6/F,KAAM7/F,EAAGA,EAAE+gE,OAAU,EAAI,OAAO,EAGzC,GAFA/gE,EAAIA,EAAEkhG,MAEDr2F,IAAMk2F,EAAIlB,MAAQh1F,IAAMk2F,EAAIhgC,MAChCghC,GAAiBn1F,EAAExE,EAAGwE,EAAEvB,EAAGwB,EAAEzE,EAAGyE,EAAExB,EAAGyB,EAAE1E,EAAG0E,EAAEzB,EAAGR,EAAEzC,EAAGyC,EAAEQ,IACtDy1F,GAAMj2F,EAAEg1F,KAAMh1F,EAAGA,EAAEk2D,OAAU,EAAI,OAAO,EACzCl2D,EAAIA,EAAEs2F,MAKP,KAAQnhG,GAAKA,EAAEiX,GAAK6I,GAAO,CAE1B,GAAK9f,IAAM+gG,EAAIlB,MAAQ7/F,IAAM+gG,EAAIhgC,MAChCghC,GAAiBn1F,EAAExE,EAAGwE,EAAEvB,EAAGwB,EAAEzE,EAAGyE,EAAExB,EAAGyB,EAAE1E,EAAG0E,EAAEzB,EAAGrL,EAAEoI,EAAGpI,EAAEqL,IACtDy1F,GAAM9gG,EAAE6/F,KAAM7/F,EAAGA,EAAE+gE,OAAU,EAAI,OAAO,EACzC/gE,EAAIA,EAAEkhG,MAKP,KAAQr2F,GAAKA,EAAEoM,GAAKgJ,GAAO,CAE1B,GAAKpV,IAAMk2F,EAAIlB,MAAQh1F,IAAMk2F,EAAIhgC,MAChCghC,GAAiBn1F,EAAExE,EAAGwE,EAAEvB,EAAGwB,EAAEzE,EAAGyE,EAAExB,EAAGyB,EAAE1E,EAAG0E,EAAEzB,EAAGR,EAAEzC,EAAGyC,EAAEQ,IACtDy1F,GAAMj2F,EAAEg1F,KAAMh1F,EAAGA,EAAEk2D,OAAU,EAAI,OAAO,EACzCl2D,EAAIA,EAAEs2F,MAIP,OAAO,EAKR,SAASU,GAAwBvvE,EAAOqnC,EAAW6lC,GAElD,IAAIx/F,EAAIsyB,EACR,EAAG,CAEF,MAAM1lB,EAAI5M,EAAE6/F,KACXhzF,EAAI7M,EAAE+gE,KAAKA,MAELn+C,GAAQhW,EAAGC,IAAOumC,GAAYxmC,EAAG5M,EAAGA,EAAE+gE,KAAMl0D,IAAOu1F,GAAex1F,EAAGC,IAAOu1F,GAAev1F,EAAGD,KAEpG+sD,EAAUh8D,KAAMiP,EAAEjD,EAAI61F,GACtB7lC,EAAUh8D,KAAMqC,EAAE2J,EAAI61F,GACtB7lC,EAAUh8D,KAAMkP,EAAElD,EAAI61F,GAGtBoB,GAAY5gG,GACZ4gG,GAAY5gG,EAAE+gE,MAEd/gE,EAAIsyB,EAAQzlB,GAIb7M,EAAIA,EAAE+gE,WAEG/gE,IAAMsyB,GAEhB,OAAO8tE,GAAcpgG,GAKtB,SAAS8hG,GAAaxvE,EAAOqnC,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,GAGxD,IAAIlzF,EAAI0lB,EACR,EAAG,CAEF,IAAIzlB,EAAID,EAAEm0D,KAAKA,KACf,KAAQl0D,IAAMD,EAAEizF,MAAO,CAEtB,GAAKjzF,EAAEjD,IAAMkD,EAAElD,GAAK04F,GAAiBz1F,EAAGC,GAAM,CAG7C,IAAIC,EAAIw1F,GAAc11F,EAAGC,GASzB,OANAD,EAAIwzF,GAAcxzF,EAAGA,EAAEm0D,MACvBj0D,EAAIszF,GAActzF,EAAGA,EAAEi0D,MAGvBu/B,GAAc1zF,EAAG+sD,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,QAC7CQ,GAAcxzF,EAAG6sD,EAAW6lC,EAAK5/E,EAAMC,EAAMigF,GAK9CjzF,EAAIA,EAAEk0D,KAIPn0D,EAAIA,EAAEm0D,WAEGn0D,IAAM0lB,GAkCjB,SAAS4tE,GAAUtzF,EAAGC,GAErB,OAAOD,EAAExE,EAAIyE,EAAEzE,EAKhB,SAAS+3F,GAAeoC,EAAM5C,GAG7B,GADAA,EAcD,SAAyB4C,EAAM5C,GAE9B,IAAI3/F,EAAI2/F,EACR,MAAM6C,EAAKD,EAAKn6F,EACVq6F,EAAKF,EAAKl3F,EAChB,IAAqBP,EAAjBwS,GAAOqC,EAAAA,EAIX,EAAG,CAEF,GAAK8iF,GAAMziG,EAAEqL,GAAKo3F,GAAMziG,EAAE+gE,KAAK11D,GAAKrL,EAAE+gE,KAAK11D,IAAMrL,EAAEqL,EAAI,CAEtD,MAAMjD,EAAIpI,EAAEoI,GAAMq6F,EAAKziG,EAAEqL,IAAQrL,EAAE+gE,KAAK34D,EAAIpI,EAAEoI,IAAQpI,EAAE+gE,KAAK11D,EAAIrL,EAAEqL,GACnE,GAAKjD,GAAKo6F,GAAMp6F,EAAIkV,EAAK,CAGxB,GADAA,EAAKlV,EACAA,IAAMo6F,EAAK,CAEf,GAAKC,IAAOziG,EAAEqL,EAAI,OAAOrL,EACzB,GAAKyiG,IAAOziG,EAAE+gE,KAAK11D,EAAI,OAAOrL,EAAE+gE,KAIjCj2D,EAAI9K,EAAEoI,EAAIpI,EAAE+gE,KAAK34D,EAAIpI,EAAIA,EAAE+gE,MAM7B/gE,EAAIA,EAAE+gE,WAEG/gE,IAAM2/F,GAEhB,IAAO70F,EAAI,OAAO,KAElB,GAAK03F,IAAOllF,EAAK,OAAOxS,EAMxB,MAAM21C,EAAO31C,EACZ43F,EAAK53F,EAAE1C,EACPu6F,EAAK73F,EAAEO,EACR,IAAuB6yB,EAAnB0kE,EAASjjF,EAAAA,EAEb3f,EAAI8K,EAEJ,GAEM03F,GAAMxiG,EAAEoI,GAAKpI,EAAEoI,GAAKs6F,GAAMF,IAAOxiG,EAAEoI,GACtC25F,GAAiBU,EAAKE,EAAKH,EAAKllF,EAAImlF,EAAIC,EAAIC,EAAIF,EAAKE,EAAKrlF,EAAKklF,EAAIC,EAAIziG,EAAEoI,EAAGpI,EAAEqL,KAE/E6yB,EAAMrhC,KAAK4R,IAAKg0F,EAAKziG,EAAEqL,IAAQm3F,EAAKxiG,EAAEoI,GAEjCg6F,GAAepiG,EAAGuiG,KAAYrkE,EAAM0kE,GAAY1kE,IAAQ0kE,IAAY5iG,EAAEoI,EAAI0C,EAAE1C,GAAOpI,EAAEoI,IAAM0C,EAAE1C,GAAKy6F,GAAsB/3F,EAAG9K,OAE/H8K,EAAI9K,EACJ4iG,EAAS1kE,IAMXl+B,EAAIA,EAAE+gE,WAEG/gE,IAAMygD,GAEhB,OAAO31C,EAnFKg4F,CAAgBP,EAAM5C,GACjB,CAEhB,MAAM9yF,EAAIy1F,GAAc3C,EAAW4C,GAGnCnC,GAAcT,EAAWA,EAAU5+B,MACnCq/B,GAAcvzF,EAAGA,EAAEk0D,OAiFrB,SAAS8hC,GAAsB/3F,EAAG9K,GAEjC,OAAO8gG,GAAMh2F,EAAE+0F,KAAM/0F,EAAG9K,EAAE6/F,MAAS,GAAKiB,GAAM9gG,EAAE+gE,KAAMj2D,EAAGA,EAAEi2D,MAAS,EA2FrE,SAASkgC,GAAQ74F,EAAGiD,EAAGuU,EAAMC,EAAMigF,GAgBlC,OAPA13F,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAHzBA,EAAI,OAAUA,EAAIwX,GAASkgF,GAGf13F,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAKjBiD,EAAyB,aADzBA,EAAyB,YADzBA,EAAyB,YADzBA,EAAyB,WAPzBA,EAAI,OAAUA,EAAIwU,GAASigF,GAOfz0F,GAAK,IACLA,GAAK,IACLA,GAAK,IACLA,GAAK,KAEC,EAKnB,SAAS40F,GAAa3tE,GAErB,IAAItyB,EAAIsyB,EACPywE,EAAWzwE,EACZ,IAEMtyB,EAAEoI,EAAI26F,EAAS36F,GAAOpI,EAAEoI,IAAM26F,EAAS36F,GAAKpI,EAAEqL,EAAI03F,EAAS13F,KAAM03F,EAAW/iG,GACjFA,EAAIA,EAAE+gE,WAEG/gE,IAAMsyB,GAEhB,OAAOywE,EAKR,SAAShB,GAAiB1jF,EAAIC,EAAIE,EAAIC,EAAIrL,EAAIC,EAAI2vF,EAAIC,GAErD,OAAS7vF,EAAK4vF,IAAS1kF,EAAK2kF,IAAS5kF,EAAK2kF,IAAS3vF,EAAK4vF,IAAQ,IAC5D5kF,EAAK2kF,IAASvkF,EAAKwkF,IAASzkF,EAAKwkF,IAAS1kF,EAAK2kF,IAAQ,IACvDzkF,EAAKwkF,IAAS3vF,EAAK4vF,IAAS7vF,EAAK4vF,IAASvkF,EAAKwkF,IAAQ,EAK5D,SAASZ,GAAiBz1F,EAAGC,GAE5B,OAAOD,EAAEm0D,KAAKp3D,IAAMkD,EAAElD,GAAKiD,EAAEizF,KAAKl2F,IAAMkD,EAAElD,IAsD3C,SAA4BiD,EAAGC,GAE9B,IAAI7M,EAAI4M,EACR,EAAG,CAEF,GAAK5M,EAAE2J,IAAMiD,EAAEjD,GAAK3J,EAAE+gE,KAAKp3D,IAAMiD,EAAEjD,GAAK3J,EAAE2J,IAAMkD,EAAElD,GAAK3J,EAAE+gE,KAAKp3D,IAAMkD,EAAElD,GACpEypC,GAAYpzC,EAAGA,EAAE+gE,KAAMn0D,EAAGC,GAAM,OAAO,EACzC7M,EAAIA,EAAE+gE,WAEG/gE,IAAM4M,GAEhB,OAAO,EAjE0Cs2F,CAAmBt2F,EAAGC,KACpEu1F,GAAex1F,EAAGC,IAAOu1F,GAAev1F,EAAGD,IA8E/C,SAAuBA,EAAGC,GAEzB,IAAI7M,EAAI4M,EACPu2F,GAAS,EACV,MAAMH,GAAOp2F,EAAExE,EAAIyE,EAAEzE,GAAM,EAC1B66F,GAAOr2F,EAAEvB,EAAIwB,EAAExB,GAAM,EACtB,GAEUrL,EAAEqL,EAAI43F,GAAWjjG,EAAE+gE,KAAK11D,EAAI43F,GAAUjjG,EAAE+gE,KAAK11D,IAAMrL,EAAEqL,GAC1D23F,GAAOhjG,EAAE+gE,KAAK34D,EAAIpI,EAAEoI,IAAQ66F,EAAKjjG,EAAEqL,IAAQrL,EAAE+gE,KAAK11D,EAAIrL,EAAEqL,GAAMrL,EAAEoI,IACnE+6F,GAAWA,GACZnjG,EAAIA,EAAE+gE,WAEG/gE,IAAM4M,GAEhB,OAAOu2F,EA7F8CC,CAAcx2F,EAAGC,KACnEi0F,GAAMl0F,EAAEizF,KAAMjzF,EAAGC,EAAEgzF,OAAUiB,GAAMl0F,EAAGC,EAAEgzF,KAAMhzF,KAChD+V,GAAQhW,EAAGC,IAAOi0F,GAAMl0F,EAAEizF,KAAMjzF,EAAGA,EAAEm0D,MAAS,GAAK+/B,GAAMj0F,EAAEgzF,KAAMhzF,EAAGA,EAAEk0D,MAAS,GAKjF,SAAS+/B,GAAM9gG,EAAG2M,EAAGmG,GAEpB,OAASnG,EAAEtB,EAAIrL,EAAEqL,IAAQyH,EAAE1K,EAAIuE,EAAEvE,IAAQuE,EAAEvE,EAAIpI,EAAEoI,IAAQ0K,EAAEzH,EAAIsB,EAAEtB,GAKlE,SAASuX,GAAQM,EAAIC,GAEpB,OAAOD,EAAG9a,IAAM+a,EAAG/a,GAAK8a,EAAG7X,IAAM8X,EAAG9X,EAKrC,SAAS+nC,GAAYlwB,EAAImgF,EAAIlgF,EAAImgF,GAEhC,MAAMC,EAAKp7F,GAAM24F,GAAM59E,EAAImgF,EAAIlgF,IACzBqgF,EAAKr7F,GAAM24F,GAAM59E,EAAImgF,EAAIC,IACzBG,EAAKt7F,GAAM24F,GAAM39E,EAAImgF,EAAIpgF,IACzBwgF,EAAKv7F,GAAM24F,GAAM39E,EAAImgF,EAAID,IAE/B,OAAKE,IAAOC,GAAMC,IAAOC,MAEb,IAAPH,IAAYI,GAAWzgF,EAAIC,EAAIkgF,QACxB,IAAPG,IAAYG,GAAWzgF,EAAIogF,EAAID,QACxB,IAAPI,IAAYE,GAAWxgF,EAAID,EAAIogF,OACxB,IAAPI,IAAYC,GAAWxgF,EAAIkgF,EAAIC,OAOrC,SAASK,GAAW3jG,EAAG2M,EAAGmG,GAEzB,OAAOnG,EAAEvE,GAAKvL,KAAK8N,IAAK3K,EAAEoI,EAAG0K,EAAE1K,IAAOuE,EAAEvE,GAAKvL,KAAK6N,IAAK1K,EAAEoI,EAAG0K,EAAE1K,IAAOuE,EAAEtB,GAAKxO,KAAK8N,IAAK3K,EAAEqL,EAAGyH,EAAEzH,IAAOsB,EAAEtB,GAAKxO,KAAK6N,IAAK1K,EAAEqL,EAAGyH,EAAEzH,GAI7H,SAASlD,GAAMy7F,GAEd,OAAOA,EAAM,EAAI,EAAIA,EAAM,GAAM,EAAI,EAqBtC,SAASxB,GAAex1F,EAAGC,GAE1B,OAAOi0F,GAAMl0F,EAAEizF,KAAMjzF,EAAGA,EAAEm0D,MAAS,EAClC+/B,GAAMl0F,EAAGC,EAAGD,EAAEm0D,OAAU,GAAK+/B,GAAMl0F,EAAGA,EAAEizF,KAAMhzF,IAAO,EACrDi0F,GAAMl0F,EAAGC,EAAGD,EAAEizF,MAAS,GAAKiB,GAAMl0F,EAAGA,EAAEm0D,KAAMl0D,GAAM,EA0BrD,SAASy1F,GAAc11F,EAAGC,GAEzB,MAAM5B,EAAK,IAAI44F,GAAQj3F,EAAEjD,EAAGiD,EAAExE,EAAGwE,EAAEvB,GAClCF,EAAK,IAAI04F,GAAQh3F,EAAElD,EAAGkD,EAAEzE,EAAGyE,EAAExB,GAC7By4F,EAAKl3F,EAAEm0D,KACPgjC,EAAKl3F,EAAEgzF,KAcR,OAZAjzF,EAAEm0D,KAAOl0D,EACTA,EAAEgzF,KAAOjzF,EAET3B,EAAG81D,KAAO+iC,EACVA,EAAGjE,KAAO50F,EAEVE,EAAG41D,KAAO91D,EACVA,EAAG40F,KAAO10F,EAEV44F,EAAGhjC,KAAO51D,EACVA,EAAG00F,KAAOkE,EAEH54F,EAKR,SAASw1F,GAAYh3F,EAAGvB,EAAGiD,EAAGm1F,GAE7B,MAAMxgG,EAAI,IAAI6jG,GAAQl6F,EAAGvB,EAAGiD,GAgB5B,OAdOm1F,GAONxgG,EAAE+gE,KAAOy/B,EAAKz/B,KACd/gE,EAAE6/F,KAAOW,EACTA,EAAKz/B,KAAK8+B,KAAO7/F,EACjBwgG,EAAKz/B,KAAO/gE,IARZA,EAAE6/F,KAAO7/F,EACTA,EAAE+gE,KAAO/gE,GAWHA,EAIR,SAAS4gG,GAAY5gG,GAEpBA,EAAE+gE,KAAK8+B,KAAO7/F,EAAE6/F,KAChB7/F,EAAE6/F,KAAK9+B,KAAO/gE,EAAE+gE,KAEX/gE,EAAEkhG,QAAQlhG,EAAEkhG,MAAMC,MAAQnhG,EAAEmhG,OAC5BnhG,EAAEmhG,QAAQnhG,EAAEmhG,MAAMD,MAAQlhG,EAAEkhG,OAIlC,SAAS2C,GAAQl6F,EAAGvB,EAAGiD,GAGtB7L,KAAKmK,EAAIA,EAGTnK,KAAK4I,EAAIA,EACT5I,KAAK6L,EAAIA,EAGT7L,KAAKqgG,KAAO,KACZrgG,KAAKuhE,KAAO,KAGZvhE,KAAKyX,EAAI,KAGTzX,KAAK0hG,MAAQ,KACb1hG,KAAK2hG,MAAQ,KAGb3hG,KAAKwgG,SAAU,EAkBhB,MAAMgE,GAAa,CAIlBlD,KAAM,SAAWmD,GAEhB,MAAMp5F,EAAIo5F,EAAQp7F,OAClB,IAAI+D,EAAI,EAER,IAAM,IAAI5M,EAAI6K,EAAI,EAAG8B,EAAI,EAAGA,EAAI9B,EAAG7K,EAAI2M,IAEtCC,GAAKq3F,EAASjkG,GAAIoI,EAAI67F,EAASt3F,GAAItB,EAAI44F,EAASt3F,GAAIvE,EAAI67F,EAASjkG,GAAIqL,EAItE,MAAW,GAAJuB,GAIRs3F,YAAa,SAAWC,GAEvB,OAAOH,GAAWlD,KAAMqD,GAAQ,GAIjCC,iBAAkB,SAAWH,EAASI,GAErC,MAAM75D,EAAW,GACX+0D,EAAc,GACdj0D,EAAQ,GAEdg5D,GAAiBL,GACjBM,GAAY/5D,EAAUy5D,GAItB,IAAIO,EAAYP,EAAQp7F,OAExBw7F,EAAMvkG,QAASwkG,IAEf,IAAM,IAAI36F,EAAI,EAAGA,EAAI06F,EAAMx7F,OAAQc,IAElC41F,EAAY5hG,KAAM6mG,GAClBA,GAAaH,EAAO16F,GAAId,OACxB07F,GAAY/5D,EAAU65D,EAAO16F,IAM9B,MAAMgwD,EAAY2lC,GAAoB90D,EAAU+0D,GAIhD,IAAM,IAAI51F,EAAI,EAAGA,EAAIgwD,EAAU9wD,OAAQc,GAAK,EAE3C2hC,EAAM3tC,KAAMg8D,EAAU58D,MAAO4M,EAAGA,EAAI,IAIrC,OAAO2hC,IAMT,SAASg5D,GAAiBnkF,GAEzB,MAAMvW,EAAIuW,EAAOtX,OAEZe,EAAI,GAAKuW,EAAQvW,EAAI,GAAIgZ,OAAQzC,EAAQ,KAE7CA,EAAO6rD,MAMT,SAASu4B,GAAY/5D,EAAUy5D,GAE9B,IAAM,IAAIt6F,EAAI,EAAGA,EAAIs6F,EAAQp7F,OAAQc,IAEpC6gC,EAAS7sC,KAAMsmG,EAASt6F,GAAIvB,GAC5BoiC,EAAS7sC,KAAMsmG,EAASt6F,GAAI0B,GA8B9B,MAAMo5F,WAAwBtwD,GAE7B/1C,YAAasyB,EAAQpzB,GAEpBiC,QAEAC,KAAKlB,KAAO,kBAEZkB,KAAK2xB,WAAa,CACjBT,OAAQA,EACRpzB,QAASA,GAGVkC,KAAK40C,mBAAoB,IAAIswD,GAAuBh0E,EAAQpzB,IAC5DkC,KAAK22C,gBAIN/3C,SAEC,MAAMszB,EAAOnyB,MAAM2W,SAKnB,OAAOA,GAHQ1W,KAAK2xB,WAAWT,OACflxB,KAAK2xB,WAAW7zB,QAEAo0B,IASlC,MAAMgzE,WAA8B93D,GAEnCxuC,YAAasyB,EAAQpzB,GAEpBiC,QAEAC,KAAKlB,KAAO,wBAEZkB,KAAK2xB,WAAa,CACjBT,OAAQA,EACRpzB,QAASA,GAGVozB,EAASjyB,MAAMkY,QAAS+Z,GAAWA,EAAS,CAAEA,GAE9C,MAAM2jB,EAAQ70C,KAERmlG,EAAgB,GAChB9V,EAAU,GAEhB,IAAM,IAAIllF,EAAI,EAAGC,EAAI8mB,EAAO7nB,OAAQc,EAAIC,EAAGD,IAAO,CAGjDi7F,EADcl0E,EAAQ/mB,IAcvB,SAASi7F,EAAUxzE,GAElB,MAAMyzE,EAAc,GAIdC,OAA0C3kG,IAA1B7C,EAAQwnG,cAA8BxnG,EAAQwnG,cAAgB,GAC9EC,OAA0B5kG,IAAlB7C,EAAQynG,MAAsBznG,EAAQynG,MAAQ,EAC5D,IAAI3sD,OAA0Bj4C,IAAlB7C,EAAQ86C,MAAsB96C,EAAQ86C,MAAQ,IAEtD4sD,OAAwC7kG,IAAzB7C,EAAQ0nG,cAA6B1nG,EAAQ0nG,aAC5DC,OAA4C9kG,IAA3B7C,EAAQ2nG,eAA+B3nG,EAAQ2nG,eAAiB,EACjFC,OAAkC/kG,IAAtB7C,EAAQ4nG,UAA0B5nG,EAAQ4nG,UAAYD,EAAiB,EACnFE,OAAsChlG,IAAxB7C,EAAQ6nG,YAA4B7nG,EAAQ6nG,YAAc,EACxEC,OAA0CjlG,IAA1B7C,EAAQ8nG,cAA8B9nG,EAAQ8nG,cAAgB,EAElF,MAAMC,EAAc/nG,EAAQ+nG,YAEtBC,OAAgCnlG,IAAxB7C,EAAQioG,YAA4BjoG,EAAQioG,YAAcC,QAIhDrlG,IAAnB7C,EAAQmoG,SAEZ3nG,QAAQC,KAAM,kEACdq6C,EAAQ96C,EAAQmoG,QAMjB,IAAIC,EACAC,EAAYC,EAAU3mF,EAAQ4mF,EADlBC,GAAgB,EAG3BT,IAEJK,EAAaL,EAAYU,gBAAiBhB,GAE1Ce,GAAgB,EAChBd,GAAe,EAMfW,EAAaN,EAAYrH,oBAAqB+G,GAAO,GAIrDa,EAAW,IAAI5oF,EACfiC,EAAS,IAAIjC,EACb6oF,EAAY,IAAI7oF,GAMVgoF,IAENI,EAAgB,EAChBH,EAAiB,EACjBC,EAAY,EACZC,EAAc,GAMf,MAAMa,EAAc50E,EAAM60E,cAAenB,GAEzC,IAAIt6D,EAAWw7D,EAAY50E,MAC3B,MAAMizE,EAAQ2B,EAAY3B,MAI1B,IAFkBL,GAAWE,YAAa15D,GAE3B,CAEdA,EAAWA,EAAS07D,UAIpB,IAAM,IAAIj0F,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GAEhB+xF,GAAWE,YAAakC,KAE5B/B,EAAOpyF,GAAMm0F,EAAMF,YAStB,MAAM56D,EAAQ04D,GAAWI,iBAAkB55D,EAAU65D,GAI/CJ,EAAUz5D,EAEhB,IAAM,IAAIv4B,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GAErBu4B,EAAWA,EAAS67D,OAAQD,GAK7B,SAASE,EAAUC,EAAIC,EAAK9hG,GAI3B,OAFO8hG,GAAM1oG,QAAQ0R,MAAO,6CAErBg3F,EAAIxwF,QAAQ9H,eAAgBxJ,GAAO+b,IAAK8lF,GAIhD,MAAME,EAAOj8D,EAAS3hC,OAAQ69F,EAAOp7D,EAAMziC,OAM3C,SAAS89F,EAAaC,EAAMC,EAAQC,GASnC,IAAIC,EAAWC,EAAWC,EAK1B,MAAMC,EAAWN,EAAKx+F,EAAIy+F,EAAOz+F,EAChC++F,EAAWP,EAAKv7F,EAAIw7F,EAAOx7F,EACtB+7F,EAAWN,EAAO1+F,EAAIw+F,EAAKx+F,EAChCi/F,EAAWP,EAAOz7F,EAAIu7F,EAAKv7F,EAEtBi8F,EAAiBJ,EAAWA,EAAWC,EAAWA,EAGlDI,EAAeL,EAAWG,EAAWF,EAAWC,EAEtD,GAAKvqG,KAAK4R,IAAK84F,GAAe3oG,OAAOkJ,QAAU,CAM9C,MAAM0/F,EAAa3qG,KAAK2R,KAAM84F,GACxBG,EAAa5qG,KAAK2R,KAAM44F,EAAWA,EAAWC,EAAWA,GAIzDK,EAAkBb,EAAOz+F,EAAI++F,EAAWK,EACxCG,EAAkBd,EAAOx7F,EAAI67F,EAAWM,EAOxCI,IALkBd,EAAO1+F,EAAIi/F,EAAWI,EAKfC,GAAkBL,GAJzBP,EAAOz7F,EAAI+7F,EAAWK,EAK1BE,GAAkBP,IACnCF,EAAWG,EAAWF,EAAWC,GAIpCL,EAAcW,EAAgBR,EAAWU,EAAKhB,EAAKx+F,EACnD4+F,EAAcW,EAAgBR,EAAWS,EAAKhB,EAAKv7F,EAInD,MAAMw8F,EAAkBd,EAAYA,EAAYC,EAAYA,EAC5D,GAAKa,GAAiB,EAErB,OAAO,IAAIn6F,EAASq5F,EAAWC,GAI/BC,EAAYpqG,KAAK2R,KAAMq5F,EAAgB,OAIlC,CAIN,IAAIC,GAAe,EAEdZ,EAAWtoG,OAAOkJ,QAEjBs/F,EAAWxoG,OAAOkJ,UAEtBggG,GAAe,GAMXZ,GAAatoG,OAAOkJ,QAEnBs/F,GAAaxoG,OAAOkJ,UAExBggG,GAAe,GAMXjrG,KAAKsL,KAAMg/F,KAAetqG,KAAKsL,KAAMk/F,KAEzCS,GAAe,GAQbA,GAGJf,GAAcI,EACdH,EAAYE,EACZD,EAAYpqG,KAAK2R,KAAM84F,KAKvBP,EAAYG,EACZF,EAAYG,EACZF,EAAYpqG,KAAK2R,KAAM84F,EAAe,IAMxC,OAAO,IAAI55F,EAASq5F,EAAYE,EAAWD,EAAYC,GAKxD,MAAMc,EAAmB,GAEzB,IAAM,IAAIp+F,EAAI,EAAG0W,EAAK4jF,EAAQp7F,OAAQka,EAAI1C,EAAK,EAAG3f,EAAIiJ,EAAI,EAAGA,EAAI0W,EAAI1W,IAAMoZ,IAAMriB,IAE3EqiB,IAAM1C,IAAK0C,EAAI,GACfriB,IAAM2f,IAAK3f,EAAI,GAKpBqnG,EAAkBp+F,GAAMg9F,EAAa1C,EAASt6F,GAAKs6F,EAASlhF,GAAKkhF,EAASvjG,IAI3E,MAAMsnG,EAAiB,GACvB,IAAIC,EAAkBC,EAAoBH,EAAiB1B,SAE3D,IAAM,IAAIp0F,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GAErBg2F,EAAmB,GAEnB,IAAM,IAAIt+F,EAAI,EAAG0W,EAAK+lF,EAAMv9F,OAAQka,EAAI1C,EAAK,EAAG3f,EAAIiJ,EAAI,EAAGA,EAAI0W,EAAI1W,IAAMoZ,IAAMriB,IAEzEqiB,IAAM1C,IAAK0C,EAAI,GACfriB,IAAM2f,IAAK3f,EAAI,GAGpBunG,EAAkBt+F,GAAMg9F,EAAaP,EAAOz8F,GAAKy8F,EAAOrjF,GAAKqjF,EAAO1lG,IAIrEsnG,EAAerqG,KAAMsqG,GACrBC,EAAoBA,EAAkB7B,OAAQ4B,GAO/C,IAAM,IAAIp7F,EAAI,EAAGA,EAAIu4F,EAAev4F,IAAO,CAI1C,MAAMvB,EAAIuB,EAAIu4F,EACRnuF,EAAIguF,EAAiBpoG,KAAKmQ,IAAK1B,EAAIzO,KAAKoN,GAAK,GAC7Ck+F,EAAKjD,EAAYroG,KAAKoQ,IAAK3B,EAAIzO,KAAKoN,GAAK,GAAMk7F,EAIrD,IAAM,IAAIx7F,EAAI,EAAG0W,EAAK4jF,EAAQp7F,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpD,MAAMy+F,EAAO9B,EAAUrC,EAASt6F,GAAKo+F,EAAkBp+F,GAAKw+F,GAE5DpoG,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,GAAK4L,GAMtB,IAAM,IAAIhF,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GACrBg2F,EAAmBD,EAAgB/1F,GAEnC,IAAM,IAAItI,EAAI,EAAG0W,EAAK+lF,EAAMv9F,OAAQc,EAAI0W,EAAI1W,IAAO,CAElD,MAAMy+F,EAAO9B,EAAUF,EAAOz8F,GAAKs+F,EAAkBt+F,GAAKw+F,GAE1DpoG,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,GAAK4L,KAQxB,MAAMkxF,EAAKjD,EAAYC,EAIvB,IAAM,IAAIx7F,EAAI,EAAGA,EAAI88F,EAAM98F,IAAO,CAEjC,MAAMy+F,EAAOpD,EAAesB,EAAU97D,EAAU7gC,GAAKu+F,EAAmBv+F,GAAKw+F,GAAO39D,EAAU7gC,GAEvFm8F,GAQN7mF,EAAOhJ,KAAM0vF,EAAWl7D,QAAS,IAAMv8B,eAAgBk6F,EAAKhgG,GAC5Dw9F,EAAS3vF,KAAM0vF,EAAWzH,UAAW,IAAMhwF,eAAgBk6F,EAAK/8F,GAEhEw6F,EAAU5vF,KAAMyvF,EAAY,IAAMjlF,IAAKxB,GAASwB,IAAKmlF,GAErD7lG,EAAG8lG,EAAUz9F,EAAGy9F,EAAUx6F,EAAGw6F,EAAU5uF,IAXvClX,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,EAAG,GAoBrB,IAAM,IAAIjO,EAAI,EAAGA,GAAK2nG,EAAO3nG,IAE5B,IAAM,IAAIuM,EAAI,EAAGA,EAAI88F,EAAM98F,IAAO,CAEjC,MAAMy+F,EAAOpD,EAAesB,EAAU97D,EAAU7gC,GAAKu+F,EAAmBv+F,GAAKw+F,GAAO39D,EAAU7gC,GAEvFm8F,GAQN7mF,EAAOhJ,KAAM0vF,EAAWl7D,QAASrtC,IAAM8Q,eAAgBk6F,EAAKhgG,GAC5Dw9F,EAAS3vF,KAAM0vF,EAAWzH,UAAW9gG,IAAM8Q,eAAgBk6F,EAAK/8F,GAEhEw6F,EAAU5vF,KAAMyvF,EAAYtoG,IAAMqjB,IAAKxB,GAASwB,IAAKmlF,GAErD7lG,EAAG8lG,EAAUz9F,EAAGy9F,EAAUx6F,EAAGw6F,EAAU5uF,IAXvClX,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,EAAG+sC,EAAQ2sD,EAAQ3nG,GAuBtC,IAAM,IAAIyP,EAAIu4F,EAAgB,EAAGv4F,GAAK,EAAGA,IAAO,CAE/C,MAAMvB,EAAIuB,EAAIu4F,EACRnuF,EAAIguF,EAAiBpoG,KAAKmQ,IAAK1B,EAAIzO,KAAKoN,GAAK,GAC7Ck+F,EAAKjD,EAAYroG,KAAKoQ,IAAK3B,EAAIzO,KAAKoN,GAAK,GAAMk7F,EAIrD,IAAM,IAAIx7F,EAAI,EAAG0W,EAAK4jF,EAAQp7F,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpD,MAAMy+F,EAAO9B,EAAUrC,EAASt6F,GAAKo+F,EAAkBp+F,GAAKw+F,GAC5DpoG,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,EAAG+sC,EAAQnhC,GAM5B,IAAM,IAAIhF,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GACrBg2F,EAAmBD,EAAgB/1F,GAEnC,IAAM,IAAItI,EAAI,EAAG0W,EAAK+lF,EAAMv9F,OAAQc,EAAI0W,EAAI1W,IAAO,CAElD,MAAMy+F,EAAO9B,EAAUF,EAAOz8F,GAAKs+F,EAAkBt+F,GAAKw+F,GAEnDrC,EAMN/lG,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,EAAIq6F,EAAYX,EAAQ,GAAI15F,EAAGq6F,EAAYX,EAAQ,GAAI38F,EAAI6O,GAJ3ElX,EAAGqoG,EAAKhgG,EAAGggG,EAAK/8F,EAAG+sC,EAAQnhC,KA4G/B,SAASoxF,EAAWpE,EAASqE,GAE5B,IAAI3+F,EAAIs6F,EAAQp7F,OAEhB,OAAWc,GAAK,GAAI,CAEnB,MAAMoZ,EAAIpZ,EACV,IAAIjJ,EAAIiJ,EAAI,EACPjJ,EAAI,IAAIA,EAAIujG,EAAQp7F,OAAS,GAIlC,IAAM,IAAIzL,EAAI,EAAGmrG,EAAOxD,EAAwB,EAAhBK,EAAqBhoG,EAAImrG,EAAInrG,IAAO,CAEnE,MAAMorG,EAAQ/B,EAAOrpG,EACfqrG,EAAQhC,GAASrpG,EAAI,GAO3BsrG,EALUJ,EAAcvlF,EAAIylF,EACvBF,EAAc5nG,EAAI8nG,EAClBF,EAAc5nG,EAAI+nG,EAClBH,EAAcvlF,EAAI0lF,KAU1B,SAAS1oG,EAAGqI,EAAGiD,EAAG4L,GAEjB4tF,EAAYlnG,KAAMyK,GAClBy8F,EAAYlnG,KAAM0N,GAClBw5F,EAAYlnG,KAAMsZ,GAKnB,SAAS0xF,EAAI/7F,EAAGC,EAAGC,GAElB87F,EAAWh8F,GACXg8F,EAAW/7F,GACX+7F,EAAW97F,GAEX,MAAM+7F,EAAYlE,EAAc97F,OAAS,EACnC6hC,EAAM46D,EAAMwD,cAAez0D,EAAOswD,EAAekE,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAEjGE,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IAIb,SAASg+D,EAAI97F,EAAGC,EAAGC,EAAGgF,GAErB82F,EAAWh8F,GACXg8F,EAAW/7F,GACX+7F,EAAW92F,GAEX82F,EAAW/7F,GACX+7F,EAAW97F,GACX87F,EAAW92F,GAGX,MAAM+2F,EAAYlE,EAAc97F,OAAS,EACnC6hC,EAAM46D,EAAM0D,mBAAoB30D,EAAOswD,EAAekE,EAAY,EAAGA,EAAY,EAAGA,EAAY,EAAGA,EAAY,GAErHE,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IAEZq+D,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IACZq+D,EAAOr+D,EAAK,IAIb,SAASk+D,EAAWjgG,GAEnBg8F,EAAchnG,KAAMknG,EAAqB,EAARl8F,EAAY,IAC7Cg8F,EAAchnG,KAAMknG,EAAqB,EAARl8F,EAAY,IAC7Cg8F,EAAchnG,KAAMknG,EAAqB,EAARl8F,EAAY,IAK9C,SAASogG,EAAOE,GAEfpa,EAAQlxF,KAAMsrG,EAAQ7gG,GACtBymF,EAAQlxF,KAAMsrG,EAAQ59F,IA3KvB,WAEC,MAAMinB,EAAQqyE,EAAc97F,OAAS,EAErC,GAAKm8F,EAAe,CAEnB,IAAIkE,EAAQ,EACRh6F,EAASu3F,EAAOyC,EAIpB,IAAM,IAAIv/F,EAAI,EAAGA,EAAI+8F,EAAM/8F,IAAO,CAEjC,MAAM4hC,EAAOD,EAAO3hC,GACpBg/F,EAAIp9D,EAAM,GAAMr8B,EAAQq8B,EAAM,GAAMr8B,EAAQq8B,EAAM,GAAMr8B,GAIzDg6F,EAAQnE,EAAwB,EAAhBK,EAChBl2F,EAASu3F,EAAOyC,EAIhB,IAAM,IAAIv/F,EAAI,EAAGA,EAAI+8F,EAAM/8F,IAAO,CAEjC,MAAM4hC,EAAOD,EAAO3hC,GACpBg/F,EAAIp9D,EAAM,GAAMr8B,EAAQq8B,EAAM,GAAMr8B,EAAQq8B,EAAM,GAAMr8B,QAInD,CAIN,IAAM,IAAIvF,EAAI,EAAGA,EAAI+8F,EAAM/8F,IAAO,CAEjC,MAAM4hC,EAAOD,EAAO3hC,GACpBg/F,EAAIp9D,EAAM,GAAKA,EAAM,GAAKA,EAAM,IAMjC,IAAM,IAAI5hC,EAAI,EAAGA,EAAI+8F,EAAM/8F,IAAO,CAEjC,MAAM4hC,EAAOD,EAAO3hC,GACpBg/F,EAAIp9D,EAAM,GAAMk7D,EAAO1B,EAAOx5D,EAAM,GAAMk7D,EAAO1B,EAAOx5D,EAAM,GAAMk7D,EAAO1B,IAM7E1wD,EAAMhH,SAAU/a,EAAOqyE,EAAc97F,OAAS,EAAIypB,EAAO,GA7D1D62E,GAmEA,WAEC,MAAM72E,EAAQqyE,EAAc97F,OAAS,EACrC,IAAIy/F,EAAc,EAClBD,EAAWpE,EAASqE,GACpBA,GAAerE,EAAQp7F,OAEvB,IAAM,IAAIoJ,EAAI,EAAGk0F,EAAK9B,EAAMx7F,OAAQoJ,EAAIk0F,EAAIl0F,IAAO,CAElD,MAAMm0F,EAAQ/B,EAAOpyF,GACrBo2F,EAAWjC,EAAOkC,GAGlBA,GAAelC,EAAMv9F,OAKtBwrC,EAAMhH,SAAU/a,EAAOqyE,EAAc97F,OAAS,EAAIypB,EAAO,GAjF1D82E,GA7bD5pG,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB+7D,EAAe,IAC1EnlG,KAAK2D,aAAc,KAAM,IAAIylC,GAAwBimD,EAAS,IAE9DrvF,KAAK4vC,uBAknBNhxC,SAEC,MAAMszB,EAAOkb,GAAe9rC,UAAUoV,OAAO/Q,KAAM3F,MAKnD,OAAO0W,GAHQ1W,KAAK2xB,WAAWT,OACflxB,KAAK2xB,WAAW7zB,QAEAo0B,IAMlC,MAAM8zE,GAAmB,CAExBsD,cAAe,SAAW5nF,EAAUspB,EAAU6+D,EAAQC,EAAQC,GAE7D,MAAMC,EAAMh/D,EAAmB,EAAT6+D,GAChBI,EAAMj/D,EAAmB,EAAT6+D,EAAa,GAC7BK,EAAMl/D,EAAmB,EAAT8+D,GAChBK,EAAMn/D,EAAmB,EAAT8+D,EAAa,GAC7BM,EAAMp/D,EAAmB,EAAT++D,GAChBM,EAAMr/D,EAAmB,EAAT++D,EAAa,GAEnC,MAAO,CACN,IAAI77F,EAAS87F,EAAKC,GAClB,IAAI/7F,EAASg8F,EAAKC,GAClB,IAAIj8F,EAASk8F,EAAKC,KAKpBb,mBAAoB,SAAW9nF,EAAUspB,EAAU6+D,EAAQC,EAAQC,EAAQO,GAE1E,MAAMN,EAAMh/D,EAAmB,EAAT6+D,GAChBI,EAAMj/D,EAAmB,EAAT6+D,EAAa,GAC7BU,EAAMv/D,EAAmB,EAAT6+D,EAAa,GAC7BK,EAAMl/D,EAAmB,EAAT8+D,GAChBK,EAAMn/D,EAAmB,EAAT8+D,EAAa,GAC7BU,EAAMx/D,EAAmB,EAAT8+D,EAAa,GAC7BM,EAAMp/D,EAAmB,EAAT++D,GAChBM,EAAMr/D,EAAmB,EAAT++D,EAAa,GAC7BU,EAAMz/D,EAAmB,EAAT++D,EAAa,GAC7BW,EAAM1/D,EAAmB,EAATs/D,GAChBK,EAAM3/D,EAAmB,EAATs/D,EAAa,GAC7BM,EAAM5/D,EAAmB,EAATs/D,EAAa,GAEnC,OAAKjtG,KAAK4R,IAAKg7F,EAAME,GAAQ,IAErB,CACN,IAAIj8F,EAAS87F,EAAK,EAAIO,GACtB,IAAIr8F,EAASg8F,EAAK,EAAIM,GACtB,IAAIt8F,EAASk8F,EAAK,EAAIK,GACtB,IAAIv8F,EAASw8F,EAAK,EAAIE,IAKhB,CACN,IAAI18F,EAAS+7F,EAAK,EAAIM,GACtB,IAAIr8F,EAASi8F,EAAK,EAAIK,GACtB,IAAIt8F,EAASm8F,EAAK,EAAII,GACtB,IAAIv8F,EAASy8F,EAAK,EAAIC,MAQ1B,SAASl0F,GAAQwa,EAAQpzB,EAASo0B,GAIjC,GAFAA,EAAKhB,OAAS,GAETjyB,MAAMkY,QAAS+Z,GAEnB,IAAM,IAAI/mB,EAAI,EAAGC,EAAI8mB,EAAO7nB,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMynB,EAAQV,EAAQ/mB,GAEtB+nB,EAAKhB,OAAO/yB,KAAMyzB,EAAMrc,WAMzB2c,EAAKhB,OAAO/yB,KAAM+yB,EAAO3b,MAM1B,YAF6B5U,IAAxB7C,EAAQ+nG,cAA4B3zE,EAAKp0B,QAAQ+nG,YAAc/nG,EAAQ+nG,YAAYnvF,UAEjFwb,EA6CR,MAAM24E,WAA2B3F,GAEhCtmG,YAAaksG,EAAMn5E,GAIlB,MAAMo5E,GAFNp5E,EAAaA,GAAc,IAEHo5E,KAExB,IAASA,IAAQA,EAAKC,OAGrB,OADA1sG,QAAQ0R,MAAO,wEACR,IAAI2kC,GAIZ,MAAMzjB,EAAS65E,EAAKE,eAAgBH,EAAMn5E,EAAWzsB,MAIrDysB,EAAWinB,WAA8Bj4C,IAAtBgxB,EAAWvjB,OAAuBujB,EAAWvjB,OAAS,QAItCzN,IAA9BgxB,EAAW8zE,iBAA+B9zE,EAAW8zE,eAAiB,SAC7C9kG,IAAzBgxB,EAAW+zE,YAA0B/zE,EAAW+zE,UAAY,QAChC/kG,IAA5BgxB,EAAW6zE,eAA6B7zE,EAAW6zE,cAAe,GAEvEzlG,MAAOmxB,EAAQS,GAEf3xB,KAAKlB,KAAO,sBAkCd,MAAMosG,WAA6B99D,GAElCxuC,YAAaghB,EAAQi5B,EAAeC,EAAgBqyD,EAAUC,EAAWC,EAAYC,GAEpFvrG,QACAC,KAAKlB,KAAO,uBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRi5B,cAAeA,EACfC,eAAgBA,EAChBqyD,SAAUA,EACVC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGd1rF,EAASA,GAAU,EAEnBi5B,EAAgBx7C,KAAK8N,IAAK,EAAG9N,KAAKqL,MAAOmwC,IAAmB,GAC5DC,EAAiBz7C,KAAK8N,IAAK,EAAG9N,KAAKqL,MAAOowC,IAAoB,GAE9DqyD,OAAwBxqG,IAAbwqG,EAAyBA,EAAW,EAC/CC,OAA0BzqG,IAAdyqG,EAA0BA,EAAsB,EAAV/tG,KAAKoN,GAEvD4gG,OAA4B1qG,IAAf0qG,EAA2BA,EAAa,EACrDC,OAA8B3qG,IAAhB2qG,EAA4BA,EAAcjuG,KAAKoN,GAE7D,MAAM8gG,EAAWluG,KAAK6N,IAAKmgG,EAAaC,EAAajuG,KAAKoN,IAE1D,IAAItB,EAAQ,EACZ,MAAMqiG,EAAO,GAEPh0D,EAAS,IAAIh6B,EACbiC,EAAS,IAAIjC,EAIb0zB,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAM,IAAI/sB,EAAK,EAAGA,GAAM26B,EAAgB36B,IAAQ,CAE/C,MAAMstF,EAAc,GAEdlrG,EAAI4d,EAAK26B,EAIf,IAAI4yD,EAAU,EAEH,GAANvtF,GAAyB,GAAdktF,EAEfK,EAAU,GAAM7yD,EAEL16B,GAAM26B,GAAkByyD,GAAYluG,KAAKoN,KAEpDihG,GAAY,GAAM7yD,GAInB,IAAM,IAAI36B,EAAK,EAAGA,GAAM26B,EAAe36B,IAAQ,CAE9C,MAAMwW,EAAIxW,EAAK26B,EAIfrB,EAAO5uC,GAAMgX,EAASviB,KAAKmQ,IAAK29F,EAAWz2E,EAAI02E,GAAc/tG,KAAKoQ,IAAK49F,EAAa9qG,EAAI+qG,GACxF9zD,EAAO3rC,EAAI+T,EAASviB,KAAKmQ,IAAK69F,EAAa9qG,EAAI+qG,GAC/C9zD,EAAO//B,EAAImI,EAASviB,KAAKoQ,IAAK09F,EAAWz2E,EAAI02E,GAAc/tG,KAAKoQ,IAAK49F,EAAa9qG,EAAI+qG,GAEtFtgE,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CgI,EAAOhJ,KAAM+gC,GAASloC,YACtB27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzCyzB,EAAI/sC,KAAMu2B,EAAIg3E,EAAS,EAAInrG,GAE3BkrG,EAAYttG,KAAMgL,KAInBqiG,EAAKrtG,KAAMstG,GAMZ,IAAM,IAAIttF,EAAK,EAAGA,EAAK26B,EAAgB36B,IAEtC,IAAM,IAAID,EAAK,EAAGA,EAAK26B,EAAe36B,IAAQ,CAE7C,MAAM9Q,EAAIo+F,EAAMrtF,GAAMD,EAAK,GACrB7Q,EAAIm+F,EAAMrtF,GAAMD,GAChB5Q,EAAIk+F,EAAMrtF,EAAK,GAAKD,GACpB5L,EAAIk5F,EAAMrtF,EAAK,GAAKD,EAAK,IAEnB,IAAPC,GAAYktF,EAAa,IAAIn6D,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,IACjD6L,IAAO26B,EAAiB,GAAKyyD,EAAWluG,KAAKoN,KAAKymC,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAQ7EtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAkC5D,MAAMygE,WAA2Bv+D,GAEhCxuC,YAAagtG,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,GAE9EvrG,QAEAC,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjBi6E,YAAaA,EACbC,YAAaA,EACbC,cAAeA,EACfC,YAAaA,EACbV,WAAYA,EACZC,YAAaA,GAGdM,EAAcA,GAAe,GAC7BC,EAAcA,GAAe,EAE7BR,OAA4B1qG,IAAf0qG,EAA2BA,EAAa,EACrDC,OAA8B3qG,IAAhB2qG,EAA4BA,EAAwB,EAAVjuG,KAAKoN,GAE7DqhG,OAAkCnrG,IAAlBmrG,EAA8BzuG,KAAK8N,IAAK,EAAG2gG,GAAkB,EAK7E,MAAM56D,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAItrB,EAASgsF,EACb,MAAMI,GAAiBH,EAAcD,IAZrCG,OAA8BprG,IAAhBorG,EAA4B1uG,KAAK8N,IAAK,EAAG4gG,GAAgB,GAajEv0D,EAAS,IAAIh6B,EACblG,EAAK,IAAIpJ,EAIf,IAAM,IAAIqV,EAAI,EAAGA,GAAKwoF,EAAaxoF,IAAO,CAEzC,IAAM,IAAIpZ,EAAI,EAAGA,GAAK2hG,EAAe3hG,IAAO,CAI3C,MAAM8hG,EAAUZ,EAAalhG,EAAI2hG,EAAgBR,EAIjD9zD,EAAO5uC,EAAIgX,EAASviB,KAAKmQ,IAAKy+F,GAC9Bz0D,EAAO3rC,EAAI+T,EAASviB,KAAKoQ,IAAKw+F,GAE9BjhE,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CwzB,EAAQ9sC,KAAM,EAAG,EAAG,GAIpBmZ,EAAG1O,GAAM4uC,EAAO5uC,EAAIijG,EAAc,GAAM,EACxCv0F,EAAGzL,GAAM2rC,EAAO3rC,EAAIggG,EAAc,GAAM,EAExC3gE,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,GAMpB+T,GAAUosF,EAMX,IAAM,IAAIzoF,EAAI,EAAGA,EAAIwoF,EAAaxoF,IAAO,CAExC,MAAM2oF,EAAoB3oF,GAAMuoF,EAAgB,GAEhD,IAAM,IAAI3hG,EAAI,EAAGA,EAAI2hG,EAAe3hG,IAAO,CAE1C,MAAM8hG,EAAU9hG,EAAI+hG,EAEd9+F,EAAI6+F,EACJ5+F,EAAI4+F,EAAUH,EAAgB,EAC9Bx+F,EAAI2+F,EAAUH,EAAgB,EAC9Bx5F,EAAI25F,EAAU,EAIpB/6D,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,IAQtBtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAgC5D,MAAMihE,WAA4B/+D,GAEjCxuC,YAAa+hB,EAAQyrF,EAAUjB,EAAUC,GAExCrrG,QAEAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjBhR,OAAQA,EACRyrF,SAAUA,EACVjB,SAAUA,EACVC,UAAWA,GAGZgB,EAAW/uG,KAAKqL,MAAO0jG,IAAc,GACrCjB,EAAWA,GAAY,EACvBC,EAAYA,GAAuB,EAAV/tG,KAAKoN,GAI9B2gG,EAAY7gG,EAAUU,MAAOmgG,EAAW,EAAa,EAAV/tG,KAAKoN,IAKhD,MAAMymC,EAAU,GACVlG,EAAW,GACXE,EAAM,GAINmhE,EAAkB,EAAMD,EACxB50D,EAAS,IAAIh6B,EACblG,EAAK,IAAIpJ,EAIf,IAAM,IAAI/D,EAAI,EAAGA,GAAKiiG,EAAUjiG,IAAO,CAEtC,MAAM0V,EAAMsrF,EAAWhhG,EAAIkiG,EAAkBjB,EAEvC39F,EAAMpQ,KAAKoQ,IAAKoS,GAChBrS,EAAMnQ,KAAKmQ,IAAKqS,GAEtB,IAAM,IAAI0D,EAAI,EAAGA,GAAO5C,EAAOtX,OAAS,EAAKka,IAI5Ci0B,EAAO5uC,EAAI+X,EAAQ4C,GAAI3a,EAAI6E,EAC3B+pC,EAAO3rC,EAAI8U,EAAQ4C,GAAI1X,EACvB2rC,EAAO//B,EAAIkJ,EAAQ4C,GAAI3a,EAAI4E,EAE3Bw9B,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CH,EAAG1O,EAAIuB,EAAIiiG,EACX90F,EAAGzL,EAAI0X,GAAM5C,EAAOtX,OAAS,GAE7B6hC,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,GASrB,IAAM,IAAI1B,EAAI,EAAGA,EAAIiiG,EAAUjiG,IAE9B,IAAM,IAAIoZ,EAAI,EAAGA,EAAM5C,EAAOtX,OAAS,EAAKka,IAAO,CAElD,MAAM+oF,EAAO/oF,EAAIpZ,EAAIwW,EAAOtX,OAEtB+D,EAAIk/F,EACJj/F,EAAIi/F,EAAO3rF,EAAOtX,OAClBiE,EAAIg/F,EAAO3rF,EAAOtX,OAAS,EAC3BiJ,EAAIg6F,EAAO,EAIjBp7D,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAmBtB,GAXAtS,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,IAI1DlrC,KAAK4vC,uBAKAw7D,IAAwB,EAAV/tG,KAAKoN,GAAS,CAEhC,MAAMwgC,EAAUjrC,KAAKI,WAAWqf,OAAOvV,MACjCqiG,EAAK,IAAI/uF,EACTgvF,EAAK,IAAIhvF,EACTnS,EAAI,IAAImS,EAIR8uF,EAAOF,EAAWzrF,EAAOtX,OAAS,EAExC,IAAM,IAAIc,EAAI,EAAGoZ,EAAI,EAAGpZ,EAAIwW,EAAOtX,OAAQc,IAAMoZ,GAAK,EAIrDgpF,EAAG3jG,EAAIqiC,EAAS1nB,EAAI,GACpBgpF,EAAG1gG,EAAIo/B,EAAS1nB,EAAI,GACpBgpF,EAAG90F,EAAIwzB,EAAS1nB,EAAI,GAIpBipF,EAAG5jG,EAAIqiC,EAASqhE,EAAO/oF,EAAI,GAC3BipF,EAAG3gG,EAAIo/B,EAASqhE,EAAO/oF,EAAI,GAC3BipF,EAAG/0F,EAAIwzB,EAASqhE,EAAO/oF,EAAI,GAI3BlY,EAAEmD,WAAY+9F,EAAIC,GAAKl9F,YAIvB27B,EAAS1nB,EAAI,GAAM0nB,EAASqhE,EAAO/oF,EAAI,GAAMlY,EAAEzC,EAC/CqiC,EAAS1nB,EAAI,GAAM0nB,EAASqhE,EAAO/oF,EAAI,GAAMlY,EAAEQ,EAC/Co/B,EAAS1nB,EAAI,GAAM0nB,EAASqhE,EAAO/oF,EAAI,GAAMlY,EAAEoM,IAYnD,MAAMg1F,WAAsB93D,GAE3B/1C,YAAasyB,EAAQo0E,GAEpBvlG,QACAC,KAAKlB,KAAO,gBAEkB,iBAAlBwmG,IAEXhnG,QAAQC,KAAM,4DAEd+mG,EAAgBA,EAAcA,eAI/BtlG,KAAK2xB,WAAa,CACjBT,OAAQA,EACRo0E,cAAeA,GAGhBtlG,KAAK40C,mBAAoB,IAAI83D,GAAqBx7E,EAAQo0E,IAC1DtlG,KAAK22C,gBAIN/3C,SAEC,MAAMszB,EAAOyiB,GAASrzC,UAAUoV,OAAO/Q,KAAM3F,MAI7C,OAAO2sG,GAFQ3sG,KAAK2xB,WAAWT,OAENgB,IAQ3B,MAAMw6E,WAA4Bt/D,GAEjCxuC,YAAasyB,EAAQo0E,GAEpBvlG,QACAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjBT,OAAQA,EACRo0E,cAAeA,GAGhBA,EAAgBA,GAAiB,GAIjC,MAAMp0D,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAI+N,EAAa,EACbc,EAAa,EAIjB,IAAiC,IAA5B96C,MAAMkY,QAAS+Z,GAEnBk0E,EAAUl0E,QAIV,IAAM,IAAI/mB,EAAI,EAAGA,EAAI+mB,EAAO7nB,OAAQc,IAEnCi7F,EAAUl0E,EAAQ/mB,IAElBnK,KAAK6tC,SAAUoL,EAAYc,EAAY5vC,GAEvC8uC,GAAcc,EACdA,EAAa,EAgBf,SAASqrD,EAAUxzE,GAElB,MAAMg7E,EAAc5hE,EAAS3hC,OAAS,EAChCsX,EAASiR,EAAM60E,cAAenB,GAEpC,IAAIuH,EAAgBlsF,EAAOiR,MAC3B,MAAMk7E,EAAansF,EAAOkkF,OAIuB,IAA5CL,GAAWE,YAAamI,KAE5BA,EAAgBA,EAAcnG,WAI/B,IAAM,IAAIv8F,EAAI,EAAGC,EAAI0iG,EAAWzjG,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAM4iG,EAAYD,EAAY3iG,IAEe,IAAxCq6F,GAAWE,YAAaqI,KAE5BD,EAAY3iG,GAAM4iG,EAAUrG,WAM9B,MAAM56D,EAAQ04D,GAAWI,iBAAkBiI,EAAeC,GAI1D,IAAM,IAAI3iG,EAAI,EAAGC,EAAI0iG,EAAWzjG,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAM4iG,EAAYD,EAAY3iG,GAC9B0iG,EAAgBA,EAAchG,OAAQkG,GAMvC,IAAM,IAAI5iG,EAAI,EAAGC,EAAIyiG,EAAcxjG,OAAQc,EAAIC,EAAGD,IAAO,CAExD,MAAMqtC,EAASq1D,EAAe1iG,GAE9B6gC,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG,GACnCo/B,EAAQ9sC,KAAM,EAAG,EAAG,GACpB+sC,EAAI/sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,GAM5B,IAAM,IAAI1B,EAAI,EAAGC,EAAI0hC,EAAMziC,OAAQc,EAAIC,EAAGD,IAAO,CAEhD,MAAM4hC,EAAOD,EAAO3hC,GAEdiD,EAAI2+B,EAAM,GAAM6gE,EAChBv/F,EAAI0+B,EAAM,GAAM6gE,EAChBt/F,EAAIy+B,EAAM,GAAM6gE,EAEtB17D,EAAQ/yC,KAAMiP,EAAGC,EAAGC,GACpBysC,GAAc,GAtEhB/5C,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,IA2E3DtsC,SAEC,MAAMszB,EAAOkb,GAAe9rC,UAAUoV,OAAO/Q,KAAM3F,MAInD,OAAO2sG,GAFQ3sG,KAAK2xB,WAAWT,OAENgB,IAQ3B,SAASy6E,GAAUz7E,EAAQgB,GAI1B,GAFAA,EAAKhB,OAAS,GAETjyB,MAAMkY,QAAS+Z,GAEnB,IAAM,IAAI/mB,EAAI,EAAGC,EAAI8mB,EAAO7nB,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMynB,EAAQV,EAAQ/mB,GAEtB+nB,EAAKhB,OAAO/yB,KAAMyzB,EAAMrc,WAMzB2c,EAAKhB,OAAO/yB,KAAM+yB,EAAO3b,MAI1B,OAAO2c,EA6GR,MAAM86E,WAAyBr4D,GAE9B/1C,YAAaquG,EAAWC,EAAc9+F,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GAEpGvrG,QACAC,KAAKlB,KAAO,mBAEZkB,KAAK2xB,WAAa,CACjBs7E,UAAWA,EACXC,aAAcA,EACd9+F,OAAQA,EACRiwF,eAAgBA,EAChBvlD,eAAgBA,EAChBq0D,UAAWA,EACX9B,WAAYA,EACZC,YAAaA,GAGdtrG,KAAK40C,mBAAoB,IAAIw4D,GAAwBH,EAAWC,EAAc9+F,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,IAC7ItrG,KAAK22C,iBAQP,MAAMy2D,WAA+BhgE,GAEpCxuC,YAAaquG,EAAWC,EAAc9+F,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GAEpGvrG,QACAC,KAAKlB,KAAO,yBAEZkB,KAAK2xB,WAAa,CACjBs7E,UAAWA,EACXC,aAAcA,EACd9+F,OAAQA,EACRiwF,eAAgBA,EAChBvlD,eAAgBA,EAChBq0D,UAAWA,EACX9B,WAAYA,EACZC,YAAaA,GAGd,MAAMz2D,EAAQ70C,KAEditG,OAA0BtsG,IAAdssG,EAA0BA,EAAY,EAClDC,OAAgCvsG,IAAjBusG,EAA6BA,EAAe,EAC3D9+F,EAASA,GAAU,EAEnBiwF,EAAiBhhG,KAAKqL,MAAO21F,IAAoB,EACjDvlD,EAAiBz7C,KAAKqL,MAAOowC,IAAoB,EAEjDq0D,OAA0BxsG,IAAdwsG,GAA0BA,EACtC9B,OAA4B1qG,IAAf0qG,EAA2BA,EAAa,EACrDC,OAA8B3qG,IAAhB2qG,EAA4BA,EAAwB,EAAVjuG,KAAKoN,GAI7D,MAAMymC,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAIZ,IAAI/hC,EAAQ,EACZ,MAAMkkG,EAAa,GACbv/B,EAAa1/D,EAAS,EAC5B,IAAI6qC,EAAa,EAmHjB,SAASq0D,EAAaliF,GAGrB,MAAMmiF,EAAmBpkG,EAEnBmO,EAAK,IAAIpJ,EACTspC,EAAS,IAAIh6B,EAEnB,IAAIu8B,EAAa,EAEjB,MAAMn6B,GAAmB,IAARwL,EAAiB6hF,EAAYC,EACxCvkG,GAAiB,IAARyiB,EAAiB,GAAM,EAMtC,IAAM,IAAIxiB,EAAI,EAAGA,GAAKy1F,EAAgBz1F,IAIrCoiC,EAAS7sC,KAAM,EAAG2vE,EAAanlE,EAAM,GAIrCsiC,EAAQ9sC,KAAM,EAAGwK,EAAM,GAIvBuiC,EAAI/sC,KAAM,GAAK,IAIfgL,IAKD,MAAMqkG,EAAiBrkG,EAIvB,IAAM,IAAIP,EAAI,EAAGA,GAAKy1F,EAAgBz1F,IAAO,CAE5C,MACMkL,EADIlL,EAAIy1F,EACIiN,EAAcD,EAE1BoC,EAAWpwG,KAAKmQ,IAAKsG,GACrB45F,EAAWrwG,KAAKoQ,IAAKqG,GAI3B0jC,EAAO5uC,EAAIgX,EAAS8tF,EACpBl2D,EAAO3rC,EAAIiiE,EAAanlE,EACxB6uC,EAAO//B,EAAImI,EAAS6tF,EACpBziE,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CwzB,EAAQ9sC,KAAM,EAAGwK,EAAM,GAIvB2O,EAAG1O,EAAiB,GAAX6kG,EAAmB,GAC5Bn2F,EAAGzL,EAAiB,GAAX6hG,EAAiB/kG,EAAS,GACnCuiC,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,GAInB1C,IAMD,IAAM,IAAIP,EAAI,EAAGA,EAAIy1F,EAAgBz1F,IAAO,CAE3C,MAAM0E,EAAIigG,EAAmB3kG,EACvBuB,EAAIqjG,EAAiB5kG,GAEd,IAARwiB,EAIJ8lB,EAAQ/yC,KAAMgM,EAAGA,EAAI,EAAGmD,GAMxB4jC,EAAQ/yC,KAAMgM,EAAI,EAAGA,EAAGmD,GAIzBysC,GAAc,EAMflF,EAAMhH,SAAUoL,EAAYc,GAAoB,IAAR3uB,EAAe,EAAI,GAI3D6tB,GAAcc,GAvMf,WAEC,MAAMt6B,EAAS,IAAIjC,EACbg6B,EAAS,IAAIh6B,EAEnB,IAAIu8B,EAAa,EAGjB,MAAM4zD,GAAUT,EAAeD,GAAc7+F,EAI7C,IAAM,IAAIvC,EAAI,EAAGA,GAAKitC,EAAgBjtC,IAAO,CAE5C,MAAM+hG,EAAW,GAEXrtG,EAAIsL,EAAIitC,EAIRl5B,EAASrf,GAAM2sG,EAAeD,GAAcA,EAElD,IAAM,IAAIrkG,EAAI,EAAGA,GAAKy1F,EAAgBz1F,IAAO,CAE5C,MAAM8rB,EAAI9rB,EAAIy1F,EAERvqF,EAAQ4gB,EAAI42E,EAAcD,EAE1BqC,EAAWrwG,KAAKoQ,IAAKqG,GACrB25F,EAAWpwG,KAAKmQ,IAAKsG,GAI3B0jC,EAAO5uC,EAAIgX,EAAS8tF,EACpBl2D,EAAO3rC,GAAMtL,EAAI6N,EAAS0/D,EAC1Bt2B,EAAO//B,EAAImI,EAAS6tF,EACpBziE,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CgI,EAAO5e,IAAK6sG,EAAUC,EAAOF,GAAWn+F,YACxC27B,EAAQ9sC,KAAMshB,EAAO7W,EAAG6W,EAAO5T,EAAG4T,EAAOhI,GAIzCyzB,EAAI/sC,KAAMu2B,EAAG,EAAIn0B,GAIjBqtG,EAASzvG,KAAMgL,KAMhBkkG,EAAWlvG,KAAMyvG,GAMlB,IAAM,IAAIhlG,EAAI,EAAGA,EAAIy1F,EAAgBz1F,IAEpC,IAAM,IAAIiD,EAAI,EAAGA,EAAIitC,EAAgBjtC,IAAO,CAI3C,MAAMuB,EAAIigG,EAAYxhG,GAAKjD,GACrByE,EAAIggG,EAAYxhG,EAAI,GAAKjD,GACzB0E,EAAI+/F,EAAYxhG,EAAI,GAAKjD,EAAI,GAC7B0J,EAAI+6F,EAAYxhG,GAAKjD,EAAI,GAI/BsoC,EAAQ/yC,KAAMiP,EAAGC,EAAGiF,GACpB4+B,EAAQ/yC,KAAMkP,EAAGC,EAAGgF,GAIpBynC,GAAc,EAQhBlF,EAAMhH,SAAUoL,EAAYc,EAAY,GAIxCd,GAAcc,EA3Gf8zD,IAEmB,IAAdV,IAECF,EAAY,GAAIK,GAAa,GAC7BJ,EAAe,GAAII,GAAa,IAMtCttG,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAwR5D,MAAM4iE,WAA6B1gE,GAElCxuC,YAAaghB,EAAQwsF,EAAUf,EAAYC,GAE1CvrG,QAEAC,KAAKlB,KAAO,uBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRwsF,SAAUA,EACVf,WAAYA,EACZC,YAAaA,GAGd1rF,EAASA,GAAU,EACnBwsF,OAAwBzrG,IAAbyrG,EAAyB/uG,KAAK8N,IAAK,EAAGihG,GAAa,EAE9Df,OAA4B1qG,IAAf0qG,EAA2BA,EAAa,EACrDC,OAA8B3qG,IAAhB2qG,EAA4BA,EAAwB,EAAVjuG,KAAKoN,GAI7D,MAAMymC,EAAU,GACVlG,EAAW,GACXC,EAAU,GACVC,EAAM,GAINsM,EAAS,IAAIh6B,EACblG,EAAK,IAAIpJ,EAIf88B,EAAS7sC,KAAM,EAAG,EAAG,GACrB8sC,EAAQ9sC,KAAM,EAAG,EAAG,GACpB+sC,EAAI/sC,KAAM,GAAK,IAEf,IAAM,IAAIP,EAAI,EAAGuM,EAAI,EAAGvM,GAAKwuG,EAAUxuG,IAAMuM,GAAK,EAAI,CAErD,MAAM8hG,EAAUZ,EAAaztG,EAAIwuG,EAAWd,EAI5C9zD,EAAO5uC,EAAIgX,EAASviB,KAAKmQ,IAAKy+F,GAC9Bz0D,EAAO3rC,EAAI+T,EAASviB,KAAKoQ,IAAKw+F,GAE9BjhE,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAI1CwzB,EAAQ9sC,KAAM,EAAG,EAAG,GAIpBmZ,EAAG1O,GAAMoiC,EAAU7gC,GAAMyV,EAAS,GAAM,EACxCtI,EAAGzL,GAAMm/B,EAAU7gC,EAAI,GAAMyV,EAAS,GAAM,EAE5CsrB,EAAI/sC,KAAMmZ,EAAG1O,EAAG0O,EAAGzL,GAMpB,IAAM,IAAI1B,EAAI,EAAGA,GAAKiiG,EAAUjiG,IAE/B+mC,EAAQ/yC,KAAMgM,EAAGA,EAAI,EAAG,GAMzBnK,KAAK0tC,SAAUwD,GACflxC,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACrEhrC,KAAK2D,aAAc,SAAU,IAAIylC,GAAwB6B,EAAS,IAClEjrC,KAAK2D,aAAc,KAAM,IAAIylC,GAAwB8B,EAAK,KAM5D,IAAI6iE,GAA0B/uG,OAAOgvG,OAAO,CAC3CC,UAAW,KACXC,kBAlyID,cAAgC9gE,GAE/BxuC,YAAa8iB,GAEZ3hB,QACAC,KAAKlB,KAAO,oBAIZ,MAAMksC,EAAW,GAIXmjE,EAAO,CAAE,EAAG,GAAKC,EAAQ,GACzB78D,EAAO,CAAE,IAAK,IAAK,KAIzB,GAAK7vB,GAAYA,EAASktB,WAAa,CAItC,MAAM9C,EAAQpqB,EAASoqB,MAEvB,IAAM,IAAI3hC,EAAI,EAAGC,EAAI0hC,EAAMziC,OAAQc,EAAIC,EAAGD,IAAO,CAEhD,MAAM4hC,EAAOD,EAAO3hC,GAEpB,IAAM,IAAIoZ,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAM8qF,EAAQtiE,EAAMwF,EAAMhuB,IACpB+qF,EAAQviE,EAAMwF,GAAQhuB,EAAI,GAAM,IACtC4qF,EAAM,GAAM9wG,KAAK6N,IAAKmjG,EAAOC,GAC7BH,EAAM,GAAM9wG,KAAK8N,IAAKkjG,EAAOC,GAE7B,MAAM/sG,EAAM4sG,EAAM,GAAM,IAAMA,EAAM,QAEdxtG,IAAjBytG,EAAO7sG,KAEX6sG,EAAO7sG,GAAQ,CAAEqoC,OAAQukE,EAAM,GAAKtkE,OAAQskE,EAAM,MAUrD,IAAM,MAAM5sG,KAAO6sG,EAAQ,CAE1B,MAAM9pG,EAAI8pG,EAAO7sG,GAEjB,IAAIi2C,EAAS91B,EAASspB,SAAU1mC,EAAEslC,QAClCoB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAE1C+/B,EAAS91B,EAASspB,SAAU1mC,EAAEulC,QAC9BmB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,SAIrC,GAAKiK,GAAYA,EAAS8rB,iBAAmB,CAEnD,MAAMgK,EAAS,IAAIh6B,EAEnB,GAAwB,OAAnBkE,EAASvY,MAAiB,CAI9B,MAAMihB,EAAW1I,EAASthB,WAAWgqB,SAC/B8mB,EAAUxvB,EAASvY,MACzB,IAAIiiC,EAAS1pB,EAAS0pB,OAEC,IAAlBA,EAAO/hC,SAEX+hC,EAAS,CAAE,CAAEtY,MAAO,EAAGpS,MAAOwwB,EAAQxwB,MAAOihB,cAAe,KAM7D,IAAM,IAAI4sE,EAAI,EAAGC,EAAKpjE,EAAO/hC,OAAQklG,EAAIC,IAAOD,EAAI,CAEnD,MAAM1iE,EAAQT,EAAQmjE,GAEhBz7E,EAAQ+Y,EAAM/Y,MAGpB,IAAM,IAAI3oB,EAAI2oB,EAAO1oB,EAAM0oB,EAFb+Y,EAAMnrB,MAEwBvW,EAAIC,EAAGD,GAAK,EAEvD,IAAM,IAAIoZ,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAM8qF,EAAQn9D,EAAQvhC,KAAMxF,EAAIoZ,GAC1B+qF,EAAQp9D,EAAQvhC,KAAMxF,GAAMoZ,EAAI,GAAM,GAC5C4qF,EAAM,GAAM9wG,KAAK6N,IAAKmjG,EAAOC,GAC7BH,EAAM,GAAM9wG,KAAK8N,IAAKkjG,EAAOC,GAE7B,MAAM/sG,EAAM4sG,EAAM,GAAM,IAAMA,EAAM,QAEdxtG,IAAjBytG,EAAO7sG,KAEX6sG,EAAO7sG,GAAQ,CAAEqoC,OAAQukE,EAAM,GAAKtkE,OAAQskE,EAAM,MAYtD,IAAM,MAAM5sG,KAAO6sG,EAAQ,CAE1B,MAAM9pG,EAAI8pG,EAAO7sG,GAEjBi2C,EAAOnN,oBAAqBjgB,EAAU9lB,EAAEslC,QACxCoB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAE1C+/B,EAAOnN,oBAAqBjgB,EAAU9lB,EAAEulC,QACxCmB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,QAIrC,CAIN,MAAM2S,EAAW1I,EAASthB,WAAWgqB,SAErC,IAAM,IAAIjgB,EAAI,EAAGC,EAAMggB,EAAS1J,MAAQ,EAAKvW,EAAIC,EAAGD,IAEnD,IAAM,IAAIoZ,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAK9B,MAAMqmB,EAAS,EAAIz/B,EAAIoZ,EACvBi0B,EAAOnN,oBAAqBjgB,EAAUwf,GACtCoB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAE1C,MAAMoyB,EAAS,EAAI1/B,GAAQoZ,EAAI,GAAM,EACrCi0B,EAAOnN,oBAAqBjgB,EAAUyf,GACtCmB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,KAY9CzX,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,MAuoItEgxD,mBAAoBA,GACpBI,yBAA0BA,GAC1BqS,oBApqHD,cAAkC95D,GAEjC/1C,YAAaghB,EAAQyzE,GAEpBtzF,QACAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,GAGTrzF,KAAK40C,mBAAoB,IAAImpD,GAA2Bn+E,EAAQyzE,IAChErzF,KAAK22C,kBAwpHNonD,0BAA2BA,GAC3B2Q,mBArnHD,cAAiC/5D,GAEhC/1C,YAAaghB,EAAQyzE,GAEpBtzF,QAEAC,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,GAGTrzF,KAAK40C,mBAAoB,IAAIopD,GAA0Bp+E,EAAQyzE,IAC/DrzF,KAAK22C,kBAwmHNqnD,yBAA0BA,GAC1B2Q,oBAnkHD,cAAkCh6D,GAEjC/1C,YAAaghB,EAAQyzE,GAEpBtzF,QAEAC,KAAKlB,KAAO,sBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,GAGTrzF,KAAK40C,mBAAoB,IAAIqpD,GAA2Br+E,EAAQyzE,IAChErzF,KAAK22C,kBAsjHNsnD,0BAA2BA,GAC3B2Q,qBA7gHD,cAAmCj6D,GAElC/1C,YAAaghB,EAAQyzE,GAEpBtzF,QACAC,KAAKlB,KAAO,uBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRyzE,OAAQA,GAGTrzF,KAAK40C,mBAAoB,IAAIspD,GAA4Bt+E,EAAQyzE,IACjErzF,KAAK22C,kBAigHNunD,2BAA4BA,GAC5B2Q,mBAl/HD,cAAiCl6D,GAEhC/1C,YAAaosC,EAAUkG,EAAStxB,EAAQyzE,GAEvCtzF,QAEAC,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjBqZ,SAAUA,EACVkG,QAASA,EACTtxB,OAAQA,EACRyzE,OAAQA,GAGTrzF,KAAK40C,mBAAoB,IAAI6nD,GAA0BzxD,EAAUkG,EAAStxB,EAAQyzE,IAClFrzF,KAAK22C,kBAm+HN8lD,yBAA0BA,GAC1BqS,aAl8GD,cAA2Bn6D,GAE1B/1C,YAAaqiE,EAAMm9B,EAAiBx+E,EAAQy+E,EAAgBC,EAAQyQ,GAEnEhvG,QACAC,KAAKlB,KAAO,eAEZkB,KAAK2xB,WAAa,CACjBsvC,KAAMA,EACNm9B,gBAAiBA,EACjBx+E,OAAQA,EACRy+E,eAAgBA,EAChBC,OAAQA,QAGM39F,IAAVouG,GAAsBzwG,QAAQC,KAAM,+CAEzC,MAAMywG,EAAiB,IAAI7Q,GAAoBl9B,EAAMm9B,EAAiBx+E,EAAQy+E,EAAgBC,GAI9Ft+F,KAAKy+F,SAAWuQ,EAAevQ,SAC/Bz+F,KAAKirC,QAAU+jE,EAAe/jE,QAC9BjrC,KAAK0+F,UAAYsQ,EAAetQ,UAIhC1+F,KAAK40C,mBAAoBo6D,GACzBhvG,KAAK22C,kBAu6GNwnD,mBAAoBA,GACpB8Q,kBA/uGD,cAAgCt6D,GAE/B/1C,YAAaghB,EAAQu/E,EAAMf,EAAiBC,EAAgB79F,EAAG2M,EAAG+hG,GAEjEnvG,QACAC,KAAKlB,KAAO,oBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRu/E,KAAMA,EACNf,gBAAiBA,EACjBC,eAAgBA,EAChB79F,EAAGA,EACH2M,EAAGA,QAGiBxM,IAAhBuuG,GAA4B5wG,QAAQC,KAAM,4FAE/CyB,KAAK40C,mBAAoB,IAAIsqD,GAAyBt/E,EAAQu/E,EAAMf,EAAiBC,EAAgB79F,EAAG2M,IACxGnN,KAAK22C,kBA6tGNuoD,wBAAyBA,GACzBiQ,cA9jGD,cAA4Bx6D,GAE3B/1C,YAAaghB,EAAQu/E,EAAMd,EAAgBD,EAAiByB,GAE3D9/F,QACAC,KAAKlB,KAAO,gBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRu/E,KAAMA,EACNd,eAAgBA,EAChBD,gBAAiBA,EACjByB,IAAKA,GAGN7/F,KAAK40C,mBAAoB,IAAIgrD,GAAqBhgF,EAAQu/E,EAAMd,EAAgBD,EAAiByB,IACjG7/F,KAAK22C,kBA+iGNipD,oBAAqBA,GACrBwP,aApxCD,cAA2Bz6D,GAE1B/1C,YAAaksG,EAAMn5E,GAElB5xB,QACAC,KAAKlB,KAAO,eAEZkB,KAAK2xB,WAAa,CACjBm5E,KAAMA,EACNn5E,WAAYA,GAGb3xB,KAAK40C,mBAAoB,IAAIi2D,GAAoBC,EAAMn5E,IACvD3xB,KAAK22C,kBAwwCNk0D,mBAAoBA,GACpBwE,eA3tCD,cAA6B16D,GAE5B/1C,YAAaghB,EAAQi5B,EAAeC,EAAgBqyD,EAAUC,EAAWC,EAAYC,GAEpFvrG,QACAC,KAAKlB,KAAO,iBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRi5B,cAAeA,EACfC,eAAgBA,EAChBqyD,SAAUA,EACVC,UAAWA,EACXC,WAAYA,EACZC,YAAaA,GAGdtrG,KAAK40C,mBAAoB,IAAIs2D,GAAsBtrF,EAAQi5B,EAAeC,EAAgBqyD,EAAUC,EAAWC,EAAYC,IAC3HtrG,KAAK22C,kBA0sCNu0D,qBAAsBA,GACtBoE,aAtkCD,cAA2B36D,GAE1B/1C,YAAagtG,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,GAE9EvrG,QAEAC,KAAKlB,KAAO,eAEZkB,KAAK2xB,WAAa,CACjBi6E,YAAaA,EACbC,YAAaA,EACbC,cAAeA,EACfC,YAAaA,EACbV,WAAYA,EACZC,YAAaA,GAGdtrG,KAAK40C,mBAAoB,IAAI+2D,GAAoBC,EAAaC,EAAaC,EAAeC,EAAaV,EAAYC,IACnHtrG,KAAK22C,kBAqjCNg1D,mBAAoBA,GACpB4D,cA99kBD,cAA4B56D,GAE3B/1C,YAAauP,EAAOC,EAAQyqC,EAAeC,GAE1C/4C,QAEAC,KAAKlB,KAAO,gBAEZkB,KAAK2xB,WAAa,CACjBxjB,MAAOA,EACPC,OAAQA,EACRyqC,cAAeA,EACfC,eAAgBA,GAGjB94C,KAAK40C,mBAAoB,IAAI8N,GAAqBv0C,EAAOC,EAAQyqC,EAAeC,IAChF94C,KAAK22C,kBA+8kBN+L,oBAAqBA,GACrB8sD,cA/7BD,cAA4B76D,GAE3B/1C,YAAa+hB,EAAQyrF,EAAUjB,EAAUC,GAExCrrG,QAEAC,KAAKlB,KAAO,gBAEZkB,KAAK2xB,WAAa,CACjBhR,OAAQA,EACRyrF,SAAUA,EACVjB,SAAUA,EACVC,UAAWA,GAGZprG,KAAK40C,mBAAoB,IAAIu3D,GAAqBxrF,EAAQyrF,EAAUjB,EAAUC,IAC9EprG,KAAK22C,kBAg7BNw1D,oBAAqBA,GACrBM,cAAeA,GACfC,oBAAqBA,GACrBzH,gBAAiBA,GACjBC,sBAAuBA,GACvBuK,cA9kBD,cAA4BriE,GAE3BxuC,YAAa8iB,EAAUguF,GAEtB3vG,QAEAC,KAAKlB,KAAO,gBAEZkB,KAAK2xB,WAAa,CACjB+9E,eAAgBA,GAGjBA,OAAsC/uG,IAAnB+uG,EAAiCA,EAAiB,EAIrE,MAAM1kE,EAAW,GAIX2kE,EAAetyG,KAAKmQ,IAAKjD,EAAUC,QAAUklG,GAC7CvB,EAAO,CAAE,EAAG,GAAKC,EAAQ,GAC/B,IAAIC,EAAOC,EAAO/sG,EAClB,MAAMgwC,EAAO,CAAE,IAAK,IAAK,KAIzB,IAAIH,EAEC1vB,EAAS8rB,kBAEb4D,EAAY,IAAIuD,GAChBvD,EAAUwD,mBAAoBlzB,IAI9B0vB,EAAY1vB,EAASlL,QAItB46B,EAAUuF,gBACVvF,EAAUzB,qBAEV,MAAMigE,EAAiBx+D,EAAUpG,SAC3Bc,EAAQsF,EAAUtF,MAIxB,IAAM,IAAI3hC,EAAI,EAAGC,EAAI0hC,EAAMziC,OAAQc,EAAIC,EAAGD,IAAO,CAEhD,MAAM4hC,EAAOD,EAAO3hC,GAEpB,IAAM,IAAIoZ,EAAI,EAAGA,EAAI,EAAGA,IAEvB8qF,EAAQtiE,EAAMwF,EAAMhuB,IACpB+qF,EAAQviE,EAAMwF,GAAQhuB,EAAI,GAAM,IAChC4qF,EAAM,GAAM9wG,KAAK6N,IAAKmjG,EAAOC,GAC7BH,EAAM,GAAM9wG,KAAK8N,IAAKkjG,EAAOC,GAE7B/sG,EAAM4sG,EAAM,GAAM,IAAMA,EAAM,QAERxtG,IAAjBytG,EAAO7sG,GAEX6sG,EAAO7sG,GAAQ,CAAEqoC,OAAQukE,EAAM,GAAKtkE,OAAQskE,EAAM,GAAK0B,MAAO1lG,EAAG2lG,WAAOnvG,GAIxEytG,EAAO7sG,GAAMuuG,MAAQ3lG,EAUxB,IAAM5I,KAAO6sG,EAAQ,CAEpB,MAAM9pG,EAAI8pG,EAAO7sG,GAIjB,QAAiBZ,IAAZ2D,EAAEwrG,OAAuBhkE,EAAOxnC,EAAEurG,OAAQpwF,OAAOrD,IAAK0vB,EAAOxnC,EAAEwrG,OAAQrwF,SAAYkwF,EAAe,CAEtG,IAAIn4D,EAASo4D,EAAgBtrG,EAAEslC,QAC/BoB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,GAE1C+/B,EAASo4D,EAAgBtrG,EAAEulC,QAC3BmB,EAAS7sC,KAAMq5C,EAAO5uC,EAAG4uC,EAAO3rC,EAAG2rC,EAAO//B,IAQ5CzX,KAAK2D,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,MA8etE+kE,aA3LD,cAA2B/C,GAE1BpuG,YAAaghB,EAAQxR,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GAEnFvrG,MAAO,EAAG6f,EAAQxR,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GACjFtrG,KAAKlB,KAAO,eAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRxR,OAAQA,EACRiwF,eAAgBA,EAChBvlD,eAAgBA,EAChBq0D,UAAWA,EACX9B,WAAYA,EACZC,YAAaA,KA8Kf0E,mBArKD,cAAiC5C,GAEhCxuG,YAAaghB,EAAQxR,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GAEnFvrG,MAAO,EAAG6f,EAAQxR,EAAQiwF,EAAgBvlD,EAAgBq0D,EAAW9B,EAAYC,GACjFtrG,KAAKlB,KAAO,qBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRxR,OAAQA,EACRiwF,eAAgBA,EAChBvlD,eAAgBA,EAChBq0D,UAAWA,EACX9B,WAAYA,EACZC,YAAaA,KAwJf0B,iBAAkBA,GAClBI,uBAAwBA,GACxB6C,eAjJD,cAA6Bt7D,GAE5B/1C,YAAaghB,EAAQwsF,EAAUf,EAAYC,GAE1CvrG,QACAC,KAAKlB,KAAO,iBAEZkB,KAAK2xB,WAAa,CACjB/R,OAAQA,EACRwsF,SAAUA,EACVf,WAAYA,EACZC,YAAaA,GAGdtrG,KAAK40C,mBAAoB,IAAIk5D,GAAsBluF,EAAQwsF,EAAUf,EAAYC,IACjFtrG,KAAK22C,kBAmINm3D,qBAAsBA,GACtBoC,YAr2nBD,cAA0Bv7D,GAEzB/1C,YAAauP,EAAOC,EAAQwqC,EAAOC,EAAeC,EAAgBC,GAEjEh5C,QAEAC,KAAKlB,KAAO,cAEZkB,KAAK2xB,WAAa,CACjBxjB,MAAOA,EACPC,OAAQA,EACRwqC,MAAOA,EACPC,cAAeA,EACfC,eAAgBA,EAChBC,cAAeA,GAGhB/4C,KAAK40C,mBAAoB,IAAI+D,GAAmBxqC,EAAOC,EAAQwqC,EAAOC,EAAeC,EAAgBC,IACrG/4C,KAAK22C,kBAo1nBNgC,kBAAmBA,KASpB,SAASmyB,GAAgBn5C,GAExBoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,iBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,GACxB1/B,KAAKqiC,aAAc,EAEnBriC,KAAKslC,UAAW3T,GAmBjB,SAASw+E,GAAmBx+E,GAE3B8oB,GAAe90C,KAAM3F,KAAM2xB,GAE3B3xB,KAAKlB,KAAO,oBA2Db,SAAS0rE,GAAsB74C,GAE9BoQ,GAASp8B,KAAM3F,MAEfA,KAAK06C,QAAU,CAAE01D,SAAY,IAE7BpwG,KAAKlB,KAAO,uBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UACxB1/B,KAAK6lC,UAAY,EACjB7lC,KAAK8lC,UAAY,EAEjB9lC,KAAKqkC,IAAM,KAEXrkC,KAAKskC,SAAW,KAChBtkC,KAAKukC,kBAAoB,EAEzBvkC,KAAKwkC,MAAQ,KACbxkC,KAAKykC,eAAiB,EAEtBzkC,KAAKgmC,SAAW,IAAItG,GAAO,GAC3B1/B,KAAKimC,kBAAoB,EACzBjmC,KAAKqnC,YAAc,KAEnBrnC,KAAK2mC,QAAU,KACf3mC,KAAK4mC,UAAY,EAEjB5mC,KAAK6mC,UAAY,KACjB7mC,KAAK8mC,cAxvgCwB,EAyvgC7B9mC,KAAK+mC,YAAc,IAAI74B,EAAS,EAAG,GAEnClO,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAKmnC,aAAe,KAEpBnnC,KAAKonC,aAAe,KAEpBpnC,KAAK2kC,SAAW,KAEhB3kC,KAAK4kC,OAAS,KACd5kC,KAAKsnC,gBAAkB,EAEvBtnC,KAAK+kC,gBAAkB,IAEvB/kC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAC1BjlC,KAAKklC,iBAAmB,QACxBllC,KAAKmlC,kBAAoB,QAEzBnlC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKunE,gBAAiB,EAEtBvnE,KAAKslC,UAAW3T,GAsFjB,SAAS84C,GAAsB94C,GAE9B64C,GAAqB7kE,KAAM3F,MAE3BA,KAAK06C,QAAU,CAEd01D,SAAY,GACZC,SAAY,IAIbrwG,KAAKlB,KAAO,uBAEZkB,KAAKomC,UAAY,EACjBpmC,KAAKsmC,aAAe,KACpBtmC,KAAKqmC,mBAAqB,EAC1BrmC,KAAKumC,sBAAwB,KAC7BvmC,KAAKymC,qBAAuB,IAAIv4B,EAAS,EAAG,GAC5ClO,KAAKwmC,mBAAqB,KAE1BxmC,KAAK8kC,aAAe,GAEpB9kC,KAAK+lC,MAAQ,KAEb/lC,KAAK27D,aAAe,EACpB37D,KAAK47D,gBAAkB,KAEvB57D,KAAKslC,UAAW3T,GA8FjB,SAAS24C,GAAmB34C,GAE3BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,oBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UACxB1/B,KAAKkmC,SAAW,IAAIxG,GAAO,SAC3B1/B,KAAKmmC,UAAY,GAEjBnmC,KAAKqkC,IAAM,KAEXrkC,KAAKskC,SAAW,KAChBtkC,KAAKukC,kBAAoB,EAEzBvkC,KAAKwkC,MAAQ,KACbxkC,KAAKykC,eAAiB,EAEtBzkC,KAAKgmC,SAAW,IAAItG,GAAO,GAC3B1/B,KAAKimC,kBAAoB,EACzBjmC,KAAKqnC,YAAc,KAEnBrnC,KAAK2mC,QAAU,KACf3mC,KAAK4mC,UAAY,EAEjB5mC,KAAK6mC,UAAY,KACjB7mC,KAAK8mC,cA9/gCwB,EA+/gC7B9mC,KAAK+mC,YAAc,IAAI74B,EAAS,EAAG,GAEnClO,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAK0kC,YAAc,KAEnB1kC,KAAK2kC,SAAW,KAEhB3kC,KAAK4kC,OAAS,KACd5kC,KAAK6kC,QA/nhCoB,EAgohCzB7kC,KAAK8kC,aAAe,EACpB9kC,KAAK+kC,gBAAkB,IAEvB/kC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAC1BjlC,KAAKklC,iBAAmB,QACxBllC,KAAKmlC,kBAAoB,QAEzBnlC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKslC,UAAW3T,GAqGjB,SAAS44C,GAAkB54C,GAE1BoQ,GAASp8B,KAAM3F,MAEfA,KAAK06C,QAAU,CAAE41D,KAAQ,IAEzBtwG,KAAKlB,KAAO,mBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKqkC,IAAM,KACXrkC,KAAKunC,YAAc,KAEnBvnC,KAAKskC,SAAW,KAChBtkC,KAAKukC,kBAAoB,EAEzBvkC,KAAKwkC,MAAQ,KACbxkC,KAAKykC,eAAiB,EAEtBzkC,KAAKgmC,SAAW,IAAItG,GAAO,GAC3B1/B,KAAKimC,kBAAoB,EACzBjmC,KAAKqnC,YAAc,KAEnBrnC,KAAK2mC,QAAU,KACf3mC,KAAK4mC,UAAY,EAEjB5mC,KAAK6mC,UAAY,KACjB7mC,KAAK8mC,cAvphCwB,EAwphC7B9mC,KAAK+mC,YAAc,IAAI74B,EAAS,EAAG,GAEnClO,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAK2kC,SAAW,KAEhB3kC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAC1BjlC,KAAKklC,iBAAmB,QACxBllC,KAAKmlC,kBAAoB,QAEzBnlC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKslC,UAAW3T,GA8EjB,SAASy4C,GAAoBz4C,GAE5BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,qBAEZkB,KAAK2mC,QAAU,KACf3mC,KAAK4mC,UAAY,EAEjB5mC,KAAK6mC,UAAY,KACjB7mC,KAAK8mC,cAjwhCwB,EAkwhC7B9mC,KAAK+mC,YAAc,IAAI74B,EAAS,EAAG,GAEnClO,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAE1BjlC,KAAKgiC,KAAM,EAEXhiC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKslC,UAAW3T,GAsEjB,SAAS04C,GAAqB14C,GAE7BoQ,GAASp8B,KAAM3F,MAEfA,KAAKlB,KAAO,sBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAKqkC,IAAM,KAEXrkC,KAAKskC,SAAW,KAChBtkC,KAAKukC,kBAAoB,EAEzBvkC,KAAKwkC,MAAQ,KACbxkC,KAAKykC,eAAiB,EAEtBzkC,KAAKgmC,SAAW,IAAItG,GAAO,GAC3B1/B,KAAKimC,kBAAoB,EACzBjmC,KAAKqnC,YAAc,KAEnBrnC,KAAK0kC,YAAc,KAEnB1kC,KAAK2kC,SAAW,KAEhB3kC,KAAK4kC,OAAS,KACd5kC,KAAK6kC,QAr+hCoB,EAs+hCzB7kC,KAAK8kC,aAAe,EACpB9kC,KAAK+kC,gBAAkB,IAEvB/kC,KAAKglC,WAAY,EACjBhlC,KAAKilC,mBAAqB,EAC1BjlC,KAAKklC,iBAAmB,QACxBllC,KAAKmlC,kBAAoB,QAEzBnlC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKslC,UAAW3T,GA6EjB,SAAS+4C,GAAoB/4C,GAE5BoQ,GAASp8B,KAAM3F,MAEfA,KAAK06C,QAAU,CAAE61D,OAAU,IAE3BvwG,KAAKlB,KAAO,qBAEZkB,KAAKqgC,MAAQ,IAAIX,GAAO,UAExB1/B,KAAK0mC,OAAS,KAEd1mC,KAAKqkC,IAAM,KAEXrkC,KAAK2mC,QAAU,KACf3mC,KAAK4mC,UAAY,EAEjB5mC,KAAK6mC,UAAY,KACjB7mC,KAAK8mC,cA59hCwB,EA69hC7B9mC,KAAK+mC,YAAc,IAAI74B,EAAS,EAAG,GAEnClO,KAAKgnC,gBAAkB,KACvBhnC,KAAKinC,kBAAoB,EACzBjnC,KAAKknC,iBAAmB,EAExBlnC,KAAK2kC,SAAW,KAEhB3kC,KAAKolC,UAAW,EAChBplC,KAAKqlC,cAAe,EACpBrlC,KAAK4nC,cAAe,EAEpB5nC,KAAKslC,UAAW3T,GAuDjB,SAASi5C,GAAoBj5C,GAE5Bg5C,GAAkBhlE,KAAM3F,MAExBA,KAAKlB,KAAO,qBAEZkB,KAAKqqB,MAAQ,EACbrqB,KAAK0nC,SAAW,EAChB1nC,KAAK2nC,QAAU,EAEf3nC,KAAKslC,UAAW3T,GA55BjBm5C,GAAexpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACnDwpE,GAAexpE,UAAU4B,YAAc4nE,GAEvCA,GAAexpE,UAAUooF,kBAAmB,EAE5C5e,GAAexpE,UAAUmV,KAAO,SAAWnN,GAM1C,OAJAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAEjBrgC,MAYRmwG,GAAkB7uG,UAAYtC,OAAOoX,OAAQqkC,GAAen5C,WAC5D6uG,GAAkB7uG,UAAU4B,YAAcitG,GAE1CA,GAAkB7uG,UAAUwlE,qBAAsB,EAiHlD0D,GAAqBlpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACzDkpE,GAAqBlpE,UAAU4B,YAAcsnE,GAE7CA,GAAqBlpE,UAAU+pE,wBAAyB,EAExDb,GAAqBlpE,UAAUmV,KAAO,SAAWnN,GAuDhD,OArDAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK06C,QAAU,CAAE01D,SAAY,IAE7BpwG,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OACxBrgC,KAAK6lC,UAAYv8B,EAAOu8B,UACxB7lC,KAAK8lC,UAAYx8B,EAAOw8B,UAExB9lC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAKskC,SAAWh7B,EAAOg7B,SACvBtkC,KAAKukC,kBAAoBj7B,EAAOi7B,kBAEhCvkC,KAAKwkC,MAAQl7B,EAAOk7B,MACpBxkC,KAAKykC,eAAiBn7B,EAAOm7B,eAE7BzkC,KAAKgmC,SAASvvB,KAAMnN,EAAO08B,UAC3BhmC,KAAKqnC,YAAc/9B,EAAO+9B,YAC1BrnC,KAAKimC,kBAAoB38B,EAAO28B,kBAEhCjmC,KAAK2mC,QAAUr9B,EAAOq9B,QACtB3mC,KAAK4mC,UAAYt9B,EAAOs9B,UAExB5mC,KAAK6mC,UAAYv9B,EAAOu9B,UACxB7mC,KAAK8mC,cAAgBx9B,EAAOw9B,cAC5B9mC,KAAK+mC,YAAYtwB,KAAMnN,EAAOy9B,aAE9B/mC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAKmnC,aAAe79B,EAAO69B,aAE3BnnC,KAAKonC,aAAe99B,EAAO89B,aAE3BpnC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAK4kC,OAASt7B,EAAOs7B,OACrB5kC,KAAKsnC,gBAAkBh+B,EAAOg+B,gBAE9BtnC,KAAK+kC,gBAAkBz7B,EAAOy7B,gBAE9B/kC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBACjCjlC,KAAKklC,iBAAmB57B,EAAO47B,iBAC/BllC,KAAKmlC,kBAAoB77B,EAAO67B,kBAEhCnlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAE3B5nC,KAAKunE,eAAiBj+D,EAAOi+D,eAEtBvnE,MAqDRyqE,GAAqBnpE,UAAYtC,OAAOoX,OAAQo0D,GAAqBlpE,WACrEmpE,GAAqBnpE,UAAU4B,YAAcunE,GAE7CA,GAAqBnpE,UAAUonF,wBAAyB,EAExDje,GAAqBnpE,UAAUmV,KAAO,SAAWnN,GAiChD,OA/BAkhE,GAAqBlpE,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEhDtJ,KAAK06C,QAAU,CAEd01D,SAAY,GACZC,SAAY,IAIbrwG,KAAKomC,UAAY98B,EAAO88B,UACxBpmC,KAAKsmC,aAAeh9B,EAAOg9B,aAC3BtmC,KAAKqmC,mBAAqB/8B,EAAO+8B,mBACjCrmC,KAAKumC,sBAAwBj9B,EAAOi9B,sBACpCvmC,KAAKwmC,mBAAqBl9B,EAAOk9B,mBACjCxmC,KAAKymC,qBAAqBhwB,KAAMnN,EAAOm9B,sBAEvCzmC,KAAK8kC,aAAex7B,EAAOw7B,aAEtBx7B,EAAOy8B,MAEX/lC,KAAK+lC,OAAU/lC,KAAK+lC,OAAS,IAAIrG,IAAUjpB,KAAMnN,EAAOy8B,OAIxD/lC,KAAK+lC,MAAQ,KAId/lC,KAAK27D,aAAeryD,EAAOqyD,aAC3B37D,KAAK47D,gBAAkBtyD,EAAOsyD,gBAEvB57D,MA2GRsqE,GAAkBhpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACtDgpE,GAAkBhpE,UAAU4B,YAAconE,GAE1CA,GAAkBhpE,UAAUknF,qBAAsB,EAElDle,GAAkBhpE,UAAUmV,KAAO,SAAWnN,GAiD7C,OA/CAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OACxBrgC,KAAKkmC,SAASzvB,KAAMnN,EAAO48B,UAC3BlmC,KAAKmmC,UAAY78B,EAAO68B,UAExBnmC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAKskC,SAAWh7B,EAAOg7B,SACvBtkC,KAAKukC,kBAAoBj7B,EAAOi7B,kBAEhCvkC,KAAKwkC,MAAQl7B,EAAOk7B,MACpBxkC,KAAKykC,eAAiBn7B,EAAOm7B,eAE7BzkC,KAAKgmC,SAASvvB,KAAMnN,EAAO08B,UAC3BhmC,KAAKqnC,YAAc/9B,EAAO+9B,YAC1BrnC,KAAKimC,kBAAoB38B,EAAO28B,kBAEhCjmC,KAAK2mC,QAAUr9B,EAAOq9B,QACtB3mC,KAAK4mC,UAAYt9B,EAAOs9B,UAExB5mC,KAAK6mC,UAAYv9B,EAAOu9B,UACxB7mC,KAAK8mC,cAAgBx9B,EAAOw9B,cAC5B9mC,KAAK+mC,YAAYtwB,KAAMnN,EAAOy9B,aAE9B/mC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAK0kC,YAAcp7B,EAAOo7B,YAE1B1kC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAK4kC,OAASt7B,EAAOs7B,OACrB5kC,KAAK6kC,QAAUv7B,EAAOu7B,QACtB7kC,KAAK8kC,aAAex7B,EAAOw7B,aAC3B9kC,KAAK+kC,gBAAkBz7B,EAAOy7B,gBAE9B/kC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBACjCjlC,KAAKklC,iBAAmB57B,EAAO47B,iBAC/BllC,KAAKmlC,kBAAoB77B,EAAO67B,kBAEhCnlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAEpB5nC,MA4FRuqE,GAAiBjpE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACrDipE,GAAiBjpE,UAAU4B,YAAcqnE,GAEzCA,GAAiBjpE,UAAUgnF,oBAAqB,EAEhD/d,GAAiBjpE,UAAUmV,KAAO,SAAWnN,GAyC5C,OAvCAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKqkC,IAAM/6B,EAAO+6B,IAClBrkC,KAAKunC,YAAcj+B,EAAOi+B,YAE1BvnC,KAAKskC,SAAWh7B,EAAOg7B,SACvBtkC,KAAKukC,kBAAoBj7B,EAAOi7B,kBAEhCvkC,KAAKwkC,MAAQl7B,EAAOk7B,MACpBxkC,KAAKykC,eAAiBn7B,EAAOm7B,eAE7BzkC,KAAKgmC,SAASvvB,KAAMnN,EAAO08B,UAC3BhmC,KAAKqnC,YAAc/9B,EAAO+9B,YAC1BrnC,KAAKimC,kBAAoB38B,EAAO28B,kBAEhCjmC,KAAK2mC,QAAUr9B,EAAOq9B,QACtB3mC,KAAK4mC,UAAYt9B,EAAOs9B,UAExB5mC,KAAK6mC,UAAYv9B,EAAOu9B,UACxB7mC,KAAK8mC,cAAgBx9B,EAAOw9B,cAC5B9mC,KAAK+mC,YAAYtwB,KAAMnN,EAAOy9B,aAE9B/mC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBACjCjlC,KAAKklC,iBAAmB57B,EAAO47B,iBAC/BllC,KAAKmlC,kBAAoB77B,EAAO67B,kBAEhCnlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAEpB5nC,MA0DRoqE,GAAmB9oE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACvD8oE,GAAmB9oE,UAAU4B,YAAcknE,GAE3CA,GAAmB9oE,UAAU0nF,sBAAuB,EAEpD5e,GAAmB9oE,UAAUmV,KAAO,SAAWnN,GAsB9C,OApBAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK2mC,QAAUr9B,EAAOq9B,QACtB3mC,KAAK4mC,UAAYt9B,EAAOs9B,UAExB5mC,KAAK6mC,UAAYv9B,EAAOu9B,UACxB7mC,KAAK8mC,cAAgBx9B,EAAOw9B,cAC5B9mC,KAAK+mC,YAAYtwB,KAAMnN,EAAOy9B,aAE9B/mC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBAEjCjlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAEpB5nC,MAiFRqqE,GAAoB/oE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACxD+oE,GAAoB/oE,UAAU4B,YAAcmnE,GAE5CA,GAAoB/oE,UAAU8mF,uBAAwB,EAEtD/d,GAAoB/oE,UAAUmV,KAAO,SAAWnN,GAoC/C,OAlCAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAKskC,SAAWh7B,EAAOg7B,SACvBtkC,KAAKukC,kBAAoBj7B,EAAOi7B,kBAEhCvkC,KAAKwkC,MAAQl7B,EAAOk7B,MACpBxkC,KAAKykC,eAAiBn7B,EAAOm7B,eAE7BzkC,KAAKgmC,SAASvvB,KAAMnN,EAAO08B,UAC3BhmC,KAAKqnC,YAAc/9B,EAAO+9B,YAC1BrnC,KAAKimC,kBAAoB38B,EAAO28B,kBAEhCjmC,KAAK0kC,YAAcp7B,EAAOo7B,YAE1B1kC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAK4kC,OAASt7B,EAAOs7B,OACrB5kC,KAAK6kC,QAAUv7B,EAAOu7B,QACtB7kC,KAAK8kC,aAAex7B,EAAOw7B,aAC3B9kC,KAAK+kC,gBAAkBz7B,EAAOy7B,gBAE9B/kC,KAAKglC,UAAY17B,EAAO07B,UACxBhlC,KAAKilC,mBAAqB37B,EAAO27B,mBACjCjlC,KAAKklC,iBAAmB57B,EAAO47B,iBAC/BllC,KAAKmlC,kBAAoB77B,EAAO67B,kBAEhCnlC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAEpB5nC,MAmER0qE,GAAmBppE,UAAYtC,OAAOoX,OAAQ2rB,GAASzgC,WACvDopE,GAAmBppE,UAAU4B,YAAcwnE,GAE3CA,GAAmBppE,UAAUsnF,sBAAuB,EAEpDle,GAAmBppE,UAAUmV,KAAO,SAAWnN,GA6B9C,OA3BAy4B,GAASzgC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAK06C,QAAU,CAAE61D,OAAU,IAE3BvwG,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OAExBrgC,KAAK0mC,OAASp9B,EAAOo9B,OAErB1mC,KAAKqkC,IAAM/6B,EAAO+6B,IAElBrkC,KAAK2mC,QAAUr9B,EAAOq9B,QACtB3mC,KAAK4mC,UAAYt9B,EAAOs9B,UAExB5mC,KAAK6mC,UAAYv9B,EAAOu9B,UACxB7mC,KAAK8mC,cAAgBx9B,EAAOw9B,cAC5B9mC,KAAK+mC,YAAYtwB,KAAMnN,EAAOy9B,aAE9B/mC,KAAKgnC,gBAAkB19B,EAAO09B,gBAC9BhnC,KAAKinC,kBAAoB39B,EAAO29B,kBAChCjnC,KAAKknC,iBAAmB59B,EAAO49B,iBAE/BlnC,KAAK2kC,SAAWr7B,EAAOq7B,SAEvB3kC,KAAKolC,SAAW97B,EAAO87B,SACvBplC,KAAKqlC,aAAe/7B,EAAO+7B,aAC3BrlC,KAAK4nC,aAAet+B,EAAOs+B,aAEpB5nC,MA+BR4qE,GAAmBtpE,UAAYtC,OAAOoX,OAAQu0D,GAAkBrpE,WAChEspE,GAAmBtpE,UAAU4B,YAAc0nE,GAE3CA,GAAmBtpE,UAAU8nF,sBAAuB,EAEpDxe,GAAmBtpE,UAAUmV,KAAO,SAAWnN,GAQ9C,OANAqhE,GAAkBrpE,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE7CtJ,KAAKqqB,MAAQ/gB,EAAO+gB,MACpBrqB,KAAK0nC,SAAWp+B,EAAOo+B,SACvB1nC,KAAK2nC,QAAUr+B,EAAOq+B,QAEf3nC,MAIR,IAAIwwG,GAAyBxxG,OAAOgvG,OAAO,CAC1CC,UAAW,KACXnjC,eAAgBA,GAChBC,eAAgBA,GAChBolC,kBAAmBA,GACnB11D,eAAgBA,GAChBowB,eAAgBA,GAChBJ,qBAAsBA,GACtBD,qBAAsBA,GACtBF,kBAAmBA,GACnBC,iBAAkBA,GAClBH,mBAAoBA,GACpBC,oBAAqBA,GACrBH,kBAAmBA,GACnBC,qBAAsBA,GACtB/lC,kBAAmBA,GACnBsmC,mBAAoBA,GACpBE,mBAAoBA,GACpBD,kBAAmBA,GACnB5oC,SAAUA,KAGX,MAAM0uE,GAAiB,CAGtBC,WAAY,SAAWxmG,EAAOymG,EAAMC,GAEnC,OAAKH,GAAeI,aAAc3mG,GAI1B,IAAIA,EAAMhH,YAAagH,EAAMs4C,SAAUmuD,OAAahwG,IAAPiwG,EAAmBA,EAAK1mG,EAAMb,SAI5Ea,EAAM3M,MAAOozG,EAAMC,IAK3BE,aAAc,SAAW5mG,EAAOpL,EAAMiyG,GAErC,OAAO7mG,IACJ6mG,GAAc7mG,EAAMhH,cAAgBpE,EAAcoL,EAEd,iBAA3BpL,EAAKwjD,kBAET,IAAIxjD,EAAMoL,GAIXjL,MAAMqC,UAAU/D,MAAMoI,KAAMuE,IAIpC2mG,aAAc,SAAW3vF,GAExB,OAAO8vF,YAAYC,OAAQ/vF,MACtBA,aAAkBgwF,WAKxBC,iBAAkB,SAAWC,GAQ5B,MAAM/lG,EAAI+lG,EAAM/nG,OACV9E,EAAS,IAAItF,MAAOoM,GAC1B,IAAM,IAAIlB,EAAI,EAAGA,IAAMkB,IAAMlB,EAAI5F,EAAQ4F,GAAMA,EAI/C,OAFA5F,EAAO6yC,MAVP,SAAsBjtC,EAAGoZ,GAExB,OAAO6tF,EAAOjnG,GAAMinG,EAAO7tF,MAUrBhf,GAKR8sG,YAAa,SAAWp/E,EAAQ6gC,EAAQvlD,GAEvC,MAAM+jG,EAAUr/E,EAAO5oB,OACjB9E,EAAS,IAAI0tB,EAAO/uB,YAAaouG,GAEvC,IAAM,IAAInnG,EAAI,EAAGkQ,EAAY,EAAGA,IAAci3F,IAAYnnG,EAAI,CAE7D,MAAMonG,EAAYhkG,EAAOpD,GAAM2oD,EAE/B,IAAM,IAAIvvC,EAAI,EAAGA,IAAMuvC,IAAWvvC,EAEjChf,EAAQ8V,KAAiB4X,EAAQs/E,EAAYhuF,GAM/C,OAAOhf,GAKRitG,YAAa,SAAWC,EAAUL,EAAOn/E,EAAQy/E,GAEhD,IAAIvnG,EAAI,EAAG5I,EAAMkwG,EAAU,GAE3B,UAAgB9wG,IAARY,QAAkDZ,IAA7BY,EAAKmwG,IAEjCnwG,EAAMkwG,EAAUtnG,KAIjB,QAAaxJ,IAARY,EAAoB,OAEzB,IAAI1C,EAAQ0C,EAAKmwG,GACjB,QAAe/wG,IAAV9B,EAEL,GAAKI,MAAMkY,QAAStY,GAEnB,GAECA,EAAQ0C,EAAKmwG,QAEE/wG,IAAV9B,IAEJuyG,EAAMjzG,KAAMoD,EAAIu/C,MAChB7uB,EAAO9zB,KAAKg9E,MAAOlpD,EAAQpzB,IAI5B0C,EAAMkwG,EAAUtnG,gBAECxJ,IAARY,QAEJ,QAAuBZ,IAAlB9B,EAAMwyB,QAIjB,GAECxyB,EAAQ0C,EAAKmwG,QAEE/wG,IAAV9B,IAEJuyG,EAAMjzG,KAAMoD,EAAIu/C,MAChBjiD,EAAMwyB,QAASY,EAAQA,EAAO5oB,SAI/B9H,EAAMkwG,EAAUtnG,gBAECxJ,IAARY,QAMV,GAEC1C,EAAQ0C,EAAKmwG,QAEE/wG,IAAV9B,IAEJuyG,EAAMjzG,KAAMoD,EAAIu/C,MAChB7uB,EAAO9zB,KAAMU,IAId0C,EAAMkwG,EAAUtnG,gBAECxJ,IAARY,IAMZowG,QAAS,SAAWC,EAAYzwG,EAAM0wG,EAAYC,EAAUC,GAE3DA,EAAMA,GAAO,GAEb,MAAMC,EAAOJ,EAAWp7F,QAExBw7F,EAAK7wG,KAAOA,EAEZ,MAAM8wG,EAAS,GAEf,IAAM,IAAI9nG,EAAI,EAAGA,EAAI6nG,EAAKC,OAAO5oG,SAAWc,EAAI,CAE/C,MAAM+nG,EAAQF,EAAKC,OAAQ9nG,GACrBgoG,EAAYD,EAAME,eAElBhB,EAAQ,GACRn/E,EAAS,GAEf,IAAM,IAAI1O,EAAI,EAAGA,EAAI2uF,EAAMd,MAAM/nG,SAAWka,EAAI,CAE/C,MAAMw9B,EAAQmxD,EAAMd,MAAO7tF,GAAMwuF,EAEjC,KAAKhxD,EAAQ8wD,GAAc9wD,GAAS+wD,GAApC,CAEAV,EAAMjzG,KAAM+zG,EAAMd,MAAO7tF,IAEzB,IAAM,IAAIriB,EAAI,EAAGA,EAAIixG,IAAcjxG,EAElC+wB,EAAO9zB,KAAM+zG,EAAMjgF,OAAQ1O,EAAI4uF,EAAYjxG,KAMvB,IAAjBkwG,EAAM/nG,SAEX6oG,EAAMd,MAAQX,GAAeK,aAAcM,EAAOc,EAAMd,MAAMluG,aAC9DgvG,EAAMjgF,OAASw+E,GAAeK,aAAc7+E,EAAQigF,EAAMjgF,OAAO/uB,aAEjE+uG,EAAO9zG,KAAM+zG,IAIdF,EAAKC,OAASA,EAId,IAAII,EAAelyF,EAAAA,EAEnB,IAAM,IAAIhW,EAAI,EAAGA,EAAI6nG,EAAKC,OAAO5oG,SAAWc,EAEtCkoG,EAAeL,EAAKC,OAAQ9nG,GAAIinG,MAAO,KAE3CiB,EAAeL,EAAKC,OAAQ9nG,GAAIinG,MAAO,IAQzC,IAAM,IAAIjnG,EAAI,EAAGA,EAAI6nG,EAAKC,OAAO5oG,SAAWc,EAE3C6nG,EAAKC,OAAQ9nG,GAAI8iF,OAAS,EAAIolB,GAM/B,OAFAL,EAAKM,gBAEEN,GAIRO,iBAAkB,SAAWC,EAAYC,EAAgBC,EAAeX,QAE/CpxG,IAAnB8xG,IAA+BA,EAAiB,QAC9B9xG,IAAlB+xG,IAA8BA,EAAgBF,SACtC7xG,IAARoxG,GAAqBA,GAAO,KAAIA,EAAM,IAE3C,MAAMY,EAAYH,EAAWP,OAAO5oG,OAC9BupG,EAAgBH,EAAiBV,EAGvC,IAAM,IAAI5nG,EAAI,EAAGA,EAAIwoG,IAAcxoG,EAAI,CAEtC,MAAM0oG,EAAiBH,EAAcT,OAAQ9nG,GACvC2oG,EAAqBD,EAAeE,cAG1C,GAA4B,SAAvBD,GAAwD,WAAvBA,EAAkC,SAGxE,MAAME,EAAcR,EAAWP,OAAOgB,MAAM,SAAWf,GAEtD,OAAOA,EAAM/wG,OAAS0xG,EAAe1xG,MACjC+wG,EAAMa,gBAAkBD,KAI7B,QAAqBnyG,IAAhBqyG,EAA4B,SAEjC,IAAIE,EAAkB,EACtB,MAAMC,EAAqBN,EAAeT,eAErCS,EAAeO,kBAAkBC,4CAErCH,EAAkBC,EAAqB,GAIxC,IAAIG,EAAe,EACnB,MAAMC,EAAkBP,EAAYZ,eAE/BY,EAAYI,kBAAkBC,4CAElCC,EAAeC,EAAkB,GAIlC,MAAMpyC,EAAY0xC,EAAezB,MAAM/nG,OAAS,EAChD,IAAImqG,EAGJ,GAAKZ,GAAiBC,EAAezB,MAAO,GAAM,CAGjD,MAAMqC,EAAaP,EACbQ,EAAWP,EAAqBD,EACtCM,EAAiB/C,GAAeC,WAAYmC,EAAe5gF,OAAQwhF,EAAYC,QAEzE,GAAKd,GAAiBC,EAAezB,MAAOjwC,GAAc,CAGhE,MAAMsyC,EAAatyC,EAAYgyC,EAAqBD,EAC9CQ,EAAWD,EAAaN,EAAqBD,EACnDM,EAAiB/C,GAAeC,WAAYmC,EAAe5gF,OAAQwhF,EAAYC,OAEzE,CAGN,MAAMC,EAAcd,EAAeO,oBAC7BK,EAAaP,EACbQ,EAAWP,EAAqBD,EACtCS,EAAYC,SAAUhB,GACtBY,EAAiB/C,GAAeC,WAAYiD,EAAYE,aAAcJ,EAAYC,GAKnF,GAA4B,eAAvBZ,EAAsC,EAEpB,IAAIn5F,GAAahJ,UAAW6iG,GAAiBlkG,YAAYiN,YACjE8U,QAASmiF,GAMxB,MAAMM,EAAWd,EAAY5B,MAAM/nG,OACnC,IAAM,IAAIka,EAAI,EAAGA,EAAIuwF,IAAavwF,EAAI,CAErC,MAAMwwF,EAAaxwF,EAAIgwF,EAAkBD,EAEzC,GAA4B,eAAvBR,EAGJn5F,EAAWq6F,wBACVhB,EAAY/gF,OACZ8hF,EACAP,EACA,EACAR,EAAY/gF,OACZ8hF,OAGK,CAEN,MAAME,EAAWV,EAAiC,EAAfD,EAGnC,IAAM,IAAIpyG,EAAI,EAAGA,EAAI+yG,IAAa/yG,EAEjC8xG,EAAY/gF,OAAQ8hF,EAAa7yG,IAAOsyG,EAAgBtyG,KAY5D,OAFAsxG,EAAW0B,UA/7iCsB,KAi8iC1B1B,IA2BT,SAAS2B,GAAaC,EAAoBC,EAAcC,EAAYT,GAEnE7zG,KAAKo0G,mBAAqBA,EAC1Bp0G,KAAKu0G,aAAe,EAEpBv0G,KAAK6zG,kBAAgClzG,IAAjBkzG,EACnBA,EAAe,IAAIQ,EAAanxG,YAAaoxG,GAC9Ct0G,KAAKq0G,aAAeA,EACpBr0G,KAAKmyG,UAAYmC,EA0OlB,SAASE,GAAkBJ,EAAoBC,EAAcC,EAAYT,GAExEM,GAAYxuG,KAAM3F,KAAMo0G,EAAoBC,EAAcC,EAAYT,GAEtE7zG,KAAKy0G,aAAgB,EACrBz0G,KAAK00G,aAAgB,EACrB10G,KAAK20G,aAAgB,EACrB30G,KAAK40G,aAAgB,EAqItB,SAASC,GAAmBT,EAAoBC,EAAcC,EAAYT,GAEzEM,GAAYxuG,KAAM3F,KAAMo0G,EAAoBC,EAAcC,EAAYT,GAwCvE,SAASiB,GAAqBV,EAAoBC,EAAcC,EAAYT,GAE3EM,GAAYxuG,KAAM3F,KAAMo0G,EAAoBC,EAAcC,EAAYT,GAgBvE,SAASkB,GAAe5zG,EAAMiwG,EAAOn/E,EAAQ+iF,GAE5C,QAAcr0G,IAATQ,EAAqB,MAAM,IAAImN,MAAO,gDAC3C,QAAe3N,IAAVywG,GAAwC,IAAjBA,EAAM/nG,OAAe,MAAM,IAAIiF,MAAO,oDAAsDnN,GAExHnB,KAAKmB,KAAOA,EAEZnB,KAAKoxG,MAAQX,GAAeK,aAAcM,EAAOpxG,KAAKi1G,gBACtDj1G,KAAKiyB,OAASw+E,GAAeK,aAAc7+E,EAAQjyB,KAAKk1G,iBAExDl1G,KAAKm1G,iBAAkBH,GAAiBh1G,KAAKo1G,sBAuc9C,SAASC,GAAsBl0G,EAAMiwG,EAAOn/E,GAE3C8iF,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,GA0BxC,SAASqjF,GAAoBn0G,EAAMiwG,EAAOn/E,EAAQ+iF,GAEjDD,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,EAAQ+iF,GAuBhD,SAASO,GAAqBp0G,EAAMiwG,EAAOn/E,EAAQ+iF,GAElDD,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,EAAQ+iF,GAoBhD,SAASQ,GAA6BpB,EAAoBC,EAAcC,EAAYT,GAEnFM,GAAYxuG,KAAM3F,KAAMo0G,EAAoBC,EAAcC,EAAYT,GAkCvE,SAAS4B,GAAyBt0G,EAAMiwG,EAAOn/E,EAAQ+iF,GAEtDD,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,EAAQ+iF,GA4BhD,SAASU,GAAqBv0G,EAAMiwG,EAAOn/E,EAAQ+iF,GAElDD,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,EAAQ+iF,GAuBhD,SAASW,GAAqBx0G,EAAMiwG,EAAOn/E,EAAQ+iF,GAElDD,GAAcpvG,KAAM3F,KAAMmB,EAAMiwG,EAAOn/E,EAAQ+iF,GAgBhD,SAASY,GAAez0G,EAAM00G,EAAU5D,EAAQiC,GAE/Cl0G,KAAKmB,KAAOA,EACZnB,KAAKiyG,OAASA,EACdjyG,KAAK61G,cAA0Bl1G,IAAbk1G,EAA2BA,GAAa,EAC1D71G,KAAKk0G,eAA4BvzG,IAAduzG,EAA4BA,EArilCf,KAuilChCl0G,KAAKuV,KAAOhL,EAAUI,eAGjB3K,KAAK61G,SAAW,GAEpB71G,KAAKsyG,gBAgDP,SAASwD,GAAoBC,GAE5B,QAAmBp1G,IAAdo1G,EAAKj3G,KAET,MAAM,IAAIwP,MAAO,4DAIlB,MAAM0nG,EAlDP,SAAuCC,GAEtC,OAASA,EAASzzG,eAEjB,IAAK,SACL,IAAK,SACL,IAAK,QACL,IAAK,SACL,IAAK,UAEJ,OAAO+yG,GAER,IAAK,SACL,IAAK,UACL,IAAK,UACL,IAAK,UAEJ,OAAOI,GAER,IAAK,QAEJ,OAAOL,GAER,IAAK,aAEJ,OAAOG,GAER,IAAK,OACL,IAAK,UAEJ,OAAOJ,GAER,IAAK,SAEJ,OAAOK,GAIT,MAAM,IAAIpnG,MAAO,8CAAgD2nG,GAY/CC,CAA8BH,EAAKj3G,MAErD,QAAoB6B,IAAfo1G,EAAK3E,MAAsB,CAE/B,MAAMA,EAAQ,GAAIn/E,EAAS,GAE3Bw+E,GAAee,YAAauE,EAAKxkE,KAAM6/D,EAAOn/E,EAAQ,SAEtD8jF,EAAK3E,MAAQA,EACb2E,EAAK9jF,OAASA,EAKf,YAAyBtxB,IAApBq1G,EAAU32G,MAEP22G,EAAU32G,MAAO02G,GAKjB,IAAIC,EAAWD,EAAK50G,KAAM40G,EAAK3E,MAAO2E,EAAK9jF,OAAQ8jF,EAAKf,eAhpCjEh2G,OAAOuG,OAAQ4uG,GAAY7yG,UAAW,CAErCsyG,SAAU,SAAW9nG,GAEpB,MAAMqqG,EAAKn2G,KAAKo0G,mBAChB,IAAIl/E,EAAKl1B,KAAKu0G,aACbruF,EAAKiwF,EAAIjhF,GACTjP,EAAKkwF,EAAIjhF,EAAK,GAEfkhF,EAAmB,CAElBC,EAAM,CAEL,IAAIlrF,EAEJmrF,EAAa,CAMZC,EAAc,KAASzqG,EAAIoa,GAAO,CAEjC,IAAM,IAAIswF,EAAWthF,EAAK,IAAO,CAEhC,QAAYv0B,IAAPulB,EAAmB,CAEvB,GAAKpa,EAAIma,EAAK,MAAMswF,EAMpB,OAFArhF,EAAKihF,EAAG9sG,OACRrJ,KAAKu0G,aAAer/E,EACbl1B,KAAKy2G,UAAWvhF,EAAK,EAAGppB,EAAGma,GAInC,GAAKiP,IAAOshF,EAAW,MAKvB,GAHAvwF,EAAKC,EACLA,EAAKiwF,IAAOjhF,GAEPppB,EAAIoa,EAGR,MAAMmwF,EAORlrF,EAAQgrF,EAAG9sG,OACX,MAAMitG,EAMP,GAASxqG,GAAKma,EAiDd,MAAMmwF,EAjDN,CAIC,MAAMM,EAAWP,EAAI,GAEhBrqG,EAAI4qG,IAERxhF,EAAK,EACLjP,EAAKywF,GAMN,IAAM,IAAIF,EAAWthF,EAAK,IAAO,CAEhC,QAAYv0B,IAAPslB,EAKJ,OADAjmB,KAAKu0G,aAAe,EACbv0G,KAAK22G,aAAc,EAAG7qG,EAAGoa,GAIjC,GAAKgP,IAAOshF,EAAW,MAKvB,GAHAtwF,EAAKD,EACLA,EAAKkwF,IAAOjhF,EAAK,GAEZppB,GAAKma,EAGT,MAAMowF,EAORlrF,EAAQ+J,EACRA,EAAK,GAaP,KAAQA,EAAK/J,GAAQ,CAEpB,MAAMyrF,EAAQ1hF,EAAK/J,IAAY,EAE1Brf,EAAIqqG,EAAIS,GAEZzrF,EAAQyrF,EAIR1hF,EAAK0hF,EAAM,EAWb,GALA1wF,EAAKiwF,EAAIjhF,GACTjP,EAAKkwF,EAAIjhF,EAAK,QAIFv0B,IAAPslB,EAGJ,OADAjmB,KAAKu0G,aAAe,EACbv0G,KAAK22G,aAAc,EAAG7qG,EAAGoa,GAIjC,QAAYvlB,IAAPulB,EAIJ,OAFAgP,EAAKihF,EAAG9sG,OACRrJ,KAAKu0G,aAAer/E,EACbl1B,KAAKy2G,UAAWvhF,EAAK,EAAGjP,EAAIna,GAMrC9L,KAAKu0G,aAAer/E,EAEpBl1B,KAAK62G,iBAAkB3hF,EAAIjP,EAAIC,GAIhC,OAAOlmB,KAAK82G,aAAc5hF,EAAIjP,EAAIna,EAAGoa,IAItC6wF,SAAU,KAKVC,iBAAkB,GAElBC,aAAc,WAEb,OAAOj3G,KAAK+2G,UAAY/2G,KAAKg3G,kBAI9BE,iBAAkB,SAAW/tG,GAI5B,MAAM5E,EAASvE,KAAK6zG,aACnB5hF,EAASjyB,KAAKq0G,aACdvhD,EAAS9yD,KAAKmyG,UACdziG,EAASvG,EAAQ2pD,EAElB,IAAM,IAAI3oD,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAEjC5F,EAAQ4F,GAAM8nB,EAAQviB,EAASvF,GAIhC,OAAO5F,GAMRuyG,aAAc,WAEb,MAAM,IAAIxoG,MAAO,4BAKlBuoG,iBAAkB,eASnB73G,OAAOuG,OAAQ4uG,GAAY7yG,UAAW,CAGrCq1G,aAAcxC,GAAY7yG,UAAU41G,iBAGpCT,UAAWtC,GAAY7yG,UAAU41G,mBAuBlC1C,GAAiBlzG,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+9F,GAAY7yG,WAAa,CAEnF4B,YAAasxG,GAEbwC,iBAAkB,CAEjBG,YAnujC0B,KAoujC1BC,UApujC0B,MAwujC3BP,iBAAkB,SAAW3hF,EAAIjP,EAAIC,GAEpC,MAAMiwF,EAAKn2G,KAAKo0G,mBAChB,IAAIiD,EAAQniF,EAAK,EAChBoiF,EAAQpiF,EAAK,EAEbqiF,EAAQpB,EAAIkB,GACZG,EAAQrB,EAAImB,GAEb,QAAe32G,IAAV42G,EAEJ,OAASv3G,KAAKi3G,eAAeE,aAE5B,KApvjCoB,KAuvjCnBE,EAAQniF,EACRqiF,EAAQ,EAAItxF,EAAKC,EAEjB,MAED,KA3vjCqB,KA8vjCpBmxF,EAAQlB,EAAG9sG,OAAS,EACpBkuG,EAAQtxF,EAAKkwF,EAAIkB,GAAUlB,EAAIkB,EAAQ,GAEvC,MAED,QAGCA,EAAQniF,EACRqiF,EAAQrxF,EAMX,QAAevlB,IAAV62G,EAEJ,OAASx3G,KAAKi3G,eAAeG,WAE5B,KAlxjCoB,KAqxjCnBE,EAAQpiF,EACRsiF,EAAQ,EAAItxF,EAAKD,EAEjB,MAED,KAzxjCqB,KA4xjCpBqxF,EAAQ,EACRE,EAAQtxF,EAAKiwF,EAAI,GAAMA,EAAI,GAE3B,MAED,QAGCmB,EAAQpiF,EAAK,EACbsiF,EAAQvxF,EAMX,MAAMwxF,EAAuB,IAAZvxF,EAAKD,GACrB6sC,EAAS9yD,KAAKmyG,UAEfnyG,KAAKy0G,YAAcgD,GAAWxxF,EAAKsxF,GACnCv3G,KAAK20G,YAAc8C,GAAWD,EAAQtxF,GACtClmB,KAAK00G,YAAc2C,EAAQvkD,EAC3B9yD,KAAK40G,YAAc0C,EAAQxkD,GAI5BgkD,aAAc,SAAW5hF,EAAIjP,EAAIna,EAAGoa,GAEnC,MAAM3hB,EAASvE,KAAK6zG,aACnB5hF,EAASjyB,KAAKq0G,aACdvhD,EAAS9yD,KAAKmyG,UAEdpO,EAAK7uE,EAAK49B,EAAS4kD,EAAK3T,EAAKjxC,EAC7B6kD,EAAK33G,KAAK00G,YAAckD,EAAK53G,KAAK40G,YAClCiD,EAAK73G,KAAKy0G,YAAaqD,EAAK93G,KAAK20G,YAEjCn0G,GAAMsL,EAAIma,IAASC,EAAKD,GACxBkwF,EAAK31G,EAAIA,EACTu3G,EAAM5B,EAAK31G,EAINw3G,GAAOH,EAAKE,EAAM,EAAIF,EAAK1B,EAAK0B,EAAKr3G,EACrCklB,GAAO,EAAImyF,GAAOE,IAAU,IAAM,EAAIF,GAAO1B,IAAS,GAAM0B,GAAOr3G,EAAI,EACvEqb,IAAS,EAAIi8F,GAAOC,GAAQ,IAAMD,GAAO3B,EAAK,GAAM31G,EACpDy3G,EAAKH,EAAKC,EAAMD,EAAK3B,EAI3B,IAAM,IAAIhsG,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAEjC5F,EAAQ4F,GACN6tG,EAAK/lF,EAAQ0lF,EAAKxtG,GAClBub,EAAKuM,EAAQylF,EAAKvtG,GAClB0R,EAAKoW,EAAQ8xE,EAAK55F,GAClB8tG,EAAKhmF,EAAQ2lF,EAAKztG,GAIrB,OAAO5F,KAYTswG,GAAkBvzG,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+9F,GAAY7yG,WAAa,CAEpF4B,YAAa2xG,GAEbiC,aAAc,SAAW5hF,EAAIjP,EAAIna,EAAGoa,GAEnC,MAAM3hB,EAASvE,KAAK6zG,aACnB5hF,EAASjyB,KAAKq0G,aACdvhD,EAAS9yD,KAAKmyG,UAEd+F,EAAUhjF,EAAK49B,EACfqlD,EAAUD,EAAUplD,EAEpBslD,GAAYtsG,EAAIma,IAASC,EAAKD,GAC9BoyF,EAAU,EAAID,EAEf,IAAM,IAAIjuG,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAEjC5F,EAAQ4F,GACN8nB,EAAQkmF,EAAUhuG,GAAMkuG,EACxBpmF,EAAQimF,EAAU/tG,GAAMiuG,EAI3B,OAAO7zG,KAkBTuwG,GAAoBxzG,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+9F,GAAY7yG,WAAa,CAEtF4B,YAAa4xG,GAEbgC,aAAc,SAAW5hF,GAExB,OAAOl1B,KAAKk3G,iBAAkBhiF,EAAK,MAsBrCl2B,OAAOuG,OAAQwvG,GAAe,CAK7Br+F,OAAQ,SAAWw7F,GAElB,MAAM8D,EAAY9D,EAAMhvG,YAExB,IAAI6yG,EAGJ,QAA0Bp1G,IAArBq1G,EAAUt/F,OAEdq/F,EAAOC,EAAUt/F,OAAQw7F,OAEnB,CAGN6D,EAAO,CAEN50G,KAAQ+wG,EAAM/wG,KACdiwG,MAASX,GAAeK,aAAcoB,EAAMd,MAAOnyG,OACnDgzB,OAAUw+E,GAAeK,aAAcoB,EAAMjgF,OAAQhzB,QAItD,MAAM+1G,EAAgB9C,EAAMoG,mBAEvBtD,IAAkB9C,EAAMkD,uBAE5BW,EAAKf,cAAgBA,GAQvB,OAFAe,EAAKj3G,KAAOozG,EAAMa,cAEXgD,KAMT/2G,OAAOuG,OAAQwvG,GAAczzG,UAAW,CAEvC4B,YAAa6xG,GAEbE,eAAgB5rE,aAEhB6rE,gBAAiB7rE,aAEjB+rE,qBAj+jCyB,KAm+jCzBmD,iCAAkC,SAAWh0G,GAE5C,OAAO,IAAIuwG,GAAqB90G,KAAKoxG,MAAOpxG,KAAKiyB,OAAQjyB,KAAKoyG,eAAgB7tG,IAI/Ei0G,+BAAgC,SAAWj0G,GAE1C,OAAO,IAAIswG,GAAmB70G,KAAKoxG,MAAOpxG,KAAKiyB,OAAQjyB,KAAKoyG,eAAgB7tG,IAI7Ek0G,+BAAgC,SAAWl0G,GAE1C,OAAO,IAAIiwG,GAAkBx0G,KAAKoxG,MAAOpxG,KAAKiyB,OAAQjyB,KAAKoyG,eAAgB7tG,IAI5E4wG,iBAAkB,SAAWH,GAE5B,IAAI0D,EAEJ,OAAS1D,GAER,KA5/jCyB,KA8/jCxB0D,EAAgB14G,KAAKu4G,iCAErB,MAED,KAjgkCuB,KAmgkCtBG,EAAgB14G,KAAKw4G,+BAErB,MAED,KAtgkCuB,KAwgkCtBE,EAAgB14G,KAAKy4G,+BAMvB,QAAuB93G,IAAlB+3G,EAA8B,CAElC,MAAMtrB,EAAU,iCACfptF,KAAK+yG,cAAgB,yBAA2B/yG,KAAKmB,KAEtD,QAAgCR,IAA3BX,KAAKozG,kBAAkC,CAG3C,GAAK4B,IAAkBh1G,KAAKo1G,qBAM3B,MAAM,IAAI9mG,MAAO8+E,GAJjBptF,KAAKm1G,iBAAkBn1G,KAAKo1G,sBAW9B,OADA92G,QAAQC,KAAM,uBAAwB6uF,GAC/BptF,KAMR,OAFAA,KAAKozG,kBAAoBsF,EAElB14G,MAIRs4G,iBAAkB,WAEjB,OAASt4G,KAAKozG,mBAEb,KAAKpzG,KAAKu4G,iCAET,OArjkCwB,KAujkCzB,KAAKv4G,KAAKw4G,+BAET,OAxjkCsB,KA0jkCvB,KAAKx4G,KAAKy4G,+BAET,OA3jkCsB,OAikkCzBrG,aAAc,WAEb,OAAOpyG,KAAKiyB,OAAO5oB,OAASrJ,KAAKoxG,MAAM/nG,QAKxC4jF,MAAO,SAAW0rB,GAEjB,GAAoB,IAAfA,EAAqB,CAEzB,MAAMvH,EAAQpxG,KAAKoxG,MAEnB,IAAM,IAAIjnG,EAAI,EAAGkB,EAAI+lG,EAAM/nG,OAAQc,IAAMkB,IAAMlB,EAE9CinG,EAAOjnG,IAAOwuG,EAMhB,OAAO34G,MAKRqqB,MAAO,SAAWuuF,GAEjB,GAAmB,IAAdA,EAAoB,CAExB,MAAMxH,EAAQpxG,KAAKoxG,MAEnB,IAAM,IAAIjnG,EAAI,EAAGkB,EAAI+lG,EAAM/nG,OAAQc,IAAMkB,IAAMlB,EAE9CinG,EAAOjnG,IAAOyuG,EAMhB,OAAO54G,MAMRyiE,KAAM,SAAWo2C,EAAWC,GAE3B,MAAM1H,EAAQpxG,KAAKoxG,MAClB2H,EAAQ3H,EAAM/nG,OAEf,IAAIsnG,EAAO,EACVC,EAAKmI,EAAQ,EAEd,KAAQpI,IAASoI,GAAS3H,EAAOT,GAASkI,KAEtClI,EAIJ,MAAiB,IAATC,GAAcQ,EAAOR,GAAOkI,KAEhClI,EAMJ,KAFGA,EAEW,IAATD,GAAcC,IAAOmI,EAAQ,CAG5BpI,GAAQC,IAEZA,EAAKvzG,KAAK8N,IAAKylG,EAAI,GACnBD,EAAOC,EAAK,GAIb,MAAM99C,EAAS9yD,KAAKoyG,eACpBpyG,KAAKoxG,MAAQX,GAAeC,WAAYU,EAAOT,EAAMC,GACrD5wG,KAAKiyB,OAASw+E,GAAeC,WAAY1wG,KAAKiyB,OAAQ0+E,EAAO79C,EAAQ89C,EAAK99C,GAI3E,OAAO9yD,MAKRg5G,SAAU,WAET,IAAIC,GAAQ,EAEZ,MAAM9G,EAAYnyG,KAAKoyG,eAClBD,EAAY90G,KAAKqL,MAAOypG,IAAgB,IAE5C7zG,QAAQ0R,MAAO,oDAAqDhQ,MACpEi5G,GAAQ,GAIT,MAAM7H,EAAQpxG,KAAKoxG,MAClBn/E,EAASjyB,KAAKiyB,OAEd8mF,EAAQ3H,EAAM/nG,OAEA,IAAV0vG,IAEJz6G,QAAQ0R,MAAO,uCAAwChQ,MACvDi5G,GAAQ,GAIT,IAAIC,EAAW,KAEf,IAAM,IAAI/uG,EAAI,EAAGA,IAAM4uG,EAAO5uG,IAAO,CAEpC,MAAMgvG,EAAW/H,EAAOjnG,GAExB,GAAyB,iBAAbgvG,GAAyB1pE,MAAO0pE,GAAa,CAExD76G,QAAQ0R,MAAO,mDAAoDhQ,KAAMmK,EAAGgvG,GAC5EF,GAAQ,EACR,MAID,GAAkB,OAAbC,GAAqBA,EAAWC,EAAW,CAE/C76G,QAAQ0R,MAAO,0CAA2ChQ,KAAMmK,EAAGgvG,EAAUD,GAC7ED,GAAQ,EACR,MAIDC,EAAWC,EAIZ,QAAgBx4G,IAAXsxB,GAECw+E,GAAeI,aAAc5+E,GAEjC,IAAM,IAAI9nB,EAAI,EAAGkB,EAAI4mB,EAAO5oB,OAAQc,IAAMkB,IAAMlB,EAAI,CAEnD,MAAMtL,EAAQozB,EAAQ9nB,GAEtB,GAAKslC,MAAO5wC,GAAU,CAErBP,QAAQ0R,MAAO,oDAAqDhQ,KAAMmK,EAAGtL,GAC7Eo6G,GAAQ,EACR,OAUJ,OAAOA,GAMRG,SAAU,WAGT,MAAMhI,EAAQX,GAAeC,WAAY1wG,KAAKoxG,OAC7Cn/E,EAASw+E,GAAeC,WAAY1wG,KAAKiyB,QACzC6gC,EAAS9yD,KAAKoyG,eAEdiH,EA/ukCuB,OA+ukCDr5G,KAAKs4G,mBAE3Bn3C,EAAYiwC,EAAM/nG,OAAS,EAE5B,IAAIiwG,EAAa,EAEjB,IAAM,IAAInvG,EAAI,EAAGA,EAAIg3D,IAAch3D,EAAI,CAEtC,IAAIovG,GAAO,EAEX,MAAMz4D,EAAOswD,EAAOjnG,GAKpB,GAAK22C,IAJYswD,EAAOjnG,EAAI,KAIM,IAANA,GAAW22C,IAASA,EAAM,IAErD,GAAOu4D,EAwBNE,GAAO,MAxBqB,CAI5B,MAAM7pG,EAASvF,EAAI2oD,EAClB0mD,EAAU9pG,EAASojD,EACnB2mD,EAAU/pG,EAASojD,EAEpB,IAAM,IAAIvvC,EAAI,EAAGA,IAAMuvC,IAAWvvC,EAAI,CAErC,MAAM1kB,EAAQozB,EAAQviB,EAAS6T,GAE/B,GAAK1kB,IAAUozB,EAAQunF,EAAUj2F,IAChC1kB,IAAUozB,EAAQwnF,EAAUl2F,GAAM,CAElCg2F,GAAO,EACP,QAgBJ,GAAKA,EAAO,CAEX,GAAKpvG,IAAMmvG,EAAa,CAEvBlI,EAAOkI,GAAelI,EAAOjnG,GAE7B,MAAMuvG,EAAavvG,EAAI2oD,EACtB6mD,EAAcL,EAAaxmD,EAE5B,IAAM,IAAIvvC,EAAI,EAAGA,IAAMuvC,IAAWvvC,EAEjC0O,EAAQ0nF,EAAcp2F,GAAM0O,EAAQynF,EAAan2F,KAMhD+1F,GAQL,GAAKn4C,EAAY,EAAI,CAEpBiwC,EAAOkI,GAAelI,EAAOjwC,GAE7B,IAAM,IAAIu4C,EAAav4C,EAAYrO,EAAQ6mD,EAAcL,EAAaxmD,EAAQvvC,EAAI,EAAGA,IAAMuvC,IAAWvvC,EAErG0O,EAAQ0nF,EAAcp2F,GAAM0O,EAAQynF,EAAan2F,KAI/C+1F,EAgBJ,OAZKA,IAAelI,EAAM/nG,QAEzBrJ,KAAKoxG,MAAQX,GAAeC,WAAYU,EAAO,EAAGkI,GAClDt5G,KAAKiyB,OAASw+E,GAAeC,WAAYz+E,EAAQ,EAAGqnF,EAAaxmD,KAIjE9yD,KAAKoxG,MAAQA,EACbpxG,KAAKiyB,OAASA,GAIRjyB,MAIRwW,MAAO,WAEN,MAAM46F,EAAQX,GAAeC,WAAY1wG,KAAKoxG,MAAO,GAC/Cn/E,EAASw+E,GAAeC,WAAY1wG,KAAKiyB,OAAQ,GAGjDigF,EAAQ,IAAI0H,EADS55G,KAAKkD,aACMlD,KAAKmB,KAAMiwG,EAAOn/E,GAKxD,OAFAigF,EAAMkB,kBAAoBpzG,KAAKozG,kBAExBlB,KAgBTmD,GAAqB/zG,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAEzF4B,YAAamyG,GAEbtC,cAAe,OACfmC,gBAAiBj2G,MAEjBm2G,qBA33kC2B,KA63kC3BoD,oCAAgC73G,EAChC83G,oCAAgC93G,IAkBjC20G,GAAmBh0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAEvF4B,YAAaoyG,GAEbvC,cAAe,UAqBhBwC,GAAoBj0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAExF4B,YAAaqyG,GAEbxC,cAAe,WAkBhByC,GAA4Bl0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+9F,GAAY7yG,WAAa,CAE9F4B,YAAasyG,GAEbsB,aAAc,SAAW5hF,EAAIjP,EAAIna,EAAGoa,GAEnC,MAAM3hB,EAASvE,KAAK6zG,aACnB5hF,EAASjyB,KAAKq0G,aACdvhD,EAAS9yD,KAAKmyG,UAEd5iG,GAAUzD,EAAIma,IAASC,EAAKD,GAE7B,IAAIvW,EAASwlB,EAAK49B,EAElB,IAAM,IAAI7/B,EAAMvjB,EAASojD,EAAQpjD,IAAWujB,EAAKvjB,GAAU,EAE1DiK,EAAWkgG,UAAWt1G,EAAQ,EAAG0tB,EAAQviB,EAASojD,EAAQ7gC,EAAQviB,EAAQH,GAI3E,OAAOhL,KAgBTkxG,GAAwBn0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAE5F4B,YAAauyG,GAEb1C,cAAe,aAIfqC,qBA1+kCyB,KA4+kCzBoD,+BAAgC,SAAWj0G,GAE1C,OAAO,IAAIixG,GAA6Bx1G,KAAKoxG,MAAOpxG,KAAKiyB,OAAQjyB,KAAKoyG,eAAgB7tG,IAIvFk0G,oCAAgC93G,IAcjC+0G,GAAoBp0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAExF4B,YAAawyG,GAEb3C,cAAe,SACfmC,gBAAiBj2G,MAEjBm2G,qBAxglC2B,KA0glC3BoD,oCAAgC73G,EAEhC83G,oCAAgC93G,IAcjCg1G,GAAoBr0G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ2+F,GAAczzG,WAAa,CAExF4B,YAAayyG,GAEb5C,cAAe,WAuGhB/zG,OAAOuG,OAAQqwG,GAAe,CAE7Bv2G,MAAO,SAAW02G,GAEjB,MAAM9D,EAAS,GACd6H,EAAa/D,EAAK9D,OAClB8H,EAAY,GAAQhE,EAAKhE,KAAO,GAEjC,IAAM,IAAI5nG,EAAI,EAAGkB,EAAIyuG,EAAWzwG,OAAQc,IAAMkB,IAAMlB,EAEnD8nG,EAAO9zG,KAAM23G,GAAoBgE,EAAY3vG,IAAMkgB,MAAO0vF,IAI3D,OAAO,IAAInE,GAAeG,EAAK50G,KAAM40G,EAAKF,SAAU5D,EAAQ8D,EAAK7B,YAIlEx9F,OAAQ,SAAWs7F,GAElB,MAAMC,EAAS,GACd+H,EAAahI,EAAKC,OAEb8D,EAAO,CAEZ50G,KAAQ6wG,EAAK7wG,KACb00G,SAAY7D,EAAK6D,SACjB5D,OAAUA,EACV18F,KAAQy8F,EAAKz8F,KACb2+F,UAAalC,EAAKkC,WAInB,IAAM,IAAI/pG,EAAI,EAAGkB,EAAI2uG,EAAW3wG,OAAQc,IAAMkB,IAAMlB,EAEnD8nG,EAAO9zG,KAAM42G,GAAcr+F,OAAQsjG,EAAY7vG,KAIhD,OAAO4rG,GAIRkE,8BAA+B,SAAW94G,EAAM+4G,EAAqBnI,EAAKoI,GAEzE,MAAMC,EAAkBF,EAAoB7wG,OACtC4oG,EAAS,GAEf,IAAM,IAAI9nG,EAAI,EAAGA,EAAIiwG,EAAiBjwG,IAAO,CAE5C,IAAIinG,EAAQ,GACRn/E,EAAS,GAEbm/E,EAAMjzG,MACHgM,EAAIiwG,EAAkB,GAAMA,EAC9BjwG,GACEA,EAAI,GAAMiwG,GAEbnoF,EAAO9zB,KAAM,EAAG,EAAG,GAEnB,MAAMoP,EAAQkjG,GAAeU,iBAAkBC,GAC/CA,EAAQX,GAAeY,YAAaD,EAAO,EAAG7jG,GAC9C0kB,EAASw+E,GAAeY,YAAap/E,EAAQ,EAAG1kB,GAIzC4sG,GAAyB,IAAf/I,EAAO,KAEvBA,EAAMjzG,KAAMi8G,GACZnoF,EAAO9zB,KAAM8zB,EAAQ,KAItBggF,EAAO9zG,KACN,IAAIo3G,GACH,0BAA4B2E,EAAqB/vG,GAAIhJ,KAAO,IAC5DiwG,EAAOn/E,GACN5H,MAAO,EAAM0nF,IAIjB,OAAO,IAAI6D,GAAez0G,GAAQ,EAAG8wG,IAItCoI,WAAY,SAAWC,EAAmBn5G,GAEzC,IAAIo5G,EAAYD,EAEhB,IAAOr7G,MAAMkY,QAASmjG,GAAsB,CAE3C,MAAM/L,EAAI+L,EACVC,EAAYhM,EAAE7sF,UAAY6sF,EAAE7sF,SAAS84F,YAAcjM,EAAEiM,WAItD,IAAM,IAAIrwG,EAAI,EAAGA,EAAIowG,EAAUlxG,OAAQc,IAEtC,GAAKowG,EAAWpwG,GAAIhJ,OAASA,EAE5B,OAAOo5G,EAAWpwG,GAMpB,OAAO,MAIRswG,oCAAqC,SAAWp1E,EAAc0sE,EAAKoI,GAElE,MAAMO,EAA0B,GAI1BC,EAAU,qBAIhB,IAAM,IAAIxwG,EAAI,EAAG0W,EAAKwkB,EAAah8B,OAAQc,EAAI0W,EAAI1W,IAAO,CAEzD,MAAMuiC,EAAcrH,EAAcl7B,GAC5BywG,EAAQluE,EAAYvrC,KAAK4H,MAAO4xG,GAEtC,GAAKC,GAASA,EAAMvxG,OAAS,EAAI,CAEhC,MAAMlI,EAAOy5G,EAAO,GAEpB,IAAIC,EAAwBH,EAAyBv5G,GAE9C05G,IAENH,EAAyBv5G,GAAS05G,EAAwB,IAI3DA,EAAsB18G,KAAMuuC,IAM9B,MAAMouE,EAAQ,GAEd,IAAM,MAAM35G,KAAQu5G,EAEnBI,EAAM38G,KAAMy3G,GAAcqE,8BAA+B94G,EAAMu5G,EAAyBv5G,GAAQ4wG,EAAKoI,IAItG,OAAOW,GAKRC,eAAgB,SAAW32B,EAAW9Y,GAErC,IAAO8Y,EAGN,OADA9lF,QAAQ0R,MAAO,yDACR,KAIR,MAAMgrG,EAAmB,SAAWhF,EAAWiF,EAAWC,EAAeC,EAAcC,GAGtF,GAA8B,IAAzBF,EAAc7xG,OAAe,CAEjC,MAAM+nG,EAAQ,GACRn/E,EAAS,GAEfw+E,GAAee,YAAa0J,EAAe9J,EAAOn/E,EAAQkpF,GAGpC,IAAjB/J,EAAM/nG,QAEV+xG,EAAWj9G,KAAM,IAAI63G,EAAWiF,EAAW7J,EAAOn/E,MAQ/CggF,EAAS,GAEToJ,EAAWj3B,EAAUjjF,MAAQ,UAC7B4wG,EAAM3tB,EAAU2tB,KAAO,GACvBmC,EAAY9vB,EAAU8vB,UAG5B,IAAI2B,EAAWzxB,EAAU/6E,SAAY,EAErC,MAAMiyG,EAAkBl3B,EAAUm3B,WAAa,GAE/C,IAAM,IAAI9oG,EAAI,EAAGA,EAAI6oG,EAAgBjyG,OAAQoJ,IAAO,CAEnD,MAAMyoG,EAAgBI,EAAiB7oG,GAAI8+B,KAG3C,GAAO2pE,GAA0C,IAAzBA,EAAc7xG,OAGtC,GAAK6xG,EAAe,GAAI71E,aAAe,CAGtC,MAAMm2E,EAAmB,GAEzB,IAAIt6G,EAEJ,IAAMA,EAAI,EAAGA,EAAIg6G,EAAc7xG,OAAQnI,IAEtC,GAAKg6G,EAAeh6G,GAAImkC,aAEvB,IAAM,IAAI/5B,EAAI,EAAGA,EAAI4vG,EAAeh6G,GAAImkC,aAAah8B,OAAQiC,IAE5DkwG,EAAkBN,EAAeh6G,GAAImkC,aAAc/5B,KAAU,EAWhE,IAAM,MAAMmwG,KAAmBD,EAAmB,CAEjD,MAAMpK,EAAQ,GACRn/E,EAAS,GAEf,IAAM,IAAI3mB,EAAI,EAAGA,IAAM4vG,EAAeh6G,GAAImkC,aAAah8B,SAAWiC,EAAI,CAErE,MAAMowG,EAAeR,EAAeh6G,GAEpCkwG,EAAMjzG,KAAMu9G,EAAa56D,MACzB7uB,EAAO9zB,KAAQu9G,EAAahvE,cAAgB+uE,EAAoB,EAAI,GAIrExJ,EAAO9zG,KAAM,IAAIo3G,GAAqB,yBAA2BkG,EAAkB,IAAKrK,EAAOn/E,IAIhG4jF,EAAW2F,EAAiBnyG,QAAW0oG,GAAO,OAExC,CAIN,MAAM4J,EAAW,UAAYrwC,EAAO74D,GAAItR,KAAO,IAE/C65G,EACCrF,GAAqBgG,EAAW,YAChCT,EAAe,MAAOjJ,GAEvB+I,EACCvF,GAAyBkG,EAAW,cACpCT,EAAe,MAAOjJ,GAEvB+I,EACCrF,GAAqBgG,EAAW,SAChCT,EAAe,MAAOjJ,IAMzB,GAAuB,IAAlBA,EAAO5oG,OAEX,OAAO,KAMR,OAFa,IAAIusG,GAAeyF,EAAUxF,EAAU5D,EAAQiC,MAQ9Dl1G,OAAOuG,OAAQqwG,GAAct0G,UAAW,CAEvCgxG,cAAe,WAGd,IAAIuD,EAAW,EAEf,IAAM,IAAI1rG,EAAI,EAAGkB,EAHFrL,KAAKiyG,OAGQ5oG,OAAQc,IAAMkB,IAAMlB,EAAI,CAEnD,MAAM+nG,EAAQlyG,KAAKiyG,OAAQ9nG,GAE3B0rG,EAAWx4G,KAAK8N,IAAK0qG,EAAU3D,EAAMd,MAAOc,EAAMd,MAAM/nG,OAAS,IAMlE,OAFArJ,KAAK61G,SAAWA,EAET71G,MAIRyiE,KAAM,WAEL,IAAM,IAAIt4D,EAAI,EAAGA,EAAInK,KAAKiyG,OAAO5oG,OAAQc,IAExCnK,KAAKiyG,OAAQ9nG,GAAIs4D,KAAM,EAAGziE,KAAK61G,UAIhC,OAAO71G,MAIRg5G,SAAU,WAET,IAAIC,GAAQ,EAEZ,IAAM,IAAI9uG,EAAI,EAAGA,EAAInK,KAAKiyG,OAAO5oG,OAAQc,IAExC8uG,EAAQA,GAASj5G,KAAKiyG,OAAQ9nG,GAAI6uG,WAInC,OAAOC,GAIRG,SAAU,WAET,IAAM,IAAIjvG,EAAI,EAAGA,EAAInK,KAAKiyG,OAAO5oG,OAAQc,IAExCnK,KAAKiyG,OAAQ9nG,GAAIivG,WAIlB,OAAOp5G,MAIRwW,MAAO,WAEN,MAAMy7F,EAAS,GAEf,IAAM,IAAI9nG,EAAI,EAAGA,EAAInK,KAAKiyG,OAAO5oG,OAAQc,IAExC8nG,EAAO9zG,KAAM6B,KAAKiyG,OAAQ9nG,GAAIqM,SAI/B,OAAO,IAAIo/F,GAAe51G,KAAKmB,KAAMnB,KAAK61G,SAAU5D,EAAQjyG,KAAKk0G,cAMnE,MAAM0H,GAAQ,CAEbrjE,SAAS,EAETsjE,MAAO,GAEP56F,IAAK,SAAW1f,EAAKu6G,IAEE,IAAjB97G,KAAKu4C,UAIVv4C,KAAK67G,MAAOt6G,GAAQu6G,IAIrB95G,IAAK,SAAWT,GAEf,IAAsB,IAAjBvB,KAAKu4C,QAIV,OAAOv4C,KAAK67G,MAAOt6G,IAIpBuuB,OAAQ,SAAWvuB,UAEXvB,KAAK67G,MAAOt6G,IAIpB68C,MAAO,WAENp+C,KAAK67G,MAAQ,KAMf,SAASE,GAAgBC,EAAQC,EAAYC,GAE5C,MAAMrnE,EAAQ70C,KAEd,IAAIm8G,GAAY,EACZC,EAAc,EACdC,EAAa,EACbC,OAAc37G,EAClB,MAAM47G,EAAW,GAKjBv8G,KAAKw8G,aAAU77G,EACfX,KAAKg8G,OAASA,EACdh8G,KAAKi8G,WAAaA,EAClBj8G,KAAKk8G,QAAUA,EAEfl8G,KAAKy8G,UAAY,SAAWvlG,GAE3BmlG,KAEmB,IAAdF,QAEmBx7G,IAAlBk0C,EAAM2nE,SAEV3nE,EAAM2nE,QAAStlG,EAAKklG,EAAaC,GAMnCF,GAAY,GAIbn8G,KAAK08G,QAAU,SAAWxlG,GAEzBklG,SAE0Bz7G,IAArBk0C,EAAMonE,YAEVpnE,EAAMonE,WAAY/kG,EAAKklG,EAAaC,GAIhCD,IAAgBC,IAEpBF,GAAY,OAEUx7G,IAAjBk0C,EAAMmnE,QAEVnnE,EAAMmnE,WAQTh8G,KAAK28G,UAAY,SAAWzlG,QAEJvW,IAAlBk0C,EAAMqnE,SAEVrnE,EAAMqnE,QAAShlG,IAMjBlX,KAAK48G,WAAa,SAAW1lG,GAE5B,OAAKolG,EAEGA,EAAaplG,GAIdA,GAIRlX,KAAK68G,eAAiB,SAAWp1B,GAIhC,OAFA60B,EAAc70B,EAEPznF,MAIRA,KAAK88G,WAAa,SAAWC,EAAOC,GAInC,OAFAT,EAASp+G,KAAM4+G,EAAOC,GAEfh9G,MAIRA,KAAKi9G,cAAgB,SAAWF,GAE/B,MAAM5zG,EAAQozG,EAAS3yG,QAASmzG,GAQhC,OANiB,IAAZ5zG,GAEJozG,EAASxyG,OAAQZ,EAAO,GAIlBnJ,MAIRA,KAAKk9G,WAAa,SAAWpB,GAE5B,IAAM,IAAI3xG,EAAI,EAAGC,EAAImyG,EAASlzG,OAAQc,EAAIC,EAAGD,GAAK,EAAI,CAErD,MAAM4yG,EAAQR,EAAUpyG,GAClB6yG,EAAST,EAAUpyG,EAAI,GAI7B,GAFK4yG,EAAMI,SAASJ,EAAM57C,UAAY,GAEjC47C,EAAM11G,KAAMy0G,GAEhB,OAAOkB,EAMT,OAAO,MAMT,MAAMI,GAAwB,IAAIrB,GAElC,SAASsB,GAAQC,GAEhBt9G,KAAKs9G,aAAwB38G,IAAZ28G,EAA0BA,EAAUF,GAErDp9G,KAAKu9G,YAAc,YACnBv9G,KAAKihE,KAAO,GACZjhE,KAAKw9G,aAAe,GACpBx9G,KAAKy9G,cAAgB,GAItBz+G,OAAOuG,OAAQ83G,GAAO/7G,UAAW,CAEhCo8G,KAAM,aAENC,UAAW,SAAWzmG,EAAK+kG,GAE1B,MAAMpnE,EAAQ70C,KAEd,OAAO,IAAI6C,SAAS,SAAW+6G,EAASC,GAEvChpE,EAAM6oE,KAAMxmG,EAAK0mG,EAAS3B,EAAY4B,OAMxCx+G,MAAO,aAEPy+G,eAAgB,SAAWP,GAG1B,OADAv9G,KAAKu9G,YAAcA,EACZv9G,MAIR+9G,QAAS,SAAW98C,GAGnB,OADAjhE,KAAKihE,KAAOA,EACLjhE,MAIRg+G,gBAAiB,SAAWR,GAG3B,OADAx9G,KAAKw9G,aAAeA,EACbx9G,MAIRi+G,iBAAkB,SAAWR,GAG5B,OADAz9G,KAAKy9G,cAAgBA,EACdz9G,QAMT,MAAMk+G,GAAU,GAEhB,SAASC,GAAYb,GAEpBD,GAAO13G,KAAM3F,KAAMs9G,GAySpB,SAASc,GAAiBd,GAEzBD,GAAO13G,KAAM3F,KAAMs9G,GAiEpB,SAASe,GAAyBf,GAEjCD,GAAO13G,KAAM3F,KAAMs9G,GAuHpB,SAASgB,GAAahB,GAErBD,GAAO13G,KAAM3F,KAAMs9G,GAgFpB,SAASiB,GAAmBjB,GAE3BD,GAAO13G,KAAM3F,KAAMs9G,GAwDpB,SAASkB,GAAmBlB,GAE3BD,GAAO13G,KAAM3F,KAAMs9G,GAkFpB,SAASmB,GAAenB,GAEvBD,GAAO13G,KAAM3F,KAAMs9G,GAsEpB,SAASoB,KAER1+G,KAAKlB,KAAO,QAEZkB,KAAK2+G,mBAAqB,IA8X3B,SAASC,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpFV,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,eAEZkB,KAAK6+G,GAAKA,GAAM,EAChB7+G,KAAK8+G,GAAKA,GAAM,EAEhB9+G,KAAK++G,QAAUA,GAAW,EAC1B/+G,KAAKg/G,QAAUA,GAAW,EAE1Bh/G,KAAKi/G,YAAcA,GAAe,EAClCj/G,KAAKk/G,UAAYA,GAAa,EAAI7hH,KAAKoN,GAEvCzK,KAAKm/G,WAAaA,IAAc,EAEhCn/G,KAAKo/G,UAAYA,GAAa,EAuI/B,SAASC,GAAUR,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAE3DP,GAAaj5G,KAAM3F,KAAM6+G,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,GAE3En/G,KAAKlB,KAAO,WA6Bb,SAASygH,KAER,IAAIC,EAAK,EAAG7jG,EAAK,EAAGjO,EAAK,EAAGkO,EAAK,EAUjC,SAASm8C,EAAMr9C,EAAII,EAAImL,EAAIC,GAE1Bs5F,EAAK9kG,EACLiB,EAAKsK,EACLvY,GAAO,EAAIgN,EAAK,EAAII,EAAK,EAAImL,EAAKC,EAClCtK,EAAK,EAAIlB,EAAK,EAAII,EAAKmL,EAAKC,EAI7B,MAAO,CAENu5F,eAAgB,SAAW/kG,EAAII,EAAIwP,EAAIo1F,EAAIC,GAE1C5nD,EAAMj9C,EAAIwP,EAAIq1F,GAAYr1F,EAAK5P,GAAMilG,GAAYD,EAAK5kG,KAIvD8kG,yBAA0B,SAAWllG,EAAII,EAAIwP,EAAIo1F,EAAIG,EAAKC,EAAKC,GAG9D,IAAI75F,GAAOpL,EAAKJ,GAAOmlG,GAAQv1F,EAAK5P,IAASmlG,EAAMC,IAAUx1F,EAAKxP,GAAOglG,EACrEE,GAAO11F,EAAKxP,GAAOglG,GAAQJ,EAAK5kG,IAASglG,EAAMC,IAAUL,EAAKp1F,GAAOy1F,EAGzE75F,GAAM45F,EACNE,GAAMF,EAEN/nD,EAAMj9C,EAAIwP,EAAIpE,EAAI85F,IAInBC,KAAM,SAAWn0G,GAEhB,MAAMk0G,EAAKl0G,EAAIA,EAEf,OAAO0zG,EAAK7jG,EAAK7P,EAAI4B,EAAKsyG,EAAKpkG,GADpBokG,EAAKl0G,KAl3CnBqyG,GAAW78G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAExE4B,YAAai7G,GAEbT,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,QAE5Bv7G,IAARuW,IAAoBA,EAAM,SAEZvW,IAAdX,KAAKihE,OAAqB/pD,EAAMlX,KAAKihE,KAAO/pD,GAEjDA,EAAMlX,KAAKs9G,QAAQV,WAAY1lG,GAE/B,MAAM29B,EAAQ70C,KAERgiD,EAAS45D,GAAM55G,IAAKkV,GAE1B,QAAgBvW,IAAXqhD,EAYJ,OAVAnN,EAAMyoE,QAAQb,UAAWvlG,GAEzBgpG,YAAY,WAENlE,GAASA,EAAQh6D,GAEtBnN,EAAMyoE,QAAQZ,QAASxlG,KAErB,GAEI8qC,EAMR,QAAwBrhD,IAAnBu9G,GAAShnG,GAUb,YARAgnG,GAAShnG,GAAM/Y,KAAM,CAEpB69G,OAAQA,EACRC,WAAYA,EACZC,QAASA,IASX,MACMiE,EAAqBjpG,EAAInO,MADV,+BAErB,IAAIq3G,EAGJ,GAAKD,EAAqB,CAEzB,MAAME,EAAWF,EAAoB,GAC/BG,IAAcH,EAAoB,GAExC,IAAIjuF,EAAOiuF,EAAoB,GAC/BjuF,EAAOquF,mBAAoBruF,GAEtBouF,IAAWpuF,EAAOsuF,KAAMtuF,IAE7B,IAEC,IAAIuuF,EACJ,MAAMC,GAAiB1gH,KAAK0gH,cAAgB,IAAKl+G,cAEjD,OAASk+G,GAER,IAAK,cACL,IAAK,OAEJ,MAAM5kE,EAAO,IAAIrT,WAAYvW,EAAK7oB,QAElC,IAAM,IAAIc,EAAI,EAAGA,EAAI+nB,EAAK7oB,OAAQc,IAEjC2xC,EAAM3xC,GAAM+nB,EAAKyuF,WAAYx2G,GAM7Bs2G,EAFqB,SAAjBC,EAEO,IAAIE,KAAM,CAAE9kE,EAAK+F,QAAU,CAAE/iD,KAAMuhH,IAInCvkE,EAAK+F,OAIjB,MAED,IAAK,WAEJ,MAAMg/D,EAAS,IAAIC,UACnBL,EAAWI,EAAOE,gBAAiB7uF,EAAMmuF,GAEzC,MAED,IAAK,OAEJI,EAAWvhH,KAAKG,MAAO6yB,GAEvB,MAED,QAECuuF,EAAWvuF,EAObguF,YAAY,WAENlE,GAASA,EAAQyE,GAEtB5rE,EAAMyoE,QAAQZ,QAASxlG,KAErB,GAEF,MAAQlH,GAGTkwG,YAAY,WAENhE,GAAUA,EAASlsG,GAExB6kC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,KAErB,QAIE,CAINgnG,GAAShnG,GAAQ,GAEjBgnG,GAAShnG,GAAM/Y,KAAM,CAEpB69G,OAAQA,EACRC,WAAYA,EACZC,QAASA,IAIVkE,EAAU,IAAIY,eAEdZ,EAAQa,KAAM,MAAO/pG,GAAK,GAE1BkpG,EAAQpiH,iBAAkB,QAAQ,SAAWiM,GAE5C,MAAMw2G,EAAWzgH,KAAKygH,SAEhBS,EAAYhD,GAAShnG,GAI3B,UAFOgnG,GAAShnG,GAEK,MAAhBlX,KAAKsiE,QAAkC,IAAhBtiE,KAAKsiE,OAAe,CAK1B,IAAhBtiE,KAAKsiE,QAAehkE,QAAQC,KAAM,6CAIvCq9G,GAAM36F,IAAK/J,EAAKupG,GAEhB,IAAM,IAAIt2G,EAAI,EAAG0W,EAAKqgG,EAAU73G,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAAMoT,EAAW2jG,EAAW/2G,GACvBoT,EAASy+F,QAASz+F,EAASy+F,OAAQyE,GAIzC5rE,EAAMyoE,QAAQZ,QAASxlG,OAEjB,CAEN,IAAM,IAAI/M,EAAI,EAAG0W,EAAKqgG,EAAU73G,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAAMoT,EAAW2jG,EAAW/2G,GACvBoT,EAAS2+F,SAAU3+F,EAAS2+F,QAASjyG,GAI3C4qC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,OAItB,GAEHkpG,EAAQpiH,iBAAkB,YAAY,SAAWiM,GAEhD,MAAMi3G,EAAYhD,GAAShnG,GAE3B,IAAM,IAAI/M,EAAI,EAAG0W,EAAKqgG,EAAU73G,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAAMoT,EAAW2jG,EAAW/2G,GACvBoT,EAAS0+F,YAAa1+F,EAAS0+F,WAAYhyG,OAI/C,GAEHm2G,EAAQpiH,iBAAkB,SAAS,SAAWiM,GAE7C,MAAMi3G,EAAYhD,GAAShnG,UAEpBgnG,GAAShnG,GAEhB,IAAM,IAAI/M,EAAI,EAAG0W,EAAKqgG,EAAU73G,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAAMoT,EAAW2jG,EAAW/2G,GACvBoT,EAAS2+F,SAAU3+F,EAAS2+F,QAASjyG,GAI3C4qC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,MAErB,GAEHkpG,EAAQpiH,iBAAkB,SAAS,SAAWiM,GAE7C,MAAMi3G,EAAYhD,GAAShnG,UAEpBgnG,GAAShnG,GAEhB,IAAM,IAAI/M,EAAI,EAAG0W,EAAKqgG,EAAU73G,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD,MAAMoT,EAAW2jG,EAAW/2G,GACvBoT,EAAS2+F,SAAU3+F,EAAS2+F,QAASjyG,GAI3C4qC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,MAErB,QAEwBvW,IAAtBX,KAAK0gH,eAA6BN,EAAQM,aAAe1gH,KAAK0gH,mBACrC//G,IAAzBX,KAAKmhH,kBAAgCf,EAAQe,gBAAkBnhH,KAAKmhH,iBAEpEf,EAAQgB,kBAAmBhB,EAAQgB,sBAAoCzgH,IAAlBX,KAAKqgH,SAAyBrgH,KAAKqgH,SAAW,cAExG,IAAM,MAAMgB,KAAUrhH,KAAKy9G,cAE1B2C,EAAQnC,iBAAkBoD,EAAQrhH,KAAKy9G,cAAe4D,IAIvDjB,EAAQkB,KAAM,MAMf,OAFAzsE,EAAMyoE,QAAQb,UAAWvlG,GAElBkpG,GAIRmB,gBAAiB,SAAW1iH,GAG3B,OADAmB,KAAK0gH,aAAe7hH,EACbmB,MAIRwhH,mBAAoB,SAAW3iH,GAG9B,OADAmB,KAAKmhH,gBAAkBtiH,EAChBmB,MAIRyhH,YAAa,SAAW5iH,GAGvB,OADAmB,KAAKqgH,SAAWxhH,EACTmB,QAYTo+G,GAAgB98G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE7E4B,YAAak7G,GAEbV,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERg9G,EAAS,IAAImB,GAAYtpE,EAAMyoE,SACrCN,EAAOe,QAASlpE,EAAMosB,MACtB+7C,EAAOiB,iBAAkBppE,EAAM4oE,eAC/BT,EAAOU,KAAMxmG,GAAK,SAAW4zF,GAE5B,IAECkR,EAAQnnE,EAAMx1C,MAAOH,KAAKG,MAAOyrG,KAEhC,MAAQxmG,GAEJ43G,EAEJA,EAAS53G,GAIThG,QAAQ0R,MAAO1L,GAIhBuwC,EAAMyoE,QAAQX,UAAWzlG,MAIxB+kG,EAAYC,IAIhB78G,MAAO,SAAW02G,GAEjB,MAAMyE,EAAa,GAEnB,IAAM,IAAIrwG,EAAI,EAAGA,EAAI4rG,EAAK1sG,OAAQc,IAAO,CAExC,MAAM6nG,EAAO4D,GAAcv2G,MAAO02G,EAAM5rG,IAExCqwG,EAAWr8G,KAAM6zG,GAIlB,OAAOwI,KAkBT6D,GAAwB/8G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAErF4B,YAAam7G,GAEbX,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERiX,EAAS,GAETiC,EAAU,IAAIwiF,GACpBxiF,EAAQhF,MAAQ+C,EAEhB,MAAM+lG,EAAS,IAAImB,GAAYn+G,KAAKs9G,SACpCN,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOuE,gBAAiB,eACxBvE,EAAOiB,iBAAkBj+G,KAAKy9G,eAE9B,IAAIiE,EAAS,EAEb,SAASC,EAAax3G,GAErB6yG,EAAOU,KAAMxmG,EAAK/M,IAAK,SAAW03C,GAEjC,MAAM+/D,EAAW/sE,EAAMx1C,MAAOwiD,GAAQ,GAEtC5qC,EAAQ9M,GAAM,CACbgE,MAAOyzG,EAASzzG,MAChBC,OAAQwzG,EAASxzG,OACjBgH,OAAQwsG,EAASxsG,OACjBK,QAASmsG,EAASnsG,SAGnBisG,GAAU,EAEM,IAAXA,IAE0B,IAAzBE,EAASC,cACb3oG,EAAQ/D,UA9rnCO,MAgsnChB+D,EAAQ9D,OAASwsG,EAASxsG,OAC1B8D,EAAQ80B,aAAc,EAEjBguE,GAASA,EAAQ9iG,MAIrB+iG,EAAYC,GAIhB,GAAKj9G,MAAMkY,QAASD,GAEnB,IAAM,IAAI/M,EAAI,EAAG0W,EAAK3J,EAAI7N,OAAQc,EAAI0W,IAAO1W,EAE5Cw3G,EAAax3G,QAQd6yG,EAAOU,KAAMxmG,GAAK,SAAW2qC,GAE5B,MAAM+/D,EAAW/sE,EAAMx1C,MAAOwiD,GAAQ,GAEtC,GAAK+/D,EAASE,UAAY,CAEzB,MAAMh2E,EAAQ81E,EAASnsG,QAAQpM,OAASu4G,EAASC,YAEjD,IAAM,IAAItvG,EAAI,EAAGA,EAAIu5B,EAAOv5B,IAAO,CAElC0E,EAAQ1E,GAAM,CAAEkD,QAAS,IAEzB,IAAM,IAAItL,EAAI,EAAGA,EAAIy3G,EAASC,YAAa13G,IAE1C8M,EAAQ1E,GAAIkD,QAAQtX,KAAMyjH,EAASnsG,QAASlD,EAAIqvG,EAASC,YAAc13G,IACvE8M,EAAQ1E,GAAI6C,OAASwsG,EAASxsG,OAC9B6B,EAAQ1E,GAAIpE,MAAQyzG,EAASzzG,MAC7B8I,EAAQ1E,GAAInE,OAASwzG,EAASxzG,aAQhC8K,EAAQhF,MAAM/F,MAAQyzG,EAASzzG,MAC/B+K,EAAQhF,MAAM9F,OAASwzG,EAASxzG,OAChC8K,EAAQzD,QAAUmsG,EAASnsG,QAIE,IAAzBmsG,EAASC,cAEb3oG,EAAQ/D,UAxvnCQ,MA4vnCjB+D,EAAQ9D,OAASwsG,EAASxsG,OAC1B8D,EAAQ80B,aAAc,EAEjBguE,GAASA,EAAQ9iG,KAEpB+iG,EAAYC,GAIhB,OAAOhjG,KAYTolG,GAAYh9G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAEzE4B,YAAao7G,GAEbZ,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,QAEtBv7G,IAAdX,KAAKihE,OAAqB/pD,EAAMlX,KAAKihE,KAAO/pD,GAEjDA,EAAMlX,KAAKs9G,QAAQV,WAAY1lG,GAE/B,MAAM29B,EAAQ70C,KAERgiD,EAAS45D,GAAM55G,IAAKkV,GAE1B,QAAgBvW,IAAXqhD,EAYJ,OAVAnN,EAAMyoE,QAAQb,UAAWvlG,GAEzBgpG,YAAY,WAENlE,GAASA,EAAQh6D,GAEtBnN,EAAMyoE,QAAQZ,QAASxlG,KAErB,GAEI8qC,EAIR,MAAM9tC,EAAQrM,SAASyM,gBAAiB,+BAAgC,OAExE,SAASytG,IAER7tG,EAAMjW,oBAAqB,OAAQ8jH,GAAa,GAChD7tG,EAAMjW,oBAAqB,QAAS+jH,GAAc,GAElDpG,GAAM36F,IAAK/J,EAAKlX,MAEXg8G,GAASA,EAAQh8G,MAEtB60C,EAAMyoE,QAAQZ,QAASxlG,GAIxB,SAAS8qG,EAAc/3G,GAEtBiK,EAAMjW,oBAAqB,OAAQ8jH,GAAa,GAChD7tG,EAAMjW,oBAAqB,QAAS+jH,GAAc,GAE7C9F,GAAUA,EAASjyG,GAExB4qC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,GAiBxB,OAbAhD,EAAMlW,iBAAkB,OAAQ+jH,GAAa,GAC7C7tG,EAAMlW,iBAAkB,QAASgkH,GAAc,GAEnB,UAAvB9qG,EAAI5P,OAAQ,EAAG,SAEO3G,IAArBX,KAAKu9G,cAA4BrpG,EAAMqpG,YAAcv9G,KAAKu9G,aAIhE1oE,EAAMyoE,QAAQb,UAAWvlG,GAEzBhD,EAAMC,IAAM+C,EAELhD,KAYTqqG,GAAkBj9G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE/E4B,YAAaq7G,GAEbb,KAAM,SAAWuE,EAAMjG,EAAQC,EAAYC,GAE1C,MAAMhjG,EAAU,IAAIoiD,GAEd0hD,EAAS,IAAIsB,GAAat+G,KAAKs9G,SACrCN,EAAOc,eAAgB99G,KAAKu9G,aAC5BP,EAAOe,QAAS/9G,KAAKihE,MAErB,IAAIygD,EAAS,EAEb,SAASC,EAAax3G,GAErB6yG,EAAOU,KAAMuE,EAAM93G,IAAK,SAAW+J,GAElCgF,EAAQjC,OAAQ9M,GAAM+J,EAEtBwtG,IAEgB,IAAXA,IAEJxoG,EAAQ80B,aAAc,EAEjBguE,GAASA,EAAQ9iG,WAIrBvY,EAAWu7G,GAIf,IAAM,IAAI/xG,EAAI,EAAGA,EAAI83G,EAAK54G,SAAWc,EAEpCw3G,EAAax3G,GAId,OAAO+O,KAkBTslG,GAAkBl9G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE/E4B,YAAas7G,GAEbd,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERkZ,EAAU,IAAIulC,GAEdu+D,EAAS,IAAImB,GAAYn+G,KAAKs9G,SA8DpC,OA7DAN,EAAOuE,gBAAiB,eACxBvE,EAAOiB,iBAAkBj+G,KAAKy9G,eAC9BT,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOU,KAAMxmG,GAAK,SAAW2qC,GAE5B,MAAMqgE,EAAUrtE,EAAMx1C,MAAOwiD,GAEtBqgE,SAEgBvhH,IAAlBuhH,EAAQhuG,MAEZgF,EAAQhF,MAAQguG,EAAQhuG,WAEIvT,IAAjBuhH,EAAQhwF,OAEnBhZ,EAAQhF,MAAM/F,MAAQ+zG,EAAQ/zG,MAC9B+K,EAAQhF,MAAM9F,OAAS8zG,EAAQ9zG,OAC/B8K,EAAQhF,MAAMge,KAAOgwF,EAAQhwF,MAI9BhZ,EAAQlE,WAA0BrU,IAAlBuhH,EAAQltG,MAAsBktG,EAAQltG,MAl8nC7B,KAm8nCzBkE,EAAQjE,WAA0BtU,IAAlBuhH,EAAQjtG,MAAsBitG,EAAQjtG,MAn8nC7B,KAq8nCzBiE,EAAQhE,eAAkCvU,IAAtBuhH,EAAQhtG,UAA0BgtG,EAAQhtG,UAh8nC5C,KAi8nClBgE,EAAQ/D,eAAkCxU,IAAtBuhH,EAAQ/sG,UAA0B+sG,EAAQ/sG,UAj8nC5C,KAm8nClB+D,EAAQ7D,gBAAoC1U,IAAvBuhH,EAAQ7sG,WAA2B6sG,EAAQ7sG,WAAa,OAErD1U,IAAnBuhH,EAAQ9sG,SAEZ8D,EAAQ9D,OAAS8sG,EAAQ9sG,aAIJzU,IAAjBuhH,EAAQpjH,OAEZoa,EAAQpa,KAAOojH,EAAQpjH,WAIC6B,IAApBuhH,EAAQzsG,UAEZyD,EAAQzD,QAAUysG,EAAQzsG,QAC1ByD,EAAQ/D,UAl9nCqB,MAs9nCD,IAAxB+sG,EAAQL,cAEZ3oG,EAAQ/D,UA19nCS,MA89nClB+D,EAAQ80B,aAAc,EAEjBguE,GAASA,EAAQ9iG,EAASgpG,MAE7BjG,EAAYC,GAGRhjG,KAYTulG,GAAcn9G,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE3E4B,YAAau7G,GAEbf,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMhjG,EAAU,IAAIpE,EAEdkoG,EAAS,IAAIsB,GAAat+G,KAAKs9G,SAsBrC,OArBAN,EAAOc,eAAgB99G,KAAKu9G,aAC5BP,EAAOe,QAAS/9G,KAAKihE,MAErB+7C,EAAOU,KAAMxmG,GAAK,SAAWhD,GAE5BgF,EAAQhF,MAAQA,EAGhB,MAAMiuG,EAASjrG,EAAIkrG,OAAQ,kBAAqB,GAA4C,IAAvClrG,EAAIkrG,OAAQ,sBAEjElpG,EAAQ9D,OAAS+sG,EAp/nCF,KACC,KAo/nChBjpG,EAAQ80B,aAAc,OAENrtC,IAAXq7G,GAEJA,EAAQ9iG,KAIP+iG,EAAYC,GAERhjG,KA4CTla,OAAOuG,OAAQm5G,GAAMp9G,UAAW,CAK/B+gH,SAAU,WAGT,OADA/jH,QAAQC,KAAM,6CACP,MAORsgG,WAAY,SAAWnqE,EAAG4tF,GAEzB,MAAMx2G,EAAI9L,KAAKuiH,eAAgB7tF,GAC/B,OAAO10B,KAAKqiH,SAAUv2G,EAAGw2G,IAM1BE,UAAW,SAAWC,QAEF9hH,IAAd8hH,IAA0BA,EAAY,GAE3C,MAAM9hG,EAAS,GAEf,IAAM,IAAIrO,EAAI,EAAGA,GAAKmwG,EAAWnwG,IAEhCqO,EAAOxiB,KAAM6B,KAAKqiH,SAAU/vG,EAAImwG,IAIjC,OAAO9hG,GAMR4lF,gBAAiB,SAAWkc,QAER9hH,IAAd8hH,IAA0BA,EAAY,GAE3C,MAAM9hG,EAAS,GAEf,IAAM,IAAIrO,EAAI,EAAGA,GAAKmwG,EAAWnwG,IAEhCqO,EAAOxiB,KAAM6B,KAAK6+F,WAAYvsF,EAAImwG,IAInC,OAAO9hG,GAMR+hG,UAAW,WAEV,MAAMC,EAAU3iH,KAAK4iH,aACrB,OAAOD,EAASA,EAAQt5G,OAAS,IAMlCu5G,WAAY,SAAWH,GAItB,QAFmB9hH,IAAd8hH,IAA0BA,EAAYziH,KAAK2+G,oBAE3C3+G,KAAK6iH,iBACP7iH,KAAK6iH,gBAAgBx5G,SAAWo5G,EAAY,IAC5CziH,KAAKguC,YAEP,OAAOhuC,KAAK6iH,gBAIb7iH,KAAKguC,aAAc,EAEnB,MAAMhc,EAAQ,GACd,IAAI8wF,EAAS9hB,EAAOhhG,KAAKqiH,SAAU,GAC/BphB,EAAM,EAEVjvE,EAAM7zB,KAAM,GAEZ,IAAM,IAAIqC,EAAI,EAAGA,GAAKiiH,EAAWjiH,IAEhCsiH,EAAU9iH,KAAKqiH,SAAU7hH,EAAIiiH,GAC7BxhB,GAAO6hB,EAAQ9+F,WAAYg9E,GAC3BhvE,EAAM7zB,KAAM8iG,GACZD,EAAO8hB,EAMR,OAFA9iH,KAAK6iH,gBAAkB7wF,EAEhBA,GAIR+wF,iBAAkB,WAEjB/iH,KAAKguC,aAAc,EACnBhuC,KAAK4iH,cAMNL,eAAgB,SAAW7tF,EAAGxF,GAE7B,MAAM8zF,EAAahjH,KAAK4iH,aAExB,IAAIz4G,EAAI,EACR,MAAM0W,EAAKmiG,EAAW35G,OAEtB,IAAI45G,EAIHA,EAFI/zF,GAMcwF,EAAIsuF,EAAYniG,EAAK,GAMxC,IAA4BqiG,EAAxBh3G,EAAM,EAAGC,EAAO0U,EAAK,EAEzB,KAAQ3U,GAAOC,GAMd,GAJAhC,EAAI9M,KAAKqL,MAAOwD,GAAQC,EAAOD,GAAQ,GAEvCg3G,EAAaF,EAAY74G,GAAM84G,EAE1BC,EAAa,EAEjBh3G,EAAM/B,EAAI,MAEJ,CAAA,KAAK+4G,EAAa,GAIlB,CAEN/2G,EAAOhC,EACP,MALAgC,EAAOhC,EAAI,EAeb,GAFAA,EAAIgC,EAEC62G,EAAY74G,KAAQ84G,EAExB,OAAO94G,GAAM0W,EAAK,GAMnB,MAAMsiG,EAAeH,EAAY74G,GAajC,OAFYA,GAJc84G,EAAkBE,IANxBH,EAAY74G,EAAI,GAEAg5G,KAQEtiG,EAAK,IAW5CuiG,WAAY,SAAWt3G,EAAGw2G,GAEzB,MAAMzvF,EAAQ,KACd,IAAI3M,EAAKpa,EAAI+mB,EACTmtF,EAAKl0G,EAAI+mB,EAIR3M,EAAK,IAAIA,EAAK,GACd85F,EAAK,IAAIA,EAAK,GAEnB,MAAMqD,EAAMrjH,KAAKqiH,SAAUn8F,GACrBo9F,EAAMtjH,KAAKqiH,SAAUrC,GAErB/xE,EAAUq0E,IAAsBe,YAAkB,IAAIn1G,EAAY,IAAIsP,GAI5E,OAFAywB,EAAQx3B,KAAM6sG,GAAM9jG,IAAK6jG,GAAM/zG,YAExB2+B,GAIRs1E,aAAc,SAAW7uF,EAAG4tF,GAE3B,MAAMx2G,EAAI9L,KAAKuiH,eAAgB7tF,GAC/B,OAAO10B,KAAKojH,WAAYt3G,EAAGw2G,IAI5B9jB,oBAAqB,SAAW4N,EAAU9N,GAIzC,MAAM7+E,EAAS,IAAIjC,EAEbihF,EAAW,GACXxzD,EAAU,GACVyzD,EAAY,GAEZsI,EAAM,IAAIxpF,EACVgmG,EAAM,IAAIl8F,GAIhB,IAAM,IAAInd,EAAI,EAAGA,GAAKiiG,EAAUjiG,IAAO,CAEtC,MAAMuqB,EAAIvqB,EAAIiiG,EAEd3N,EAAUt0F,GAAMnK,KAAKujH,aAAc7uF,EAAG,IAAIlX,GAC1CihF,EAAUt0F,GAAImF,YAOf27B,EAAS,GAAM,IAAIztB,EACnBkhF,EAAW,GAAM,IAAIlhF,EACrB,IAAItS,EAAM9L,OAAOqkH,UACjB,MAAMlwG,EAAKlW,KAAK4R,IAAKwvF,EAAU,GAAI71F,GAC7B4K,EAAKnW,KAAK4R,IAAKwvF,EAAU,GAAI5yF,GAC7B63G,EAAKrmH,KAAK4R,IAAKwvF,EAAU,GAAIhnF,GAE9BlE,GAAMrI,IAEVA,EAAMqI,EACNkM,EAAO5e,IAAK,EAAG,EAAG,IAId2S,GAAMtI,IAEVA,EAAMsI,EACNiM,EAAO5e,IAAK,EAAG,EAAG,IAId6iH,GAAMx4G,GAEVuU,EAAO5e,IAAK,EAAG,EAAG,GAInBmmG,EAAIpoF,aAAc6/E,EAAU,GAAKh/E,GAASnQ,YAE1C27B,EAAS,GAAIrsB,aAAc6/E,EAAU,GAAKuI,GAC1CtI,EAAW,GAAI9/E,aAAc6/E,EAAU,GAAKxzD,EAAS,IAKrD,IAAM,IAAI9gC,EAAI,EAAGA,GAAKiiG,EAAUjiG,IAAO,CAQtC,GANA8gC,EAAS9gC,GAAM8gC,EAAS9gC,EAAI,GAAIqM,QAEhCkoF,EAAWv0F,GAAMu0F,EAAWv0F,EAAI,GAAIqM,QAEpCwwF,EAAIpoF,aAAc6/E,EAAUt0F,EAAI,GAAKs0F,EAAUt0F,IAE1C68F,EAAI39F,SAAWjK,OAAOkJ,QAAU,CAEpC0+F,EAAI13F,YAEJ,MAAMwE,EAAQzW,KAAKqa,KAAMnN,EAAUU,MAAOwzF,EAAUt0F,EAAI,GAAIiS,IAAKqiF,EAAUt0F,KAAS,EAAG,IAEvF8gC,EAAS9gC,GAAIoU,aAAcilG,EAAIG,iBAAkB3c,EAAKlzF,IAIvD4qF,EAAWv0F,GAAIyU,aAAc6/E,EAAUt0F,GAAK8gC,EAAS9gC,IAMtD,IAAgB,IAAXm0F,EAAkB,CAEtB,IAAIxqF,EAAQzW,KAAKqa,KAAMnN,EAAUU,MAAOggC,EAAS,GAAI7uB,IAAK6uB,EAASmhE,KAAgB,EAAG,IACtFt4F,GAASs4F,EAEJ3N,EAAU,GAAIriF,IAAK4qF,EAAIpoF,aAAcqsB,EAAS,GAAKA,EAASmhE,KAAiB,IAEjFt4F,GAAUA,GAIX,IAAM,IAAI3J,EAAI,EAAGA,GAAKiiG,EAAUjiG,IAG/B8gC,EAAS9gC,GAAIoU,aAAcilG,EAAIG,iBAAkBllB,EAAUt0F,GAAK2J,EAAQ3J,IACxEu0F,EAAWv0F,GAAIyU,aAAc6/E,EAAUt0F,GAAK8gC,EAAS9gC,IAMvD,MAAO,CACNs0F,SAAUA,EACVxzD,QAASA,EACTyzD,UAAWA,IAKbloF,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrCyW,KAAM,SAAWnN,GAIhB,OAFAtJ,KAAK2+G,mBAAqBr1G,EAAOq1G,mBAE1B3+G,MAIR0W,OAAQ,WAEP,MAAMwb,EAAO,CACZpb,SAAU,CACTZ,QAAS,IACTpX,KAAM,QACNiY,UAAW,iBAOb,OAHAmb,EAAKysF,mBAAqB3+G,KAAK2+G,mBAC/BzsF,EAAKpzB,KAAOkB,KAAKlB,KAEVozB,GAIR0xF,SAAU,SAAW7N,GAIpB,OAFA/1G,KAAK2+G,mBAAqB5I,EAAK4I,mBAExB3+G,QA2BT4+G,GAAat9G,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAC9Cs9G,GAAat9G,UAAU4B,YAAc07G,GAErCA,GAAat9G,UAAUuiH,gBAAiB,EAExCjF,GAAat9G,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAE/C,MAAMhhG,EAAQghG,GAAkB,IAAIp0G,EAE9B41G,EAAkB,EAAVzmH,KAAKoN,GACnB,IAAIs5G,EAAa/jH,KAAKk/G,UAAYl/G,KAAKi/G,YACvC,MAAM+E,EAAa3mH,KAAK4R,IAAK80G,GAAe3kH,OAAOkJ,QAGnD,KAAQy7G,EAAa,GAAIA,GAAcD,EACvC,KAAQC,EAAaD,GAAQC,GAAcD,EAEtCC,EAAa3kH,OAAOkJ,UAIvBy7G,EAFIC,EAES,EAIAF,IAMU,IAApB9jH,KAAKm/G,YAAyB6E,IAE7BD,IAAeD,EAEnBC,GAAeD,EAIfC,GAA0BD,GAM5B,MAAMh0G,EAAQ9P,KAAKi/G,YAAcnzG,EAAIi4G,EACrC,IAAIn7G,EAAI5I,KAAK6+G,GAAK7+G,KAAK++G,QAAU1hH,KAAKmQ,IAAKsC,GACvCjE,EAAI7L,KAAK8+G,GAAK9+G,KAAKg/G,QAAU3hH,KAAKoQ,IAAKqC,GAE3C,GAAwB,IAAnB9P,KAAKo/G,UAAkB,CAE3B,MAAM5xG,EAAMnQ,KAAKmQ,IAAKxN,KAAKo/G,WACrB3xG,EAAMpQ,KAAKoQ,IAAKzN,KAAKo/G,WAErB7rG,EAAK3K,EAAI5I,KAAK6+G,GACdrrG,EAAK3H,EAAI7L,KAAK8+G,GAGpBl2G,EAAI2K,EAAK/F,EAAMgG,EAAK/F,EAAMzN,KAAK6+G,GAC/BhzG,EAAI0H,EAAK9F,EAAM+F,EAAKhG,EAAMxN,KAAK8+G,GAIhC,OAAOx9F,EAAMzgB,IAAK+H,EAAGiD,IAItB+yG,GAAat9G,UAAUmV,KAAO,SAAWnN,GAiBxC,OAfAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAK6+G,GAAKv1G,EAAOu1G,GACjB7+G,KAAK8+G,GAAKx1G,EAAOw1G,GAEjB9+G,KAAK++G,QAAUz1G,EAAOy1G,QACtB/+G,KAAKg/G,QAAU11G,EAAO01G,QAEtBh/G,KAAKi/G,YAAc31G,EAAO21G,YAC1Bj/G,KAAKk/G,UAAY51G,EAAO41G,UAExBl/G,KAAKm/G,WAAa71G,EAAO61G,WAEzBn/G,KAAKo/G,UAAY91G,EAAO81G,UAEjBp/G,MAKR4+G,GAAat9G,UAAUoV,OAAS,WAE/B,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAe1C,OAbAkyB,EAAK2sF,GAAK7+G,KAAK6+G,GACf3sF,EAAK4sF,GAAK9+G,KAAK8+G,GAEf5sF,EAAK6sF,QAAU/+G,KAAK++G,QACpB7sF,EAAK8sF,QAAUh/G,KAAKg/G,QAEpB9sF,EAAK+sF,YAAcj/G,KAAKi/G,YACxB/sF,EAAKgtF,UAAYl/G,KAAKk/G,UAEtBhtF,EAAKitF,WAAan/G,KAAKm/G,WAEvBjtF,EAAKktF,UAAYp/G,KAAKo/G,UAEfltF,GAIR0sF,GAAat9G,UAAUsiH,SAAW,SAAW7N,GAiB5C,OAfA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAK6+G,GAAK9I,EAAK8I,GACf7+G,KAAK8+G,GAAK/I,EAAK+I,GAEf9+G,KAAK++G,QAAUhJ,EAAKgJ,QACpB/+G,KAAKg/G,QAAUjJ,EAAKiJ,QAEpBh/G,KAAKi/G,YAAclJ,EAAKkJ,YACxBj/G,KAAKk/G,UAAYnJ,EAAKmJ,UAEtBl/G,KAAKm/G,WAAapJ,EAAKoJ,WAEvBn/G,KAAKo/G,UAAYrJ,EAAKqJ,UAEfp/G,MAYRq/G,GAAS/9G,UAAYtC,OAAOoX,OAAQwoG,GAAat9G,WACjD+9G,GAAS/9G,UAAU4B,YAAcm8G,GAEjCA,GAAS/9G,UAAU2iH,YAAa,EA+EhC,MAAMhxG,GAAM,IAAIuK,EACVgmF,GAAK,IAAI+b,GAAa9b,GAAK,IAAI8b,GAAa2E,GAAK,IAAI3E,GAE3D,SAAS4E,GAAkBxjG,EAAQ29E,EAAQ8lB,EAAWzE,GAErDjB,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,mBAEZkB,KAAK2gB,OAASA,GAAU,GACxB3gB,KAAKs+F,OAASA,IAAU,EACxBt+F,KAAKokH,UAAYA,GAAa,cAC9BpkH,KAAK2/G,aAAwBh/G,IAAZg/G,EAA0BA,EAAU,GAoKtD,SAAS0E,GAAYv4G,EAAG2X,EAAIC,EAAIC,EAAIiR,GAEnC,MAAMvR,EAAmB,IAAZM,EAAKF,GACZjU,EAAmB,IAAZolB,EAAKlR,GACZs8F,EAAKl0G,EAAIA,EAEf,OAAS,EAAI4X,EAAK,EAAIC,EAAKN,EAAK7T,IADrB1D,EAAIk0G,KACiC,EAAIt8F,EAAK,EAAIC,EAAK,EAAIN,EAAK7T,GAAOwwG,EAAK38F,EAAKvX,EAAI4X,EAyBjG,SAAS4gG,GAAiBx4G,EAAG2X,EAAIC,EAAIC,GAEpC,OArBD,SAA4B7X,EAAGtL,GAE9B,MAAMU,EAAI,EAAI4K,EACd,OAAO5K,EAAIA,EAAIV,EAkBR+jH,CAAmBz4G,EAAG2X,GAd9B,SAA4B3X,EAAGtL,GAE9B,OAAO,GAAM,EAAIsL,GAAMA,EAAItL,EAYSgkH,CAAmB14G,EAAG4X,GAR3D,SAA4B5X,EAAGtL,GAE9B,OAAOsL,EAAIA,EAAItL,EAOdikH,CAAmB34G,EAAG6X,GAgCxB,SAAS+gG,GAAa54G,EAAG2X,EAAIC,EAAIC,EAAIiR,GAEpC,OA5BD,SAAwB9oB,EAAGtL,GAE1B,MAAMU,EAAI,EAAI4K,EACd,OAAO5K,EAAIA,EAAIA,EAAIV,EAyBZmkH,CAAe74G,EAAG2X,GArB1B,SAAwB3X,EAAGtL,GAE1B,MAAMU,EAAI,EAAI4K,EACd,OAAO,EAAI5K,EAAIA,EAAI4K,EAAItL,EAkBSokH,CAAe94G,EAAG4X,GAdnD,SAAwB5X,EAAGtL,GAE1B,OAAO,GAAM,EAAIsL,GAAMA,EAAIA,EAAItL,EAY0BqkH,CAAe/4G,EAAG6X,GAR5E,SAAwB7X,EAAGtL,GAE1B,OAAOsL,EAAIA,EAAIA,EAAItL,EAOlBskH,CAAeh5G,EAAG8oB,GAIpB,SAASmwF,GAAkB1hG,EAAI7T,EAAIC,EAAIu1G,GAEtCtG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,mBAEZkB,KAAKqjB,GAAKA,GAAM,IAAInV,EACpBlO,KAAKwP,GAAKA,GAAM,IAAItB,EACpBlO,KAAKyP,GAAKA,GAAM,IAAIvB,EACpBlO,KAAKglH,GAAKA,GAAM,IAAI92G,EA+DrB,SAAS+2G,GAAmB5hG,EAAI7T,EAAIC,EAAIu1G,GAEvCtG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,oBAEZkB,KAAKqjB,GAAKA,GAAM,IAAI7F,EACpBxd,KAAKwP,GAAKA,GAAM,IAAIgO,EACpBxd,KAAKyP,GAAKA,GAAM,IAAI+N,EACpBxd,KAAKglH,GAAKA,GAAM,IAAIxnG,EAgErB,SAAS0nG,GAAW11G,EAAIC,GAEvBivG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,YAEZkB,KAAKwP,GAAKA,GAAM,IAAItB,EACpBlO,KAAKyP,GAAKA,GAAM,IAAIvB,EA+ErB,SAASi3G,GAAY31G,EAAIC,GAExBivG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,aAEZkB,KAAKwP,GAAKA,GAAM,IAAIgO,EACpBxd,KAAKyP,GAAKA,GAAM,IAAI+N,EAqErB,SAAS4nG,GAAsB/hG,EAAI7T,EAAIC,GAEtCivG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,uBAEZkB,KAAKqjB,GAAKA,GAAM,IAAInV,EACpBlO,KAAKwP,GAAKA,GAAM,IAAItB,EACpBlO,KAAKyP,GAAKA,GAAM,IAAIvB,EA4DrB,SAASm3G,GAAuBhiG,EAAI7T,EAAIC,GAEvCivG,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,wBAEZkB,KAAKqjB,GAAKA,GAAM,IAAI7F,EACpBxd,KAAKwP,GAAKA,GAAM,IAAIgO,EACpBxd,KAAKyP,GAAKA,GAAM,IAAI+N,EA6DrB,SAAS8nG,GAAa3kG,GAErB+9F,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,cAEZkB,KAAK2gB,OAASA,GAAU,GA3qBzBwjG,GAAiB7iH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAClD6iH,GAAiB7iH,UAAU4B,YAAcihH,GAEzCA,GAAiB7iH,UAAUikH,oBAAqB,EAEhDpB,GAAiB7iH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAEnD,MAAMhhG,EAAQghG,GAAkB,IAAI9kG,EAE9BmD,EAAS3gB,KAAK2gB,OACdvW,EAAIuW,EAAOtX,OAEX7I,GAAM4J,GAAMpK,KAAKs+F,OAAS,EAAI,IAAQxyF,EAC5C,IAcI2X,EAAImR,EAdJ4wF,EAAWnoH,KAAKqL,MAAOlI,GACvBy3F,EAASz3F,EAAIglH,EAEZxlH,KAAKs+F,OAETknB,GAAYA,EAAW,EAAI,GAAMnoH,KAAKqL,MAAOrL,KAAK4R,IAAKu2G,GAAap7G,GAAM,GAAMA,EAE1D,IAAX6tF,GAAgButB,IAAap7G,EAAI,IAE5Co7G,EAAWp7G,EAAI,EACf6tF,EAAS,GAMLj4F,KAAKs+F,QAAUknB,EAAW,EAE9B/hG,EAAK9C,GAAU6kG,EAAW,GAAMp7G,IAKhC6I,GAAIxE,WAAYkS,EAAQ,GAAKA,EAAQ,IAAMM,IAAKN,EAAQ,IACxD8C,EAAKxQ,IAIN,MAAMyQ,EAAK/C,EAAQ6kG,EAAWp7G,GACxBuZ,EAAKhD,GAAU6kG,EAAW,GAAMp7G,GActC,GAZKpK,KAAKs+F,QAAUknB,EAAW,EAAIp7G,EAElCwqB,EAAKjU,GAAU6kG,EAAW,GAAMp7G,IAKhC6I,GAAIxE,WAAYkS,EAAQvW,EAAI,GAAKuW,EAAQvW,EAAI,IAAM6W,IAAKN,EAAQvW,EAAI,IACpEwqB,EAAK3hB,IAIkB,gBAAnBjT,KAAKokH,WAAkD,YAAnBpkH,KAAKokH,UAA0B,CAGvE,MAAM77G,EAAyB,YAAnBvI,KAAKokH,UAA0B,GAAM,IACjD,IAAIvE,EAAMxiH,KAAKkL,IAAKkb,EAAGtU,kBAAmBuU,GAAMnb,GAC5Cu3G,EAAMziH,KAAKkL,IAAKmb,EAAGvU,kBAAmBwU,GAAMpb,GAC5Cw3G,EAAM1iH,KAAKkL,IAAKob,EAAGxU,kBAAmBylB,GAAMrsB,GAG3Cu3G,EAAM,OAAOA,EAAM,GACnBD,EAAM,OAAOA,EAAMC,GACnBC,EAAM,OAAOA,EAAMD,GAExBtc,GAAGoc,yBAA0Bn8F,EAAG7a,EAAG8a,EAAG9a,EAAG+a,EAAG/a,EAAGgsB,EAAGhsB,EAAGi3G,EAAKC,EAAKC,GAC/Dtc,GAAGmc,yBAA0Bn8F,EAAG5X,EAAG6X,EAAG7X,EAAG8X,EAAG9X,EAAG+oB,EAAG/oB,EAAGg0G,EAAKC,EAAKC,GAC/DmE,GAAGtE,yBAA0Bn8F,EAAGhM,EAAGiM,EAAGjM,EAAGkM,EAAGlM,EAAGmd,EAAGnd,EAAGooG,EAAKC,EAAKC,OAEjC,eAAnB//G,KAAKokH,YAEhB5gB,GAAGic,eAAgBh8F,EAAG7a,EAAG8a,EAAG9a,EAAG+a,EAAG/a,EAAGgsB,EAAGhsB,EAAG5I,KAAK2/G,SAChDlc,GAAGgc,eAAgBh8F,EAAG5X,EAAG6X,EAAG7X,EAAG8X,EAAG9X,EAAG+oB,EAAG/oB,EAAG7L,KAAK2/G,SAChDuE,GAAGzE,eAAgBh8F,EAAGhM,EAAGiM,EAAGjM,EAAGkM,EAAGlM,EAAGmd,EAAGnd,EAAGzX,KAAK2/G,UAUjD,OANAr+F,EAAMzgB,IACL2iG,GAAGyc,KAAMhoB,GACTwL,GAAGwc,KAAMhoB,GACTisB,GAAGjE,KAAMhoB,IAGH32E,GAIR6iG,GAAiB7iH,UAAUmV,KAAO,SAAWnN,GAE5Co1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAK2gB,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAId,EAAOqX,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAExD,MAAMmX,EAAQhY,EAAOqX,OAAQxW,GAE7BnK,KAAK2gB,OAAOxiB,KAAMmjB,EAAM9K,SAQzB,OAJAxW,KAAKs+F,OAASh1F,EAAOg1F,OACrBt+F,KAAKokH,UAAY96G,EAAO86G,UACxBpkH,KAAK2/G,QAAUr2G,EAAOq2G,QAEf3/G,MAIRmkH,GAAiB7iH,UAAUoV,OAAS,WAEnC,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAE1CkyB,EAAKvR,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAIpK,KAAK2gB,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMmX,EAAQthB,KAAK2gB,OAAQxW,GAC3B+nB,EAAKvR,OAAOxiB,KAAMmjB,EAAM+P,WAQzB,OAJAa,EAAKosE,OAASt+F,KAAKs+F,OACnBpsE,EAAKkyF,UAAYpkH,KAAKokH,UACtBlyF,EAAKytF,QAAU3/G,KAAK2/G,QAEbztF,GAIRiyF,GAAiB7iH,UAAUsiH,SAAW,SAAW7N,GAEhD2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAK2gB,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAI2rG,EAAKp1F,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMmX,EAAQy0F,EAAKp1F,OAAQxW,GAC3BnK,KAAK2gB,OAAOxiB,MAAM,IAAIqf,GAAU7M,UAAW2Q,IAQ5C,OAJAthB,KAAKs+F,OAASyX,EAAKzX,OACnBt+F,KAAKokH,UAAYrO,EAAKqO,UACtBpkH,KAAK2/G,QAAU5J,EAAK4J,QAEb3/G,MA+FR+kH,GAAiBzjH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAClDyjH,GAAiBzjH,UAAU4B,YAAc6hH,GAEzCA,GAAiBzjH,UAAUmkH,oBAAqB,EAEhDV,GAAiBzjH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAEnD,MAAMhhG,EAAQghG,GAAkB,IAAIp0G,EAE9BmV,EAAKrjB,KAAKqjB,GAAI7T,EAAKxP,KAAKwP,GAAIC,EAAKzP,KAAKyP,GAAIu1G,EAAKhlH,KAAKglH,GAO1D,OALA1jG,EAAMzgB,IACL6jH,GAAa54G,EAAGuX,EAAGza,EAAG4G,EAAG5G,EAAG6G,EAAG7G,EAAGo8G,EAAGp8G,GACrC87G,GAAa54G,EAAGuX,EAAGxX,EAAG2D,EAAG3D,EAAG4D,EAAG5D,EAAGm5G,EAAGn5G,IAG/ByV,GAIRyjG,GAAiBzjH,UAAUmV,KAAO,SAAWnN,GAS5C,OAPAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKqjB,GAAG5M,KAAMnN,EAAO+Z,IACrBrjB,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IACrBzP,KAAKglH,GAAGvuG,KAAMnN,EAAO07G,IAEdhlH,MAIR+kH,GAAiBzjH,UAAUoV,OAAS,WAEnC,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAO1C,OALAkyB,EAAK7O,GAAKrjB,KAAKqjB,GAAGgO,UAClBa,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAClBa,EAAK8yF,GAAKhlH,KAAKglH,GAAG3zF,UAEXa,GAIR6yF,GAAiBzjH,UAAUsiH,SAAW,SAAW7N,GAShD,OAPA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKqjB,GAAG1S,UAAWolG,EAAK1yF,IACxBrjB,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IACxBzP,KAAKglH,GAAGr0G,UAAWolG,EAAKiP,IAEjBhlH,MAiBRilH,GAAkB3jH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WACnD2jH,GAAkB3jH,UAAU4B,YAAc+hH,GAE1CA,GAAkB3jH,UAAUokH,qBAAsB,EAElDT,GAAkB3jH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAEpD,MAAMhhG,EAAQghG,GAAkB,IAAI9kG,EAE9B6F,EAAKrjB,KAAKqjB,GAAI7T,EAAKxP,KAAKwP,GAAIC,EAAKzP,KAAKyP,GAAIu1G,EAAKhlH,KAAKglH,GAQ1D,OANA1jG,EAAMzgB,IACL6jH,GAAa54G,EAAGuX,EAAGza,EAAG4G,EAAG5G,EAAG6G,EAAG7G,EAAGo8G,EAAGp8G,GACrC87G,GAAa54G,EAAGuX,EAAGxX,EAAG2D,EAAG3D,EAAG4D,EAAG5D,EAAGm5G,EAAGn5G,GACrC64G,GAAa54G,EAAGuX,EAAG5L,EAAGjI,EAAGiI,EAAGhI,EAAGgI,EAAGutG,EAAGvtG,IAG/B6J,GAIR2jG,GAAkB3jH,UAAUmV,KAAO,SAAWnN,GAS7C,OAPAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKqjB,GAAG5M,KAAMnN,EAAO+Z,IACrBrjB,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IACrBzP,KAAKglH,GAAGvuG,KAAMnN,EAAO07G,IAEdhlH,MAIRilH,GAAkB3jH,UAAUoV,OAAS,WAEpC,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAO1C,OALAkyB,EAAK7O,GAAKrjB,KAAKqjB,GAAGgO,UAClBa,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAClBa,EAAK8yF,GAAKhlH,KAAKglH,GAAG3zF,UAEXa,GAIR+yF,GAAkB3jH,UAAUsiH,SAAW,SAAW7N,GASjD,OAPA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKqjB,GAAG1S,UAAWolG,EAAK1yF,IACxBrjB,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IACxBzP,KAAKglH,GAAGr0G,UAAWolG,EAAKiP,IAEjBhlH,MAeRklH,GAAU5jH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAC3C4jH,GAAU5jH,UAAU4B,YAAcgiH,GAElCA,GAAU5jH,UAAUqkH,aAAc,EAElCT,GAAU5jH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAE5C,MAAMhhG,EAAQghG,GAAkB,IAAIp0G,EAapC,OAXW,IAANpC,EAEJwV,EAAM7K,KAAMzW,KAAKyP,KAIjB6R,EAAM7K,KAAMzW,KAAKyP,IAAK+P,IAAKxf,KAAKwP,IAChC8R,EAAM5S,eAAgB5C,GAAImV,IAAKjhB,KAAKwP,KAI9B8R,GAMR4jG,GAAU5jH,UAAUu9F,WAAa,SAAWnqE,EAAG4tF,GAE9C,OAAOtiH,KAAKqiH,SAAU3tF,EAAG4tF,IAI1B4C,GAAU5jH,UAAU8hH,WAAa,SAAWt3G,EAAGw2G,GAE9C,MAAMr0E,EAAUq0E,GAAkB,IAAIp0G,EAItC,OAFA+/B,EAAQx3B,KAAMzW,KAAKyP,IAAK+P,IAAKxf,KAAKwP,IAAKF,YAEhC2+B,GAIRi3E,GAAU5jH,UAAUmV,KAAO,SAAWnN,GAOrC,OALAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IAEdzP,MAIRklH,GAAU5jH,UAAUoV,OAAS,WAE5B,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAK1C,OAHAkyB,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAEXa,GAIRgzF,GAAU5jH,UAAUsiH,SAAW,SAAW7N,GAOzC,OALA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IAEjBzP,MAeRmlH,GAAW7jH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAC5C6jH,GAAW7jH,UAAU4B,YAAciiH,GAEnCA,GAAW7jH,UAAUskH,cAAe,EAEpCT,GAAW7jH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAE7C,MAAMhhG,EAAQghG,GAAkB,IAAI9kG,EAapC,OAXW,IAAN1R,EAEJwV,EAAM7K,KAAMzW,KAAKyP,KAIjB6R,EAAM7K,KAAMzW,KAAKyP,IAAK+P,IAAKxf,KAAKwP,IAChC8R,EAAM5S,eAAgB5C,GAAImV,IAAKjhB,KAAKwP,KAI9B8R,GAMR6jG,GAAW7jH,UAAUu9F,WAAa,SAAWnqE,EAAG4tF,GAE/C,OAAOtiH,KAAKqiH,SAAU3tF,EAAG4tF,IAI1B6C,GAAW7jH,UAAUmV,KAAO,SAAWnN,GAOtC,OALAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IAEdzP,MAIRmlH,GAAW7jH,UAAUoV,OAAS,WAE7B,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAK1C,OAHAkyB,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAEXa,GAIRizF,GAAW7jH,UAAUsiH,SAAW,SAAW7N,GAO1C,OALA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IAEjBzP,MAgBRolH,GAAqB9jH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WACtD8jH,GAAqB9jH,UAAU4B,YAAckiH,GAE7CA,GAAqB9jH,UAAUukH,wBAAyB,EAExDT,GAAqB9jH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAEvD,MAAMhhG,EAAQghG,GAAkB,IAAIp0G,EAE9BmV,EAAKrjB,KAAKqjB,GAAI7T,EAAKxP,KAAKwP,GAAIC,EAAKzP,KAAKyP,GAO5C,OALA6R,EAAMzgB,IACLyjH,GAAiBx4G,EAAGuX,EAAGza,EAAG4G,EAAG5G,EAAG6G,EAAG7G,GACnC07G,GAAiBx4G,EAAGuX,EAAGxX,EAAG2D,EAAG3D,EAAG4D,EAAG5D,IAG7ByV,GAIR8jG,GAAqB9jH,UAAUmV,KAAO,SAAWnN,GAQhD,OANAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKqjB,GAAG5M,KAAMnN,EAAO+Z,IACrBrjB,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IAEdzP,MAIRolH,GAAqB9jH,UAAUoV,OAAS,WAEvC,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAM1C,OAJAkyB,EAAK7O,GAAKrjB,KAAKqjB,GAAGgO,UAClBa,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAEXa,GAIRkzF,GAAqB9jH,UAAUsiH,SAAW,SAAW7N,GAQpD,OANA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKqjB,GAAG1S,UAAWolG,EAAK1yF,IACxBrjB,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IAEjBzP,MAgBRqlH,GAAsB/jH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WACvD+jH,GAAsB/jH,UAAU4B,YAAcmiH,GAE9CA,GAAsB/jH,UAAUwkH,yBAA0B,EAE1DT,GAAsB/jH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAExD,MAAMhhG,EAAQghG,GAAkB,IAAI9kG,EAE9B6F,EAAKrjB,KAAKqjB,GAAI7T,EAAKxP,KAAKwP,GAAIC,EAAKzP,KAAKyP,GAQ5C,OANA6R,EAAMzgB,IACLyjH,GAAiBx4G,EAAGuX,EAAGza,EAAG4G,EAAG5G,EAAG6G,EAAG7G,GACnC07G,GAAiBx4G,EAAGuX,EAAGxX,EAAG2D,EAAG3D,EAAG4D,EAAG5D,GACnCy4G,GAAiBx4G,EAAGuX,EAAG5L,EAAGjI,EAAGiI,EAAGhI,EAAGgI,IAG7B6J,GAIR+jG,GAAsB/jH,UAAUmV,KAAO,SAAWnN,GAQjD,OANAo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKqjB,GAAG5M,KAAMnN,EAAO+Z,IACrBrjB,KAAKwP,GAAGiH,KAAMnN,EAAOkG,IACrBxP,KAAKyP,GAAGgH,KAAMnN,EAAOmG,IAEdzP,MAIRqlH,GAAsB/jH,UAAUoV,OAAS,WAExC,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAM1C,OAJAkyB,EAAK7O,GAAKrjB,KAAKqjB,GAAGgO,UAClBa,EAAK1iB,GAAKxP,KAAKwP,GAAG6hB,UAClBa,EAAKziB,GAAKzP,KAAKyP,GAAG4hB,UAEXa,GAIRmzF,GAAsB/jH,UAAUsiH,SAAW,SAAW7N,GAQrD,OANA2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKqjB,GAAG1S,UAAWolG,EAAK1yF,IACxBrjB,KAAKwP,GAAGmB,UAAWolG,EAAKvmG,IACxBxP,KAAKyP,GAAGkB,UAAWolG,EAAKtmG,IAEjBzP,MAcRslH,GAAYhkH,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAC7CgkH,GAAYhkH,UAAU4B,YAAcoiH,GAEpCA,GAAYhkH,UAAUykH,eAAgB,EAEtCT,GAAYhkH,UAAU+gH,SAAW,SAAWv2G,EAAGw2G,GAE9C,MAAMhhG,EAAQghG,GAAkB,IAAIp0G,EAE9ByS,EAAS3gB,KAAK2gB,OACdngB,GAAMmgB,EAAOtX,OAAS,GAAMyC,EAE5B05G,EAAWnoH,KAAKqL,MAAOlI,GACvBy3F,EAASz3F,EAAIglH,EAEb/hG,EAAK9C,EAAqB,IAAb6kG,EAAiBA,EAAWA,EAAW,GACpD9hG,EAAK/C,EAAQ6kG,GACb7hG,EAAKhD,EAAQ6kG,EAAW7kG,EAAOtX,OAAS,EAAIsX,EAAOtX,OAAS,EAAIm8G,EAAW,GAC3E5wF,EAAKjU,EAAQ6kG,EAAW7kG,EAAOtX,OAAS,EAAIsX,EAAOtX,OAAS,EAAIm8G,EAAW,GAOjF,OALAlkG,EAAMzgB,IACLwjH,GAAYpsB,EAAQx0E,EAAG7a,EAAG8a,EAAG9a,EAAG+a,EAAG/a,EAAGgsB,EAAGhsB,GACzCy7G,GAAYpsB,EAAQx0E,EAAG5X,EAAG6X,EAAG7X,EAAG8X,EAAG9X,EAAG+oB,EAAG/oB,IAGnCyV,GAIRgkG,GAAYhkH,UAAUmV,KAAO,SAAWnN,GAEvCo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAK2gB,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAId,EAAOqX,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAExD,MAAMmX,EAAQhY,EAAOqX,OAAQxW,GAE7BnK,KAAK2gB,OAAOxiB,KAAMmjB,EAAM9K,SAIzB,OAAOxW,MAIRslH,GAAYhkH,UAAUoV,OAAS,WAE9B,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAE1CkyB,EAAKvR,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAIpK,KAAK2gB,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMmX,EAAQthB,KAAK2gB,OAAQxW,GAC3B+nB,EAAKvR,OAAOxiB,KAAMmjB,EAAM+P,WAIzB,OAAOa,GAIRozF,GAAYhkH,UAAUsiH,SAAW,SAAW7N,GAE3C2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAK2gB,OAAS,GAEd,IAAM,IAAIxW,EAAI,EAAGC,EAAI2rG,EAAKp1F,OAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMmX,EAAQy0F,EAAKp1F,OAAQxW,GAC3BnK,KAAK2gB,OAAOxiB,MAAM,IAAI+P,GAAUyC,UAAW2Q,IAI5C,OAAOthB,MAIR,IAAIgmH,GAAsBhnH,OAAOgvG,OAAO,CACvCC,UAAW,KACXoR,SAAUA,GACV8E,iBAAkBA,GAClBY,iBAAkBA,GAClBE,kBAAmBA,GACnBrG,aAAcA,GACdsG,UAAWA,GACXC,WAAYA,GACZC,qBAAsBA,GACtBC,sBAAuBA,GACvBC,YAAaA,KAQd,SAASW,KAERvH,GAAM/4G,KAAM3F,MAEZA,KAAKlB,KAAO,YAEZkB,KAAKkmH,OAAS,GACdlmH,KAAKmmH,WAAY,EAiPlB,SAASC,GAAMzlG,GAEdslG,GAAUtgH,KAAM3F,MAEhBA,KAAKlB,KAAO,OAEZkB,KAAKqmH,aAAe,IAAIn4G,EAEnByS,GAEJ3gB,KAAKmjB,cAAexC,GAkLtB,SAAS2lG,GAAO3lG,GAEfylG,GAAKzgH,KAAM3F,KAAM2gB,GAEjB3gB,KAAKuV,KAAOhL,EAAUI,eAEtB3K,KAAKlB,KAAO,QAEZkB,KAAK6kG,MAAQ,GA2Fd,SAAS0hB,GAAOlmF,EAAOkvC,GAEtBpiD,GAASxnB,KAAM3F,MAEfA,KAAKlB,KAAO,QAEZkB,KAAKqgC,MAAQ,IAAIX,GAAOW,GACxBrgC,KAAKuvE,eAA0B5uE,IAAd4uE,EAA0BA,EAAY,EAEvDvvE,KAAK8tB,mBAAgBntB,EA2CtB,SAAS6lH,GAAiB14D,EAAUC,EAAawhB,GAEhDg3C,GAAM5gH,KAAM3F,KAAM8tD,EAAUyhB,GAE5BvvE,KAAKlB,KAAO,kBAEZkB,KAAK6tB,gBAAaltB,EAElBX,KAAKoqB,SAAS3T,KAAM0W,GAASE,WAC7BrtB,KAAKsW,eAELtW,KAAK+tD,YAAc,IAAIruB,GAAOquB,GAsB/B,SAAS04D,GAAanoG,GAErBte,KAAKse,OAASA,EAEdte,KAAK8vE,KAAO,EACZ9vE,KAAK+vE,WAAa,EAClB/vE,KAAK4f,OAAS,EAEd5f,KAAKgwE,QAAU,IAAI9hE,EAAS,IAAK,KAEjClO,KAAKqkC,IAAM,KACXrkC,KAAK4yE,QAAU,KACf5yE,KAAK0S,OAAS,IAAI4U,GAElBtnB,KAAKg0E,YAAa,EAClBh0E,KAAKguC,aAAc,EAEnBhuC,KAAKwxE,SAAW,IAAIvyB,GACpBj/C,KAAK0mH,cAAgB,IAAIx4G,EAAS,EAAG,GAErClO,KAAK2mH,eAAiB,EAEtB3mH,KAAK4mH,WAAa,CAEjB,IAAIpvG,EAAS,EAAG,EAAG,EAAG,IAyGxB,SAASqvG,KAERJ,GAAY9gH,KAAM3F,KAAM,IAAIy7C,GAAmB,GAAI,EAAG,GAAK,MAiC5D,SAASqrE,GAAWzmF,EAAOkvC,EAAWrgD,EAAUpf,EAAOogE,EAAU/iB,GAEhEo5D,GAAM5gH,KAAM3F,KAAMqgC,EAAOkvC,GAEzBvvE,KAAKlB,KAAO,YAEZkB,KAAKoqB,SAAS3T,KAAM0W,GAASE,WAC7BrtB,KAAKsW,eAELtW,KAAKgJ,OAAS,IAAImkB,GAElBnuB,OAAO2C,eAAgB3B,KAAM,QAAS,CACrCgC,IAAK,WAIJ,OAAOhC,KAAKuvE,UAAYlyE,KAAKoN,IAG9B5J,IAAK,SAAWkmH,GAIf/mH,KAAKuvE,UAAYw3C,EAAQ1pH,KAAKoN,MAKhCzK,KAAKkvB,cAA0BvuB,IAAbuuB,EAA2BA,EAAW,EACxDlvB,KAAK8P,WAAoBnP,IAAVmP,EAAwBA,EAAQzS,KAAKoN,GAAK,EACzDzK,KAAKkwE,cAA0BvvE,IAAbuvE,EAA2BA,EAAW,EACxDlwE,KAAKmtD,WAAoBxsD,IAAVwsD,EAAwBA,EAAQ,EAE/CntD,KAAKmvD,OAAS,IAAI03D,GA6BnB,SAASG,KAERP,GAAY9gH,KAAM3F,KAAM,IAAIy7C,GAAmB,GAAI,EAAG,GAAK,MAE3Dz7C,KAAK0mH,cAAgB,IAAIx4G,EAAS,EAAG,GAErClO,KAAK2mH,eAAiB,EAEtB3mH,KAAK4mH,WAAa,CAejB,IAAIpvG,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,GAEtB,IAAIA,EAAS,EAAG,EAAG,EAAG,IAGvBxX,KAAKinH,gBAAkB,CACtB,IAAIzpG,EAAS,EAAG,EAAG,GAAK,IAAIA,GAAW,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GACrE,IAAIA,EAAS,EAAG,GAAK,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,GAAK,EAAG,IAGxExd,KAAKknH,SAAW,CACf,IAAI1pG,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GACnE,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,EAAG,GAAK,IAAIA,EAAS,EAAG,GAAK,IAuCvE,SAAS2pG,GAAY9mF,EAAOkvC,EAAWrgD,EAAUi+B,GAEhDo5D,GAAM5gH,KAAM3F,KAAMqgC,EAAOkvC,GAEzBvvE,KAAKlB,KAAO,aAEZE,OAAO2C,eAAgB3B,KAAM,QAAS,CACrCgC,IAAK,WAIJ,OAAwB,EAAjBhC,KAAKuvE,UAAgBlyE,KAAKoN,IAGlC5J,IAAK,SAAWkmH,GAIf/mH,KAAKuvE,UAAYw3C,GAAU,EAAI1pH,KAAKoN,OAKtCzK,KAAKkvB,cAA0BvuB,IAAbuuB,EAA2BA,EAAW,EACxDlvB,KAAKmtD,WAAoBxsD,IAAVwsD,EAAwBA,EAAQ,EAE/CntD,KAAKmvD,OAAS,IAAI63D,GAyBnB,SAASI,GAAoBl8F,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,GAE5DiwB,GAAO71C,KAAM3F,MAEbA,KAAKlB,KAAO,qBAEZkB,KAAK47C,KAAO,EACZ57C,KAAK87C,KAAO,KAEZ97C,KAAKkrB,UAAkBvqB,IAATuqB,EAAuBA,GAAS,EAC9ClrB,KAAKmrB,WAAoBxqB,IAAVwqB,EAAwBA,EAAQ,EAC/CnrB,KAAKorB,SAAgBzqB,IAARyqB,EAAsBA,EAAM,EACzCprB,KAAKqrB,YAAsB1qB,IAAX0qB,EAAyBA,GAAW,EAEpDrrB,KAAKsrB,UAAkB3qB,IAAT2qB,EAAuBA,EAAO,GAC5CtrB,KAAKurB,SAAgB5qB,IAAR4qB,EAAsBA,EAAM,IAEzCvrB,KAAKi8C,yBAsHN,SAASorE,KAERZ,GAAY9gH,KAAM3F,KAAM,IAAIonH,IAAsB,EAAG,EAAG,GAAK,EAAG,GAAK,MAkBtE,SAASE,GAAkBjnF,EAAOkvC,GAEjCg3C,GAAM5gH,KAAM3F,KAAMqgC,EAAOkvC,GAEzBvvE,KAAKlB,KAAO,mBAEZkB,KAAKoqB,SAAS3T,KAAM0W,GAASE,WAC7BrtB,KAAKsW,eAELtW,KAAKgJ,OAAS,IAAImkB,GAElBntB,KAAKmvD,OAAS,IAAIk4D,GAwBnB,SAASE,GAAclnF,EAAOkvC,GAE7Bg3C,GAAM5gH,KAAM3F,KAAMqgC,EAAOkvC,GAEzBvvE,KAAKlB,KAAO,eAEZkB,KAAK6tB,gBAAaltB,EAYnB,SAAS6mH,GAAennF,EAAOkvC,EAAWphE,EAAOC,GAEhDm4G,GAAM5gH,KAAM3F,KAAMqgC,EAAOkvC,GAEzBvvE,KAAKlB,KAAO,gBAEZkB,KAAKmO,WAAoBxN,IAAVwN,EAAwBA,EAAQ,GAC/CnO,KAAKoO,YAAsBzN,IAAXyN,EAAyBA,EAAS,GA/pCnD63G,GAAU3kH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQsoG,GAAMp9G,WAAa,CAEtE4B,YAAa+iH,GAEbhlG,IAAK,SAAWwmG,GAEfznH,KAAKkmH,OAAO/nH,KAAMspH,IAInBC,UAAW,WAGV,MAAMC,EAAa3nH,KAAKkmH,OAAQ,GAAI7D,SAAU,GACxCuF,EAAW5nH,KAAKkmH,OAAQlmH,KAAKkmH,OAAO78G,OAAS,GAAIg5G,SAAU,GAE1DsF,EAAWvkG,OAAQwkG,IAEzB5nH,KAAKkmH,OAAO/nH,KAAM,IAAI+mH,GAAW0C,EAAUD,KAe7CtF,SAAU,SAAWv2G,GAEpB,MAAMwG,EAAIxG,EAAI9L,KAAK0iH,YACbmF,EAAe7nH,KAAK8nH,kBAC1B,IAAI39G,EAAI,EAIR,KAAQA,EAAI09G,EAAax+G,QAAS,CAEjC,GAAKw+G,EAAc19G,IAAOmI,EAAI,CAE7B,MAAM2kC,EAAO4wE,EAAc19G,GAAMmI,EAC3Bm1G,EAAQznH,KAAKkmH,OAAQ/7G,GAErB49G,EAAgBN,EAAM/E,YACtBhuF,EAAsB,IAAlBqzF,EAAsB,EAAI,EAAI9wE,EAAO8wE,EAE/C,OAAON,EAAM5oB,WAAYnqE,GAI1BvqB,IAID,OAAO,MAURu4G,UAAW,WAEV,MAAMsF,EAAOhoH,KAAK8nH,kBAClB,OAAOE,EAAMA,EAAK3+G,OAAS,IAK5B05G,iBAAkB,WAEjB/iH,KAAKguC,aAAc,EACnBhuC,KAAKioH,aAAe,KACpBjoH,KAAK8nH,mBAONA,gBAAiB,WAIhB,GAAK9nH,KAAKioH,cAAgBjoH,KAAKioH,aAAa5+G,SAAWrJ,KAAKkmH,OAAO78G,OAElE,OAAOrJ,KAAKioH,aAOb,MAAMtF,EAAU,GAChB,IAAIuF,EAAO,EAEX,IAAM,IAAI/9G,EAAI,EAAGC,EAAIpK,KAAKkmH,OAAO78G,OAAQc,EAAIC,EAAGD,IAE/C+9G,GAAQloH,KAAKkmH,OAAQ/7G,GAAIu4G,YACzBC,EAAQxkH,KAAM+pH,GAMf,OAFAloH,KAAKioH,aAAetF,EAEbA,GAIRpc,gBAAiB,SAAWkc,QAER9hH,IAAd8hH,IAA0BA,EAAY,IAE3C,MAAM9hG,EAAS,GAEf,IAAM,IAAIxW,EAAI,EAAGA,GAAKs4G,EAAWt4G,IAEhCwW,EAAOxiB,KAAM6B,KAAKqiH,SAAUl4G,EAAIs4G,IAUjC,OANKziH,KAAKmmH,WAETxlG,EAAOxiB,KAAMwiB,EAAQ,IAIfA,GAIR6hG,UAAW,SAAWC,GAErBA,EAAYA,GAAa,GAEzB,MAAM9hG,EAAS,GACf,IAAIqgF,EAEJ,IAAM,IAAI72F,EAAI,EAAG+7G,EAASlmH,KAAKkmH,OAAQ/7G,EAAI+7G,EAAO78G,OAAQc,IAAO,CAEhE,MAAMs9G,EAAQvB,EAAQ/7G,GAChBmoE,EAAem1C,GAASA,EAAM5D,eAA+B,EAAZpB,EAClDgF,IAAWA,EAAM9B,aAAe8B,EAAM7B,cAAmB,EACxD6B,GAASA,EAAM1B,cAAkBtD,EAAYgF,EAAM9mG,OAAOtX,OAC3Do5G,EAEC9d,EAAM8iB,EAAMjF,UAAWlwC,GAE7B,IAAM,IAAI/uD,EAAI,EAAGA,EAAIohF,EAAIt7F,OAAQka,IAAO,CAEvC,MAAMjC,EAAQqjF,EAAKphF,GAEdy9E,GAAQA,EAAK59E,OAAQ9B,KAE1BX,EAAOxiB,KAAMmjB,GACb0/E,EAAO1/E,IAYT,OANKthB,KAAKmmH,WAAaxlG,EAAOtX,OAAS,IAAOsX,EAAQA,EAAOtX,OAAS,GAAI+Z,OAAQzC,EAAQ,KAEzFA,EAAOxiB,KAAMwiB,EAAQ,IAIfA,GAIRlK,KAAM,SAAWnN,GAEhBo1G,GAAMp9G,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKkmH,OAAS,GAEd,IAAM,IAAI/7G,EAAI,EAAGC,EAAId,EAAO48G,OAAO78G,OAAQc,EAAIC,EAAGD,IAAO,CAExD,MAAMs9G,EAAQn+G,EAAO48G,OAAQ/7G,GAE7BnK,KAAKkmH,OAAO/nH,KAAMspH,EAAMjxG,SAMzB,OAFAxW,KAAKmmH,UAAY78G,EAAO68G,UAEjBnmH,MAIR0W,OAAQ,WAEP,MAAMwb,EAAOwsF,GAAMp9G,UAAUoV,OAAO/Q,KAAM3F,MAE1CkyB,EAAKi0F,UAAYnmH,KAAKmmH,UACtBj0F,EAAKg0F,OAAS,GAEd,IAAM,IAAI/7G,EAAI,EAAGC,EAAIpK,KAAKkmH,OAAO78G,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMs9G,EAAQznH,KAAKkmH,OAAQ/7G,GAC3B+nB,EAAKg0F,OAAO/nH,KAAMspH,EAAM/wG,UAIzB,OAAOwb,GAIR0xF,SAAU,SAAW7N,GAEpB2I,GAAMp9G,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAErC/1G,KAAKmmH,UAAYpQ,EAAKoQ,UACtBnmH,KAAKkmH,OAAS,GAEd,IAAM,IAAI/7G,EAAI,EAAGC,EAAI2rG,EAAKmQ,OAAO78G,OAAQc,EAAIC,EAAGD,IAAO,CAEtD,MAAMs9G,EAAQ1R,EAAKmQ,OAAQ/7G,GAC3BnK,KAAKkmH,OAAO/nH,MAAM,IAAI6nH,GAAQyB,EAAM3oH,OAAS8kH,SAAU6D,IAIxD,OAAOznH,QAsBTomH,GAAK9kH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ6vG,GAAU3kH,WAAa,CAErE4B,YAAakjH,GAEbjjG,cAAe,SAAWxC,GAEzB3gB,KAAKmoH,OAAQxnG,EAAQ,GAAI/X,EAAG+X,EAAQ,GAAI9U,GAExC,IAAM,IAAI1B,EAAI,EAAGC,EAAIuW,EAAOtX,OAAQc,EAAIC,EAAGD,IAE1CnK,KAAKooH,OAAQznG,EAAQxW,GAAIvB,EAAG+X,EAAQxW,GAAI0B,GAIzC,OAAO7L,MAIRmoH,OAAQ,SAAWv/G,EAAGiD,GAIrB,OAFA7L,KAAKqmH,aAAaxlH,IAAK+H,EAAGiD,GAEnB7L,MAIRooH,OAAQ,SAAWx/G,EAAGiD,GAErB,MAAM47G,EAAQ,IAAIvC,GAAWllH,KAAKqmH,aAAa7vG,QAAS,IAAItI,EAAStF,EAAGiD,IAKxE,OAJA7L,KAAKkmH,OAAO/nH,KAAMspH,GAElBznH,KAAKqmH,aAAaxlH,IAAK+H,EAAGiD,GAEnB7L,MAIRqoH,iBAAkB,SAAWC,EAAMC,EAAM1J,EAAIC,GAE5C,MAAM2I,EAAQ,IAAIrC,GACjBplH,KAAKqmH,aAAa7vG,QAClB,IAAItI,EAASo6G,EAAMC,GACnB,IAAIr6G,EAAS2wG,EAAIC,IAOlB,OAJA9+G,KAAKkmH,OAAO/nH,KAAMspH,GAElBznH,KAAKqmH,aAAaxlH,IAAKg+G,EAAIC,GAEpB9+G,MAIRwoH,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAO/J,EAAIC,GAEzD,MAAM2I,EAAQ,IAAI1C,GACjB/kH,KAAKqmH,aAAa7vG,QAClB,IAAItI,EAASu6G,EAAOC,GACpB,IAAIx6G,EAASy6G,EAAOC,GACpB,IAAI16G,EAAS2wG,EAAIC,IAOlB,OAJA9+G,KAAKkmH,OAAO/nH,KAAMspH,GAElBznH,KAAKqmH,aAAaxlH,IAAKg+G,EAAIC,GAEpB9+G,MAIR6oH,WAAY,SAAWlkB,GAEtB,MAEM8iB,EAAQ,IAAInC,GAFL,CAAEtlH,KAAKqmH,aAAa7vG,SAAUqwF,OAAQlC,IAOnD,OAJA3kG,KAAKkmH,OAAO/nH,KAAMspH,GAElBznH,KAAKqmH,aAAa5vG,KAAMkuF,EAAKA,EAAIt7F,OAAS,IAEnCrJ,MAIR6/F,IAAK,SAAWgf,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAExD,MAAMzkG,EAAK1a,KAAKqmH,aAAaz9G,EACvB+R,EAAK3a,KAAKqmH,aAAax6G,EAK7B,OAHA7L,KAAK8oH,OAAQjK,EAAKnkG,EAAIokG,EAAKnkG,EAAI2kG,EAC9BL,EAAaC,EAAWC,GAElBn/G,MAIR8oH,OAAQ,SAAWjK,EAAIC,EAAIQ,EAASL,EAAaC,EAAWC,GAI3D,OAFAn/G,KAAK+oH,WAAYlK,EAAIC,EAAIQ,EAASA,EAASL,EAAaC,EAAWC,GAE5Dn/G,MAIRgpH,QAAS,SAAWnK,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEjF,MAAM1kG,EAAK1a,KAAKqmH,aAAaz9G,EACvB+R,EAAK3a,KAAKqmH,aAAax6G,EAI7B,OAFA7L,KAAK+oH,WAAYlK,EAAKnkG,EAAIokG,EAAKnkG,EAAIokG,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAElFp/G,MAIR+oH,WAAY,SAAWlK,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAEpF,MAAMqI,EAAQ,IAAI7I,GAAcC,EAAIC,EAAIC,EAASC,EAASC,EAAaC,EAAWC,EAAYC,GAE9F,GAAKp/G,KAAKkmH,OAAO78G,OAAS,EAAI,CAG7B,MAAM4/G,EAAaxB,EAAMpF,SAAU,GAE5B4G,EAAW7lG,OAAQpjB,KAAKqmH,eAE9BrmH,KAAKooH,OAAQa,EAAWrgH,EAAGqgH,EAAWp9G,GAMxC7L,KAAKkmH,OAAO/nH,KAAMspH,GAElB,MAAMyB,EAAYzB,EAAMpF,SAAU,GAGlC,OAFAriH,KAAKqmH,aAAa5vG,KAAMyyG,GAEjBlpH,MAIRyW,KAAM,SAAWnN,GAMhB,OAJA28G,GAAU3kH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAErCtJ,KAAKqmH,aAAa5vG,KAAMnN,EAAO+8G,cAExBrmH,MAIR0W,OAAQ,WAEP,MAAMwb,EAAO+zF,GAAU3kH,UAAUoV,OAAO/Q,KAAM3F,MAI9C,OAFAkyB,EAAKm0F,aAAermH,KAAKqmH,aAAah1F,UAE/Ba,GAIR0xF,SAAU,SAAW7N,GAMpB,OAJAkQ,GAAU3kH,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAEzC/1G,KAAKqmH,aAAa11G,UAAWolG,EAAKsQ,cAE3BrmH,QAkBTsmH,GAAMhlH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQgwG,GAAK9kH,WAAa,CAEjE4B,YAAaojH,GAEb6C,eAAgB,SAAW1G,GAE1B,MAAM2G,EAAW,GAEjB,IAAM,IAAIj/G,EAAI,EAAGC,EAAIpK,KAAK6kG,MAAMx7F,OAAQc,EAAIC,EAAGD,IAE9Ci/G,EAAUj/G,GAAMnK,KAAK6kG,MAAO16F,GAAIq4G,UAAWC,GAI5C,OAAO2G,GAMR3iB,cAAe,SAAWgc,GAEzB,MAAO,CAEN7wF,MAAO5xB,KAAKwiH,UAAWC,GACvB5d,MAAO7kG,KAAKmpH,eAAgB1G,KAM9BhsG,KAAM,SAAWnN,GAEhB88G,GAAK9kH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEhCtJ,KAAK6kG,MAAQ,GAEb,IAAM,IAAI16F,EAAI,EAAGC,EAAId,EAAOu7F,MAAMx7F,OAAQc,EAAIC,EAAGD,IAAO,CAEvD,MAAM44F,EAAOz5F,EAAOu7F,MAAO16F,GAE3BnK,KAAK6kG,MAAM1mG,KAAM4kG,EAAKvsF,SAIvB,OAAOxW,MAIR0W,OAAQ,WAEP,MAAMwb,EAAOk0F,GAAK9kH,UAAUoV,OAAO/Q,KAAM3F,MAEzCkyB,EAAK3c,KAAOvV,KAAKuV,KACjB2c,EAAK2yE,MAAQ,GAEb,IAAM,IAAI16F,EAAI,EAAGC,EAAIpK,KAAK6kG,MAAMx7F,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAM44F,EAAO/iG,KAAK6kG,MAAO16F,GACzB+nB,EAAK2yE,MAAM1mG,KAAM4kG,EAAKrsF,UAIvB,OAAOwb,GAIR0xF,SAAU,SAAW7N,GAEpBqQ,GAAK9kH,UAAUsiH,SAASj+G,KAAM3F,KAAM+1G,GAEpC/1G,KAAKuV,KAAOwgG,EAAKxgG,KACjBvV,KAAK6kG,MAAQ,GAEb,IAAM,IAAI16F,EAAI,EAAGC,EAAI2rG,EAAKlR,MAAMx7F,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAM44F,EAAOgT,EAAKlR,MAAO16F,GACzBnK,KAAK6kG,MAAM1mG,MAAM,IAAIioH,IAAOxC,SAAU7gB,IAIvC,OAAO/iG,QAmBTumH,GAAMjlH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAErE4B,YAAaqjH,GAEb52F,SAAS,EAETlZ,KAAM,SAAWnN,GAOhB,OALA6jB,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEpCtJ,KAAKqgC,MAAM5pB,KAAMnN,EAAO+2B,OACxBrgC,KAAKuvE,UAAYjmE,EAAOimE,UAEjBvvE,MAIR0W,OAAQ,SAAWC,GAElB,MAAMub,EAAO/E,GAAS7rB,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAcnD,OAZAub,EAAKhR,OAAOmf,MAAQrgC,KAAKqgC,MAAMY,SAC/B/O,EAAKhR,OAAOquD,UAAYvvE,KAAKuvE,eAEH5uE,IAArBX,KAAK+tD,cAA4B77B,EAAKhR,OAAO6sC,YAAc/tD,KAAK+tD,YAAY9sB,eAE1DtgC,IAAlBX,KAAKkvB,WAAyBgD,EAAKhR,OAAOgO,SAAWlvB,KAAKkvB,eAC3CvuB,IAAfX,KAAK8P,QAAsBoiB,EAAKhR,OAAOpR,MAAQ9P,KAAK8P,YACrCnP,IAAfX,KAAKmtD,QAAsBj7B,EAAKhR,OAAOisC,MAAQntD,KAAKmtD,YAClCxsD,IAAlBX,KAAKkwE,WAAyBh+C,EAAKhR,OAAOgvD,SAAWlwE,KAAKkwE,eAE1CvvE,IAAhBX,KAAKmvD,SAAuBj9B,EAAKhR,OAAOiuC,OAASnvD,KAAKmvD,OAAOz4C,UAE3Dwb,KAqBTs0F,GAAgBllH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAE5E4B,YAAasjH,GAEbl2C,mBAAmB,EAEnB75D,KAAM,SAAWnN,GAMhB,OAJAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAK+tD,YAAYt3C,KAAMnN,EAAOykD,aAEvB/tD,QAoCThB,OAAOuG,OAAQkhH,GAAYnlH,UAAW,CAErC2qF,kBAAmB,IAAI3kE,GAEvB+hG,oBAAqB,IAAI7rG,EAEzB8rG,YAAa,IAAI9rG,EAEjBs3D,iBAAkB,WAEjB,OAAO90E,KAAK2mH,gBAIbzxC,WAAY,WAEX,OAAOl1E,KAAKwxE,UAIbyD,eAAgB,SAAWrH,GAE1B,MAAMiG,EAAe7zE,KAAKse,OACzBirG,EAAevpH,KAAK0S,OACpB82G,EAAmBxpH,KAAKisF,kBACxBw9B,EAAazpH,KAAKspH,YAClBI,EAAqB1pH,KAAKqpH,oBAE3BK,EAAmBj6F,sBAAuBm+C,EAAMjvD,aAChDk1D,EAAazpD,SAAS3T,KAAMizG,GAE5BD,EAAWh6F,sBAAuBm+C,EAAM5kE,OAAO2V,aAC/Ck1D,EAAarkD,OAAQi6F,GACrB51C,EAAaxjD,oBAEbm5F,EAAiBv4G,iBAAkB4iE,EAAap1D,iBAAkBo1D,EAAar1D,oBAC/Exe,KAAKwxE,SAASygB,wBAAyBu3B,GAEvCD,EAAa1oH,IACZ,GAAK,EAAK,EAAK,GACf,EAAK,GAAK,EAAK,GACf,EAAK,EAAK,GAAK,GACf,EAAK,EAAK,EAAK,GAGhB0oH,EAAa36F,SAAUilD,EAAap1D,kBACpC8qG,EAAa36F,SAAUilD,EAAar1D,qBAIrCw2D,YAAa,SAAW20C,GAEvB,OAAO3pH,KAAK4mH,WAAY+C,IAIzBj1C,gBAAiB,WAEhB,OAAO10E,KAAK0mH,eAIbjwG,KAAM,SAAWnN,GAShB,OAPAtJ,KAAKse,OAAShV,EAAOgV,OAAO9H,QAE5BxW,KAAK8vE,KAAOxmE,EAAOwmE,KACnB9vE,KAAK4f,OAAStW,EAAOsW,OAErB5f,KAAKgwE,QAAQv5D,KAAMnN,EAAO0mE,SAEnBhwE,MAIRwW,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrC0W,OAAQ,WAEP,MAAMwK,EAAS,GAUf,OARmB,IAAdlhB,KAAK8vE,OAAa5uD,EAAO4uD,KAAO9vE,KAAK8vE,MACjB,IAApB9vE,KAAK+vE,aAAmB7uD,EAAO6uD,WAAa/vE,KAAK+vE,YACjC,IAAhB/vE,KAAK4f,SAAesB,EAAOtB,OAAS5f,KAAK4f,QACtB,MAAnB5f,KAAKgwE,QAAQpnE,GAAgC,MAAnB5I,KAAKgwE,QAAQnkE,IAAYqV,EAAO8uD,QAAUhwE,KAAKgwE,QAAQ3+C,WAEtFnQ,EAAO5C,OAASte,KAAKse,OAAO5H,QAAQ,GAAQwK,cACrCA,EAAO5C,OAAO5L,OAEdwO,KAYT2lG,GAAgBvlH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQqwG,GAAYnlH,WAAa,CAElF4B,YAAa2jH,GAEb+C,mBAAmB,EAEnB30C,eAAgB,SAAWrH,GAE1B,MAAMtvD,EAASte,KAAKse,OAEdo9B,EAA0B,EAApBnxC,EAAUG,QAAckjE,EAAM99D,MACpC6rC,EAAS37C,KAAKgwE,QAAQ7hE,MAAQnO,KAAKgwE,QAAQ5hE,OAC3Cmd,EAAMqiD,EAAM1+C,UAAY5Q,EAAOiN,IAEhCmwB,IAAQp9B,EAAOo9B,KAAOC,IAAWr9B,EAAOq9B,QAAUpwB,IAAQjN,EAAOiN,MAErEjN,EAAOo9B,IAAMA,EACbp9B,EAAOq9B,OAASA,EAChBr9B,EAAOiN,IAAMA,EACbjN,EAAO29B,0BAIRwqE,GAAYnlH,UAAU2zE,eAAetvE,KAAM3F,KAAM4tE,MA2CnDk5C,GAAUxlH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAEtE4B,YAAa4jH,GAEb72C,aAAa,EAEbx5D,KAAM,SAAWnN,GAahB,OAXAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKkvB,SAAW5lB,EAAO4lB,SACvBlvB,KAAK8P,MAAQxG,EAAOwG,MACpB9P,KAAKkwE,SAAW5mE,EAAO4mE,SACvBlwE,KAAKmtD,MAAQ7jD,EAAO6jD,MAEpBntD,KAAKgJ,OAASM,EAAON,OAAOwN,QAE5BxW,KAAKmvD,OAAS7lD,EAAO6lD,OAAO34C,QAErBxW,QAsDTgnH,GAAiB1lH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQqwG,GAAYnlH,WAAa,CAEnF4B,YAAa8jH,GAEbryC,oBAAoB,EAEpBM,eAAgB,SAAWrH,EAAO+7C,QAEVhpH,IAAlBgpH,IAA8BA,EAAgB,GAEnD,MAAMrrG,EAASte,KAAKse,OACnBirG,EAAevpH,KAAK0S,OACpBg3G,EAAqB1pH,KAAKqpH,oBAC1BI,EAAazpH,KAAKspH,YAClBE,EAAmBxpH,KAAKisF,kBAEzBy9B,EAAmBj6F,sBAAuBm+C,EAAMjvD,aAChDL,EAAO8L,SAAS3T,KAAMizG,GAEtBD,EAAWhzG,KAAM6H,EAAO8L,UACxBq/F,EAAWxoG,IAAKjhB,KAAKinH,gBAAiB0C,IACtCrrG,EAAO0K,GAAGvS,KAAMzW,KAAKknH,SAAUyC,IAC/BrrG,EAAOkR,OAAQi6F,GACfnrG,EAAO+R,oBAEPk5F,EAAah7E,iBAAmBm7E,EAAmB9gH,GAAK8gH,EAAmB79G,GAAK69G,EAAmBjyG,GAEnG+xG,EAAiBv4G,iBAAkBqN,EAAOG,iBAAkBH,EAAOE,oBACnExe,KAAKwxE,SAASygB,wBAAyBu3B,MAoCzCrC,GAAW7lH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAEvE4B,YAAaikH,GAEb92C,cAAc,EAEd55D,KAAM,SAAWnN,GAShB,OAPAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKkvB,SAAW5lB,EAAO4lB,SACvBlvB,KAAKmtD,MAAQ7jD,EAAO6jD,MAEpBntD,KAAKmvD,OAAS7lD,EAAO6lD,OAAO34C,QAErBxW,QA2BTonH,GAAmB9lH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQolC,GAAOl6C,WAAa,CAEhF4B,YAAakkH,GAEbv1B,sBAAsB,EAEtBp7E,KAAM,SAAWnN,EAAQ6oB,GAcxB,OAZAqpB,GAAOl6C,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,EAAQ6oB,GAE1CnyB,KAAKkrB,KAAO5hB,EAAO4hB,KACnBlrB,KAAKmrB,MAAQ7hB,EAAO6hB,MACpBnrB,KAAKorB,IAAM9hB,EAAO8hB,IAClBprB,KAAKqrB,OAAS/hB,EAAO+hB,OACrBrrB,KAAKsrB,KAAOhiB,EAAOgiB,KACnBtrB,KAAKurB,IAAMjiB,EAAOiiB,IAElBvrB,KAAK47C,KAAOtyC,EAAOsyC,KACnB57C,KAAK87C,KAAuB,OAAhBxyC,EAAOwyC,KAAgB,KAAO98C,OAAOuG,OAAQ,GAAI+D,EAAOwyC,MAE7D97C,MAIR48C,cAAe,SAAWC,EAAWC,EAAYl0C,EAAGiD,EAAGsC,EAAOC,GAE1C,OAAdpO,KAAK87C,OAET97C,KAAK87C,KAAO,CACXvD,SAAS,EACTsE,UAAW,EACXC,WAAY,EACZC,QAAS,EACTC,QAAS,EACT7uC,MAAO,EACPC,OAAQ,IAKVpO,KAAK87C,KAAKvD,SAAU,EACpBv4C,KAAK87C,KAAKe,UAAYA,EACtB78C,KAAK87C,KAAKgB,WAAaA,EACvB98C,KAAK87C,KAAKiB,QAAUn0C,EACpB5I,KAAK87C,KAAKkB,QAAUnxC,EACpB7L,KAAK87C,KAAK3tC,MAAQA,EAClBnO,KAAK87C,KAAK1tC,OAASA,EAEnBpO,KAAKi8C,0BAINgB,gBAAiB,WAEG,OAAdj9C,KAAK87C,OAET97C,KAAK87C,KAAKvD,SAAU,GAIrBv4C,KAAKi8C,0BAINA,uBAAwB,WAEvB,MAAM7sC,GAAOpP,KAAKmrB,MAAQnrB,KAAKkrB,OAAW,EAAIlrB,KAAK47C,MAC7CvsC,GAAOrP,KAAKorB,IAAMprB,KAAKqrB,SAAa,EAAIrrB,KAAK47C,MAC7ChoC,GAAO5T,KAAKmrB,MAAQnrB,KAAKkrB,MAAS,EAClCrX,GAAO7T,KAAKorB,IAAMprB,KAAKqrB,QAAW,EAExC,IAAIH,EAAOtX,EAAKxE,EACZ+b,EAAQvX,EAAKxE,EACbgc,EAAMvX,EAAKxE,EACXgc,EAASxX,EAAKxE,EAElB,GAAmB,OAAdrP,KAAK87C,MAAiB97C,KAAK87C,KAAKvD,QAAU,CAE9C,MAAMsxE,GAAW7pH,KAAKmrB,MAAQnrB,KAAKkrB,MAASlrB,KAAK87C,KAAKe,UAAY78C,KAAK47C,KACjEkuE,GAAW9pH,KAAKorB,IAAMprB,KAAKqrB,QAAWrrB,KAAK87C,KAAKgB,WAAa98C,KAAK47C,KAExE1wB,GAAQ2+F,EAAS7pH,KAAK87C,KAAKiB,QAC3B5xB,EAAQD,EAAO2+F,EAAS7pH,KAAK87C,KAAK3tC,MAClCid,GAAO0+F,EAAS9pH,KAAK87C,KAAKkB,QAC1B3xB,EAASD,EAAM0+F,EAAS9pH,KAAK87C,KAAK1tC,OAInCpO,KAAKye,iBAAiBsrG,iBAAkB7+F,EAAMC,EAAOC,EAAKC,EAAQrrB,KAAKsrB,KAAMtrB,KAAKurB,KAElFvrB,KAAK0e,wBAAwBtL,WAAYpT,KAAKye,mBAI/C/H,OAAQ,SAAWC,GAElB,MAAMub,EAAO/E,GAAS7rB,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAYnD,OAVAub,EAAKhR,OAAO06B,KAAO57C,KAAK47C,KACxB1pB,EAAKhR,OAAOgK,KAAOlrB,KAAKkrB,KACxBgH,EAAKhR,OAAOiK,MAAQnrB,KAAKmrB,MACzB+G,EAAKhR,OAAOkK,IAAMprB,KAAKorB,IACvB8G,EAAKhR,OAAOmK,OAASrrB,KAAKqrB,OAC1B6G,EAAKhR,OAAOoK,KAAOtrB,KAAKsrB,KACxB4G,EAAKhR,OAAOqK,IAAMvrB,KAAKurB,IAEJ,OAAdvrB,KAAK87C,OAAgB5pB,EAAKhR,OAAO46B,KAAO98C,OAAOuG,OAAQ,GAAIvF,KAAK87C,OAE9D5pB,KAYTm1F,GAAuB/lH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQqwG,GAAYnlH,WAAa,CAEzF4B,YAAamkH,GAEb2C,0BAA0B,EAE1B/0C,eAAgB,SAAWrH,GAE1B64C,GAAYnlH,UAAU2zE,eAAetvE,KAAM3F,KAAM4tE,MAqBnD05C,GAAiBhmH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAE7E4B,YAAaokH,GAEb13C,oBAAoB,EAEpBn5D,KAAM,SAAWnN,GAQhB,OANAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKgJ,OAASM,EAAON,OAAOwN,QAE5BxW,KAAKmvD,OAAS7lD,EAAO6lD,OAAO34C,QAErBxW,QAgBTunH,GAAajmH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAEzE4B,YAAaqkH,GAEb/3C,gBAAgB,IAejBg4C,GAAclmH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAE1E4B,YAAaskH,GAEbr3C,iBAAiB,EAEjB15D,KAAM,SAAWnN,GAOhB,OALAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAKmO,MAAQ7E,EAAO6E,MACpBnO,KAAKoO,OAAS9E,EAAO8E,OAEdpO,MAIR0W,OAAQ,SAAWC,GAElB,MAAMub,EAAOq0F,GAAMjlH,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAKhD,OAHAub,EAAKhR,OAAO/S,MAAQnO,KAAKmO,MACzB+jB,EAAKhR,OAAO9S,OAASpO,KAAKoO,OAEnB8jB,KAgBT,MAAM+3F,GAELrrH,cAECI,OAAO2C,eAAgB3B,KAAM,wBAAyB,CAAEnB,OAAO,IAE/DmB,KAAK2vE,aAAe,GAEpB,IAAM,IAAIxlE,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAaxxE,KAAM,IAAIqf,GAM9B5e,IAAK+wE,GAEJ,IAAM,IAAIxlE,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAIsM,KAAMk5D,EAAcxlE,IAI5C,OAAOnK,KAIRpB,OAEC,IAAM,IAAIuL,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAItJ,IAAK,EAAG,EAAG,GAInC,OAAOb,KAMRpB,MAAO6gB,EAAQzW,GAId,MAAMJ,EAAI6W,EAAO7W,EAAGiD,EAAI4T,EAAO5T,EAAG4L,EAAIgI,EAAOhI,EAEvCyyG,EAAQlqH,KAAK2vE,aAiBnB,OAdA3mE,EAAOyN,KAAMyzG,EAAO,IAAMx7G,eAAgB,SAG1C1F,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAWr+G,GAC/C7C,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAWzyG,GAC/CzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAWthH,GAG/CI,EAAOgsB,gBAAiBk1F,EAAO,GAAkBthH,EAAIiD,EAAjB,UACpC7C,EAAOgsB,gBAAiBk1F,EAAO,GAAkBr+G,EAAI4L,EAAjB,UACpCzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAa,EAAMzyG,EAAIA,EAAI,IAC/DzO,EAAOgsB,gBAAiBk1F,EAAO,GAAkBthH,EAAI6O,EAAjB,UACpCzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAathH,EAAIA,EAAIiD,EAAIA,IAEtD7C,EAORpK,gBAAiB6gB,EAAQzW,GAIxB,MAAMJ,EAAI6W,EAAO7W,EAAGiD,EAAI4T,EAAO5T,EAAG4L,EAAIgI,EAAOhI,EAEvCyyG,EAAQlqH,KAAK2vE,aAiBnB,OAdA3mE,EAAOyN,KAAMyzG,EAAO,IAAMx7G,eAAgB,SAG1C1F,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAiBr+G,GACrD7C,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAiBzyG,GACrDzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAiBthH,GAGrDI,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAiBthH,EAAIiD,GACzD7C,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAiBr+G,EAAI4L,GACzDzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAWzyG,EAAIA,EAAI,SACvDzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,QAAiBthH,EAAI6O,GACzDzO,EAAOgsB,gBAAiBk1F,EAAO,GAAK,SAAathH,EAAIA,EAAIiD,EAAIA,IAEtD7C,EAIRpK,IAAK8wE,GAEJ,IAAM,IAAIvlE,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAI8W,IAAKyuD,EAAGC,aAAcxlE,IAI9C,OAAOnK,KAIRpB,YAAa8wE,EAAI9xE,GAEhB,IAAM,IAAIuM,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAI6qB,gBAAiB06C,EAAGC,aAAcxlE,GAAKvM,GAI/D,OAAOoC,KAIRpB,MAAOhB,GAEN,IAAM,IAAIuM,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAIuE,eAAgB9Q,GAIxC,OAAOoC,KAIRpB,KAAM8wE,EAAIngE,GAET,IAAM,IAAIpF,EAAI,EAAGA,EAAI,EAAGA,IAEvBnK,KAAK2vE,aAAcxlE,GAAIyB,KAAM8jE,EAAGC,aAAcxlE,GAAKoF,GAIpD,OAAOvP,KAIRpB,OAAQ8wE,GAEP,IAAM,IAAIvlE,EAAI,EAAGA,EAAI,EAAGA,IAEvB,IAAOnK,KAAK2vE,aAAcxlE,GAAIiZ,OAAQssD,EAAGC,aAAcxlE,IAEtD,OAAO,EAMT,OAAO,EAIRvL,KAAM8wE,GAEL,OAAO1vE,KAAKa,IAAK6uE,EAAGC,cAIrB/wE,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,UAAWsL,EAAOwF,QAED/O,IAAX+O,IAAuBA,EAAS,GAErC,MAAMigE,EAAe3vE,KAAK2vE,aAE1B,IAAM,IAAIxlE,EAAI,EAAGA,EAAI,EAAGA,IAEvBwlE,EAAcxlE,GAAIwG,UAAWzG,EAAOwF,EAAe,EAAJvF,GAIhD,OAAOnK,KAIRpB,QAASsL,EAAOwF,QAEA/O,IAAVuJ,IAAsBA,EAAQ,SACnBvJ,IAAX+O,IAAuBA,EAAS,GAErC,MAAMigE,EAAe3vE,KAAK2vE,aAE1B,IAAM,IAAIxlE,EAAI,EAAGA,EAAI,EAAGA,IAEvBwlE,EAAcxlE,GAAIknB,QAASnnB,EAAOwF,EAAe,EAAJvF,GAI9C,OAAOD,EAMRtL,kBAAmB6gB,EAAQ0qG,GAI1B,MAAMvhH,EAAI6W,EAAO7W,EAAGiD,EAAI4T,EAAO5T,EAAG4L,EAAIgI,EAAOhI,EAG7C0yG,EAAS,GAAM,QAGfA,EAAS,GAAM,QAAWt+G,EAC1Bs+G,EAAS,GAAM,QAAW1yG,EAC1B0yG,EAAS,GAAM,QAAWvhH,EAG1BuhH,EAAS,GAAM,SAAWvhH,EAAIiD,EAC9Bs+G,EAAS,GAAM,SAAWt+G,EAAI4L,EAC9B0yG,EAAS,GAAM,SAAa,EAAI1yG,EAAIA,EAAI,GACxC0yG,EAAS,GAAM,SAAWvhH,EAAI6O,EAC9B0yG,EAAS,GAAM,SAAavhH,EAAIA,EAAIiD,EAAIA,IAM1C,SAASu+G,GAAY16C,EAAIH,GAExBg3C,GAAM5gH,KAAM3F,UAAMW,EAAW4uE,GAE7BvvE,KAAKlB,KAAO,aAEZkB,KAAK0vE,QAAc/uE,IAAP+uE,EAAqBA,EAAK,IAAIu6C,GAyC3C,SAASI,GAAgB/M,GAExBD,GAAO13G,KAAM3F,KAAMs9G,GAEnBt9G,KAAK6W,SAAW,GAzCjBuzG,GAAW9oH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQmwG,GAAMjlH,WAAa,CAEvE4B,YAAaknH,GAEb36C,cAAc,EAEdh5D,KAAM,SAAWnN,GAMhB,OAJAi9G,GAAMjlH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAEjCtJ,KAAK0vE,GAAGj5D,KAAMnN,EAAOomE,IAEd1vE,MAIR4jH,SAAU,SAAW7N,GAKpB,OAHA/1G,KAAKuvE,UAAYwmC,EAAKxmC,UACtBvvE,KAAK0vE,GAAG/+D,UAAWolG,EAAKrmC,IAEjB1vE,MAIR0W,OAAQ,SAAWC,GAElB,MAAMub,EAAOq0F,GAAMjlH,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,GAIhD,OAFAub,EAAKhR,OAAOwuD,GAAK1vE,KAAK0vE,GAAGr+C,UAElBa,KAcTm4F,GAAe/oH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE5E4B,YAAamnH,GAEb3M,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERg9G,EAAS,IAAImB,GAAYtpE,EAAMyoE,SACrCN,EAAOe,QAASlpE,EAAMosB,MACtB+7C,EAAOiB,iBAAkBppE,EAAM4oE,eAC/BT,EAAOU,KAAMxmG,GAAK,SAAW4zF,GAE5B,IAECkR,EAAQnnE,EAAMx1C,MAAOH,KAAKG,MAAOyrG,KAEhC,MAAQxmG,GAEJ43G,EAEJA,EAAS53G,GAIThG,QAAQ0R,MAAO1L,GAIhBuwC,EAAMyoE,QAAQX,UAAWzlG,MAIxB+kG,EAAYC,IAIhB78G,MAAO,SAAW02G,GAEjB,MAAMl/F,EAAW7W,KAAK6W,SAEtB,SAASyzG,EAAYnpH,GAQpB,YAN0BR,IAArBkW,EAAU1V,IAEd7C,QAAQC,KAAM,0CAA2C4C,GAInD0V,EAAU1V,GAIlB,MAAM0wB,EAAW,IAAI2+E,GAAWuF,EAAKj3G,MA+ErC,QA7EmB6B,IAAdo1G,EAAKxgG,OAAqBsc,EAAStc,KAAOwgG,EAAKxgG,WACjC5U,IAAdo1G,EAAK50G,OAAqB0wB,EAAS1wB,KAAO40G,EAAK50G,WAChCR,IAAfo1G,EAAK11E,OAAsBxO,EAASwO,MAAMR,OAAQk2E,EAAK11E,YACpC1/B,IAAnBo1G,EAAKlwE,YAA0BhU,EAASgU,UAAYkwE,EAAKlwE,gBACtCllC,IAAnBo1G,EAAKjwE,YAA0BjU,EAASiU,UAAYiwE,EAAKjwE,gBAC1CnlC,IAAfo1G,EAAKhwE,QAAsBlU,EAASkU,OAAQ,IAAIrG,IAAQG,OAAQk2E,EAAKhwE,aACnDplC,IAAlBo1G,EAAK/vE,UAAyBnU,EAASmU,SAASnG,OAAQk2E,EAAK/vE,eAC3CrlC,IAAlBo1G,EAAK7vE,UAAyBrU,EAASqU,SAASrG,OAAQk2E,EAAK7vE,eAC1CvlC,IAAnBo1G,EAAK5vE,YAA0BtU,EAASsU,UAAY4vE,EAAK5vE,gBACtCxlC,IAAnBo1G,EAAK3vE,YAA0BvU,EAASuU,UAAY2vE,EAAK3vE,gBAC7BzlC,IAA5Bo1G,EAAK1vE,qBAAmCxU,EAASwU,mBAAqB0vE,EAAK1vE,yBAC9D1lC,IAAbo1G,EAAK/zE,MAAoBnQ,EAASmQ,IAAM+zE,EAAK/zE,UACxBrhC,IAArBo1G,EAAK5zE,cAA4BtQ,EAASsQ,YAAc4zE,EAAK5zE,kBAC3CxhC,IAAlBo1G,EAAK9zE,WAAyBpQ,EAASoQ,SAAW8zE,EAAK9zE,eACtCthC,IAAjBo1G,EAAKlxE,UAAwBhT,EAASgT,QAAUkxE,EAAKlxE,cACvClkC,IAAdo1G,EAAK7zE,OAAqBrQ,EAASqQ,KAAO6zE,EAAK7zE,WAC9BvhC,IAAjBo1G,EAAK3zE,UAAwBvQ,EAASuQ,QAAU2zE,EAAK3zE,cAChCzhC,IAArBo1G,EAAK1zE,cAA4BxQ,EAASwQ,YAAc0zE,EAAK1zE,kBAC1C1hC,IAAnBo1G,EAAK9xE,YAA0BpS,EAASoS,UAAY8xE,EAAK9xE,gBACtCtjC,IAAnBo1G,EAAKlzE,YAA0BhR,EAASgR,UAAYkzE,EAAKlzE,gBACrCliC,IAApBo1G,EAAKjzE,aAA2BjR,EAASiR,WAAaizE,EAAKjzE,iBACvCniC,IAApBo1G,EAAKpyE,aAA2B9R,EAAS8R,WAAaoyE,EAAKpyE,iBAErChjC,IAAtBo1G,EAAKzyE,eAA6BzR,EAASyR,aAAeyyE,EAAKzyE,mBACrC3iC,IAA1Bo1G,EAAKhzE,mBAAiClR,EAASkR,iBAAmBgzE,EAAKhzE,uBAClDpiC,IAArBo1G,EAAK/yE,cAA4BnR,EAASmR,YAAc+yE,EAAK/yE,kBACzCriC,IAApBo1G,EAAK9yE,aAA2BpR,EAASoR,WAAa8yE,EAAK9yE,iBAClCtiC,IAAzBo1G,EAAK7yE,kBAAgCrR,EAASqR,gBAAkB6yE,EAAK7yE,sBAChDviC,IAArBo1G,EAAK5yE,cAA4BtR,EAASsR,YAAc4yE,EAAK5yE,kBACvCxiC,IAAtBo1G,EAAK3yE,eAA6BvR,EAASuR,aAAe2yE,EAAK3yE,mBACzCziC,IAAtBo1G,EAAK1yE,eAA6BxR,EAASwR,aAAe0yE,EAAK1yE,mBAE5C1iC,IAAnBo1G,EAAK/wE,YAA0BnT,EAASmT,UAAY+wE,EAAK/wE,gBAC7BrkC,IAA5Bo1G,EAAK9wE,qBAAmCpT,EAASoT,mBAAqB8wE,EAAK9wE,yBACjDtkC,IAA1Bo1G,EAAK7wE,mBAAiCrT,EAASqT,iBAAmB6wE,EAAK7wE,uBAC5CvkC,IAA3Bo1G,EAAK5wE,oBAAkCtT,EAASsT,kBAAoB4wE,EAAK5wE,wBAEvDxkC,IAAlBo1G,EAAKpiG,WAAyBke,EAASle,SAAWoiG,EAAKpiG,UAEpC,IAAnBoiG,EAAKtuE,YAAkB5V,EAAS4V,UAAYsuE,EAAKtuE,gBAC/B9mC,IAAlBo1G,EAAKruE,WAAyB7V,EAAS6V,SAAWquE,EAAKruE,eACtC/mC,IAAjBo1G,EAAKpuE,UAAwB9V,EAAS8V,QAAUouE,EAAKpuE,cACtChnC,IAAfo1G,EAAK1rF,QAAsBwH,EAASxH,MAAQ0rF,EAAK1rF,YAE1B1pB,IAAvBo1G,EAAKlyE,gBAA8BhS,EAASgS,cAAgBkyE,EAAKlyE,oBACpCljC,IAA7Bo1G,EAAKjyE,sBAAoCjS,EAASiS,oBAAsBiyE,EAAKjyE,0BACjDnjC,IAA5Bo1G,EAAKhyE,qBAAmClS,EAASkS,mBAAqBgyE,EAAKhyE,yBAEzDpjC,IAAlBo1G,EAAK3wE,WAAyBvT,EAASuT,SAAW2wE,EAAK3wE,eACjCzkC,IAAtBo1G,EAAK1wE,eAA6BxT,EAASwT,aAAe0wE,EAAK1wE,mBACzC1kC,IAAtBo1G,EAAKnuE,eAA6B/V,EAAS+V,aAAemuE,EAAKnuE,mBAC5CjnC,IAAnBo1G,EAAK/xE,YAA0BnS,EAASmS,UAAY+xE,EAAK/xE,gBAEjCrjC,IAAxBo1G,EAAKxuC,iBAA+B11C,EAAS01C,eAAiBwuC,EAAKxuC,qBAElD5mE,IAAjBo1G,EAAKnoF,UAAwBiE,EAASjE,QAAUmoF,EAAKnoF,cAEjCjtB,IAApBo1G,EAAK5xE,aAA2BtS,EAASsS,WAAa4xE,EAAK5xE,iBAEzCxjC,IAAlBo1G,EAAK9nF,WAAyB4D,EAAS5D,SAAW8nF,EAAK9nF,eAEjCttB,IAAtBo1G,EAAKl0E,eAEyB,iBAAtBk0E,EAAKl0E,aAEhBhQ,EAASgQ,aAAiBk0E,EAAKl0E,aAAe,EAI9ChQ,EAASgQ,aAAek0E,EAAKl0E,mBAQRlhC,IAAlBo1G,EAAKz7D,SAET,IAAM,MAAMn5C,KAAQ40G,EAAKz7D,SAAW,CAEnC,MAAM8c,EAAU2+C,EAAKz7D,SAAUn5C,GAI/B,OAFA0wB,EAASyoB,SAAUn5C,GAAS,GAEnBi2D,EAAQt4D,MAEhB,IAAK,IACJ+yB,EAASyoB,SAAUn5C,GAAOtC,MAAQyrH,EAAYlzD,EAAQv4D,OACtD,MAED,IAAK,IACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAI6gC,IAAQG,OAAQu3B,EAAQv4D,OAC9D,MAED,IAAK,KACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAIqP,GAAUyC,UAAWymD,EAAQv4D,OACnE,MAED,IAAK,KACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAI2e,GAAU7M,UAAWymD,EAAQv4D,OACnE,MAED,IAAK,KACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAI2Y,GAAU7G,UAAWymD,EAAQv4D,OACnE,MAED,IAAK,KACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAIkR,GAAUY,UAAWymD,EAAQv4D,OACnE,MAED,IAAK,KACJgzB,EAASyoB,SAAUn5C,GAAOtC,OAAQ,IAAIyoB,IAAU3W,UAAWymD,EAAQv4D,OACnE,MAED,QACCgzB,EAASyoB,SAAUn5C,GAAOtC,MAAQu4D,EAAQv4D,OAY9C,QAJsB8B,IAAjBo1G,EAAKr7D,UAAwB7oB,EAAS6oB,QAAUq7D,EAAKr7D,cAC/B/5C,IAAtBo1G,EAAKp7D,eAA6B9oB,EAAS8oB,aAAeo7D,EAAKp7D,mBACvCh6C,IAAxBo1G,EAAKn7D,iBAA+B/oB,EAAS+oB,eAAiBm7D,EAAKn7D,qBAE/Cj6C,IAApBo1G,EAAKh7D,WAET,IAAM,MAAMx5C,KAAOw0G,EAAKh7D,WAEvBlpB,EAASkpB,WAAYx5C,GAAQw0G,EAAKh7D,WAAYx5C,GA2BhD,QAnBsBZ,IAAjBo1G,EAAKwU,UAAwB14F,EAASsQ,YAA+B,IAAjB4zE,EAAKwU,cAI3C5pH,IAAdo1G,EAAK7wG,OAAqB2sB,EAAS3sB,KAAO6wG,EAAK7wG,WACtBvE,IAAzBo1G,EAAKvuE,kBAAgC3V,EAAS2V,gBAAkBuuE,EAAKvuE,sBAIxD7mC,IAAbo1G,EAAK1xE,MAAoBxS,EAASwS,IAAMimF,EAAYvU,EAAK1xE,WACzC1jC,IAAhBo1G,EAAKrvE,SAAuB7U,EAAS6U,OAAS4jF,EAAYvU,EAAKrvE,cAE7C/lC,IAAlBo1G,EAAKpxE,WAAyB9S,EAAS8S,SAAW2lF,EAAYvU,EAAKpxE,gBAElDhkC,IAAjBo1G,EAAKpvE,UAAwB9U,EAAS8U,QAAU2jF,EAAYvU,EAAKpvE,eAC9ChmC,IAAnBo1G,EAAKnvE,YAA0B/U,EAAS+U,UAAYmvE,EAAKnvE,gBAEtCjmC,IAAnBo1G,EAAKlvE,YAA0BhV,EAASgV,UAAYyjF,EAAYvU,EAAKlvE,iBAC9ClmC,IAAvBo1G,EAAKjvE,gBAA8BjV,EAASiV,cAAgBivE,EAAKjvE,oBAC5CnmC,IAArBo1G,EAAKhvE,YAA4B,CAErC,IAAIA,EAAcgvE,EAAKhvE,aAEe,IAAjC9nC,MAAMkY,QAAS4vB,KAInBA,EAAc,CAAEA,EAAaA,IAI9BlV,EAASkV,aAAc,IAAI74B,GAAUyC,UAAWo2B,GAsCjD,YAlC8BpmC,IAAzBo1G,EAAK/uE,kBAAgCnV,EAASmV,gBAAkBsjF,EAAYvU,EAAK/uE,uBACtDrmC,IAA3Bo1G,EAAK9uE,oBAAkCpV,EAASoV,kBAAoB8uE,EAAK9uE,wBAC/CtmC,IAA1Bo1G,EAAK7uE,mBAAiCrV,EAASqV,iBAAmB6uE,EAAK7uE,uBAEjDvmC,IAAtBo1G,EAAK5uE,eAA6BtV,EAASsV,aAAemjF,EAAYvU,EAAK5uE,oBACrDxmC,IAAtBo1G,EAAK3uE,eAA6BvV,EAASuV,aAAekjF,EAAYvU,EAAK3uE,oBAEtDzmC,IAArBo1G,EAAK1uE,cAA4BxV,EAASwV,YAAcijF,EAAYvU,EAAK1uE,mBAC9C1mC,IAA3Bo1G,EAAK9vE,oBAAkCpU,EAASoU,kBAAoB8vE,EAAK9vE,wBAEpDtlC,IAArBo1G,EAAKrxE,cAA4B7S,EAAS6S,YAAc4lF,EAAYvU,EAAKrxE,mBAEzD/jC,IAAhBo1G,EAAKnxE,SAAuB/S,EAAS+S,OAAS0lF,EAAYvU,EAAKnxE,cACtCjkC,IAAzBo1G,EAAKzuE,kBAAgCzV,EAASyV,gBAAkByuE,EAAKzuE,sBAE/C3mC,IAAtBo1G,EAAKjxE,eAA6BjT,EAASiT,aAAeixE,EAAKjxE,mBACtCnkC,IAAzBo1G,EAAKhxE,kBAAgClT,EAASkT,gBAAkBgxE,EAAKhxE,sBAEnDpkC,IAAlBo1G,EAAKzxE,WAAyBzS,EAASyS,SAAWgmF,EAAYvU,EAAKzxE,gBACxC3jC,IAA3Bo1G,EAAKxxE,oBAAkC1S,EAAS0S,kBAAoBwxE,EAAKxxE,wBAE1D5jC,IAAfo1G,EAAKvxE,QAAsB3S,EAAS2S,MAAQ8lF,EAAYvU,EAAKvxE,aACrC7jC,IAAxBo1G,EAAKtxE,iBAA+B5S,EAAS4S,eAAiBsxE,EAAKtxE,qBAE9C9jC,IAArBo1G,EAAKxuE,cAA4B1V,EAAS0V,YAAc+iF,EAAYvU,EAAKxuE,mBAEnD5mC,IAAtBo1G,EAAKzvE,eAA6BzU,EAASyU,aAAegkF,EAAYvU,EAAKzvE,oBAC5C3lC,IAA/Bo1G,EAAKxvE,wBAAsC1U,EAAS0U,sBAAwB+jF,EAAYvU,EAAKxvE,6BACjE5lC,IAA5Bo1G,EAAKvvE,qBAAmC3U,EAAS2U,mBAAqB8jF,EAAYvU,EAAKvvE,0BACzD7lC,IAA9Bo1G,EAAKtvE,uBAAqC5U,EAAS4U,sBAAuB,IAAIv4B,GAAUyC,UAAWolG,EAAKtvE,4BAElF9lC,IAAtBo1G,EAAKp6C,eAA6B9pC,EAAS8pC,aAAeo6C,EAAKp6C,mBACtCh7D,IAAzBo1G,EAAKn6C,kBAAgC/pC,EAAS+pC,gBAAkB0uD,EAAYvU,EAAKn6C,kBAE/E/pC,GAIR24F,YAAa,SAAW3rH,GAGvB,OADAmB,KAAK6W,SAAWhY,EACTmB,QAMT,MAAMyqH,GAEO,SAAWvgH,GAEtB,GAA4B,oBAAhBwgH,YAEX,OAAO,IAAIA,aAAcC,OAAQzgH,GAOlC,IAAItM,EAAI,GAER,IAAM,IAAIuM,EAAI,EAAG0W,EAAK3W,EAAMb,OAAQc,EAAI0W,EAAI1W,IAG3CvM,GAAKR,OAAOwtH,aAAc1gH,EAAOC,IAIlC,IAIC,OAAOo2G,mBAAoBsK,OAAQjtH,IAElC,MAAQ0G,GAET,OAAO1G,IA9BJ6sH,GAoCW,SAAWvzG,GAE1B,MAAM/N,EAAQ+N,EAAI4zG,YAAa,KAE/B,OAAiB,IAAZ3hH,EAAuB,KAErB+N,EAAI5P,OAAQ,EAAG6B,EAAQ,IAMhC,SAAS4hH,KAER39E,GAAeznC,KAAM3F,MAErBA,KAAKlB,KAAO,0BACZkB,KAAKu6D,cAAgBp6C,EAAAA,EAwCtB,SAAS6qG,GAA0B9gH,EAAOi+B,EAAU3G,EAAYixB,GAEhC,qBAE9BA,EAAmBjxB,EAEnBA,GAAa,EAEbljC,QAAQ0R,MAAO,kGAIhBk4B,GAAgBviC,KAAM3F,KAAMkK,EAAOi+B,EAAU3G,GAE7CxhC,KAAKyyD,iBAAmBA,GAAoB,EAkC7C,SAASw4D,GAAsB3N,GAE9BD,GAAO13G,KAAM3F,KAAMs9G,GAtFpByN,GAAwBzpH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQg3B,GAAe9rC,WAAa,CAE7F4B,YAAa6nH,GAEbj3D,2BAA2B,EAE3Br9C,KAAM,SAAWnN,GAMhB,OAJA8jC,GAAe9rC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE1CtJ,KAAKu6D,cAAgBjxD,EAAOixD,cAErBv6D,MAIRwW,MAAO,WAEN,OAAO,IAAIxW,KAAKkD,aAAcuT,KAAMzW,OAIrC0W,OAAQ,WAEP,MAAMwb,EAAOkb,GAAe9rC,UAAUoV,OAAO/Q,KAAM3F,MAMnD,OAJAkyB,EAAKqoC,cAAgBv6D,KAAKu6D,cAE1BroC,EAAK4hC,2BAA4B,EAE1B5hC,KAwBT84F,GAAyB1pH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ8xB,GAAgB5mC,WAAa,CAE/F4B,YAAa8nH,GAEb32D,4BAA4B,EAE5B59C,KAAM,SAAWnN,GAMhB,OAJA4+B,GAAgB5mC,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE3CtJ,KAAKyyD,iBAAmBnpD,EAAOmpD,iBAExBzyD,MAIR0W,OAAQ,WAEP,MAAMwb,EAAOgW,GAAgB5mC,UAAUoV,OAAO/Q,KAAM3F,MAMpD,OAJAkyB,EAAKugC,iBAAmBzyD,KAAKyyD,iBAE7BvgC,EAAKmiC,4BAA6B,EAE3BniC,KAYT+4F,GAAqB3pH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAElF4B,YAAa+nH,GAEbvN,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERg9G,EAAS,IAAImB,GAAYtpE,EAAMyoE,SACrCN,EAAOe,QAASlpE,EAAMosB,MACtB+7C,EAAOiB,iBAAkBppE,EAAM4oE,eAC/BT,EAAOU,KAAMxmG,GAAK,SAAW4zF,GAE5B,IAECkR,EAAQnnE,EAAMx1C,MAAOH,KAAKG,MAAOyrG,KAEhC,MAAQxmG,GAEJ43G,EAEJA,EAAS53G,GAIThG,QAAQ0R,MAAO1L,GAIhBuwC,EAAMyoE,QAAQX,UAAWzlG,MAIxB+kG,EAAYC,IAIhB78G,MAAO,SAAW02G,GAEjB,MAAMmV,EAAuB,GACvBC,EAAiB,GAEvB,SAASC,EAAsBrV,EAAMxgG,GAEpC,QAAsC5U,IAAjCuqH,EAAsB31G,GAAuB,OAAO21G,EAAsB31G,GAE/E,MACMmgF,EADqBqgB,EAAKngB,mBACcrgF,GAExCssC,EAYP,SAAyBk0D,EAAMxgG,GAE9B,QAAgC5U,IAA3BwqH,EAAgB51G,GAAuB,OAAO41G,EAAgB51G,GAEnE,MACM81G,EADetV,EAAK1gB,aACQ9/E,GAE5B+6B,EAAK,IAAInH,YAAakiF,GAAcxpE,OAI1C,OAFAspE,EAAgB51G,GAAS+6B,EAElBA,EAvBQg7E,CAAgBvV,EAAMrgB,EAAkB7zC,QAGjD0zC,EAAK,IAAIJ,GADD,IAAIo2B,GAAc71B,EAAkB52F,MAAQ+iD,GACjB6zC,EAAkB5iC,QAK3D,OAJAyiC,EAAGhgF,KAAOmgF,EAAkBngF,KAE5B21G,EAAsB31G,GAASggF,EAExBA,EAmBR,MAAM7zE,EAAWq0F,EAAKjiD,0BAA4B,IAAIi3D,GAA4B,IAAI39E,GAEhFjkC,EAAQ4sG,EAAK7jF,KAAK/oB,MAExB,QAAexI,IAAVwI,EAAsB,CAE1B,MAAMqiH,EAAa,IAAID,GAAcpiH,EAAMrK,MAAQqK,EAAMe,OACzDwX,EAASgsB,SAAU,IAAIxF,GAAiBsjF,EAAY,IAIrD,MAAMprH,EAAa21G,EAAK7jF,KAAK9xB,WAE7B,IAAM,MAAMmB,KAAOnB,EAAa,CAE/B,MAAMX,EAAYW,EAAYmB,GAC9B,IAAIkqH,EAEJ,GAAKhsH,EAAUkiD,6BAA+B,CAG7C8pE,EAAkB,IAAIh2B,GADI21B,EAAsBrV,EAAK7jF,KAAMzyB,EAAUyyB,MACAzyB,EAAU0oC,SAAU1oC,EAAUiQ,OAAQjQ,EAAU+hC,gBAE/G,CAEN,MAAMgqF,EAAa,IAAID,GAAc9rH,EAAUX,MAAQW,EAAUyK,OAEjEuhH,EAAkB,IADYhsH,EAAU40D,2BAA6B22D,GAA2B9iF,IACnDsjF,EAAY/rH,EAAU0oC,SAAU1oC,EAAU+hC,iBAIhE7gC,IAAnBlB,EAAU0B,OAAqBsqH,EAAgBtqH,KAAO1B,EAAU0B,MACrEugB,EAAS/d,aAAcpC,EAAKkqH,GAI7B,MAAMp+E,EAAkB0oE,EAAK7jF,KAAKmb,gBAElC,GAAKA,EAEJ,IAAM,MAAM9rC,KAAO8rC,EAAkB,CAEpC,MAAMqE,EAAiBrE,EAAiB9rC,GAElC2I,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAG0W,EAAK6wB,EAAeroC,OAAQc,EAAI0W,EAAI1W,IAAO,CAE3D,MAAM1K,EAAYiyC,EAAgBvnC,GAClC,IAAIshH,EAEJ,GAAKhsH,EAAUkiD,6BAA+B,CAG7C8pE,EAAkB,IAAIh2B,GADI21B,EAAsBrV,EAAK7jF,KAAMzyB,EAAUyyB,MACAzyB,EAAU0oC,SAAU1oC,EAAUiQ,OAAQjQ,EAAU+hC,gBAE/G,CAGNiqF,EAAkB,IAAIvjF,GADH,IAAIqjF,GAAc9rH,EAAUX,MAAQW,EAAUyK,OACdzK,EAAU0oC,SAAU1oC,EAAU+hC,iBAI1D7gC,IAAnBlB,EAAU0B,OAAqBsqH,EAAgBtqH,KAAO1B,EAAU0B,MACrE+I,EAAM/L,KAAMstH,GAIb/pG,EAAS2rB,gBAAiB9rC,GAAQ2I,EAMP6rG,EAAK7jF,KAAKob,uBAItC5rB,EAAS4rB,sBAAuB,GAIjC,MAAMlC,EAAS2qE,EAAK7jF,KAAKkZ,QAAU2qE,EAAK7jF,KAAKw5F,WAAa3V,EAAK7jF,KAAKy5F,QAEpE,QAAgBhrH,IAAXyqC,EAEJ,IAAM,IAAIjhC,EAAI,EAAGkB,EAAI+/B,EAAO/hC,OAAQc,IAAMkB,IAAMlB,EAAI,CAEnD,MAAM0hC,EAAQT,EAAQjhC,GAEtBuX,EAASmsB,SAAUhC,EAAM/Y,MAAO+Y,EAAMnrB,MAAOmrB,EAAMlK,eAMrD,MAAM4J,EAAiBwqE,EAAK7jF,KAAKqZ,eAEjC,QAAwB5qC,IAAnB4qC,EAA+B,CAEnC,MAAM17B,EAAS,IAAI2N,OAEY7c,IAA1B4qC,EAAe17B,QAEnBA,EAAOc,UAAW46B,EAAe17B,QAIlC6R,EAAS6pB,eAAiB,IAAI1nB,EAAQhU,EAAQ07B,EAAe3rB,QAO9D,OAHKm2F,EAAK50G,OAAOugB,EAASvgB,KAAO40G,EAAK50G,MACjC40G,EAAK9nF,WAAWvM,EAASuM,SAAW8nF,EAAK9nF,UAEvCvM,KAMT,MAAM6pG,GAAe,CACpBhjF,UAAWA,UACXE,WAAYA,WAEZE,kBAAgD,oBAAtBA,kBAAoCA,kBAAoBF,WAClFI,WAAYA,WACZE,YAAaA,YACbE,WAAYA,WACZE,YAAaA,YACbE,aAAcA,aACdE,aAAcA,cAGf,SAASqiF,GAActO,GAEtBD,GAAO13G,KAAM3F,KAAMs9G,GAIpBsO,GAAatqH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE1E4B,YAAa0oH,GAEblO,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERihE,EAAuB,KAAdjhE,KAAKihE,KAAgBwpD,GAA4BvzG,GAAQlX,KAAKihE,KAC7EjhE,KAAKw9G,aAAex9G,KAAKw9G,cAAgBv8C,EAEzC,MAAM+7C,EAAS,IAAImB,GAAYtpE,EAAMyoE,SACrCN,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOiB,iBAAkBj+G,KAAKy9G,eAC9BT,EAAOU,KAAMxmG,GAAK,SAAW4zF,GAE5B,IAAIiL,EAAO,KAEX,IAECA,EAAO72G,KAAKG,MAAOyrG,GAElB,MAAQ96F,GAMT,YAJiBrP,IAAZu7G,GAAwBA,EAASlsG,QAEtC1R,QAAQ0R,MAAO,mCAAsCkH,EAAM,IAAKlH,EAAMo9E,SAMvE,MAAMt2E,EAAWi/F,EAAKj/F,cAEJnW,IAAbmW,QAA4CnW,IAAlBmW,EAAShY,MAAsD,aAAhCgY,EAAShY,KAAK0D,cAO5EqyC,EAAMx1C,MAAO02G,EAAMiG,GALlB19G,QAAQ0R,MAAO,kCAAqCkH,KAOnD+kG,EAAYC,IAIhB78G,MAAO,SAAW02G,EAAMiG,GAEvB,MAAM9qF,EAASlxB,KAAK6rH,WAAY9V,EAAK7kF,QAC/BF,EAAahxB,KAAK8rH,gBAAiB/V,EAAK/kF,WAAYE,GAEpDja,EAASjX,KAAK+rH,YAAahW,EAAK9+F,QAAQ,gBAE7BtW,IAAXq7G,GAAuBA,EAAQ96F,MAI/BrK,EAAW7W,KAAKgsH,cAAejW,EAAKl/F,SAAUI,GAC9Cga,EAAYjxB,KAAKisH,eAAgBlW,EAAK9kF,UAAWpa,GAEjDqK,EAASlhB,KAAKksH,YAAanW,EAAK70F,OAAQ8P,EAAYC,GAc1D,OAZK8kF,EAAKyE,aAETt5F,EAAOs5F,WAAax6G,KAAKmsH,gBAAiBpW,EAAKyE,kBAI3B75G,IAAhBo1G,EAAK9+F,QAA+C,IAAvB8+F,EAAK9+F,OAAO5N,aAE7B1I,IAAXq7G,GAAuBA,EAAQ96F,GAI9BA,GAIR2qG,WAAY,SAAW9V,GAEtB,MAAM7kF,EAAS,GAEf,QAAcvwB,IAATo1G,EAEJ,IAAM,IAAI5rG,EAAI,EAAGC,EAAI2rG,EAAK1sG,OAAQc,EAAIC,EAAGD,IAAO,CAE/C,MAAMynB,GAAQ,IAAI00F,IAAQ1C,SAAU7N,EAAM5rG,IAE1C+mB,EAAQU,EAAMrc,MAASqc,EAMzB,OAAOV,GAIR46F,gBAAiB,SAAW/V,EAAM7kF,GAEjC,MAAMF,EAAa,GACnB,IAAIo7F,EAEJ,QAAczrH,IAATo1G,EAAqB,CAEzB,MAAMsW,EAAuB,IAAIpB,GAEjC,IAAM,IAAI9gH,EAAI,EAAGC,EAAI2rG,EAAK1sG,OAAQc,EAAIC,EAAGD,IAAO,CAE/C,IAAIuX,EACJ,MAAMwQ,EAAO6jF,EAAM5rG,GAEnB,OAAS+nB,EAAKpzB,MAEb,IAAK,gBACL,IAAK,sBAEJ4iB,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAK/jB,MACL+jB,EAAK9jB,OACL8jB,EAAK2mB,cACL3mB,EAAK4mB,gBAGN,MAED,IAAK,cACL,IAAK,oBACL,IAAK,eAEJp3B,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAK/jB,MACL+jB,EAAK9jB,OACL8jB,EAAK0mB,MACL1mB,EAAK2mB,cACL3mB,EAAK4mB,eACL5mB,EAAK6mB,eAGN,MAED,IAAK,iBACL,IAAK,uBAEJr3B,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAKk6E,SACLl6E,EAAKm5E,WACLn5E,EAAKo5E,aAGN,MAED,IAAK,mBACL,IAAK,yBAEJ5pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAK+6E,UACL/6E,EAAKg7E,aACLh7E,EAAK9jB,OACL8jB,EAAKmsE,eACLnsE,EAAK4mB,eACL5mB,EAAKi7E,UACLj7E,EAAKm5E,WACLn5E,EAAKo5E,aAGN,MAED,IAAK,eACL,IAAK,qBAEJ5pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAK9jB,OACL8jB,EAAKmsE,eACLnsE,EAAK4mB,eACL5mB,EAAKi7E,UACLj7E,EAAKm5E,WACLn5E,EAAKo5E,aAGN,MAED,IAAK,iBACL,IAAK,uBAEJ5pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAK2mB,cACL3mB,EAAK4mB,eACL5mB,EAAKi5E,SACLj5E,EAAKk5E,UACLl5E,EAAKm5E,WACLn5E,EAAKo5E,aAGN,MAED,IAAK,uBACL,IAAK,6BACL,IAAK,sBACL,IAAK,4BACL,IAAK,qBACL,IAAK,2BACL,IAAK,sBACL,IAAK,4BAEJ5pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAKmhE,QAGN,MAED,IAAK,eACL,IAAK,qBAEJ3xE,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAK05E,YACL15E,EAAK25E,YACL35E,EAAK45E,cACL55E,EAAK65E,YACL75E,EAAKm5E,WACLn5E,EAAKo5E,aAGN,MAED,IAAK,gBACL,IAAK,sBAEJ5pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAKitE,KACLjtE,EAAKmsE,eACLnsE,EAAKksE,gBACLlsE,EAAK2tE,KAGN,MAED,IAAK,oBACL,IAAK,0BAEJn+E,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKtS,OACLsS,EAAKitE,KACLjtE,EAAKksE,gBACLlsE,EAAKmsE,eACLnsE,EAAK1xB,EACL0xB,EAAK/kB,GAGN,MAED,IAAK,eACL,IAAK,qBAIJuU,EAAW,IAAIqsF,GAAY77E,EAAKpzB,OAC/B,IAAIknH,GAAQ9zF,EAAK+uC,KAAKniE,OAAS8kH,SAAU1xF,EAAK+uC,MAC9C/uC,EAAKksE,gBACLlsE,EAAKtS,OACLsS,EAAKmsE,eACLnsE,EAAKosE,QAGN,MAED,IAAK,gBACL,IAAK,sBAEJ58E,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAKvR,OACLuR,EAAKk6E,SACLl6E,EAAKi5E,SACLj5E,EAAKk5E,WAGN,MAED,IAAK,qBACL,IAAK,2BAEJ1pF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BozB,EAAK8Y,SACL9Y,EAAKgf,QACLhf,EAAKtS,OACLsS,EAAKo6F,SAGN,MAED,IAAK,gBACL,IAAK,sBAEJF,EAAiB,GAEjB,IAAM,IAAI7oG,EAAI,EAAGmsB,EAAKxd,EAAKhB,OAAO7nB,OAAQka,EAAImsB,EAAInsB,IAAO,CAExD,MAAMqO,EAAQV,EAAQgB,EAAKhB,OAAQ3N,IAEnC6oG,EAAejuH,KAAMyzB,GAItBlQ,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BstH,EACAl6F,EAAKozE,eAGN,MAGD,IAAK,kBACL,IAAK,wBAEJ8mB,EAAiB,GAEjB,IAAM,IAAI7oG,EAAI,EAAGmsB,EAAKxd,EAAKhB,OAAO7nB,OAAQka,EAAImsB,EAAInsB,IAAO,CAExD,MAAMqO,EAAQV,EAAQgB,EAAKhB,OAAQ3N,IAEnC6oG,EAAejuH,KAAMyzB,GAItB,MAAMi0E,EAAc3zE,EAAKp0B,QAAQ+nG,iBAEZllG,IAAhBklG,IAEJ3zE,EAAKp0B,QAAQ+nG,aAAc,IAAImgB,GAAQngB,EAAY/mG,OAAS8kH,SAAU/d,IAIvEnkF,EAAW,IAAIqsF,GAAY77E,EAAKpzB,MAC/BstH,EACAl6F,EAAKp0B,SAGN,MAED,IAAK,iBACL,IAAK,0BAEJ4jB,EAAW2qG,EAAqBhtH,MAAO6yB,GAEvC,MAED,IAAK,WAEJ5zB,QAAQ0R,MAAO,oEAEf,MAED,QAEC1R,QAAQC,KAAM,kDAAoD2zB,EAAKpzB,KAAO,KAE9E,SAIF4iB,EAASnM,KAAO2c,EAAK3c,UAEF5U,IAAduxB,EAAK/wB,OAAqBugB,EAASvgB,KAAO+wB,EAAK/wB,OACjB,IAA9BugB,EAAS8rB,uBAA+C7sC,IAAlBuxB,EAAKjE,WAAyBvM,EAASuM,SAAWiE,EAAKjE,UAElG+C,EAAYkB,EAAK3c,MAASmM,GAM5B,OAAOsP,GAIRi7F,eAAgB,SAAWlW,EAAMl/F,GAEhC,MAAMmb,EAAQ,GACRf,EAAY,GAElB,QAActwB,IAATo1G,EAAqB,CAEzB,MAAMiH,EAAS,IAAIqN,GACnBrN,EAAOwN,YAAa3zG,GAEpB,IAAM,IAAI1M,EAAI,EAAGC,EAAI2rG,EAAK1sG,OAAQc,EAAIC,EAAGD,IAAO,CAE/C,MAAM+nB,EAAO6jF,EAAM5rG,GAEnB,GAAmB,kBAAd+nB,EAAKpzB,KAA2B,CAIpC,MAAMoL,EAAQ,GAEd,IAAM,IAAIqZ,EAAI,EAAGA,EAAI2O,EAAKjB,UAAU5nB,OAAQka,IAAO,CAElD,MAAMsO,EAAWK,EAAKjB,UAAW1N,QAED5iB,IAA3BqxB,EAAOH,EAAStc,QAEpByc,EAAOH,EAAStc,MAASynG,EAAO39G,MAAOwyB,IAIxC3nB,EAAM/L,KAAM6zB,EAAOH,EAAStc,OAI7B0b,EAAWiB,EAAK3c,MAASrL,YAIGvJ,IAAvBqxB,EAAOE,EAAK3c,QAEhByc,EAAOE,EAAK3c,MAASynG,EAAO39G,MAAO6yB,IAIpCjB,EAAWiB,EAAK3c,MAASyc,EAAOE,EAAK3c,OAQxC,OAAO0b,GAIRk7F,gBAAiB,SAAWpW,GAE3B,MAAMyE,EAAa,GAEnB,IAAM,IAAIrwG,EAAI,EAAGA,EAAI4rG,EAAK1sG,OAAQc,IAAO,CAExC,MAAM+nB,EAAO6jF,EAAM5rG,GAEb6nG,EAAO4D,GAAcv2G,MAAO6yB,QAEfvxB,IAAduxB,EAAK3c,OAAqBy8F,EAAKz8F,KAAO2c,EAAK3c,MAEhDilG,EAAWr8G,KAAM6zG,GAIlB,OAAOwI,GAIRuR,YAAa,SAAWhW,EAAMiG,GAE7B,MAAMnnE,EAAQ70C,KACRiX,EAAS,GAEf,IAAI+lG,EAEJ,SAASuP,EAAWr1G,GAInB,OAFA29B,EAAMyoE,QAAQb,UAAWvlG,GAElB8lG,EAAOU,KAAMxmG,GAAK,WAExB29B,EAAMyoE,QAAQZ,QAASxlG,UAErBvW,GAAW,WAEbk0C,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,MAMzB,QAAcvW,IAATo1G,GAAsBA,EAAK1sG,OAAS,EAAI,CAE5C,MAAMi0G,EAAU,IAAIvB,GAAgBC,GAEpCgB,EAAS,IAAIsB,GAAahB,GAC1BN,EAAOc,eAAgB99G,KAAKu9G,aAE5B,IAAM,IAAIpzG,EAAI,EAAG0W,EAAKk1F,EAAK1sG,OAAQc,EAAI0W,EAAI1W,IAAO,CAEjD,MAAM+J,EAAQ6hG,EAAM5rG,GACd+M,EAAMhD,EAAMgD,IAElB,GAAKjY,MAAMkY,QAASD,GAAQ,CAI3BD,EAAQ/C,EAAMqB,MAAS,GAEvB,IAAM,IAAIgO,EAAI,EAAGmsB,EAAKx4B,EAAI7N,OAAQka,EAAImsB,EAAInsB,IAAO,CAEhD,MAAMipG,EAAat1G,EAAKqM,GAElB09C,EAAO,4BAA4B55D,KAAMmlH,GAAeA,EAAa33E,EAAM2oE,aAAegP,EAEhGv1G,EAAQ/C,EAAMqB,MAAOpX,KAAMouH,EAAWtrD,SAIjC,CAIN,MAAMA,EAAO,4BAA4B55D,KAAM6M,EAAMgD,KAAQhD,EAAMgD,IAAM29B,EAAM2oE,aAAetpG,EAAMgD,IAEpGD,EAAQ/C,EAAMqB,MAASg3G,EAAWtrD,KAQrC,OAAOhqD,GAIR+0G,cAAe,SAAWjW,EAAM9+F,GAE/B,SAASw1G,EAAe5tH,EAAOC,GAE9B,MAAsB,iBAAVD,EAA4BA,GAExCP,QAAQC,KAAM,uEAAwEM,GAE/EC,EAAMD,IAId,MAAMgY,EAAW,GAEjB,QAAclW,IAATo1G,EAEJ,IAAM,IAAI5rG,EAAI,EAAGC,EAAI2rG,EAAK1sG,OAAQc,EAAIC,EAAGD,IAAO,CAE/C,MAAM+nB,EAAO6jF,EAAM5rG,GAcnB,IAAI+O,OAZgBvY,IAAfuxB,EAAKhe,OAET5V,QAAQC,KAAM,+CAAgD2zB,EAAK3c,WAItC5U,IAAzBsW,EAAQib,EAAKhe,QAEjB5V,QAAQC,KAAM,sCAAuC2zB,EAAKhe,OAQ1DgF,EAFIja,MAAMkY,QAASF,EAAQib,EAAKhe,QAEtB,IAAIonD,GAAarkD,EAAQib,EAAKhe,QAI9B,IAAIY,EAASmC,EAAQib,EAAKhe,QAIrCgF,EAAQ80B,aAAc,EAEtB90B,EAAQ3D,KAAO2c,EAAK3c,UAED5U,IAAduxB,EAAK/wB,OAAqB+X,EAAQ/X,KAAO+wB,EAAK/wB,WAE7BR,IAAjBuxB,EAAKnd,UAAwBmE,EAAQnE,QAAU03G,EAAev6F,EAAKnd,QAAS23G,UAE5D/rH,IAAhBuxB,EAAKxiB,QAAuBwJ,EAAQxJ,OAAOiB,UAAWuhB,EAAKxiB,aAC3C/O,IAAhBuxB,EAAKtc,QAAuBsD,EAAQtD,OAAOjF,UAAWuhB,EAAKtc,aAC3CjV,IAAhBuxB,EAAKriB,QAAuBqJ,EAAQrJ,OAAOc,UAAWuhB,EAAKriB,aACzClP,IAAlBuxB,EAAKve,WAAyBuF,EAAQvF,SAAWue,EAAKve,eAExChT,IAAduxB,EAAKlb,OAETkC,EAAQlE,MAAQy3G,EAAev6F,EAAKlb,KAAM,GAAK21G,IAC/CzzG,EAAQjE,MAAQw3G,EAAev6F,EAAKlb,KAAM,GAAK21G,UAI3BhsH,IAAhBuxB,EAAK9c,SAAuB8D,EAAQ9D,OAAS8c,EAAK9c,aACpCzU,IAAduxB,EAAKpzB,OAAqBoa,EAAQpa,KAAOozB,EAAKpzB,WAC5B6B,IAAlBuxB,EAAK5c,WAAyB4D,EAAQ5D,SAAW4c,EAAK5c,eAEnC3U,IAAnBuxB,EAAK/c,YAA0B+D,EAAQ/D,UAAYs3G,EAAev6F,EAAK/c,UAAWy3G,UAC/DjsH,IAAnBuxB,EAAKhd,YAA0BgE,EAAQhE,UAAYu3G,EAAev6F,EAAKhd,UAAW03G,UAC9DjsH,IAApBuxB,EAAK7c,aAA2B6D,EAAQ7D,WAAa6c,EAAK7c,iBAE3C1U,IAAfuxB,EAAKlc,QAAsBkD,EAAQlD,MAAQkc,EAAKlc,YAEtBrV,IAA1BuxB,EAAKnc,mBAAiCmD,EAAQnD,iBAAmBmc,EAAKnc,uBAC7CpV,IAAzBuxB,EAAKjc,kBAAgCiD,EAAQjD,gBAAkBic,EAAKjc,iBAEzEY,EAAUqb,EAAK3c,MAAS2D,EAM1B,OAAOrC,GAIRq1G,YAAa,SAAWh6F,EAAMlB,EAAYC,GAEzC,IAAI/P,EAkDAQ,EAAUmQ,EAhDd,SAASg7F,EAAa1rH,GAQrB,YAN4BR,IAAvBqwB,EAAY7vB,IAEhB7C,QAAQC,KAAM,yCAA0C4C,GAIlD6vB,EAAY7vB,GAIpB,SAAS2rH,EAAa3rH,GAErB,QAAcR,IAATQ,EAAL,CAEA,GAAKlC,MAAMkY,QAAShW,GAAS,CAE5B,MAAM+I,EAAQ,GAEd,IAAM,IAAIC,EAAI,EAAGC,EAAIjJ,EAAKkI,OAAQc,EAAIC,EAAGD,IAAO,CAE/C,MAAMoL,EAAOpU,EAAMgJ,QAEQxJ,IAAtBswB,EAAW1b,IAEfjX,QAAQC,KAAM,yCAA0CgX,GAIzDrL,EAAM/L,KAAM8yB,EAAW1b,IAIxB,OAAOrL,EAUR,YAN2BvJ,IAAtBswB,EAAW9vB,IAEf7C,QAAQC,KAAM,yCAA0C4C,GAIlD8vB,EAAW9vB,IAMnB,OAAS+wB,EAAKpzB,MAEb,IAAK,QAEJoiB,EAAS,IAAIg0E,QAEYv0F,IAApBuxB,EAAKy8B,YAEJvvD,OAAOoJ,UAAW0pB,EAAKy8B,cAE3BztC,EAAOytC,WAAa,IAAIjvB,GAAOxN,EAAKy8B,kBAMpBhuD,IAAbuxB,EAAK8P,MAEc,QAAlB9P,EAAK8P,IAAIljC,KAEboiB,EAAO8gB,IAAM,IAAIizD,GAAK/iE,EAAK8P,IAAI3B,MAAOnO,EAAK8P,IAAI1W,KAAM4G,EAAK8P,IAAIzW,KAEjC,YAAlB2G,EAAK8P,IAAIljC,OAEpBoiB,EAAO8gB,IAAM,IAAIgzD,GAAS9iE,EAAK8P,IAAI3B,MAAOnO,EAAK8P,IAAIimD,WAMrD,MAED,IAAK,oBAEJ/mE,EAAS,IAAIu6B,GAAmBvpB,EAAKwpB,IAAKxpB,EAAKypB,OAAQzpB,EAAK5G,KAAM4G,EAAK3G,UAEnD5qB,IAAfuxB,EAAK2pB,QAAsB36B,EAAO26B,MAAQ3pB,EAAK2pB,YACjCl7C,IAAduxB,EAAK0pB,OAAqB16B,EAAO06B,KAAO1pB,EAAK0pB,WAC1Bj7C,IAAnBuxB,EAAK6pB,YAA0B76B,EAAO66B,UAAY7pB,EAAK6pB,gBACnCp7C,IAApBuxB,EAAK8pB,aAA2B96B,EAAO86B,WAAa9pB,EAAK8pB,iBAC3Cr7C,IAAduxB,EAAK4pB,OAAqB56B,EAAO46B,KAAO98C,OAAOuG,OAAQ,GAAI2sB,EAAK4pB,OAErE,MAED,IAAK,qBAEJ56B,EAAS,IAAIkmG,GAAoBl1F,EAAKhH,KAAMgH,EAAK/G,MAAO+G,EAAK9G,IAAK8G,EAAK7G,OAAQ6G,EAAK5G,KAAM4G,EAAK3G,UAE5E5qB,IAAduxB,EAAK0pB,OAAqB16B,EAAO06B,KAAO1pB,EAAK0pB,WAC/Bj7C,IAAduxB,EAAK4pB,OAAqB56B,EAAO46B,KAAO98C,OAAOuG,OAAQ,GAAI2sB,EAAK4pB,OAErE,MAED,IAAK,eAEJ56B,EAAS,IAAIqmG,GAAcr1F,EAAKmO,MAAOnO,EAAKq9C,WAE5C,MAED,IAAK,mBAEJruD,EAAS,IAAIomG,GAAkBp1F,EAAKmO,MAAOnO,EAAKq9C,WAEhD,MAED,IAAK,aAEJruD,EAAS,IAAIimG,GAAYj1F,EAAKmO,MAAOnO,EAAKq9C,UAAWr9C,EAAKhD,SAAUgD,EAAKi7B,OAEzE,MAED,IAAK,gBAEJjsC,EAAS,IAAIsmG,GAAet1F,EAAKmO,MAAOnO,EAAKq9C,UAAWr9C,EAAK/jB,MAAO+jB,EAAK9jB,QAEzE,MAED,IAAK,YAEJ8S,EAAS,IAAI4lG,GAAW50F,EAAKmO,MAAOnO,EAAKq9C,UAAWr9C,EAAKhD,SAAUgD,EAAKpiB,MAAOoiB,EAAKg+C,SAAUh+C,EAAKi7B,OAEnG,MAED,IAAK,kBAEJjsC,EAAS,IAAIslG,GAAiBt0F,EAAKmO,MAAOnO,EAAK67B,YAAa77B,EAAKq9C,WAEjE,MAED,IAAK,aAEJruD,GAAS,IAAIkpG,IAAaxG,SAAU1xF,GAEpC,MAED,IAAK,cAEJ5zB,QAAQC,KAAM,sEAEf,IAAK,OAEJmjB,EAAWmrG,EAAa36F,EAAKxQ,UAC7BmQ,EAAWi7F,EAAa56F,EAAKL,UAE7B3Q,EAAS,IAAI0xB,GAAMlxB,EAAUmQ,GAE7B,MAED,IAAK,gBAEJnQ,EAAWmrG,EAAa36F,EAAKxQ,UAC7BmQ,EAAWi7F,EAAa56F,EAAKL,UAC7B,MAAMnR,EAAQwR,EAAKxR,MACb6Q,EAAiBW,EAAKX,eAE5BrQ,EAAS,IAAI83E,GAAet3E,EAAUmQ,EAAUnR,GAChDQ,EAAOqQ,eAAiB,IAAI2W,GAAiB,IAAImB,aAAc9X,EAAernB,OAAS,IAEvF,MAED,IAAK,MAEJgX,EAAS,IAAI81E,GAEb,MAED,IAAK,OAEJ91E,EAAS,IAAI24E,GAAMgzB,EAAa36F,EAAKxQ,UAAYorG,EAAa56F,EAAKL,UAAYK,EAAKgjC,MAEpF,MAED,IAAK,WAEJh0C,EAAS,IAAIy5E,GAAUkyB,EAAa36F,EAAKxQ,UAAYorG,EAAa56F,EAAKL,WAEvE,MAED,IAAK,eAEJ3Q,EAAS,IAAIw5E,GAAcmyB,EAAa36F,EAAKxQ,UAAYorG,EAAa56F,EAAKL,WAE3E,MAED,IAAK,aACL,IAAK,SAEJ3Q,EAAS,IAAI85E,GAAQ6xB,EAAa36F,EAAKxQ,UAAYorG,EAAa56F,EAAKL,WAErE,MAED,IAAK,SAEJ3Q,EAAS,IAAIu1E,GAAQq2B,EAAa56F,EAAKL,WAEvC,MAED,IAAK,QAEJ3Q,EAAS,IAAI2hE,GAEb,MAED,QAEC3hE,EAAS,IAAIiM,GA2Cf,GAvCAjM,EAAO3L,KAAO2c,EAAK3c,UAEA5U,IAAduxB,EAAK/wB,OAAqB+f,EAAO/f,KAAO+wB,EAAK/wB,WAE7BR,IAAhBuxB,EAAKxf,QAETwO,EAAOxO,OAAO/B,UAAWuhB,EAAKxf,aAEC/R,IAA1BuxB,EAAKrc,mBAAiCqL,EAAOrL,iBAAmBqc,EAAKrc,kBACrEqL,EAAOrL,kBAAmBqL,EAAOxO,OAAO4b,UAAWpN,EAAOkJ,SAAUlJ,EAAO3F,WAAY2F,EAAOmJ,cAI5E1pB,IAAlBuxB,EAAK9H,UAAyBlJ,EAAOkJ,SAASzZ,UAAWuhB,EAAK9H,eAC5CzpB,IAAlBuxB,EAAKve,UAAyBuN,EAAOvN,SAAShD,UAAWuhB,EAAKve,eAC1ChT,IAApBuxB,EAAK3W,YAA2B2F,EAAO3F,WAAW5K,UAAWuhB,EAAK3W,iBACnD5a,IAAfuxB,EAAK7H,OAAsBnJ,EAAOmJ,MAAM1Z,UAAWuhB,EAAK7H,aAIrC1pB,IAApBuxB,EAAKrE,aAA2B3M,EAAO2M,WAAaqE,EAAKrE,iBAClCltB,IAAvBuxB,EAAKpE,gBAA8B5M,EAAO4M,cAAgBoE,EAAKpE,eAE/DoE,EAAKi9B,cAEiBxuD,IAArBuxB,EAAKi9B,OAAO2gB,OAAqB5uD,EAAOiuC,OAAO2gB,KAAO59C,EAAKi9B,OAAO2gB,WACvCnvE,IAA3BuxB,EAAKi9B,OAAO4gB,aAA2B7uD,EAAOiuC,OAAO4gB,WAAa79C,EAAKi9B,OAAO4gB,iBACvDpvE,IAAvBuxB,EAAKi9B,OAAOvvC,SAAuBsB,EAAOiuC,OAAOvvC,OAASsS,EAAKi9B,OAAOvvC,aAC9Cjf,IAAxBuxB,EAAKi9B,OAAO6gB,SAAwB9uD,EAAOiuC,OAAO6gB,QAAQr/D,UAAWuhB,EAAKi9B,OAAO6gB,cAC1DrvE,IAAvBuxB,EAAKi9B,OAAO7wC,SAAuB4C,EAAOiuC,OAAO7wC,OAASte,KAAKksH,YAAah6F,EAAKi9B,OAAO7wC,eAIxE3d,IAAjBuxB,EAAKtE,UAAwB1M,EAAO0M,QAAUsE,EAAKtE,cAC5BjtB,IAAvBuxB,EAAKnE,gBAA8B7M,EAAO6M,cAAgBmE,EAAKnE,oBAC1CptB,IAArBuxB,EAAKlE,cAA4B9M,EAAO8M,YAAckE,EAAKlE,kBACzCrtB,IAAlBuxB,EAAKjE,WAAyB/M,EAAO+M,SAAWiE,EAAKjE,eACrCttB,IAAhBuxB,EAAK7F,SAAuBnL,EAAOmL,OAAOF,KAAO+F,EAAK7F,aAEpC1rB,IAAlBuxB,EAAKnQ,SAAyB,CAElC,MAAMA,EAAWmQ,EAAKnQ,SAEtB,IAAM,IAAI5X,EAAI,EAAGA,EAAI4X,EAAS1Y,OAAQc,IAErC+W,EAAOD,IAAKjhB,KAAKksH,YAAanqG,EAAU5X,GAAK6mB,EAAYC,IAM3D,GAAmB,QAAdiB,EAAKpzB,KAAiB,MAED6B,IAApBuxB,EAAK8hD,aAA2B9yD,EAAO8yD,WAAa9hD,EAAK8hD,YAE9D,MAAMkjB,EAAShlE,EAAKglE,OAEpB,IAAM,IAAI9sF,EAAI,EAAGA,EAAI8sF,EAAO7tF,OAAQe,IAAO,CAE1C,MAAMuoF,EAAQuE,EAAQ9sF,GAChBgoB,EAAQlR,EAAOgP,oBAAqB,OAAQyiE,EAAMzxE,aAEzCvgB,IAAVyxB,GAEJlR,EAAOq2E,SAAUnlE,EAAOugE,EAAMzjE,WAQjC,OAAOhO,KAMT,MAAMwrG,GAAkB,CACvBK,UAn+wCiB,IAo+wCjBC,sBAn+wC6B,IAo+wC7BC,sBAn+wC6B,IAo+wC7BC,iCAn+wCwC,IAo+wCxCC,iCAn+wCwC,IAo+wCxCC,wBAn+wC+B,IAo+wC/BC,wBAn+wC+B,KAs+wC1BV,GAAmB,CACxBW,eAt+wCsB,IAu+wCtBC,oBAt+wC2B,KAu+wC3BC,uBAt+wC8B,MAy+wCzBZ,GAAiB,CACtBa,cAz+wCqB,KA0+wCrBC,2BAz+wCkC,KA0+wClCC,0BAz+wCiC,KA0+wCjCC,aAz+wCoB,KA0+wCpBC,0BAz+wCiC,KA0+wCjCC,yBAz+wCgC,MA4+wCjC,SAASC,GAAmBzQ,GAEO,oBAAtB0Q,mBAEX1vH,QAAQC,KAAM,+DAIO,oBAAV0vH,OAEX3vH,QAAQC,KAAM,mDAIf8+G,GAAO13G,KAAM3F,KAAMs9G,GAEnBt9G,KAAKlC,QAAU,CAAEiY,iBAAkB,QA6EpC,SAASm4G,KAERluH,KAAKlB,KAAO,YAEZkB,KAAKqgC,MAAQ,IAAIX,GAEjB1/B,KAAKmuH,SAAW,GAChBnuH,KAAKouH,YAAc,KAyRpB,SAASC,GAAMn8F,GAEdlyB,KAAKlB,KAAO,OAEZkB,KAAKkyB,KAAOA,EA4Db,SAASo8F,GAAYC,EAAMlkG,EAAO0yB,EAASC,EAAS9qB,GAEnD,MAAMs8F,EAAQt8F,EAAKu8F,OAAQF,IAAUr8F,EAAKu8F,OAAQ,KAElD,IAAOD,EAIN,YAFAlwH,QAAQ0R,MAAO,0BAA4Bu+G,EAAO,oCAAsCr8F,EAAKw8F,WAAa,KAM3G,MAAMztD,EAAO,IAAIitD,GAEjB,IAAItlH,EAAGiD,EAAG8iH,EAAKC,EAAKC,EAAMC,EAAMC,EAAMC,EAEtC,GAAKR,EAAMjgB,EAAI,CAEd,MAAM0gB,EAAUT,EAAMU,iBAAoBV,EAAMU,eAAiBV,EAAMjgB,EAAE7rC,MAAO,MAEhF,IAAM,IAAIv4D,EAAI,EAAGC,EAAI6kH,EAAQ5lH,OAAQc,EAAIC,GAAK,CAI7C,OAFe6kH,EAAS9kH,MAIvB,IAAK,IAEJvB,EAAIqmH,EAAS9kH,KAASkgB,EAAQ0yB,EAC9BlxC,EAAIojH,EAAS9kH,KAASkgB,EAAQ2yB,EAE9BikB,EAAKknD,OAAQv/G,EAAGiD,GAEhB,MAED,IAAK,IAEJjD,EAAIqmH,EAAS9kH,KAASkgB,EAAQ0yB,EAC9BlxC,EAAIojH,EAAS9kH,KAASkgB,EAAQ2yB,EAE9BikB,EAAKmnD,OAAQx/G,EAAGiD,GAEhB,MAED,IAAK,IAEJ8iH,EAAMM,EAAS9kH,KAASkgB,EAAQ0yB,EAChC6xE,EAAMK,EAAS9kH,KAASkgB,EAAQ2yB,EAChC6xE,EAAOI,EAAS9kH,KAASkgB,EAAQ0yB,EACjC+xE,EAAOG,EAAS9kH,KAASkgB,EAAQ2yB,EAEjCikB,EAAKonD,iBAAkBwG,EAAMC,EAAMH,EAAKC,GAExC,MAED,IAAK,IAEJD,EAAMM,EAAS9kH,KAASkgB,EAAQ0yB,EAChC6xE,EAAMK,EAAS9kH,KAASkgB,EAAQ2yB,EAChC6xE,EAAOI,EAAS9kH,KAASkgB,EAAQ0yB,EACjC+xE,EAAOG,EAAS9kH,KAASkgB,EAAQ2yB,EACjC+xE,EAAOE,EAAS9kH,KAASkgB,EAAQ0yB,EACjCiyE,EAAOC,EAAS9kH,KAASkgB,EAAQ2yB,EAEjCikB,EAAKunD,cAAeqG,EAAMC,EAAMC,EAAMC,EAAML,EAAKC,KAUrD,MAAO,CAAE7xE,QAASyxE,EAAMW,GAAK9kG,EAAO42C,KAAMA,GAI3C,SAASmuD,GAAY9R,GAEpBD,GAAO13G,KAAM3F,KAAMs9G,GA8CpB,IAAI1zB,GAviBJmkC,GAAkBzsH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAE/E4B,YAAa6qH,GAEbsB,qBAAqB,EAErBC,WAAY,SAAqBxxH,GAIhC,OAFAkC,KAAKlC,QAAUA,EAERkC,MAIR09G,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,QAE5Bv7G,IAARuW,IAAoBA,EAAM,SAEZvW,IAAdX,KAAKihE,OAAqB/pD,EAAMlX,KAAKihE,KAAO/pD,GAEjDA,EAAMlX,KAAKs9G,QAAQV,WAAY1lG,GAE/B,MAAM29B,EAAQ70C,KAERgiD,EAAS45D,GAAM55G,IAAKkV,GAE1B,QAAgBvW,IAAXqhD,EAYJ,OAVAnN,EAAMyoE,QAAQb,UAAWvlG,GAEzBgpG,YAAY,WAENlE,GAASA,EAAQh6D,GAEtBnN,EAAMyoE,QAAQZ,QAASxlG,KAErB,GAEI8qC,EAIRisE,MAAO/2G,GAAM4uE,MAAM,SAAWhjF,GAE7B,OAAOA,EAAIysH,UAERzpC,MAAM,SAAWypC,GAEpB,OAAOvB,kBAAmBuB,EAAM16E,EAAM/2C,YAEnCgoF,MAAM,SAAW0pC,GAEpB5T,GAAM36F,IAAK/J,EAAKs4G,GAEXxT,GAASA,EAAQwT,GAEtB36E,EAAMyoE,QAAQZ,QAASxlG,MAEpBu4G,OAAO,SAAWnrH,GAEhB43G,GAAUA,EAAS53G,GAExBuwC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,MAIxB29B,EAAMyoE,QAAQb,UAAWvlG,MAiB3BlY,OAAOuG,OAAQ2oH,GAAU5sH,UAAW,CAEnC6mH,OAAQ,SAAWv/G,EAAGiD,GAMrB,OAJA7L,KAAKouH,YAAc,IAAIhI,GACvBpmH,KAAKmuH,SAAShwH,KAAM6B,KAAKouH,aACzBpuH,KAAKouH,YAAYjG,OAAQv/G,EAAGiD,GAErB7L,MAIRooH,OAAQ,SAAWx/G,EAAGiD,GAIrB,OAFA7L,KAAKouH,YAAYhG,OAAQx/G,EAAGiD,GAErB7L,MAIRqoH,iBAAkB,SAAWC,EAAMC,EAAM1J,EAAIC,GAI5C,OAFA9+G,KAAKouH,YAAY/F,iBAAkBC,EAAMC,EAAM1J,EAAIC,GAE5C9+G,MAIRwoH,cAAe,SAAWC,EAAOC,EAAOC,EAAOC,EAAO/J,EAAIC,GAIzD,OAFA9+G,KAAKouH,YAAY5F,cAAeC,EAAOC,EAAOC,EAAOC,EAAO/J,EAAIC,GAEzD9+G,MAIR6oH,WAAY,SAAWlkB,GAItB,OAFA3kG,KAAKouH,YAAYvF,WAAYlkB,GAEtB3kG,MAIR0vH,SAAU,SAAWC,EAAOC,GAE3B,SAASC,EAAiBC,GAEzB,MAAM5+F,EAAS,GAEf,IAAM,IAAI/mB,EAAI,EAAGC,EAAI0lH,EAAWzmH,OAAQc,EAAIC,EAAGD,IAAO,CAErD,MAAM4lH,EAAUD,EAAY3lH,GAEtB6lH,EAAW,IAAI1J,GACrB0J,EAAS9J,OAAS6J,EAAQ7J,OAE1Bh1F,EAAO/yB,KAAM6xH,GAId,OAAO9+F,EAIR,SAAS++F,EAAsB7oB,EAAM8oB,GAEpC,MAAMC,EAAUD,EAAU7mH,OAM1B,IAAIs6F,GAAS,EACb,IAAM,IAAInjG,EAAI2vH,EAAU,EAAGhjH,EAAI,EAAGA,EAAIgjH,EAAS3vH,EAAI2M,IAAO,CAEzD,IAAIijH,EAAYF,EAAW1vH,GACvB6vH,EAAaH,EAAW/iH,GAExBmjH,EAASD,EAAWznH,EAAIwnH,EAAUxnH,EAClC2nH,EAASF,EAAWxkH,EAAIukH,EAAUvkH,EAEtC,GAAKxO,KAAK4R,IAAKshH,GAAWnxH,OAAOkJ,QAAU,CAU1C,GAPKioH,EAAS,IAEbH,EAAYF,EAAW/iH,GAAKmjH,GAAWA,EACvCD,EAAaH,EAAW1vH,GAAK+vH,GAAWA,GAIlCnpB,EAAKv7F,EAAIukH,EAAUvkH,GAASu7F,EAAKv7F,EAAIwkH,EAAWxkH,EAAQ,SAE/D,GAAKu7F,EAAKv7F,IAAMukH,EAAUvkH,GAEzB,GAAKu7F,EAAKx+F,IAAMwnH,EAAUxnH,EAAK,OAAO,MAGhC,CAEN,MAAM4nH,EAAWD,GAAWnpB,EAAKx+F,EAAIwnH,EAAUxnH,GAAM0nH,GAAWlpB,EAAKv7F,EAAIukH,EAAUvkH,GACnF,GAAkB,IAAb2kH,EAAoB,OAAO,EAChC,GAAKA,EAAW,EAAQ,SACxB7sB,GAAWA,OAIN,CAGN,GAAKyD,EAAKv7F,IAAMukH,EAAUvkH,EAAM,SAEhC,GAASwkH,EAAWznH,GAAKw+F,EAAKx+F,GAASw+F,EAAKx+F,GAAKwnH,EAAUxnH,GACrDwnH,EAAUxnH,GAAKw+F,EAAKx+F,GAASw+F,EAAKx+F,GAAKynH,EAAWznH,EAAS,OAAO,GAO1E,OAAO+6F,EAIR,MAAMe,EAAcF,GAAWE,YAEzBypB,EAAWnuH,KAAKmuH,SACtB,GAAyB,IAApBA,EAAS9kH,OAAe,MAAO,GAEpC,IAAiB,IAAZumH,EAAmB,OAAOC,EAAiB1B,GAGhD,IAAIsC,EAAOV,EAASC,EACpB,MAAM9+F,EAAS,GAEf,GAAyB,IAApBi9F,EAAS9kH,OAMb,OAJA0mH,EAAU5B,EAAU,GACpB6B,EAAW,IAAI1J,GACf0J,EAAS9J,OAAS6J,EAAQ7J,OAC1Bh1F,EAAO/yB,KAAM6xH,GACN9+F,EAIR,IAAIw/F,GAAehsB,EAAaypB,EAAU,GAAI3L,aAC9CkO,EAAaf,GAAUe,EAAaA,EAIpC,MAAMC,EAAmB,GACnBC,EAAY,GAClB,IAEIC,EAkGAC,EApGAC,EAAgB,GAChBC,EAAU,EAGdJ,EAAWI,QAAYrwH,EACvBowH,EAAeC,GAAY,GAE3B,IAAM,IAAI7mH,EAAI,EAAGC,EAAI+jH,EAAS9kH,OAAQc,EAAIC,EAAGD,IAE5C4lH,EAAU5B,EAAUhkH,GACpB0mH,EAAYd,EAAQvN,YACpBiO,EAAQ/rB,EAAamsB,GACrBJ,EAAQd,GAAUc,EAAQA,EAErBA,IAEKC,GAAkBE,EAAWI,IAAcA,IAEpDJ,EAAWI,GAAY,CAAEpzH,EAAG,IAAI0oH,GAAS9lH,EAAGqwH,GAC5CD,EAAWI,GAAUpzH,EAAEsoH,OAAS6J,EAAQ7J,OAEnCwK,GAAaM,IAClBD,EAAeC,GAAY,IAM3BD,EAAeC,GAAU7yH,KAAM,CAAEsU,EAAGs9G,EAASvvH,EAAGqwH,EAAW,KAS7D,IAAOD,EAAW,GAAM,OAAOf,EAAiB1B,GAGhD,GAAKyC,EAAUvnH,OAAS,EAAI,CAE3B,IAAI4nH,GAAY,EAChB,MAAMC,EAAW,GAEjB,IAAM,IAAIC,EAAO,EAAGC,EAAOR,EAAUvnH,OAAQ8nH,EAAOC,EAAMD,IAEzDR,EAAkBQ,GAAS,GAI5B,IAAM,IAAIA,EAAO,EAAGC,EAAOR,EAAUvnH,OAAQ8nH,EAAOC,EAAMD,IAAU,CAEnE,MAAME,EAAMN,EAAeI,GAE3B,IAAM,IAAIG,EAAO,EAAGA,EAAOD,EAAIhoH,OAAQioH,IAAU,CAEhD,MAAMC,EAAKF,EAAKC,GAChB,IAAIE,GAAkB,EAEtB,IAAM,IAAIC,EAAQ,EAAGA,EAAQb,EAAUvnH,OAAQooH,IAEzCxB,EAAsBsB,EAAG/wH,EAAGowH,EAAWa,GAAQjxH,KAE9C2wH,IAASM,GAAQP,EAAS/yH,KAAM,CAAEuzH,MAAOP,EAAMQ,IAAKF,EAAO1uB,KAAMuuB,IACjEE,GAEJA,GAAkB,EAClBb,EAAkBc,GAAQtzH,KAAMozH,IAIhCN,GAAY,GAQVO,GAEJb,EAAkBQ,GAAOhzH,KAAMozH,IAS7BL,EAAS7nH,OAAS,IAGf4nH,IAAYF,EAAgBJ,IAQrC,IAAM,IAAIxmH,EAAI,EAAG0W,EAAK+vG,EAAUvnH,OAAQc,EAAI0W,EAAI1W,IAAO,CAEtD6lH,EAAWY,EAAWzmH,GAAIvM,EAC1BszB,EAAO/yB,KAAM6xH,GACbc,EAAWC,EAAe5mH,GAE1B,IAAM,IAAIoZ,EAAI,EAAGmsB,EAAKohF,EAASznH,OAAQka,EAAImsB,EAAInsB,IAE9CysG,EAASnrB,MAAM1mG,KAAM2yH,EAAUvtG,GAAI9Q,GAQrC,OAAOye,KAcTlyB,OAAOuG,OAAQ8oH,GAAK/sH,UAAW,CAE9B0pG,QAAQ,EAERC,eAAgB,SAAWH,EAAM5lG,QAElBvE,IAATuE,IAAqBA,EAAO,KAEjC,MAAMgsB,EAAS,GACT0gG,EAcR,SAAsB9mB,EAAM5lG,EAAMgtB,GAEjC,MAAM2/F,EAAQ5yH,MAAM0xG,KAAO1xG,MAAM0xG,KAAM7F,GAAS1tG,OAAQ0tG,GAAOpoC,MAAO,IAChEr4C,EAAQnlB,EAAOgtB,EAAKogD,WACpBw/C,GAAgB5/F,EAAKvQ,YAAYowG,KAAO7/F,EAAKvQ,YAAYqwG,KAAO9/F,EAAK+/F,oBAAuB5nG,EAE5FunG,EAAQ,GAEd,IAAI70E,EAAU,EAAGC,EAAU,EAE3B,IAAM,IAAI7yC,EAAI,EAAGA,EAAI0nH,EAAMxoH,OAAQc,IAAO,CAEzC,MAAMokH,EAAOsD,EAAO1nH,GAEpB,GAAc,OAATokH,EAEJxxE,EAAU,EACVC,GAAW80E,MAEL,CAEN,MAAMI,EAAM5D,GAAYC,EAAMlkG,EAAO0yB,EAASC,EAAS9qB,GACvD6qB,GAAWm1E,EAAIn1E,QACf60E,EAAMzzH,KAAM+zH,EAAIjxD,OAMlB,OAAO2wD,EA3CQO,CAAarnB,EAAM5lG,EAAMlF,KAAKkyB,MAE5C,IAAM,IAAI1xB,EAAI,EAAG6rE,EAAKulD,EAAMvoH,OAAQ7I,EAAI6rE,EAAI7rE,IAE3CvB,MAAMqC,UAAUnD,KAAKg9E,MAAOjqD,EAAQ0gG,EAAOpxH,GAAIkvH,YAIhD,OAAOx+F,KA2HTk+F,GAAW9tH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAExE4B,YAAaksH,GAEb1R,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERg9G,EAAS,IAAImB,GAAYn+G,KAAKs9G,SACpCN,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOiB,iBAAkBj+G,KAAKy9G,eAC9BT,EAAOU,KAAMxmG,GAAK,SAAW4zF,GAE5B,IAAIiL,EAEJ,IAECA,EAAO72G,KAAKG,MAAOyrG,GAElB,MAAQxmG,GAEThG,QAAQC,KAAM,yFACdw3G,EAAO72G,KAAKG,MAAOyrG,EAAKsnB,UAAW,GAAItnB,EAAKzhG,OAAS,IAItD,MAAM0hG,EAAOl2D,EAAMx1C,MAAO02G,GAErBiG,GAASA,EAAQjR,KAEpBkR,EAAYC,IAIhB78G,MAAO,SAAW02G,GAEjB,OAAO,IAAIsY,GAAMtY,MAQnB,MAAMsc,GAEO,WAQX,YANkB1xH,IAAbipF,KAEJA,GAAW,IAAMpsF,OAAO60H,cAAgB70H,OAAO80H,qBAIzC1oC,IAYT,SAAS2oC,GAAajV,GAErBD,GAAO13G,KAAM3F,KAAMs9G,GAqDpB,SAASkV,GAAsB1kE,EAAUC,EAAawhB,GAErD66C,GAAWzkH,KAAM3F,UAAMW,EAAW4uE,GAElC,MAAMjuC,GAAS,IAAI5B,IAAQ7+B,IAAKitD,GAC1BvsB,GAAS,IAAI7B,IAAQ7+B,IAAKktD,GAE1B0kE,EAAM,IAAIj1G,EAAS8jB,EAAOhuB,EAAGguB,EAAO9uB,EAAG8uB,EAAOj0B,GAC9CqlH,EAAS,IAAIl1G,EAAS+jB,EAAOjuB,EAAGiuB,EAAO/uB,EAAG+uB,EAAOl0B,GAGjDmyG,EAAKniH,KAAK2R,KAAM3R,KAAKoN,IACrBkR,EAAK6jG,EAAKniH,KAAK2R,KAAM,KAE3BhP,KAAK0vE,GAAGC,aAAc,GAAIl5D,KAAMg8G,GAAMxxG,IAAKyxG,GAAShkH,eAAgB8wG,GACpEx/G,KAAK0vE,GAAGC,aAAc,GAAIl5D,KAAMg8G,GAAMjzG,IAAKkzG,GAAShkH,eAAgBiN,GA8BrE,SAASg3G,GAAmBtyF,EAAOkvC,GAElC66C,GAAWzkH,KAAM3F,UAAMW,EAAW4uE,GAElC,MAAMjuC,GAAS,IAAI5B,IAAQ7+B,IAAKw/B,GAGhCrgC,KAAK0vE,GAAGC,aAAc,GAAI9uE,IAAKygC,EAAOhuB,EAAGguB,EAAO9uB,EAAG8uB,EAAOj0B,GAAIqB,eAAgB,EAAIrR,KAAK2R,KAAM3R,KAAKoN,KArGnG8nH,GAAYjxH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAEzE4B,YAAaqvH,GAEb7U,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,MAAMrnE,EAAQ70C,KAERg9G,EAAS,IAAImB,GAAYtpE,EAAMyoE,SACrCN,EAAOuE,gBAAiB,eACxBvE,EAAOe,QAASlpE,EAAMosB,MACtB+7C,EAAOiB,iBAAkBppE,EAAM4oE,eAC/BT,EAAOU,KAAMxmG,GAAK,SAAW2qC,GAE5B,IAIC,MAAM+wE,EAAa/wE,EAAOtkD,MAAO,GAEjB80H,KACRQ,gBAAiBD,GAAY,SAAWE,GAE/C9W,EAAQ8W,MAIR,MAAQxuH,GAEJ43G,EAEJA,EAAS53G,GAIThG,QAAQ0R,MAAO1L,GAIhBuwC,EAAMyoE,QAAQX,UAAWzlG,MAIxB+kG,EAAYC,MAyBjBsW,GAAqBlxH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQg0G,GAAW9oH,WAAa,CAEtF4B,YAAasvH,GAEbO,wBAAwB,EAExBt8G,KAAM,SAAWnN,GAIhB,OAFA8gH,GAAW9oH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE/BtJ,MAIR0W,OAAQ,SAAWC,GAMlB,OAJayzG,GAAW9oH,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,MAqBvDg8G,GAAkBrxH,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQg0G,GAAW9oH,WAAa,CAEnF4B,YAAayvH,GAEbK,qBAAqB,EAErBv8G,KAAM,SAAWnN,GAIhB,OAFA8gH,GAAW9oH,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE/BtJ,MAIR0W,OAAQ,SAAWC,GAMlB,OAJayzG,GAAW9oH,UAAUoV,OAAO/Q,KAAM3F,KAAM2W,MAUvD,MAAMs8G,GAAY,IAAI3rG,GAChB4rG,GAAW,IAAI5rG,GA8BrBtoB,OAAOuG,OA5BP,WAECvF,KAAKlB,KAAO,eAEZkB,KAAK27C,OAAS,EAEd37C,KAAKmzH,OAAS,KAEdnzH,KAAKyjF,QAAU,IAAIhoC,GACnBz7C,KAAKyjF,QAAQp3D,OAAO0pD,OAAQ,GAC5B/1E,KAAKyjF,QAAQ5tE,kBAAmB,EAEhC7V,KAAK0jF,QAAU,IAAIjoC,GACnBz7C,KAAK0jF,QAAQr3D,OAAO0pD,OAAQ,GAC5B/1E,KAAK0jF,QAAQ7tE,kBAAmB,EAEhC7V,KAAKozH,OAAS,CACbv3E,MAAO,KACPH,IAAK,KACLC,OAAQ,KACRrwB,KAAM,KACNC,IAAK,KACLqwB,KAAM,KACNu3E,OAAQ,OAKkB7xH,UAAW,CAEtCuD,OAAQ,SAAWyZ,GAElB,MAAM0T,EAAQhyB,KAAKozH,OAMnB,GAJoBphG,EAAM6pB,QAAUv9B,EAAOu9B,OAAS7pB,EAAM0pB,MAAQp9B,EAAOo9B,KACxE1pB,EAAM2pB,SAAWr9B,EAAOq9B,OAAS37C,KAAK27C,QAAU3pB,EAAM1G,OAAShN,EAAOgN,MACtE0G,EAAMzG,MAAQjN,EAAOiN,KAAOyG,EAAM4pB,OAASt9B,EAAOs9B,MAAQ5pB,EAAMmhG,SAAWnzH,KAAKmzH,OAE9D,CAElBnhG,EAAM6pB,MAAQv9B,EAAOu9B,MACrB7pB,EAAM0pB,IAAMp9B,EAAOo9B,IACnB1pB,EAAM2pB,OAASr9B,EAAOq9B,OAAS37C,KAAK27C,OACpC3pB,EAAM1G,KAAOhN,EAAOgN,KACpB0G,EAAMzG,IAAMjN,EAAOiN,IACnByG,EAAM4pB,KAAOt9B,EAAOs9B,KACpB5pB,EAAMmhG,OAASnzH,KAAKmzH,OAKpB,MAAM10G,EAAmBH,EAAOG,iBAAiBjI,QAC3C68G,EAAarhG,EAAMmhG,OAAS,EAC5BG,EAAqBD,EAAarhG,EAAM1G,KAAO0G,EAAM6pB,MACrD03E,EAASvhG,EAAM1G,KAAOjuB,KAAKqhC,IAAKn0B,EAAUC,QAAUwnB,EAAM0pB,IAAM,IAAU1pB,EAAM4pB,KACtF,IAAI43E,EAAMC,EAIVP,GAASvkH,SAAU,KAAS0kH,EAC5BJ,GAAUtkH,SAAU,IAAO0kH,EAI3BG,GAASD,EAAOvhG,EAAM2pB,OAAS23E,EAC/BG,EAAOF,EAAOvhG,EAAM2pB,OAAS23E,EAE7B70G,EAAiB9P,SAAU,GAAM,EAAIqjB,EAAM1G,MAASmoG,EAAOD,GAC3D/0G,EAAiB9P,SAAU,IAAQ8kH,EAAOD,IAAWC,EAAOD,GAE5DxzH,KAAKyjF,QAAQhlE,iBAAiBhI,KAAMgI,GAIpC+0G,GAASD,EAAOvhG,EAAM2pB,OAAS23E,EAC/BG,EAAOF,EAAOvhG,EAAM2pB,OAAS23E,EAE7B70G,EAAiB9P,SAAU,GAAM,EAAIqjB,EAAM1G,MAASmoG,EAAOD,GAC3D/0G,EAAiB9P,SAAU,IAAQ8kH,EAAOD,IAAWC,EAAOD,GAE5DxzH,KAAK0jF,QAAQjlE,iBAAiBhI,KAAMgI,GAIrCze,KAAKyjF,QAAQ9kE,YAAYlI,KAAM6H,EAAOK,aAAciQ,SAAUskG,IAC9DlzH,KAAK0jF,QAAQ/kE,YAAYlI,KAAM6H,EAAOK,aAAciQ,SAAUqkG,OAM5C,IAAIz1G,EACF,IAAI7D,EACT,IAAI6D,EACA,IAAIA,EAwYL,IAAIA,EACF,IAAI7D,EACT,IAAI6D,EACE,IAAIA,EAE3B,SAASk2G,GAAeC,EAAS1d,EAAU9D,GAK1C,IAAIyhB,EACHC,EACAC,EAkBD,OAvBA9zH,KAAK2zH,QAAUA,EACf3zH,KAAKmyG,UAAYA,EAsBR8D,GAER,IAAK,aACJ2d,EAAc5zH,KAAK+zH,OACnBF,EAAsB7zH,KAAKg0H,eAC3BF,EAAc9zH,KAAKi0H,+BAEnBj0H,KAAK6hD,OAAS,IAAItY,aAA0B,EAAZ4oE,GAChCnyG,KAAKk0H,WAAa,EAClB,MAED,IAAK,SACL,IAAK,OACJN,EAAc5zH,KAAKm0H,QAInBN,EAAsB7zH,KAAKm0H,QAE3BL,EAAc9zH,KAAKo0H,0BAEnBp0H,KAAK6hD,OAAS,IAAI5iD,MAAmB,EAAZkzG,GACzB,MAED,QACCyhB,EAAc5zH,KAAKq0H,MACnBR,EAAsB7zH,KAAKs0H,cAC3BR,EAAc9zH,KAAKu0H,4BAEnBv0H,KAAK6hD,OAAS,IAAItY,aAA0B,EAAZ4oE,GAIlCnyG,KAAKw0H,iBAAmBZ,EACxB5zH,KAAKy0H,yBAA2BZ,EAChC7zH,KAAK00H,aAAeZ,EACpB9zH,KAAK20H,WAAa,EAClB30H,KAAK40H,UAAY,EAEjB50H,KAAK60H,iBAAmB,EACxB70H,KAAK80H,yBAA2B,EAEhC90H,KAAK+0H,SAAW,EAChB/0H,KAAKg1H,eAAiB,EAIvBh2H,OAAOuG,OAAQmuH,GAAcpyH,UAAW,CAGvC2zH,WAAY,SAAWC,EAAWj9B,GAKjC,MAAMp2C,EAAS7hD,KAAK6hD,OACnBiR,EAAS9yD,KAAKmyG,UACdziG,EAASwlH,EAAYpiE,EAASA,EAE/B,IAAIqiE,EAAgBn1H,KAAK60H,iBAEzB,GAAuB,IAAlBM,EAAsB,CAI1B,IAAM,IAAIhrH,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAEjC03C,EAAQnyC,EAASvF,GAAM03C,EAAQ13C,GAIhCgrH,EAAgBl9B,MAEV,CAINk9B,GAAiBl9B,EACjB,MAAMm9B,EAAMn9B,EAASk9B,EACrBn1H,KAAKw0H,iBAAkB3yE,EAAQnyC,EAAQ,EAAG0lH,EAAKtiE,GAIhD9yD,KAAK60H,iBAAmBM,GAKzBE,mBAAoB,SAAWp9B,GAE9B,MAAMp2C,EAAS7hD,KAAK6hD,OACnBiR,EAAS9yD,KAAKmyG,UACdziG,EAASojD,EAAS9yD,KAAK40H,UAEe,IAAlC50H,KAAK80H,0BAIT90H,KAAK00H,eAMN10H,KAAKy0H,yBAA0B5yE,EAAQnyC,EAAQ,EAAGuoF,EAAQnlC,GAC1D9yD,KAAK80H,0BAA4B78B,GAKlC9c,MAAO,SAAW+5C,GAEjB,MAAMpiE,EAAS9yD,KAAKmyG,UACnBtwD,EAAS7hD,KAAK6hD,OACdnyC,EAASwlH,EAAYpiE,EAASA,EAE9BmlC,EAASj4F,KAAK60H,iBACdS,EAAiBt1H,KAAK80H,yBAEtBnB,EAAU3zH,KAAK2zH,QAKhB,GAHA3zH,KAAK60H,iBAAmB,EACxB70H,KAAK80H,yBAA2B,EAE3B78B,EAAS,EAAI,CAIjB,MAAMs9B,EAAsBziE,EAAS9yD,KAAK20H,WAE1C30H,KAAKw0H,iBACJ3yE,EAAQnyC,EAAQ6lH,EAAqB,EAAIt9B,EAAQnlC,GAI9CwiE,EAAiB,GAIrBt1H,KAAKy0H,yBAA0B5yE,EAAQnyC,EAAQ1P,KAAK40H,UAAY9hE,EAAQ,EAAGA,GAI5E,IAAM,IAAI3oD,EAAI2oD,EAAQxuD,EAAIwuD,EAASA,EAAQ3oD,IAAM7F,IAAM6F,EAEtD,GAAK03C,EAAQ13C,KAAQ03C,EAAQ13C,EAAI2oD,GAAW,CAI3C6gE,EAAQx4D,SAAUtZ,EAAQnyC,GAC1B,QASH8lH,kBAAmB,WAElB,MAAM7B,EAAU3zH,KAAK2zH,QAEf9xE,EAAS7hD,KAAK6hD,OACnBiR,EAAS9yD,KAAKmyG,UAEdojB,EAAsBziE,EAAS9yD,KAAK20H,WAErChB,EAAQ8B,SAAU5zE,EAAQ0zE,GAG1B,IAAM,IAAIprH,EAAI2oD,EAAQxuD,EAAIixH,EAAqBprH,IAAM7F,IAAM6F,EAE1D03C,EAAQ13C,GAAM03C,EAAQ0zE,EAAwBprH,EAAI2oD,GAKnD9yD,KAAK00H,eAEL10H,KAAK60H,iBAAmB,EACxB70H,KAAK80H,yBAA2B,GAKjCY,qBAAsB,WAErB,MAAMH,EAAuC,EAAjBv1H,KAAKmyG,UACjCnyG,KAAK2zH,QAAQx4D,SAAUn7D,KAAK6hD,OAAQ0zE,IAIrChB,4BAA6B,WAE5B,MAAM9gB,EAAazzG,KAAK40H,UAAY50H,KAAKmyG,UACnCuB,EAAWD,EAAazzG,KAAKmyG,UAEnC,IAAM,IAAIhoG,EAAIspG,EAAYtpG,EAAIupG,EAAUvpG,IAEvCnK,KAAK6hD,OAAQ13C,GAAM,GAMrB8pH,+BAAgC,WAE/Bj0H,KAAKu0H,8BACLv0H,KAAK6hD,OAAQ7hD,KAAK40H,UAAY50H,KAAKmyG,UAAY,GAAM,GAItDiiB,0BAA2B,WAE1B,MAAM3gB,EAAazzG,KAAK20H,WAAa30H,KAAKmyG,UACpCwjB,EAAc31H,KAAK40H,UAAY50H,KAAKmyG,UAE1C,IAAM,IAAIhoG,EAAI,EAAGA,EAAInK,KAAKmyG,UAAWhoG,IAEpCnK,KAAK6hD,OAAQ8zE,EAAcxrH,GAAMnK,KAAK6hD,OAAQ4xD,EAAatpG,IAS7DgqH,QAAS,SAAWtyE,EAAQxnC,EAAWk3F,EAAWzlG,EAAGgnD,GAEpD,GAAKhnD,GAAK,GAET,IAAM,IAAI3B,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAEjC03C,EAAQxnC,EAAYlQ,GAAM03C,EAAQ0vD,EAAYpnG,IAQjD4pH,OAAQ,SAAWlyE,EAAQxnC,EAAWk3F,EAAWzlG,GAEhD6N,EAAWkgG,UAAWh4D,EAAQxnC,EAAWwnC,EAAQxnC,EAAWwnC,EAAQ0vD,EAAWzlG,IAIhFkoH,eAAgB,SAAWnyE,EAAQxnC,EAAWk3F,EAAWzlG,EAAGgnD,GAE3D,MAAM8iE,EAAa51H,KAAKk0H,WAAaphE,EAGrCn5C,EAAWq6F,wBAAyBnyD,EAAQ+zE,EAAY/zE,EAAQxnC,EAAWwnC,EAAQ0vD,GAGnF53F,EAAWkgG,UAAWh4D,EAAQxnC,EAAWwnC,EAAQxnC,EAAWwnC,EAAQ+zE,EAAY9pH,IAIjFuoH,MAAO,SAAWxyE,EAAQxnC,EAAWk3F,EAAWzlG,EAAGgnD,GAElD,MAAMl1D,EAAI,EAAIkO,EAEd,IAAM,IAAI3B,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAAI,CAErC,MAAMoZ,EAAIlJ,EAAYlQ,EAEtB03C,EAAQt+B,GAAMs+B,EAAQt+B,GAAM3lB,EAAIikD,EAAQ0vD,EAAYpnG,GAAM2B,IAM5DwoH,cAAe,SAAWzyE,EAAQxnC,EAAWk3F,EAAWzlG,EAAGgnD,GAE1D,IAAM,IAAI3oD,EAAI,EAAGA,IAAM2oD,IAAW3oD,EAAI,CAErC,MAAMoZ,EAAIlJ,EAAYlQ,EAEtB03C,EAAQt+B,GAAMs+B,EAAQt+B,GAAMs+B,EAAQ0vD,EAAYpnG,GAAM2B,MASzD,MACM+pH,GAAc,IAAIC,OAAQ,kBAAgC,KAM1DC,GAAiB,KAPI,gBAOsB1yD,QAAS,MAAO,IAAO,IAIlE2yD,GAAe,kBAAkB1sH,OAAO+5D,QAAS,KALrC,oBAQZ4yD,GAAU,WAAW3sH,OAAO+5D,QAAS,OAAQ0yD,IAI7CG,GAAY,4BAA4B5sH,OAAO+5D,QAAS,KAZ5C,oBAgBZ8yD,GAAc,uBAAuB7sH,OAAO+5D,QAAS,KAhBzC,oBAkBZ+yD,GAAW,IAAIN,OAClB,IACAE,GACAC,GACAC,GACAC,GACA,KAGGE,GAAwB,CAAE,WAAY,YAAa,SAEzD,SAASC,GAAWC,EAAat1D,EAAMu1D,GAEtC,MAAMC,EAAaD,GAAsBE,GAAgBC,eAAgB11D,GAEzEjhE,KAAK42H,aAAeL,EACpBv2H,KAAK62H,UAAYN,EAAYO,WAAY71D,EAAMw1D,GAyDhD,SAASC,GAAiBK,EAAU91D,EAAMw1D,GAEzCz2H,KAAKihE,KAAOA,EACZjhE,KAAKy2H,WAAaA,GAAcC,GAAgBC,eAAgB11D,GAEhEjhE,KAAKg3H,KAAON,GAAgBO,SAAUF,EAAU/2H,KAAKy2H,WAAWS,WAAcH,EAE9E/2H,KAAK+2H,SAAWA,EA5DjB/3H,OAAOuG,OAAQ+wH,GAAUh1H,UAAW,CAEnCm0H,SAAU,SAAWvrH,EAAOwF,GAE3B1P,KAAK03F,OAEL,MAAMy/B,EAAkBn3H,KAAK42H,aAAaQ,gBACzCzD,EAAU3zH,KAAK62H,UAAWM,QAGVx2H,IAAZgzH,GAAwBA,EAAQ8B,SAAUvrH,EAAOwF,IAIvDyrD,SAAU,SAAWjxD,EAAOwF,GAE3B,MAAM2nH,EAAWr3H,KAAK62H,UAEtB,IAAM,IAAI1sH,EAAInK,KAAK42H,aAAaQ,gBAAiB/rH,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAEjFktH,EAAUltH,GAAIgxD,SAAUjxD,EAAOwF,IAMjCgoF,KAAM,WAEL,MAAM2/B,EAAWr3H,KAAK62H,UAEtB,IAAM,IAAI1sH,EAAInK,KAAK42H,aAAaQ,gBAAiB/rH,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAEjFktH,EAAUltH,GAAIutF,QAMhB4/B,OAAQ,WAEP,MAAMD,EAAWr3H,KAAK62H,UAEtB,IAAM,IAAI1sH,EAAInK,KAAK42H,aAAaQ,gBAAiB/rH,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAEjFktH,EAAUltH,GAAImtH,YAoBjBt4H,OAAOuG,OAAQmxH,GAAiB,CAE/BJ,UAAWA,GAEXlgH,OAAQ,SAAWmhH,EAAMt2D,EAAMw1D,GAE9B,OAASc,GAAQA,EAAKC,uBAMd,IAAId,GAAgBJ,UAAWiB,EAAMt2D,EAAMw1D,GAJ3C,IAAIC,GAAiBa,EAAMt2D,EAAMw1D,IAiB1CgB,iBAAkB,SAAWt2H,GAE5B,OAAOA,EAAKkiE,QAAS,MAAO,KAAMA,QAASwyD,GAAa,KAIzDc,eAAgB,SAAW1b,GAE1B,MAAMyc,EAAUtB,GAASh2F,KAAM66E,GAE/B,IAAOyc,EAEN,MAAM,IAAIppH,MAAO,4CAA8C2sG,GAIhE,MAAM0c,EAAU,CAEfT,SAAUQ,EAAS,GACnBE,WAAYF,EAAS,GACrBG,YAAaH,EAAS,GACtBvc,aAAcuc,EAAS,GACvBI,cAAeJ,EAAS,IAGnBK,EAAUJ,EAAQT,UAAYS,EAAQT,SAASpM,YAAa,KAElE,QAAiBnqH,IAAZo3H,IAAuC,IAAdA,EAAkB,CAE/C,MAAMH,EAAaD,EAAQT,SAAS9E,UAAW2F,EAAU,IAMF,IAAlD1B,GAAsBzsH,QAASguH,KAEnCD,EAAQT,SAAWS,EAAQT,SAAS9E,UAAW,EAAG2F,GAClDJ,EAAQC,WAAaA,GAMvB,GAA8B,OAAzBD,EAAQxc,cAAyD,IAAhCwc,EAAQxc,aAAa9xG,OAE1D,MAAM,IAAIiF,MAAO,+DAAiE2sG,GAInF,OAAO0c,GAIRV,SAAU,SAAWM,EAAML,GAE1B,IAAOA,GAAyB,KAAbA,GAAgC,MAAbA,IAAmC,IAAfA,GAAoBA,IAAaK,EAAKp2H,MAAQ+1H,IAAaK,EAAKhiH,KAEzH,OAAOgiH,EAKR,GAAKA,EAAKhsD,SAAW,CAEpB,MAAMktB,EAAO8+B,EAAKhsD,SAASotB,cAAeu+B,GAE1C,QAAcv2H,IAAT83F,EAEJ,OAAOA,EAOT,GAAK8+B,EAAKx1G,SAAW,CAEpB,MAAMi2G,EAAoB,SAAWj2G,GAEpC,IAAM,IAAI5X,EAAI,EAAGA,EAAI4X,EAAS1Y,OAAQc,IAAO,CAE5C,MAAM8tH,EAAYl2G,EAAU5X,GAE5B,GAAK8tH,EAAU92H,OAAS+1H,GAAYe,EAAU1iH,OAAS2hH,EAEtD,OAAOe,EAIR,MAAM1zH,EAASyzH,EAAmBC,EAAUl2G,UAE5C,GAAKxd,EAAS,OAAOA,EAItB,OAAO,MAIF2zH,EAAcF,EAAmBT,EAAKx1G,UAE5C,GAAKm2G,EAEJ,OAAOA,EAMT,OAAO,QAMTl5H,OAAOuG,OAAQmxH,GAAgBp1H,UAAW,CAGzC62H,sBAAuB,aACvBC,sBAAuB,aAEvBC,YAAa,CACZC,OAAQ,EACRC,YAAa,EACbC,aAAc,EACdC,eAAgB,GAGjBC,WAAY,CACXC,KAAM,EACNC,YAAa,EACbC,uBAAwB,GAGzBC,oBAAqB,CAEpB,SAA0Bj3E,EAAQnyC,GAEjCmyC,EAAQnyC,GAAW1P,KAAKg3H,KAAMh3H,KAAKm7G,eAIpC,SAAyBt5D,EAAQnyC,GAEhC,MAAMpG,EAAStJ,KAAK+4H,iBAEpB,IAAM,IAAI5uH,EAAI,EAAGkB,EAAI/B,EAAOD,OAAQc,IAAMkB,IAAMlB,EAE/C03C,EAAQnyC,KAAcpG,EAAQa,IAMhC,SAAgC03C,EAAQnyC,GAEvCmyC,EAAQnyC,GAAW1P,KAAK+4H,iBAAkB/4H,KAAK83H,gBAIhD,SAA2Bj2E,EAAQnyC,GAElC1P,KAAK+4H,iBAAiB1nG,QAASwwB,EAAQnyC,KAMzCspH,iCAAkC,CAEjC,CAGC,SAA0Bn3E,EAAQnyC,GAEjC1P,KAAKi5H,aAAcj5H,KAAKm7G,cAAiBt5D,EAAQnyC,IAIlD,SAAyCmyC,EAAQnyC,GAEhD1P,KAAKi5H,aAAcj5H,KAAKm7G,cAAiBt5D,EAAQnyC,GACjD1P,KAAKi5H,aAAajrF,aAAc,GAIjC,SAAoD6T,EAAQnyC,GAE3D1P,KAAKi5H,aAAcj5H,KAAKm7G,cAAiBt5D,EAAQnyC,GACjD1P,KAAKi5H,aAAatrG,wBAAyB,IAI1C,CAIF,SAAyBk0B,EAAQnyC,GAEhC,MAAMwpH,EAAOl5H,KAAK+4H,iBAElB,IAAM,IAAI5uH,EAAI,EAAGkB,EAAI6tH,EAAK7vH,OAAQc,IAAMkB,IAAMlB,EAE7C+uH,EAAM/uH,GAAM03C,EAAQnyC,MAMtB,SAAwCmyC,EAAQnyC,GAE/C,MAAMwpH,EAAOl5H,KAAK+4H,iBAElB,IAAM,IAAI5uH,EAAI,EAAGkB,EAAI6tH,EAAK7vH,OAAQc,IAAMkB,IAAMlB,EAE7C+uH,EAAM/uH,GAAM03C,EAAQnyC,KAIrB1P,KAAKi5H,aAAajrF,aAAc,GAIjC,SAAmD6T,EAAQnyC,GAE1D,MAAMwpH,EAAOl5H,KAAK+4H,iBAElB,IAAM,IAAI5uH,EAAI,EAAGkB,EAAI6tH,EAAK7vH,OAAQc,IAAMkB,IAAMlB,EAE7C+uH,EAAM/uH,GAAM03C,EAAQnyC,KAIrB1P,KAAKi5H,aAAatrG,wBAAyB,IAI1C,CAIF,SAAgCk0B,EAAQnyC,GAEvC1P,KAAK+4H,iBAAkB/4H,KAAK83H,eAAkBj2E,EAAQnyC,IAIvD,SAA+CmyC,EAAQnyC,GAEtD1P,KAAK+4H,iBAAkB/4H,KAAK83H,eAAkBj2E,EAAQnyC,GACtD1P,KAAKi5H,aAAajrF,aAAc,GAIjC,SAA0D6T,EAAQnyC,GAEjE1P,KAAK+4H,iBAAkB/4H,KAAK83H,eAAkBj2E,EAAQnyC,GACtD1P,KAAKi5H,aAAatrG,wBAAyB,IAI1C,CAIF,SAA6Bk0B,EAAQnyC,GAEpC1P,KAAK+4H,iBAAiBpoH,UAAWkxC,EAAQnyC,IAI1C,SAA4CmyC,EAAQnyC,GAEnD1P,KAAK+4H,iBAAiBpoH,UAAWkxC,EAAQnyC,GACzC1P,KAAKi5H,aAAajrF,aAAc,GAIjC,SAAuD6T,EAAQnyC,GAE9D1P,KAAK+4H,iBAAiBpoH,UAAWkxC,EAAQnyC,GACzC1P,KAAKi5H,aAAatrG,wBAAyB,KAQ9C8nG,SAAU,SAA2B0D,EAAazpH,GAEjD1P,KAAK03F,OACL13F,KAAKy1H,SAAU0D,EAAazpH,IAU7ByrD,SAAU,SAA2Bi+D,EAAa1pH,GAEjD1P,KAAK03F,OACL13F,KAAKm7D,SAAUi+D,EAAa1pH,IAK7BgoF,KAAM,WAEL,IAAIuhC,EAAej5H,KAAKg3H,KACxB,MAAMP,EAAaz2H,KAAKy2H,WAElBmB,EAAanB,EAAWmB,WACxBzc,EAAesb,EAAWtb,aAChC,IAAI2c,EAAgBrB,EAAWqB,cAe/B,GAbOmB,IAENA,EAAevC,GAAgBO,SAAUj3H,KAAK+2H,SAAUN,EAAWS,WAAcl3H,KAAK+2H,SAEtF/2H,KAAKg3H,KAAOiC,GAKbj5H,KAAKy1H,SAAWz1H,KAAKm4H,sBACrBn4H,KAAKm7D,SAAWn7D,KAAKo4H,uBAGda,EAGN,YADA36H,QAAQ0R,MAAO,2DAA6DhQ,KAAKihE,KAAO,yBAKzF,GAAK22D,EAAa,CAEjB,IAAIC,EAAcpB,EAAWoB,YAG7B,OAASD,GAER,IAAK,YAEJ,IAAOqB,EAAapnG,SAGnB,YADAvzB,QAAQ0R,MAAO,oFAAqFhQ,MAKrG,IAAOi5H,EAAapnG,SAASZ,UAG5B,YADA3yB,QAAQ0R,MAAO,8GAA+GhQ,MAK/Hi5H,EAAeA,EAAapnG,SAASZ,UAErC,MAED,IAAK,QAEJ,IAAOgoG,EAAa1tD,SAGnB,YADAjtE,QAAQ0R,MAAO,iFAAkFhQ,MAQlGi5H,EAAeA,EAAa1tD,SAASD,MAGrC,IAAM,IAAInhE,EAAI,EAAGA,EAAI8uH,EAAa5vH,OAAQc,IAEzC,GAAK8uH,EAAc9uH,GAAIhJ,OAAS02H,EAAc,CAE7CA,EAAc1tH,EACd,MAMF,MAED,QAEC,QAAoCxJ,IAA/Bs4H,EAAcrB,GAGlB,YADAt5H,QAAQ0R,MAAO,uEAAwEhQ,MAKxFi5H,EAAeA,EAAcrB,GAK/B,QAAqBj3H,IAAhBk3H,EAA4B,CAEhC,QAAqCl3H,IAAhCs4H,EAAcpB,GAGlB,YADAv5H,QAAQ0R,MAAO,wFAAyFhQ,KAAMi5H,GAK/GA,EAAeA,EAAcpB,IAO/B,MAAMwB,EAAeJ,EAAc9d,GAEnC,QAAsBx6G,IAAjB04H,EAA6B,CAEjC,MAAMnC,EAAWT,EAAWS,SAI5B,YAFA54H,QAAQ0R,MAAO,+DAAiEknH,EAC/E,IAAM/b,EAAe,wBAA0B8d,GAMjD,IAAIK,EAAat5H,KAAK04H,WAAWC,KAEjC34H,KAAKi5H,aAAeA,OAEct4H,IAA7Bs4H,EAAajrF,YAEjBsrF,EAAat5H,KAAK04H,WAAWE,iBAEsBj4H,IAAxCs4H,EAAatrG,yBAExB2rG,EAAat5H,KAAK04H,WAAWG,wBAK9B,IAAIU,EAAcv5H,KAAKq4H,YAAYC,OAEnC,QAAuB33H,IAAlBm3H,EAA8B,CAIlC,GAAsB,0BAAjB3c,EAA2C,CAK/C,IAAO8d,EAAav3G,SAGnB,YADApjB,QAAQ0R,MAAO,sGAAuGhQ,MAKvH,IAAKi5H,EAAav3G,SAAS8rB,iBAmB1B,YADAlvC,QAAQ0R,MAAO,oHAAqHhQ,MAhBpI,IAAOi5H,EAAav3G,SAAS2rB,gBAG5B,YADA/uC,QAAQ0R,MAAO,sHAAuHhQ,WAK1EW,IAAxDs4H,EAAavlF,sBAAuBokF,KAExCA,EAAgBmB,EAAavlF,sBAAuBokF,IAcvDyB,EAAcv5H,KAAKq4H,YAAYG,aAE/Bx4H,KAAK+4H,iBAAmBM,EACxBr5H,KAAK83H,cAAgBA,YAEiBn3H,IAA3B04H,EAAa1oH,gBAAoDhQ,IAAzB04H,EAAahoG,SAIhEkoG,EAAcv5H,KAAKq4H,YAAYI,eAE/Bz4H,KAAK+4H,iBAAmBM,GAEbp6H,MAAMkY,QAASkiH,IAE1BE,EAAcv5H,KAAKq4H,YAAYE,YAE/Bv4H,KAAK+4H,iBAAmBM,GAIxBr5H,KAAKm7G,aAAeA,EAKrBn7G,KAAKy1H,SAAWz1H,KAAK84H,oBAAqBS,GAC1Cv5H,KAAKm7D,SAAWn7D,KAAKg5H,iCAAkCO,GAAeD,IAIvEhC,OAAQ,WAEPt3H,KAAKg3H,KAAO,KAIZh3H,KAAKy1H,SAAWz1H,KAAKw5H,kBACrBx5H,KAAKm7D,SAAWn7D,KAAKy5H,qBAOvBz6H,OAAOuG,OAAQmxH,GAAgBp1H,UAAW,CAGzCk4H,kBAAmB9C,GAAgBp1H,UAAUm0H,SAC7CgE,kBAAmB/C,GAAgBp1H,UAAU65D,WAmF9Cn8D,OAAOuG,OAlDP,WAECvF,KAAKuV,KAAOhL,EAAUI,eAGtB3K,KAAKuxE,SAAWtyE,MAAMqC,UAAU/D,MAAMoI,KAAMyD,WAE5CpJ,KAAKo3H,gBAAkB,EAGvB,MAAMlmF,EAAU,GAChBlxC,KAAK05H,eAAiBxoF,EAEtB,IAAM,IAAI/mC,EAAI,EAAGkB,EAAIjC,UAAUC,OAAQc,IAAMkB,IAAMlB,EAElD+mC,EAAS9nC,UAAWe,GAAIoL,MAASpL,EAIlCnK,KAAK25H,OAAS,GACd35H,KAAK45H,aAAe,GACpB55H,KAAK62H,UAAY,GACjB72H,KAAK65H,uBAAyB,GAE9B,MAAMhlF,EAAQ70C,KAEdA,KAAK85H,MAAQ,CAEZvqE,QAAS,CACRwqE,YAEC,OAAOllF,EAAM08B,SAASloE,QAGvB2wH,YAEC,OAAOh6H,KAAK+5H,MAAQllF,EAAMuiF,kBAI5B6C,wBAEC,OAAOplF,EAAMgiF,UAAUxtH,UAQU/H,UAAW,CAE9Ck2H,wBAAwB,EAExBv2G,IAAK,WAEJ,MAAMsuC,EAAUvvD,KAAKuxE,SACpB2oD,EAAgBl6H,KAAK05H,eACrB9H,EAAQ5xH,KAAK25H,OACbQ,EAAcn6H,KAAK45H,aACnBvC,EAAWr3H,KAAK62H,UAChBuD,EAAY/C,EAAShuH,OAEtB,IAAIgxH,OAAc15H,EACjB25H,EAAW/qE,EAAQlmD,OACnBkxH,EAAiBv6H,KAAKo3H,gBAEvB,IAAM,IAAIjtH,EAAI,EAAGkB,EAAIjC,UAAUC,OAAQc,IAAMkB,IAAMlB,EAAI,CAEtD,MAAM+W,EAAS9X,UAAWe,GACzBoL,EAAO2L,EAAO3L,KACf,IAAIpM,EAAQ+wH,EAAe3kH,GAE3B,QAAe5U,IAAVwI,EAAsB,CAI1BA,EAAQmxH,IACRJ,EAAe3kH,GAASpM,EACxBomD,EAAQpxD,KAAM+iB,GAId,IAAM,IAAIqC,EAAI,EAAGjY,EAAI8uH,EAAW72G,IAAMjY,IAAMiY,EAE3C8zG,EAAU9zG,GAAIplB,KAAM,IAAIu4H,GAAiBx1G,EAAQ0wG,EAAOruG,GAAK42G,EAAa52G,UAIrE,GAAKpa,EAAQoxH,EAAiB,CAEpCF,EAAc9qE,EAASpmD,GAIvB,MAAMqxH,IAAsBD,EAC3BE,EAAmBlrE,EAASirE,GAE7BN,EAAeO,EAAiBllH,MAASpM,EACzComD,EAASpmD,GAAUsxH,EAEnBP,EAAe3kH,GAASilH,EACxBjrE,EAASirE,GAAqBt5G,EAI9B,IAAM,IAAIqC,EAAI,EAAGjY,EAAI8uH,EAAW72G,IAAMjY,IAAMiY,EAAI,CAE/C,MAAMm3G,EAAkBrD,EAAU9zG,GACjCo3G,EAAaD,EAAiBF,GAE/B,IAAI7G,EAAU+G,EAAiBvxH,GAE/BuxH,EAAiBvxH,GAAUwxH,OAEVh6H,IAAZgzH,IAMJA,EAAU,IAAI+C,GAAiBx1G,EAAQ0wG,EAAOruG,GAAK42G,EAAa52G,KAIjEm3G,EAAiBF,GAAqB7G,QAI5BpkE,EAASpmD,KAAYkxH,GAEhC/7H,QAAQ0R,MAAO,sJAOjBhQ,KAAKo3H,gBAAkBmD,GAIxBzqG,OAAQ,WAEP,MAAMy/B,EAAUvvD,KAAKuxE,SACpB2oD,EAAgBl6H,KAAK05H,eACrBrC,EAAWr3H,KAAK62H,UAChBuD,EAAY/C,EAAShuH,OAEtB,IAAIkxH,EAAiBv6H,KAAKo3H,gBAE1B,IAAM,IAAIjtH,EAAI,EAAGkB,EAAIjC,UAAUC,OAAQc,IAAMkB,IAAMlB,EAAI,CAEtD,MAAM+W,EAAS9X,UAAWe,GACzBoL,EAAO2L,EAAO3L,KACdpM,EAAQ+wH,EAAe3kH,GAExB,QAAe5U,IAAVwI,GAAuBA,GAASoxH,EAAiB,CAIrD,MAAMK,EAAkBL,IACvBM,EAAoBtrE,EAASqrE,GAE9BV,EAAeW,EAAkBtlH,MAASpM,EAC1ComD,EAASpmD,GAAU0xH,EAEnBX,EAAe3kH,GAASqlH,EACxBrrE,EAASqrE,GAAoB15G,EAI7B,IAAM,IAAIqC,EAAI,EAAGjY,EAAI8uH,EAAW72G,IAAMjY,IAAMiY,EAAI,CAE/C,MAAMm3G,EAAkBrD,EAAU9zG,GACjCu3G,EAAcJ,EAAiBE,GAC/BjH,EAAU+G,EAAiBvxH,GAE5BuxH,EAAiBvxH,GAAU2xH,EAC3BJ,EAAiBE,GAAoBjH,IAQxC3zH,KAAKo3H,gBAAkBmD,GAKxBQ,QAAS,WAER,MAAMxrE,EAAUvvD,KAAKuxE,SACpB2oD,EAAgBl6H,KAAK05H,eACrBrC,EAAWr3H,KAAK62H,UAChBuD,EAAY/C,EAAShuH,OAEtB,IAAIkxH,EAAiBv6H,KAAKo3H,gBACzBkD,EAAW/qE,EAAQlmD,OAEpB,IAAM,IAAIc,EAAI,EAAGkB,EAAIjC,UAAUC,OAAQc,IAAMkB,IAAMlB,EAAI,CAEtD,MACCoL,EADcnM,UAAWe,GACXoL,KACdpM,EAAQ+wH,EAAe3kH,GAExB,QAAe5U,IAAVwI,EAIJ,UAFO+wH,EAAe3kH,GAEjBpM,EAAQoxH,EAAiB,CAI7B,MAAMC,IAAsBD,EAC3BE,EAAmBlrE,EAASirE,GAC5Br5D,IAAem5D,EACfU,EAAazrE,EAAS4R,GAGvB+4D,EAAeO,EAAiBllH,MAASpM,EACzComD,EAASpmD,GAAUsxH,EAGnBP,EAAec,EAAWzlH,MAASilH,EACnCjrE,EAASirE,GAAqBQ,EAC9BzrE,EAAQid,MAIR,IAAM,IAAIjpD,EAAI,EAAGjY,EAAI8uH,EAAW72G,IAAMjY,IAAMiY,EAAI,CAE/C,MAAMm3G,EAAkBrD,EAAU9zG,GACjCo3G,EAAaD,EAAiBF,GAC9Bx5B,EAAO05B,EAAiBv5D,GAEzBu5D,EAAiBvxH,GAAUwxH,EAC3BD,EAAiBF,GAAqBx5B,EACtC05B,EAAgBluD,WAIX,CAIN,MAAMrL,IAAem5D,EACpBU,EAAazrE,EAAS4R,GAEvB+4D,EAAec,EAAWzlH,MAASpM,EACnComD,EAASpmD,GAAU6xH,EACnBzrE,EAAQid,MAIR,IAAM,IAAIjpD,EAAI,EAAGjY,EAAI8uH,EAAW72G,IAAMjY,IAAMiY,EAAI,CAE/C,MAAMm3G,EAAkBrD,EAAU9zG,GAElCm3G,EAAiBvxH,GAAUuxH,EAAiBv5D,GAC5Cu5D,EAAgBluD,QAUpBxsE,KAAKo3H,gBAAkBmD,GAMxBzD,WAAY,SAAW71D,EAAMw1D,GAK5B,MAAMwE,EAAgBj7H,KAAK65H,uBAC3B,IAAI1wH,EAAQ8xH,EAAeh6D,GAC3B,MAAMo2D,EAAWr3H,KAAK62H,UAEtB,QAAel2H,IAAVwI,EAAsB,OAAOkuH,EAAUluH,GAE5C,MAAMyoH,EAAQ5xH,KAAK25H,OAClBQ,EAAcn6H,KAAK45H,aACnBrqE,EAAUvvD,KAAKuxE,SACf+oD,EAAW/qE,EAAQlmD,OACnBkxH,EAAiBv6H,KAAKo3H,gBACtBsD,EAAkB,IAAIz7H,MAAOq7H,GAE9BnxH,EAAQkuH,EAAShuH,OAEjB4xH,EAAeh6D,GAAS93D,EAExByoH,EAAMzzH,KAAM8iE,GACZk5D,EAAYh8H,KAAMs4H,GAClBY,EAASl5H,KAAMu8H,GAEf,IAAM,IAAIvwH,EAAIowH,EAAgBlvH,EAAIkkD,EAAQlmD,OAAQc,IAAMkB,IAAMlB,EAAI,CAEjE,MAAM+W,EAASquC,EAASplD,GACxBuwH,EAAiBvwH,GAAM,IAAIusH,GAAiBx1G,EAAQ+/C,EAAMw1D,GAI3D,OAAOiE,GAIRQ,aAAc,SAAWj6D,GAKxB,MAAMg6D,EAAgBj7H,KAAK65H,uBAC1B1wH,EAAQ8xH,EAAeh6D,GAExB,QAAetgE,IAAVwI,EAAsB,CAE1B,MAAMyoH,EAAQ5xH,KAAK25H,OAClBQ,EAAcn6H,KAAK45H,aACnBvC,EAAWr3H,KAAK62H,UAChBsE,EAAoB9D,EAAShuH,OAAS,EACtC+xH,EAAe/D,EAAU8D,GAG1BF,EAFoBh6D,EAAMk6D,IAEUhyH,EAEpCkuH,EAAUluH,GAAUiyH,EACpB/D,EAAS7qD,MAET2tD,EAAahxH,GAAUgxH,EAAagB,GACpChB,EAAY3tD,MAEZolD,EAAOzoH,GAAUyoH,EAAOuJ,GACxBvJ,EAAMplD,UAQT,MAAM6uD,GAELz8H,YAAa08H,EAAOtpB,EAAMupB,EAAWrnB,GAEpCl0G,KAAKw7H,OAASF,EACdt7H,KAAKy7H,MAAQzpB,EACbhyG,KAAK07H,WAAaH,GAAa,KAC/Bv7H,KAAKk0G,UAAYA,GAAalC,EAAKkC,UAEnC,MAAMjC,EAASD,EAAKC,OACnB0pB,EAAU1pB,EAAO5oG,OACjBuyH,EAAe,IAAI38H,MAAO08H,GAErBE,EAAsB,CAC3B1kB,YAz91CyB,KA091CzBC,UA191CyB,MA691C1B,IAAM,IAAIjtG,EAAI,EAAGA,IAAMwxH,IAAYxxH,EAAI,CAEtC,MAAMwpG,EAAc1B,EAAQ9nG,GAAIipG,kBAAmB,MACnDwoB,EAAczxH,GAAMwpG,EACpBA,EAAYoD,SAAW8kB,EAIxB77H,KAAK87H,qBAAuBD,EAE5B77H,KAAK+7H,cAAgBH,EAGrB57H,KAAKg8H,kBAAoB,IAAI/8H,MAAO08H,GAEpC37H,KAAKi8H,YAAc,KACnBj8H,KAAKk8H,kBAAoB,KAEzBl8H,KAAKm8H,sBAAwB,KAC7Bn8H,KAAKo8H,mBAAqB,KAE1Bp8H,KAAKq8H,KAv/1CY,KAw/1CjBr8H,KAAKs8H,YAAe,EAIpBt8H,KAAKu8H,WAAa,KAIlBv8H,KAAK8gD,KAAO,EAEZ9gD,KAAK44G,UAAY,EACjB54G,KAAKw8H,oBAAsB,EAE3Bx8H,KAAKi4F,OAAS,EACdj4F,KAAKy8H,iBAAmB,EAExBz8H,KAAK08H,YAAcv8G,EAAAA,EAEnBngB,KAAK28H,QAAS,EACd38H,KAAKu4C,SAAU,EAEfv4C,KAAK48H,mBAAoB,EAEzB58H,KAAK68H,kBAAmB,EACxB78H,KAAK88H,gBAAiB,EAMvBl+H,OAIC,OAFAoB,KAAKw7H,OAAOuB,gBAAiB/8H,MAEtBA,KAIRpB,OAIC,OAFAoB,KAAKw7H,OAAOwB,kBAAmBh9H,MAExBA,KAAKgzD,QAIbp0D,QASC,OAPAoB,KAAK28H,QAAS,EACd38H,KAAKu4C,SAAU,EAEfv4C,KAAK8gD,KAAO,EACZ9gD,KAAKs8H,YAAe,EACpBt8H,KAAKu8H,WAAa,KAEXv8H,KAAKi9H,aAAaC,cAI1Bt+H,YAEC,OAAOoB,KAAKu4C,UAAav4C,KAAK28H,QAA6B,IAAnB38H,KAAK44G,WACxB,OAApB54G,KAAKu8H,YAAuBv8H,KAAKw7H,OAAO2B,gBAAiBn9H,MAK3DpB,cAEC,OAAOoB,KAAKw7H,OAAO2B,gBAAiBn9H,MAIrCpB,QAASkiD,GAIR,OAFA9gD,KAAKu8H,WAAaz7E,EAEX9gD,KAIRpB,QAASs2D,EAAMwnE,GAKd,OAHA18H,KAAKq8H,KAAOnnE,EACZl1D,KAAK08H,YAAcA,EAEZ18H,KASRpB,mBAAoBq5F,GAOnB,OALAj4F,KAAKi4F,OAASA,EAGdj4F,KAAKy8H,iBAAmBz8H,KAAKu4C,QAAU0/C,EAAS,EAEzCj4F,KAAKi9H,aAKbr+H,qBAEC,OAAOoB,KAAKy8H,iBAIb79H,OAAQi3G,GAEP,OAAO71G,KAAKo9H,gBAAiBvnB,EAAU,EAAG,GAI3Cj3G,QAASi3G,GAER,OAAO71G,KAAKo9H,gBAAiBvnB,EAAU,EAAG,GAI3Cj3G,cAAey+H,EAAexnB,EAAUynB,GAKvC,GAHAD,EAAcE,QAAS1nB,GACvB71G,KAAKw9H,OAAQ3nB,GAERynB,EAAO,CAEX,MAAMG,EAAiBz9H,KAAKy7H,MAAM5lB,SACjC6nB,EAAkBL,EAAc5B,MAAM5lB,SAEtC8nB,EAAgBD,EAAkBD,EAClCG,EAAgBH,EAAiBC,EAElCL,EAAcC,KAAM,EAAKK,EAAe9nB,GACxC71G,KAAKs9H,KAAMM,EAAe,EAAK/nB,GAIhC,OAAO71G,KAIRpB,YAAai/H,EAAchoB,EAAUynB,GAEpC,OAAOO,EAAaC,cAAe99H,KAAM61G,EAAUynB,GAIpD1+H,aAEC,MAAMm/H,EAAoB/9H,KAAKo8H,mBAS/B,OAP2B,OAAtB2B,IAEJ/9H,KAAKo8H,mBAAqB,KAC1Bp8H,KAAKw7H,OAAOwC,4BAA6BD,IAInC/9H,KASRpB,sBAAuBg6G,GAKtB,OAHA54G,KAAK44G,UAAYA,EACjB54G,KAAKw8H,oBAAsBx8H,KAAK28H,OAAS,EAAI/jB,EAEtC54G,KAAKk9H,cAKbt+H,wBAEC,OAAOoB,KAAKw8H,oBAIb59H,YAAai3G,GAIZ,OAFA71G,KAAK44G,UAAY54G,KAAKy7H,MAAM5lB,SAAWA,EAEhC71G,KAAKk9H,cAIbt+H,SAAUq/H,GAKT,OAHAj+H,KAAK8gD,KAAOm9E,EAAOn9E,KACnB9gD,KAAK44G,UAAYqlB,EAAOrlB,UAEjB54G,KAAKk9H,cAIbt+H,KAAMi3G,GAEL,OAAO71G,KAAKs9H,KAAMt9H,KAAKw8H,oBAAqB,EAAG3mB,GAIhDj3G,KAAMs/H,EAAgBC,EAActoB,GAEnC,MAAMylB,EAAQt7H,KAAKw7H,OAClB4C,EAAM9C,EAAMx6E,KACZ83D,EAAY54G,KAAK44G,UAElB,IAAIjF,EAAc3zG,KAAKm8H,sBAEF,OAAhBxoB,IAEJA,EAAc2nB,EAAM+C,0BACpBr+H,KAAKm8H,sBAAwBxoB,GAI9B,MAAMvC,EAAQuC,EAAYS,mBACzBniF,EAAS0hF,EAAYU,aAQtB,OANAjD,EAAO,GAAMgtB,EACbhtB,EAAO,GAAMgtB,EAAMvoB,EAEnB5jF,EAAQ,GAAMisG,EAAiBtlB,EAC/B3mF,EAAQ,GAAMksG,EAAevlB,EAEtB54G,KAIRpB,cAEC,MAAM0/H,EAAuBt+H,KAAKm8H,sBASlC,OAP8B,OAAzBmC,IAEJt+H,KAAKm8H,sBAAwB,KAC7Bn8H,KAAKw7H,OAAOwC,4BAA6BM,IAInCt+H,KAMRpB,WAEC,OAAOoB,KAAKw7H,OAIb58H,UAEC,OAAOoB,KAAKy7H,MAIb78H,UAEC,OAAOoB,KAAK07H,YAAc17H,KAAKw7H,OAAO+C,MAMvC3/H,QAASkiD,EAAM09E,EAAWC,EAAevJ,GAIxC,IAAOl1H,KAAKu4C,QAKX,YADAv4C,KAAK0+H,cAAe59E,GAKrB,MAAM+3D,EAAY74G,KAAKu8H,WAEvB,GAAmB,OAAd1jB,EAAqB,CAIzB,MAAM8lB,GAAgB79E,EAAO+3D,GAAc4lB,EAC3C,GAAKE,EAAc,GAAuB,IAAlBF,EAEvB,OAMDz+H,KAAKu8H,WAAa,KAClBiC,EAAYC,EAAgBE,EAM7BH,GAAax+H,KAAK4+H,iBAAkB99E,GACpC,MAAM+9E,EAAW7+H,KAAK8+H,YAAaN,GAK7BvmC,EAASj4F,KAAK0+H,cAAe59E,GAEnC,GAAKm3C,EAAS,EAAI,CAEjB,MAAM2jC,EAAe57H,KAAK+7H,cACpBgD,EAAiB/+H,KAAKg8H,kBAE5B,OAASh8H,KAAKk0G,WAEb,KAtz2C+B,KAwz2C9B,IAAM,IAAI3wF,EAAI,EAAGjY,EAAIswH,EAAavyH,OAAQka,IAAMjY,IAAMiY,EAErDq4G,EAAcr4G,GAAIqwF,SAAUirB,GAC5BE,EAAgBx7G,GAAI8xG,mBAAoBp9B,GAIzC,MAED,KAl02C6B,KAm02C7B,QAEC,IAAM,IAAI10E,EAAI,EAAGjY,EAAIswH,EAAavyH,OAAQka,IAAMjY,IAAMiY,EAErDq4G,EAAcr4G,GAAIqwF,SAAUirB,GAC5BE,EAAgBx7G,GAAI0xG,WAAYC,EAAWj9B,KAUhDr5F,cAAekiD,GAEd,IAAIm3C,EAAS,EAEb,GAAKj4F,KAAKu4C,QAAU,CAEnB0/C,EAASj4F,KAAKi4F,OACd,MAAM0b,EAAc3zG,KAAKo8H,mBAEzB,GAAqB,OAAhBzoB,EAAuB,CAE3B,MAAMqrB,EAAmBrrB,EAAYC,SAAU9yD,GAAQ,GAEvDm3C,GAAU+mC,EAELl+E,EAAO6yD,EAAYS,mBAAoB,KAE3Cp0G,KAAKi9H,aAEqB,IAArB+B,IAGJh/H,KAAKu4C,SAAU,KAWnB,OADAv4C,KAAKy8H,iBAAmBxkC,EACjBA,EAIRr5F,iBAAkBkiD,GAEjB,IAAI83D,EAAY,EAEhB,IAAO54G,KAAK28H,OAAS,CAEpB/jB,EAAY54G,KAAK44G,UAEjB,MAAMjF,EAAc3zG,KAAKm8H,sBAEzB,GAAqB,OAAhBxoB,EAAuB,CAI3BiF,GAFyBjF,EAAYC,SAAU9yD,GAAQ,GAIlDA,EAAO6yD,EAAYS,mBAAoB,KAE3Cp0G,KAAKk9H,cAEc,IAAdtkB,EAGJ54G,KAAK28H,QAAS,EAKd38H,KAAK44G,UAAYA,IAWrB,OADA54G,KAAKw8H,oBAAsB5jB,EACpBA,EAIRh6G,YAAa4/H,GAEZ,MAAM3oB,EAAW71G,KAAKy7H,MAAM5lB,SACtBwmB,EAAOr8H,KAAKq8H,KAElB,IAAIv7E,EAAO9gD,KAAK8gD,KAAO09E,EACnBS,EAAYj/H,KAAKs8H,WAErB,MAAM4C,EAj72Ca,OAi72CA7C,EAEnB,GAAmB,IAAdmC,EAEJ,OAAqB,IAAhBS,EAA2Bn+E,EAEvBo+E,GAAkC,IAAR,EAAZD,GAA0BppB,EAAW/0D,EAAOA,EAIpE,GA772Ce,OA672CVu7E,EAAoB,EAEH,IAAhB4C,IAIJj/H,KAAKs8H,WAAa,EAClBt8H,KAAKm/H,aAAa,GAAM,GAAM,IAI/BC,EAAa,CAEZ,GAAKt+E,GAAQ+0D,EAEZ/0D,EAAO+0D,MAED,CAAA,KAAK/0D,EAAO,GAIZ,CAEN9gD,KAAK8gD,KAAOA,EAEZ,MAAMs+E,EANNt+E,EAAO,EAUH9gD,KAAK48H,kBAAoB58H,KAAK28H,QAAS,EACvC38H,KAAKu4C,SAAU,EAEpBv4C,KAAK8gD,KAAOA,EAEZ9gD,KAAKw7H,OAAOxxH,cAAe,CAC1BlL,KAAM,WAAYm/H,OAAQj+H,KAC1BglB,UAAWw5G,EAAY,GAAM,EAAI,SAK7B,CAwBN,IAtBqB,IAAhBS,IAICT,GAAa,GAEjBS,EAAY,EAEZj/H,KAAKm/H,aAAa,EAA2B,IAArBn/H,KAAK08H,YAAmBwC,IAQhDl/H,KAAKm/H,YAAkC,IAArBn/H,KAAK08H,aAAmB,EAAMwC,IAM7Cp+E,GAAQ+0D,GAAY/0D,EAAO,EAAI,CAInC,MAAMu+E,EAAYhiI,KAAKqL,MAAOo4C,EAAO+0D,GACrC/0D,GAAQ+0D,EAAWwpB,EAEnBJ,GAAa5hI,KAAK4R,IAAKowH,GAEvB,MAAMC,EAAUt/H,KAAK08H,YAAcuC,EAEnC,GAAKK,GAAW,EAIVt/H,KAAK48H,kBAAoB58H,KAAK28H,QAAS,EACvC38H,KAAKu4C,SAAU,EAEpBuI,EAAO09E,EAAY,EAAI3oB,EAAW,EAElC71G,KAAK8gD,KAAOA,EAEZ9gD,KAAKw7H,OAAOxxH,cAAe,CAC1BlL,KAAM,WAAYm/H,OAAQj+H,KAC1BglB,UAAWw5G,EAAY,EAAI,GAAM,QAG5B,CAIN,GAAiB,IAAZc,EAAgB,CAIpB,MAAMC,EAAUf,EAAY,EAC5Bx+H,KAAKm/H,YAAaI,GAAWA,EAASL,QAItCl/H,KAAKm/H,aAAa,GAAO,EAAOD,GAIjCl/H,KAAKs8H,WAAa2C,EAElBj/H,KAAK8gD,KAAOA,EAEZ9gD,KAAKw7H,OAAOxxH,cAAe,CAC1BlL,KAAM,OAAQm/H,OAAQj+H,KAAMq/H,UAAWA,UAOzCr/H,KAAK8gD,KAAOA,EAIb,GAAKo+E,GAAkC,IAAR,EAAZD,GAIlB,OAAOppB,EAAW/0D,EAMpB,OAAOA,EAIRliD,YAAa2gI,EAASC,EAAON,GAE5B,MAAMnoB,EAAW/2G,KAAK87H,qBAEjBoD,GAEJnoB,EAASI,YAvk3CY,KAwk3CrBJ,EAASK,UAxk3CY,OAgl3CpBL,EAASI,YAFLooB,EAEmBv/H,KAAK68H,iBAhl3CR,KADI,KAEH,KAyl3CrB9lB,EAASK,UAFLooB,EAEiBx/H,KAAK88H,eA1l3CN,KADI,KAEH,MAqm3CxBl+H,gBAAiBi3G,EAAU4pB,EAAWC,GAErC,MAAMpE,EAAQt7H,KAAKw7H,OAAQ4C,EAAM9C,EAAMx6E,KACvC,IAAI6yD,EAAc3zG,KAAKo8H,mBAEF,OAAhBzoB,IAEJA,EAAc2nB,EAAM+C,0BACpBr+H,KAAKo8H,mBAAqBzoB,GAI3B,MAAMvC,EAAQuC,EAAYS,mBACzBniF,EAAS0hF,EAAYU,aAOtB,OALAjD,EAAO,GAAMgtB,EACbnsG,EAAQ,GAAMwtG,EACdruB,EAAO,GAAMgtB,EAAMvoB,EACnB5jF,EAAQ,GAAMytG,EAEP1/H,MAMT,SAAS2/H,GAAgBpI,GAExBv3H,KAAKu+H,MAAQhH,EACbv3H,KAAK4/H,qBACL5/H,KAAK6/H,WAAa,EAElB7/H,KAAK8gD,KAAO,EAEZ9gD,KAAK44G,UAAY,EAIlB+mB,GAAer+H,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ5M,EAAgBlI,WAAa,CAErF4B,YAAay8H,GAEbG,YAAa,SAAW7B,EAAQ8B,GAE/B,MAAMxI,EAAO0G,EAAOvC,YAAc17H,KAAKu+H,MACtCtsB,EAASgsB,EAAOxC,MAAMxpB,OACtB0pB,EAAU1pB,EAAO5oG,OACjBguH,EAAW4G,EAAOjC,kBAClBJ,EAAeqC,EAAOlC,cACtBiE,EAAWzI,EAAKhiH,KAChB0qH,EAAiBjgI,KAAKkgI,uBAEvB,IAAIC,EAAiBF,EAAgBD,QAEbr/H,IAAnBw/H,IAEJA,EAAiB,GACjBF,EAAgBD,GAAaG,GAI9B,IAAM,IAAIh2H,EAAI,EAAGA,IAAMwxH,IAAYxxH,EAAI,CAEtC,MAAM+nG,EAAQD,EAAQ9nG,GACrB8wG,EAAY/I,EAAM/wG,KAEnB,IAAIwyH,EAAUwM,EAAgBllB,GAE9B,QAAiBt6G,IAAZgzH,EAEJ0D,EAAUltH,GAAMwpH,MAEV,CAIN,GAFAA,EAAU0D,EAAUltH,QAEHxJ,IAAZgzH,EAAwB,CAIC,OAAxBA,EAAQsI,gBAETtI,EAAQqB,eACXh1H,KAAKogI,oBAAqBzM,EAASqM,EAAU/kB,IAI9C,SAID,MAAMh6C,EAAO8+D,GAAmBA,EAC/B/D,kBAAmB7xH,GAAIwpH,QAAQ8C,WAEhC9C,EAAU,IAAID,GACbgD,GAAgBtgH,OAAQmhH,EAAMtc,EAAWh6C,GACzCixC,EAAMa,cAAeb,EAAME,kBAEzBuhB,EAAQqB,eACXh1H,KAAKogI,oBAAqBzM,EAASqM,EAAU/kB,GAE7Coc,EAAUltH,GAAMwpH,EAIjBiI,EAAczxH,GAAI0pG,aAAe8f,EAAQ9xE,SAM3Ck7E,gBAAiB,SAAWkB,GAE3B,IAAOj+H,KAAKm9H,gBAAiBc,GAAW,CAEvC,GAA4B,OAAvBA,EAAOhC,YAAuB,CAKlC,MAAM+D,GAAa/B,EAAOvC,YAAc17H,KAAKu+H,OAAQhpH,KACpD8qH,EAAWpC,EAAOxC,MAAMlmH,KACxB+qH,EAAiBtgI,KAAKugI,eAAgBF,GAEvCrgI,KAAK8/H,YAAa7B,EACjBqC,GAAkBA,EAAeE,aAAc,IAEhDxgI,KAAKygI,mBAAoBxC,EAAQoC,EAAUL,GAI5C,MAAM3I,EAAW4G,EAAOjC,kBAGxB,IAAM,IAAI7xH,EAAI,EAAGkB,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAAI,CAErD,MAAMwpH,EAAU0D,EAAUltH,GAEG,GAAxBwpH,EAAQoB,aAEZ/0H,KAAK0gI,aAAc/M,GACnBA,EAAQ6B,qBAMVx1H,KAAK2gI,YAAa1C,KAMpBjB,kBAAmB,SAAWiB,GAE7B,GAAKj+H,KAAKm9H,gBAAiBc,GAAW,CAErC,MAAM5G,EAAW4G,EAAOjC,kBAGxB,IAAM,IAAI7xH,EAAI,EAAGkB,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAAI,CAErD,MAAMwpH,EAAU0D,EAAUltH,GAEG,KAArBwpH,EAAQoB,WAEfpB,EAAQ+B,uBACR11H,KAAK4gI,iBAAkBjN,IAMzB3zH,KAAK6gI,gBAAiB5C,KAQxB2B,mBAAoB,WAEnB5/H,KAAK8gI,SAAW,GAChB9gI,KAAK+gI,gBAAkB,EAEvB/gI,KAAKugI,eAAiB,GAQtBvgI,KAAK62H,UAAY,GACjB72H,KAAKghI,iBAAmB,EAExBhhI,KAAKkgI,uBAAyB,GAG9BlgI,KAAKihI,qBAAuB,GAC5BjhI,KAAKkhI,4BAA8B,EAEnC,MAAMrsF,EAAQ70C,KAEdA,KAAK85H,MAAQ,CAEZqH,QAAS,CACRpH,YAEC,OAAOllF,EAAMisF,SAASz3H,QAGvB2wH,YAEC,OAAOnlF,EAAMksF,kBAIf1J,SAAU,CACT0C,YAEC,OAAOllF,EAAMgiF,UAAUxtH,QAGxB2wH,YAEC,OAAOnlF,EAAMmsF,mBAIfI,oBAAqB,CACpBrH,YAEC,OAAOllF,EAAMosF,qBAAqB53H,QAGnC2wH,YAEC,OAAOnlF,EAAMqsF,gCAWjB/D,gBAAiB,SAAWc,GAE3B,MAAM90H,EAAQ80H,EAAOhC,YACrB,OAAiB,OAAV9yH,GAAkBA,EAAQnJ,KAAK+gI,iBAIvCN,mBAAoB,SAAWxC,EAAQoC,EAAUL,GAEhD,MAAMmB,EAAUnhI,KAAK8gI,SACpBO,EAAgBrhI,KAAKugI,eAEtB,IAAID,EAAiBe,EAAehB,GAEpC,QAAwB1/H,IAAnB2/H,EAEJA,EAAiB,CAEhBE,aAAc,CAAEvC,GAChBqD,aAAc,IAIfrD,EAAO/B,kBAAoB,EAE3BmF,EAAehB,GAAaC,MAEtB,CAEN,MAAME,EAAeF,EAAeE,aAEpCvC,EAAO/B,kBAAoBsE,EAAan3H,OACxCm3H,EAAariI,KAAM8/H,GAIpBA,EAAOhC,YAAckF,EAAQ93H,OAC7B83H,EAAQhjI,KAAM8/H,GAEdqC,EAAegB,aAActB,GAAa/B,GAI3CsD,sBAAuB,SAAWtD,GAEjC,MAAMkD,EAAUnhI,KAAK8gI,SACpBU,EAAqBL,EAASA,EAAQ93H,OAAS,GAC/Co4H,EAAaxD,EAAOhC,YAErBuF,EAAmBvF,YAAcwF,EACjCN,EAASM,GAAeD,EACxBL,EAAQ30D,MAERyxD,EAAOhC,YAAc,KAGrB,MAAMoE,EAAWpC,EAAOxC,MAAMlmH,KAC7B8rH,EAAgBrhI,KAAKugI,eACrBD,EAAiBe,EAAehB,GAChCqB,EAAsBpB,EAAeE,aAErCmB,EACCD,EAAqBA,EAAoBr4H,OAAS,GAEnDu4H,EAAmB3D,EAAO/B,kBAE3ByF,EAAgBzF,kBAAoB0F,EACpCF,EAAqBE,GAAqBD,EAC1CD,EAAoBl1D,MAEpByxD,EAAO/B,kBAAoB,YAGNoE,EAAegB,cACtBrD,EAAOvC,YAAc17H,KAAKu+H,OAAQhpH,MAIZ,IAA/BmsH,EAAoBr4H,eAEjBg4H,EAAehB,GAIvBrgI,KAAK6hI,iCAAkC5D,IAIxC4D,iCAAkC,SAAW5D,GAE5C,MAAM5G,EAAW4G,EAAOjC,kBAExB,IAAM,IAAI7xH,EAAI,EAAGkB,EAAIgsH,EAAShuH,OAAQc,IAAMkB,IAAMlB,EAAI,CAErD,MAAMwpH,EAAU0D,EAAUltH,GAES,KAA3BwpH,EAAQqB,gBAEfh1H,KAAK8hI,uBAAwBnO,KAQhCgN,YAAa,SAAW1C,GAQvB,MAAMkD,EAAUnhI,KAAK8gI,SACpBiB,EAAY9D,EAAOhC,YAEnB+F,EAAkBhiI,KAAK+gI,kBAEvBkB,EAAsBd,EAASa,GAEhC/D,EAAOhC,YAAc+F,EACrBb,EAASa,GAAoB/D,EAE7BgE,EAAoBhG,YAAc8F,EAClCZ,EAASY,GAAcE,GAIxBpB,gBAAiB,SAAW5C,GAQ3B,MAAMkD,EAAUnhI,KAAK8gI,SACpBiB,EAAY9D,EAAOhC,YAEnBiG,IAAwBliI,KAAK+gI,gBAE7BoB,EAAmBhB,EAASe,GAE7BjE,EAAOhC,YAAciG,EACrBf,EAASe,GAAuBjE,EAEhCkE,EAAiBlG,YAAc8F,EAC/BZ,EAASY,GAAcI,GAMxB/B,oBAAqB,SAAWzM,EAASqM,EAAU/kB,GAElD,MAAMglB,EAAiBjgI,KAAKkgI,uBAC3B7I,EAAWr3H,KAAK62H,UAEjB,IAAIuL,EAAgBnC,EAAgBD,QAEbr/H,IAAlByhI,IAEJA,EAAgB,GAChBnC,EAAgBD,GAAaoC,GAI9BA,EAAennB,GAAc0Y,EAE7BA,EAAQsI,YAAc5E,EAAShuH,OAC/BguH,EAASl5H,KAAMw1H,IAIhBmO,uBAAwB,SAAWnO,GAElC,MAAM0D,EAAWr3H,KAAK62H,UACrBwL,EAAc1O,EAAQA,QACtBqM,EAAWqC,EAAYtL,SAASxhH,KAChC0lG,EAAYonB,EAAYphE,KACxBg/D,EAAiBjgI,KAAKkgI,uBACtBkC,EAAgBnC,EAAgBD,GAEhCsC,EAAsBjL,EAAUA,EAAShuH,OAAS,GAClDo4H,EAAa9N,EAAQsI,YAEtBqG,EAAoBrG,YAAcwF,EAClCpK,EAAUoK,GAAea,EACzBjL,EAAS7qD,aAEF41D,EAAennB,GAEuB,IAAxCj8G,OAAOuyC,KAAM6wF,GAAgB/4H,eAE1B42H,EAAgBD,IAMzBU,aAAc,SAAW/M,GAExB,MAAM0D,EAAWr3H,KAAK62H,UACrBkL,EAAYpO,EAAQsI,YAEpB+F,EAAkBhiI,KAAKghI,mBAEvBuB,EAAuBlL,EAAU2K,GAElCrO,EAAQsI,YAAc+F,EACtB3K,EAAU2K,GAAoBrO,EAE9B4O,EAAqBtG,YAAc8F,EACnC1K,EAAU0K,GAAcQ,GAIzB3B,iBAAkB,SAAWjN,GAE5B,MAAM0D,EAAWr3H,KAAK62H,UACrBkL,EAAYpO,EAAQsI,YAEpBiG,IAAwBliI,KAAKghI,iBAE7BwB,EAAoBnL,EAAU6K,GAE/BvO,EAAQsI,YAAciG,EACtB7K,EAAU6K,GAAuBvO,EAEjC6O,EAAkBvG,YAAc8F,EAChC1K,EAAU0K,GAAcS,GAOzBnE,wBAAyB,WAExB,MAAMzC,EAAe57H,KAAKihI,qBACzBe,EAAkBhiI,KAAKkhI,8BAExB,IAAIvtB,EAAcioB,EAAcoG,GAahC,YAXqBrhI,IAAhBgzG,IAEJA,EAAc,IAAIkB,GACjB,IAAIxrE,aAAc,GAAK,IAAIA,aAAc,GACzC,EAAGrpC,KAAKyiI,kCAET9uB,EAAY+uB,aAAeV,EAC3BpG,EAAcoG,GAAoBruB,GAI5BA,GAIRqqB,4BAA6B,SAAWrqB,GAEvC,MAAMioB,EAAe57H,KAAKihI,qBACzBc,EAAYpuB,EAAY+uB,aAExBR,IAAwBliI,KAAKkhI,4BAE7ByB,EAAwB/G,EAAcsG,GAEvCvuB,EAAY+uB,aAAeR,EAC3BtG,EAAcsG,GAAuBvuB,EAErCgvB,EAAsBD,aAAeX,EACrCnG,EAAcmG,GAAcY,GAI7BF,iCAAkC,IAAIp5F,aAAc,GAKpDu5F,WAAY,SAAW5wB,EAAM6wB,EAAc3uB,GAE1C,MAAMqjB,EAAOsL,GAAgB7iI,KAAKu+H,MACjCyB,EAAWzI,EAAKhiH,KAEjB,IAAIutH,EAA6B,iBAAT9wB,EAAoB4D,GAAcyE,WAAYkd,EAAMvlB,GAASA,EAErF,MAAMquB,EAA0B,OAAfyC,EAAsBA,EAAWvtH,KAAOy8F,EAEnDsuB,EAAiBtgI,KAAKugI,eAAgBF,GAC5C,IAAIN,EAAkB,KAgBtB,QAdmBp/H,IAAduzG,IAIHA,EAFmB,OAAf4uB,EAEQA,EAAW5uB,UAxo4CM,WAkp4CPvzG,IAAnB2/H,EAA+B,CAEnC,MAAMyC,EAAiBzC,EAAegB,aAActB,GAEpD,QAAwBr/H,IAAnBoiI,GAAgCA,EAAe7uB,YAAcA,EAEjE,OAAO6uB,EAMRhD,EAAkBO,EAAeE,aAAc,GAG3B,OAAfsC,IACJA,EAAa/C,EAAgBtE,OAK/B,GAAoB,OAAfqH,EAAsB,OAAO,KAGlC,MAAME,EAAY,IAAI3H,GAAiBr7H,KAAM8iI,EAAYD,EAAc3uB,GAOvE,OALAl0G,KAAK8/H,YAAakD,EAAWjD,GAG7B//H,KAAKygI,mBAAoBuC,EAAW3C,EAAUL,GAEvCgD,GAKRD,eAAgB,SAAW/wB,EAAM6wB,GAEhC,MAAMtL,EAAOsL,GAAgB7iI,KAAKu+H,MACjCyB,EAAWzI,EAAKhiH,KAEhButH,EAA6B,iBAAT9wB,EACnB4D,GAAcyE,WAAYkd,EAAMvlB,GAASA,EAE1CquB,EAAWyC,EAAaA,EAAWvtH,KAAOy8F,EAE1CsuB,EAAiBtgI,KAAKugI,eAAgBF,GAEvC,YAAwB1/H,IAAnB2/H,GAEGA,EAAegB,aAActB,IAI9B,MAKRiD,cAAe,WAEd,MAAM9B,EAAUnhI,KAAK8gI,SAGrB,IAAM,IAAI32H,EAFEnK,KAAK+gI,gBAEQ,EAAG52H,GAAK,IAAMA,EAEtCg3H,EAASh3H,GAAI82C,OAId,OAAOjhD,MAKR6E,OAAQ,SAAW25H,GAElBA,GAAax+H,KAAK44G,UAElB,MAAMuoB,EAAUnhI,KAAK8gI,SACpBoC,EAAWljI,KAAK+gI,gBAEhBjgF,EAAO9gD,KAAK8gD,MAAQ09E,EACpBC,EAAgBphI,KAAKsL,KAAM61H,GAE3BtJ,EAAYl1H,KAAK6/H,YAAc,EAIhC,IAAM,IAAI11H,EAAI,EAAGA,IAAM+4H,IAAa/4H,EAAI,CAExBg3H,EAASh3H,GAEjBg5H,QAASriF,EAAM09E,EAAWC,EAAevJ,GAMjD,MAAMmC,EAAWr3H,KAAK62H,UACrBuD,EAAYp6H,KAAKghI,iBAElB,IAAM,IAAI72H,EAAI,EAAGA,IAAMiwH,IAAcjwH,EAEpCktH,EAAUltH,GAAIgxE,MAAO+5C,GAItB,OAAOl1H,MAKRojI,QAAS,SAAWC,GAEnBrjI,KAAK8gD,KAAO,EACZ,IAAM,IAAI32C,EAAI,EAAGA,EAAInK,KAAK8gI,SAASz3H,OAAQc,IAE1CnK,KAAK8gI,SAAU32H,GAAI22C,KAAO,EAI3B,OAAO9gD,KAAK6E,OAAQw+H,IAKrBC,QAAS,WAER,OAAOtjI,KAAKu+H,OAKbgF,YAAa,SAAWvxB,GAEvB,MAAMmvB,EAAUnhI,KAAK8gI,SACpBT,EAAWruB,EAAKz8F,KAChB8rH,EAAgBrhI,KAAKugI,eACrBD,EAAiBe,EAAehB,GAEjC,QAAwB1/H,IAAnB2/H,EAA+B,CAMnC,MAAMkD,EAAkBlD,EAAeE,aAEvC,IAAM,IAAIr2H,EAAI,EAAGkB,EAAIm4H,EAAgBn6H,OAAQc,IAAMkB,IAAMlB,EAAI,CAE5D,MAAM8zH,EAASuF,EAAiBr5H,GAEhCnK,KAAKg9H,kBAAmBiB,GAExB,MAAMwD,EAAaxD,EAAOhC,YACzBuF,EAAqBL,EAASA,EAAQ93H,OAAS,GAEhD40H,EAAOhC,YAAc,KACrBgC,EAAO/B,kBAAoB,KAE3BsF,EAAmBvF,YAAcwF,EACjCN,EAASM,GAAeD,EACxBL,EAAQ30D,MAERxsE,KAAK6hI,iCAAkC5D,UAIjCoD,EAAehB,KAOxBoD,YAAa,SAAWlM,GAEvB,MAAMyI,EAAWzI,EAAKhiH,KACrB8rH,EAAgBrhI,KAAKugI,eAEtB,IAAM,MAAMF,KAAYgB,EAAgB,CAEvC,MACCpD,EADoBoD,EAAehB,GAAWiB,aACvBtB,QAERr/H,IAAXs9H,IAEJj+H,KAAKg9H,kBAAmBiB,GACxBj+H,KAAKuhI,sBAAuBtD,IAM9B,MACCmE,EADsBpiI,KAAKkgI,uBACKF,GAEjC,QAAuBr/H,IAAlByhI,EAEJ,IAAM,MAAMnnB,KAAamnB,EAAgB,CAExC,MAAMzO,EAAUyO,EAAennB,GAC/B0Y,EAAQ+B,uBACR11H,KAAK8hI,uBAAwBnO,KAShC+P,cAAe,SAAW1xB,EAAM6wB,GAE/B,MAAM5E,EAASj+H,KAAK+iI,eAAgB/wB,EAAM6wB,GAE1B,OAAX5E,IAEJj+H,KAAKg9H,kBAAmBiB,GACxBj+H,KAAKuhI,sBAAuBtD,OAQ/B,MAAM0F,GAEL/kI,YAAaC,GAEU,iBAAVA,IAEXP,QAAQC,KAAM,sDACdM,EAAQuK,UAAW,IAIpBpJ,KAAKnB,MAAQA,EAIdD,QAEC,OAAO,IAAI+kI,QAA8BhjI,IAArBX,KAAKnB,MAAM2X,MAAsBxW,KAAKnB,MAAQmB,KAAKnB,MAAM2X,UAM/E,SAASotH,GAA4B15H,EAAO4oD,EAAQL,GAEnD0iC,GAAkBxvF,KAAM3F,KAAMkK,EAAO4oD,GAErC9yD,KAAKyyD,iBAAmBA,GAAoB,EAyD7C,SAASoxE,GAAmBhiF,EAAQ/iD,EAAMqpC,EAAU+Z,EAAaxhC,GAEhE1gB,KAAK6hD,OAASA,EACd7hD,KAAKlB,KAAOA,EACZkB,KAAKmoC,SAAWA,EAChBnoC,KAAKkiD,YAAcA,EACnBliD,KAAK0gB,MAAQA,EAEb1gB,KAAKkW,QAAU,EAqDhB,SAAS4tH,GAAW/+G,EAAQC,EAAWsG,EAAMC,GAE5CvrB,KAAKilB,IAAM,IAAIH,GAAKC,EAAQC,GAG5BhlB,KAAKsrB,KAAOA,GAAQ,EACpBtrB,KAAKurB,IAAMA,GAAOpL,EAAAA,EAClBngB,KAAKse,OAAS,KACdte,KAAKqsB,OAAS,IAAIH,GAElBlsB,KAAK+5F,OAAS,CACbnnD,KAAM,GACNinD,KAAM,CAAElF,UAAW,GACnBqC,IAAK,GACLgE,OAAQ,CAAErG,UAAW,GACrB8B,OAAQ,IAGTz3F,OAAOuuB,iBAAkBvtB,KAAK+5F,OAAQ,CACrCgqC,WAAY,CACX/hI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,yEACPyB,KAAKg7F,WAQhB,SAASgpC,GAAS52H,EAAGC,GAEpB,OAAOD,EAAE8hB,SAAW7hB,EAAE6hB,SAIvB,SAAS+0G,GAAiB/iH,EAAQ6xB,EAAWa,EAAYzhB,GAQxD,GANKjR,EAAOmL,OAAOhlB,KAAM0rC,EAAU1mB,SAElCnL,EAAOuP,QAASsiB,EAAWa,IAIT,IAAdzhB,EAAqB,CAEzB,MAAMpQ,EAAWb,EAAOa,SAExB,IAAM,IAAI5X,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAE5C85H,GAAiBliH,EAAU5X,GAAK4oC,EAAWa,GAAY,IArK1DgwF,GAA2BtiI,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ++E,GAAkB7zF,WAAa,CAEnG4B,YAAa0gI,GAEbzvE,8BAA8B,EAE9B19C,KAAM,SAAWnN,GAMhB,OAJA6rF,GAAkB7zF,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAE7CtJ,KAAKyyD,iBAAmBnpD,EAAOmpD,iBAExBzyD,MAIRwW,MAAO,SAAW0b,GAEjB,MAAMqjE,EAAKJ,GAAkB7zF,UAAUkV,MAAM7Q,KAAM3F,KAAMkyB,GAIzD,OAFAqjE,EAAG9iC,iBAAmBzyD,KAAKyyD,iBAEpB8iC,GAIR7+E,OAAQ,SAAWwb,GAElB,MAAM6jF,EAAO5gB,GAAkB7zF,UAAUoV,OAAO/Q,KAAM3F,KAAMkyB,GAK5D,OAHA6jF,EAAK5hD,8BAA+B,EACpC4hD,EAAKtjD,iBAAmBzyD,KAAKyyD,iBAEtBsjD,KAgCT/2G,OAAO2C,eAAgBkiI,GAAkBviI,UAAW,cAAe,CAElET,IAAK,SAAWhC,IAEA,IAAVA,GAAiBmB,KAAKkW,aAM7BlX,OAAOuG,OAAQs+H,GAAkBviI,UAAW,CAE3CguC,qBAAqB,EAErB40F,UAAW,SAAWriF,GAIrB,OAFA7hD,KAAK6hD,OAASA,EAEP7hD,MAIRmkI,QAAS,SAAWrlI,EAAMojD,GAKzB,OAHAliD,KAAKlB,KAAOA,EACZkB,KAAKkiD,YAAcA,EAEZliD,MAIRokI,YAAa,SAAWj8F,GAIvB,OAFAnoC,KAAKmoC,SAAWA,EAETnoC,MAIRqkI,SAAU,SAAW3jH,GAIpB,OAFA1gB,KAAK0gB,MAAQA,EAEN1gB,QAiEThB,OAAOuG,OAAQu+H,GAAUxiI,UAAW,CAEnCT,IAAK,SAAWkkB,EAAQC,GAIvBhlB,KAAKilB,IAAIpkB,IAAKkkB,EAAQC,IAIvBs/G,cAAe,SAAWC,EAAQjmH,GAE1BA,GAAUA,EAAO69B,qBAEvBn8C,KAAKilB,IAAIF,OAAO0K,sBAAuBnR,EAAOK,aAC9C3e,KAAKilB,IAAID,UAAUnkB,IAAK0jI,EAAO37H,EAAG27H,EAAO14H,EAAG,IAAM24H,UAAWlmH,GAASkB,IAAKxf,KAAKilB,IAAIF,QAASzV,YAC7FtP,KAAKse,OAASA,GAEDA,GAAUA,EAAOuzE,sBAE9B7xF,KAAKilB,IAAIF,OAAOlkB,IAAK0jI,EAAO37H,EAAG27H,EAAO14H,GAAKyS,EAAOgN,KAAOhN,EAAOiN,MAAUjN,EAAOgN,KAAOhN,EAAOiN,MAAQi5G,UAAWlmH,GAClHte,KAAKilB,IAAID,UAAUnkB,IAAK,EAAG,GAAK,GAAIwmB,mBAAoB/I,EAAOK,aAC/D3e,KAAKse,OAASA,GAIdhgB,QAAQ0R,MAAO,8CAMjBi0H,gBAAiB,SAAW/iH,EAAQiR,EAAWmwF,GAE9C,MAAM1uE,EAAa0uE,GAAkB,GAMrC,OAJA2hB,GAAiB/iH,EAAQlhB,KAAM4zC,EAAYzhB,GAE3CyhB,EAAWwD,KAAM4sF,IAEVpwF,GAIR6wF,iBAAkB,SAAWl1E,EAASp9B,EAAWmwF,GAEhD,MAAM1uE,EAAa0uE,GAAkB,GAErC,IAAkC,IAA7BrjH,MAAMkY,QAASo4C,GAGnB,OADAjxD,QAAQC,KAAM,8DACPq1C,EAIR,IAAM,IAAIzpC,EAAI,EAAGC,EAAImlD,EAAQlmD,OAAQc,EAAIC,EAAGD,IAE3C85H,GAAiB10E,EAASplD,GAAKnK,KAAM4zC,EAAYzhB,GAMlD,OAFAyhB,EAAWwD,KAAM4sF,IAEVpwF,KAaT,MAAM8wF,GAEL9lI,YAAaghB,EAAS,EAAGC,EAAM,EAAG/L,EAAQ,GAMzC,OAJA9T,KAAK4f,OAASA,EACd5f,KAAK6f,IAAMA,EACX7f,KAAK8T,MAAQA,EAEN9T,KAIRpB,IAAKghB,EAAQC,EAAK/L,GAMjB,OAJA9T,KAAK4f,OAASA,EACd5f,KAAK6f,IAAMA,EACX7f,KAAK8T,MAAQA,EAEN9T,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAM+lI,GAML,OAJA3kI,KAAK4f,OAAS+kH,EAAM/kH,OACpB5f,KAAK6f,IAAM8kH,EAAM9kH,IACjB7f,KAAK8T,MAAQ6wH,EAAM7wH,MAEZ9T,KAKRpB,WAEC,MAAMy9F,EAAM,KAGZ,OAFAr8F,KAAK6f,IAAMxiB,KAAK8N,IAAKkxF,EAAKh/F,KAAK6N,IAAK7N,KAAKoN,GAAK4xF,EAAKr8F,KAAK6f,MAEjD7f,KAIRpB,eAAgB2B,GAEf,OAAOP,KAAK4kI,uBAAwBrkI,EAAEqI,EAAGrI,EAAEsL,EAAGtL,EAAEkX,GAIjD7Y,uBAAwBgK,EAAGiD,EAAG4L,GAgB7B,OAdAzX,KAAK4f,OAASviB,KAAK2R,KAAMpG,EAAIA,EAAIiD,EAAIA,EAAI4L,EAAIA,GAExB,IAAhBzX,KAAK4f,QAET5f,KAAK8T,MAAQ,EACb9T,KAAK6f,IAAM,IAIX7f,KAAK8T,MAAQzW,KAAK6R,MAAOtG,EAAG6O,GAC5BzX,KAAK6f,IAAMxiB,KAAKqa,KAAMnN,EAAUU,MAAOY,EAAI7L,KAAK4f,QAAU,EAAG,KAIvD5f,MAMT,MAAM6kI,GAAY,IAAI32H,EAoON,IAAIsP,EACF,IAAIA,EAEtB,SAASsnH,GAAuBjzG,GAE/B1E,GAASxnB,KAAM3F,MAEfA,KAAK6xB,SAAWA,EAChB7xB,KAAKm+C,OAAS,aAEdn+C,KAAK+uF,cAAe,EACpB/uF,KAAKgvF,YAAa,EAClBhvF,KAAKkvF,WAAY,EACjBlvF,KAAKivF,QAAS,EAEdjvF,KAAKmvF,cAAgB,KACrBnvF,KAAKovF,YAAc,KACnBpvF,KAAKsvF,WAAa,KAClBtvF,KAAKqvF,QAAU,KAEfrvF,KAAK0gB,MAAQ,EAIdokH,GAAsBxjI,UAAYtC,OAAOoX,OAAQ+W,GAAS7rB,WAC1DwjI,GAAsBxjI,UAAU4B,YAAc4hI,GAE9CA,GAAsBxjI,UAAUovF,yBAA0B,EAExC,IAAIlzE,EAAtB,MAEMunH,GAAY,IAAIvnH,EAChBwnH,GAAc,IAAI19G,GAClB29G,GAAkB,IAAI39G,GAG5B,MAAM49G,WAAuBxqC,GAE5B97F,YAAasiB,GAEZ,MAAMoqD,EAiFR,SAAS65D,EAAajkH,GAErB,MAAMkkH,EAAW,GAEZlkH,GAAUA,EAAOw3E,QAErB0sC,EAASjnI,KAAM+iB,GAIhB,IAAM,IAAI/W,EAAI,EAAGA,EAAI+W,EAAOa,SAAS1Y,OAAQc,IAE5Ci7H,EAASjnI,KAAKg9E,MAAOiqD,EAAUD,EAAajkH,EAAOa,SAAU5X,KAI9D,OAAOi7H,EAjGQD,CAAajkH,GAErBQ,EAAW,IAAI0rB,GAEfpC,EAAW,GACXhB,EAAS,GAET1I,EAAS,IAAI5B,GAAO,EAAG,EAAG,GAC1B6B,EAAS,IAAI7B,GAAO,EAAG,EAAG,GAEhC,IAAM,IAAIv1B,EAAI,EAAGA,EAAImhE,EAAMjiE,OAAQc,IAAO,CAEzC,MAAMsuF,EAAOntB,EAAOnhE,GAEfsuF,EAAKrrE,QAAUqrE,EAAKrrE,OAAOsrE,SAE/B1tD,EAAS7sC,KAAM,EAAG,EAAG,GACrB6sC,EAAS7sC,KAAM,EAAG,EAAG,GACrB6rC,EAAO7rC,KAAMmjC,EAAOhuB,EAAGguB,EAAO9uB,EAAG8uB,EAAOj0B,GACxC28B,EAAO7rC,KAAMojC,EAAOjuB,EAAGiuB,EAAO/uB,EAAG+uB,EAAOl0B,IAM1CqU,EAAS/d,aAAc,WAAY,IAAIylC,GAAwB4B,EAAU,IACzEtpB,EAAS/d,aAAc,QAAS,IAAIylC,GAAwBY,EAAQ,IAIpEjqC,MAAO2hB,EAFU,IAAIipD,GAAmB,CAAE9oC,cAAc,EAAMgB,WAAW,EAAOC,YAAY,EAAOqB,YAAY,EAAO9B,aAAa,KAInIriC,KAAKlB,KAAO,iBACZkB,KAAKqlI,kBAAmB,EAExBrlI,KAAKu3H,KAAOr2G,EACZlhB,KAAKsrE,MAAQA,EAEbtrE,KAAK0S,OAASwO,EAAOvC,YACrB3e,KAAK6V,kBAAmB,EAIzBjX,kBAAmBiyB,GAElB,MAAMy6C,EAAQtrE,KAAKsrE,MAEb5pD,EAAW1hB,KAAK0hB,SAChB0I,EAAW1I,EAASisB,aAAc,YAExCs3F,GAAgB7xH,WAAYpT,KAAKu3H,KAAK54G,aAEtC,IAAM,IAAIxU,EAAI,EAAGoZ,EAAI,EAAGpZ,EAAImhE,EAAMjiE,OAAQc,IAAO,CAEhD,MAAMsuF,EAAOntB,EAAOnhE,GAEfsuF,EAAKrrE,QAAUqrE,EAAKrrE,OAAOsrE,SAE/BssC,GAAY/zH,iBAAkBg0H,GAAiBxsC,EAAK95E,aACpDomH,GAAUt1G,sBAAuBu1G,IACjC56G,EAASmgB,OAAQhnB,EAAGwhH,GAAUn8H,EAAGm8H,GAAUl5H,EAAGk5H,GAAUttH,GAExDutH,GAAY/zH,iBAAkBg0H,GAAiBxsC,EAAKrrE,OAAOzO,aAC3DomH,GAAUt1G,sBAAuBu1G,IACjC56G,EAASmgB,OAAQhnB,EAAI,EAAGwhH,GAAUn8H,EAAGm8H,GAAUl5H,EAAGk5H,GAAUttH,GAE5D8L,GAAK,GAMP7B,EAASisB,aAAc,YAAaK,aAAc,EAElDjuC,MAAMswB,kBAAmBQ,IA2BT,IAAIrT,EACN,IAAIkiB,GACJ,IAAIA,GAEN,IAAIliB,EACJ,IAAIA,EACJ,IAAIA,EAEA,IAAIA,EACN,IAAIg+B,GAEL,IAAIt7B,EAEL,IAAI1C,EAblB,MAiBM8nH,GAAWjoI,KAAKkL,IAAK,EADX,GAOVg9H,GAAkB,CAAE,KAAO,KAAO,IAAM,KAAO,KAAO,MAEtDC,GAAaC,EAAwBF,GAAgBl8H,OAMrDq8H,GAAY,CACjBC,IAAoB,EACpBC,KAAkB,EAClBC,KAAkB,EAClBC,KAAmB,EACnBC,KAAoB,EACpBC,KAAkB,EAClBC,KAAmB,GAGdC,GAAc,IAAI9e,IAClB+e,WAAEA,GAAUC,UAAEA,GAASC,QAAEA,IAic/B,WAEC,MAAMF,EAAa,GACbC,EAAY,GACZC,EAAU,GAEhB,IAAIC,EAjeW,EAmef,IAAM,IAAIn8H,EAAI,EAAGA,EAAIq7H,GAAYr7H,IAAO,CAEvC,MAAMo8H,EAAUlpI,KAAKkL,IAAK,EAAG+9H,GAC7BF,EAAUjoI,KAAMooI,GAChB,IAAIC,EAAQ,EAAMD,EAEbp8H,EAAIs7H,EAERe,EAAQjB,GAAiBp7H,EA3eZ,EADA,EA4eoC,GAEjC,GAALA,IAEXq8H,EAAQ,GAITH,EAAQloI,KAAMqoI,GAEd,MAAMC,EAAY,GAAQF,EAAU,GAC9Br7H,GAAQu7H,EAAY,EACpBt7H,EAAM,EAAIs7H,EAAY,EACtB5xG,EAAM,CAAE3pB,EAAKA,EAAKC,EAAKD,EAAKC,EAAKA,EAAKD,EAAKA,EAAKC,EAAKA,EAAKD,EAAKC,GAE/Du7H,EAAY,EACZ17F,EAAW,EACX27F,EAAe,EACfC,EAAS,EACTC,EAAgB,EAEhBz8G,EAAW,IAAIif,aAAcs9F,EAAe37F,EAAW07F,GACvDpvH,EAAK,IAAI+xB,aAAcu9F,EAAS57F,EAAW07F,GAC3C3yF,EAAY,IAAI1K,aAAcw9F,EAAgB77F,EAAW07F,GAE/D,IAAM,IAAI36F,EAAO,EAAGA,EAAO26F,EAAW36F,IAAU,CAE/C,MAAMnjC,EAAMmjC,EAAO,EAAM,EAAI,EAAI,EAC3BlgC,EAAIkgC,EAAO,EAAI,GAAM,EACrB+6F,EAAc,CACnBl+H,EAAGiD,EAAG,EACNjD,EAAI,EAAI,EAAGiD,EAAG,EACdjD,EAAI,EAAI,EAAGiD,EAAI,EAAG,EAClBjD,EAAGiD,EAAG,EACNjD,EAAI,EAAI,EAAGiD,EAAI,EAAG,EAClBjD,EAAGiD,EAAI,EAAG,GAEXue,EAASvpB,IAAKimI,EAAaH,EAAe37F,EAAWe,GACrDz0B,EAAGzW,IAAKg0B,EAAK+xG,EAAS57F,EAAWe,GACjC,MAAMg7F,EAAO,CAAEh7F,EAAMA,EAAMA,EAAMA,EAAMA,EAAMA,GAC7CgI,EAAUlzC,IAAKkmI,EAAMF,EAAgB77F,EAAWe,GAIjD,MAAMqT,EAAS,IAAIhS,GACnBgS,EAAOz7C,aAAc,WAAY,IAAIukC,GAAiB9d,EAAUu8G,IAChEvnF,EAAOz7C,aAAc,KAAM,IAAIukC,GAAiB5wB,EAAIsvH,IACpDxnF,EAAOz7C,aAAc,YAAa,IAAIukC,GAAiB6L,EAAW8yF,IAClEV,EAAWhoI,KAAMihD,GAEZknF,EA9hBS,GAgiBbA,IAMF,MAAO,CAAEH,WAAAA,EAAYC,UAAAA,EAAWC,QAAAA,GA3gBUW,GAC3C,IAAIC,GAAa,KAGjB,MAAMC,IAAQ,EAAI7pI,KAAK2R,KAAM,IAAQ,EAC/Bm4H,GAAU,EAAID,GAIdE,GAAkB,CACvB,IAAI5pH,EAAS,EAAG,EAAG,GACnB,IAAIA,GAAW,EAAG,EAAG,GACrB,IAAIA,EAAS,EAAG,GAAK,GACrB,IAAIA,GAAW,EAAG,GAAK,GACvB,IAAIA,EAAS,EAAG0pH,GAAKC,IACrB,IAAI3pH,EAAS,EAAG0pH,IAAOC,IACvB,IAAI3pH,EAAS2pH,GAAS,EAAGD,IACzB,IAAI1pH,GAAW2pH,GAAS,EAAGD,IAC3B,IAAI1pH,EAAS0pH,GAAKC,GAAS,GAC3B,IAAI3pH,GAAW0pH,GAAKC,GAAS,IAc9B,MAAME,GAELzoI,YAAai/C,GAEZ79C,KAAKsxE,UAAYzzB,EACjB79C,KAAKsnI,sBAAwB,KAE7BtnI,KAAKunI,cAwfP,SAAyB1wE,GAExB,MAAM2wE,EAAU,IAAIn+F,aAAcwtB,GAC5B4wE,EAAW,IAAIjqH,EAAS,EAAG,EAAG,GA6FpC,OA5FuB,IAAI2yF,GAAmB,CAE7ChvG,KAAM,wBAENu5C,QAAS,CAAErvC,EAAKwrD,GAEhBvc,SAAU,CACT1V,OAAU,CAAE/lC,MAAO,MACnB0a,QAAW,CAAE1a,MAAO,GACpB2oI,QAAW,CAAE3oI,MAAO2oI,GACpBE,YAAe,CAAE7oI,OAAO,GACxB8oI,OAAU,CAAE9oI,MAAO,GACnB+oI,OAAU,CAAE/oI,MAAO,GACnB4oI,SAAY,CAAE5oI,MAAO4oI,GACrBI,cAAiB,CAAEhpI,MAAO6mI,GAlq7CN,MAmq7CpBv9D,eAAkB,CAAEtpE,MAAO6mI,GAnq7CP,OAsq7CrB/qF,aAAcmtF,KAEdltF,eAA0B,gVAetBmtF,myCAmDJ9lG,SAn37CiB,EAo37CjBY,WAAW,EACXC,YAAY,IAplBSklG,CArDH,IAsDlBhoI,KAAKioI,gBAAkB,KACvBjoI,KAAKkoI,eAAiB,KAEtBloI,KAAKmoI,iBAAkBnoI,KAAKunI,eAW7B3oI,UAAWk/C,EAAO0oF,EAAQ,EAAGl7G,EAAO,GAAKC,EAAM,KAE9C07G,GAAajnI,KAAKsxE,UAAUrzB,kBAC5B,MAAMmqF,EAAqBpoI,KAAKqoI,mBAYhC,OAVAroI,KAAKsoI,eAAgBxqF,EAAOxyB,EAAMC,EAAK68G,GAClC5B,EAAQ,GAEZxmI,KAAKuoI,MAAOH,EAAoB,EAAG,EAAG5B,GAIvCxmI,KAAKwoI,YAAaJ,GAClBpoI,KAAKyoI,SAAUL,GAERA,EASRxpI,oBAAqB8pI,GAEpB,OAAO1oI,KAAK2oI,aAAcD,GAS3B9pI,YAAagqI,GAEZ,OAAO5oI,KAAK2oI,aAAcC,GAQ3BhqI,uBAE8B,OAAxBoB,KAAKkoI,iBAETloI,KAAKkoI,eAAiBW,KACtB7oI,KAAKmoI,iBAAkBnoI,KAAKkoI,iBAU9BtpI,+BAE+B,OAAzBoB,KAAKioI,kBAETjoI,KAAKioI,gBAAkBa,KACvB9oI,KAAKmoI,iBAAkBnoI,KAAKioI,kBAW9BrpI,UAECoB,KAAKunI,cAAcnwH,UAEU,OAAxBpX,KAAKkoI,gBAA0BloI,KAAKkoI,eAAe9wH,UAC1B,OAAzBpX,KAAKioI,iBAA2BjoI,KAAKioI,gBAAgB7wH,UAE1D,IAAM,IAAIjN,EAAI,EAAGA,EAAIg8H,GAAW98H,OAAQc,IAEvCg8H,GAAYh8H,GAAIiN,UAQlBxY,SAAUmqI,GAET/oI,KAAKsnI,sBAAsBlwH,UAC3BpX,KAAKsxE,UAAUpzB,gBAAiB+oF,IAChC8B,EAAa/vH,aAAc,EAC3BgwH,GAAcD,EAAc,EAAG,EAAGA,EAAa56H,MAAO46H,EAAa36H,QAIpExP,aAAcsa,GAEb+tH,GAAajnI,KAAKsxE,UAAUrzB,kBAC5B,MAAMmqF,EAAqBpoI,KAAKqoI,iBAAkBnvH,GAKlD,OAJAlZ,KAAKipI,iBAAkB/vH,EAASkvH,GAChCpoI,KAAKwoI,YAAaJ,GAClBpoI,KAAKyoI,SAAUL,GAERA,EAIRxpI,iBAAkBsa,GAEjB,MAAM6gF,EAAS,CACd7kF,UAn36CmB,KAo36CnBC,UAp36CmB,KAq36CnBW,iBAAiB,EACjBhX,KAh36CsB,KAi36CtBsW,OAn26CgB,KAo26ChBE,SAAU4zH,GAAQhwH,GAAYA,EAAQ5D,SA9x6CpB,KA+x6ClB6D,aAAa,GAGRivH,EAAqBe,GAAqBpvC,GAGhD,OAFAquC,EAAmBjvH,aAAcD,EACjClZ,KAAKsnI,sBAAwB6B,GAAqBpvC,GAC3CquC,EAIRxpI,iBAAkBizB,GAEjB,MAAMu3G,EAAU,IAAIx2F,GAAMuzF,GAAY,GAAKt0G,GAC3C7xB,KAAKsxE,UAAU4e,QAASk5C,EAASlD,IAIlCtnI,eAAgBk/C,EAAOxyB,EAAMC,EAAK68G,GAEjC,MAEMiB,EAAa,IAAI5tF,GAFX,GACG,EACwCnwB,EAAMC,GACvD+9G,EAAS,CAAE,GAAK,EAAG,EAAG,EAAG,EAAG,GAC5BC,EAAc,CAAE,EAAG,EAAG,GAAK,GAAK,GAAK,GACrC1rF,EAAW79C,KAAKsxE,UAEhBnJ,EAAiBtqB,EAASsqB,eAC1BnX,EAAcnT,EAASmT,YACvBxB,EAAa3R,EAASmS,gBACtBL,EAAa9R,EAASqS,gBAE5BrS,EAASmT,YAz66CW,EA066CpBnT,EAASsqB,eAl06CY,IAo06CrB,IAAIxZ,EAAa7Q,EAAM6Q,WACvB,GAAKA,GAAcA,EAAW/uB,QAAU,CAEvC+uB,EAAW66E,sBAEX,MAAMC,EAAepsI,KAAK8N,IAAKwjD,EAAWr7C,EAAGq7C,EAAWn8C,EAAGm8C,EAAWthD,GAChEq8H,EAAOrsI,KAAK6N,IAAK7N,KAAK8N,IAAK9N,KAAKyP,KAAMzP,KAAKssI,KAAMF,KAAoB,KAAS,KACpF96E,EAAaA,EAAWjgD,eAAgBrR,KAAKkL,IAAK,GAAOmhI,IACzD,MAAMn6H,GAAUm6H,EAAO,KAAU,IACjC7rF,EAASoS,cAAetB,EAAYp/C,GACpCuuC,EAAM6Q,WAAa,KAIpB,IAAM,IAAIxkD,EAAI,EAAGA,EAAI,EAAGA,IAAO,CAE9B,MAAMy/H,EAAMz/H,EAAI,EACJ,GAAPy/H,GAEJP,EAAWrgH,GAAGnoB,IAAK,EAAGyoI,EAAQn/H,GAAK,GACnCk/H,EAAW75G,OAAQ+5G,EAAap/H,GAAK,EAAG,IAEtB,GAAPy/H,GAEXP,EAAWrgH,GAAGnoB,IAAK,EAAG,EAAGyoI,EAAQn/H,IACjCk/H,EAAW75G,OAAQ,EAAG+5G,EAAap/H,GAAK,KAIxCk/H,EAAWrgH,GAAGnoB,IAAK,EAAGyoI,EAAQn/H,GAAK,GACnCk/H,EAAW75G,OAAQ,EAAG,EAAG+5G,EAAap/H,KAIvC6+H,GAAcZ,EACbwB,EAAMtE,GAAUn7H,EAAI,EAAIm7H,GAAW,EAAGA,GAAUA,IACjDznF,EAASK,gBAAiBkqF,GAC1BvqF,EAASM,OAAQL,EAAOurF,GAIzBxrF,EAASmT,YAAcA,EACvBnT,EAASsqB,eAAiBA,EAC1BtqB,EAASoS,cAAeT,EAAYG,GAIrC/wD,iBAAkBsa,EAASkvH,GAE1B,MAAMvqF,EAAW79C,KAAKsxE,UAEjBp4D,EAAQ43C,cAEgB,MAAvB9wD,KAAKkoI,iBAETloI,KAAKkoI,eAAiBW,MAMM,MAAxB7oI,KAAKioI,kBAETjoI,KAAKioI,gBAAkBa,MAMzB,MAAMj3G,EAAW3Y,EAAQ43C,cAAgB9wD,KAAKkoI,eAAiBloI,KAAKioI,gBAC9DvxF,EAAO,IAAI9D,GAAMuzF,GAAY,GAAKt0G,GAElCyoB,EAAWzoB,EAASyoB,SAE1BA,SAAqBz7C,MAAQqa,EAEtBA,EAAQ43C,eAEdxW,YAAwBz7C,MAAMgC,IAAK,EAAMqY,EAAQhF,MAAM/F,MAAO,EAAM+K,EAAQhF,MAAM9F,QAInFksC,gBAA4Bz7C,MAAQ6mI,GAAWxsH,EAAQ5D,UACvDglC,iBAA6Bz7C,MAAQ6mI,GAAW0C,EAAmBlvH,QAAQ5D,UAE3E0zH,GAAcZ,EAAoB,EAAG,EAAG,EAAI9C,GAAU,EAAIA,IAE1DznF,EAASK,gBAAiBkqF,GAC1BvqF,EAASM,OAAQzH,EAAMwvF,IAIxBtnI,YAAawpI,GAEZ,MAAMvqF,EAAW79C,KAAKsxE,UAChB5gB,EAAY7S,EAAS6S,UAC3B7S,EAAS6S,WAAY,EAErB,IAAM,IAAIvmD,EAAI,EAAGA,EAAIq7H,GAAYr7H,IAAO,CAEvC,MAAMq8H,EAAQnpI,KAAK2R,KAAMq3H,GAASl8H,GAAMk8H,GAASl8H,GAAMk8H,GAASl8H,EAAI,GAAMk8H,GAASl8H,EAAI,IAEjFs9H,EAAWL,IAAmBj9H,EAAI,GAAMi9H,GAAgB/9H,QAE9DrJ,KAAKuoI,MAAOH,EAAoBj+H,EAAI,EAAGA,EAAGq8H,EAAOiB,GAIlD5pF,EAAS6S,UAAYA,EAWtB9xD,MAAOwpI,EAAoByB,EAAOC,EAAQtD,EAAOiB,GAEhD,MAAMsC,EAAuB/pI,KAAKsnI,sBAElCtnI,KAAKgqI,UACJ5B,EACA2B,EACAF,EACAC,EACAtD,EACA,cACAiB,GAEDznI,KAAKgqI,UACJD,EACA3B,EACA0B,EACAA,EACAtD,EACA,eACAiB,GAIF7oI,UAAWqrI,EAAUC,EAAWL,EAAOC,EAAQK,EAAcnlH,EAAWyiH,GAEvE,MAAM5pF,EAAW79C,KAAKsxE,UAChB84D,EAAepqI,KAAKunI,cAEP,gBAAdviH,GAA6C,iBAAdA,GAEnC1mB,QAAQ0R,MACP,8DAKF,MAEMq6H,EAAW,IAAIz3F,GAAMuzF,GAAY2D,GAAUM,GAC3CE,EAAeF,EAAa9vF,SAE5BiwF,EAASnE,GAAWyD,GAAU,EAC9BW,EAAkB/hI,SAAU0hI,GAAiB9sI,KAAKoN,IAAO,EAAI8/H,GAAW,EAAIltI,KAAKoN,MACjFggI,EAAcN,EAAeK,EAC7BjxH,EAAU9Q,SAAU0hI,GAAiB,EAAI9sI,KAAKqL,MARxB,EAQqD+hI,GArY/D,GAuYblxH,EAvYa,IAyYjBjb,QAAQC,KAAM,iBACb4rI,kDACA5wH,2CAIF,MAAMiuH,EAAU,GAChB,IAAIvmC,EAAM,EAEV,IAAM,IAAI92F,EAAI,EAAGA,EAlZC,KAkZmBA,EAAI,CAExC,MAAMvB,EAAIuB,EAAIsgI,EACRxyC,EAAS56F,KAAKqtI,KAAO9hI,EAAIA,EAAI,GACnC4+H,EAAQrpI,KAAM85F,GAEJ,GAAL9tF,EAEJ82F,GAAOhJ,EAEI9tF,EAAIoP,IAEf0nF,GAAO,EAAIhJ,GAMb,IAAM,IAAI9tF,EAAI,EAAGA,EAAIq9H,EAAQn+H,OAAQc,IAEpCq9H,EAASr9H,GAAMq9H,EAASr9H,GAAM82F,EAI/BqpC,SAAyBzrI,MAAQorI,EAAS/wH,QAC1CoxH,UAA0BzrI,MAAQ0a,EAClC+wH,UAA0BzrI,MAAQ2oI,EAClC8C,cAA8BzrI,MAAsB,gBAAdmmB,EAEjCyiH,IAEJ6C,WAA2BzrI,MAAQ4oI,GAIpC6C,SAAyBzrI,MAAQ2rI,EACjCF,SAAyBzrI,MAncX,EAmc6BgrI,EAC3CS,gBAAgCzrI,MAAQ6mI,GAAWuE,EAAS/wH,QAAQ5D,UACpEg1H,iBAAiCzrI,MAAQ6mI,GAAWuE,EAAS/wH,QAAQ5D,UAErE,MAAMq1H,EAAavE,GAAW0D,GAI9Bd,GAAckB,EAHJ,EAAI7sI,KAAK8N,IAAK,EAAGm6H,GAAW,EAAIqF,IACnB,IAAXb,EAAe,EAAI,EAAIxE,IAAa,EAAIqF,GAAeb,EAASrE,EAAoBqE,EAzclF,EADA,EA0c+G,GAE9F,EAAIa,EAAY,EAAIA,GACnD9sF,EAASK,gBAAiBgsF,GAC1BrsF,EAASM,OAAQksF,EAAUnE,KAM7B,SAASgD,GAAQhwH,GAEhB,YAAiBvY,IAAZuY,GA5n7CmB,OA4n7CMA,EAAQpa,OA3i7ChB,MA6i7Cfoa,EAAQ5D,UA5i7CK,OA4i7C0B4D,EAAQ5D,UA3i7CjC,OA2i7C8D4D,EAAQ5D,UAkF5F,SAAS6zH,GAAqBpvC,GAE7B,MAAMquC,EAAqB,IAAItvH,EAAmB,EAAIwsH,GAAU,EAAIA,GAAUvrC,GAI9E,OAHAquC,EAAmBlvH,QAAQnE,QA9t7CI,IA+t7C/BqzH,EAAmBlvH,QAAQ/X,KAAO,eAClCinI,EAAmBpvH,aAAc,EAC1BovH,EAIR,SAASY,GAAchgI,EAAQJ,EAAGiD,EAAGsC,EAAOC,GAE3CpF,EAAOiQ,SAASpY,IAAK+H,EAAGiD,EAAGsC,EAAOC,GAClCpF,EAAO+P,QAAQlY,IAAK+H,EAAGiD,EAAGsC,EAAOC,GAwGlC,SAAS06H,KA8DR,OA3DuB,IAAI34B,GAAmB,CAE7ChvG,KAAM,0BAENm5C,SAAU,CACT1V,OAAU,CAAE/lC,MAAO,MACnB4nI,UAAa,CAAE5nI,MAPC,IAAIqP,EAAS,EAAG,IAQhC25H,cAAiB,CAAEhpI,MAAO6mI,GA9v7CN,MA+v7CpBv9D,eAAkB,CAAEtpE,MAAO6mI,GA/v7CP,OAkw7CrB/qF,aAAcmtF,KAEdltF,eAA0B,uLAUtBmtF,63BA8BJ9lG,SAr77CiB,EAs77CjBY,WAAW,EACXC,YAAY,IAQd,SAAS+lG,KAwCR,OAtCuB,IAAI14B,GAAmB,CAE7ChvG,KAAM,kBAENm5C,SAAU,CACT1V,OAAU,CAAE/lC,MAAO,MACnBgpI,cAAiB,CAAEhpI,MAAO6mI,GA9z7CN,MA+z7CpBv9D,eAAkB,CAAEtpE,MAAO6mI,GA/z7CP,OAk07CrB/qF,aAAcmtF,KAEdltF,eAA0B,0JAStBmtF,mSAWJ9lG,SAj+7CiB,EAk+7CjBY,WAAW,EACXC,YAAY,IAQd,SAASglG,KAER,MAAiB,+rCA6DlB,SAASC,KAER,MAAiB,29CA8JlB,SAAS6C,GAAQjqH,GAEhBriB,QAAQC,KAAM,sEAEd4lH,GAAiBx+G,KAAM3F,KAAM2gB,GAC7B3gB,KAAKlB,KAAO,aA7Eb4/G,GAAMtoG,OAAS,SAAWy0H,EAAWxoB,GAQpC,OANA/jH,QAAQyO,IAAK,4CAEb89H,EAAUvpI,UAAYtC,OAAOoX,OAAQsoG,GAAMp9G,WAC3CupI,EAAUvpI,UAAU4B,YAAc2nI,EAClCA,EAAUvpI,UAAU+gH,SAAWA,EAExBwoB,GAMR7rI,OAAOuG,OAAQ0gH,GAAU3kH,UAAW,CAEnCwpI,qBAAsB,SAAWroB,GAEhCnkH,QAAQC,KAAM,wHAId,MAAMomG,EAAM3kG,KAAKwiH,UAAWC,GAC5B,OAAOziH,KAAK+qI,eAAgBpmC,IAI7BqmC,2BAA4B,SAAWvoB,GAEtCnkH,QAAQC,KAAM,8HAId,MAAMomG,EAAM3kG,KAAKumG,gBAAiBkc,GAClC,OAAOziH,KAAK+qI,eAAgBpmC,IAI7BomC,eAAgB,SAAWpqH,GAE1BriB,QAAQC,KAAM,kHAEd,MAAMmjB,EAAW,IAAIizB,GAErB,IAAM,IAAIxqC,EAAI,EAAGC,EAAIuW,EAAOtX,OAAQc,EAAIC,EAAGD,IAAO,CAEjD,MAAMmX,EAAQX,EAAQxW,GACtBuX,EAASspB,SAAS7sC,KAAM,IAAIqf,EAAS8D,EAAM1Y,EAAG0Y,EAAMzV,EAAGyV,EAAM7J,GAAK,IAInE,OAAOiK,KAQT1iB,OAAOuG,OAAQ6gH,GAAK9kH,UAAW,CAE9B2pI,WAAY,SAAWtqH,GAGtB,OADAriB,QAAQC,KAAM,mEACPyB,KAAKmjB,cAAexC,MAiB7BiqH,GAAOtpI,UAAYtC,OAAOoX,OAAQ+tG,GAAiB7iH,WAEnDtC,OAAOuG,OAAQqlI,GAAOtpI,UAAW,CAEhC4pI,cAAe,WAEd5sI,QAAQ0R,MAAO,qDAGhBm7H,sBAAuB,WAEtB7sI,QAAQ0R,MAAO,6DAGhBo7H,yBAA0B,WAEzB9sI,QAAQ0R,MAAO,kEAMjBk1H,GAAe5jI,UAAUuD,OAAS,WAEjCvG,QAAQ0R,MAAO,iEAMhBhR,OAAOuG,OAAQ83G,GAAO/7G,UAAW,CAEhC+pI,eAAgB,SAAWn0H,GAG1B,OADA5Y,QAAQC,KAAM,wGACPksH,GAA4BvzG,MAMrCmmG,GAAOiuB,SAAW,CAEjBrqH,IAAK,WAEJ3iB,QAAQ0R,MAAO,4FAIhBhO,IAAK,WAEJ1D,QAAQ0R,MAAO,6FAMjBhR,OAAOuG,OAAQqmH,GAAatqH,UAAW,CAEtCiqI,eAAgB,SAAW1sI,GAG1B,OADAP,QAAQC,KAAM,iFACPyB,KAAKg+G,gBAAiBn/G,MAQ/BG,OAAOuG,OAz7CP,MAEC3G,YAAasM,EAAKC,GAEjBnM,OAAO2C,eAAgB3B,KAAM,SAAU,CAAEnB,OAAO,IAEhDmB,KAAKkL,SAAgBvK,IAARuK,EAAsBA,EAAM,IAAIgD,EAAWiS,EAAAA,EAAYA,EAAAA,GACpEngB,KAAKmL,SAAgBxK,IAARwK,EAAsBA,EAAM,IAAI+C,GAAWiS,EAAAA,GAAYA,EAAAA,GAIrEvhB,IAAKsM,EAAKC,GAKT,OAHAnL,KAAKkL,IAAIuL,KAAMvL,GACflL,KAAKmL,IAAIsL,KAAMtL,GAERnL,KAIRpB,cAAe+hB,GAEd3gB,KAAK4gB,YAEL,IAAM,IAAIzW,EAAI,EAAG0W,EAAKF,EAAOtX,OAAQc,EAAI0W,EAAI1W,IAE5CnK,KAAK8gB,cAAeH,EAAQxW,IAI7B,OAAOnK,KAIRpB,qBAAsBiR,EAAQ3K,GAE7B,MAAM6b,EAAW8jH,GAAUpuH,KAAMvR,GAAOwJ,eAAgB,IAIxD,OAHA1O,KAAKkL,IAAIuL,KAAM5G,GAAS2P,IAAKuB,GAC7B/gB,KAAKmL,IAAIsL,KAAM5G,GAASoR,IAAKF,GAEtB/gB,KAIRpB,QAEC,OAAO,IAAIoB,KAAKkD,aAAcuT,KAAMzW,MAIrCpB,KAAMwiB,GAKL,OAHAphB,KAAKkL,IAAIuL,KAAM2K,EAAIlW,KACnBlL,KAAKmL,IAAIsL,KAAM2K,EAAIjW,KAEZnL,KAIRpB,YAKC,OAHAoB,KAAKkL,IAAItC,EAAI5I,KAAKkL,IAAIW,EAAMsU,EAAAA,EAC5BngB,KAAKmL,IAAIvC,EAAI5I,KAAKmL,IAAIU,GAAMsU,EAAAA,EAErBngB,KAIRpB,UAIC,OAASoB,KAAKmL,IAAIvC,EAAI5I,KAAKkL,IAAItC,GAAS5I,KAAKmL,IAAIU,EAAI7L,KAAKkL,IAAIW,EAI/DjN,UAAWoK,GASV,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,mDACdyK,EAAS,IAAIkF,GAIPlO,KAAKqhB,UAAYrY,EAAOnI,IAAK,EAAG,GAAMmI,EAAOwF,WAAYxO,KAAKkL,IAAKlL,KAAKmL,KAAMuD,eAAgB,IAItG9P,QAASoK,GASR,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,iDACdyK,EAAS,IAAIkF,GAIPlO,KAAKqhB,UAAYrY,EAAOnI,IAAK,EAAG,GAAMmI,EAAOyF,WAAYzO,KAAKmL,IAAKnL,KAAKkL,KAIhFtM,cAAe0iB,GAKd,OAHAthB,KAAKkL,IAAIA,IAAKoW,GACdthB,KAAKmL,IAAIA,IAAKmW,GAEPthB,KAIRpB,eAAgB2iB,GAKf,OAHAvhB,KAAKkL,IAAIsU,IAAK+B,GACdvhB,KAAKmL,IAAI8V,IAAKM,GAEPvhB,KAIRpB,eAAgByP,GAKf,OAHArO,KAAKkL,IAAIsW,WAAanT,GACtBrO,KAAKmL,IAAIqW,UAAWnT,GAEbrO,KAIRpB,cAAe0iB,GAEd,QAAOA,EAAM1Y,EAAI5I,KAAKkL,IAAItC,GAAK0Y,EAAM1Y,EAAI5I,KAAKmL,IAAIvC,GACjD0Y,EAAMzV,EAAI7L,KAAKkL,IAAIW,GAAKyV,EAAMzV,EAAI7L,KAAKmL,IAAIU,GAI7CjN,YAAawiB,GAEZ,OAAOphB,KAAKkL,IAAItC,GAAKwY,EAAIlW,IAAItC,GAAKwY,EAAIjW,IAAIvC,GAAK5I,KAAKmL,IAAIvC,GACvD5I,KAAKkL,IAAIW,GAAKuV,EAAIlW,IAAIW,GAAKuV,EAAIjW,IAAIU,GAAK7L,KAAKmL,IAAIU,EAInDjN,aAAc0iB,EAAOtY,GAYpB,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,sDACdyK,EAAS,IAAIkF,GAIPlF,EAAOnI,KACXygB,EAAM1Y,EAAI5I,KAAKkL,IAAItC,IAAQ5I,KAAKmL,IAAIvC,EAAI5I,KAAKkL,IAAItC,IACjD0Y,EAAMzV,EAAI7L,KAAKkL,IAAIW,IAAQ7L,KAAKmL,IAAIU,EAAI7L,KAAKkL,IAAIW,IAKrDjN,cAAewiB,GAId,QAAOA,EAAIjW,IAAIvC,EAAI5I,KAAKkL,IAAItC,GAAKwY,EAAIlW,IAAItC,EAAI5I,KAAKmL,IAAIvC,GACrDwY,EAAIjW,IAAIU,EAAI7L,KAAKkL,IAAIW,GAAKuV,EAAIlW,IAAIW,EAAI7L,KAAKmL,IAAIU,GAIjDjN,WAAY0iB,EAAOtY,GASlB,YAPgBrI,IAAXqI,IAEJ1K,QAAQC,KAAM,oDACdyK,EAAS,IAAIkF,GAIPlF,EAAOyN,KAAM6K,GAAQrW,MAAOjL,KAAKkL,IAAKlL,KAAKmL,KAInDvM,gBAAiB0iB,GAGhB,OADqBujH,GAAUpuH,KAAM6K,GAAQrW,MAAOjL,KAAKkL,IAAKlL,KAAKmL,KAC/CqU,IAAK8B,GAAQjY,SAIlCzK,UAAWwiB,GAKV,OAHAphB,KAAKkL,IAAIC,IAAKiW,EAAIlW,KAClBlL,KAAKmL,IAAID,IAAKkW,EAAIjW,KAEXnL,KAIRpB,MAAOwiB,GAKN,OAHAphB,KAAKkL,IAAIA,IAAKkW,EAAIlW,KAClBlL,KAAKmL,IAAIA,IAAKiW,EAAIjW,KAEXnL,KAIRpB,UAAW8Q,GAKV,OAHA1P,KAAKkL,IAAI+V,IAAKvR,GACd1P,KAAKmL,IAAI8V,IAAKvR,GAEP1P,KAIRpB,OAAQwiB,GAEP,OAAOA,EAAIlW,IAAIkY,OAAQpjB,KAAKkL,MAASkW,EAAIjW,IAAIiY,OAAQpjB,KAAKmL,OA6tCxC7J,UAAW,CAE9BuO,OAAQ,SAAWyyG,GAGlB,OADAhkH,QAAQC,KAAM,2DACPyB,KAAKqiB,UAAWigG,IAGxBkpB,MAAO,WAGN,OADAltI,QAAQC,KAAM,wDACPyB,KAAKqhB,WAGboqH,kBAAmB,SAAWrqH,GAG7B,OADA9iB,QAAQC,KAAM,0EACPyB,KAAK6zC,cAAezyB,IAG5Blc,KAAM,SAAWo9G,GAGhB,OADAhkH,QAAQC,KAAM,uDACPyB,KAAKijB,QAASq/F,MAKvBtjH,OAAOuG,OAAQ2a,EAAK5e,UAAW,CAE9BuO,OAAQ,SAAWyyG,GAGlB,OADAhkH,QAAQC,KAAM,2DACPyB,KAAKqiB,UAAWigG,IAGxBkpB,MAAO,WAGN,OADAltI,QAAQC,KAAM,wDACPyB,KAAKqhB,WAGboqH,kBAAmB,SAAWrqH,GAG7B,OADA9iB,QAAQC,KAAM,0EACPyB,KAAK6zC,cAAezyB,IAG5BsqH,qBAAsB,SAAW1pH,GAGhC,OADA1jB,QAAQC,KAAM,gFACPyB,KAAKkkB,iBAAkBlC,IAG/B9c,KAAM,SAAWo9G,GAGhB,OADAhkH,QAAQC,KAAM,uDACPyB,KAAKijB,QAASq/F,MAKvBtjH,OAAOuG,OAAQse,EAAOviB,UAAW,CAEhCkqI,MAAO,WAGN,OADAltI,QAAQC,KAAM,0DACPyB,KAAKqhB,aAMd49B,GAAQ39C,UAAUqqI,cAAgB,SAAWrgI,GAG5C,OADAhN,QAAQC,KAAM,mFACPyB,KAAKiyF,wBAAyB3mF,IAItCtM,OAAOuG,OAAQgF,EAAW,CAEzBqhI,SAAU,WAGT,OADAttI,QAAQC,KAAM,2EACPlB,KAAKC,UAIbuuI,kBAAmB,SAAWhtI,GAG7B,OADAP,QAAQC,KAAM,4EACPgM,EAAU0C,gBAAiBpO,IAInCitI,eAAgB,SAAWjtI,GAG1B,OADAP,QAAQC,KAAM,wEACPgM,EAAUsC,eAAgBhO,MAMnCG,OAAOuG,OAAQwK,EAAQzO,UAAW,CAEjCyqI,qBAAsB,SAAW7hI,EAAOwF,GAGvC,OADApR,QAAQC,KAAM,uFACPyB,KAAKqxB,QAASnnB,EAAOwF,IAG7Bs8H,gBAAiB,SAAWzqH,GAG3B,OADAjjB,QAAQC,KAAM,kGACPgjB,EAAOhK,aAAcvX,OAG7BisI,qBAAsB,WAErB3tI,QAAQ0R,MAAO,6DAGhBk8H,uBAAwB,SAAWzsI,GAGlC,OADAnB,QAAQC,KAAM,4GACPkB,EAAU8X,aAAcvX,OAGhCmsI,oBAAqB,WAEpB7tI,QAAQ0R,MAAO,8DAMjBhR,OAAOuG,OAAQ+hB,GAAQhmB,UAAW,CAEjC8qI,gBAAiB,SAAW9gI,GAG3B,OADAhN,QAAQC,KAAM,0EACPyB,KAAK+wD,aAAczlD,IAG3BygI,qBAAsB,SAAW7hI,EAAOwF,GAGvC,OADApR,QAAQC,KAAM,uFACPyB,KAAKqxB,QAASnnB,EAAOwF,IAG7B28H,YAAa,WAGZ,OADA/tI,QAAQC,KAAM,yGACP,IAAIif,GAAUwC,oBAAqBhgB,KAAM,IAGjD0uB,0BAA2B,SAAWvhB,GAGrC,OADA7O,QAAQC,KAAM,kGACPyB,KAAK4rB,2BAA4Bze,IAGzCm/H,gBAAiB,WAEhBhuI,QAAQC,KAAM,wDAGfytI,gBAAiB,SAAWzqH,GAG3B,OADAjjB,QAAQC,KAAM,kGACPgjB,EAAOhD,aAAcve,OAG7BusI,gBAAiB,SAAWhrH,GAG3B,OADAjjB,QAAQC,KAAM,kGACPgjB,EAAOhD,aAAcve,OAG7BisI,qBAAsB,WAErB3tI,QAAQ0R,MAAO,6DAGhBw8H,WAAY,SAAWjsI,GAEtBjC,QAAQC,KAAM,oGACdgC,EAAE8mB,mBAAoBrnB,OAGvBysI,YAAa,SAAWlrH,GAGvB,OADAjjB,QAAQC,KAAM,8FACPgjB,EAAOhD,aAAcve,OAG7BsuC,UAAW,WAEVhwC,QAAQ0R,MAAO,kDAGhB8e,QAAS,WAERxwB,QAAQ0R,MAAO,gDAGhB+e,QAAS,WAERzwB,QAAQ0R,MAAO,gDAGhBgf,QAAS,WAER1wB,QAAQ0R,MAAO,gDAGhB08H,aAAc,WAEbpuI,QAAQ0R,MAAO,qDAGhBk8H,uBAAwB,SAAWzsI,GAGlC,OADAnB,QAAQC,KAAM,4GACPkB,EAAU8e,aAAcve,OAGhCmsI,oBAAqB,WAEpB7tI,QAAQ0R,MAAO,4DAGhB28H,YAAa,SAAWzhH,EAAMC,EAAOE,EAAQD,EAAKE,EAAMC,GAGvD,OADAjtB,QAAQC,KAAM,wHACPyB,KAAKm9C,gBAAiBjyB,EAAMC,EAAOC,EAAKC,EAAQC,EAAMC,MAM/DiH,GAAMlxB,UAAUsrI,mBAAqB,SAAWh6G,GAG/C,OADAt0B,QAAQC,KAAM,6EACPyB,KAAK6sI,eAAgBj6G,IAI7BjZ,EAAWrY,UAAU0qI,gBAAkB,SAAWzqH,GAGjD,OADAjjB,QAAQC,KAAM,mHACPgjB,EAAO7D,gBAAiB1d,OAIhChB,OAAOuG,OAAQuf,GAAIxjB,UAAW,CAE7BmqI,kBAAmB,SAAWrqH,GAG7B,OADA9iB,QAAQC,KAAM,yEACPyB,KAAK6zC,cAAezyB,IAG5B0rH,oBAAqB,SAAW5qH,GAG/B,OADA5jB,QAAQC,KAAM,6EACPyB,KAAKkzB,gBAAiBhR,IAG9BwpH,qBAAsB,SAAW1pH,GAGhC,OADA1jB,QAAQC,KAAM,+EACPyB,KAAKkkB,iBAAkBlC,MAMhChjB,OAAOuG,OAAQ0uB,GAAS3yB,UAAW,CAElCggG,KAAM,WAGL,OADAhjG,QAAQC,KAAM,2DACPyB,KAAK+sI,WAGbC,mBAAoB,SAAW1rH,EAAOtY,GAGrC,OADA1K,QAAQC,KAAM,8EACPyB,KAAK20B,aAAcrT,EAAOtY,IAGlCikI,SAAU,SAAWjkI,GAGpB,OADA1K,QAAQC,KAAM,mEACPyB,KAAKktI,YAAalkI,IAG1ByW,OAAQ,SAAWzW,GAGlB,OADA1K,QAAQC,KAAM,+DACPyB,KAAKo1B,UAAWpsB,IAGxBkZ,MAAO,SAAWlZ,GAGjB,OADA1K,QAAQC,KAAM,6DACPyB,KAAKmtI,SAAUnkI,MAMxBhK,OAAOuG,OAAQ0uB,GAAU,CAExB+4G,mBAAoB,SAAW1rH,EAAOlU,EAAGC,EAAGC,EAAGtE,GAG9C,OADA1K,QAAQC,KAAM,8EACP01B,GAASU,aAAcrT,EAAOlU,EAAGC,EAAGC,EAAGtE,IAG/CyW,OAAQ,SAAWrS,EAAGC,EAAGC,EAAGtE,GAG3B,OADA1K,QAAQC,KAAM,+DACP01B,GAASmB,UAAWhoB,EAAGC,EAAGC,EAAGtE,MAMtChK,OAAOuG,OAAQ+gH,GAAMhlH,UAAW,CAE/B8rI,iBAAkB,SAAW3qB,GAG5B,OADAnkH,QAAQC,KAAM,oFACPyB,KAAKymG,cAAegc,IAG5B4qB,QAAS,SAAWvvI,GAGnB,OADAQ,QAAQC,KAAM,4EACP,IAAI0mG,GAAiBjlG,KAAMlC,IAGnCwvI,aAAc,SAAWxvI,GAGxB,OADAQ,QAAQC,KAAM,+EACP,IAAIkuG,GAAezsG,KAAMlC,MAMlCkB,OAAOuG,OAAQ2I,EAAQ5M,UAAW,CAEjCmB,cAAe,SAAWhD,EAAW0J,EAAOuG,GAG3C,OADApR,QAAQC,KAAM,+EACPyB,KAAKqqC,oBAAqB5qC,EAAW0J,EAAOuG,IAGpD69H,oBAAqB,SAAWhtI,GAG/B,OADAjC,QAAQC,KAAM,qFACPyB,KAAKwtI,oBAAqBjtI,IAGlCktI,gBAAiB,WAGhB,OADAnvI,QAAQC,KAAM,6EACPyB,KAAK83F,qBAMd94F,OAAOuG,OAAQiY,EAAQlc,UAAW,CAEjCosI,2BAA4B,WAE3BpvI,QAAQ0R,MAAO,8GAGhB29H,uBAAwB,WAEvBrvI,QAAQ0R,MAAO,sGAGhB49H,sBAAuB,SAAWtiI,GAGjC,OADAhN,QAAQC,KAAM,yFACPyB,KAAKyvB,sBAAuBnkB,IAGpCuiI,mBAAoB,SAAWviI,GAG9B,OADAhN,QAAQC,KAAM,mFACPyB,KAAK62F,mBAAoBvrF,IAGjCwiI,oBAAqB,SAAW3kI,EAAOuJ,GAGtC,OADApU,QAAQC,KAAM,qFACPyB,KAAKggB,oBAAqBtN,EAAQvJ,IAG1C4kI,gBAAiB,SAAWziI,GAG3B,OADAhN,QAAQC,KAAM,uFACPyB,KAAKue,aAAcjT,IAG3B7I,cAAe,SAAWhD,EAAW0J,EAAOuG,GAG3C,OADApR,QAAQC,KAAM,+EACPyB,KAAKqqC,oBAAqB5qC,EAAW0J,EAAOuG,IAGpD69H,oBAAqB,SAAWhtI,GAG/B,OADAjC,QAAQC,KAAM,qFACPyB,KAAKwtI,oBAAqBjtI,IAGlCktI,gBAAiB,WAGhB,OADAnvI,QAAQC,KAAM,6EACPyB,KAAK83F,qBAMd94F,OAAOuG,OAAQiS,EAAQlW,UAAW,CAEjCmB,cAAe,SAAWhD,EAAW0J,EAAOuG,GAG3C,OADApR,QAAQC,KAAM,+EACPyB,KAAKqqC,oBAAqB5qC,EAAW0J,EAAOuG,IAGpD+9H,gBAAiB,WAGhB,OADAnvI,QAAQC,KAAM,6EACPyB,KAAK83F,qBAQd94F,OAAOuG,OAAQovC,GAASrzC,UAAW,CAElC0sI,gBAAiB,WAEhB1vI,QAAQ0R,MAAO,yDAGhB8pF,qBAAsB,WAErBx7F,QAAQ0R,MAAO,6GAGhBi+H,YAAa,SAAWv7H,GAGvB,OADApU,QAAQC,KAAM,uEACPyB,KAAKue,aAAc7L,MAM5B1T,OAAOuG,OAAQ4nB,GAAS7rB,UAAW,CAElC4sI,eAAgB,SAAW/sI,GAG1B,OADA7C,QAAQC,KAAM,6EACPyB,KAAKmwB,gBAAiBhvB,IAG9BgtI,YAAa,WAEZ7vI,QAAQC,KAAM,8EAGf+vC,UAAW,SAAWpf,EAAUnT,GAG/B,OADAzd,QAAQC,KAAM,kGACPyB,KAAKivB,gBAAiBlT,EAAMmT,IAGpCk/G,iBAAkB,WAEjB9vI,QAAQ0R,MAAO,mHAGhBi+H,YAAa,SAAWv7H,GAGvB,OADApU,QAAQC,KAAM,uEACPyB,KAAKue,aAAc7L,MAM5B1T,OAAOuuB,iBAAkBJ,GAAS7rB,UAAW,CAE5C+sI,WAAY,CACXrsI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,uDACPyB,KAAK2T,SAASpG,OAGtB1M,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,uDACdyB,KAAK2T,SAASpG,MAAQ1O,IAIxByvI,cAAe,CACdtsI,IAAK,WAEJ1D,QAAQC,KAAM,kGAGfsC,IAAK,WAEJvC,QAAQC,KAAM,qGAOjBS,OAAOuG,OAAQqtC,GAAKtxC,UAAW,CAE9BitI,YAAa,WAEZjwI,QAAQ0R,MAAO,gMAMjBhR,OAAOuuB,iBAAkBqlB,GAAKtxC,UAAW,CAExCktI,SAAU,CACTxsI,IAAK,WAGJ,OADA1D,QAAQ0R,MAAO,oGA7r9CQ,GAis9CxBnP,IAAK,WAEJvC,QAAQ0R,MAAO,4LAOlBhR,OAAOuuB,iBAAkBypE,GAAI11F,UAAW,CAEvCiuD,QAAS,CACRvtD,IAAK,WAGJ,OADA1D,QAAQC,KAAM,oDACPyB,KAAKk3F,WAOfl4F,OAAO2C,eAAgB42F,GAASj3F,UAAW,mBAAoB,CAE9DU,IAAK,WAEJ1D,QAAQC,KAAM,uDAGfsC,IAAK,WAEJvC,QAAQC,KAAM,yDAMhB44F,GAAY71F,UAAUmtI,UAAY,WAEjCnwI,QAAQ0R,MAAO,qDAIhBhR,OAAO2C,eAAgB+8G,GAAMp9G,UAAW,uBAAwB,CAE/DU,IAAK,WAGJ,OADA1D,QAAQC,KAAM,kEACPyB,KAAK2+G,oBAGb99G,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,kEACdyB,KAAK2+G,mBAAqB9/G,KAQ5B48C,GAAkBn6C,UAAUotI,QAAU,SAAWryF,EAAaN,GAE7Dz9C,QAAQC,KAAM,oHAGKoC,IAAdo7C,IAA0B/7C,KAAK+7C,UAAYA,GAChD/7C,KAAKo8C,eAAgBC,IAMtBr9C,OAAOuuB,iBAAkBg5F,GAAMjlH,UAAW,CACzCqtI,WAAY,CACX9tI,IAAK,WAEJvC,QAAQC,KAAM,gDAIhBqwI,gBAAiB,CAChB/tI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKmvD,OAAO7wC,OAAOo9B,IAAM78C,IAI3BgwI,iBAAkB,CACjBhuI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,8DACdyB,KAAKmvD,OAAO7wC,OAAO4M,KAAOrsB,IAI5BiwI,kBAAmB,CAClBjuI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,gEACdyB,KAAKmvD,OAAO7wC,OAAO6M,MAAQtsB,IAI7BkwI,gBAAiB,CAChBluI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKmvD,OAAO7wC,OAAO8M,IAAMvsB,IAI3BmwI,mBAAoB,CACnBnuI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,kEACdyB,KAAKmvD,OAAO7wC,OAAO+M,OAASxsB,IAI9B4uD,iBAAkB,CACjB5sD,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,8DACdyB,KAAKmvD,OAAO7wC,OAAOgN,KAAOzsB,IAI5B6uD,gBAAiB,CAChB7sD,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKmvD,OAAO7wC,OAAOiN,IAAM1sB,IAI3BowI,oBAAqB,CACpBpuI,IAAK,WAEJvC,QAAQC,KAAM,oHAIhBmuD,WAAY,CACX7rD,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,iDACdyB,KAAKmvD,OAAO2gB,KAAOjxE,IAIrBqwI,eAAgB,CACfruI,IAAK,WAEJvC,QAAQC,KAAM,oDAIhB4wI,eAAgB,CACftuI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,8DACdyB,KAAKmvD,OAAO6gB,QAAQ7hE,MAAQtP,IAI9BuwI,gBAAiB,CAChBvuI,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,gEACdyB,KAAKmvD,OAAO6gB,QAAQ5hE,OAASvP,MAQhCG,OAAOuuB,iBAAkB2a,GAAgB5mC,UAAW,CAEnD+H,OAAQ,CACPrH,IAAK,WAGJ,OADA1D,QAAQC,KAAM,2EACPyB,KAAKkK,MAAMb,SAIpBgmI,QAAS,CACRrtI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,4EA/29CQ,QAg39CfyB,KAAKooC,OAGbvnC,IAAK,WAEJvC,QAAQC,KAAM,4EACdyB,KAAK0pC,SAt39CiB,WA639CzB1qC,OAAOuG,OAAQ2iC,GAAgB5mC,UAAW,CACzCguI,WAAY,SAAWzwI,GAItB,OAFAP,QAAQC,KAAM,sFACdyB,KAAK0pC,UAAoB,IAAV7qC,EAj49CQ,MADD,OAm49CfmB,MAGRuvI,iBAAkB,WAEjBjxI,QAAQ0R,MAAO,iEAGhBw/H,SAAU,WAETlxI,QAAQ0R,MAAO,8HAKjBhR,OAAOuG,OAAQ6nC,GAAe9rC,UAAW,CAExCmuI,SAAU,SAAWtmI,GAEpB7K,QAAQC,KAAM,sEACdyB,KAAK0tC,SAAUvkC,IAGhBumI,aAAc,SAAWvuI,EAAM1B,GAI9B,OAFAnB,QAAQC,KAAM,8EAELkB,GAAaA,EAAU+pC,mBAA2B/pC,GAAaA,EAAUkiD,6BAQpE,UAATxgD,GAEJ7C,QAAQC,KAAM,2EACdyB,KAAK0tC,SAAUjuC,GAERO,MAIDA,KAAK2D,aAAcxC,EAAM1B,IAf/BnB,QAAQC,KAAM,0EAEPyB,KAAK2D,aAAcxC,EAAM,IAAI+mC,GAAiB9+B,UAAW,GAAKA,UAAW,OAgBlFumI,YAAa,SAAW78G,EAAOpS,EAAOksF,QAEhBjsG,IAAhBisG,GAEJtuG,QAAQC,KAAM,wEAIfD,QAAQC,KAAM,4DACdyB,KAAK6tC,SAAU/a,EAAOpS,IAGvBkvH,eAAgB,WAEftxI,QAAQC,KAAM,kEACdyB,KAAK8tC,eAGNkgG,gBAAiB,WAEhB1vI,QAAQC,KAAM,+DAGfsxI,eAAgB,WAEfvxI,QAAQC,KAAM,8DAGfmF,gBAAiB,SAAWvC,GAI3B,OAFA7C,QAAQC,KAAM,oFAEPyB,KAAK4tC,gBAAiBzsC,IAG9B8sI,YAAa,SAAWv7H,GAGvB,OADApU,QAAQC,KAAM,6EACPyB,KAAKue,aAAc7L,MAM5B1T,OAAOuuB,iBAAkB6f,GAAe9rC,UAAW,CAElDoqH,UAAW,CACV1pH,IAAK,WAGJ,OADA1D,QAAQ0R,MAAO,iEACRhQ,KAAKorC,SAIdugF,QAAS,CACR3pH,IAAK,WAGJ,OADA1D,QAAQC,KAAM,+DACPyB,KAAKorC,WAOfpsC,OAAOuuB,iBAAkBw9F,GAAwBzpH,UAAW,CAE3DwuI,kBAAmB,CAClB9tI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,yFACPyB,KAAKu6D,eAGb15D,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,yFACdyB,KAAKu6D,cAAgB17D,MAOxBG,OAAOuuB,iBAAkBu2G,GAAUxiI,UAAW,CAE7CyuI,cAAe,CACd/tI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,4FACPyB,KAAK+5F,OAAOF,KAAKlF,WAGzB9zF,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4FACdyB,KAAK+5F,OAAOF,KAAKlF,UAAY91F,MAOhCG,OAAOuuB,iBAAkB4nE,GAAkB7zF,UAAW,CAErD+tI,QAAS,CACRrtI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,6EA7h+CQ,QA8h+CfyB,KAAKooC,OAGbvnC,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,6EACdyB,KAAK0pC,SAAU7qC,OAOlBG,OAAOuG,OAAQ4vF,GAAkB7zF,UAAW,CAC3CguI,WAAY,SAAWzwI,GAItB,OAFAP,QAAQC,KAAM,wFACdyB,KAAK0pC,UAAoB,IAAV7qC,EA/i+CQ,MADD,OAij+CfmB,MAGRwvI,SAAU,WAETlxI,QAAQ0R,MAAO,gIAOjBhR,OAAOuG,OAAQ2/F,GAAsB5jG,UAAW,CAE/C0uI,UAAW,WAEV1xI,QAAQ0R,MAAO,gEAIhBigI,aAAc,WAEb3xI,QAAQ0R,MAAO,mEAIhBo1F,SAAU,WAET9mG,QAAQ0R,MAAO,iEAQjBhR,OAAOuG,OAAQ2vF,GAAM5zF,UAAW,CAE/B8V,QAAS,WAER9Y,QAAQ0R,MAAO,gDAQjBhR,OAAOuuB,iBAAkBo2G,GAAQriI,UAAW,CAE3C+tI,QAAS,CACRxuI,IAAK,WAEJvC,QAAQC,KAAM,oFAIhB4X,SAAU,CACTtX,MAAO,WAGN,OADAP,QAAQC,KAAM,qFACPyB,SASVhB,OAAOuuB,iBAAkBwU,GAASzgC,UAAW,CAE5C4uI,WAAY,CACXluI,IAAK,WAEJ1D,QAAQC,KAAM,kDAGfsC,IAAK,WAEJvC,QAAQC,KAAM,mDAKhB4xI,SAAU,CACTnuI,IAAK,WAEJ1D,QAAQC,KAAM,gDAGfsC,IAAK,WAEJvC,QAAQC,KAAM,iDAKhB6xI,QAAS,CACRpuI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,8CACP,IAAImhC,KAKb6qF,QAAS,CACRvoH,IAAK,WAEJ1D,QAAQ0R,MAAO,SAAWhQ,KAAKlB,KAAO,uEAGvC+B,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,SAAWyB,KAAKlB,KAAO,sEACrCkB,KAAKmiC,YA9z+CY,IA8z+CItjC,IAKvBg4E,YAAa,CACZ70E,IAAK,WAGJ,OADA1D,QAAQC,KAAM,SAAWyB,KAAKlB,KAAO,kEAC9BkB,KAAKkjC,iBAGbriC,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,SAAWyB,KAAKlB,KAAO,kEACrCkB,KAAKkjC,gBAAkBrkC,MAO1BG,OAAOuuB,iBAAkB+8C,GAAkBhpE,UAAW,CAErD+uI,MAAO,CACNruI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,8FACP,GAGRsC,IAAK,WAEJvC,QAAQC,KAAM,gGAOjBS,OAAOuuB,iBAAkBk9C,GAAqBnpE,UAAW,CAExDgvI,aAAc,CACbtuI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,gFACPyB,KAAK27D,cAGb96D,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,gFACdyB,KAAK27D,aAAe98D,MAOvBG,OAAOuuB,iBAAkBktB,GAAen5C,UAAW,CAElD05C,YAAa,CACZh5C,IAAK,WAGJ,OADA1D,QAAQC,KAAM,iFACPyB,KAAK+6C,WAAWC,aAGxBn6C,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,kFACdyB,KAAK+6C,WAAWC,YAAcn8C,MASjCG,OAAOuG,OAAQokF,GAAcroF,UAAW,CAEvCivI,YAAa,SAAWlzF,EAAchd,EAAOuY,EAAOyF,GAEnD//C,QAAQC,KAAM,yGACdyB,KAAKk+C,gBAAiBb,GACtBr9C,KAAKo+C,MAAO/d,EAAOuY,EAAOyF,IAG3BmyF,QAAS,SAAWjzH,GAEnBjf,QAAQC,KAAM,+DACdyB,KAAKmhD,iBAAkB5jC,IAGxBkzH,uBAAwB,WAGvB,OADAnyI,QAAQC,KAAM,6EACPyB,KAAKi+C,mBAGbyY,iBAAkB,WAGjB,OADAp4D,QAAQC,KAAM,qFACPyB,KAAKuhD,aAAamV,oBAG1Bg6E,aAAc,WAGb,OADApyI,QAAQC,KAAM,wEACPyB,KAAKuhD,aAAa3d,WAG1B+sG,aAAc,WAGb,OADAryI,QAAQC,KAAM,+DACPyB,KAAKsvD,MAAM0D,SAGnB49E,sBAAuB,WAGtB,OADAtyI,QAAQC,KAAM,gGACPyB,KAAK+6C,WAAW/4C,IAAK,sBAG7B6uI,0BAA2B,WAG1B,OADAvyI,QAAQC,KAAM,yGACPyB,KAAK+6C,WAAW/4C,IAAK,2BAG7B8uI,4BAA6B,WAG5B,OADAxyI,QAAQC,KAAM,6GACPyB,KAAK+6C,WAAW/4C,IAAK,6BAG7B+uI,8BAA+B,WAG9B,OADAzyI,QAAQC,KAAM,oHACPyB,KAAK+6C,WAAW/4C,IAAK,kCAG7BgvI,+BAAgC,WAG/B,OADA1yI,QAAQC,KAAM,sHACPyB,KAAK+6C,WAAW/4C,IAAK,mCAG7BivI,oBAAqB,WAGpB,OADA3yI,QAAQC,KAAM,6FACPyB,KAAK+6C,WAAW/4C,IAAK,qBAG7BklE,uBAAwB,WAGvB,OADA5oE,QAAQC,KAAM,uFACPyB,KAAKuhD,aAAaiV,gBAG1B06E,wBAAyB,WAGxB,OADA5yI,QAAQC,KAAM,uGACPyB,KAAK+6C,WAAW/4C,IAAK,2BAG7BmvI,kBAAmB,SAAW1iD,GAE7BnwF,QAAQC,KAAM,uEACdyB,KAAKw0E,eAAgBia,IAGtB4B,aAAc,WAEb/xF,QAAQC,KAAM,2DAGf6yI,aAAc,WAEb9yI,QAAQC,KAAM,2DAGf8yI,cAAe,WAEd/yI,QAAQC,KAAM,4DAGf+yI,gBAAiB,WAEhBhzI,QAAQC,KAAM,8DAGfgzI,eAAgB,WAEfjzI,QAAQC,KAAM,6DAGfizI,iBAAkB,WAEjBlzI,QAAQC,KAAM,+DAGfkzI,WAAY,WAEXnzI,QAAQC,KAAM,yDAGfw/E,aAAc,WAEbz/E,QAAQC,KAAM,2DAGf8/E,eAAgB,WAEf//E,QAAQC,KAAM,6DAGfmzI,qBAAsB,WAGrB,OADApzI,QAAQC,KAAM,gFACPyB,KAAKo0E,0BAMdp1E,OAAOuuB,iBAAkBo8D,GAAcroF,UAAW,CAEjDsmE,iBAAkB,CACjB5lE,IAAK,WAEJ,OAAOhC,KAAKksE,UAAU3zB,SAGvB13C,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,qEACdyB,KAAKksE,UAAU3zB,QAAU15C,IAI3BmmE,cAAe,CACdhjE,IAAK,WAEJ,OAAOhC,KAAKksE,UAAUptE,MAGvB+B,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,+DACdyB,KAAKksE,UAAUptE,KAAOD,IAIxB8yI,kBAAmB,CAClB3vI,IAAK,WAEJ1D,QAAQC,KAAM,+FAIfsC,IAAK,WAEJvC,QAAQC,KAAM,gGAIhBgW,QAAS,CACRvS,IAAK,WAGJ,OADA1D,QAAQC,KAAM,8EACPyB,KAAKwU,eAIdo9H,GAAI,CACH5vI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,oDACPyB,KAAKqG,KAIdwrI,WAAY,CACX7vI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,mHACP,GAGRsC,IAAK,WAEJvC,QAAQC,KAAM,oHAIhBuzI,YAAa,CACZ9vI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,kGACP,GAGRsC,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,iGACdyB,KAAKmoE,gBAA6B,IAAVtpE,EAt++CN,KADE,MA2++CtBkzI,sBAAuB,CACtB/vI,IAAK,WAGJ,OADA1D,QAAQC,KAAM,iEACP,GAGRsC,IAAK,WAEJvC,QAAQC,KAAM,qEAOjBS,OAAOuuB,iBAAkB8jD,GAAe/vE,UAAW,CAElD84E,SAAU,CACTp4E,IAAK,WAEJ1D,QAAQC,KAAM,gGAIfsC,IAAK,WAEJvC,QAAQC,KAAM,iGAIhByzI,mBAAoB,CACnBhwI,IAAK,WAEJ1D,QAAQC,KAAM,0GAIfsC,IAAK,WAEJvC,QAAQC,KAAM,2GAIhB0zI,kBAAmB,CAClBjwI,IAAK,WAEJ1D,QAAQC,KAAM,yGAIfsC,IAAK,WAEJvC,QAAQC,KAAM,4GASjBS,OAAOuuB,iBAAkBzU,EAAkBxX,UAAW,CAErD0T,MAAO,CACNhT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,0DACPyB,KAAKkZ,QAAQlE,OAGrBnU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,0DACdyB,KAAKkZ,QAAQlE,MAAQnW,IAIvBoW,MAAO,CACNjT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,0DACPyB,KAAKkZ,QAAQjE,OAGrBpU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,0DACdyB,KAAKkZ,QAAQjE,MAAQpW,IAIvBqW,UAAW,CACVlT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,kEACPyB,KAAKkZ,QAAQhE,WAGrBrU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,kEACdyB,KAAKkZ,QAAQhE,UAAYrW,IAI3BsW,UAAW,CACVnT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,kEACPyB,KAAKkZ,QAAQ/D,WAGrBtU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,kEACdyB,KAAKkZ,QAAQ/D,UAAYtW,IAI3BwW,WAAY,CACXrT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,oEACPyB,KAAKkZ,QAAQ7D,YAGrBxU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,oEACdyB,KAAKkZ,QAAQ7D,WAAaxW,IAI5B6Q,OAAQ,CACP1N,IAAK,WAGJ,OADA1D,QAAQC,KAAM,4DACPyB,KAAKkZ,QAAQxJ,QAGrB7O,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKkZ,QAAQxJ,OAAS7Q,IAIxB+W,OAAQ,CACP5T,IAAK,WAGJ,OADA1D,QAAQC,KAAM,4DACPyB,KAAKkZ,QAAQtD,QAGrB/U,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKkZ,QAAQtD,OAAS/W,IAIxBuW,OAAQ,CACPpT,IAAK,WAGJ,OADA1D,QAAQC,KAAM,4DACPyB,KAAKkZ,QAAQ9D,QAGrBvU,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,4DACdyB,KAAKkZ,QAAQ9D,OAASvW,IAIxBC,KAAM,CACLkD,IAAK,WAGJ,OADA1D,QAAQC,KAAM,wDACPyB,KAAKkZ,QAAQpa,MAGrB+B,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,wDACdyB,KAAKkZ,QAAQpa,KAAOD,IAItBiX,gBAAiB,CAChB9T,IAAK,WAGJ,OADA1D,QAAQC,KAAM,8EACPyB,KAAKkZ,QAAQpD,iBAGrBjV,IAAK,SAAWhC,GAEfP,QAAQC,KAAM,8EACdyB,KAAKkZ,QAAQpD,gBAAkBjX,MASlCG,OAAOuuB,iBAn+MP,cAAoBJ,GAEnBvuB,YAAa6K,GAEZ1J,QAEAC,KAAKlB,KAAO,QAEZkB,KAAKyJ,SAAWA,EAChBzJ,KAAKuU,QAAU9K,EAAS8K,QAExBvU,KAAKkyI,KAAOlyI,KAAKuU,QAAQ49H,aACzBnyI,KAAKkyI,KAAKE,QAAS3oI,EAAS4oI,YAE5BryI,KAAKsyI,UAAW,EAEhBtyI,KAAK6hD,OAAS,KACd7hD,KAAKuyI,OAAS,EACdvyI,KAAKq8H,MAAO,EACZr8H,KAAKwyI,UAAY,EACjBxyI,KAAKyyI,QAAU,EACfzyI,KAAK0P,OAAS,EACd1P,KAAK61G,cAAWl1G,EAChBX,KAAK0yI,aAAe,EACpB1yI,KAAK2yI,WAAY,EACjB3yI,KAAK4yI,oBAAqB,EAC1B5yI,KAAKsJ,OAAS,KACdtJ,KAAK6yI,WAAa,QAElB7yI,KAAK8yI,WAAa,EAClB9yI,KAAK+yI,UAAY,EACjB/yI,KAAKgzI,YAAa,EAElBhzI,KAAKizI,QAAU,GAIhBr0I,YAEC,OAAOoB,KAAKkyI,KAIbtzI,cAAes0I,GAOd,OALAlzI,KAAK4yI,oBAAqB,EAC1B5yI,KAAK6yI,WAAa,YAClB7yI,KAAKsJ,OAAS4pI,EACdlzI,KAAKoyI,UAEEpyI,KAIRpB,sBAAuBu0I,GAOtB,OALAnzI,KAAK4yI,oBAAqB,EAC1B5yI,KAAK6yI,WAAa,YAClB7yI,KAAKsJ,OAAStJ,KAAKuU,QAAQ6+H,yBAA0BD,GACrDnzI,KAAKoyI,UAEEpyI,KAIRpB,qBAAsBy0I,GAOrB,OALArzI,KAAK4yI,oBAAqB,EAC1B5yI,KAAK6yI,WAAa,kBAClB7yI,KAAKsJ,OAAStJ,KAAKuU,QAAQ++H,wBAAyBD,GACpDrzI,KAAKoyI,UAEEpyI,KAIRpB,UAAWk0H,GAOV,OALA9yH,KAAK6hD,OAASixE,EACd9yH,KAAK6yI,WAAa,SAEb7yI,KAAKsyI,UAAWtyI,KAAKuzI,OAEnBvzI,KAIRpB,KAAM40I,GAIL,QAFe7yI,IAAV6yI,IAAsBA,EAAQ,IAEX,IAAnBxzI,KAAK2yI,UAGT,YADAr0I,QAAQC,KAAM,0CAKf,IAAiC,IAA5ByB,KAAK4yI,mBAGT,YADAt0I,QAAQC,KAAM,oDAKfyB,KAAK8yI,WAAa9yI,KAAKuU,QAAQk/H,YAAcD,EAE7C,MAAMlqI,EAAStJ,KAAKuU,QAAQm/H,qBAe5B,OAdApqI,EAAOu4C,OAAS7hD,KAAK6hD,OACrBv4C,EAAO+yH,KAAOr8H,KAAKq8H,KACnB/yH,EAAOkpI,UAAYxyI,KAAKwyI,UACxBlpI,EAAOmpI,QAAUzyI,KAAKyyI,QACtBnpI,EAAOqqI,QAAU3zI,KAAK4zI,QAAQl8C,KAAM13F,MACpCsJ,EAAOwpB,MAAO9yB,KAAK8yI,WAAY9yI,KAAK+yI,UAAY/yI,KAAK0P,OAAQ1P,KAAK61G,UAElE71G,KAAK2yI,WAAY,EAEjB3yI,KAAKsJ,OAASA,EAEdtJ,KAAK6zI,UAAW7zI,KAAKuyI,QACrBvyI,KAAK8zI,gBAAiB9zI,KAAK0yI,cAEpB1yI,KAAKoyI,UAIbxzI,QAEC,IAAiC,IAA5BoB,KAAK4yI,mBA4BV,OArBwB,IAAnB5yI,KAAK2yI,YAIT3yI,KAAK+yI,WAAa11I,KAAK8N,IAAKnL,KAAKuU,QAAQk/H,YAAczzI,KAAK8yI,WAAY,GAAM9yI,KAAK0yI,cAEhE,IAAd1yI,KAAKq8H,OAITr8H,KAAK+yI,UAAY/yI,KAAK+yI,WAAc/yI,KAAK61G,UAAY71G,KAAK6hD,OAAOg0D,WAIlE71G,KAAKsJ,OAAO23C,OACZjhD,KAAKsJ,OAAOqqI,QAAU,KAEtB3zI,KAAK2yI,WAAY,GAIX3yI,KA1BN1B,QAAQC,KAAM,oDA8BhBK,OAEC,IAAiC,IAA5BoB,KAAK4yI,mBAaV,OANA5yI,KAAK+yI,UAAY,EAEjB/yI,KAAKsJ,OAAO23C,OACZjhD,KAAKsJ,OAAOqqI,QAAU,KACtB3zI,KAAK2yI,WAAY,EAEV3yI,KAXN1B,QAAQC,KAAM,oDAehBK,UAEC,GAAKoB,KAAKizI,QAAQ5pI,OAAS,EAAI,CAE9BrJ,KAAKsJ,OAAO8oI,QAASpyI,KAAKizI,QAAS,IAEnC,IAAM,IAAI9oI,EAAI,EAAGC,EAAIpK,KAAKizI,QAAQ5pI,OAAQc,EAAIC,EAAGD,IAEhDnK,KAAKizI,QAAS9oI,EAAI,GAAIioI,QAASpyI,KAAKizI,QAAS9oI,IAI9CnK,KAAKizI,QAASjzI,KAAKizI,QAAQ5pI,OAAS,GAAI+oI,QAASpyI,KAAK+zI,kBAItD/zI,KAAKsJ,OAAO8oI,QAASpyI,KAAK+zI,aAM3B,OAFA/zI,KAAKgzI,YAAa,EAEXhzI,KAIRpB,aAEC,GAAKoB,KAAKizI,QAAQ5pI,OAAS,EAAI,CAE9BrJ,KAAKsJ,OAAO46E,WAAYlkF,KAAKizI,QAAS,IAEtC,IAAM,IAAI9oI,EAAI,EAAGC,EAAIpK,KAAKizI,QAAQ5pI,OAAQc,EAAIC,EAAGD,IAEhDnK,KAAKizI,QAAS9oI,EAAI,GAAI+5E,WAAYlkF,KAAKizI,QAAS9oI,IAIjDnK,KAAKizI,QAASjzI,KAAKizI,QAAQ5pI,OAAS,GAAI66E,WAAYlkF,KAAK+zI,kBAIzD/zI,KAAKsJ,OAAO46E,WAAYlkF,KAAK+zI,aAM9B,OAFA/zI,KAAKgzI,YAAa,EAEXhzI,KAIRpB,aAEC,OAAOoB,KAAKizI,QAIbr0I,WAAYC,GAgBX,OAdOA,IAAQA,EAAQ,KAEE,IAApBmB,KAAKgzI,YAEThzI,KAAKkkF,aACLlkF,KAAKizI,QAAUp0I,EACfmB,KAAKoyI,WAILpyI,KAAKizI,QAAUp0I,EAITmB,KAIRpB,UAAWC,GAIV,GAFAmB,KAAKuyI,OAAS1zI,OAEc8B,IAAvBX,KAAKsJ,OAAOipI,OAQjB,OANwB,IAAnBvyI,KAAK2yI,WAET3yI,KAAKsJ,OAAOipI,OAAOyB,gBAAiBh0I,KAAKuyI,OAAQvyI,KAAKuU,QAAQk/H,YAAa,KAIrEzzI,KAIRpB,YAEC,OAAOoB,KAAKuyI,OAIb3zI,YAEC,OAAOoB,KAAKi0I,aAAc,GAI3Br1I,UAAWynE,GAEV,OAAOrmE,KAAKk0I,WAAY7tE,EAAS,CAAEA,GAAW,IAI/CznE,gBAAiBC,GAEhB,IAAiC,IAA5BmB,KAAK4yI,mBAeV,OARA5yI,KAAK0yI,aAAe7zI,GAEI,IAAnBmB,KAAK2yI,WAET3yI,KAAKsJ,OAAOopI,aAAasB,gBAAiBh0I,KAAK0yI,aAAc1yI,KAAKuU,QAAQk/H,YAAa,KAIjFzzI,KAbN1B,QAAQC,KAAM,oDAiBhBK,kBAEC,OAAOoB,KAAK0yI,aAIb9zI,UAECoB,KAAK2yI,WAAY,EAIlB/zI,UAEC,OAAiC,IAA5BoB,KAAK4yI,oBAETt0I,QAAQC,KAAM,qDACP,GAIDyB,KAAKq8H,KAIbz9H,QAASC,GAER,IAAiC,IAA5BmB,KAAK4yI,mBAeV,OARA5yI,KAAKq8H,KAAOx9H,GAEY,IAAnBmB,KAAK2yI,YAET3yI,KAAKsJ,OAAO+yH,KAAOr8H,KAAKq8H,MAIlBr8H,KAbN1B,QAAQC,KAAM,oDAiBhBK,aAAcC,GAIb,OAFAmB,KAAKwyI,UAAY3zI,EAEVmB,KAIRpB,WAAYC,GAIX,OAFAmB,KAAKyyI,QAAU5zI,EAERmB,KAIRpB,YAEC,OAAOoB,KAAKkyI,KAAKA,KAAKrzI,MAIvBD,UAAWC,GAIV,OAFAmB,KAAKkyI,KAAKA,KAAK8B,gBAAiBn1I,EAAOmB,KAAKuU,QAAQk/H,YAAa,KAE1DzzI,OAmmMsBsB,UAAW,CAEzCo8G,KAAM,CACL7+G,MAAO,SAAWi9G,GAEjBx9G,QAAQC,KAAM,0EACd,MAAMs2C,EAAQ70C,KAOd,OANoB,IAAIuyH,IACZ7U,KAAM5B,GAAM,SAAWj6D,GAElChN,EAAMqvF,UAAWriF,MAGX7hD,OAIT64G,UAAW,CACVh4G,IAAK,WAEJvC,QAAQC,KAAM,sDASjB6+C,GAAW97C,UAAU6yI,cAAgB,SAAWt2F,EAAUC,GAGzD,OADAx/C,QAAQC,KAAM,wDACPyB,KAAK6E,OAAQg5C,EAAUC,IAI/B9pC,EAAWupG,iBAAc58G,EAEzBqT,EAAW2tG,YAAc,SAAWzqG,EAAKnC,EAASinG,EAAQE,GAEzD59G,QAAQC,KAAM,wFAEd,MAAMy+G,EAAS,IAAIyB,GACnBzB,EAAOc,eAAgB99G,KAAKu9G,aAE5B,MAAMrkG,EAAU8jG,EAAOU,KAAMxmG,EAAK8kG,OAAQr7G,EAAWu7G,GAIrD,OAFKnnG,IAAUmE,EAAQnE,QAAUA,GAE1BmE,GAIRlF,EAAWogI,gBAAkB,SAAWnyB,EAAMltG,EAASinG,EAAQE,GAE9D59G,QAAQC,KAAM,gGAEd,MAAMy+G,EAAS,IAAIuB,GACnBvB,EAAOc,eAAgB99G,KAAKu9G,aAE5B,MAAMrkG,EAAU8jG,EAAOU,KAAMuE,EAAMjG,OAAQr7G,EAAWu7G,GAItD,OAFKnnG,IAAUmE,EAAQnE,QAAUA,GAE1BmE,GAIRlF,EAAWqgI,sBAAwB,WAElC/1I,QAAQ0R,MAAO,0FAIhBgE,EAAWsgI,0BAA4B,WAEtCh2I,QAAQ0R,MAAO,8FAImB,oBAAvBmjF,oBAGXA,mBAAmBnpF,cAAe,IAAIopF,YAAa,WAAY,CAAEC,OAAQ,CACxEkhD,SAp6/Ce,UA06/CjB,IAAIC,GAAc,SAAWl3B,GAE5BD,GAAO13G,KAAM3F,KAAMs9G,GAEnBt9G,KAAKy0I,YAAc,GACnBz0I,KAAK00I,cAAgB,GACrB10I,KAAK20I,cAAgB,KACrB30I,KAAK40I,eAAiB,KAEtB50I,KAAK60I,YAAc,EACnB70I,KAAK80I,WAAa,GAClB90I,KAAK+0I,iBAAmB,EACxB/0I,KAAKg1I,gBAAkB,GAEvBh1I,KAAKi1I,oBAAsB,CAC1B7qH,SAAU,WACV3K,OAAQ,SACR4gB,MAAO,QACP/oB,GAAI,aAELtX,KAAKk1I,sBAAwB,CAC5B9qH,SAAU,eACV3K,OAAQ,eACR4gB,MAAO,eACP/oB,GAAI,iBAKNk9H,GAAYlzI,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAEzE4B,YAAasxI,GAEbW,eAAgB,SAAWl0E,GAI1B,OAFAjhE,KAAKy0I,YAAcxzE,EAEZjhE,MAIRo1I,iBAAkB,SAAWC,GAI5B,OAFAr1I,KAAK00I,cAAgBW,EAEdr1I,MAIRs1I,eAAgB,SAAWT,GAI1B,OAFA70I,KAAK60I,YAAcA,EAEZ70I,MAKRu1I,aAAc,WAEbj3I,QAAQC,KAAM,oEAKfgwI,YAAa,WAEZjwI,QAAQC,KAAM,mEAKfi3I,sBAAuB,WAEtBl3I,QAAQC,KAAM,6EAIfm/G,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,IAAIc,EAAS,IAAImB,GAAYn+G,KAAKs9G,SAElCN,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOuE,gBAAiB,eACxBvE,EAAOiB,iBAAkBj+G,KAAKy9G,eAEJ,oBAArBz9G,KAAKu9G,aAETP,EAAOwE,oBAAoB,GAI5BxE,EAAOU,KAAMxmG,EAAO2qC,IAEnB,IAAI4zF,EAAa,CAChBC,aAAc11I,KAAKi1I,oBACnBU,eAAgB31I,KAAKk1I,sBACrBU,cAAc,GAGf51I,KAAK61I,eAAgBh0F,EAAQ4zF,GAC3B3vD,KAAMk2B,GACNyT,MAAOvT,IAEPD,EAAYC,IAKhB45B,gBAAiB,SAAWj0F,EAAQtkC,EAAUm4H,EAAcC,GAE3D,IAAIF,EAAa,CAChBC,aAAcA,GAAgB11I,KAAKi1I,oBACnCU,eAAgBA,GAAkB31I,KAAKk1I,sBACvCU,eAAiBF,GAGlB11I,KAAK61I,eAAgBh0F,EAAQ4zF,GAAa3vD,KAAMvoE,IAIjDs4H,eAAgB,SAAWh0F,EAAQ4zF,GAKlC,IAAM,IAAIh2I,KAAag2I,EAAWE,eAAiB,CAElD,IAAI72I,EAAO22I,EAAWE,eAAgBl2I,QAENkB,IAA3B7B,EAAKwjD,oBAETmzF,EAAWE,eAAgBl2I,GAAcX,EAAKqC,MAQhD,IA+BI40I,EA/BAC,EAAU92I,KAAKC,UAAWs2I,GAI9B,GAAKjB,GAAYyB,UAAUhyI,IAAK49C,GAAW,CAE1C,IAAIq0F,EAAa1B,GAAYyB,UAAUj0I,IAAK6/C,GAE5C,GAAKq0F,EAAW30I,MAAQy0I,EAEvB,OAAOE,EAAWC,QAEZ,GAA2B,IAAtBt0F,EAAOu0F,WAMlB,MAAM,IAAI9nI,MAET,iHAYH,IAAI+nI,EAASr2I,KAAK+0I,mBACduB,EAAWz0F,EAAOu0F,WAIlBG,EAAkBv2I,KAAKw2I,WAAYH,EAAQC,GAC7CxwD,KAAQ2wD,IAERV,EAASU,EAEF,IAAI5zI,QAAS,CAAE+6G,EAASC,KAE9Bk4B,EAAOW,WAAYL,GAAW,CAAEz4B,QAAAA,EAASC,OAAAA,GAEzCk4B,EAAOY,YAAa,CAAE73I,KAAM,SAAUmxB,GAAIomH,EAAQZ,WAAAA,EAAY5zF,OAAAA,GAAU,CAAEA,QAO3EikC,KAAQsH,GAAaptF,KAAK42I,gBAAiBxpD,EAAQ1rE,WA0BrD,OAtBA60H,EACE9mB,MAAO,KAAM,GACb3pC,KAAM,KAEDiwD,GAAUM,GAEdr2I,KAAK62I,aAAcd,EAAQM,KAS9B7B,GAAYyB,UAAUp1I,IAAKghD,EAAQ,CAElCtgD,IAAKy0I,EACLG,QAASI,IAIHA,GAIRK,gBAAiB,SAAWE,GAE3B,IAAIp1H,EAAW,IAAI0rB,GAEd0pG,EAAa3tI,OAEjBuY,EAASgsB,SAAU,IAAIxF,GAAiB4uG,EAAa3tI,MAAMe,MAAO,IAInE,IAAM,IAAIC,EAAI,EAAGA,EAAI2sI,EAAa12I,WAAWiJ,OAAQc,IAAO,CAE3D,IAAI1K,EAAYq3I,EAAa12I,WAAY+J,GACrChJ,EAAO1B,EAAU0B,KACjB+I,EAAQzK,EAAUyK,MAClBi+B,EAAW1oC,EAAU0oC,SAEzBzmB,EAAS/d,aAAcxC,EAAM,IAAI+mC,GAAiBh+B,EAAOi+B,IAI1D,OAAOzmB,GAIRq1H,aAAc,SAAW7/H,EAAKwpG,GAE7B,IAAI1D,EAAS,IAAImB,GAAYn+G,KAAKs9G,SAIlC,OAHAN,EAAOe,QAAS/9G,KAAKy0I,aACrBz3B,EAAOuE,gBAAiBb,GAEjB,IAAI79G,QAAS,CAAE+6G,EAASC,KAE9Bb,EAAOU,KAAMxmG,EAAK0mG,OAASj9G,EAAWk9G,MAMxCm5B,QAAS,WAIR,OAFAh3I,KAAKi3I,eAEEj3I,MAIRi3I,aAAc,WAEb,GAAKj3I,KAAK40I,eAAiB,OAAO50I,KAAK40I,eAEvC,IAAIsC,EAA+B,iBAAhBC,aAAwD,OAA5Bn3I,KAAK00I,cAAc51I,KAC9Ds4I,EAAmB,GAsCvB,OApCKF,EAEJE,EAAiBj5I,KAAM6B,KAAK+2I,aAAc,mBAAoB,UAI9DK,EAAiBj5I,KAAM6B,KAAK+2I,aAAc,wBAAyB,SACnEK,EAAiBj5I,KAAM6B,KAAK+2I,aAAc,qBAAsB,iBAIjE/2I,KAAK40I,eAAiB/xI,QAAQw0I,IAAKD,GACjCtxD,KAAQwxD,IAER,IAAIC,EAAYD,EAAW,GAEpBJ,IAENl3I,KAAK00I,cAAc8C,WAAaF,EAAW,IAI5C,IAAIG,EAAKjD,GAAYkD,YAAY5uI,WAE7B6uI,EAAO,CACV,sBACAJ,EACA,GACA,eACAE,EAAGrlB,UAAWqlB,EAAG7tI,QAAS,KAAQ,EAAG6tI,EAAG3sB,YAAa,OACpDnoD,KAAM,MAER3iE,KAAKg1I,gBAAkB4C,IAAIC,gBAAiB,IAAIj3B,KAAM,CAAE+2B,OAInD33I,KAAK40I,gBAIb4B,WAAY,SAAWH,EAAQC,GAE9B,OAAOt2I,KAAKi3I,eAAenxD,KAAM,KAI/B,IAyCGiwD,EA3CC/1I,KAAK80I,WAAWzrI,OAASrJ,KAAK60I,cAE9BkB,EAAS,IAAI+B,OAAQ93I,KAAKg1I,kBAEvB0B,WAAa,GACpBX,EAAOgC,WAAa,GACpBhC,EAAOiC,UAAY,EAEnBjC,EAAOY,YAAa,CAAE73I,KAAM,OAAQ41I,cAAe10I,KAAK00I,gBAExDqB,EAAOkC,UAAY,SAAW3zI,GAE7B,IAAI8oF,EAAU9oF,EAAE4tB,KAEhB,OAASk7D,EAAQtuF,MAEhB,IAAK,SACJi3I,EAAOW,WAAYtpD,EAAQn9D,IAAK2tF,QAASxwB,GACzC,MAED,IAAK,QACJ2oD,EAAOW,WAAYtpD,EAAQn9D,IAAK4tF,OAAQzwB,GACxC,MAED,QACC9uF,QAAQ0R,MAAO,2CAA6Co9E,EAAQtuF,KAAO,OAM9EkB,KAAK80I,WAAW32I,KAAM43I,IAItB/1I,KAAK80I,WAAW19F,MAAM,SAAWhqC,EAAGC,GAEnC,OAAOD,EAAE4qI,UAAY3qI,EAAE2qI,WAAc,EAAI,KAS3C,OAHIjC,EAAS/1I,KAAK80I,WAAY90I,KAAK80I,WAAWzrI,OAAS,IAChD0uI,WAAY1B,GAAWC,EAC9BP,EAAOiC,WAAa1B,EACbP,KAMTc,aAAc,SAAWd,EAAQM,GAEhCN,EAAOiC,WAAajC,EAAOgC,WAAY1B,UAChCN,EAAOW,WAAYL,UACnBN,EAAOgC,WAAY1B,IAI3B1tE,MAAO,WAENrqE,QAAQyO,IAAK,cAAe/M,KAAK80I,WAAWzwG,IAAO0xG,GAAYA,EAAOiC,aAIvE5gI,QAAS,WAER,IAAM,IAAIjN,EAAI,EAAGA,EAAInK,KAAK80I,WAAWzrI,SAAWc,EAE/CnK,KAAK80I,WAAY3qI,GAAI+tI,YAMtB,OAFAl4I,KAAK80I,WAAWzrI,OAAS,EAElBrJ,QAQTw0I,GAAYkD,YAAc,WAEzB,IAAIhD,EACAE,EAkKJ,SAASuD,EAAiBC,EAAOC,EAASC,EAAeC,EAAeC,EAAe/4I,GAEtF,IAGIg5I,EAEAvuI,EALAwuI,EAAgBj5I,EAAUk5I,iBAE1BC,EADYN,EAAcO,aACFH,EAK5B,OAASF,GAER,KAAKnvG,aACJovG,EAAa,IAAIL,EAAMU,kBACvBT,EAAQU,8BAA+BT,EAAe74I,EAAWg5I,GACjEvuI,EAAQ,IAAIm/B,aAAcuvG,GAC1B,MAED,KAAKrwG,UACJkwG,EAAa,IAAIL,EAAMY,eACvBX,EAAQY,6BAA8BX,EAAe74I,EAAWg5I,GAChEvuI,EAAQ,IAAIq+B,UAAWqwG,GACvB,MAED,KAAK/vG,WACJ4vG,EAAa,IAAIL,EAAMc,gBACvBb,EAAQc,8BAA+Bb,EAAe74I,EAAWg5I,GACjEvuI,EAAQ,IAAI2+B,WAAY+vG,GACxB,MAED,KAAK3vG,WACJwvG,EAAa,IAAIL,EAAMgB,gBACvBf,EAAQgB,8BAA+Bf,EAAe74I,EAAWg5I,GACjEvuI,EAAQ,IAAI++B,WAAY2vG,GACxB,MAED,KAAKnwG,WACJgwG,EAAa,IAAIL,EAAMkB,gBACvBjB,EAAQkB,8BAA+BjB,EAAe74I,EAAWg5I,GACjEvuI,EAAQ,IAAIu+B,WAAYmwG,GACxB,MAED,KAAK7vG,YACJ0vG,EAAa,IAAIL,EAAMoB,iBACvBnB,EAAQoB,+BAAgCnB,EAAe74I,EAAWg5I,GAClEvuI,EAAQ,IAAI6+B,YAAa6vG,GACzB,MAED,KAAKzvG,YACJsvG,EAAa,IAAIL,EAAMsB,iBACvBrB,EAAQsB,+BAAgCrB,EAAe74I,EAAWg5I,GAClEvuI,EAAQ,IAAIi/B,YAAayvG,GACzB,MAED,QACC,MAAM,IAAItqI,MAAO,iDAInB,IAAM,IAAInE,EAAI,EAAGA,EAAIyuI,EAAWzuI,IAE/BD,EAAOC,GAAMsuI,EAAWmB,SAAUzvI,GAMnC,OAFAiuI,EAAMvuE,QAAS4uE,GAER,CACNt3I,KAAMo3I,EACNruI,MAAOA,EACPi+B,SAAUuwG,GArOZT,UAAY,SAAW3zI,GAEtB,IAAI8oF,EAAU9oF,EAAE4tB,KAEhB,OAASk7D,EAAQtuF,MAEhB,IAAK,OACJ41I,EAAgBtnD,EAAQsnD,cACxBE,EAAiB,IAAI/xI,SAAS,SAAW+6G,GAExC82B,EAAcmF,eAAiB,SAAWzB,GAGzCx6B,EAAS,CAAEw6B,MAAOA,KAInB0B,mBAAoBpF,MAGrB,MAED,IAAK,SACJ,IAAI7yF,EAASurC,EAAQvrC,OACjB4zF,EAAaroD,EAAQqoD,WACzBb,EAAe9uD,KAAQi0D,IAEtB,IAAI3B,EAAQ2B,EAAO3B,MACfC,EAAU,IAAID,EAAM4B,QACpBC,EAAgB,IAAI7B,EAAM8B,cAC9BD,EAAcE,KAAM,IAAI5xG,UAAWsZ,GAAUA,EAAOu0F,YAEpD,IAEC,IAAI10H,EA4BT,SAAyB02H,EAAOC,EAAS4B,EAAexE,GAEvD,IAGI6C,EACA8B,EAJA1E,EAAeD,EAAWC,aAC1BC,EAAiBF,EAAWE,eAK5B0E,EAAehC,EAAQiC,uBAAwBL,GAEnD,GAAKI,IAAiBjC,EAAMmC,gBAE3BjC,EAAgB,IAAIF,EAAMxlG,KAC1BwnG,EAAiB/B,EAAQmC,mBAAoBP,EAAe3B,OAEtD,CAAA,GAAK+B,IAAiBjC,EAAMqC,YAOlC,MAAM,IAAInsI,MAAO,gDALjBgqI,EAAgB,IAAIF,EAAMrU,WAC1BqW,EAAiB/B,EAAQqC,yBAA0BT,EAAe3B,GAQnE,IAAO8B,EAAeO,MAA8B,IAAtBrC,EAAcsC,IAE3C,MAAM,IAAItsI,MAAO,uCAAyC8rI,EAAeS,aAI1E,IAAIn5H,EAAW,CAAEvY,MAAO,KAAM/I,WAAY,IAG1C,IAAM,IAAIm4I,KAAiB7C,EAAe,CAEzC,IAEIj2I,EACAq7I,EAHAtC,EAAgBlyI,KAAMqvI,EAAgB4C,IAS1C,GAAK9C,EAAWG,aAEfkF,EAAcpF,EAAc6C,GAC5B94I,EAAY44I,EAAQ0C,uBAAwBzC,EAAewC,OAErD,CAIN,IAAuB,KAFvBA,EAAczC,EAAQ2C,eAAgB1C,EAAeF,EAAO1C,EAAc6C,MAE/C,SAE3B94I,EAAY44I,EAAQ4C,aAAc3C,EAAewC,GAIlDp5H,EAASthB,WAAWjC,KAAMg6I,EAAiBC,EAAOC,EAASC,EAAeC,EAAeC,EAAe/4I,IAKzG,GAAK46I,IAAiBjC,EAAMmC,gBAAkB,CAQ7C,IALA,IAAIW,EAAW5C,EAAc6C,YAEzBhyI,EAAQ,IAAIggC,YADY,EAAX+xG,GAEb7tC,EAAa,IAAI+qC,EAAMgB,gBAEjBjvI,EAAI,EAAGA,EAAI+wI,IAAa/wI,EAAI,CAErCkuI,EAAQ+C,gBAAiB9C,EAAenuI,EAAGkjG,GAE3C,IAAM,IAAI9pF,EAAI,EAAGA,EAAI,IAAMA,EAE1Bpa,EAAW,EAAJgB,EAAQoZ,GAAM8pF,EAAWusC,SAAUr2H,GAM5C7B,EAASvY,MAAQ,CAAEe,MAAOf,EAAOg/B,SAAU,GAE3CiwG,EAAMvuE,QAASwjC,GAMhB,OAFA+qC,EAAMvuE,QAASyuE,GAER52H,EA1HYm0H,CAAgBuC,EAAOC,EAAS4B,EAAexE,GAE1Dh0F,EAAU//B,EAASthB,WAAWikC,IAAO5jC,GAAUA,EAAKyJ,MAAM23C,QAEzDngC,EAASvY,OAAQs4C,EAAQtjD,KAAMujB,EAASvY,MAAMe,MAAM23C,QAEzDv7C,KAAKqwI,YAAa,CAAE73I,KAAM,SAAUmxB,GAAIm9D,EAAQn9D,GAAIvO,SAAAA,GAAY+/B,GAE/D,MAAQzxC,GAET1R,QAAQ0R,MAAOA,GAEf1J,KAAKqwI,YAAa,CAAE73I,KAAM,QAASmxB,GAAIm9D,EAAQn9D,GAAIjgB,MAAOA,EAAMo9E,kBAIhEgrD,EAAMvuE,QAASowE,GACf7B,EAAMvuE,QAASwuE,SAyLrB7D,GAAYyB,UAAY,IAAIv0F,QAK5B8yF,GAAYW,eAAiB,WAE5B72I,QAAQC,KAAM,4FAKfi2I,GAAYY,iBAAmB,WAE9B92I,QAAQC,KAAM,8FAKfi2I,GAAY6G,qBAAuB,WAElC/8I,QAAQC,KAAM,kGAKfi2I,GAAY8G,iBAAmB,WAE9Bh9I,QAAQC,KAAM,8FAIf,IAuhHIg9I,GAAMC,GAvhHNC,GAAa,WAEhB,SAASA,EAAYn+B,GAEpBD,GAAO13G,KAAM3F,KAAMs9G,GAEnBt9G,KAAK07I,YAAc,KACnB17I,KAAK27I,UAAY,KACjB37I,KAAK47I,WAAa,KAElB57I,KAAK67I,gBAAkB,GAEvB77I,KAAK87I,UAAU,SAAWj7B,GAEzB,OAAO,IAAIk7B,EAAiCl7B,MAG7C7gH,KAAK87I,UAAU,SAAWj7B,GAEzB,OAAO,IAAIm7B,EAA4Bn7B,MAIxC7gH,KAAK87I,UAAU,SAAWj7B,GAEzB,OAAO,IAAIo7B,EAAoCp7B,MAsQjD,SAASq7B,IAER,IAAI3sF,EAAU,GAEd,MAAO,CAENvtD,IAAK,SAAWT,GAEf,OAAOguD,EAAShuD,IAIjB0f,IAAK,SAAW1f,EAAK2f,GAEpBquC,EAAShuD,GAAQ2f,GAIlB4O,OAAQ,SAAWvuB,UAEXguD,EAAShuD,IAIjB46I,UAAW,WAEV5sF,EAAU,KA1RbksF,EAAWn6I,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQinG,GAAO/7G,WAAa,CAExE4B,YAAau4I,EAEb/9B,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAEzC,IAEIsB,EAFA3oE,EAAQ70C,KAMXw9G,EAF0B,KAAtBx9G,KAAKw9G,aAEMx9G,KAAKw9G,aAEK,KAAdx9G,KAAKihE,KAEDjhE,KAAKihE,KAILwpD,GAA4BvzG,GAO5C29B,EAAMyoE,QAAQb,UAAWvlG,GAEzB,IAAIklI,EAAW,SAAW93I,GAEpB43G,EAEJA,EAAS53G,GAIThG,QAAQ0R,MAAO1L,GAIhBuwC,EAAMyoE,QAAQX,UAAWzlG,GACzB29B,EAAMyoE,QAAQZ,QAASxlG,IAIpB8lG,EAAS,IAAImB,GAAYtpE,EAAMyoE,SAEnCN,EAAOe,QAAS/9G,KAAKihE,MACrB+7C,EAAOuE,gBAAiB,eACxBvE,EAAOiB,iBAAkBj+G,KAAKy9G,eAEH,oBAAtB5oE,EAAM0oE,aAEVP,EAAOwE,oBAAoB,GAI5BxE,EAAOU,KAAMxmG,GAAK,SAAWgb,GAE5B,IAEC2iB,EAAMx1C,MAAO6yB,EAAMsrF,GAAc,SAAW6+B,GAE3CrgC,EAAQqgC,GAERxnG,EAAMyoE,QAAQZ,QAASxlG,KAErBklI,GAEF,MAAQ93I,GAET83I,EAAU93I,MAIT23G,EAAYmgC,IAIhBE,eAAgB,SAAWZ,GAG1B,OADA17I,KAAK07I,YAAcA,EACZ17I,MAIRu8I,aAAc,SAAWZ,GAGxB,OADA37I,KAAK27I,UAAYA,EACV37I,MAIRw8I,cAAe,SAAWZ,GAGzB,OADA57I,KAAK47I,WAAaA,EACX57I,MAIR87I,SAAU,SAAWv+H,GAQpB,OANoD,IAA/Cvd,KAAK67I,gBAAgBjyI,QAAS2T,IAElCvd,KAAK67I,gBAAgB19I,KAAMof,GAIrBvd,MAIRy8I,WAAY,SAAWl/H,GAQtB,OANoD,IAA/Cvd,KAAK67I,gBAAgBjyI,QAAS2T,IAElCvd,KAAK67I,gBAAgB9xI,OAAQ/J,KAAK67I,gBAAgBjyI,QAAS2T,GAAY,GAIjEvd,MAIRX,MAAO,SAAW6yB,EAAM+uC,EAAM+6C,EAAQE,GAErC,IAAIwgC,EACA3hG,EAAa,GACb4hG,EAAU,GAEd,GAAqB,iBAATzqH,EAEXwqH,EAAUxqH,OAMV,GAFYu4F,GAAwB,IAAIhiF,WAAYvW,EAAM,EAAG,MAE9C0qH,EAAgC,CAE9C,IAEC7hG,EAAY8hG,EAAWC,iBAAoB,IAAIC,EAAqB7qH,GAEnE,MAAQliB,GAGT,YADKksG,GAAUA,EAASlsG,IAKzB0sI,EAAU3hG,EAAY8hG,EAAWC,iBAAkBJ,aAInDA,EAAUjyB,GAAwB,IAAIhiF,WAAYvW,IAMpD,IAAI6jF,EAAO72G,KAAKG,MAAOq9I,GAEvB,QAAoB/7I,IAAfo1G,EAAKinC,OAAuBjnC,EAAKinC,MAAM9mI,QAAS,GAAM,EAErDgmG,GAAUA,EAAS,IAAI5tG,MAAO,gFAFpC,CAOA,IAAIuyG,EAAS,IAAIo8B,EAAYlnC,EAAM,CAElC90C,KAAMA,GAAQjhE,KAAKw9G,cAAgB,GACnCD,YAAav9G,KAAKu9G,YAClBD,QAASt9G,KAAKs9G,QACds+B,WAAY57I,KAAK47I,aAIlB/6B,EAAOq8B,WAAWj/B,iBAAkBj+G,KAAKy9G,eAEzC,IAAM,IAAItzG,EAAI,EAAGA,EAAInK,KAAK67I,gBAAgBxyI,OAAQc,IAAO,CAExD,IAAIgzI,EAASn9I,KAAK67I,gBAAiB1xI,GAAK02G,GACxC87B,EAASQ,EAAOh8I,MAASg8I,EAMzBpiG,EAAYoiG,EAAOh8I,OAAS,EAI7B,GAAK40G,EAAKqnC,eAET,IAAUjzI,EAAI,EAAGA,EAAI4rG,EAAKqnC,eAAe/zI,SAAWc,EAAI,CAEvD,IAAIkzI,EAAgBtnC,EAAKqnC,eAAgBjzI,GACrCmzI,EAAqBvnC,EAAKunC,oBAAsB,GAEpD,OAASD,GAER,KAAKR,EAAWU,oBACfxiG,EAAYsiG,GAAkB,IAAIG,EAAqBznC,GACvD,MAED,KAAK8mC,EAAWY,oBACf1iG,EAAYsiG,GAAkB,IAAIK,EAClC,MAED,KAAKb,EAAWc,sCACf5iG,EAAYsiG,GAAkB,IAAIO,EAClC,MAED,KAAKf,EAAWgB,2BACf9iG,EAAYsiG,GAAkB,IAAIS,EAAmC/nC,EAAM/1G,KAAK07I,aAChF,MAED,KAAKmB,EAAWkB,iBACfhjG,EAAYsiG,GAAkB,IAAIW,EAAyBh+I,KAAK27I,WAChE,MAED,KAAKkB,EAAWoB,sBACfljG,EAAYsiG,GAAkB,IAAIa,EAClC,MAED,KAAKrB,EAAWsB,sBACfpjG,EAAYsiG,GAAkB,IAAIe,EAClC,MAED,QAEMd,EAAmB1zI,QAASyzI,IAAmB,QAAkC18I,IAA7Bg8I,EAASU,IAEjE/+I,QAAQC,KAAM,wCAA0C8+I,EAAgB,OAU7Ex8B,EAAOw9B,cAAetjG,GACtB8lE,EAAOy9B,WAAY3B,GACnB97B,EAAOxhH,MAAO28G,EAAQE,OA8CxB,IAAI2gC,EAAa,CAChBC,gBAAiB,kBACjBe,2BAA4B,6BAC5BN,oBAAqB,sBACrBgB,wBAAyB,0BACzBZ,sCAAuC,sCACvCa,2BAA4B,6BAC5Bf,oBAAqB,sBACrBgB,mBAAoB,qBACpBR,sBAAuB,wBACvBE,sBAAuB,wBACvBJ,iBAAkB,oBASnB,SAASC,EAAyBrC,GAEjC,IAAOA,EAEN,MAAM,IAAIrtI,MAAO,iFAIlBtO,KAAKmB,KAAO07I,EAAWkB,iBACvB/9I,KAAK27I,UAAYA,EASlB,SAAS6B,EAAqBznC,GAE7B/1G,KAAKmB,KAAO07I,EAAWU,oBAEvB,IAAIlsF,EAAc0kD,EAAKh7D,YAAcg7D,EAAKh7D,WAAY8hG,EAAWU,sBAA2B,GAC5Fv9I,KAAK0+I,UAAYrtF,EAAUxW,QAAU,GAgEtC,SAAS6iG,IAER19I,KAAKmB,KAAO07I,EAAWY,oBA+CxB,SAAS1B,EAAiCl7B,GAEzC7gH,KAAK6gH,OAASA,EACd7gH,KAAKmB,KAAO07I,EAAW0B,wBA8ExB,SAAStC,EAAoCp7B,GAE5C7gH,KAAK6gH,OAASA,EACd7gH,KAAKmB,KAAO07I,EAAW2B,2BAoDxB,SAASxC,EAA4Bn7B,GAEpC7gH,KAAK6gH,OAASA,EACd7gH,KAAKmB,KAAO07I,EAAW4B,mBAxPxBjB,EAAoBl8I,UAAUq9I,UAAY,SAAWC,GAEpD,IACIC,EADAC,EAAW9+I,KAAK0+I,UAAWE,GAG3Bv+G,EAAQ,IAAIX,GAAO,eACC/+B,IAAnBm+I,EAASz+G,OAAsBA,EAAM1vB,UAAWmuI,EAASz+G,OAE9D,IAAI/zB,OAA2B3L,IAAnBm+I,EAASxyI,MAAsBwyI,EAASxyI,MAAQ,EAE5D,OAASwyI,EAAShgJ,MAEjB,IAAK,eACJ+/I,EAAY,IAAIv3B,GAAkBjnF,IACxBr3B,OAAOohB,SAASvpB,IAAK,EAAG,GAAK,GACvCg+I,EAAU59H,IAAK49H,EAAU71I,QACzB,MAED,IAAK,SACJ61I,EAAY,IAAI13B,GAAY9mF,IAClBnR,SAAW5iB,EACrB,MAED,IAAK,QACJuyI,EAAY,IAAI/3B,GAAWzmF,IACjBnR,SAAW5iB,EAErBwyI,EAAS/yE,KAAO+yE,EAAS/yE,MAAQ,GACjC+yE,EAAS/yE,KAAKgzE,oBAAkDp+I,IAAjCm+I,EAAS/yE,KAAKgzE,eAA+BD,EAAS/yE,KAAKgzE,eAAiB,EAC3GD,EAAS/yE,KAAKizE,oBAAkDr+I,IAAjCm+I,EAAS/yE,KAAKizE,eAA+BF,EAAS/yE,KAAKizE,eAAiB3hJ,KAAKoN,GAAK,EACrHo0I,EAAU/uI,MAAQgvI,EAAS/yE,KAAKizE,eAChCH,EAAU3uE,SAAW,EAAM4uE,EAAS/yE,KAAKgzE,eAAiBD,EAAS/yE,KAAKizE,eACxEH,EAAU71I,OAAOohB,SAASvpB,IAAK,EAAG,GAAK,GACvCg+I,EAAU59H,IAAK49H,EAAU71I,QACzB,MAED,QACC,MAAM,IAAIsF,MAAO,6CAA+CwwI,EAAShgJ,KAAO,MAclF,OARA+/I,EAAUz0H,SAASvpB,IAAK,EAAG,EAAG,GAE9Bg+I,EAAU1xF,MAAQ,OAEUxsD,IAAvBm+I,EAASvvE,YAA0BsvE,EAAUtvE,UAAYuvE,EAASvvE,WAEvEsvE,EAAU19I,KAAO29I,EAAS39I,MAAU,SAAWy9I,EAExC/7I,QAAQ+6G,QAASihC,IAezBnB,EAA4Bp8I,UAAU29I,gBAAkB,WAEvD,OAAO76G,IAIRs5G,EAA4Bp8I,UAAU49I,aAAe,SAAWC,EAAgBC,EAAav+B,GAE5F,IAAIye,EAAU,GAEd6f,EAAe9+G,MAAQ,IAAIX,GAAO,EAAK,EAAK,GAC5Cy/G,EAAe/8G,QAAU,EAEzB,IAAIi9G,EAAoBD,EAAYE,qBAEpC,GAAKD,EAAoB,CAExB,GAAKpgJ,MAAMkY,QAASkoI,EAAkBE,iBAAoB,CAEzD,IAAIr1I,EAAQm1I,EAAkBE,gBAE9BJ,EAAe9+G,MAAM1vB,UAAWzG,GAChCi1I,EAAe/8G,QAAUl4B,EAAO,QAIWvJ,IAAvC0+I,EAAkBG,kBAEtBlgB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,MAAOE,EAAkBG,mBAM/E,OAAO38I,QAAQw0I,IAAK/X,IAgBrByc,EAAgCz6I,UAAU29I,gBAAkB,SAAWt9G,GAEtE,IACIy9G,EADSp/I,KAAK6gH,OACO9K,KAAK9kF,UAAW0Q,GAEzC,OAAOy9G,EAAYrkG,YAAgBqkG,EAAYrkG,WAAY/6C,KAAKmB,MAEzDspE,GAFyE,MAMjFsxE,EAAgCz6I,UAAUo+I,qBAAuB,SAAW/9G,EAAew9G,GAE1F,IAAIt+B,EAAS7gH,KAAK6gH,OACdu+B,EAAcv+B,EAAO9K,KAAK9kF,UAAW0Q,GAEzC,IAAOy9G,EAAYrkG,aAAgBqkG,EAAYrkG,WAAY/6C,KAAKmB,MAE/D,OAAO0B,QAAQ+6G,UAIhB,IAAI0hB,EAAU,GAEVjuE,EAAY+tF,EAAYrkG,WAAY/6C,KAAKmB,MA0B7C,QAxBmCR,IAA9B0wD,EAAUsuF,kBAEdR,EAAe/4G,UAAYirB,EAAUsuF,sBAIFh/I,IAA/B0wD,EAAUuuF,kBAEdtgB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,eAAgB9tF,EAAUuuF,wBAInCj/I,IAAvC0wD,EAAUwuF,2BAEdV,EAAe94G,mBAAqBgrB,EAAUwuF,+BAIFl/I,IAAxC0wD,EAAUyuF,2BAEdxgB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,wBAAyB9tF,EAAUyuF,iCAI9Cn/I,IAArC0wD,EAAU0uF,yBAEdzgB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,qBAAsB9tF,EAAU0uF,8BAEpCp/I,IAA3C0wD,EAAU0uF,uBAAuB11H,OAAsB,CAE3D,IAAIA,EAAQgnC,EAAU0uF,uBAAuB11H,MAE7C80H,EAAe14G,qBAAuB,IAAIv4B,EAASmc,EAAOA,GAM5D,OAAOxnB,QAAQw0I,IAAK/X,IAiBrB2c,EAAmC36I,UAAU29I,gBAAkB,SAAWt9G,GAEzE,IACIy9G,EADSp/I,KAAK6gH,OACO9K,KAAK9kF,UAAW0Q,GAEzC,OAAOy9G,EAAYrkG,YAAgBqkG,EAAYrkG,WAAY/6C,KAAKmB,MAEzDspE,GAFyE,MAMjFwxE,EAAmC36I,UAAUo+I,qBAAuB,SAAW/9G,EAAew9G,GAE7F,IAAIt+B,EAAS7gH,KAAK6gH,OACdu+B,EAAcv+B,EAAO9K,KAAK9kF,UAAW0Q,GAEzC,IAAOy9G,EAAYrkG,aAAgBqkG,EAAYrkG,WAAY/6C,KAAKmB,MAE/D,OAAO0B,QAAQ+6G,UAIhB,IAAI0hB,EAAU,GAEVjuE,EAAY+tF,EAAYrkG,WAAY/6C,KAAKmB,MAc7C,YAZsCR,IAAjC0wD,EAAU2uF,qBAEdb,EAAexjF,aAAetK,EAAU2uF,yBAIFr/I,IAAlC0wD,EAAU4uF,qBAEd3gB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,kBAAmB9tF,EAAU4uF,sBAI3Ep9I,QAAQw0I,IAAK/X,IAiBrB0c,EAA2B16I,UAAUqgH,YAAc,SAAWu+B,GAE7D,IAAIr/B,EAAS7gH,KAAK6gH,OACd9K,EAAO8K,EAAO9K,KAEdoqC,EAAapqC,EAAKl/F,SAAUqpI,GAEhC,IAAOC,EAAWplG,aAAgBolG,EAAWplG,WAAY/6C,KAAKmB,MAE7D,OAAO,KAIR,IAAIkwD,EAAY8uF,EAAWplG,WAAY/6C,KAAKmB,MACxCmI,EAASysG,EAAK9+F,OAAQo6C,EAAU/nD,QAChC0zG,EAAS6D,EAAO/iH,QAAQ89I,WAE5B,IAAO5+B,EAEN,MAAM,IAAI1uG,MAAO,+EAIlB,OAAOuyG,EAAOu/B,iBAAkBF,EAAc52I,EAAQ0zG,IAKvD,IAAI4/B,EAAgC,OAEhCyD,EAAuC,WAAvCA,EAAwD,QAE5D,SAAStD,EAAqB7qH,GAE7BlyB,KAAKmB,KAAO07I,EAAWC,gBACvB98I,KAAK08I,QAAU,KACf18I,KAAK23I,KAAO,KAEZ,IAAI2I,EAAa,IAAIpvC,SAAUh/E,EAAM,EATD,IAiBpC,GANAlyB,KAAKqhH,OAAS,CACbk/B,MAAO91B,GAAwB,IAAIhiF,WAAYvW,EAAK30B,MAAO,EAAG,KAC9D2Y,QAASoqI,EAAWE,UAAW,GAAG,GAClCn3I,OAAQi3I,EAAWE,UAAW,GAAG,IAG7BxgJ,KAAKqhH,OAAOk/B,QAAU3D,EAE1B,MAAM,IAAItuI,MAAO,qDAEX,GAAKtO,KAAKqhH,OAAOnrG,QAAU,EAEjC,MAAM,IAAI5H,MAAO,kDAOlB,IAHA,IAAImyI,EAAY,IAAIvvC,SAAUh/E,EA3BM,IA4BhCwuH,EAAa,EAETA,EAAaD,EAAUrK,YAAa,CAE3C,IAAIuK,EAAcF,EAAUD,UAAWE,GAAY,GACnDA,GAAc,EAEd,IAAIE,EAAYH,EAAUD,UAAWE,GAAY,GAGjD,GAFAA,GAAc,EAETE,IAAcP,EAAoC,CAEtD,IAAIQ,EAAe,IAAIp4G,WAAYvW,EAxCD,GAwCwCwuH,EAAYC,GACtF3gJ,KAAK08I,QAAUjyB,GAAwBo2B,QAEjC,GAAKD,IAAcP,EAAmC,CAE5D,IAAIS,EA7C8B,GA6CgBJ,EAClD1gJ,KAAK23I,KAAOzlH,EAAK30B,MAAOujJ,EAAYA,EAAaH,GAMlDD,GAAcC,EAIf,GAAsB,OAAjB3gJ,KAAK08I,QAET,MAAM,IAAIpuI,MAAO,6CAWnB,SAASwvI,EAAmC/nC,EAAM2lC,GAEjD,IAAOA,EAEN,MAAM,IAAIptI,MAAO,uDAIlBtO,KAAKmB,KAAO07I,EAAWgB,2BACvB79I,KAAK+1G,KAAOA,EACZ/1G,KAAK07I,YAAcA,EACnB17I,KAAK07I,YAAY1E,UAoElB,SAASkH,IAERl+I,KAAKmB,KAAO07I,EAAWoB,sBAkDxB,SAAS8C,EAA4BhnD,GAEpCvvB,GAAqB7kE,KAAM3F,MAE3BA,KAAKghJ,kCAAmC,EAGxC,IAAIC,EAA+B,CAClC,yBACA,mCACA,UACCt+E,KAAM,MAEJu+E,EAAiC,CACpC,2BACA,qCACA,UACCv+E,KAAM,MAEJw+E,EAA2B,CAC9B,kCACA,yBACA,wDACA,mDACA,oFACA,yCACA,UACCx+E,KAAM,MAEJy+E,EAA6B,CAChC,uCACA,2BACA,4DACA,kFACA,2CACA,UACCz+E,KAAM,MAEJ0+E,EAA6B,CAChC,6BACA,4CACA,kFACA,+DACA,6HACA,mDACA,uEACA,gDACC1+E,KAAM,MAEJroB,EAAW,CACdpU,SAAU,CAAErnC,OAAO,IAAI6gC,IAAQG,OAAQ,WACvCyhH,WAAY,CAAEziJ,MAAO,GACrB6lC,YAAa,CAAE7lC,MAAO,MACtB0iJ,cAAe,CAAE1iJ,MAAO,OAGzBmB,KAAKwhJ,eAAiBlnG,EAGtBt6C,KAAKwlC,gBAAkB,SAAWmZ,GAEjC,IAAM,IAAI8iG,KAAennG,EAExBqE,EAAOrE,SAAUmnG,GAAgBnnG,EAAUmnG,GAI5C9iG,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,2BAA4B,0BACnF1kB,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,2BAA4B,6BACnF1kB,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,wCAAyC49E,GAChGtiG,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,wCAAyC69E,GAChGviG,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,mCAAoC89E,GAC3FxiG,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,mCAAoC+9E,GAC3FziG,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAS,sCAAuCg+E,IAK/FriJ,OAAOuuB,iBACNvtB,KACA,CACCkmC,SAAU,CACTlkC,IAAK,WAAc,OAAOs4C,EAASpU,SAASrnC,OAC5CgC,IAAK,SAAWN,GAAM+5C,EAASpU,SAASrnC,MAAQ0B,IAEjDmkC,YAAa,CACZ1iC,IAAK,WAAc,OAAOs4C,EAAS5V,YAAY7lC,OAC/CgC,IAAK,SAAWN,GAAM+5C,EAAS5V,YAAY7lC,MAAQ0B,IAEpD+gJ,WAAY,CACXt/I,IAAK,WAAc,OAAOs4C,EAASgnG,WAAWziJ,OAC9CgC,IAAK,SAAWN,GAAM+5C,EAASgnG,WAAWziJ,MAAQ0B,IAEnDghJ,cAAe,CACdv/I,IAAK,WAAc,OAAOs4C,EAASinG,cAAc1iJ,OACjDgC,IAAK,SAAWN,GAEf+5C,EAASinG,cAAc1iJ,MAAQ0B,EAE1BA,GAEJP,KAAK06C,QAAQgnG,kBAAoB,GAEjC1hJ,KAAK06C,QAAQinG,iBAAmB,YAIzB3hJ,KAAK06C,QAAQinG,wBACb3hJ,KAAK06C,QAAQgnG,8BAUlB1hJ,KAAK8lC,iBACL9lC,KAAK6lC,iBACL7lC,KAAKonC,oBACLpnC,KAAKmnC,aAEZnnC,KAAKslC,UAAWy0D,GAsBjB,SAAS6jD,IAER,MAAO,CAENz8I,KAAM07I,EAAWc,sCAEjBiE,yBAA0B,CACzB,QACA,MACA,WACA,oBACA,QACA,iBACA,WACA,oBACA,cACA,UACA,YACA,YACA,gBACA,kBACA,oBACA,mBACA,cACA,WACA,gBACA,aACA,WACA,SACA,kBACA,mBAGD3C,gBAAiB,WAEhB,OAAO8B,GAIR7B,aAAc,SAAWC,EAAgBC,EAAav+B,GAErD,IAAIghC,EAAwBzC,EAAYrkG,WAAY/6C,KAAKmB,MAEzDg+I,EAAe9+G,MAAQ,IAAIX,GAAO,EAAK,EAAK,GAC5Cy/G,EAAe/8G,QAAU,EAEzB,IAAIk9F,EAAU,GAEd,GAAKrgI,MAAMkY,QAAS0qI,EAAsBC,eAAkB,CAE3D,IAAI53I,EAAQ23I,EAAsBC,cAElC3C,EAAe9+G,MAAM1vB,UAAWzG,GAChCi1I,EAAe/8G,QAAUl4B,EAAO,GAoBjC,QAhB8CvJ,IAAzCkhJ,EAAsBE,gBAE1BziB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,MAAO0C,EAAsBE,iBAIlF5C,EAAen5G,SAAW,IAAItG,GAAO,EAAK,EAAK,GAC/Cy/G,EAAemC,gBAAwD3gJ,IAA3CkhJ,EAAsBG,iBAAiCH,EAAsBG,iBAAmB,EAC5H7C,EAAej5G,SAAW,IAAIxG,GAAO,EAAK,EAAK,GAE1CzgC,MAAMkY,QAAS0qI,EAAsBI,iBAEzC9C,EAAej5G,SAASv1B,UAAWkxI,EAAsBI,qBAIDthJ,IAApDkhJ,EAAsBK,0BAA0C,CAEpE,IAAIC,EAAkBN,EAAsBK,0BAC5C5iB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,gBAAiBgD,IACrE7iB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,cAAegD,IAIpE,OAAOt/I,QAAQw0I,IAAK/X,IAIrB8iB,eAAgB,SAAWjD,GAE1B,IAAIttH,EAAW,IAAIkvH,EAA4B5B,GA0C/C,OAzCAttH,EAASmQ,KAAM,EAEfnQ,EAASwO,MAAQ8+G,EAAe9+G,MAEhCxO,EAASwS,SAA6B1jC,IAAvBw+I,EAAe96G,IAAoB,KAAO86G,EAAe96G,IAExExS,EAASyS,SAAW,KACpBzS,EAAS0S,kBAAoB,EAE7B1S,EAAS2S,WAAiC7jC,IAAzBw+I,EAAe36G,MAAsB,KAAO26G,EAAe36G,MAC5E3S,EAAS4S,eAAiB,EAE1B5S,EAASmU,SAAWm5G,EAAen5G,SACnCnU,EAASoU,kBAAoB,EAC7BpU,EAASwV,iBAA6C1mC,IAA/Bw+I,EAAe93G,YAA4B,KAAO83G,EAAe93G,YAExFxV,EAAS8U,aAAqChmC,IAA3Bw+I,EAAex4G,QAAwB,KAAOw4G,EAAex4G,QAChF9U,EAAS+U,UAAY,EAErB/U,EAASgV,eAAyClmC,IAA7Bw+I,EAAet4G,UAA0B,KAAOs4G,EAAet4G,UACpFhV,EAASiV,cApgjDiB,EAsgjDrBq4G,EAAep4G,cAAclV,EAASkV,YAAco4G,EAAep4G,aAExElV,EAASmV,gBAAkB,KAC3BnV,EAASoV,kBAAoB,EAC7BpV,EAASqV,iBAAmB,EAE5BrV,EAAS6S,iBAA6C/jC,IAA/Bw+I,EAAez6G,YAA4B,KAAOy6G,EAAez6G,YACxF7S,EAASqU,SAAWi5G,EAAej5G,SAEnCrU,EAAS0vH,mBAAiD5gJ,IAAjCw+I,EAAeoC,cAA8B,KAAOpC,EAAeoC,cAC5F1vH,EAASyvH,WAAanC,EAAemC,WAErCzvH,EAAS8S,SAAW,KAEpB9S,EAAS+S,YAAmCjkC,IAA1Bw+I,EAAev6G,OAAuB,KAAOu6G,EAAev6G,OAC9E/S,EAASyV,gBAAkB,EAE3BzV,EAASkT,gBAAkB,IAEpBlT,IAaV,SAASusH,IAERp+I,KAAKmB,KAAO07I,EAAWsB,sBAUxB,SAASkE,EAA4BjuC,EAAoBC,EAAcC,EAAYT,GAElFM,GAAYxuG,KAAM3F,KAAMo0G,EAAoBC,EAAcC,EAAYT,GAjavEiqC,EAAkCx8I,UAAUghJ,gBAAkB,SAAWC,EAAW1hC,GAEnF,IAAI9K,EAAO/1G,KAAK+1G,KACZ2lC,EAAc17I,KAAK07I,YACnB8G,EAAkBD,EAAUxnG,WAAY/6C,KAAKmB,MAAOshJ,WACpDC,EAAmBH,EAAUxnG,WAAY/6C,KAAKmB,MAAOf,WACrDuiJ,EAAoB,GACpBC,EAAyB,GACzBC,EAAmB,GAEvB,IAAM,IAAItK,KAAiBmK,EAAmB,CAE7C,IAAII,EAAqBC,EAAYxK,IAAmBA,EAAc/1I,cAEtEmgJ,EAAmBG,GAAuBJ,EAAkBnK,GAI7D,IAAMA,KAAiBgK,EAAUniJ,WAAa,CAEzC0iJ,EAAqBC,EAAYxK,IAAmBA,EAAc/1I,cAEtE,QAA2C7B,IAAtC+hJ,EAAkBnK,GAAgC,CAEtD,IAAIyK,EAAcjtC,EAAKktC,UAAWV,EAAUniJ,WAAYm4I,IACpD2K,EAAgBC,EAAuBH,EAAYE,eAEvDL,EAAkBC,GAAuBI,EACzCN,EAAwBE,IAAkD,IAA3BE,EAAYxhH,YAM7D,OAAOq/E,EAAOuiC,cAAe,aAAcZ,GAAkB18D,MAAM,SAAW28D,GAE7E,OAAO,IAAI5/I,SAAS,SAAW+6G,GAE9B89B,EAAY5F,gBAAiB2M,GAAY,SAAW/gI,GAEnD,IAAM,IAAI62H,KAAiB72H,EAASthB,WAAa,CAEhD,IAAIX,EAAYiiB,EAASthB,WAAYm4I,GACjC/2G,EAAaohH,EAAwBrK,QAErB53I,IAAf6gC,IAA2B/hC,EAAU+hC,WAAaA,GAIxDo8E,EAASl8F,KAEPihI,EAAmBE,UAmBzB3E,EAA8B58I,UAAU+hJ,cAAgB,SAAWnqI,EAASuuE,GA8B3E,OA5BAvuE,EAAUA,EAAQ1C,aAEQ7V,IAArB8mF,EAAU/3E,QAEdwJ,EAAQxJ,OAAOiB,UAAW82E,EAAU/3E,aAIT/O,IAAvB8mF,EAAU9zE,WAEduF,EAAQvF,SAAW8zE,EAAU9zE,eAILhT,IAApB8mF,EAAUp9D,OAEdnR,EAAQtD,OAAOjF,UAAW82E,EAAUp9D,YAIT1pB,IAAvB8mF,EAAU67D,UAEdhlJ,QAAQC,KAAM,wCAA0CyB,KAAKmB,KAAO,kCAIrE+X,EAAQ80B,aAAc,EAEf90B,GA+IR6nI,EAA2Bz/I,UAAYtC,OAAOoX,OAAQo0D,GAAqBlpE,WAC3Ey/I,EAA2Bz/I,UAAU4B,YAAc69I,EAEnDA,EAA2Bz/I,UAAUmV,KAAO,SAAWnN,GAWtD,OATAkhE,GAAqBlpE,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,GAChDtJ,KAAK0kC,YAAcp7B,EAAOo7B,YAC1B1kC,KAAKkmC,SAASzvB,KAAMnN,EAAO48B,UAC3BlmC,KAAKuhJ,cAAgBj4I,EAAOi4I,cAC5BvhJ,KAAKshJ,WAAah4I,EAAOg4I,kBAClBthJ,KAAK8lC,iBACL9lC,KAAK6lC,iBACL7lC,KAAKonC,oBACLpnC,KAAKmnC,aACLnnC,MAoKRqiJ,EAA2B/gJ,UAAYtC,OAAOoX,OAAQ+9F,GAAY7yG,WAClE+gJ,EAA2B/gJ,UAAU4B,YAAcm/I,EAEnDA,EAA2B/gJ,UAAU41G,iBAAmB,SAAW/tG,GAUlE,IALA,IAAI5E,EAASvE,KAAK6zG,aACjB5hF,EAASjyB,KAAKq0G,aACdlC,EAAYnyG,KAAKmyG,UACjBziG,EAASvG,EAAQgpG,EAAY,EAAIA,EAExBhoG,EAAI,EAAGA,IAAMgoG,EAAWhoG,IAEjC5F,EAAQ4F,GAAM8nB,EAAQviB,EAASvF,GAIhC,OAAO5F,GAIR89I,EAA2B/gJ,UAAUq1G,aAAe0rC,EAA2B/gJ,UAAU41G,iBAEzFmrC,EAA2B/gJ,UAAUm1G,UAAY4rC,EAA2B/gJ,UAAU41G,iBAEtFmrC,EAA2B/gJ,UAAUw1G,aAAe,SAAW5hF,EAAIjP,EAAIna,EAAGoa,GAyBzE,IAvBA,IAAI3hB,EAASvE,KAAK6zG,aACd5hF,EAASjyB,KAAKq0G,aACdvhD,EAAS9yD,KAAKmyG,UAEdoxC,EAAmB,EAATzwF,EACV0wF,EAAmB,EAAT1wF,EAEV2wF,EAAKv9H,EAAKD,EAEVzlB,GAAMsL,EAAIma,GAAOw9H,EACjBttC,EAAK31G,EAAIA,EACTu3G,EAAM5B,EAAK31G,EAEX03G,EAAUhjF,EAAKsuH,EACfrrC,EAAUD,EAAUsrC,EAEpB71I,GAAO,EAAIoqG,EAAM,EAAI5B,EACrBr6F,EAAKi8F,EAAM5B,EACXzwF,EAAK,EAAI/X,EACTkO,EAAKC,EAAKq6F,EAAK31G,EAIT2J,EAAI,EAAGA,IAAM2oD,EAAQ3oD,IAAO,CAErC,IAAIsZ,EAAKwO,EAAQkmF,EAAUhuG,EAAI2oD,GAC3B4wF,EAAKzxH,EAAQkmF,EAAUhuG,EAAIo5I,GAAYE,EACvC//H,EAAKuO,EAAQimF,EAAU/tG,EAAI2oD,GAC3B6wF,EAAK1xH,EAAQimF,EAAU/tG,GAAMs5I,EAEjCl/I,EAAQ4F,GAAMub,EAAKjC,EAAK5H,EAAK6nI,EAAK/1I,EAAK+V,EAAK5H,EAAK6nI,EAIlD,OAAOp/I,GAUR,IAAIq/I,EAWK,EAXLA,EAYI,EAZJA,EAaQ,EAbRA,EAcS,EAdTA,EAeQ,EAfRA,EAgBa,EAhBbA,EAiBW,EAKXT,EAAwB,CAC3BU,KAAMt7G,UACNu7G,KAAMr7G,WACNs7G,KAAMl7G,WACNm7G,KAAMj7G,YACNk7G,KAAM96G,YACN+6G,KAAM76G,cAGH86G,EAAgB,CACnBC,KAlwjDoB,KAmwjDpBC,KAhwjDmB,KAiwjDnBC,KAnwjDiC,KAowjDjCC,KAjwjDgC,KAkwjDhCC,KApwjDgC,KAqwjDhCC,KAlwjD+B,MAqwjD5BC,EAAkB,CACrBC,MA7wjD0B,KA8wjD1BC,MA7wjD6B,KA8wjD7BC,MAhxjDqB,KAmxjDlBC,EAAmB,CACtBC,OAAU,EACVC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,EACRC,KAAQ,IAGLtC,EAAa,CAChBuC,SAAU,WACVC,OAAQ,SACRC,QAAS,UACTC,WAAY,KACZC,WAAY,MACZC,QAAS,QACTC,UAAW,aACXC,SAAU,aAGPC,EAAkB,CACrBz7H,MAAO,QACP07H,YAAa,WACbpyI,SAAU,aACV6zH,QAAS,yBAGNwe,EAAgB,CACnBC,iBAAatlJ,EAEbulJ,OAlujDwB,KAmujDxBC,KApujD0B,MAuujDvBC,EACK,SADLA,EAEG,OAFHA,EAGI,QAKR,SAASxpC,EAAY1lG,EAAK+pD,GAGzB,MAAoB,iBAAR/pD,GAA4B,KAARA,EAAoB,IAG/C,gBAAgB7P,KAAM45D,IAAU,MAAM55D,KAAM6P,KAEhD+pD,EAAOA,EAAKoC,QAAS,0BAA2B,OAK5C,mBAAmBh8D,KAAM6P,IAGzB,gBAAgB7P,KAAM6P,IAGtB,aAAa7P,KAAM6P,GANqBA,EAStC+pD,EAAO/pD,GAOf,SAASmvI,EAAuBr0H,GAgB/B,YAdoCrxB,IAA/BqxB,oBAEJA,kBAA6B,IAAIw4C,GAAsB,CACtDnqC,MAAO,SACP2F,SAAU,EACVF,UAAW,EACXD,UAAW,EACXxD,aAAa,EACbQ,WAAW,EACXX,KAz5jDc,KA85jDTlQ,kBAIR,SAASs0H,EAAgCC,EAAiBrlI,EAAQslI,GAIjE,IAAM,IAAIrlJ,KAAQqlJ,EAAUzrG,gBAEMp6C,IAA5B4lJ,EAAiBplJ,KAErB+f,EAAO+M,SAASw4H,eAAiBvlI,EAAO+M,SAASw4H,gBAAkB,GACnEvlI,EAAO+M,SAASw4H,eAAgBtlJ,GAASqlJ,EAAUzrG,WAAY55C,IAYlE,SAASulJ,EAAwBxlI,EAAQylI,QAEhBhmJ,IAAnBgmJ,EAAQC,SAEmB,iBAAnBD,EAAQC,OAEnB5nJ,OAAOuG,OAAQ2b,EAAO+M,SAAU04H,EAAQC,QAIxCtoJ,QAAQC,KAAM,sDAAwDooJ,EAAQC,SAqFjF,SAAS/zG,EAAoB6D,EAAMmwG,GAIlC,GAFAnwG,EAAK7D,0BAEoBlyC,IAApBkmJ,EAAQrf,QAEZ,IAAM,IAAIr9H,EAAI,EAAG0W,EAAKgmI,EAAQrf,QAAQn+H,OAAQc,EAAI0W,EAAI1W,IAErDusC,EAAKrD,sBAAuBlpC,GAAM08I,EAAQrf,QAASr9H,GAOrD,GAAK08I,EAAQD,QAAU3nJ,MAAMkY,QAAS0vI,EAAQD,OAAOE,aAAgB,CAEpE,IAAIA,EAAcD,EAAQD,OAAOE,YAEjC,GAAKpwG,EAAKrD,sBAAsBhqC,SAAWy9I,EAAYz9I,OAAS,CAE/DqtC,EAAKhD,sBAAwB,GAE7B,IAAUvpC,EAAI,EAAG0W,EAAKimI,EAAYz9I,OAAQc,EAAI0W,EAAI1W,IAEjDusC,EAAKhD,sBAAuBozG,EAAa38I,IAAQA,OAMlD7L,QAAQC,KAAM,yEA6BjB,SAASwoJ,EAAqB3mJ,GAM7B,IAJA,IAAI4mJ,EAAgB,GAEhBz1G,EAAOvyC,OAAOuyC,KAAMnxC,GAAag3C,OAE3BjtC,EAAI,EAAG0W,EAAK0wB,EAAKloC,OAAQc,EAAI0W,EAAI1W,IAE1C68I,GAAiBz1G,EAAMpnC,GAAM,IAAM/J,EAAYmxC,EAAMpnC,IAAQ,IAI9D,OAAO68I,EAMR,SAAS/J,EAAYlnC,EAAMj4G,GAE1BkC,KAAK+1G,KAAOA,GAAQ,GACpB/1G,KAAK+6C,WAAa,GAClB/6C,KAAK28I,QAAU,GACf38I,KAAKlC,QAAUA,GAAW,GAG1BkC,KAAKgyB,MAAQ,IAAIkqH,EAGjBl8I,KAAKinJ,aAAe,IAAIlmJ,IAGxBf,KAAKknJ,eAAiB,GAGtBlnJ,KAAKmnJ,UAAY,CAAEC,KAAM,GAAIC,KAAM,IACnCrnJ,KAAKsnJ,YAAc,CAAEF,KAAM,GAAIC,KAAM,IACrCrnJ,KAAKunJ,WAAa,CAAEH,KAAM,GAAIC,KAAM,IAIF,oBAAtBr5B,oBAA+E,IAA1C,UAAU3mH,KAAMjB,UAAUa,WAE1EjH,KAAKwnJ,cAAgB,IAAIz5B,GAAmB/tH,KAAKlC,QAAQw/G,SAIzDt9G,KAAKwnJ,cAAgB,IAAI/oC,GAAez+G,KAAKlC,QAAQw/G,SAItDt9G,KAAKwnJ,cAAc1pC,eAAgB99G,KAAKlC,QAAQy/G,aAEhDv9G,KAAKk9I,WAAa,IAAI/+B,GAAYn+G,KAAKlC,QAAQw/G,SAC/Ct9G,KAAKk9I,WAAW37B,gBAAiB,eAEC,oBAA7BvhH,KAAKlC,QAAQy/G,aAEjBv9G,KAAKk9I,WAAW17B,oBAAoB,GA6jCtC,SAASimC,EAAwB/lI,EAAUgmI,EAAc7mC,GAExD,IAAIzgH,EAAasnJ,EAAatnJ,WAE1Bk/H,EAAU,GAEd,SAASqoB,EAAyBC,EAAerP,GAEhD,OAAO13B,EAAOuiC,cAAe,WAAYwE,GACvC9hE,MAAM,SAAW+hE,GAEjBnmI,EAAS/d,aAAc40I,EAAesP,MAMzC,IAAM,IAAIC,KAAqB1nJ,EAAa,CAE3C,IAAI0iJ,EAAqBC,EAAY+E,IAAuBA,EAAkBtlJ,cAGzEsgJ,KAAsBphI,EAASthB,YAEpCk/H,EAAQnhI,KAAMwpJ,EAAyBvnJ,EAAY0nJ,GAAqBhF,IAIzE,QAA8BniJ,IAAzB+mJ,EAAax2G,UAA2BxvB,EAASvY,MAAQ,CAE7D,IAAI0+I,EAAWhnC,EAAOuiC,cAAe,WAAYsE,EAAax2G,SAAU40C,MAAM,SAAW+hE,GAExFnmI,EAASgsB,SAAUm6G,MAIpBvoB,EAAQnhI,KAAM0pJ,GAQf,OAJAnB,EAAwBhlI,EAAUgmI,GA3InC,SAAwBhmI,EAAUgmI,EAAc7mC,GAE/C,IAAIzgH,EAAasnJ,EAAatnJ,WAE1BghB,EAAM,IAAIlB,EAEd,QAA6Bvf,IAAxBP,EAAWklJ,SAAhB,CAEC,IAEIp6I,GAFA28I,EAAWhnC,EAAO9K,KAAKktC,UAAW7iJ,EAAWklJ,WAE9Bp6I,IACfC,EAAM08I,EAAS18I,IAInB,QAAaxK,IAARuK,QAA6BvK,IAARwK,EAA1B,CAECiW,EAAIvgB,IACH,IAAI2c,EAAStS,EAAK,GAAKA,EAAK,GAAKA,EAAK,IACtC,IAAIsS,EAASrS,EAAK,GAAKA,EAAK,GAAKA,EAAK,KAgBzC,IAAI48I,EAAUL,EAAaK,QAE3B,QAAiBpnJ,IAAZonJ,EAAwB,CAK5B,IAHA,IAAIC,EAAkB,IAAIxqI,EACtB+D,EAAS,IAAI/D,EAEPrT,EAAI,EAAG0W,EAAKknI,EAAQ1+I,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpD,IAIK09I,EAJD7+I,EAAS++I,EAAS59I,GAEtB,QAAyBxJ,IAApBqI,EAAOs8I,SAGPp6I,GADA28I,EAAWhnC,EAAO9K,KAAKktC,UAAWj6I,EAAOs8I,WAC1Bp6I,IACfC,EAAM08I,EAAS18I,SAINxK,IAARuK,QAA6BvK,IAARwK,GAGzBoW,EAAOkpB,KAAMptC,KAAK8N,IAAK9N,KAAK4R,IAAK/D,EAAK,IAAO7N,KAAK4R,IAAK9D,EAAK,MAC5DoW,EAAOmpB,KAAMrtC,KAAK8N,IAAK9N,KAAK4R,IAAK/D,EAAK,IAAO7N,KAAK4R,IAAK9D,EAAK,MAC5DoW,EAAOopB,KAAMttC,KAAK8N,IAAK9N,KAAK4R,IAAK/D,EAAK,IAAO7N,KAAK4R,IAAK9D,EAAK,MAM5D68I,EAAgB78I,IAAKoW,IAIrBjjB,QAAQC,KAAM,uEASjB6iB,EAAI6mI,eAAgBD,GAIrBtmI,EAASC,YAAcP,EAEvB,IAAIY,EAAS,IAAI6B,EAEjBzC,EAAIiB,UAAWL,EAAOnS,QACtBmS,EAAOpC,OAASwB,EAAIlW,IAAI8Y,WAAY5C,EAAIjW,KAAQ,EAEhDuW,EAAS6pB,eAAiBvpB,OAlExB1jB,QAAQC,KAAM,wEAsHhB2pJ,CAAexmI,EAAUgmI,EAAc7mC,GAEhCh+G,QAAQw0I,IAAK/X,GAAUx5C,MAAM,WAEnC,YAAgCnlF,IAAzB+mJ,EAAaK,QAtyCtB,SAA0BrmI,EAAUqmI,EAASlnC,GAK5C,IAHA,IAAIsnC,GAAmB,EACnBC,GAAiB,EAEXj+I,EAAI,EAAG0W,EAAKknI,EAAQ1+I,OAAQc,EAAI0W,SAIhBlgB,KAFrBqI,EAAS++I,EAAS59I,IAEVm7I,WAAyB6C,GAAmB,QACjCxnJ,IAAlBqI,EAAOu8I,SAAuB6C,GAAiB,IAE/CD,IAAoBC,GAPoBj+I,KAW9C,IAAOg+I,IAAsBC,EAAiB,OAAOvlJ,QAAQ+6G,QAASl8F,GAEtE,IAAI2mI,EAA2B,GAC3BC,EAAyB,GAE7B,IAAUn+I,EAAI,EAAG0W,EAAKknI,EAAQ1+I,OAAQc,EAAI0W,EAAI1W,IAAO,CAEpD,IAAInB,EAAS++I,EAAS59I,GAEtB,GAAKg+I,EAAmB,CAEvB,IAAII,OAAsC5nJ,IAApBqI,EAAOs8I,SAC1BzkC,EAAOuiC,cAAe,WAAYp6I,EAAOs8I,UACzC5jI,EAASthB,WAAWgqB,SAEvBi+H,EAAyBlqJ,KAAMoqJ,GAI3BH,IAEAG,OAAoC5nJ,IAAlBqI,EAAOu8I,OAC1B1kC,EAAOuiC,cAAe,WAAYp6I,EAAOu8I,QACzC7jI,EAASthB,WAAWqf,OAEvB6oI,EAAuBnqJ,KAAMoqJ,IAM/B,OAAO1lJ,QAAQw0I,IAAK,CACnBx0I,QAAQw0I,IAAKgR,GACbxlJ,QAAQw0I,IAAKiR,KACVxiE,MAAM,SAAWm9D,GAEpB,IAAIuF,EAAiBvF,EAAW,GAC5Br7G,EAAeq7G,EAAW,GAM9B,OAJKkF,IAAmBzmI,EAAS2rB,gBAAgBjjB,SAAWo+H,GACvDJ,IAAiB1mI,EAAS2rB,gBAAgB5tB,OAASmoB,GACxDlmB,EAAS4rB,sBAAuB,EAEzB5rB,KA4uCJ+mI,CAAiB/mI,EAAUgmI,EAAaK,QAASlnC,GACjDn/F,KAWL,SAASgnI,EAAqBhnI,EAAU8sH,GAEvC,IAAIrlI,EAAQuY,EAAS+rB,WAIrB,GAAe,OAAVtkC,EAAiB,CAErB,IAAI+nC,EAAU,GAEV9mB,EAAW1I,EAASisB,aAAc,YAEtC,QAAkBhtC,IAAbypB,EAcJ,OADA9rB,QAAQ0R,MAAO,kGACR0R,EAZP,IAAM,IAAIvX,EAAI,EAAGA,EAAIigB,EAAS1J,MAAOvW,IAEpC+mC,EAAQ/yC,KAAMgM,GAIfuX,EAASgsB,SAAUwD,GACnB/nC,EAAQuY,EAAS+rB,WAanB,IAAIk7G,EAAoBx/I,EAAMuX,MAAQ,EAClCkoI,EAAa,GAEjB,GA7pmD0B,IA6pmDrBpa,EAIJ,IAAUrkI,EAAI,EAAGA,GAAKw+I,EAAmBx+I,IAExCy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAM,IAC7Bi5I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,IAC7By+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,EAAI,SAQlC,IAAUA,EAAI,EAAGA,EAAIw+I,EAAmBx+I,IAElCA,EAAI,GAAM,GAEdy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,IAC7By+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,EAAI,IACjCy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,EAAI,MAKjCy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,EAAI,IACjCy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,EAAI,IACjCy+I,EAAWzqJ,KAAMgL,EAAMwG,KAAMxF,KAQzBy+I,EAAWv/I,OAAS,IAAQs/I,GAElCrqJ,QAAQ0R,MAAO,2FAMhB,IAAI64I,EAAcnnI,EAASlL,QAG3B,OAFAqyI,EAAYn7G,SAAUk7G,GAEfC,EAqvBR,OA57DA5L,EAAW37I,UAAU+8I,cAAgB,SAAWtjG,GAE/C/6C,KAAK+6C,WAAaA,GAInBkiG,EAAW37I,UAAUg9I,WAAa,SAAW3B,GAE5C38I,KAAK28I,QAAUA,GAIhBM,EAAW37I,UAAUjC,MAAQ,SAAW28G,EAAQE,GAE/C,IAAI2E,EAAS7gH,KACT+1G,EAAO/1G,KAAK+1G,KACZh7D,EAAa/6C,KAAK+6C,WAGtB/6C,KAAKgyB,MAAMmqH,YAGXn8I,KAAK8oJ,YAELjmJ,QAAQw0I,IAAK,CAEZr3I,KAAK+oJ,gBAAiB,SACtB/oJ,KAAK+oJ,gBAAiB,aACtB/oJ,KAAK+oJ,gBAAiB,YAEnBjjE,MAAM,SAAWkjE,GAEpB,IAAIzkJ,EAAS,CACZu5C,MAAOkrG,EAAc,GAAKjzC,EAAKj4D,OAAS,GACxCmrG,OAAQD,EAAc,GACtBxuC,WAAYwuC,EAAc,GAC1Bv7E,QAASu7E,EAAc,GACvBhM,MAAOjnC,EAAKinC,MACZn8B,OAAQA,EACR5yF,SAAU,IAGXq4H,EAAgCvrG,EAAYx2C,EAAQwxG,GAEpD2wC,EAAwBniJ,EAAQwxG,GAEhCiG,EAAQz3G,MAELkrH,MAAOvT,IAOZ+gC,EAAW37I,UAAUwnJ,UAAY,WAQhC,IANA,IAAII,EAAWlpJ,KAAK+1G,KAAKozC,OAAS,GAC9BC,EAAWppJ,KAAK+1G,KAAKszC,OAAS,GAC9BC,EAAWtpJ,KAAK+1G,KAAKwzC,QAAU,GAIzBvxD,EAAY,EAAGwxD,EAAaJ,EAAS//I,OAAQ2uF,EAAYwxD,EAAYxxD,IAI9E,IAFA,IAAIzE,EAAS61D,EAAUpxD,GAAYzE,OAEzBppF,EAAI,EAAG0W,EAAK0yE,EAAOlqF,OAAQc,EAAI0W,EAAI1W,IAE5C++I,EAAU31D,EAAQppF,IAAMuuF,QAAS,EAQnC,IAAM,IAAI+wD,EAAY,EAAGC,EAAaR,EAAS7/I,OAAQogJ,EAAYC,EAAYD,IAAe,CAE7F,IAAIE,EAAUT,EAAUO,QAEF9oJ,IAAjBgpJ,EAAQjzG,OAEZ12C,KAAK4pJ,YAAa5pJ,KAAKmnJ,UAAWwC,EAAQjzG,WAKpB/1C,IAAjBgpJ,EAAQE,OAEZP,EAAUK,EAAQjzG,MAAOnD,eAAgB,SAMnB5yC,IAAnBgpJ,EAAQrrI,QAEZte,KAAK4pJ,YAAa5pJ,KAAKsnJ,YAAaqC,EAAQrrI,QAIxCqrI,EAAQ5uG,YACT4uG,EAAQ5uG,WAAY8hG,EAAWU,2BACgC58I,IAA/DgpJ,EAAQ5uG,WAAY8hG,EAAWU,qBAAsB3vE,OAExD5tE,KAAK4pJ,YAAa5pJ,KAAKunJ,WAAYoC,EAAQ5uG,WAAY8hG,EAAWU,qBAAsB3vE,SAiB3FqvE,EAAW37I,UAAUsoJ,YAAc,SAAW53H,EAAO7oB,QAErCxI,IAAVwI,SAEwBxI,IAAxBqxB,EAAMo1H,KAAMj+I,KAEhB6oB,EAAMo1H,KAAMj+I,GAAU6oB,EAAMq1H,KAAMl+I,GAAU,GAI7C6oB,EAAMo1H,KAAMj+I,OAKb8zI,EAAW37I,UAAUwoJ,YAAc,SAAW93H,EAAO7oB,EAAO+X,GAE3D,GAAK8Q,EAAMo1H,KAAMj+I,IAAW,EAAI,OAAO+X,EAEvC,IAAI6oI,EAAM7oI,EAAO1K,QAIjB,OAFAuzI,EAAI5oJ,MAAQ,aAAiB6wB,EAAMq1H,KAAMl+I,KAElC4gJ,GAIR9M,EAAW37I,UAAU0oJ,WAAa,SAAW/tD,GAE5C,IAAIlhD,EAAa/7C,OAAOizB,OAAQjyB,KAAK28I,SACrC5hG,EAAW58C,KAAM6B,MAEjB,IAAM,IAAImK,EAAI,EAAGA,EAAI4wC,EAAW1xC,OAAQc,IAAO,CAE9C,IAAI5F,EAAS03F,EAAMlhD,EAAY5wC,IAE/B,GAAK5F,EAAS,OAAOA,IAMvB04I,EAAW37I,UAAU2oJ,WAAa,SAAWhuD,GAE5C,IAAIlhD,EAAa/7C,OAAOizB,OAAQjyB,KAAK28I,SACrC5hG,EAAWkW,QAASjxD,MAIpB,IAFA,IAAIs/H,EAAU,GAEJn1H,EAAI,EAAGA,EAAI4wC,EAAW1xC,OAAQc,IAEvCm1H,EAAQnhI,KAAM89F,EAAMlhD,EAAY5wC,KAIjC,OAAOtH,QAAQw0I,IAAK/X,IAUrB2d,EAAW37I,UAAU8hJ,cAAgB,SAAWtkJ,EAAMqK,GAErD,IAAI27D,EAAWhmE,EAAO,IAAMqK,EACxB+gJ,EAAalqJ,KAAKgyB,MAAMhwB,IAAK8iE,GAEjC,IAAOolF,EAAa,CAEnB,OAASprJ,GAER,IAAK,QACJorJ,EAAalqJ,KAAKmqJ,UAAWhhJ,GAC7B,MAED,IAAK,OACJ+gJ,EAAalqJ,KAAKoqJ,SAAUjhJ,GAC5B,MAED,IAAK,OACJ+gJ,EAAalqJ,KAAKgqJ,YAAY,SAAWK,GAExC,OAAOA,EAAIC,UAAYD,EAAIC,SAAUnhJ,MAGtC,MAED,IAAK,WACJ+gJ,EAAalqJ,KAAKuqJ,aAAcphJ,GAChC,MAED,IAAK,aACJ+gJ,EAAalqJ,KAAKgqJ,YAAY,SAAWK,GAExC,OAAOA,EAAIG,gBAAkBH,EAAIG,eAAgBrhJ,MAGlD,MAED,IAAK,SACJ+gJ,EAAalqJ,KAAKyqJ,WAAYthJ,GAC9B,MAED,IAAK,WACJ+gJ,EAAalqJ,KAAKgqJ,YAAY,SAAWK,GAExC,OAAOA,EAAIK,cAAgBL,EAAIK,aAAcvhJ,MAG9C,MAED,IAAK,UACJ+gJ,EAAalqJ,KAAKgqJ,YAAY,SAAWK,GAExC,OAAOA,EAAI1oC,aAAe0oC,EAAI1oC,YAAax4G,MAG5C,MAED,IAAK,OACJ+gJ,EAAalqJ,KAAK2qJ,SAAUxhJ,GAC5B,MAED,IAAK,YACJ+gJ,EAAalqJ,KAAK4qJ,cAAezhJ,GACjC,MAED,IAAK,SACJ+gJ,EAAalqJ,KAAK6qJ,WAAY1hJ,GAC9B,MAED,IAAK,QACJ+gJ,EAAalqJ,KAAK+6C,WAAY8hG,EAAWU,qBAAsBoB,UAAWx1I,GAC1E,MAED,QACC,MAAM,IAAImF,MAAO,iBAAmBxP,GAItCkB,KAAKgyB,MAAM/Q,IAAK6jD,EAAUolF,GAI3B,OAAOA,GASRjN,EAAW37I,UAAUynJ,gBAAkB,SAAWjqJ,GAEjD,IAAIkqJ,EAAehpJ,KAAKgyB,MAAMhwB,IAAKlD,GAEnC,IAAOkqJ,EAAe,CAErB,IAAInoC,EAAS7gH,KACT8qJ,EAAO9qJ,KAAK+1G,KAAMj3G,GAAkB,SAATA,EAAkB,KAAO,OAAW,GAEnEkqJ,EAAenmJ,QAAQw0I,IAAKyT,EAAKzmH,KAAK,SAAW0mH,EAAK5hJ,GAErD,OAAO03G,EAAOuiC,cAAetkJ,EAAMqK,OAIpCnJ,KAAKgyB,MAAM/Q,IAAKniB,EAAMkqJ,GAIvB,OAAOA,GASR/L,EAAW37I,UAAUmpJ,WAAa,SAAWO,GAE5C,IAAIC,EAAYjrJ,KAAK+1G,KAAKt0D,QAASupG,GAC/BhuC,EAASh9G,KAAKk9I,WAElB,GAAK+N,EAAUnsJ,MAA2B,gBAAnBmsJ,EAAUnsJ,KAEhC,MAAM,IAAIwP,MAAO,qBAAuB28I,EAAUnsJ,KAAO,kCAK1D,QAAuB6B,IAAlBsqJ,EAAUC,KAAqC,IAAhBF,EAEnC,OAAOnoJ,QAAQ+6G,QAAS59G,KAAK+6C,WAAY8hG,EAAWC,iBAAkBnF,MAIvE,IAAI75I,EAAUkC,KAAKlC,QAEnB,OAAO,IAAI+E,SAAS,SAAW+6G,EAASC,GAEvCb,EAAOU,KAAMd,EAAYquC,EAAUC,IAAKptJ,EAAQmjE,MAAQ28C,OAASj9G,GAAW,WAE3Ek9G,EAAQ,IAAIvvG,MAAO,4CAA8C28I,EAAUC,IAAM,cAapFjO,EAAW37I,UAAUkpJ,eAAiB,SAAWhI,GAEhD,IAAI2I,EAAgBnrJ,KAAK+1G,KAAKq1C,YAAa5I,GAE3C,OAAOxiJ,KAAKojJ,cAAe,SAAU+H,EAActpG,QAASikC,MAAM,SAAWjkC,GAE5E,IAAIu0F,EAAa+U,EAAc/U,YAAc,EACzC0K,EAAaqK,EAAcrK,YAAc,EAC7C,OAAOj/F,EAAOtkD,MAAOujJ,EAAYA,EAAa1K,OAWhD6G,EAAW37I,UAAUipJ,aAAe,SAAW3C,GAE9C,IAAI/mC,EAAS7gH,KACT+1G,EAAO/1G,KAAK+1G,KAEZitC,EAAchjJ,KAAK+1G,KAAKktC,UAAW2E,GAEvC,QAAgCjnJ,IAA3BqiJ,EAAYP,iBAAmD9hJ,IAAvBqiJ,EAAYqI,OAKxD,OAAOxoJ,QAAQ+6G,QAAS,MAIzB,IAAI0tC,EAAqB,GAmBzB,YAjBgC3qJ,IAA3BqiJ,EAAYP,WAEhB6I,EAAmBntJ,KAAM6B,KAAKojJ,cAAe,aAAcJ,EAAYP,aAIvE6I,EAAmBntJ,KAAM,WAIEwC,IAAvBqiJ,EAAYqI,SAEhBC,EAAmBntJ,KAAM6B,KAAKojJ,cAAe,aAAcJ,EAAYqI,OAAOn6G,QAAQuxG,aACtF6I,EAAmBntJ,KAAM6B,KAAKojJ,cAAe,aAAcJ,EAAYqI,OAAOp5H,OAAOwwH,cAI/E5/I,QAAQw0I,IAAKiU,GAAqBxlE,MAAM,SAAWslE,GAEzD,IAWW3/B,EAXPg3B,EAAa2I,EAAa,GAE1BjjH,EAAW28G,EAAkB9B,EAAYlkJ,MACzCysJ,EAAapI,EAAuBH,EAAYE,eAGhDsI,EAAeD,EAAWjpG,kBAC1BmpG,EAAYD,EAAerjH,EAC3B24G,EAAakC,EAAYlC,YAAc,EACvC4K,OAAwC/qJ,IAA3BqiJ,EAAYP,WAA2B1sC,EAAKq1C,YAAapI,EAAYP,YAAaiJ,gBAAa/qJ,EAC5G6gC,GAAwC,IAA3BwhH,EAAYxhH,WAI7B,GAAKkqH,GAAcA,IAAeD,EAAY,CAI7C,IAAIE,EAAUtuJ,KAAKqL,MAAOo4I,EAAa4K,GACnCE,EAAa,qBAAuB5I,EAAYP,WAAa,IAAMO,EAAYE,cAAgB,IAAMyI,EAAU,IAAM3I,EAAYtiI,MACjI60E,EAAKsrB,EAAO7uF,MAAMhwB,IAAK4pJ,GAEpBr2D,IAKNA,EAAK,IAAIJ,GAHD,IAAIo2D,EAAY9I,EAAYkJ,EAAUD,EAAY1I,EAAYtiI,MAAQgrI,EAAaF,GAGxDE,EAAaF,GAEhD3qC,EAAO7uF,MAAM/Q,IAAK2qI,EAAYr2D,IAI/Bk2B,EAAkB,IAAIh2B,GAA4BF,EAAIptD,EAAY24G,EAAa4K,EAAeF,EAAchqH,QAc5GiqF,EAAkB,IAAIvjF,GAVF,OAAfu6G,EAEI,IAAI8I,EAAYvI,EAAYtiI,MAAQynB,GAIpC,IAAIojH,EAAY9I,EAAY3B,EAAYkC,EAAYtiI,MAAQynB,GAIvBA,EAAU3G,GAKzD,QAA4B7gC,IAAvBqiJ,EAAYqI,OAAuB,CAEvC,IAAIQ,EAAkB/G,EAAiBC,OACnC+G,EAAoB3I,EAAuBH,EAAYqI,OAAOn6G,QAAQgyG,eAEtE6I,EAAoB/I,EAAYqI,OAAOn6G,QAAQ4vG,YAAc,EAC7DkL,EAAmBhJ,EAAYqI,OAAOp5H,OAAO6uH,YAAc,EAE3DmL,EAAgB,IAAIH,EAAmBV,EAAa,GAAKW,EAAmB/I,EAAYqI,OAAO3qI,MAAQmrI,GACvGK,EAAe,IAAIX,EAAYH,EAAa,GAAKY,EAAkBhJ,EAAYqI,OAAO3qI,MAAQynB,GAE9E,OAAfs6G,IAGJh3B,EAAkB,IAAIvjF,GAAiBujF,EAAgBvhH,MAAM3M,QAASkuH,EAAgBtjF,SAAUsjF,EAAgBjqF,aAIjH,IAAM,IAAIr3B,EAAI,EAAG0W,EAAKorI,EAAc5iJ,OAAQc,EAAI0W,EAAI1W,IAAO,CAE1D,IAAIhB,EAAQ8iJ,EAAe9hJ,GAM3B,GAJAshH,EAAgBhhF,KAAMthC,EAAO+iJ,EAAc/hJ,EAAIg+B,IAC1CA,GAAY,GAAIsjF,EAAgB/gF,KAAMvhC,EAAO+iJ,EAAc/hJ,EAAIg+B,EAAW,IAC1EA,GAAY,GAAIsjF,EAAgB9gF,KAAMxhC,EAAO+iJ,EAAc/hJ,EAAIg+B,EAAW,IAC1EA,GAAY,GAAIsjF,EAAgB7gF,KAAMzhC,EAAO+iJ,EAAc/hJ,EAAIg+B,EAAW,IAC1EA,GAAY,EAAI,MAAM,IAAI75B,MAAO,sEAMxC,OAAOm9G,MAWTwxB,EAAW37I,UAAUqgH,YAAc,SAAWu+B,GAE7C,IAQI52I,EAYA0zG,EAnBAjH,EAAO/1G,KAAK+1G,KACZj4G,EAAUkC,KAAKlC,QAEfqiJ,EAAapqC,EAAKl/F,SAAUqpI,GAE5BiM,EAAoBhM,EAAWplG,YAAc,GA8BjD,OAxBCzxC,EAFI6iJ,EAAmBtP,EAAWkB,kBAEzBhoC,EAAK9+F,OAAQk1I,EAAmBtP,EAAWkB,kBAAmBz0I,QAI9DysG,EAAK9+F,OAAQkpI,EAAW72I,SAMtB4hJ,MAEXluC,EAASl/G,EAAQw/G,QAAQJ,WAAY5zG,EAAO4hJ,MAItCluC,IAENA,EAASmvC,EAAmBtP,EAAWkB,kBA9B3B/9I,KA+BF+6C,WAAY8hG,EAAWkB,kBAAmBpC,UACjD37I,KAAKwnJ,eAIFxnJ,KAAKogJ,iBAAkBF,EAAc52I,EAAQ0zG,IAIrDigC,EAAW37I,UAAU8+I,iBAAmB,SAAWF,EAAc52I,EAAQ0zG,GAExE,IAAI6D,EAAS7gH,KACT+1G,EAAO/1G,KAAK+1G,KACZj4G,EAAUkC,KAAKlC,QAEfqiJ,EAAapqC,EAAKl/F,SAAUqpI,GAE5BtI,EAAMtxI,KAAKsxI,KAAOtxI,KAAK8lJ,UAEvBC,EAAY/iJ,EAAO4hJ,IACnBoB,GAAc,EACdC,GAAW,EA0Bf,MAxByB,eAApBjjJ,EAAO+2G,WAA4BksC,GAAW,QAExB5rJ,IAAtB2I,EAAOm5I,aAIX4J,EAAYxrC,EAAOuiC,cAAe,aAAc95I,EAAOm5I,YAAa38D,MAAM,SAAW28D,GAE3D,cAApBn5I,EAAO+2G,WAGXksC,EAAsE,IAA3D,IAAIr7C,SAAUuxC,EAAY,GAAI,GAAI+J,SAAU,GAAG,IAI3DF,GAAc,EACd,IAAI/8B,EAAO,IAAI3O,KAAM,CAAE6hC,GAAc,CAAE3jJ,KAAMwK,EAAO+2G,WAEpD,OADAgsC,EAAYzU,EAAIC,gBAAiBtoB,OAO5B1sH,QAAQ+6G,QAASyuC,GAAYvmE,MAAM,SAAWumE,GAEpD,OAAO,IAAIxpJ,SAAS,SAAW+6G,EAASC,GAEvC,IAAI7B,EAAS4B,GAEuB,IAA/BZ,EAAOqS,sBAEXrT,EAAS,SAAWwT,GAEnB5R,EAAS,IAAIjiB,GAAe6zB,MAM9BxS,EAAOU,KAAMd,EAAYyvC,EAAWvuJ,EAAQmjE,MAAQ+6C,OAAQr7G,EAAWk9G,SAIrE/3B,MAAM,SAAW5sE,IAIC,IAAhBozI,GAEJ1U,EAAI6U,gBAAiBJ,GAItBnzI,EAAQlD,OAAQ,EAEXmqI,EAAWh/I,OAAO+X,EAAQ/X,KAAOg/I,EAAWh/I,MAG1CorJ,IAAWrzI,EAAQ9D,OA3qlDX,MA6qlDf,IACIs3I,GADW32C,EAAK42C,UAAY,IACRxM,EAAWuM,UAAa,GAYhD,OAVAxzI,EAAQhE,UAAYivI,EAAeuI,EAAQx3I,YAhslDzB,KAislDlBgE,EAAQ/D,UAAYgvI,EAAeuI,EAAQv3I,YA/rlDb,KAgslD9B+D,EAAQlE,MAAQ0vI,EAAiBgI,EAAQ13I,QAxslDrB,IAyslDpBkE,EAAQjE,MAAQyvI,EAAiBgI,EAAQz3I,QAzslDrB,IA2slDpB4rG,EAAOomC,aAAapmJ,IAAKqY,EAAS,CACjCpa,KAAM,WACNqK,MAAO+2I,IAGDhnI,MAaT+jI,EAAW37I,UAAUm+I,cAAgB,SAAWN,EAAgByN,EAASC,GAExE,IAAIhsC,EAAS7gH,KAEb,OAAOA,KAAKojJ,cAAe,UAAWyJ,EAAO1jJ,OAAQ28E,MAAM,SAAW5sE,GAUrE,QANyBvY,IAApBksJ,EAAOvJ,UAA6C,GAAnBuJ,EAAOvJ,UAAiC,UAAZsJ,GAA0C,GAAnBC,EAAOvJ,UAE/FhlJ,QAAQC,KAAM,mCAAqCsuJ,EAAOvJ,SAAW,gBAAkBsJ,EAAU,uBAI7F/rC,EAAO9lE,WAAY8hG,EAAWoB,uBAA0B,CAE5D,IAAIx2D,OAAkC9mF,IAAtBksJ,EAAO9xG,WAA2B8xG,EAAO9xG,WAAY8hG,EAAWoB,4BAA0Bt9I,EAE1G,GAAK8mF,EAAY,CAEhB,IAAIqlE,EAAgBjsC,EAAOomC,aAAajlJ,IAAKkX,GAC7CA,EAAU2nG,EAAO9lE,WAAY8hG,EAAWoB,uBAAwBoF,cAAenqI,EAASuuE,GACxFo5B,EAAOomC,aAAapmJ,IAAKqY,EAAS4zI,IAMpC3N,EAAgByN,GAAY1zI,MAc9B+jI,EAAW37I,UAAUyrJ,oBAAsB,SAAWr2G,GAErD,IAAIh1B,EAAWg1B,EAAKh1B,SAChBmQ,EAAW6kB,EAAK7kB,SAEhBm7H,OAAoDrsJ,IAAhC+gB,EAASthB,WAAW6tC,QACxCg/G,OAAgDtsJ,IAA9B+gB,EAASthB,WAAWigC,MACtC6sH,OAAgDvsJ,IAA/B+gB,EAASthB,WAAWqf,OACrCuzD,GAAqC,IAAvBt8B,EAAKnD,cACnB45G,EAAkBnuJ,OAAOuyC,KAAM7vB,EAAS2rB,iBAAkBhkC,OAAS,EACnE+jJ,EAAkBD,QAAuDxsJ,IAApC+gB,EAAS2rB,gBAAgB5tB,OAElE,GAAKi3B,EAAKhlB,SAAW,CAEpB,IAAIozC,EAAW,kBAAoBjzC,EAAStc,KAExC83I,EAAiBrtJ,KAAKgyB,MAAMhwB,IAAK8iE,GAE9BuoF,IAENA,EAAiB,IAAIxiF,GACrB9oC,GAASzgC,UAAUmV,KAAK9Q,KAAM0nJ,EAAgBx7H,GAC9Cw7H,EAAehtH,MAAM5pB,KAAMob,EAASwO,OACpCgtH,EAAehpH,IAAMxS,EAASwS,IAC9BgpH,EAAe7lH,iBAAkB,EAEjCxnC,KAAKgyB,MAAM/Q,IAAK6jD,EAAUuoF,IAI3Bx7H,EAAWw7H,OAEL,GAAK32G,EAAKjlB,OAAS,CAErBqzC,EAAW,qBAAuBjzC,EAAStc,KAA/C,IAEI+3I,EAAettJ,KAAKgyB,MAAMhwB,IAAK8iE,GAE5BwoF,IAENA,EAAe,IAAI3iF,GACnB5oC,GAASzgC,UAAUmV,KAAK9Q,KAAM2nJ,EAAcz7H,GAC5Cy7H,EAAajtH,MAAM5pB,KAAMob,EAASwO,OAElCrgC,KAAKgyB,MAAM/Q,IAAK6jD,EAAUwoF,IAI3Bz7H,EAAWy7H,EAKZ,GAAKN,GAAqBC,GAAmBC,GAAkBl6E,GAAem6E,EAAkB,CAE3FroF,EAAW,kBAAoBjzC,EAAStc,KAAO,IAE9Csc,EAASmvH,mCAAmCl8E,GAAY,wBACxDkO,IAAclO,GAAY,aAC1BkoF,IAAoBloF,GAAY,oBAChCmoF,IAAkBnoF,GAAY,kBAC9BooF,IAAiBpoF,GAAY,iBAC7BqoF,IAAkBroF,GAAY,kBAC9BsoF,IAAkBtoF,GAAY,kBAEnC,IAAI6O,EAAiB3zE,KAAKgyB,MAAMhwB,IAAK8iE,GAE9B6O,IAENA,EAAiB9hD,EAASrb,QAErBw8D,IAAcW,EAAevuC,UAAW,GACxC4nH,IAAoBr5E,EAAepM,gBAAiB,GACpD0lF,IAAkBt5E,EAAe9xC,cAAe,GAChDqrH,IAAiBv5E,EAAexxC,aAAc,GAC9CgrH,IAAkBx5E,EAAetuC,cAAe,GAChD+nH,IAAkBz5E,EAAe/rC,cAAe,GAErD5nC,KAAKgyB,MAAM/Q,IAAK6jD,EAAU6O,GAE1B3zE,KAAKinJ,aAAapmJ,IAAK8yE,EAAgB3zE,KAAKinJ,aAAajlJ,IAAK6vB,KAI/DA,EAAW8hD,EAMP9hD,EAAS2S,YAAqC7jC,IAA5B+gB,EAASthB,WAAW00B,UAAgDn0B,IAA3B+gB,EAASthB,WAAWkX,IAEnFoK,EAAS/d,aAAc,MAAO+d,EAASthB,WAAWkX,IAK9Cua,EAASkV,cAAiBimH,IAE9Bn7H,EAASkV,YAAYl7B,GAAMgmB,EAASkV,YAAYl7B,GAI5CgmB,EAAS4U,uBAA0BumH,IAEvCn7H,EAAS4U,qBAAqB56B,GAAMgmB,EAAS4U,qBAAqB56B,GAInE6qC,EAAK7kB,SAAWA,GAIjBorH,EAAW37I,UAAU29I,gBAAkB,WAEtC,OAAOz0E,IASRyyE,EAAW37I,UAAUopJ,aAAe,SAAW/oH,GAE9C,IAKI4rH,EALA1sC,EAAS7gH,KACT+1G,EAAO/1G,KAAK+1G,KACZh7D,EAAa/6C,KAAK+6C,WAClBqkG,EAAcrpC,EAAK9kF,UAAW0Q,GAG9Bw9G,EAAiB,GACjBqO,EAAqBpO,EAAYrkG,YAAc,GAE/CukF,EAAU,GAEd,GAAKkuB,EAAoB3Q,EAAWc,uCAA0C,CAE7E,IAAI8P,EAAc1yG,EAAY8hG,EAAWc,uCACzC4P,EAAeE,EAAYxO,kBAC3B3f,EAAQnhI,KAAMsvJ,EAAYvO,aAAcC,EAAgBC,EAAav+B,SAE/D,GAAK2sC,EAAoB3Q,EAAWY,qBAAwB,CAElE,IAAIiQ,EAAe3yG,EAAY8hG,EAAWY,qBAC1C8P,EAAeG,EAAazO,kBAC5B3f,EAAQnhI,KAAMuvJ,EAAaxO,aAAcC,EAAgBC,EAAav+B,QAEhE,CAKN,IAAIw+B,EAAoBD,EAAYE,sBAAwB,GAK5D,GAHAH,EAAe9+G,MAAQ,IAAIX,GAAO,EAAK,EAAK,GAC5Cy/G,EAAe/8G,QAAU,EAEpBnjC,MAAMkY,QAASkoI,EAAkBE,iBAAoB,CAEzD,IAAIr1I,EAAQm1I,EAAkBE,gBAE9BJ,EAAe9+G,MAAM1vB,UAAWzG,GAChCi1I,EAAe/8G,QAAUl4B,EAAO,QAIWvJ,IAAvC0+I,EAAkBG,kBAEtBlgB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,MAAOE,EAAkBG,mBAI9EL,EAAer5G,eAAiDnlC,IAArC0+I,EAAkBsO,eAA+BtO,EAAkBsO,eAAiB,EAC/GxO,EAAet5G,eAAkDllC,IAAtC0+I,EAAkBuO,gBAAgCvO,EAAkBuO,gBAAkB,OAE7DjtJ,IAA/C0+I,EAAkBwO,2BAEtBvuB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,eAAgBE,EAAkBwO,2BACtFvuB,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,eAAgBE,EAAkBwO,4BAIvFN,EAAevtJ,KAAKgqJ,YAAY,SAAWK,GAE1C,OAAOA,EAAIpL,iBAAmBoL,EAAIpL,gBAAiBt9G,MAIpD29F,EAAQnhI,KAAM6B,KAAKiqJ,YAAY,SAAWI,GAEzC,OAAOA,EAAI3K,sBAAwB2K,EAAI3K,qBAAsB/9G,EAAew9G,QAM7C,IAA5BC,EAAY13E,cAEhBy3E,EAAej9G,KAhgmDC,GAogmDjB,IAAI4rH,EAAY1O,EAAY0O,WAAa1H,EA2DzC,OAzDK0H,IAAc1H,GAElBjH,EAAe98G,aAAc,EAG7B88G,EAAer8G,YAAa,IAI5Bq8G,EAAe98G,aAAc,EAExByrH,IAAc1H,IAElBjH,EAAel7G,eAAwCtjC,IAA5By+I,EAAY2O,YAA4B3O,EAAY2O,YAAc,UAM5DptJ,IAA9By+I,EAAY4O,eAA+BT,IAAiBnpH,KAEhEk7F,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,YAAaC,EAAY4O,gBAE7E7O,EAAep4G,YAAc,IAAI74B,EAAS,EAAG,QAEJvN,IAApCy+I,EAAY4O,cAAc3jI,OAE9B80H,EAAep4G,YAAYlmC,IAAKu+I,EAAY4O,cAAc3jI,MAAO+0H,EAAY4O,cAAc3jI,aAMvD1pB,IAAjCy+I,EAAY6O,kBAAkCV,IAAiBnpH,KAEnEk7F,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,QAASC,EAAY6O,wBAE1BttJ,IAA1Cy+I,EAAY6O,iBAAiBC,WAEjC/O,EAAe16G,eAAiB26G,EAAY6O,iBAAiBC,gBAM3BvtJ,IAA/By+I,EAAY+O,gBAAgCZ,IAAiBnpH,KAEjE+6G,EAAen5G,UAAW,IAAItG,IAAQ/uB,UAAWyuI,EAAY+O,sBAIzBxtJ,IAAhCy+I,EAAYgP,iBAAiCb,IAAiBnpH,IAElEk7F,EAAQnhI,KAAM0iH,EAAO4+B,cAAeN,EAAgB,cAAeC,EAAYgP,kBAIzEvrJ,QAAQw0I,IAAK/X,GAAUx5C,MAAM,WAEnC,IAAIj0D,EAwBJ,OApBCA,EAFI07H,IAAiBxM,EAEVhmG,EAAY8hG,EAAWc,uCAAwCyE,eAAgBjD,GAI/E,IAAIoO,EAAcpO,GAIzBC,EAAYj+I,OAAO0wB,EAAS1wB,KAAOi+I,EAAYj+I,MAG/C0wB,EAASwS,MAAMxS,EAASwS,IAAI/uB,SAp8lDf,MAq8lDbuc,EAASwV,cAAcxV,EAASwV,YAAY/xB,SAr8lD/B,MAu8lDlBoxI,EAAwB70H,EAAUutH,GAElCv+B,EAAOomC,aAAapmJ,IAAKgxB,EAAU,CAAE/yB,KAAM,YAAaqK,MAAOw4B,IAE1Dy9G,EAAYrkG,YAAaurG,EAAgCvrG,EAAYlpB,EAAUutH,GAE7EvtH,MA0QTorH,EAAW37I,UAAU+sJ,eAAiB,SAAWC,GAEhD,IAAIztC,EAAS7gH,KACT+6C,EAAa/6C,KAAK+6C,WAClB/oB,EAAQhyB,KAAKknJ,eAEjB,SAASqH,EAAsBhM,GAE9B,OAAOxnG,EAAY8hG,EAAWgB,4BAC5ByE,gBAAiBC,EAAW1hC,GAC5B/6B,MAAM,SAAWpkE,GAEjB,OAAO+lI,EAAwB/lI,EAAU6gI,EAAW1hC,MAQvD,IAFA,IA1zC4B6mC,EAExB8G,EAwzCAlvB,EAAU,GAEJn1H,EAAI,EAAG0W,EAAKytI,EAAWjlJ,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,IAaKskJ,EAbDlM,EAAY+L,EAAYnkJ,GACxB26D,GA7zCD0pF,OAAAA,GAAAA,GAFwB9G,EA+zCQnF,GA7zCFxnG,YAAc2sG,EAAa3sG,WAAY8hG,EAAWgB,6BAKrE,SAAW2Q,EAAe/L,WACrC,IAAM+L,EAAet9G,QACrB,IAAM61G,EAAqByH,EAAepuJ,YAI/BsnJ,EAAax2G,QAAU,IAAM61G,EAAqBW,EAAatnJ,YAAe,IAAMsnJ,EAAaxyF,MAqzC3GlT,EAAShwB,EAAO8yC,GAEpB,GAAK9iB,EAGJs9E,EAAQnhI,KAAM6jD,EAAOm0F,cASpBsY,EAHIlM,EAAUxnG,YAAcwnG,EAAUxnG,WAAY8hG,EAAWgB,4BAG3C0Q,EAAsBhM,GAKtBkF,EAAwB,IAAIr6G,GAAkBm1G,EAAW1hC,GAK5E7uF,EAAO8yC,GAAa,CAAEy9E,UAAWA,EAAWpM,QAASsY,GAErDnvB,EAAQnhI,KAAMswJ,GAMhB,OAAO5rJ,QAAQw0I,IAAK/X,IASrB2d,EAAW37I,UAAUgpJ,SAAW,SAAWoE,GAU1C,IARA,IAAI7tC,EAAS7gH,KAGT6mJ,EAFO7mJ,KAAK+1G,KAEGwzC,OAAQmF,GACvBJ,EAAazH,EAAQyH,WAErBhvB,EAAU,GAEJn1H,EAAI,EAAG0W,EAAKytI,EAAWjlJ,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,IAAI0nB,OAAwClxB,IAA7B2tJ,EAAYnkJ,GAAI0nB,SAC5Bw0H,EAAuBrmJ,KAAKgyB,OAC5BhyB,KAAKojJ,cAAe,WAAYkL,EAAYnkJ,GAAI0nB,UAEnDytG,EAAQnhI,KAAM0zB,GAMf,OAFAytG,EAAQnhI,KAAM0iH,EAAOwtC,eAAgBC,IAE9BzrJ,QAAQw0I,IAAK/X,GAAUx5C,MAAM,SAAW6xC,GAO9C,IALA,IAAI1mG,EAAY0mG,EAAQp6H,MAAO,EAAGo6H,EAAQtuH,OAAS,GAC/C2nB,EAAa2mG,EAASA,EAAQtuH,OAAS,GAEvCkgJ,EAAS,GAEHp/I,EAAI,EAAG0W,EAAKmQ,EAAW3nB,OAAQc,EAAI0W,EAAI1W,IAAO,CAEvD,IAKIusC,EALAh1B,EAAWsP,EAAY7mB,GACvBo4I,EAAY+L,EAAYnkJ,GAMxB0nB,EAAWZ,EAAW9mB,GAE1B,GAAKo4I,EAAUrtF,OAAS0uF,GACvBrB,EAAUrtF,OAAS0uF,GACnBrB,EAAUrtF,OAAS0uF,QACAjjJ,IAAnB4hJ,EAAUrtF,MAOkB,KAJ5Bxe,GAAiC,IAA1BmwG,EAAQtzG,cACZ,IAAI4jD,GAAaz1E,EAAUmQ,GAC3B,IAAI+gB,GAAMlxB,EAAUmQ,IAEb0hB,eAA4BmD,EAAKh1B,SAASthB,WAAWy3F,WAAWr2D,YAIzEkV,EAAKkhD,uBAID2qD,EAAUrtF,OAAS0uF,EAEvBltG,EAAKh1B,SAAWgnI,EAAqBhyG,EAAKh1B,SAz1mDlB,GA21mDb6gI,EAAUrtF,OAAS0uF,IAE9BltG,EAAKh1B,SAAWgnI,EAAqBhyG,EAAKh1B,SA51mDpB,SAg2mDjB,GAAK6gI,EAAUrtF,OAAS0uF,EAE9BltG,EAAO,IAAIgkD,GAAch5E,EAAUmQ,QAE7B,GAAK0wH,EAAUrtF,OAAS0uF,EAE9BltG,EAAO,IAAImjD,GAAMn4E,EAAUmQ,QAErB,GAAK0wH,EAAUrtF,OAAS0uF,EAE9BltG,EAAO,IAAIikD,GAAUj5E,EAAUmQ,OAEzB,CAAA,GAAK0wH,EAAUrtF,OAAS0uF,EAM9B,MAAM,IAAIt1I,MAAO,iDAAmDi0I,EAAUrtF,MAJ9Exe,EAAO,IAAIskD,GAAQt5E,EAAUmQ,GAQzB7yB,OAAOuyC,KAAMmF,EAAKh1B,SAAS2rB,iBAAkBhkC,OAAS,GAE1DwpC,EAAoB6D,EAAMmwG,GAI3BnwG,EAAKv1C,KAAO0lJ,EAAQ1lJ,MAAU,QAAUutJ,EAEnC19H,EAAW3nB,OAAS,IAAIqtC,EAAKv1C,MAAQ,IAAMgJ,GAEhDu8I,EAAwBhwG,EAAMmwG,GAE9BhmC,EAAOksC,oBAAqBr2G,GAE5B6yG,EAAOprJ,KAAMu4C,GAId,GAAuB,IAAlB6yG,EAAOlgJ,OAEX,OAAOkgJ,EAAQ,GAIhB,IAAI19G,EAAQ,IAAIg3C,GAEhB,IAAU14E,EAAI,EAAG0W,EAAK0oI,EAAOlgJ,OAAQc,EAAI0W,EAAI1W,IAE5C0hC,EAAM5qB,IAAKsoI,EAAQp/I,IAIpB,OAAO0hC,MAWToxG,EAAW37I,UAAUupJ,WAAa,SAAW8D,GAE5C,IAAIrwI,EACAswI,EAAY5uJ,KAAK+1G,KAAKtoC,QAASkhF,GAC/B50D,EAAS60D,EAAWA,EAAU9vJ,MAElC,GAAOi7F,EAqBP,MAdwB,gBAAnB60D,EAAU9vJ,KAEdwf,EAAS,IAAIm9B,GAAmBlxC,EAAUmC,SAAUqtF,EAAO80D,MAAQ90D,EAAO+0D,aAAe,EAAG/0D,EAAOg1D,OAAS,EAAGh1D,EAAOi1D,MAAQ,KAEhG,iBAAnBJ,EAAU9vJ,OAErBwf,EAAS,IAAI8oG,IAAsBrtB,EAAOk1D,KAAMl1D,EAAOk1D,KAAMl1D,EAAOm1D,MAAQn1D,EAAOm1D,KAAMn1D,EAAOg1D,MAAOh1D,EAAOi1D,OAI1GJ,EAAUztJ,OAAOmd,EAAOnd,KAAOytJ,EAAUztJ,MAE9CulJ,EAAwBpoI,EAAQswI,GAEzB/rJ,QAAQ+6G,QAASt/F,GAnBvBhgB,QAAQC,KAAM,iDA4BhB0+I,EAAW37I,UAAUqpJ,SAAW,SAAW3yD,GAE1C,IAAIm3D,EAAUnvJ,KAAK+1G,KAAKszC,MAAOrxD,GAE3Bo3D,EAAY,CAAE77D,OAAQ47D,EAAQ57D,QAElC,YAAqC5yF,IAAhCwuJ,EAAQE,oBAELxsJ,QAAQ+6G,QAASwxC,GAIlBpvJ,KAAKojJ,cAAe,WAAY+L,EAAQE,qBAAsBvpE,MAAM,SAAW+hE,GAIrF,OAFAuH,EAAUC,oBAAsBxH,EAEzBuH,MAWTnS,EAAW37I,UAAUspJ,cAAgB,SAAW0E,GAY/C,IAVA,IAEIC,EAFOvvJ,KAAK+1G,KAEQyE,WAAY80C,GAEhCE,EAAe,GACfC,EAAwB,GACxBC,EAAyB,GACzBC,EAAkB,GAClBC,EAAiB,GAEXzlJ,EAAI,EAAG0W,EAAK0uI,EAAaM,SAASxmJ,OAAQc,EAAI0W,EAAI1W,IAAO,CAElE,IAAIiiB,EAAUmjI,EAAaM,SAAU1lJ,GACjCuiJ,EAAU6C,EAAa5C,SAAUvgI,EAAQsgI,SACzC1jJ,EAASojB,EAAQpjB,OACjB7H,OAAuBR,IAAhBqI,EAAOguH,KAAqBhuH,EAAOguH,KAAOhuH,EAAOinB,GACxD6/H,OAAoCnvJ,IAA5B4uJ,EAAa59H,WAA2B49H,EAAa59H,WAAY+6H,EAAQoD,OAAUpD,EAAQoD,MACnG5mJ,OAAqCvI,IAA5B4uJ,EAAa59H,WAA2B49H,EAAa59H,WAAY+6H,EAAQxjJ,QAAWwjJ,EAAQxjJ,OAEzGsmJ,EAAarxJ,KAAM6B,KAAKojJ,cAAe,OAAQjiJ,IAC/CsuJ,EAAsBtxJ,KAAM6B,KAAKojJ,cAAe,WAAY0M,IAC5DJ,EAAuBvxJ,KAAM6B,KAAKojJ,cAAe,WAAYl6I,IAC7DymJ,EAAgBxxJ,KAAMuuJ,GACtBkD,EAAezxJ,KAAM6K,GAItB,OAAOnG,QAAQw0I,IAAK,CAEnBx0I,QAAQw0I,IAAKmY,GACb3sJ,QAAQw0I,IAAKoY,GACb5sJ,QAAQw0I,IAAKqY,GACb7sJ,QAAQw0I,IAAKsY,GACb9sJ,QAAQw0I,IAAKuY,KAEV9pE,MAAM,SAAWkjE,GAUpB,IARA,IAAIG,EAAQH,EAAc,GACtB+G,EAAiB/G,EAAc,GAC/BgH,EAAkBhH,EAAc,GAChC2D,EAAW3D,EAAc,GACzBjB,EAAUiB,EAAc,GAExB/2C,EAAS,GAEH9nG,EAAI,EAAG0W,EAAKsoI,EAAM9/I,OAAQc,EAAI0W,EAAI1W,IAAO,CAElD,IAAI6sH,EAAOmyB,EAAOh/I,GACd8lJ,EAAgBF,EAAgB5lJ,GAChC+lJ,EAAiBF,EAAiB7lJ,GAClCuiJ,EAAUC,EAAUxiJ,GACpBnB,EAAS++I,EAAS59I,GAEtB,QAAcxJ,IAATq2H,EAAL,CAKA,IAAIpd,EAEJ,OALAod,EAAK1gH,eACL0gH,EAAKnhH,kBAAmB,EAIfiwI,EAAiB98I,EAAOi4D,OAEhC,KAAK6kF,EAAgBte,QAEpB5tB,EAAqBrE,GACrB,MAED,KAAKuwC,EAAgBnyI,SAEpBimG,EAAqBnE,GACrB,MAED,KAAKqwC,EAAgB17H,SACrB,KAAK07H,EAAgBz7H,MACrB,QAECuvF,EAAqBjE,GAKvB,IAAIw6C,EAAan5B,EAAK71H,KAAO61H,EAAK71H,KAAO61H,EAAKzhH,KAE1Cy/F,OAA0Cr0G,IAA1B+rJ,EAAQ13C,cAA8BgxC,EAAe0G,EAAQ13C,eA9jnD3D,KAgknDlB8xC,EAAc,GAEbhB,EAAiB98I,EAAOi4D,QAAW6kF,EAAgBte,QAGvDxQ,EAAKtmG,UAAU,SAAWxP,IAEF,IAAlBA,EAAOsQ,QAAmBtQ,EAAOmyB,uBAErCyzG,EAAY3oJ,KAAM+iB,EAAO/f,KAAO+f,EAAO/f,KAAO+f,EAAO3L,SAQvDuxI,EAAY3oJ,KAAMgyJ,GAInB,IAAIC,EAAcF,EAAehmJ,MAEjC,GAAKgmJ,EAAe1uH,WAAa,CAEhC,IAAInX,EAEJ,GAAK+lI,EAAYltJ,cAAgBqlC,UAEhCle,EAAQ,EAAI,SAEN,GAAK+lI,EAAYltJ,cAAgBulC,WAEvCpe,EAAQ,EAAI,SAEN,GAAK+lI,EAAYltJ,aAAe2lC,WAEtCxe,EAAQ,EAAI,UAEN,CAAA,GAAK+lI,EAAYltJ,cAAgB6lC,YAMvC,MAAM,IAAIz6B,MAAO,iEAJjB+b,EAAQ,EAAI,MAUb,IAFA,IAAIgmI,EAAS,IAAIhnH,aAAc+mH,EAAY/mJ,QAEjCka,EAAI,EAAGmsB,EAAK0gH,EAAY/mJ,OAAQka,EAAImsB,EAAInsB,IAEjD8sI,EAAQ9sI,GAAM6sI,EAAa7sI,GAAM8G,EAIlC+lI,EAAcC,EAIf,IAAU9sI,EAAI,EAAGmsB,EAAKo3G,EAAYz9I,OAAQka,EAAImsB,EAAInsB,IAAO,CAExD,IAAI2uF,EAAQ,IAAI0H,EACfktC,EAAavjI,GAAM,IAAMuiI,EAAiB98I,EAAOi4D,MACjDgvF,EAAc/lJ,MACdkmJ,EACAp7C,GAI8B,gBAA1B03C,EAAQ13C,gBAEZ9C,EAAMkB,kBAAoB,SAAkD7uG,GAM3E,OAAO,IAAI89I,EAA4BriJ,KAAKoxG,MAAOpxG,KAAKiyB,OAAQjyB,KAAKoyG,eAAiB,EAAG7tG,IAK1F2tG,EAAMkB,kBAAkBC,2CAA4C,GAIrEpB,EAAO9zG,KAAM+zG,KAQf,OAAO,IAAI0D,GAFA25C,EAAapuJ,KAAOouJ,EAAapuJ,KAAO,aAAemuJ,OAElC3uJ,EAAWsxG,OAW7CgrC,EAAW37I,UAAU8oJ,SAAW,SAAWX,GAE1C,IAAI1zC,EAAO/1G,KAAK+1G,KACZh7D,EAAa/6C,KAAK+6C,WAClB8lE,EAAS7gH,KAET2pJ,EAAU5zC,EAAKozC,MAAOM,GAE1B,OAAS,WAER,IAAInqB,EAAU,GAyCd,QAvCsB3+H,IAAjBgpJ,EAAQjzG,MAEZ4oF,EAAQnhI,KAAM0iH,EAAOuiC,cAAe,OAAQuG,EAAQjzG,MAAOovC,MAAM,SAAWpvC,GAE3E,IAAIsgF,EAAOnW,EAAOipC,YAAajpC,EAAOsmC,UAAWwC,EAAQjzG,KAAMA,GAmB/D,YAhByB/1C,IAApBgpJ,EAAQniB,SAEZxQ,EAAKtmG,UAAU,SAAW69E,GAEzB,GAAOA,EAAE/8E,OAET,IAAM,IAAIrnB,EAAI,EAAG0W,EAAK8oI,EAAQniB,QAAQn+H,OAAQc,EAAI0W,EAAI1W,IAErDokG,EAAEl7D,sBAAuBlpC,GAAMw/I,EAAQniB,QAASr9H,MAQ5C6sH,WAMer2H,IAAnBgpJ,EAAQrrI,QAEZghH,EAAQnhI,KAAM0iH,EAAOuiC,cAAe,SAAUuG,EAAQrrI,QAASwnE,MAAM,SAAWxnE,GAE/E,OAAOuiG,EAAOipC,YAAajpC,EAAOymC,YAAaqC,EAAQrrI,OAAQA,OAM5DqrI,EAAQ5uG,YACT4uG,EAAQ5uG,WAAY8hG,EAAWU,2BACgC58I,IAA/DgpJ,EAAQ5uG,WAAY8hG,EAAWU,qBAAsB3vE,MAAsB,CAE9E,IAAIgxE,EAAa+K,EAAQ5uG,WAAY8hG,EAAWU,qBAAsB3vE,MAEtE0xD,EAAQnhI,KAAM0iH,EAAOuiC,cAAe,QAASxE,GAAa94D,MAAM,SAAWlY,GAE1E,OAAOizC,EAAOipC,YAAajpC,EAAO0mC,WAAY3I,EAAYhxE,OAM5D,OAAO/qE,QAAQw0I,IAAK/X,GAzDd,GA2DDx5C,MAAM,SAAWv2B,GAEtB,IAAIynE,EAqBJ,IAhBCA,GAFuB,IAAnB2yB,EAAQjxD,OAEL,IAAIF,GAEAjpC,EAAQlmD,OAAS,EAErB,IAAIw5E,GAEmB,IAAnBtzB,EAAQlmD,OAEZkmD,EAAS,GAIT,IAAIpiC,MAIEoiC,EAAS,GAEtB,IAAM,IAAIplD,EAAI,EAAG0W,EAAK0uC,EAAQlmD,OAAQc,EAAI0W,EAAI1W,IAE7C6sH,EAAK/1G,IAAKsuC,EAASplD,IAiBrB,GAXKw/I,EAAQxoJ,OAEZ61H,EAAK/oG,SAAS9sB,KAAOwoJ,EAAQxoJ,KAC7B61H,EAAK71H,KAAOu1H,GAAgBe,iBAAkBkyB,EAAQxoJ,OAIvDulJ,EAAwB1vB,EAAM2yB,GAEzBA,EAAQ5uG,YAAaurG,EAAgCvrG,EAAYi8E,EAAM2yB,QAEpDhpJ,IAAnBgpJ,EAAQj3I,OAAuB,CAEnC,IAAIA,EAAS,IAAI4U,GACjB5U,EAAO/B,UAAWg5I,EAAQj3I,QAC1BskH,EAAKz4G,aAAc7L,aAIU/R,IAAxBgpJ,EAAQ5D,aAEZ/uB,EAAK5sG,SAASzZ,UAAWg5I,EAAQ5D,kBAIRplJ,IAArBgpJ,EAAQh2I,UAEZqjH,EAAKz7G,WAAW5K,UAAWg5I,EAAQh2I,eAIbhT,IAAlBgpJ,EAAQt/H,OAEZ2sG,EAAK3sG,MAAM1Z,UAAWg5I,EAAQt/H,OAQhC,OAFAw2F,EAAOomC,aAAapmJ,IAAKm2H,EAAM,CAAEl4H,KAAM,QAASqK,MAAOsgJ,IAEhDzyB,MAWTimB,EAAW37I,UAAU6oJ,UAAY,WAIhC,SAASmG,EAAmBC,EAAQC,EAAcz6C,EAAM8K,GAEvD,IAAI8oC,EAAU5zC,EAAKozC,MAAOoH,GAE1B,OAAO1vC,EAAOuiC,cAAe,OAAQmN,GAASzqE,MAAM,SAAWkxC,GAE9D,YAAsBr2H,IAAjBgpJ,EAAQE,KAA4B7yB,EAMlCnW,EAAOuiC,cAAe,OAAQuG,EAAQE,MAAO/jE,MAAM,SAAW+jE,GAMpE,IAFA,IAAI4G,EAAgB,GAEVtmJ,EAAI,EAAG0W,GAJjBuuI,EAAYvF,GAIoBt2D,OAAOlqF,OAAQc,EAAI0W,EAAI1W,IAEtDsmJ,EAActyJ,KAAM0iH,EAAOuiC,cAAe,OAAQgM,EAAU77D,OAAQppF,KAIrE,OAAOtH,QAAQw0I,IAAKoZ,MAEjB3qE,MAAM,SAAW4qE,GAuCpB,OArCA15B,EAAKtmG,UAAU,SAAWgmB,GAEzB,GAAOA,EAAKllB,OAAZ,CAKA,IAHA,IAAI85C,EAAQ,GACR8sB,EAAe,GAET70E,EAAI,EAAGmsB,EAAKghH,EAAWrnJ,OAAQka,EAAImsB,EAAInsB,IAAO,CAEvD,IAAIotI,EAAYD,EAAYntI,GAE5B,GAAKotI,EAAY,CAEhBrlF,EAAMntE,KAAMwyJ,GAEZ,IAAIntC,EAAM,IAAIl8F,QAEyB3mB,IAAlCyuJ,EAAUC,qBAEd7rC,EAAI7yG,UAAWy+I,EAAUC,oBAAoBnlJ,MAAW,GAAJqZ,GAIrD60E,EAAaj6F,KAAMqlH,QAInBllH,QAAQC,KAAM,mDAAoD6wJ,EAAU77D,OAAQhwE,IAMtFmzB,EAAKghD,KAAM,IAAIa,GAAUjtB,EAAO8sB,GAAgB1hD,EAAK/3B,iBAI/Cq4G,KAvDR,IAAIo4B,KA2DDtpE,MAAM,SAAWkxC,GAIpBw5B,EAAavvI,IAAK+1G,GAElB,IAAIsI,EAAU,GAEd,GAAKqqB,EAAQ5nI,SAIZ,IAFA,IAAIA,EAAW4nI,EAAQ5nI,SAEb5X,EAAI,EAAG0W,EAAKkB,EAAS1Y,OAAQc,EAAI0W,EAAI1W,IAAO,CAErD,IAAIioB,EAAQrQ,EAAU5X,GACtBm1H,EAAQnhI,KAAMmyJ,EAAmBl+H,EAAO4kG,EAAMjhB,EAAM8K,IAMtD,OAAOh+G,QAAQw0I,IAAK/X,MAMtB,OAAO,SAAoBsxB,GAE1B,IAAI76C,EAAO/1G,KAAK+1G,KACZh7D,EAAa/6C,KAAK+6C,WAClB81G,EAAW7wJ,KAAK+1G,KAAKkzC,OAAQ2H,GAK7B9yG,EAAQ,IAAI+kC,GACXguE,EAAS1vJ,OAAO28C,EAAM38C,KAAO0vJ,EAAS1vJ,MAE3CulJ,EAAwB5oG,EAAO+yG,GAE1BA,EAAS91G,YAAaurG,EAAgCvrG,EAAY+C,EAAO+yG,GAM9E,IAJA,IAAIC,EAAUD,EAAS1H,OAAS,GAE5B7pB,EAAU,GAEJn1H,EAAI,EAAG0W,EAAKiwI,EAAQznJ,OAAQc,EAAI0W,EAAI1W,IAE7Cm1H,EAAQnhI,KAAMmyJ,EAAmBQ,EAAS3mJ,GAAK2zC,EAAOi4D,EAjB1C/1G,OAqBb,OAAO6C,QAAQw0I,IAAK/X,GAAUx5C,MAAM,WAEnC,OAAOhoC,MAhIuB,GAwI1B29F,EArgHS;;;;;;;;;;;;;;GAwhHjB,MAAMsV,GAAiBvvJ,OAAO,iBACxBwvJ,GAAgBxvJ,OAAO,gBACvByvJ,GAASzvJ,OAAO,SAChB0vJ,GAAqB1vJ,OAAO,qBAC5B2vJ,GAAS3vJ,OAAO,SAStB,MAAM4vJ,GACFxyJ,YAAYozB,EAAOq/H,EAAoB,GACnCrxJ,KAAKu7I,IAAQ,IAAIx6I,IACjBf,KAAKw7I,IAAM,GACXx7I,KAAKmxJ,IAAUn/H,EACfhyB,KAAKkxJ,IAAsBG,EAQ/BA,sBAAsBxyJ,GAClBmB,KAAKkxJ,IAAsBryJ,EAC3BmB,KAAKixJ,MAETI,wBACI,OAAOrxJ,KAAKkxJ,IAKhBl/H,YACI,OAAOhyB,KAAKmxJ,IAKhBvyJ,cAAc2C,GACV,OAAOvB,KAAK+wJ,IAAgB/uJ,IAAIT,IAAQ,EAM5C3C,QACIoB,KAAK+wJ,IAAgB3yG,QACrBp+C,KAAKgxJ,IAAiB,GAM1BpyJ,OAAO2C,GACEvB,KAAK+wJ,IAAgB9sJ,IAAI1C,IAC1BvB,KAAK+wJ,IAAgBlwJ,IAAIU,EAAK,GAElCvB,KAAK+wJ,IAAgBlwJ,IAAIU,EAAKvB,KAAK+wJ,IAAgB/uJ,IAAIT,GAAO,GAC9D,MAAM+vJ,EAAoBtxJ,KAAKgxJ,IAAepnJ,QAAQrI,IAC3B,IAAvB+vJ,GACAtxJ,KAAKgxJ,IAAejnJ,OAAOunJ,EAAmB,GAElDtxJ,KAAKgxJ,IAAe//F,QAAQ1vD,GAG5BvB,KAAKixJ,MAOTryJ,QAAQ2C,GACAvB,KAAK+wJ,IAAgB9sJ,IAAI1C,IACzBvB,KAAK+wJ,IAAgBlwJ,IAAIU,EAAKlE,KAAK8N,IAAInL,KAAK+wJ,IAAgB/uJ,IAAIT,GAAO,EAAG,IAE9EvB,KAAKixJ,MAETryJ,EAAE28I,GAAOwV,GAAgBvV,GAAKwV,GAAeC,OACzC,KAAIjxJ,KAAKgxJ,IAAe3nJ,OAASrJ,KAAKkxJ,KAGtC,IAAK,IAAI/mJ,EAAInK,KAAKgxJ,IAAe3nJ,OAAS,EAAGc,GAAKnK,KAAKkxJ,MAAuB/mJ,EAAG,CAC7E,MAAM5I,EAAMvB,KAAKgxJ,IAAe7mJ,GAEV,IADAnK,KAAK+wJ,IAAgB/uJ,IAAIT,KAE3CvB,KAAKmxJ,IAAQrvG,OAAOvgD,GACpBvB,KAAKgxJ,IAAejnJ,OAAOI,EAAG;;;;;;;;;;;;;;GAoB9C,IAAIonJ,GAAMC,GAIV,MASMx/H,GAAQ,IAAIjxB,IACZ0wJ,GAAY,IAAI1wJ,IACtB,IAAI2wJ,GACJ,MAAMhW,GAAc,IAAIlH,GAClBmd,GAAUnwJ,OAAO,UACjBowJ,GAAkBpwJ,OAAO,kBACzBqwJ,GAAgBrwJ,OAAO,gBAC7B,MAAMswJ,WAA0BtoJ,EAC5B5K,YAAYmzJ,GACRhyJ,QACAC,KAAKwxJ,IAAQ,IAAI/V,GACjBz7I,KAAK6xJ,IAAiBE,EACtB/xJ,KAAK2xJ,IAASrV,eAAeZ,IAEjC98I,+BAA+BsY,GAC3Bw6I,GAAuBx6I,EACvBwkI,GAAYvG,eAAej+H,GAE/BtY,iCACI,OAAO8yJ,GAEX1/H,mBACI,OAAOA,GAGXpzB,oBACIozB,GAAM1xB,QAAQ,CAAC0xJ,EAAQ96I,KACnBlX,KAAK8hD,OAAO5qC,KAEhBlX,KAAK4xJ,IAAiB5+F,QAE1Bp0D,WAAWsY,GACP,OAAO8a,GAAM/tB,IAAIiT,GAGrBtY,oBAAoBsY,GAChB,IAAKlX,KAAKiE,IAAIiT,GACV,OAEJ,MAAM+6I,EAAYjgI,GAAMhwB,IAAIkV,GAC5Bu6I,GAAU3vG,OAAO5qC,GACjB8a,GAAM8vB,OAAO5qC,UACM+6I,GAEd76I,UAMTxY,0BAA0BsY,GACtB,QAASu6I,GAAUzvJ,IAAIkV,GAE3BlV,KAAMuvJ,GAAOK,GAAiBJ,GAAOG,GAASC,OAC1C,OAAO5xJ,KAAKkD,YAAY0uJ,IAM5BhzJ,cAAcsY,EAAK7R,EAAS6sJ,EAAmB,UAE3C,GADAlyJ,KAAKgK,cAAc,CAAElL,KAAM,UAAWuG,QAASA,EAAS8O,IAAK+C,KACxD8a,GAAM/tB,IAAIiT,GAAM,CACjB,MAAMi7I,EAxEK,EAACj7I,EAAK8lG,EAAQk1C,EAAmB,YACpD,MAAMj2C,EAAchyG,IAChB,MAAMmoJ,EAAWnoJ,EAAMy3G,OAASz3G,EAAM8vH,MACtCm4B,EAAiB70J,KAAK8N,IAAI,EAAG9N,KAAK6N,IAAI,EAAGzC,SAAS2pJ,GAAYA,EAAW,MAE7E,OAAO,IAAIvvJ,QAAQ,CAAC+6G,EAASC,KACzBb,EAAOU,KAAKxmG,EAAK0mG,EAAS3B,EAAY4B,MAkEbw0C,CAAen7I,EAAKlX,KAAK2xJ,IAAWW,IACrDJ,EAA4B,GAAXI,KAEfP,EAAe/xJ,KAAK6xJ,IACpBU,EAAoBJ,EACrBrsE,KAAM0sE,GACAT,EAAaU,QAAQD,IAE3B1sE,KAAM4sE,IACPR,EAAiB,IACV,IAAIH,EAAaW,KAE5B1gI,GAAMnxB,IAAIqW,EAAKq7I,SAEbvgI,GAAMhwB,IAAIkV,GAChBu6I,GAAU5wJ,IAAIqW,GAAK,GACfg7I,GACAA,EAAiB,GAQzBtzJ,WAAWsY,EAAK7R,EAAS6sJ,EAAmB,gBAClClyJ,KAAKg3I,QAAQ9/H,EAAK7R,EAAS6sJ,GACjC,MAAM7V,QAAarqH,GAAMhwB,IAAIkV,GACvBV,QAAc6lI,EAAK7lI,QAgBzB,OAfAxW,KAAK4xJ,IAAiBe,OAAOz7I,GAG7BV,EAAMY,QAAU,MACZ,MAAMw7I,EAAkBp8I,EAAMY,QAC9B,IAAIy7I,GAAW,EACf,MAAO,KACCA,IAGJA,GAAW,EACXD,EAAgBz3E,MAAM3kE,GACtBxW,KAAK4xJ,IAAiBkB,QAAQ57I,MATtB,GAYTV;;;;;;;;;;;;;;;AAmBf,IAAIu8I,GAhBJjB,GAAkBP,IAAQ,IAAIH,GAAoBU,IAiBlD,MAIMkB,GAAYxxJ,OAAO,YAUzB,MAAMyxJ,GACFr0J,cACIoB,KAAK+yJ,IAAQ,EAEjBn0J,OAAOgK,EAAGsqJ,EAAOC,EAAsBC,GACnC,GAAS,MAALxqJ,GAAgC,IAAnBwqJ,EACb,OAAOF,EAEX,GAAItqJ,IAAMsqJ,GAA6B,IAApBlzJ,KAAKgzJ,IACpB,OAAOE,EAEX,GAAIC,EAAuB,EACvB,OAAOvqJ,EAKX,MAAMyqJ,EAAUzqJ,EAAIsqJ,EACdI,EAAuBtzJ,KAAKgzJ,IA9BhB,IA8BiDK,EAC7DE,EAAgBF,EAASF,EAAuBG,EAChDnmG,EAAQ9vD,KAAKqtI,KAhCD,IAgC0ByoB,GACtCK,GAAeF,EAjCH,IAiC8CC,GAAiBpmG,EAC3EsmG,GAlCY,KAkCyBD,EAAcF,EAAuBnmG,GAChF,OAAI9vD,KAAK4R,IAAIukJ,GAlCH,qBAkC8Bn2J,KAAK4R,IAAImkJ,IAC7CK,EAAeJ,GAAU,GAGzBrzJ,KAAKgzJ,IAAa,EACXE,IAGPlzJ,KAAKgzJ,IAAaQ,EACXN,EAAQK,EAAgBpmG,IAI3C4lG,GAAOC,GAEP,IAAIU,GAAc,SAAWruJ,GAE5B8nB,GAASxnB,KAAM3F,MAEfA,KAAKqF,QAAUA,GAAWwC,SAASC,cAAe,OAElD9H,KAAKqF,QAAQ26B,MAAM5V,SAAW,WAE9BpqB,KAAKhC,iBAAkB,WAAW,WAEjCgC,KAAK0wB,UAAU,SAAWxP,GAEpBA,EAAO7b,mBAAmBsuJ,SAAyC,OAA9BzyI,EAAO7b,QAAQuuJ,YAExD1yI,EAAO7b,QAAQuuJ,WAAWC,YAAa3yI,EAAO7b,gBAUlDquJ,GAAYpyJ,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQ+W,GAAS7rB,WAAa,CAE3E4B,YAAawwJ,GAEbj9I,KAAM,SAAWnN,EAAQ6oB,GAMxB,OAJAhF,GAAS7rB,UAAUmV,KAAK9Q,KAAM3F,KAAMsJ,EAAQ6oB,GAE5CnyB,KAAKqF,QAAUiE,EAAOjE,QAAQyuJ,WAAW,GAElC9zJ,QAQT,IAAI+zJ,GAAgB,WAEnB,IAEIvoE,EAAQC,EACRuoE,EAAYC,EAHZtpE,EAAQ3qF,KAKRuhB,EAAS,IAAI/D,EACbq6C,EAAa,IAAIvwC,GACjB4sI,EAAuB,IAAI5sI,GAE3B0K,EAAQ,CACXu9B,QAAS,IAAI7N,SAGV8oC,EAAa3iF,SAASC,cAAe,OACzC0iF,EAAWxqD,MAAMm0H,SAAW,SAE5Bn0J,KAAKwqF,WAAaA,EAElBxqF,KAAKijB,QAAU,WAEd,MAAO,CACN9U,MAAOq9E,EACPp9E,OAAQq9E,IAKVzrF,KAAKyZ,QAAU,SAAWtL,EAAOC,GAKhC4lJ,GAHAxoE,EAASr9E,GAGa,EACtB8lJ,GAHAxoE,EAAUr9E,GAGc,EAExBo8E,EAAWxqD,MAAM7xB,MAAQA,EAAQ,KACjCq8E,EAAWxqD,MAAM5xB,OAASA,EAAS,MAIpC,IA6CKhB,EACAC,EA9CDumE,EAAe,SAAW1yD,EAAQ48B,EAAOx/B,GAE5C,GAAK4C,aAAkBwyI,GAAc,CAEpCxyI,EAAOiN,eAAgBw8D,EAAO7sC,EAAOx/B,GAErCiD,EAAOkO,sBAAuBvO,EAAOvC,aACrC4C,EAAOhD,aAAc21I,GAErB,IAAI7uJ,EAAU6b,EAAO7b,QACjB26B,EAAQ,mCAAsCze,EAAO3Y,EAAIorJ,EAAaA,GAAe,QAAYzyI,EAAO1V,EAAIooJ,EAAcA,GAAgB,MAE9I5uJ,EAAQ26B,MAAMo0H,gBAAkBp0H,EAChC36B,EAAQ26B,MAAMq0H,aAAer0H,EAC7B36B,EAAQ26B,MAAMs0H,WAAat0H,EAC3B36B,EAAQ26B,MAAMynD,UAAYznD,EAE1B36B,EAAQ26B,MAAMu0H,QAAYrzI,EAAO0M,SAAWrM,EAAO9J,IAAO,GAAK8J,EAAO9J,GAAK,EAAM,GAAK,OAEtF,IAAI+8I,EAAa,CAChBC,wBAAyBC,EAAsBp2I,EAAQ4C,IAGxD8Q,EAAMu9B,QAAQ1uD,IAAKqgB,EAAQszI,GAEtBnvJ,EAAQuuJ,aAAeppE,GAE3BA,EAAWmqE,YAAatvJ,GAIzB6b,EAAOkN,cAAeu8D,EAAO7sC,EAAOx/B,GAIrC,IAAM,IAAInU,EAAI,EAAGC,EAAI8W,EAAOa,SAAS1Y,OAAQc,EAAIC,EAAGD,IAEnDypE,EAAc1yD,EAAOa,SAAU5X,GAAK2zC,EAAOx/B,IAMzCo2I,GAECtnJ,EAAI,IAAIoQ,EACRnQ,EAAI,IAAImQ,EAEL,SAAWo3I,EAASC,GAK1B,OAHAznJ,EAAEqiB,sBAAuBmlI,EAAQj2I,aACjCtR,EAAEoiB,sBAAuBolI,EAAQl2I,aAE1BvR,EAAE+B,kBAAmB9B,KAoB1Bo0F,EAAS,SAAW3jD,GAavB,IAXA,IAAIg3G,EAhBkB,SAAWh3G,GAEjC,IAAIv5C,EAAS,GAQb,OANAu5C,EAAMptB,UAAU,SAAWxP,GAErBA,aAAkBwyI,IAAcnvJ,EAAOpG,KAAM+iB,MAI5C3c,EAMMwwJ,CAAkBj3G,GAAQ1G,MAAM,SAAWhqC,EAAGC,GAK1D,OAHgB2kB,EAAMu9B,QAAQvtD,IAAKoL,GAAIqnJ,wBACvBziI,EAAMu9B,QAAQvtD,IAAKqL,GAAIonJ,2BAMpCO,EAAOF,EAAOzrJ,OAERc,EAAI,EAAGC,EAAI0qJ,EAAOzrJ,OAAQc,EAAIC,EAAGD,IAE1C2qJ,EAAQ3qJ,GAAI9E,QAAQ26B,MAAMi1H,OAASD,EAAO7qJ,GAM5CnK,KAAKm+C,OAAS,SAAWL,EAAOx/B,IAEL,IAArBw/B,EAAMk2B,YAAsBl2B,EAAMztB,oBAChB,OAAlB/R,EAAO8O,QAAkB9O,EAAO+R,oBAErCwnC,EAAWphD,KAAM6H,EAAOE,oBACxB01I,EAAqBjjJ,iBAAkBqN,EAAOG,iBAAkBo5C,GAEhE+b,EAAc91B,EAAOA,EAAOx/B,GAC5BmjF,EAAQ3jD;;;;;;;;;;;;;;GAoBV,MAAMo3G,GAAa,CAACr2J,EAAOq/D,MAAYp/D,KAAM,SAAUq2J,OAAQt2J,EAAOq/D,KAAAA,IAmBhEk3F,GAAmB,MACrB,MAAMpjI,EAAQ,GAEd,OAAQqjI,IACJ,MAAMvwF,EAAWuwF,EACjB,GAAIvwF,KAAY9yC,EACZ,OAAOA,EAAM8yC,GAEjB,MAAMwwF,EAAc,GACpB,IAAIC,EAAkB,EACtB,KAAOF,GAAa,CAChB,KAAME,EATe,IASyB,CAE1CF,EAAc,GACd,MAEJ,MAAMG,EAAwBC,GAAgBJ,GACxCK,EAAaF,EAAsBrM,MAAM,GAC/C,GAAkB,MAAduM,GAAkD,IAA5BA,EAAWC,MAAMtsJ,OACvC,MAEJisJ,EAAYn3J,KAAKu3J,GACjBL,EAAcG,EAAsBI,eAExC,OAAO5jI,EAAM8yC,GAAYwwF,IAxBR,GAgCnBG,GAAkB,MACpB,MAAMI,EAAc,8BACdC,EAAiB,sBACjBC,EAAuB,SAG7B,OAAQV,IACJ,MAAMM,EAAQ,GACd,KAAON,EAAYhsJ,SACfgsJ,EAAcA,EAAY5yF,QACtBszF,EAAqB1uJ,KAAKguJ,KAGzB,GAT0B,MAStBA,EAAY,GAAuC,CACxD,MAAMlM,MAAEA,EAAKyM,eAAEA,GAAmBI,GAAuBX,GACzDA,EAAcO,EACdD,EAAMx3J,KAAK,CACPW,KAAM,WACNqC,KAAM,CAAErC,KAAM,QAASD,MAAO,QAC9BuK,UAAW+/I,SAGd,GAAI0M,EAAYxuJ,KAAKguJ,GAAc,CACpC,MAAMY,EAAmBC,GAAWb,GAC9Bc,EAAYF,EAAiB9M,MAAM,GAEzC,GAtB2B,OAqB3BkM,EAAcY,EAAiBL,gBACf,GAAuC,CACnD,MAAMzM,MAAEA,EAAKyM,eAAEA,GAAmBI,GAAuBX,GACzDM,EAAMx3J,KAAK,CAAEW,KAAM,WAAYqC,KAAMg1J,EAAW/sJ,UAAW+/I,IAC3DkM,EAAcO,OAGdD,EAAMx3J,KAAKg4J,QAGd,GAAIL,EAAezuJ,KAAKguJ,GAEzBM,EAAMx3J,KAAK,CAAEW,KAAM,WAAYD,MAAOw2J,EAAY,KAClDA,EAAcA,EAAY93J,MAAM,OAE/B,CACD,MAAM4rJ,MAAEA,EAAKyM,eAAEA,GApCH,MAoCsBP,EAAY,GAC1Ce,GAASf,GACTgB,GAAYhB,GAGhB,GAAqB,IAAjBlM,EAAM9/I,OACN,MAEJssJ,EAAMx3J,KAAKgrJ,EAAM,IACjBkM,EAAcO,EAGtB,MAAO,CAAEzM,MAAO,CAAC,CAAErqJ,KAAM,aAAc62J,MAAAA,IAAUC,eAAgBP,KArDjD,GA2DlBa,GAAa,MACf,MAAMI,EAAe,iCACrB,OAAQjB,IACJ,MAAMtsJ,EAAQssJ,EAAYtsJ,MAAMutJ,GAGhC,MAAO,CAAEnN,MAAO,CAAC,CAAErqJ,KAAM,QAASD,MAFX,MAATkK,EAAgBssJ,EAAcA,EAAY/tJ,OAAO,EAAGyB,EAAMI,SAErBysJ,eADnB,MAAT7sJ,EAAgB,GAAKssJ,EAAY/tJ,OAAOyB,EAAMI,UAL1D,GAcbktJ,GAAc,MAEhB,MAAME,EAAW,mDACXC,EAAU,YACVC,EAAgB,0BACtB,OAAQpB,IACJ,MAAMqB,EAAarB,EAAYtsJ,MAAMwtJ,GAC/B13J,EAAsB,MAAd63J,EAAqB,IAAMA,EAAW,GAE9CC,GADNtB,EAAuB,MAATx2J,EAAgBw2J,EAAcA,EAAY93J,MAAMsB,EAAMwK,SACtCN,MAAMytJ,GACpC,IAAIt4F,EAAoB,MAAby4F,GAAsC,KAAjBA,EAAU,GAAYA,EAAU,GAAK,KACrE,MAAMf,EAA8B,MAAbe,EAAoBtB,EAAcA,EAAY93J,MAAM2gE,EAAK70D,QAIhF,OAHY,MAAR60D,GAAiBu4F,EAAcpvJ,KAAK62D,KACpCA,EAAO,MAEJ,CACHirF,MAAO,CAAC,CACArqJ,KAAM,SACNq2J,OAAQh1H,WAAWthC,IAAU,EAC7Bq/D,KAAMA,IAEd03F,eAAAA,KArBQ,GA4BdQ,GAAW,MAEb,MAAMQ,EAAS,cACf,OAAQvB,IAEJ,MAAMwB,GADNxB,EAAcA,EAAY93J,MAAM,GAAGklE,QACN15D,MAAM6tJ,GAEnC,MAAO,CACHzN,MAFsB,MAAZ0N,EAAmB,GAAK,CAAC,CAAE/3J,KAAM,MAAOD,MAAOg4J,EAAS,KAGlEjB,eAA4B,MAAZiB,EAAmBxB,EAC/BA,EAAY93J,MAAMs5J,EAAS,GAAGxtJ,WAV7B,GAkBX2sJ,GAA0BX,IAC5B,MAAMyB,EAAkB,GAGxB,IADAzB,EAAcA,EAAY93J,MAAM,GAAGklE,OAC5B4yF,EAAYhsJ,QAAQ,CACvB,MAAMmsJ,EAAwBC,GAAgBJ,GAG9C,GAFAyB,EAAgB34J,KAAKq3J,EAAsBrM,MAAM,IAE1B,OADvBkM,EAAcG,EAAsBI,eAAenzF,QACnC,GACZ4yF,EAAcA,EAAY93J,MAAM,GAAGklE,YAElC,GAAuB,MAAnB4yF,EAAY,GAAY,CAE7BA,EAAcA,EAAY93J,MAAM,GAChC,OAGR,MAAO,CAAE4rJ,MAAO2N,EAAiBlB,eAAgBP,IAE/C0B,GAAgBv1J,OAAO,gBAM7B,MAAMw1J,GACFp4J,YAAYq4J,GACRj3J,KAAK+2J,IAAiBE,EAM1Br4J,KAAKs4J,EAAK35I,GACN,MAAM45I,EAAYD,EAAI35J,QACtB,KAAO45J,EAAU9tJ,QAAQ,CACrB,MAAMk4D,EAAO41F,EAAUlqE,QAIvB,OAHIjtF,KAAK+2J,IAAentJ,QAAQ23D,EAAKziE,OAAS,GAC1Cye,EAASgkD,GAELA,EAAKziE,MACT,IAAK,aACDq4J,EAAUlmG,WAAWsQ,EAAKo0F,OAC1B,MACJ,IAAK,WACDwB,EAAUlmG,QAAQsQ,EAAKpgE,QAASogE,EAAKn4D,cAMzD,MAAMguJ,GAAOp4J,OAAOgvG,OAAO,CAAElvG,KAAM,SAAUq2J,OAAQ,EAAGj3F,KAAM,OAyBxDm5F,GAAmB,CAACnC,EAAYoC,EAAsB,KACxD,IAAInC,OAAEA,EAAMj3F,KAAEA,GAASg3F,EACvB,GAAKzsJ,SAAS0sJ,IAIT,GAAwB,QAApBD,EAAWh3F,MAAqC,MAAnBg3F,EAAWh3F,KAC7C,OAAOg3F,OAJPC,EAASmC,EACTp5F,EAAO,MAQX,MAAO,CAAEp/D,KAAM,SAAUq2J,QAHO,QAATj3F,GAA4B,MAAVi3F,EACVA,EAAS,GAChB93J,KAAKoN,GAAK,IACQyzD,KAAM,QAS9Cq5F,GAAqB,CAACrC,EAAYsC,EAAqB,KACzD,IAQIntI,GARA8qI,OAAEA,EAAMj3F,KAAEA,GAASg3F,EACvB,GAAKzsJ,SAAS0sJ,IAIT,GAAwB,MAApBD,EAAWh3F,KAChB,OAAOg3F,OAJPC,EAASqC,EACTt5F,EAAO,IAMX,OAAQA,GACJ,QACI7zC,EAAQ,EACR,MACJ,IAAK,KACDA,EAAQ,IACR,MACJ,IAAK,KACDA,EAAQ,KAIhB,MAAO,CAAEvrB,KAAM,SAAUq2J,OADX9qI,EAAQ8qI,EACkBj3F,KAAM,MAU5Cu5F,GAAgB,MAClB,MAAMrnF,EAAY4mD,GAASA,EACrB0gC,EAAkB,CACpBC,IAAOvnF,EACPwnF,IAAOP,GACP/rJ,EAAK8kE,EACLynF,GAAMN,GACNO,GAAMP,IAEV,MAAO,CAACvgC,EAAM+gC,EAAWX,MACrB,IAAIjC,OAAEA,EAAMj3F,KAAEA,GAAS84D,EAKvB,GAJKvuH,SAAS0sJ,KACVA,EAAS4C,EAAS5C,OAClBj3F,EAAO65F,EAAS75F,MAER,MAARA,EACA,OAAO84D,EAEX,MAAM1nH,EAAYooJ,EAAgBx5F,GAClC,OAAiB,MAAb5uD,EACOyoJ,EAEJzoJ,EAAU0nH,KAtBH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCtB,IAAIghC,GAAMC,GAAMC,GAAIC,GACpB,MAAMC,GAAQ52J,OAAO,QACf62J,GAAS72J,OAAO,SAChB82J,GAAkB92J,OAAO,kBACzB+2J,GAAoB/2J,OAAO,oBAC3Bg3J,GAAWh3J,OAAO,WAKxB,MAAMi3J,WAAgB/E,GAClB90J,YAAYy2I,GACRt1I,MAAM8H,SAASC,cAAc,QAC7B9H,KAAKyf,OAAS,IAAIjC,EAAQ,EAAG,EAAG,GAChCxd,KAAKg4J,KAAQ,EACbh4J,KAAKi4J,IAAQ,EACbj4J,KAAKk4J,IAAMrwJ,SAASC,cAAc,OAClC9H,KAAKm4J,IAAMtwJ,SAASC,cAAc,QAClC9H,KAAKqF,QAAQqzJ,UAAUz3I,IAAI,sBAC3BjhB,KAAKo4J,IAAOj3J,KAAOk0I,EAAOl0I,KAC1BnB,KAAKqF,QAAQsvJ,YAAY30J,KAAKq4J,KAC9Br4J,KAAKq4J,IAAQ1D,YAAY30J,KAAKo4J,KAC9Bp4J,KAAK24J,eAAetjB,EAAOjrH,UAC3BpqB,KAAK44J,aAAavjB,EAAO51H,QAK7B7gB,OACSoB,KAAKw4J,MACNx4J,KAAKw4J,KAAY,EACjBx4J,KAAKu4J,OAMb35J,OACQoB,KAAKw4J,MACLx4J,KAAKw4J,KAAY,EACjBx4J,KAAKu4J,OAMb35J,YACIoB,KAAKs4J,MAMT15J,YAII,OAHIoB,KAAKs4J,IAAmB,KACtBt4J,KAAKs4J,IAEsB,IAA1Bt4J,KAAKs4J,IAMhB15J,eAAewrB,GACX,GAAgB,MAAZA,EACA,OACJ,MAAMyuI,EAAgBzD,GAAiBhrI,GAAU,GAAGurI,MACpD,IAAK,IAAIxrJ,EAAI,EAAGA,EAAI,IAAKA,EACrBnK,KAAKoqB,SAAS0uI,aAAa3uJ,EAAGstJ,GAAcoB,EAAc1uJ,IAAIgrJ,QAOtEv2J,aAAa6gB,GACT,GAAc,MAAVA,EACA,OACJ,MAAMs5I,EAAc3D,GAAiB31I,GAAQ,GAAGk2I,MAChD,IAAK,IAAIxrJ,EAAI,EAAGA,EAAI,IAAKA,EACrBnK,KAAKyf,OAAOq5I,aAAa3uJ,EAAGstJ,GAAcsB,EAAY5uJ,IAAIgrJ,QAGlEv2J,OAAO+N,GACH3M,KAAKq4J,IAAQr4H,MAAMynD,UAAY,UAAU96E,QAE7C/N,EAAEo5J,GAAOQ,GAAUP,GAAOK,GAAiBJ,GAAKG,GAAQF,GAAKC,GAAOG,OAE5Dv4J,KAAKw4J,IACLx4J,KAAKqF,QAAQqzJ,UAAU5oI,OAAO,QAG9B9vB,KAAKqF,QAAQqzJ,UAAUz3I,IAAI,QAI/BjhB,KAAKo4J,IAAOY,gBAAgB14J,QAAS02H,IACjC,GAAIA,EAAKiiC,WAAaC,KAAKC,aACvB,OAEJ,MAAM9zJ,EAAU2xH,EAEVoiC,EAAsB/zJ,EAAQg0J,QAAQD,oBAC5C,GAA2B,MAAvBA,EAA6B,CAC7B,MAAM7gB,EAAgB,QAAQ6gB,EAE1Bp5J,KAAKw4J,IACLnzJ,EAAQ1B,aAAa40I,EAAe,IAGpClzI,EAAQ3B,gBAAgB60I,GAGhClzI,EAAQ2E,cAAc,IAAIopF,YAAY,qBAAsB,CACxDC,OAAQ,CACJzlE,QAAS5tB,KAAKw4J;;;;;;;;;;;;;;GA4BlC,MAAMc,GAAiB,CAACC,EAAOt9D,KAC3B,IAAIp9F,EAAQ,EACZ,MAAM0iB,EAAS,IAAI/D,EA0BnB,OAzBA+7I,EAAM7oI,SAAUxP,IACZ,IAAI/W,EAAGC,EACP8W,EAAOO,mBAAkB,GAAO,GAChC,IAAIC,EAAWR,EAAOQ,SACtB,QAAiB/gB,IAAb+gB,EACA,GAAIA,EAASktB,WAAY,CACrB,IAAI5D,EAAWtpB,EAASspB,SACxB,IAAK7gC,EAAI,EAAGC,EAAI4gC,EAAS3hC,OAAQc,EAAIC,EAAGD,IACpCoX,EAAO9K,KAAKu0B,EAAS7gC,IACrBoX,EAAOhD,aAAa2C,EAAOvC,aAC3B9f,EAAQo9F,EAAKp9F,EAAO0iB,QAGvB,GAAIG,EAAS8rB,iBAAkB,CAChC,IAAI/tC,EAAYiiB,EAASthB,WAAWgqB,SACpC,QAAkBzpB,IAAdlB,EACA,IAAK0K,EAAI,EAAGC,EAAI3K,EAAUihB,MAAOvW,EAAIC,EAAGD,IACpCoX,EAAO8oB,oBAAoB5qC,EAAW0K,GACjCoU,aAAa2C,EAAOvC,aACzB9f,EAAQo9F,EAAKp9F,EAAO0iB,MAMjC1iB;;;;;;;;;;;;;;GA0CX,MAAM26J,WAAelyC,GACjB1oH,YAAY26J,EAAOE,GACf15J,QACAC,KAAK05J,eAAiB,IAAI5uF,GAC1B9qE,KAAK2hB,YAAc,IAAIzB,EACvBlgB,KAAKkF,KAAO,IAAIsY,EAChBxd,KAAK25J,YAAa,EAClB35J,KAAKguC,aAAc,EAEnBhuC,KAAKuvE,UAAY,EACjBvvE,KAAK6tB,YAAa,EAClB7tB,KAAK+tB,eAAgB,EACrB/tB,KAAK0I,MAAQ,IAAIkqC,GAAK,IAAI8P,GAAqB1iD,KAAK05J,gBACpD15J,KAAK0I,MAAMomB,SAASzxB,KAAKoN,GAAK,GAC9BzK,KAAK0I,MAAMolB,eAAgB,EAC3B9tB,KAAK0I,MAAMmlB,YAAa,EACxB7tB,KAAK0I,MAAMqlB,eAAgB,EAC3B/tB,KAAKihB,IAAIjhB,KAAK0I,OACd1I,KAAKmvD,OAAO7wC,OAAO0K,GAAGnoB,IAAI,EAAG,EAAG,GAChC04J,EAAMt4I,IAAIjhB,MACVA,KAAKgJ,OAASuwJ,EACdv5J,KAAK45J,SAASL,EAAOE,GAMzB76J,SAAS26J,EAAOE,GACZz5J,KAAK25J,WAAaJ,EAAMM,eAAexwJ,OAAS,EAChDrJ,KAAK2hB,YAAYlL,KAAK8iJ,EAAM53I,aAC5B3hB,KAAKkF,KAAKuR,KAAK8iJ,EAAMr0J,MACrB,MAAMyc,YAAEA,EAAWzc,KAAEA,GAASlF,KAC9B,GAAIA,KAAK25J,WAAY,CACjB,MAAMG,EA/CQ,EA+COz8J,KAAK8N,IAAIjG,EAAK0D,EAAG1D,EAAK2G,EAAG3G,EAAKuS,GACnDvS,EAAK2G,EAAIiuJ,EACTn4I,EAAYsmI,eAAe/iJ,EAAK60J,UAAUD,GAAcprJ,gBAAgB,KACxEiT,EAAYxW,IAAIU,EAAI8V,EAAYzW,IAAIW,EAAIiuJ,EACxC50J,EAAKrE,IAAIi5J,EAAcA,EAAcA,GAEzC,MAAME,EA9DC,KA8Dc90J,EAAK2G,EAC1B7L,KAAKoqB,SAASve,EAAI8V,EAAYxW,IAAIU,EAAImuJ,EACtCr4I,EAAYU,UAAUriB,KAAK0I,MAAM0hB,UACjCpqB,KAAKi6J,YAAYR,GAMrB76J,YAAY66J,GACR,MAAMnnF,EAAaj1E,KAAKkL,IAAI,EArET,IAsEfkxJ,GACJz5J,KAAKk6J,WAAW5nF,GAKpB1zE,WAAWu7J,GACP,MAAM77I,OAAEA,EAAM0xD,QAAEA,EAAO3rC,IAAEA,GAAQrkC,KAAKmvD,QAChCjqD,KAAEA,EAAIyc,YAAEA,GAAgB3hB,KACnB,MAAPqkC,IACAA,EAAIjtB,UACJpX,KAAKmvD,OAAO9qB,IAAM,MAElBrkC,KAAK25J,aACLQ,GA9Ec,GAgFlB,MAAMhsJ,EAAQ9Q,KAAKqL,MAAMxD,EAAK0D,EAAI1D,EAAKuS,EAAI0iJ,EAAaA,EAAaj1J,EAAK0D,EAAI1D,EAAKuS,GAC7ErJ,EAAS/Q,KAAKqL,MAAMxD,EAAK0D,EAAI1D,EAAKuS,EAAI0iJ,EAAaj1J,EAAKuS,EAAIvS,EAAK0D,EAAIuxJ,GAC3EnqF,EAAQnvE,IAAIsN,EAAOC,GAEnB,MAAMgsJ,EAAW,IAAMl1J,EAAK0D,EAAIuF,EAC1BksJ,EAAY,IAAMn1J,EAAKuS,EAAIrJ,EACjCkQ,EAAO4M,MAAQvJ,EAAYxW,IAAIvC,EAAIwxJ,EACnC97I,EAAO6M,OAASxJ,EAAYzW,IAAItC,EAAIwxJ,EACpC97I,EAAO+M,OAAS1J,EAAYzW,IAAIuM,EAAI4iJ,EACpC/7I,EAAO8M,IAAMzJ,EAAYxW,IAAIsM,EAAI4iJ,EACjCr6J,KAAKs6J,kBAAkBh8I,EAAOs9B,KAAM,GACpC57C,KAAKmvD,OAAO8lB,eAAej1E,MAC3BA,KAAK0I,MAAM2hB,MAAMxpB,IAAIqE,EAAK0D,EAAI,EAAIwxJ,EAAUl1J,EAAKuS,EAAI,EAAI4iJ,EAAW,GACpEr6J,KAAKguC,aAAc,EAMvBpvC,aAAa2wE,GACTvvE,KAAK05J,eAAet3H,QAAUmtC,EAC1BA,EAAY,GACZvvE,KAAK4tB,SAAU,EACf5tB,KAAK0I,MAAMklB,SAAU,IAGrB5tB,KAAK4tB,SAAU,EACf5tB,KAAK0I,MAAMklB,SAAU,GAG7BhvB,eACI,OAAOoB,KAAK05J,eAAet3H,QAO/BxjC,YAAY27J,GACRv6J,KAAKmvD,OAAO7wC,OAAO0K,GAAGnoB,IAAIxD,KAAKoQ,IAAI8sJ,GAAW,EAAGl9J,KAAKmQ,IAAI+sJ,IAC1Dv6J,KAAKmvD,OAAO8lB,eAAej1E,MAQ/BpB,kBAAkByrB,EAAO3a,GACrB,MAAM8qJ,EAAQx6J,KAAKkF,KAAK2G,EAClB4uJ,EAAe,EAAIpwI,EAGnB2vI,EA9IC,KA8IcQ,EACrBx6J,KAAK0I,MAAM0hB,SAASve,EAAI,EAAImuJ,EAAeQ,EAAQ9qJ,EAAS+qJ,EAC5D,MAAMn8I,OAAEA,GAAWte,KAAKmvD,OACxB7wC,EAAOs9B,KAAOvxB,EACd/L,EAAOgN,KAAO,EACdhN,EAAOiN,IAAMivI,EAAQnwI,EAAQ3a,EAC7B4O,EAAOG,iBAAiBsrG,iBAAiBzrG,EAAO4M,KAAOb,EAAO/L,EAAO6M,MAAQd,EAAO/L,EAAO8M,IAAMf,EAAO/L,EAAO+M,OAAShB,EAAO/L,EAAOgN,KAAMhN,EAAOiN,KACnJjN,EAAOI,wBAAwBtL,WAAWkL,EAAOG;;;;;;;;;;;;;;GAkBzD,IAAIi8I,GAAMC,GACV,MACMC,GAAmB,KAAwBv9J,KAAKoN,GAAK,IACrDowJ,GAAoBx9J,KAAKoQ,IAAImtJ,IAC7BE,GAAkBz9J,KAAKqhC,IAAIk8H,IAC3BG,GAAUv5J,OAAO,UACjBw5J,GAA6Bx5J,OAAO,6BACpCy5J,GAAez5J,OAAO,eACtBs6C,GAAO,IAAIt+B,EACXxU,GAAS,IAAIwU,EACb09I,GAAc,IAAI19I,EAIxB,MAAM29I,WAAchuI,GAIhBvuB,cACImB,QACAC,KAAK06J,IAAQ,KACb16J,KAAK26J,IAAQ,KACb36J,KAAKo7J,iBAAmB,IAAIr6J,IAC5Bf,KAAKq7J,uBAAyB,KAC9Br7J,KAAKw6G,WAAa,GAClBx6G,KAAKs7J,eAAiB,IAAInuI,GAC1BntB,KAAK65J,eAAiB,GACtB75J,KAAK2hB,YAAc,IAAIzB,EACvBlgB,KAAKkF,KAAO,IAAIsY,EAChBxd,KAAKu7J,oBAAsB,EAC3Bv7J,KAAKw7J,kBAAoB,EACzBx7J,KAAKiuB,SAAW,CAAE/W,IAAK,MACvBlX,KAAKkX,IAAM,KACXlX,KAAKmB,KAAO,QACZnB,KAAKs7J,eAAen6J,KAAO,iBAC3BnB,KAAKihB,IAAIjhB,KAAKs7J,gBACdt7J,KAAKs7H,MAAQ,IAAIqE,GAAe3/H,KAAKs7J,gBAEzCG,kBACI,OAAOz7J,KAAKi7J,IAMhBr8J,WACI,QAASoB,KAAKs7J,eAAev5I,SAAS1Y,OAM1CzK,UAAU26J,GACNv5J,KAAKo+C,QACLp+C,KAAKs7J,eAAer6I,IAAIs4I,GACxBv5J,KAAK07J,gBACL17J,KAAKgK,cAAc,CAAElL,KAAM,eAE/BF,gBAAgByG,EAAS6R,EAAKg7I,GAC1B,IAAKh7I,GAAOA,IAAQlX,KAAKkX,IAIrB,YAHIg7I,GACAA,EAAiB,IAWzB,IAAI7V,EALoC,MAApCr8I,KAAKg7J,MACLh7J,KAAKg7J,MACLh7J,KAAKg7J,IAA8B,MAEvCh7J,KAAKkX,IAAMA,EAEX,IACImlI,QAAa,IAAIx5I,QAAQ84J,MAAO/9C,EAASC,KACrC79G,KAAKg7J,IAA8B,IAAMn9C,IACzC,IAEID,QADqBv4G,EAAQu2J,IAAW5+C,OAAOU,KAAKxmG,EAAK7R,EAAS6sJ,IAGtE,MAAOliJ,GACH6tG,EAAO7tG,MAInB,MAAOA,GACH,GAAa,MAATA,EAEA,OAEJ,MAAMA,EAEVhQ,KAAKo+C,QACLp+C,KAAKi7J,IAAgB5e,EACT,MAARA,GACAr8I,KAAKs7J,eAAer6I,IAAIo7H,EAAKv+F,OAEjC,MAAM08D,WAAEA,GAAe6hC,EACjB+e,EAAmB,IAAIr6J,IACvB84J,EAAiB,GACvB,IAAK,MAAMz1E,KAAao2B,EACpB4gD,EAAiBv6J,IAAIujF,EAAUjjF,KAAMijF,GACrCy1E,EAAe17J,KAAKimF,EAAUjjF,MAElCnB,KAAKw6G,WAAaA,EAClBx6G,KAAKo7J,iBAAmBA,EACxBp7J,KAAK65J,eAAiBA,EACtB75J,KAAKiuB,SAAS/W,IAAMA,EACpBlX,KAAK07J,gBACL17J,KAAKgK,cAAc,CAAElL,KAAM,aAAcoY,IAAAA,IAE7C2kJ,kBAAkBh9J,GACdmB,KAAKs7H,MAAM8H,QAAQvkI,GAEvBg9J,oBACI,OAAmC,MAA/B77J,KAAKq7J,uBACEr7J,KAAKq7J,uBAAuBv6G,KAEhC,EAEXg7G,yBACI,OAAsC,MAA/B97J,KAAKq7J,uBAQhBz8J,cAAcuC,EAAO,KAAM46J,EAAgB,GACvC,MAAMvhD,WAAEA,GAAex6G,KACvB,GAAkB,MAAdw6G,GAA4C,IAAtBA,EAAWnxG,OAEjC,YADA/K,QAAQC,KAAK,8DAGjB,IAAIy9J,EAAgB,KACR,MAAR76J,IACA66J,EAAgBh8J,KAAKo7J,iBAAiBp5J,IAAIb,IAEzB,MAAjB66J,IACAA,EAAgBxhD,EAAW,IAE/B,IACI,MAAQ6gD,uBAAwBY,GAAwBj8J,KACxDA,KAAKq7J,uBACDr7J,KAAKs7H,MAAMsH,WAAWo5B,EAAeh8J,MAAMuzI,OAC/CvzI,KAAKq7J,uBAAuB9iH,SAAU,EACX,MAAvB0jH,GACAj8J,KAAKq7J,yBAA2BY,GAChCj8J,KAAKq7J,uBAAuBv9B,cAAcm+B,EAAqBF,GAAe,GAGtF,MAAO/rJ,GACH1R,QAAQ0R,MAAMA,IAGtBpR,gBACuC,MAA/BoB,KAAKq7J,yBACLr7J,KAAKq7J,uBAAuBp6G,OAC5BjhD,KAAKq7J,uBAAuBroG,QAC5BhzD,KAAKq7J,uBAAyB,MAElCr7J,KAAKs7H,MAAM2H,gBAEfrkI,gBAAgByd,GACZrc,KAAKs7H,MAAMz2H,OAAOwX,GAEtBzd,QACIoB,KAAKkX,IAAM,KACXlX,KAAKiuB,SAAW,CAAE/W,IAAK,MACvB,MAAMmlI,EAAOr8I,KAAKi7J,IAElB,GAAY,MAAR5e,EAAc,CACd,IAAK,MAAMjqH,KAASpyB,KAAKs7J,eAAev5I,SACpC/hB,KAAKs7J,eAAexrI,OAAOsC,GAE/BiqH,EAAKjlI,UACLpX,KAAKi7J,IAAgB,KAEU,MAA/Bj7J,KAAKq7J,yBACLr7J,KAAKq7J,uBAAuBp6G,OAC5BjhD,KAAKq7J,uBAAyB,MAElCr7J,KAAKs7H,MAAM2H,gBACXjjI,KAAKs7H,MAAMmI,YAAYzjI,MAU3BpB,cAAciR,EAAS,MACnB7P,KAAK8vB,OAAO9vB,KAAKs7J,gBACH,MAAVzrJ,IACA7P,KAAK2hB,YAAY8sB,cAAczuC,KAAKs7J,gBACpCt7J,KAAK2hB,YAAYsB,QAAQjjB,KAAKkF,MAC9B2K,EAAS7P,KAAK2hB,YAAYU,UAAU,IAAI7E,IAE5C,MAGM0+I,EAAe7+J,KAAK2R,KAAKsqJ,GAAet5J,KAAKs7J,eAH7B,CAACz8J,EAAO24C,IACnBn6C,KAAK8N,IAAItM,EAAOgR,EAAOV,kBAAkBqoC,MAGpDx3C,KAAKu7J,oBAAsBW,EAAerB,GAM1C76J,KAAKw7J,kBACDlC,GAAet5J,KAAKs7J,eANF,CAACz8J,EAAO24C,KAC1BA,EAAOh4B,IAAI3P,GACX,MAAMssJ,EAAW9+J,KAAK2R,KAAKwoC,EAAO5uC,EAAI4uC,EAAO5uC,EAAI4uC,EAAO//B,EAAI+/B,EAAO//B,GACnE,OAAOpa,KAAK8N,IAAItM,EAAOs9J,GAAYn8J,KAAKu7J,oBAAsBl+J,KAAK4R,IAAIuoC,EAAO3rC,OAGzBivJ,GACzD96J,KAAKihB,IAAIjhB,KAAKs7J,gBAKlB18J,mBAAmBw9J,EAAiBC,GAChC,IAAIltG,EAASnvD,KAAK+6J,IACJ,MAAV5rG,GACAA,EAAOmtG,aAAaF,GACpBjtG,EAAOyqG,SAAS55J,KAAMq8J,IAEjBD,EAAkB,IACvBjtG,EAAS,IAAIqqG,GAAOx5J,KAAMq8J,GAC1BltG,EAAOmtG,aAAaF,GACpBp8J,KAAK+6J,IAAW5rG,GAQxBvwD,kBAAkB66J,GACd,MAAMtqG,EAASnvD,KAAK+6J,IACN,MAAV5rG,GACAA,EAAO8qG,YAAYR,GAO3B76J,kBAAkB27J,GACd,MAAMprG,EAASnvD,KAAK+6J,IACN,MAAV5rG,GACAA,EAAOotG,YAAYhC,GAO3B37J,eACI,MAAMuwD,EAASnvD,KAAK+6J,IACpB,GAAc,MAAV5rG,EACA,OAAO,EAEN,CACD,MAAMnhB,YAAEA,GAAgBmhB,EAExB,OADAA,EAAOnhB,aAAc,EACdA,GAOfpvC,wBAAwByrB,EAAO3a,GAC3B,MAAMy/C,EAASnvD,KAAK+6J,IACN,MAAV5rG,GACAA,EAAOmrG,kBAAkBjwI,EAAO3a,GAQxC9Q,WAAW49J,GACPx8J,KAAKihB,IAAIu7I,GAEb59J,cAAc49J,GACVx8J,KAAK8vB,OAAO0sI,GAKhB59J,YAAYq9F,GACR,MAAMl6E,SAAEA,GAAa/hB,KACrB,IAAK,IAAImK,EAAI,EAAGC,EAAI2X,EAAS1Y,OAAQc,EAAIC,EAAGD,IAAK,CAC7C,MAAMqyJ,EAAUz6I,EAAS5X,GACrBqyJ,aAAmB/D,IACnBx8D,EAAKugE,IAQjB59J,eAAe69J,GACXz8J,KAAK08J,YAAaF,IACd1gH,GAAKrlC,KAAKgmJ,GACVzzJ,GAAOymB,sBAAsB+sI,EAAQ79I,aACrCm9B,GAAKt8B,IAAIxW,IACTkyJ,GAAYzkJ,KAAK+lJ,EAAQ/8I,QAAQ4H,mBAAmBrnB,KAAK2e,aACrDm9B,GAAK1/B,IAAI8+I,IAAe,EACxBsB,EAAQG,OAGRH,EAAQI,SAQpBh+J,eAAe+N,GACX3M,KAAK08J,YAAaF,IACdA,EAAQK,OAAOlwJ,KAOvB/N,sBAAsBgvB,GAClB5tB,KAAK08J,YAAaF,IACdA,EAAQ5uI,QAAUA,KAI9B8sI,GAAOK,GAASJ,GAAOM;;;;;;;;;;;;;;;AAgBvB,MAAM6B,GAAoBz/J,KAAKqhC,IAAI,KAAwBrhC,KAAKoN,GAAK,KAC/DsoC,GAAY,IAAI+wF,GAChBz0D,GAAU,IAAI7xD,EAMpB,MAAMu/I,WAAmB7nE,GACrBt2F,aAAYyV,OAAEA,EAAMhP,QAAEA,EAAO8I,MAAEA,EAAKC,OAAEA,IAClCrO,QACAC,KAAK27C,OAAS,EACd37C,KAAKo8J,gBAAkB,EACvBp8J,KAAKq8J,eAAiB,EACtBr8J,KAAKmO,MAAQ,EACbnO,KAAKoO,OAAS,EACdpO,KAAKg9J,SAAU,EACfh9J,KAAKuU,QAAU,KACfvU,KAAKi9J,SAAW,EAChBj9J,KAAKk9J,UAAW,EAChBl9J,KAAKm9J,kBAnXW,GAsXhBn9J,KAAKse,OAAS,IAAIm9B,GAAkB,GAAI,EAAG,GAAK,KAChDz7C,KAAKo9J,WAAa,IAAI5/I,EACtBxd,KAAKq9J,cAAgB,IAAIpK,GACzBjzJ,KAAKs9J,cAAgB,IAAIrK,GACzBjzJ,KAAKu9J,cAAgB,IAAItK,GACzBjzJ,KAAKmB,KAAO,aACZnB,KAAKqF,QAAUA,EACfrF,KAAKqU,OAASA,EACdrU,KAAKu5J,MAAQ,IAAI4B,GAGjBn7J,KAAKse,OAAS,IAAIm9B,GAAkB,GAAI,EAAG,GAAK,KAChDz7C,KAAKse,OAAOnd,KAAO,aACnBnB,KAAKw9J,aAAex9J,KAAKse,OACzBte,KAAKihB,IAAIjhB,KAAKu5J,OACdv5J,KAAKyZ,QAAQtL,EAAOC,GACpBpO,KAAKu5J,MAAMv7J,iBAAiB,aAAeiM,GAAUjK,KAAKy9J,YAAYxzJ,IAQ1ErL,gBAEQoB,KAAKuU,QAAUvU,KAAKqU,OAAOG,WAAW,MAM9C5V,qBAAqB0K,EAAQ4oJ,GACzB,UACUlyJ,KAAKu5J,MAAMmE,UAAU19J,KAAKqF,QAASiE,EAAQ4oJ,GAErD,MAAO5tJ,GACH,MAAM,IAAIgK,MAAM,kCAAkChF,OAAYhF,EAAE8oF,YAMxExuF,QAAQuP,EAAOC,GACPpO,KAAKmO,QAAUA,GAASnO,KAAKoO,SAAWA,IAG5CpO,KAAKmO,MAAQ9Q,KAAK8N,IAAIgD,EAAO,GAC7BnO,KAAKoO,OAAS/Q,KAAK8N,IAAIiD,EAAQ,GAC/BpO,KAAK27C,OAAS37C,KAAKmO,MAAQnO,KAAKoO,OAChCpO,KAAK29J,aACL39J,KAAKg9J,SAAU,GAMnBp+J,aACI,MAAMg/J,EAAWd,GACbz/J,KAAK8N,IAAI,EAAGnL,KAAKu5J,MAAMiC,kBAAoBx7J,KAAK27C,QACpD37C,KAAKm9J,kBAAoB,EAAI9/J,KAAKm/C,KAAKohH,GAAY,IAAMvgK,KAAKoN,GAKlE7L,UACI,MAAO,CAAEuP,MAAOnO,KAAKmO,MAAOC,OAAQpO,KAAKoO,QAK7CxP,YACI,OAAOoB,KAAKw9J,aAKhB5+J,UAAU0f,GACNte,KAAKw9J,aAAel/I,EAKxB1f,YAAYqL,GACRjK,KAAK29J,aACL39J,KAAK69J,mBAAmB79J,KAAKo8J,iBAC7Bp8J,KAAKg9J,SAAU,EACfh9J,KAAKgK,cAAc,CAAElL,KAAM,aAAcoY,IAAKjN,EAAMiN,MAKxDtY,UAAUk/J,EAAQC,EAAQC,GACtBh+J,KAAKo9J,WAAWv8J,KAAKi9J,GAASC,GAASC,GAK3Cp/J,YACI,OAAOywE,GAAQ54D,KAAKzW,KAAKo9J,YAAY1uJ,gBAAgB,GAKzD9P,aACIoB,KAAKi+J,aA35CS,KAi6ClBr/J,aAAai0B,GACT,MAAMqrI,EAAOl+J,KAAKo9J,WACZp0J,EAAShJ,KAAKu5J,MAAMnvI,SAC1B,IAAK8zI,EAAK96I,OAAOpa,GAAS,CACtB,MAAM4W,EAAS5f,KAAKu5J,MAAMgC,oBAC1B,IAAI3yJ,EAAEA,EAACiD,EAAEA,EAAC4L,EAAEA,GAAMzO,EAClBJ,EAAI5I,KAAKq9J,cAAcx4J,OAAO+D,EAAGs1J,EAAKt1J,EAAGiqB,EAAOjT,GAChD/T,EAAI7L,KAAKs9J,cAAcz4J,OAAOgH,EAAGqyJ,EAAKryJ,EAAGgnB,EAAOjT,GAChDnI,EAAIzX,KAAKu9J,cAAc14J,OAAO4S,EAAGymJ,EAAKzmJ,EAAGob,EAAOjT,GAChD5f,KAAKu5J,MAAMnvI,SAASvpB,IAAI+H,EAAGiD,EAAG4L,GAC9BzX,KAAKu5J,MAAMlpI,oBACXrwB,KAAKu5J,MAAM4E,kBAAkBn+J,KAAKo+J,KAClCp+J,KAAKg9J,SAAU,GAMvBp+J,aAAay/J,EAAQC,GACjB,MAAM11J,EAAEA,EAAC6O,EAAEA,GAAMzX,KAAKoqB,SACtBpqB,KAAKo+J,IAAM/gK,KAAK6R,MAAMmvJ,EAASz1J,EAAG01J,EAAS7mJ,GAM/C2mJ,QAAQ7D,GACJv6J,KAAK2T,SAAS9H,EAAI0uJ,EAClBv6J,KAAKu5J,MAAM4E,kBAAkB5D,GAC7Bv6J,KAAKg9J,SAAU,EAEnBoB,UACI,OAAOp+J,KAAK2T,SAAS9H,EAKzBjN,mBAAmBw9J,GACfA,EAAkB/+J,KAAK8N,IAAIixJ,EAAiB,GAC5Cp8J,KAAKo8J,gBAAkBA,EACnBp8J,KAAKu5J,MAAMgF,YACXv+J,KAAKu5J,MAAMsE,mBAAmBzB,EAAiBp8J,KAAKq8J,gBAQ5Dz9J,kBAAkB66J,GACdz5J,KAAKq8J,eAAiB5C,EACtBz5J,KAAKu5J,MAAMiF,kBAAkB/E,GAOjC76J,2BAA2B6/J,EAAev9I,EAASlhB,MAC/C+yC,GAAUuxF,cAAcm6B,EAAez+J,KAAKkmF,aAC5C,MAAMw4E,EAAO3rH,GAAUkxF,gBAAgB/iH,GAAQ,GAC/C,GAAoB,IAAhBw9I,EAAKr1J,OACL,OAAO,KAEX,MAAMs1J,EAAMD,EAAK,GACjB,OAAgB,MAAZC,EAAI5yH,KACG,MAEX4yH,EAAI5yH,KAAKtsB,OAAO+qB,mBAAkB,IAAIz6B,GAAUqjB,gBAAgBurI,EAAIz9I,OAAOvC,cACpE,CAAEyL,SAAUu0I,EAAIr9I,MAAO7B,OAAQk/I,EAAI5yH,KAAKtsB,UAYvD,IAsIKm/I,GAtIDC,KAsICD,GAAiB,IAAIzuD,GAAmB,CAE3C71D,SAAU,CACTnT,aAAc,CAAEtoC,MAAO,MACvBgoC,UAAW,CAAEhoC,MAAO,MACpB4nI,UAAW,CAAE5nI,MAAO,IAAIqP,EAAS,EAAG,KAGrCysC,aAAwB,qQAkBxBC,eAA0B,4sEAqG1B3Y,SA/ksDiB,EAglsDjBY,WAAW,EACXC,YAAY,KAIEhkC,KAAO,qBAEf8/J,IA3QJE,GAAU,IAAIlsH,GAAM,IAAI8P,GAAqB,EAAG,GAAKm8G,IAErDE,GAAgB,IAAI33C,GAAoB,EAAG,EAAG,EAAG,EAAG,EAAG,GAEvD43C,GAAc,KAEd1tF,GAAY,KAEhB,SAAS2tF,GAAoBphH,IAE5ByzB,GAAYzzB,GAEFqyC,QAAS4uE,GAASC,IAI7BE,GAAmB39J,UAAY,CAE9B4B,YAAa+7J,GAEbnpJ,gBAAiB,SAAW+b,GAE3B,GAAK,iBAAkBA,IAAa,EAApC,CAEA,IAAIsV,aAAEA,EAAYN,UAAEA,GAAchV,EAElC,GAAsB,OAAjBsV,GAAuC,OAAdN,GAAwBM,EAAarxB,kBAAmB+b,EAAS5D,SAASixI,iBAAxG,CAEArtI,EAAS5D,SAASixI,kBAAmB,EAErC,IAAI/wJ,EAAQ9Q,KAAK8N,IAAKg8B,EAAajzB,MAAM/F,MAAO04B,EAAU3yB,MAAM/F,OAE5DC,EAAS/Q,KAAK8N,IAAKg8B,EAAajzB,MAAM9F,OAAQy4B,EAAU3yB,MAAM9F,QAElE,GAAO7D,EAAUqC,aAAcuB,IAAa5D,EAAUqC,aAAcwB,GAApE,CAEA,IAAI+wJ,EAAY7tF,GAAUrzB,kBAEtByS,EAAY4gB,GAAU5gB,UAc1B,GAZA4gB,GAAU5gB,WAAY,EAED,OAAhBsuG,IAAwBA,GAAY7wJ,QAAUA,GAAS6wJ,GAAY5wJ,SAAWA,IAE7D,OAAhB4wJ,IAAuBA,GAAY5nJ,WAExC4nJ,GAAc,IAAIlmJ,EAAmB3K,EAAOC,EAAQ,CAAE+K,aAAa,KAEvDH,aAAc,GAItB7K,IAAUg5B,EAAajzB,MAAM/F,OAASC,IAAW+4B,EAAajzB,MAAM9F,OAAS,CAEjF,IAQIgxJ,EAAqB,IAAItmJ,EAAmB3K,EAAOC,EAR1C,CACZ4G,MAAOmyB,EAAanyB,MACpBC,MAAOkyB,EAAalyB,MACpBC,UAAWiyB,EAAajyB,UACxBC,UAAWgyB,EAAahyB,UACxBgE,aAAa,IAKdimJ,EAAmBlmJ,QAAQpD,iBAAkB,EAI7Cw7D,GAAUpzB,gBAAiBkhH,GAE3BvtI,EAASsV,aAAei4H,EAAmBlmJ,QAEtC2Y,EAASuV,cAAgBD,IAAetV,EAASuV,aAAevV,EAASsV,cAEzEtV,EAAS2S,OAAS2C,IAAetV,EAAS2S,MAAQ3S,EAASsV,cAIjE03H,GAAgBvkH,SAASnT,aAAatoC,MAAQsoC,EAE9C03H,GAAgBvkH,SAASzT,UAAUhoC,MAAQgoC,EAM3C,IAJA,IAAIzc,EAAW,IAAIlc,EAAS,EAAG,GAE3Bu4H,EAAYo4B,GAAgBvkH,SAASmsF,UAAU5nI,MAEzCwgK,EAAM,EAAGlxJ,GAAS,GAAKC,GAAU,IAAMixJ,EAAKlxJ,GAAS,EAAGC,GAAU,EAM3Eq4H,EAAU5lI,IAAK,EAAMsN,EAAO,EAAMC,GAEtB,GAAPixJ,GAAW54B,EAAU5lI,IAAK,EAAK,GAEpCm+J,GAAY/lJ,SAASpY,IAAKupB,EAASxhB,EAAGwhB,EAASve,EAAGsC,EAAOC,GAEzD4wJ,GAAYjmJ,QAAQlY,IAAKupB,EAASxhB,EAAGwhB,EAASve,EAAGsC,EAAOC,GAExDkjE,GAAUpzB,gBAAiB8gH,IAE3B1tF,GAAUnzB,OAAQ2gH,GAASC,IAE3BztF,GAAUohB,yBAA0BtoE,EAAUyH,EAASsV,aAAck4H,GAErER,GAAgBvkH,SAASnT,aAAatoC,MAAQgzB,EAASsV,aAInDA,IAAiBtV,EAASsV,cAAeA,EAAa/vB,UAE3Dk6D,GAAUpzB,gBAAiBihH,GAE3B7tF,GAAU5gB,UAAYA,MAIvBt5C,QAAS,WAERynJ,GAAgBznJ,UAEhB0nJ,GAAQp9I,SAAStK,UAEG,MAAf4nJ,IAAsBA,GAAY5nJ;;;;;;;;;;;;;;;AAiKzC,MAAMkoJ,GAAkBpoJ,GAAWA,GAAe,SAARA,EAAkBqoJ,GAAUroJ,GAAO,KACvEsoJ,GAAsB,KACxB,GAAIz4J,EACA,OAEJ,MAAM04J,EAAc,GAOpB,MANKt5J,GACDs5J,EAAYthK,KAAK,oBAEhBsI,GACDg5J,EAAYthK,KAAK,sBAEf,IAAImQ,MAAM,4EAA4EmxJ,EAAY98F,KAAK,QAQ3G48F,GAAaG,GACH,IAAI9nB,IAAI8nB,EAAYliK,OAAOmiK,SAAS72J,YACrCA,WA0BT82J,GAAW,CAACnoB,EAAIooB,KAClB,IAAIC,EAAQ,KACZ,MAAO,IAAIC,KACM,MAATD,GACAx5J,KAAK05J,aAAaF,GAEtBA,EAAQx5J,KAAK45G,WAAW,KACpB4/C,EAAQ,KACRroB,KAAMsoB,IACPF,KASL50J,GAAQ,CAACpM,EAAOohK,EAAYC,IAAe7iK,KAAK8N,IAAI80J,EAAY5iK,KAAK6N,IAAIg1J,EAAYrhK,IA0BrFshK,GAAa,MAGf,MAAMC,EAAwB,MAC1B,MAAMC,EAAyB,MAAjBx4J,SAASy4J,KACnBrhK,MAAM0xG,KAAK9oG,SAASy4J,KAAKC,iBAAiB,SAC1C,GACJ,IAAK,MAAM5pJ,KAAQ0pJ,EACf,GAAkB,aAAd1pJ,EAAKxV,KACL,OAAO,EAGf,OAAO,GATmB,GAc9B,OAHKi/J,GACD9hK,QAAQC,KAAK,mFAEV,IAAM6hK,EAAwB5iK,OAAOgjK,iBAzCd,GAwBf,GA4BbC,GAAc,MAChB,MACMC,EAAsB,IAAI5qC,OAAO,oCACvC,MAAO,IAAOxvH,KAAKq6J,oBACfr6J,KAAKq6J,mBAAmBC,WACvBt6J,KAAKq5J,UAAYr5J,KAAKq5J,SAASv9C,QAC5B97G,KAAKq5J,SAASv9C,OAAOr5G,MAAM23J,IANnB,GAoDdG,GAAYxjK,KAAKoN,MACjBg/F,GAAU,IAAIv7F,EAKd4yJ,GAAY,CAAC91H,EAAU+1H,EAASC,KAClC,IAAInhJ,EAAMkhJ,EAAU,EAAKC,EAAU,EAAI,GAAK3jK,KAAKoN,GAAK,EACjDu2J,EAAU,EAAI3jK,KAAKoN,GAAK,EAAIpN,KAAKoN,GACtC,IAAK,IAAIN,EAAI,EAAGA,GAVH,KAUoBA,EAC7B6gC,EAAS7sC,KAAK4iK,EAAU,IAAwB1jK,KAAKmQ,IAAIqS,GAAMmhJ,EAAU,IAAwB3jK,KAAKoQ,IAAIoS,GAAM,EAAGkhJ,EAd5G,GAc+H1jK,KAAKmQ,IAAIqS,GAAMmhJ,EAd9I,GAciK3jK,KAAKoQ,IAAIoS,GAAM,GACvLA,GAAOghJ,IAef,MAAMI,WAAqBruH,GACvBh0C,YAAY26J,GACR,MAAM73I,EAAW,IAAI0rB,GACf+sB,EAAY,GACZnvB,EAAW,IACX9lC,KAAEA,EAAIyc,YAAEA,GAAgB43I,EACxB3wJ,EAAI1D,EAAK0D,EAAI,EACbiD,EAAI3G,EAAKuS,EAAI,EACnBqpJ,GAAU91H,EAAUpiC,EAAGiD,GACvBi1J,GAAU91H,GAAWpiC,EAAGiD,GACxBi1J,GAAU91H,GAAWpiC,GAAIiD,GACzBi1J,GAAU91H,EAAUpiC,GAAIiD,GACxB,MAAMq1J,EAAcl2H,EAAS3hC,OAAS,EACtC,IAAK,IAAIc,EAAI,EAAGA,EAAI+2J,EAAc,EAAG/2J,GAAK,EACtCgwD,EAAUh8D,KAAKgM,EAAGA,EAAI,EAAGA,EAAI,EAAGA,EAAGA,EAAI,EAAGA,EAAI,GAElD,MAAMA,EAAI+2J,EAAc,EACxB/mG,EAAUh8D,KAAKgM,EAAGA,EAAI,EAAG,EAAGA,EAAG,EAAG,GAClCuX,EAAS/d,aAAa,WAAY,IAAIylC,GAAuB4B,EAAU,IACvEtpB,EAASgsB,SAASysB,GAClBp6D,MAAM2hB,GACN,MAAMmQ,EAAW7xB,KAAK6xB,SACtBA,EAASqQ,KAv0sDE,EAw0sDXrQ,EAASwQ,aAAc,EACvBxQ,EAASuQ,QAAU,EACnBpiC,KAAKmhK,YAAc,EACnBnhK,KAAKohK,cAAgB,IAAInO,GACzBjzJ,KAAKqhK,SAAW,IAAIzuH,GAAK,IAAI8P,GAAoBx9C,EAAK0D,EAAI,GAAY1D,EAAKuS,EAAI,KAC/EzX,KAAKqhK,SAASzzI,SAAU,EACxB5tB,KAAKihB,IAAIjhB,KAAKqhK,UACdrhK,KAAK8uB,SAASzxB,KAAKoN,GAAK,GACxBkX,EAAYU,UAAUriB,KAAKoqB,UAC3BpqB,KAAKshK,aAAe3/I,EAAYzW,IAAIW,EACpC7L,KAAKoqB,SAASve,EAAI7L,KAAKshK,aACvB/H,EAAMt4I,IAAIjhB,MAMdpB,OAAOk/C,EAAOyjH,EAASC,GACnB/3D,GAAQ5oG,IAAI0gK,GAAUC,GACtBxhK,KAAKqhK,SAASzzI,SAAU,EACxB,MAAM6zI,EAAY3jH,EAAM4jH,2BAA2Bj4D,GAASzpG,KAAKqhK,UAEjE,OADArhK,KAAKqhK,SAASzzI,SAAU,EACJ,MAAb6zI,EAAoB,KAAOA,EAAUr3I,SAMhDu3I,iBAAiBjyJ,GACb1P,KAAKoqB,SAASve,EAAI7L,KAAKshK,aAAe5xJ,EAE1CiyJ,mBACI,OAAO3hK,KAAKoqB,SAASve,EAAI7L,KAAKshK,aAKlC1E,SAAShvI,GACL5tB,KAAKmhK,YAAcvzI,EAzFP,IAyF+B,EAK/ChvB,cAAci0B,GACV,MAAMhB,EAAW7xB,KAAK6xB,SACtBA,EAASuQ,QACLpiC,KAAKohK,cAAcv8J,OAAOgtB,EAASuQ,QAASpiC,KAAKmhK,YAAatuI,EAAO,GACzE7yB,KAAK4tB,QAAUiE,EAASuQ,QAAU,EAKtCxjC,UACI,MAAM8iB,SAAEA,EAAQmQ,SAAEA,GAAa7xB,KAAKqhK,SACpC3/I,EAAStK,UACTya,EAASza,UACTpX,KAAK0hB,SAAStK,UACdpX,KAAK6xB,SAASza;;;;;;;;;;;;;;GAkBtB,IAAIwqJ,GAAMC,GAAMC,GAAMC,GAAM7jK,GAAI8jK,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAI1/J,GAAI4W,GAAI+oJ,GAAMC,GAAMC,GAAMC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAIC,GAAKC,GAAKC,GAGpK,MAYMC,GACc,iBADdA,GAEe,kBAFfA,GAGa,gBAHbA,GAIM,SAENC,GAAkBviK,OAAO,kBACzBwiK,GAAgBxiK,OAAO,gBACvByiK,GAAYziK,OAAO,YACnB0iK,GAAqB1iK,OAAO,qBAC5B2iK,GAAsB3iK,OAAO,sBAC7B4iK,GAAiB5iK,OAAO,iBACxB6iK,GAAS7iK,OAAO,SAChB8iK,GAAkB9iK,OAAO,kBACzB+iK,GAAQ/iK,OAAO,QACfgjK,GAAYhjK,OAAO,YACnBijK,GAAkBjjK,OAAO,kBACzBkjK,GAASljK,OAAO,SAChBmjK,GAAenjK,OAAO,eACtBojK,GAAuBpjK,OAAO,uBAC9BqjK,GAAqBrjK,OAAO,qBAC5BsjK,GAAoBtjK,OAAO,iBAC3BujK,GAA0BvjK,OAAO,0BACjCwjK,GAAexjK,OAAO,eACtByjK,GAAiBzjK,OAAO,iBACxB0jK,GAAc1jK,OAAO,cACrB2jK,GAAa3jK,OAAO,aACpB4jK,GAAoB5jK,OAAO,oBAC3B6jK,GAAc7jK,OAAO,cACrB8jK,GAAgB9jK,OAAO,gBACvB+jK,GAAW/jK,OAAO,WAClBgkK,GAAahkK,OAAO,aACpBikK,GAAWjkK,OAAO,WAClBkkK,GAAWlkK,OAAO,WAClBmkK,GAAWnkK,OAAO,WAClBokK,GAAapkK,OAAO,aACpBqkK,GAAerkK,OAAO,eACtBskK,GAActkK,OAAO,cACrBukK,GAAkBvkK,OAAO,kBACzBwkK,GAA4BxkK,OAAO,4BACnCykK,GAAgBzkK,OAAO,gBACvB0kK,GAAsB1kK,OAAO,sBAC7B2kK,GAAgB3kK,OAAO,gBACvB4kK,GAAkB5kK,OAAO,kBACzB6kK,GAAe7kK,OAAO,eACtB8kK,GAAiB9kK,OAAO,iBACxB+kK,GAAe/kK,OAAO,YACtBglK,GAAiBhlK,OAAO,iBACxBilK,GAAoBjlK,OAAO,oBAC3BklK,GAAgBllK,OAAO,gBACvBmlK,GAAanlK,OAAO,aACpBolK,GAAmCplK,OAAO,mCAC1CqlK,GAAY,IAAIrpJ,EAChBtK,GAAU,IAAIoU,GACdw/I,GAAc,IAAItpJ,EACxB,MAAMupJ,WAAmBv9J,EACrB5K,YAAYi/C,GACR99C,QACAC,KAAK69C,SAAWA,EAChB79C,KAAKse,OAAS,IAAIm9B,GAClBz7C,KAAK4hK,IAAQ,KACb5hK,KAAK6hK,IAAQ,KACb7hK,KAAK8hK,IAAQ,KACb9hK,KAAK+hK,IAAQ,KACb/hK,KAAK9B,IAAM,KACX8B,KAAKgiK,IAAM,KACXhiK,KAAKiiK,IAAM,KACXjiK,KAAKkiK,IAAM,KACXliK,KAAKmiK,IAAM,KACXniK,KAAKoiK,IAAM,KACXpiK,KAAKqiK,IAAM,KACXriK,KAAKsiK,IAAM,KACXtiK,KAAKuiK,IAAM,KACXviK,KAAKwiK,IAAM,KACXxiK,KAAKyiK,IAAM,KACXziK,KAAK0iK,IAAM,KACX1iK,KAAK2iK,KAAM,EACX3iK,KAAK4iK,IAAM,IAAIt7I,GACftnB,KAAK6iK,KAAM,EACX7iK,KAAKmD,KAAM,EACXnD,KAAK+Z,KAAM,EACX/Z,KAAK8iK,KAAQ,EACb9iK,KAAK+iK,IAAQ,IAAIvlJ,EACjBxd,KAAKgjK,IAAQ,EACbhjK,KAAKijK,IAAM,IAAIzlJ,EACfxd,KAAKkjK,IAAM,EACXljK,KAAKmjK,IAAM,EACXnjK,KAAKojK,IAAM,IAAInQ,GACfjzJ,KAAKqjK,IAAM,IAAIpQ,GACfjzJ,KAAKsjK,IAAM,IAAIrQ,GACfjzJ,KAAKujK,IAAM,IAAItQ,GACfjzJ,KAAKwjK,IAAM,IAAIvQ,GACfjzJ,KAAKyjK,IAAM,EACXzjK,KAAK0jK,IAAM,IAAM1jK,KAAKgnK,iBACtBhnK,KAAK2jK,IAAO,KACmB,MAAvB3jK,KAAKgkK,KAA0BhkK,KAAKqkF,eACpCrkF,KAAKgkK,IAAe5sJ,UACpBpX,KAAKgkK,IAAiB,IAAI/C,GAAajhK,KAAK+jK,IAAiBxK,SAGrEv5J,KAAK4jK,IAAQ35J,IACT,MAAMg9J,EAAYjnK,KAAK+kK,IACvB,GAAiB,MAAbkC,EACA,OAEJ,MAAMC,EAAUlnK,KAAK0kK,IAAQyC,mCAAmCF,GAC1DnpH,EAAQ99C,KAAK+jK,IACb3iJ,EAAMphB,KAAKgkK,IACjB,GAAuB,IAAnBkD,EAAQ79J,OAAc,CACtBrJ,KAAKglK,IAAgB/6J,EAAM+5E,YAC3B,MAAMlhE,KAAEA,GAAS9iB,KAAKglK,IAAcoC,QAC9BN,EAAc1lJ,EAAIimJ,OAAOrnK,KAAK+jK,IAAkBjhJ,EAAK,GAAIA,EAAK,IACpE1B,EAAIw7I,MAAO,EACQ,MAAfkK,GACA9mK,KAAKilK,KAAkB,EACvBjlK,KAAKolK,IAAmB3uJ,KAAKqwJ,KAG7B9mK,KAAKklK,KAAe,EACpBllK,KAAKqlK,IAAeviJ,EAAK,SAGL,IAAnBokJ,EAAQ79J,QAAgBy0C,EAAMo/G,WACnC97I,EAAIw7I,MAAO,EACX58J,KAAKmlK,KAAc,EACnBnlK,KAAKqlK,IAAerlK,KAAKymK,IAAmBS,GAAWppH,EAAMzzB,MAAMzhB,IAG3E5I,KAAK6jK,IAAO,KACR7jK,KAAKilK,KAAkB,EACvBjlK,KAAKklK,KAAe,EACpBllK,KAAKmlK,KAAc,EACnBnlK,KAAKglK,IAAgB,KACrBhlK,KAAKslK,IAAez5J,GAChB7L,KAAKgkK,IAAerC,aAAe3hK,KAAK+jK,IAAiB15I,MAAMzhB,EACnE5I,KAAKgkK,IAAepH,MAAO,GAE/B58J,KAAKsnK,cAAgBzpH,EAASypH,cAG9BtnK,KAAKse,OAAOzI,kBAAmB,EAEnCjX,uBAAuBk/C,GACnB0hH,KACA,MAAMjvG,QAAgBnqD,UAAUC,GAAGkhK,eAAe,eAAgB,CAC9DC,iBAAkB,CAAC,YACnBC,iBAAkB,CAAC,eACnBC,WAAY,CACRnwC,KAAMz5E,EAAMz4C,QAAQsiK,WAAWC,cAAc,+BAG/CtmH,EAAKthD,KAAKsnK,cAAc/yJ,cAIxB+sC,EAAGikC,mBACTh1B,EAAQq1B,kBAAkB,CAAEF,UAAW,IAAIC,aAAap1B,EAASjP,EAAI,CAAE/xC,OAAO,MAG9E,IAAIs4J,EAA0B,IAAIhlK,QAAQ,CAAC+6G,EAASkqD,KAChDv3G,EAAQvP,sBAAsB,IAAM48D,aAElCiqD,EACN/pH,EAAMz4C,QAAQ0iK,IAAWvqK,OAAOwqK,QAChC,MAAM7nF,YAAEA,EAAW8nF,iBAAEA,EAAgBC,kBAAEA,GAAsB33G,EAAQ2gB,YAAYwU,UAGjF1lF,KAAKsnK,cAAcnjF,eAAehE,GAClCngF,KAAKsnK,cAAct5E,cAAc,GACjChuF,KAAKsnK,cAAc7tJ,QAAQwuJ,EAAkBC,GAAmB,GAChE,MAAMC,EAAarqH,EAAMz4C,QAAQsiK,WAAWC,cAAc,8BAI1D,OAHAO,EAAWzP,UAAUz3I,IAAI,WACzBknJ,EAAWnqK,iBAAiB,QAASgC,KAAK4mK,KAC1C5mK,KAAKgmK,IAA6BmC,EAC3B53G,EAKX63G,qBACI,OAAOpoK,KAAK+jK,IAMhBnlK,6BACI,IAEI,OADA4gK,WACap5J,UAAUC,GAAGG,mBAAmB,gBAEjD,MAAOwJ,GACH,OAAO,GAMfpR,cAAck/C,GACN99C,KAAKqkF,cACL/lF,QAAQC,KAAK,sDAEjB,IAAI8pK,EAAwB,IAAIxlK,QAAQ,CAAC+6G,EAASkqD,KAC9C9mH,sBAAsB,IAAM48D,OAEhC9/D,EAAMy7G,MAAM+O,uBAAsB,GAClCxqH,EAAMk/G,SAAU,QAEVqL,EAENroK,KAAK+jK,IAAmBjmH,EACxB,MAAMyqH,QAAuBvoK,KAAKwoK,iBAAiB1qH,GACnDyqH,EAAevqK,iBAAiB,MAAO,KACnCgC,KAAKkmK,OACN,CAAEuC,MAAM,IACXzoK,KAAKwkK,UAAmB+D,EAAe1iF,sBAAsB,SAC7D7lF,KAAKykK,UACK8D,EAAe1iF,sBAAsB,UAC/C/nC,EAAM4qH,UAAU1oK,KAAKse,QACrBte,KAAK2kK,KAAgB,EACrB3kK,KAAK8lK,IA/Na,GAgOlB9lK,KAAKkkK,IAAsBpmH,EAAMsgH,IACjCtgH,EAAMsgH,IAAM,EACZp+J,KAAKulK,IAAY,EACjBvlK,KAAKwlK,IAAc,EACnBxlK,KAAKokK,IAAkBtmH,EAAM6Q,WAC7B7Q,EAAM6Q,WAAa,KACnB3uD,KAAKmkK,IAAuBrmH,EAAMs+G,gBAClCt+G,EAAM+/G,mBAAmB,GACzB//G,EAAM9/C,iBAAiB,aAAcgC,KAAKwmK,KAC1C,MAAM75J,EA3OQ,GA2OkBtP,KAAKoN,GAAK,IACpCwa,EAAM,IAAI0jJ,MAAM,IAAIC,SAAS,EAAG,EAAG,GAAI,CAAEhgK,EAAG,EAAGiD,GAAIxO,KAAKoQ,IAAId,GAAU8K,GAAIpa,KAAKmQ,IAAIb,KACzF47J,EACK7hK,qBAAqB,CAAEmiK,MAAO7oK,KAAKykK,IAAkBqE,UAAW7jJ,IAChE6gE,KAAKijF,IACN/oK,KAAK8kK,IAAqBiE,IAE9B/oK,KAAKskK,IAAmBiE,EACxBvoK,KAAKgkK,IAAiB,IAAI/C,GAAanjH,EAAMy7G,OAC7Cv5J,KAAK6kK,KAAsB,EAC3B7kK,KAAKikK,IAAa+E,YAAY5qC,MAE9Bp+H,KAAKukK,MAKT3lK,uBACI,IAAKoB,KAAKqkF,aACN,OAEJ,MAAM4kF,EAAiB,IAAIpmK,QAAS+6G,IAChC59G,KAAK+lK,IAAmBnoD,IAE5B,UACU59G,KAAKskK,IAAiBrxI,YACtBg2I,EAEV,MAAOj5J,GACH1R,QAAQC,KAAK,wCACbD,QAAQC,KAAKyR,GACbhQ,KAAKkmK,OAGbtnK,EAAEgjK,GAAOoC,GAAenC,GAAOoC,GAAWnC,GAAOoC,GAAoBnC,GAAOoC,GAAqBjmK,GAAKkmK,GAAgBpC,GAAKqC,GAAQpC,GAAKqC,GAAiBpC,GAAKsC,GAAWrC,GAAKsC,GAAiBrC,GAAKsC,GAAQrC,GAAKyC,GAAmBxC,GAAKyC,GAAyBxC,GAAKyC,GAAcxC,GAAKuB,GAAiBtB,GAAKsD,GAAiBrD,GAAKsD,GAA2BrD,GAAKgC,GAAc/B,GAAKgC,GAAsB/B,GAAKgC,GAAoB1hK,GAAK8hK,GAAgBlrJ,GAAKmrJ,GAAapC,GAAOqC,GAAYpC,GAAOqC,GAAmBpC,GAAOqC,GAAapC,GAAKqC,GAAepC,GAAKqC,GAAUpC,GAAKqC,GAAYpC,GAAKqC,GAAUpC,GAAKqC,GAAUpC,GAAKqC,GAAUpC,GAAKqC,GAAYpC,GAAKqC,GAAcpC,GAAKqC,GAAapC,GAAKkD,GAAkCV,OAI1sBlmK,KAAKsnK,cAAcnjF,eAAe,MAClC,MAAM5zB,EAAUvwD,KAAKskK,IACN,MAAX/zG,IACAA,EAAQtyD,oBAAoB,cAAe+B,KAAKsmK,KAChD/1G,EAAQtyD,oBAAoB,YAAa+B,KAAKumK,KAC9Ch2G,EAAQrP,qBAAqBlhD,KAAKqkK,KAClCrkK,KAAKskK,IAAmB,MAE5B,MAAMxmH,EAAQ99C,KAAK+jK,IACnB,GAAa,MAATjmH,EAAe,CACf,MAAMy7G,MAAEA,EAAKl0J,QAAEA,GAAYy4C,EAC3BA,EAAM4qH,UAAU5qH,EAAMx/B,QACtBi7I,EAAMzpI,OAAO9vB,KAAKgkK,KAClBlmH,EAAM1zB,SAASvpB,IAAI,EAAG,EAAG,GACzBi9C,EAAMzzB,MAAMxpB,IAAI,EAAG,EAAG,GACtB04J,EAAM2P,wBAAwB,EAAG,GACjC,MAAM9K,EAAMp+J,KAAKkkK,IACN,MAAP9F,IACAtgH,EAAMsgH,IAAMA,GAEhB,MAAM7uF,EAAYvvE,KAAKmkK,IACN,MAAb50F,GACAzxB,EAAM+/G,mBAAmBtuF,GAE7B,MAAM5gB,EAAa3uD,KAAKokK,IACN,MAAdz1G,IACA7Q,EAAM6Q,WAAaA,GAEvB7Q,EAAM7/C,oBAAoB,aAAc+B,KAAKwmK,KAC7CjN,EAAM4P,eAAe,GACrB9jK,EAAQ+jK,cAAc,gBACtB/jK,EAAQ0iK,IAAW1iK,EAAQgkK,yBAG/BrpK,KAAK69C,SAASzvC,OAAS,EACvB,MAAM+5J,EAAanoK,KAAKgmK,IACN,MAAdmC,IACAA,EAAWzP,UAAU5oI,OAAO,WAC5Bq4I,EAAWlqK,oBAAoB,QAAS+B,KAAK4mK,KAC7C5mK,KAAKgmK,IAA6B,MAEtC,MAAMiB,EAAYjnK,KAAK+kK,IACN,MAAbkC,IACAA,EAAUqC,SACVtpK,KAAK+kK,IAA2B,MAEpC,MAAMwE,EAAmBvpK,KAAK8kK,IACN,MAApByE,IACAA,EAAiBD,SACjBtpK,KAAK8kK,IAAqB,MAEH,MAAvB9kK,KAAKgkK,MACLhkK,KAAKgkK,IAAe5sJ,UACpBpX,KAAKgkK,IAAiB,MAE1BhkK,KAAKikK,IAAa,KAClBjkK,KAAKkkK,IAAsB,KAC3BlkK,KAAKmkK,IAAuB,KAC5BnkK,KAAKokK,IAAkB,KACvBpkK,KAAKqkK,IAAU,KACfrkK,KAAKwkK,IAAa,KAClBxkK,KAAK+jK,IAAmB,KACxB/jK,KAAKykK,IAAmB,KACxBzkK,KAAK0kK,IAAU,KACf1kK,KAAKglK,IAAgB,KACQ,MAAzBhlK,KAAK+lK,KACL/lK,KAAK+lK,MAET/lK,KAAKgK,cAAc,CAAElL,KAAM,SAAUwjE,OAAQwhG,KAKjDz/E,mBACI,OAAgC,MAAzBrkF,KAAK+jK,IAEhBnlK,eACI,MAAMk/C,EAAQ99C,KAAK+jK,IACnB,GAAa,MAATjmH,EAAe,CAEf,MAAM90C,EAAS80C,EAAM0rH,YACrB1rH,EAAM2rH,UAAUzgK,EAAOJ,EAAGk1C,EAAMy7G,MAAM53I,YAAYzW,IAAIW,EAAG7C,EAAOyO,IAGxE7Y,EAAE+kK,GAAM6C,GAAgBL,KAAgBrqH,GACpC,MAAMx9B,OAAEA,GAAWte,MACX0S,OAAQg3J,GAAiBprJ,EAKjC,GAJAorJ,EAAa/4J,UAAUmrC,EAAK2rC,UAAU/0E,QACtC4L,EAAO+R,mBAAkB,GAEzB/R,EAAO8L,SAASqF,sBAAsBi6I,GACP,MAA3B1pK,KAAK8kK,IAA4B,CAEjC,MAAM16I,SAAEA,EAAQmvI,MAAEA,GAAUv5J,KAAK+jK,IAC3BnkJ,EAAS25I,EAAMgC,oBACrBj9I,EAAOkS,kBAAkBpG,GACzBA,EAAS1b,eAAekR,GACxBwK,EAASnJ,IAAI3C,EAAO8L,UAExB,IAAKpqB,KAAK2kK,IAAe,CACrBrmJ,EAAOG,iBAAiB9N,UAAUmrC,EAAKr9B,kBAGvCH,EAAOI,wBAAwBtL,WAAWkL,EAAOG,kBAEjD,MAAM7V,EAAEA,EAAC6O,EAAEA,GAAM6G,EAAO8L,SAClB0zB,EAAQ99C,KAAK+jK,IACnBjmH,EAAM6rH,aAAa/gK,EAAG6O,GACtBqmC,EAAMy7G,MAAMlpI,mBAAkB,GAC9BrwB,KAAKulK,IAAYznH,EAAMsgH,IACvBp+J,KAAK4kK,IAAsBnuJ,KAAKqnC,EAAMy7G,MAAM56I,aAC5Cm/B,EAAMy7G,MAAM+O,uBAAsB,GAClCtoK,KAAK2kK,KAAgB,EACrB3kK,KAAKgK,cAAc,CAAElL,KAAM,SAAUwjE,OAAQwhG,KAEjD9jK,KAAK+jK,IAAiBxK,MAAM4P,eAAe9rK,KAAK6R,MAAMw6J,EAAa/6J,SAAS,GAAI+6J,EAAa/6J,SAAS,KAE1G/P,CAACwnK,IAAiBrlH,GACd,MAAMkmH,EAAYjnK,KAAK8kK,IACvB,GAAiB,MAAbmC,EACA,OAEJ,MAAM2C,EAAiB7oH,EAAM8oH,kBAAkB5C,GAC/C,GAA6B,GAAzB2C,EAAevgK,OACf,OAEJ,MAAMs1J,EAAMiL,EAAe,GACrBE,EAAY9pK,KAAKqmK,IAAc1H,GACrC,GAAiB,MAAbmL,EACA,OAEJ9pK,KAAK+pK,WAAWD,GAChB7C,EAAUqC,SACVtpK,KAAK8kK,IAAqB,KAC1B,MAAMv0G,QAAEA,GAAYxP,EACpBwP,EAAQvyD,iBAAiB,cAAegC,KAAKsmK,KAC7C/1G,EAAQvyD,iBAAiB,YAAagC,KAAKumK,KAC3Ch2G,EACKy5G,sCAAsC,CAAEC,QAAS,wBACjDnkF,KAAKijF,IACN/oK,KAAK+kK,IAA2BgE,IAGxCnqK,CAACynK,IAAc5E,GACX,MAAMn+E,EAAOm+E,EAAU5sE,QAAQ70F,KAAKwkK,KACpC,GAAY,MAARlhF,EACA,OAAO,KAEX,MAAMwmF,EAAY52J,GAAQvC,UAAU2yE,EAAKmE,UAAU/0E,QAGnD,OAAOo3J,EAAUn7J,SAAS,GAAK,IAC3Bm4J,GAAYr3I,sBAAsBq6I,GAClC,KAgBRlrK,WAAW+/J,GACP,MAAM7gH,EAAQ99C,KAAK+jK,KACbxK,MAAEA,GAAUz7G,GACZ5yC,IAAEA,EAAGC,IAAEA,GAAQouJ,EAAM53I,YAC3B3hB,KAAKgkK,IAAepH,MAAO,EAC3B,MAAMsB,EAAOl+J,KAAKslK,IAClBpH,EAAKznJ,KAAKkoJ,GACV,MAAMj2J,EAAQi2J,EAAI9yJ,EACZkZ,EAAS/kB,KAAKse,OAAO8L,SAAS5T,QAC9BwO,EAAY25I,EAAInoJ,QAAQgJ,IAAIuF,GAAQzV,YAE1CyV,EAAOvF,IAAIwF,EAAUtW,eAAe6qJ,EAAMgC,sBAC1C,MAAMt2I,EAAM,IAAIH,GAAIC,EAAQC,EAAU1V,aAChC46J,EAAelqK,KAAK4kK,IACpBuF,GAAgB,IAAI3sJ,GAAUiS,sBAAsBy6I,GAAcjpJ,IAAI09I,GAC5EuL,EAAaE,YAAYD,GACzB,MAAME,GAAc,IAAI/iJ,IAAUlU,WAAW82J,GAC7CjlJ,EAAI1G,aAAa8rJ,GAEjBl/J,EAAIU,GAAK,GACToZ,EAAI6B,aAAayyI,EAAM53I,YAAawoJ,GACpCh/J,EAAIU,GAAK,GACY,MAAjBs+J,IACAA,EAAc5rJ,aAAa2rJ,GAC3BhM,EAAKj9I,IAAI09I,GAAKn/I,IAAI2qJ,IAGtB,MAAMnhK,EAAS80C,EAAM0rH,YACrB1rH,EAAM2rH,UAAUzgK,EAAOJ,EAAGsC,EAAIW,EAAG7C,EAAOyO,GAExCymJ,EAAKryJ,EAAInD,EACT1I,KAAKgK,cAAc,CAAElL,KAAM,SAAUwjE,OAAQwhG,KAEjDllK,EAAEglK,GAAM0C,GAAgBzC,GAAM0C,GAAcE,KAAoBS,GAC5D,MAAMoD,EAAYpD,EAAQ,GAAGljF,YAAYojF,QAAQtkJ,KAC3CynJ,EAAYrD,EAAQ,GAAGljF,YAAYojF,QAAQtkJ,KAC3CuwI,EAASkX,EAAU,GAAKD,EAAU,GAClCE,EAASD,EAAU,GAAKD,EAAU,GACxC,OAAOjtK,KAAK2R,KAAKqkJ,EAASA,EAASmX,EAASA,GAEhD5rK,CAAC8nK,IAAe3lH,GACZ,MAAMkmH,EAAYjnK,KAAK+kK,IACvB,GAAiB,MAAbkC,EACA,OAEJ,IAAKjnK,KAAKilK,MAAoBjlK,KAAKmlK,MAAgBnlK,KAAKklK,IACpD,OAEJ,MAAMgC,EAAUnmH,EAAMomH,mCAAmCF,GACnDnpH,EAAQ99C,KAAK+jK,IACb15I,EAAQyzB,EAAMzzB,MAAMzhB,EAG1B,GAAI5I,KAAKmlK,IACL,GAAI+B,EAAQ79J,OAAS,EAGjBrJ,KAAKmlK,KAAc,MAElB,CACD,MACM96I,EADarqB,KAAKymK,IAAmBS,GAChBlnK,KAAKqlK,IAChCrlK,KAAKwlK,IACAn7I,EAtfG,KAsfwBA,EArfzB,kBAqfmD,EAAIA,MAVtE,CAcK,GAAuB,IAAnB68I,EAAQ79J,QAAgBy0C,EAAMo/G,SAOnC,OAJAl9J,KAAKilK,KAAkB,EACvBjlK,KAAKklK,KAAe,EACpBllK,KAAKmlK,KAAc,OACnBnlK,KAAKqlK,IAAerlK,KAAKymK,IAAmBS,GAAW78I,GAG3D,GAAIrqB,KAAKklK,IAAc,CACnB,MAAMuF,EAAYzqK,KAAKglK,IAAcoC,QAAQtkJ,KAAK,GAClD9iB,KAAKulK,KA9gBK,KA8gBSkF,EAAYzqK,KAAKqlK,KACpCrlK,KAAKqlK,IAAeoF,OAEfzqK,KAAKilK,KACViC,EAAQ5mK,QAAQoqK,IACZ,GAAIA,EAAO1mF,cAAgBhkF,KAAKglK,KAC5B0F,EAAO/yC,QAAQtuH,OAAS,EACxB,OAEJ,MAAMs1J,EAAM3+J,KAAKqmK,IAAcqE,EAAO/yC,QAAQ,IAC9C,GAAW,MAAPgnC,EACA,OAEJ3+J,KAAKslK,IAAe9lJ,IAAIxf,KAAKolK,KAC7B,MAAM11J,EAASivJ,EAAI9yJ,EAAI7L,KAAKolK,IAAmBv5J,EAG/C,GAAI6D,EAAS,EAAG,CACZ1P,KAAKgkK,IAAerC,aAAejyJ,EAAS2a,EAC5CrqB,KAAK+jK,IAAiBxK,MAAM2P,wBAAwB7+I,EAAO3a,GAE3D,MAAMkiF,EAAiBi1E,GAAUpwJ,KAAKzW,KAAKse,OAAO8L,UAC5C7a,GAASG,GAAUkiF,EAAe/lF,EAAI8yJ,EAAI9yJ,GAChD+lF,EAAeljF,eAAea,GAC9BovJ,EAAIjwJ,eAAe,EAAIa,GAAO0R,IAAI2wE,GAEtC5xF,KAAKslK,IAAerkJ,IAAI09I,GACxB3+J,KAAKolK,IAAmB3uJ,KAAKkoJ,MAIzC//J,CAAC+nK,IAAY9zI,GACT,MAAMirB,EAAQ99C,KAAK+jK,KACbxK,MAAEA,EAAKnvI,SAAEA,EAAQg0I,IAAEA,GAAQtgH,EAC3Bl+B,EAAS25I,EAAMgC,oBACf2C,EAAOl+J,KAAKslK,IACZqF,EAAW7sH,EAAMzzB,MAAMzhB,EACvBwY,EAAMphB,KAAKgkK,IACjB,GAA+B,MAA3BhkK,KAAK8kK,OACH5G,EAAK96I,OAAOgH,IAAapqB,KAAKwlK,MAAgBmF,GAAW,CAC3D,IAAI/hK,EAAEA,EAACiD,EAAEA,EAAC4L,EAAEA,GAAM2S,EAClByI,GAAS7yB,KAAK8lK,IACdl9J,EAAI5I,KAAKylK,IAAU5gK,OAAO+D,EAAGs1J,EAAKt1J,EAAGiqB,EAAOjT,GAC5C/T,EAAI7L,KAAK0lK,IAAU7gK,OAAOgH,EAAGqyJ,EAAKryJ,EAAGgnB,EAAOjT,GAC5CnI,EAAIzX,KAAK2lK,IAAU9gK,OAAO4S,EAAGymJ,EAAKzmJ,EAAGob,EAAOjT,GAC5CwK,EAASvpB,IAAI+H,EAAGiD,EAAG4L,GACnB,MAAMmzJ,EAAW5qK,KAAK6lK,IAAchhK,OAAO8lK,EAAU3qK,KAAKwlK,IAAa3yI,EAAO,GAE9E,GADAirB,EAAMzzB,MAAMxpB,IAAI+pK,EAAUA,EAAUA,IAC/B5qK,KAAKilK,IAAiB,CACvB,MAAMv1J,EAASwuJ,EAAKryJ,EAAIA,EACpB7L,KAAK6kK,KACLzjJ,EAAIugJ,aAAejyJ,EAASk7J,EAC5BrR,EAAM2P,wBAAwB0B,EAAUl7J,IAExB,IAAXA,IACL1P,KAAK6kK,KAAsB,EAC3BzjJ,EAAIw7I,MAAO,EACX9+G,EAAM+/G,mBAxkBE,IAykBR79J,KAAK8lK,IAAe,IAIhC1kJ,EAAIypJ,cAAch4I,GAClBirB,EAAMmgH,aAAaprI,GAEnBirB,EAAMztB,mBAAkB,GAExBytB,EAAMsgH,IAAMp+J,KAAK4lK,IAAY/gK,OAAOu5J,EAAKp+J,KAAKulK,IAAW1yI,EAAOx1B,KAAKoN,IAEzE7L,CAAC2lK,MACGvkK,KAAKqkK,IAAUrkK,KAAKskK,IAAiBtjH,sBAAsB,CAACF,EAAMC,IAAU/gD,KAAKimK,IAAenlH,EAAMC,IAE1GniD,CAACqnK,IAAenlH,EAAMC,GAClB/gD,KAAK0kK,IAAU3jH,EACf,MAAMuiC,EAAOviC,EAAMumC,cAActnF,KAAKwkK,KAEtCxkK,KAAKukK,MACL,MAAMzmH,EAAQ99C,KAAK+jK,IACnB,GAAY,MAARzgF,GAAyB,MAATxlC,EAChB,OAEJ99C,KAAKmmK,IAAe7iF,EAAKiE,MAAM,IAC/BvnF,KAAKomK,IAAiBrlH,GACtB/gD,KAAK0mK,IAAe3lH,GACpB,MAAMluB,EAAQiuB,EAAO9gD,KAAKikK,IAC1BjkK,KAAK2mK,IAAY9zI,GACjB7yB,KAAK69C,SAASitH,UAAUhtH,EAAOgD,EAAMjuB,GACrC7yB,KAAKikK,IAAanjH,EAIlB9gD,KAAKsnK,cAAcnpH,OAAOL,EAAO99C,KAAKse;;;;;;;;;;;;;;GA2B9C,MAAMysJ,GACFnsK,YAAYi/C,GAERA,EAASypH,cAAc3+F,MAAQ,CAAEC,mBAAmB,GAIpD/lE,QAAQ+6G,UAAU93B,KAAK,KACnBx/E,KAAK0D,cAAc,IAAIopF,YAAY,8BAA+B,CAC9DC,OAAQ,CACJx1C,SAAAA,EACAmtH,MAAO,CACHvwH,eAAAA,GACA3lC,QAAAA,EACA89B,KAAAA,GACAsiD,MAAAA,GACAxyC,oBAAAA,GACA0kE,mBAAAA,GACAtuG,kBAAAA,SAMpBla,SAASk/C,GACLx3C,KAAK0D,cAAc,IAAIopF,YAAY,iCAAkC,CAAEC,OAAQ,CAAEv1C,MAAAA,MAErFl/C,YAAYk/C,GACRx3C,KAAK0D,cAAc,IAAIopF,YAAY,mCAAoC,CAAEC,OAAQ,CAAEv1C,MAAAA,OAI3F,MAAMmtH,GAAazpK,OAAO,aACpB0pK,GAAQ1pK,OAAO,QACf2pK,GAAkB3pK,OAAO,kBACzB4pK,GAAkB5pK,OAAO,kBACzB6pK,GAA8B7pK,OAAO,8BACrC8pK,GAA8B9pK,OAAO,8BACrC+pK,GAA2B/pK,OAAO,2BAUxC,MAAMgqK,GACF5sK,YAAY6sK,EAAWpvB,EAAMqvB,EAAgBC,GACzC3rK,KAAKirK,IAAcQ,EACnBzrK,KAAKkrK,IAAS7uB,EACdr8I,KAAKmrK,IAAmBQ,EACxB3rK,KAAKorK,IAAmBM,EAY5B9sK,YAAY6sK,EAAWG,GACnB,OAAoC,MAAhCA,EACO5rK,KAAKurK,IAA0BE,EAAWG,GAG1C5rK,KAAKsrK,IAA6BG,GAGjD7sK,OAAQ0sK,IAA6BG,GACjC,MAAMpvB,EAAOovB,EAAU5qD,OAAO9K,MACxBkxC,aAAEA,GAAiBwkB,EAAU5qD,OAC7B8qD,EAAiB,IAAI5qK,IA0B3B,OAxBAkmJ,EAAa3mJ,QAAQ,CAACurK,EAAsBC,KAOxC,GAA4B,MAAxBD,EACA,OAEJ,MAAM/sK,KAAEA,EAAIqK,MAAEA,GAAU0iK,EAElBE,GADe1vB,EAAKv9I,IAAS,IACFqK,GACjC,GAAmB,MAAf4iK,EAEA,OAEJ,IAAIC,EAAeL,EAAe3pK,IAAI+pK,GAClB,MAAhBC,IACAA,EAAe,IAAIC,IACnBN,EAAe9qK,IAAIkrK,EAAaC,IAEpCA,EAAa/qJ,IAAI6qJ,KAEd,IAAIN,GAAqBC,EAAWpvB,EAAM4K,EAAc0kB,GAOnE/sK,OAAQ2sK,IAA0BW,EAAgBN,GAC9C,MAAMO,EAAoBP,EAA6BH,UACjDW,EAAeR,EAA6BvvB,KAC5CgwB,EAAYntK,KAAKG,MAAMH,KAAKC,UAAUitK,IACtCE,EAAsB,IAAIvrK,IAC1BwrK,EAAsB,IAAIxrK,IAChC,IAAK,IAAIoJ,EAAI,EAAGA,EAAIgiK,EAAkBljB,OAAO5/I,OAAQc,IACjDnK,KAAKqrK,IAA6Bc,EAAkBljB,OAAO9+I,GAAI+hK,EAAejjB,OAAO9+I,GAAI,CAAC+W,EAAQsrJ,KAC9F,MAAMC,EAAmBb,EAA6BF,eAAe1pK,IAAIkf,GACzE,GAAwB,MAApBurJ,EAA0B,CAC1B,MAAM3tK,KAAEA,EAAIqK,MAAEA,GAAUsjK,EAClBC,EAAeL,EAAUvtK,GAAMqK,GACrCmjK,EAAoBzrK,IAAI2rK,EAAa,CAAE1tK,KAAAA,EAAMqK,MAAAA,IAC7C,MAAMwjK,EAAeJ,EAAoBvqK,IAAI0qK,IAAiB,IAAIT,IAClEU,EAAa1rJ,IAAIurJ,GACjBD,EAAoB1rK,IAAI6rK,EAAcC,MAIlD,OAAO,IAAInB,GAAqBU,EAAgBG,EAAWC,EAAqBC,GAQpF3tK,OAAQysK,IAA6BuB,EAAUC,EAAUtvJ,GACrD,MAGMmT,EAAW,CAACtjB,EAAGC,KAEjB,GADAkQ,EAASnQ,EAAGC,GACRD,EAAE8gB,WAAY,CACd,GAAW9gB,EALDokB,OAMN,GAAIvyB,MAAMkY,QAAQ/J,EAAEykB,UAChB,IAAK,IAAI1nB,EAAI,EAAGA,EAAIiD,EAAEykB,SAASxoB,SAAUc,EACrCumB,EAAStjB,EAAEykB,SAAS1nB,GAAIkD,EAAEwkB,SAAS1nB,SAIvCumB,EAAStjB,EAAEykB,SAAUxkB,EAAEwkB,UAG/B,IAAK,IAAI1nB,EAAI,EAAGA,EAAIiD,EAAE2U,SAAS1Y,SAAUc,EACrCumB,EAAStjB,EAAE2U,SAAS5X,GAAIkD,EAAE0U,SAAS5X,MAI/CumB,EAASk8I,EAAUC,GAKvBpB,gBACI,OAAOzrK,KAAKirK,IAKhB5uB,WACI,OAAOr8I,KAAKkrK,IAQhBS,qBACI,OAAO3rK,KAAKmrK,IAMhBO,qBACI,OAAO1rK,KAAKorK,KAQd0B,GAAM,IAAItvJ,EACbuvJ,GAAO,IAAIpzJ,EACX0Q,GAAQ,IAAI7M,EACZwvJ,GAAiB,IAAI1lJ,GACrB2lJ,GAAiB,IAAI3lJ,GACrB4lJ,GAAe,IAAI5lJ,GAoUhB6lJ,GAAkB,IAAI3vJ,EACzB4vJ,GAAY,IAAI5vJ,EAChB6vJ,GAAkB,IAAI7vJ,EACtB8vJ,GAAY,IAAI9vJ,EAChB+vJ,GAAY,IAAIr/J,EAChBs/J,GAAY,IAAIt/J,EAlVnB,IA6UMi/J,GACHC,GACAC,GACAC,GACAC,GACAC,GA9UGV,GACHC,GACA1iJ,GACA2iJ,GACAC,GACAC,GATCO,GA8gBI,SAAWnkK,GAEjB,IAAIokK,EAAe,IAAI3sK,IACnB4sK,EAAc,IAAI5sK,IAElByV,EAAQlN,EAAOkN,QA8BnB,OAOF,SAASo3J,EAAkBxgK,EAAGC,EAAGkQ,GAEhCA,EAAUnQ,EAAGC,GAEb,IAAM,IAAIlD,EAAI,EAAGA,EAAIiD,EAAE2U,SAAS1Y,OAAQc,IAEvCyjK,EAAkBxgK,EAAE2U,SAAU5X,GAAKkD,EAAE0U,SAAU5X,GAAKoT;;;;;;;;;;;;;;GAzCpDqwJ,CAAkBtkK,EAAQkN,GAAO,SAAWq3J,EAAYC,GAEvDJ,EAAa7sK,IAAKitK,EAAYD,GAC9BF,EAAY9sK,IAAKgtK,EAAYC,MAI9Bt3J,EAAMka,UAAU,SAAWsmG,GAE1B,GAAOA,EAAKzjF,cAAZ,CAEA,IAAIw6H,EAAa/2C,EACbg3C,EAAaN,EAAa1rK,IAAKg1H,GAC/Bi3C,EAAcD,EAAWziG,SAASD,MAEtCyiG,EAAWxiG,SAAWyiG,EAAWziG,SAAS/0D,QAC1Cu3J,EAAW12E,WAAW5gF,KAAMu3J,EAAW32E,YAEvC02E,EAAWxiG,SAASD,MAAQ2iG,EAAY5pI,KAAK,SAAWo0D,GAEvD,OAAOk1E,EAAY3rK,IAAKy2F,MAIzBs1E,EAAWr2E,KAAMq2E,EAAWxiG,SAAUwiG,EAAW12E,gBAI3C7gF,GAiCT,MAAM03J,GAAY1sK,OAAO,YACnB2sK,GAAW3sK,OAAO,WAClB4sK,GAAgB5sK,OAAO,gBACvB6sK,GAAS7sK,OAAO,SActB,MAAMuwJ,GACFnzJ,YAAY8zJ,GACR1yJ,KAAKouK,IAAiB1b,EAO1B9zJ,eAAe0K,GACX,GAAoB,MAAhBA,EAAOw0C,MACP,MAAM,IAAIxvC,MAAM,+BAEpB,GAAIhF,EAAO4kK,IACP,OAAO5kK,EAEX,MAAMglK,EAAWtuK,KAAKmuK,IAAU7kK,GAIhC,OADAglK,EAASJ,KAAa,EACfI,EAMX1vK,OAAQuvK,IAAU7kK,GAGd,MAAMw0C,MAAEA,GAAUx0C,EACZ2/I,EAAS,CAACnrG,GAChB,OAAO9+C,OAAOuG,OAAOvG,OAAOuG,OAAO,GAAI+D,GAAS,CAAEw0C,MAAAA,EAAOmrG,OAAAA,IAE7DpoC,aACI,OAAO7gH,KAAKouK,IAAevtD,OAE/BrG,iBACI,OAAOx6G,KAAKouK,IAAe5zD,WAE/B18D,YACI,OAAO99C,KAAKouK,IAAetwH,MAE/BmrG,aACI,OAAOjpJ,KAAKouK,IAAenlB,OAE/Bx7E,cACI,OAAOztE,KAAKouK,IAAe3gG,QAE/BuvE,YACI,OAAOh9I,KAAKouK,IAAepxB,MAE/B/uH,eACI,OAAOjuB,KAAKouK,IAAengJ,SAK/BrvB,QAGI,OAAO,IAAI2vK,EAFqBvuK,KAAKkD,aAClBlD,KAAKquK,OAO5BzvK,UACIoB,KAAKipJ,OAAO3oJ,QAASw9C,IACjBA,EAAMptB,SAAUxP,IACZ,IAAKA,EAAOsQ,OACR,OAEJ,MAAMklB,EAAOx1B,GACKjiB,MAAMkY,QAAQu/B,EAAK7kB,UAAY6kB,EAAK7kB,SAAW,CAAC6kB,EAAK7kB,WAC7DvxB,QAAQuxB,IACdA,EAASza,YAEbs/B,EAAKh1B,SAAStK,cAO1BxY,CAACyvK,MACG,MAAM/kK,EAAStJ,KAAKouK,IAGdtwH,EAAQ2vH,GAAoBztK,KAAK89C,OACjCmrG,EAAS,CAACnrG,GACV7vB,EAAW3kB,EAAO2kB,SAAWjvB,OAAOuG,OAAO,GAAI+D,EAAO2kB,UAAY,GACxE,OAAOjvB,OAAOuG,OAAOvG,OAAOuG,OAAO,GAAI+D,GAAS,CAAEw0C,MAAAA,EAAOmrG,OAAAA,EAAQh7H,SAAAA;;;;GAQzE,MAAMugJ,GAAwB,8GAuBxBC,GAAyBjtK,OAAO,yBAChCktK,GAAwBltK,OAAO;;;;;;;;;;;;;;GAMrC,MAAMmtK,WAAgC5c,GAIlCnzJ,OAAQuvK,IAAU7kK,GACd,MAAMglK,EAAWvuK,MAAMouK,IAAU7kK,GACM,MAAnCglK,EAASI,MACTJ,EAASI,IAAyBlD,GAAqB76D,KAAK29D,IAEhE,MAAMxwH,MAAEA,GAAUwwH,EACZM,EAAoB,GAC1B9wH,EAAMptB,SAAUsmG,IAcZ,GAXAA,EAAKhpG,YAAc,IAInBgpG,EAAKjpG,eAAgB,EAIhBipG,EAAK71H,OACN61H,EAAK71H,KAAO61H,EAAKzhH,OAEhByhH,EAAKxlG,OACN,OAEJwlG,EAAKnpG,YAAa,EAClB,MAAM6oB,EAAOsgF,EACb,IAAI30F,GAAc,GACApjC,MAAMkY,QAAQu/B,EAAK7kB,UAAY6kB,EAAK7kB,SAAW,CAAC6kB,EAAK7kB,WAC7DvxB,QAAQuxB,IACVA,EAASw5C,yBACLx5C,EAASwQ,aA/9vDd,IA+9vD6BxQ,EAASqQ,OACjCG,GAAc,EACdxQ,EAASqQ,KAn+vDf,GAq+vDE2sI,GAASC,UAAUC,mBAAmBj5J,gBAAgB+b,MAG1DwQ,GACAusI,EAAkBzwK,KAAKu4C,KAW/B,IAAK,MAAMA,KAAQk4H,EAAmB,CAClC,MACMI,GADY/vK,MAAMkY,QAAQu/B,EAAK7kB,UAAY6kB,EAAK7kB,SAAW,CAAC6kB,EAAK7kB,WAClCwS,IAAKxS,IACtC,MAAMo9I,EAAep9I,EAASrb,QAE9B,OADAy4J,EAAa/sI,KAv/vDZ,EAw/vDM+sI,IAELC,EAAoBjwK,MAAMkY,QAAQu/B,EAAK7kB,UACzCm9I,EACAA,EAAmB,GACjBG,EAAW,IAAIv8H,GAAK8D,EAAKh1B,SAAUwtJ,GACzCC,EAASnhJ,aAAe,EACxB0oB,EAAKz1B,IAAIkuJ,GAEb,OAAOb,EAEXc,2BACI,OAAOpvK,KAAKouK,IAAeM,IAK/B9vK,CAACyvK,MACG,MAAM73J,EAAQzW,MAAMsuK,MACdgB,EAA6B,IAAItuK,IAqBvC,OApBAyV,EAAMsnC,MAAMptB,SAAUsmG,IAKlB,GAAIA,EAAKxlG,OAAQ,CACb,MAAMklB,EAAOsgF,EACT/3H,MAAMkY,QAAQu/B,EAAK7kB,UACnB6kB,EAAK7kB,SAAW6kB,EAAK7kB,SAASwS,IAAKxS,GAAa7xB,KAAKyuK,IAAwB58I,EAAUw9I,IAEjE,MAAjB34H,EAAK7kB,WACV6kB,EAAK7kB,SAAW7xB,KAAKyuK,IAAwB/3H,EAAK7kB,SAAUw9I,OAOxE74J,EAAMk4J,IACFlD,GAAqB76D,KAAKn6F,EAAOxW,KAAKovK,sBACnC54J,EAMX5X,CAAC6vK,IAAwB58I,EAAUw9I,GAI/B,GAAIA,EAA2BprK,IAAI4tB,EAAStc,MACxC,OAAO85J,EAA2BrtK,IAAI6vB,EAAStc,MAEnD,MAAMiB,EAAQqb,EAASrb,QAMjB84J,EAAqBz9I,EAAS2T,gBAuBpC,OAtBAhvB,EAAMgvB,gBAAkB3T,EAASmvH,iCAC5BriG,IACG2wH,EAAmB3wH,OAAQh+C,GAC3Bg+C,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAQ,gCAAiCmrG,KAE1F7vH,IACGA,EAAO/D,eAAiB+D,EAAO/D,eAAeyoB,QAAQ,gCAAiCmrG,IACvFc,EAAmB3wH,OAAQh+C,IAGnC6V,EAAMktB,WA/jwDI,EAkkwDNltB,EAAM6rB,cACN7rB,EAAMssB,YAAa,GAIlBtsB,EAAMytB,WAAcztB,EAAM6rB,cAC3B7rB,EAAMytB,WAAa,IAEvBorI,EAA2BxuK,IAAIgxB,EAAStc,KAAMiB,GACvCA,GAOf,IA+nBI+4J,GAAMC,GA/nBNC,GAAa,SAAWnyD,GAE3BkB,GAAkB74G,KAAM3F,KAAMs9G,GAE9Bt9G,KAAKlB,KA1hwDmB,MA8hwDzB2wK,GAAWnuK,UAAYtC,OAAOuG,OAAQvG,OAAOoX,OAAQooG,GAAkBl9G,WAAa,CAEnF4B,YAAausK,GAIbpwK,MAAO,SAAWwiD,GAEjB,IAUC6tH,EAAa,SAAWC,EAAiBC,GAExC,OAASD,GAER,KARgB,EAQMrxK,QAAQ0R,MAAO,2BAA8B4/J,GAAO,KACzE,MACD,KATiB,EASMtxK,QAAQ0R,MAAO,4BAA+B4/J,GAAO,KAC3E,MACD,KAVkB,EAUMtxK,QAAQ0R,MAAO,gCAAmC4/J,GAAO,KAChF,MACD,QACA,KAZkB,EAYMtxK,QAAQ0R,MAAO,uBAA0B4/J,GAAO,KAIzE,OAtBqB,GAyCtBC,EAAQ,SAAWhuH,EAAQiuH,EAAWC,GAErCD,EAAcA,GAAY,KAK1B,IAJA,IAAItvK,EAAIqhD,EAAOirH,IACd3iK,GAAM,EAAGiR,EAAM,EAAGxd,EAAI,GACtBoyK,EAAQ5yK,OAAOwtH,aAAazvC,MAAO,KAAM,IAAIpyC,YAAa8Y,EAAOW,SAAUhiD,EAAGA,EADxC,OAG7B,GAAM2J,EAAI6lK,EAAMpmK,QATjB,QAS6CwR,EAAM00J,GAAiBtvK,EAAIqhD,EAAOu0F,YAEvFx4I,GAAKoyK,EAAO50J,GAAO40J,EAAM3mK,OACzB7I,GANsC,IAOtCwvK,GAAS5yK,OAAOwtH,aAAazvC,MAAO,KAAM,IAAIpyC,YAAa8Y,EAAOW,SAAUhiD,EAAGA,EAPzC,OAWvC,OAAO,EAAI2J,KAQL,IAAU4lK,IAAUluH,EAAOirH,KAAO1xJ,EAAMjR,EAAI,GAC1CvM,EAAIoyK,EAAMzyK,MAAO,EAAG4M,KA6O1B8lK,EAAqB,SAAW72C,EAAa82C,EAAcC,EAAWC,GAEzE,IAAI9rK,EAAI80H,EAAa82C,EAAe,GAChC7lJ,EAAQhtB,KAAKkL,IAAK,EAAKjE,EAAI,KAAU,IAEzC6rK,EAAWC,EAAa,GAAMh3C,EAAa82C,EAAe,GAAM7lJ,EAChE8lJ,EAAWC,EAAa,GAAMh3C,EAAa82C,EAAe,GAAM7lJ,EAChE8lJ,EAAWC,EAAa,GAAMh3C,EAAa82C,EAAe,GAAM7lJ,GAI7DgmJ,EAAoB,WAIvB,IAAIC,EAAY,IAAIjnI,aAAc,GAC9BknI,EAAY,IAAItnI,WAAYqnI,EAAUzuH,QAK1C,SAAS2uH,EAAQC,GAEhBH,EAAW,GAAMG,EACjB,IAAI7nK,EAAI2nK,EAAW,GAEf1hF,EAASjmF,GAAK,GAAO,MACrB0C,EAAM1C,GAAK,GAAO,KAClBtE,EAAMsE,GAAK,GAAO,IAItB,OAAKtE,EAAI,IAAauqF,EAGjBvqF,EAAI,KAERuqF,GAAQ,MAGRA,IAAiB,KAALvqF,EAAa,EAAI,IAAa,QAAJsE,GAMlCtE,EAAI,IAKRuqF,KAHAvjF,GAAK,OAGY,IAAMhH,IAAYgH,GAAO,IAAMhH,EAAQ,IAKzDuqF,GAAYvqF,EAAI,KAAS,GAASgH,GAAK,EAGvCujF,GAAY,EAAJvjF,GAKT,OAAO,SAAW8tH,EAAa82C,EAAcC,EAAWC,GAEvD,IAAI9rK,EAAI80H,EAAa82C,EAAe,GAChC7lJ,EAAQhtB,KAAKkL,IAAK,EAAKjE,EAAI,KAAU,IAEzC6rK,EAAWC,EAAa,GAAMI,EAAQp3C,EAAa82C,EAAe,GAAM7lJ,GACxE8lJ,EAAWC,EAAa,GAAMI,EAAQp3C,EAAa82C,EAAe,GAAM7lJ,GACxE8lJ,EAAWC,EAAa,GAAMI,EAAQp3C,EAAa82C,EAAe,GAAM7lJ,IA5DlD,GAkEpBqmJ,EAAY,IAAIjoI,WAAYoZ,GAChC6uH,EAAU5D,IAAM,EAChB,IAAI6D,EAnTe,SAAW9uH,GAE5B,IAAIjvB,EAAM7pB,EAIT6nK,EAAW,oCACXC,EAAc,uCACdC,EAAY,uBACZC,EAAgB,oCAGhB1vD,EAAS,CAERpI,MAAO,EAEP/4E,OAAQ,GAER8wI,SAAU,GAEVC,YAAa,OAEb77J,OAAQ,GAER87J,MAAO,EAEPjU,SAAU,EAEV9uJ,MAAO,EAAGC,OAAQ,GAIpB,GAAKyzC,EAAOirH,KAAOjrH,EAAOu0F,cAAkBxjH,EAAOi9I,EAAOhuH,IAEzD,OAAO6tH,EAzGS,EAyGoB,mBAKrC,KAAS3mK,EAAQ6pB,EAAK7pB,MAlCJ,eAoCjB,OAAO2mK,EA9GW,EA8GoB,qBAQvC,IAJAruD,EAAOpI,OApFiB,EAqFxBoI,EAAO4vD,YAAcloK,EAAO,GAC5Bs4G,EAAOnhF,QAAUtN,EAAO,MAKlB,KADLA,EAAOi9I,EAAOhuH,KAId,GAFAw/D,EAAOnhF,QAAUtN,EAAO,KAEnB,MAAQA,EAAK6N,OAAQ,IAkC1B,IA3BK13B,EAAQ6pB,EAAK7pB,MAAO6nK,MAExBvvD,EAAO6vD,MAAQ/wI,WAAYp3B,EAAO,GAAK,MAInCA,EAAQ6pB,EAAK7pB,MAAO8nK,MAExBxvD,EAAO47C,SAAW98H,WAAYp3B,EAAO,GAAK,MAItCA,EAAQ6pB,EAAK7pB,MAAO+nK,MAExBzvD,EAAOpI,OAlHU,EAmHjBoI,EAAOjsG,OAASrM,EAAO,KAInBA,EAAQ6pB,EAAK7pB,MAAOgoK,MAExB1vD,EAAOpI,OAxHc,EAyHrBoI,EAAOjzG,OAASmyB,SAAUx3B,EAAO,GAAK,IACtCs4G,EAAOlzG,MAAQoyB,SAAUx3B,EAAO,GAAK,KA3HpB,EA+HXs4G,EAAOpI,OA9HQ,EA8HyBoI,EAAOpI,MAAkC,WAhCvFoI,EAAO2vD,UAAYp+I,EAAO,KAoC5B,OAnImB,EAmIVyuF,EAAOpI,MAlIO,EAwIdoI,EAAOpI,MAMToI,EAJCquD,EA1KW,EA0KoB,gCAN/BA,EApKW,EAoKoB,4BAoNlByB,CAAiBT,GAExC,IA/XuB,IA+XMC,EAAmB,CAE/C,IAAIpiK,EAAIoiK,EAAiBxiK,MACxBsE,EAAIk+J,EAAiBviK,OACrBgjK,EA5MqB,SAAWvvH,EAAQtzC,EAAGkE,GAE3C,IAAI4+J,EAAW3hK,EAAQo9J,EAAKpsJ,EAAO4wJ,EAClCC,EAAiB32B,EAAK42B,EAASrnK,EAAGC,EAAGqnK,EAAKC,EACHC,EAAvCC,EAAiBrjK,EAAGsjK,EAAgBp/J,EAGrC,GAEKm/J,EAAiB,GAASA,EAAiB,OAE3C,IAAM/vH,EAAQ,IAAW,IAAMA,EAAQ,IAAyB,IAAdA,EAAQ,GAI9D,OAAO,IAAIpZ,WAAYoZ,GAIxB,GAAK+vH,KAAuB/vH,EAAQ,IAAO,EAAMA,EAAQ,IAExD,OAAO6tH,EAvMW,EAuMoB,wBAMvC,KAFA2B,EAAY,IAAI5oI,WAAY,EAAIl6B,EAAIkE,IAEnBpJ,OAEhB,OAAOqmK,EA9MW,EA8MoB,mCASvC,IALAhgK,EAAS,EAAGo9J,EAAM,EAAG0E,EAAU,EAAII,EACnCD,EAAY,IAAIlpI,WAAY,GAC5B8oI,EAAkB,IAAI9oI,WAAY+oI,GAGxBK,EAAgB,GAAS/E,EAAMjrH,EAAOu0F,YAAe,CAE9D,GAAK02B,EAAM,EAAIjrH,EAAOu0F,WAErB,OAAOs5B,EA9NQ,GAuOhB,GALAiC,EAAW,GAAM9vH,EAAQirH,KACzB6E,EAAW,GAAM9vH,EAAQirH,KACzB6E,EAAW,GAAM9vH,EAAQirH,KACzB6E,EAAW,GAAM9vH,EAAQirH,KAElB,GAAK6E,EAAW,IAAW,GAAKA,EAAW,KAAeA,EAAW,IAAO,EAAMA,EAAW,KAASC,EAE5G,OAAOlC,EAvOU,EAuOqB,4BAOvC,IADA90B,EAAM,EACIA,EAAM42B,GAAe1E,EAAMjrH,EAAOu0F,YAAe,CAM1D,IAHAs7B,GADAhxJ,EAAQmhC,EAAQirH,MACO,OACHpsJ,GAAS,KAEtB,IAAMA,GAAak6H,EAAMl6H,EAAQ8wJ,EAEvC,OAAO9B,EAtPS,EAsPsB,qBAIvC,GAAKgC,EAIJ,IADAJ,EAAYzvH,EAAQirH,KACd3iK,EAAI,EAAGA,EAAIuW,EAAOvW,IAEvBonK,EAAiB32B,KAAW02B,OAQ7BC,EAAgB1wK,IAAKghD,EAAOW,SAAUsqH,EAAKA,EAAMpsJ,GAASk6H,GAC1DA,GAAOl6H,EAAOosJ,GAAOpsJ,EAUvB,IADAtW,EAAIwnK,EACEznK,EAAI,EAAGA,EAAIC,EAAGD,IAEnBsnK,EAAM,EACNJ,EAAW3hK,GAAW6hK,EAAiBpnK,EAAIsnK,GAC3CA,GAAOG,EACPP,EAAW3hK,EAAS,GAAM6hK,EAAiBpnK,EAAIsnK,GAC/CA,GAAOG,EACPP,EAAW3hK,EAAS,GAAM6hK,EAAiBpnK,EAAIsnK,GAC/CA,GAAOG,EACPP,EAAW3hK,EAAS,GAAM6hK,EAAiBpnK,EAAIsnK,GAC/C/hK,GAAU,EAIXmiK,IAID,OAAOR,EAyFWS,CAAqBpB,EAAUluH,SAAUkuH,EAAU5D,KAAOv+J,EAAGkE,GAEhF,IArYsB,IAqYO2+J,EAAkB,CAE9C,OAASpxK,KAAKlB,MAEb,KAl7wDoB,KAo7wDnB,IAAIozB,EAAOk/I,EACPh8J,EAv6wDS,KAw6wDTtW,EAt7wDe,KAu7wDnB,MAED,KAn7wDa,KAw7wDZ,IAHA,IAAIizK,EAAgBX,EAAgB/nK,OAAS,EAAM,EAC/C2oK,EAAa,IAAI3oI,aAAc0oI,GAEzBxuJ,EAAI,EAAGA,EAAIwuJ,EAAaxuJ,IAEjC0sJ,EAAoBmB,EAAqB,EAAJ7tJ,EAAOyuJ,EAAgB,EAAJzuJ,GAIrD2O,EAAO8/I,EACP58J,EAx7wDQ,KAy7wDRtW,EAh8wDQ,KAi8wDZ,MAED,KAl8wDiB,KAo8wDZizK,EAAgBX,EAAgB/nK,OAAS,EAAM,EAAnD,IACI4oK,EAAY,IAAIlpI,YAAagpI,GAEjC,IAAUxuJ,EAAI,EAAGA,EAAIwuJ,EAAaxuJ,IAEjC8sJ,EAAmBe,EAAqB,EAAJ7tJ,EAAO0uJ,EAAe,EAAJ1uJ,GAInD2O,EAAO+/I,EACP78J,EAx8wDQ,KAy8wDRtW,EA/8wDY,KAg9wDhB,MAED,QAECR,QAAQ0R,MAAO,uCAAwChQ,KAAKlB,MAK9D,MAAO,CACNqP,MAAOI,EAAGH,OAAQqE,EAClByf,KAAMA,EACNmvF,OAAQsvD,EAAiBzwI,OACzBgxI,MAAOP,EAAiBO,MACxBjU,SAAU0T,EAAiB1T,SAC3B7nJ,OAAQA,EACRtW,KAAMA,IAOT,OAAO,MAIRozK,YAAa,SAAWrzK,GAGvB,OADAmB,KAAKlB,KAAOD,EACLmB,MAIR09G,KAAM,SAAWxmG,EAAK8kG,EAAQC,EAAYC,GAuCzC,OAAOsC,GAAkBl9G,UAAUo8G,KAAK/3G,KAAM3F,KAAMkX,GArCpD,SAAyBgC,EAASgpG,GAEjC,OAAShpG,EAAQpa,MAEhB,KA//wDqB,KAigxDpBoa,EAAQ5D,SA76wDQ,KA86wDhB4D,EAAQ/D,UAxgxDS,KAygxDjB+D,EAAQhE,UAzgxDS,KA0gxDjBgE,EAAQpD,iBAAkB,EAC1BoD,EAAQlD,OAAQ,EAChB,MAED,KAlgxDc,KA2gxDd,KA1gxDkB,KA4gxDjBkD,EAAQ5D,SAl8wDU,IAm8wDlB4D,EAAQ/D,UAvhxDQ,KAwhxDhB+D,EAAQhE,UAxhxDQ,KAyhxDhBgE,EAAQpD,iBAAkB,EAC1BoD,EAAQlD,OAAQ,EAKbgmG,GAASA,EAAQ9iG,EAASgpG,KAIyCjG,EAAYC;;;;;;;;;;;;;;;AAoBvF,MAAMi2D,WAAyBj9E,GAC3Bt2F,cACImB,QACAC,KAAKoqB,SAASve,GAAK,IACnB,MAAM6V,EAAW,IAAIi3B,GACrBj3B,EAASksB,gBAAgB,MACzB,MAAMwkI,EAAe,IAAI5nG,GAAqB,CAAE1kC,UAAW,EAAG5D,KArnxDrD,IAsnxDHmwI,EAAc,IAAI7nG,GAAqB,CAAE1kC,UAAW,IACpDwsI,EAAY,IAAInrD,GAAW,SAAU,IAAO,GAAI,GACtDmrD,EAAUloJ,SAASvpB,IAAI,KAAO,OAAQ,IACtCb,KAAKihB,IAAIqxJ,GACT,MAAMC,EAAO,IAAI3/H,GAAKlxB,EAAU0wJ,GAChCG,EAAKnoJ,SAASvpB,KAAK,KAAO,OAAQ,MAClC0xK,EAAKloJ,MAAMxpB,IAAI,OAAQ,OAAQ,QAC/Bb,KAAKihB,IAAIsxJ,GACT,MAAMC,EAAO,IAAI5/H,GAAKlxB,EAAU2wJ,GAChCG,EAAKpoJ,SAASvpB,KAAK,OAAQ,MAAO,OAClC2xK,EAAK7+J,SAAS9S,IAAI,GAAI,KAAO,GAC7B2xK,EAAKnoJ,MAAMxpB,IAAI,MAAO,MAAO,OAC7Bb,KAAKihB,IAAIuxJ,GACT,MAAMC,EAAO,IAAI7/H,GAAKlxB,EAAU2wJ,GAChCI,EAAKroJ,SAASvpB,KAAK,OAAQ,MAAQ,MACnC4xK,EAAK9+J,SAAS9S,IAAI,EAAG,KAAO,GAC5B4xK,EAAKpoJ,MAAMxpB,IAAI,KAAO,MAAO,OAC7Bb,KAAKihB,IAAIwxJ,GACT,MAAMC,EAAO,IAAI9/H,GAAKlxB,EAAU2wJ,GAChCK,EAAKtoJ,SAASvpB,IAAI,MAAO,KAAO,OAChC6xK,EAAK/+J,SAAS9S,IAAI,EAAG,KAAO,GAC5B6xK,EAAKroJ,MAAMxpB,IAAI,MAAO,MAAO,OAC7Bb,KAAKihB,IAAIyxJ,GACT,MAAMC,EAAO,IAAI//H,GAAKlxB,EAAU2wJ,GAChCM,EAAKvoJ,SAASvpB,KAAK,MAAO,KAAO,OACjC8xK,EAAKh/J,SAAS9S,IAAI,EAAG,KAAO,GAC5B8xK,EAAKtoJ,MAAMxpB,IAAI,MAAO,MAAO,OAC7Bb,KAAKihB,IAAI0xJ,GACT,MAAMC,EAAO,IAAIhgI,GAAKlxB,EAAU2wJ,GAChCO,EAAKxoJ,SAASvpB,IAAI,OAAQ,MAAQ,OAClC+xK,EAAKj/J,SAAS9S,IAAI,GAAI,KAAO,GAC7B+xK,EAAKvoJ,MAAMxpB,IAAI,MAAO,MAAO,OAC7Bb,KAAKihB,IAAI2xJ,GACT,MAAMC,EAAO,IAAIjgI,GAAKlxB,EAAU2wJ,GAChCQ,EAAKzoJ,SAASvpB,KAAK,OAAQ,MAAQ,OACnCgyK,EAAKl/J,SAAS9S,IAAI,EAAG,KAAO,GAC5BgyK,EAAKxoJ,MAAMxpB,IAAI,MAAO,MAAO,OAC7Bb,KAAKihB,IAAI4xJ,GAET,MAAMC,EAAS,IAAIlgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,KAC/DD,EAAO1oJ,SAASvpB,KAAK,OAAQ,MAAO,OACpCiyK,EAAOzoJ,MAAMxpB,IAAI,GAAK,MAAO,OAC7Bb,KAAKihB,IAAI6xJ,GAET,MAAME,EAAS,IAAIpgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,KAC/DC,EAAO5oJ,SAASvpB,KAAK,OAAQ,QAAS,OACtCmyK,EAAO3oJ,MAAMxpB,IAAI,GAAK,MAAO,OAC7Bb,KAAKihB,IAAI+xJ,GAET,MAAMC,EAAS,IAAIrgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,KAC/DE,EAAO7oJ,SAASvpB,IAAI,OAAQ,QAAS,OACrCoyK,EAAO5oJ,MAAMxpB,IAAI,IAAM,MAAO,OAC9Bb,KAAKihB,IAAIgyJ,GAET,MAAMC,EAAS,IAAItgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,KAC/DG,EAAO9oJ,SAASvpB,KAAK,KAAO,KAAM,OAClCqyK,EAAO7oJ,MAAMxpB,IAAI,KAAM,MAAO,MAC9Bb,KAAKihB,IAAIiyJ,GAET,MAAMC,EAAS,IAAIvgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,KAC/DI,EAAO/oJ,SAASvpB,IAAI,MAAO,QAAS,QACpCsyK,EAAO9oJ,MAAMxpB,IAAI,IAAK,EAAK,IAC3Bb,KAAKihB,IAAIkyJ,GAET,MAAMC,EAAS,IAAIxgI,GAAKlxB,EAAU1hB,KAAK+yK,wBAAwB,MAC/DK,EAAOhpJ,SAASvpB,IAAI,EAAK,GAAM,GAC/BuyK,EAAO/oJ,MAAMxpB,IAAI,EAAK,GAAK,GAC3Bb,KAAKihB,IAAImyJ,GAEbx0K,wBAAwB2wE,GACpB,MAAM19C,EAAW,IAAIuS,GAErB,OADAvS,EAASwO,MAAMgzI,UAAU9jG,GAClB19C;;;;;;;;;;;;;;GAsBf+pF,GAAMrjE,SAAU,EAChB,MAAM+6H,GAAc,SACdC,GAAY,IAAI90D,GAChB+0D,GAAY,IAAI/D,GAChBgE,GAAuBjyK,OAAO,uBAC9BkyK,GAA2BlyK,OAAO,2BAClCmyK,GAAkBnyK,OAAO,kBACzBoyK,GAAepyK,OAAO,eACtBqyK,GAA6BryK,OAAO,6BACpCsyK,GAA+BtyK,OAAO,+BAKtCysB,GAAW,CACb/W,IAAK,KAELnC,QAAS,MAEb,MAAMg/J,WAAqBvqK,EACvB5K,YAAY0oK,GACRvnK,QACAC,KAAKuvK,IAAQ,KACbvvK,KAAKwvK,IAAQ,IAAIzuK,IACjBf,KAAK2zK,IAAmB,IAAItsC,GAAeigC,GAE/C0M,qBACI,OAAOh0K,KAAK2zK,IAEhB/0K,WAAWsY,EAAKg7I,EAAmB,UAC/B,IACIlyJ,KAAK2zK,IAAiBM,+BACtB,MAAMC,EAAQZ,GAAYjsK,KAAK6P,GACzB8lG,EAASk3D,EAAQV,GAAYD,GAC7Br6J,QAAgB,IAAIrW,QAAQ,CAAC+6G,EAASC,IAAWb,EAAOU,KAAKxmG,EAAK0mG,EAAU3zG,IAC9EioJ,EAAiBjoJ,EAAMy3G,OAASz3G,EAAM8vH,MAAQ,KAC/Clc,IAYH,OAXAq0C,EAAiB,GACjBlyJ,KAAK4zK,IAAc16J,EAAShC,EAAK,mBAC7Bg9J,GACAh7J,EAAQ5D,SA7mxDH,KA8mxDL4D,EAAQ/D,UAxsxDF,KAysxDN+D,EAAQhE,UAzsxDF,KA0sxDNgE,EAAQlD,OAAQ,GAGhBkD,EAAQ5D,SApnxDF,KAsnxDH4D,UAGHg5I,GACAA,EAAiB,IAI7BtzJ,2BAA2BsY,EAAKg7I,EAAmB,UAC/C,IAAIpjG,EAAW,KACf,IACIA,QAAiB9uD,KAAK09G,KAAKxmG,EAAKg7I,GAChC,MAAMiiB,EAASn0K,KAAK2zK,IAAiBS,oBAAoBtlH,GAEzD,OADA9uD,KAAK4zK,IAAcO,EAAOj7J,QAAShC,EAAK,UACjCi9J,UAGS,MAAZrlH,GACAA,EAAS13C,WASrBxY,sCAAsCy1K,EAAY,KAAMC,EAAoB,KAAMx2K,EAAU,IACxF,MAAMy2K,gBAAEA,GAAoBz2K,EACtB02K,EAA8C,MAAnBD,EAA0BA,EAAgBE,gBAAkB,OAC7F,IACI,IACIC,EADAC,EAAc9xK,QAAQ+6G,QAAQ,MAG5By2D,IACFM,EACI30K,KAAK6zK,IAA4BQ,EAAWE,IAIhDG,EAFEJ,EAEoBt0K,KAAK6zK,IAA4BS,EAAmBC,GAEnEF,EAEeM,EAIA30K,KAAK8zK,MAE/B,IAAKc,EAAgBC,SAAgBhyK,QAAQw0I,IAAI,CAACq9B,EAAqBC,IACvE,GAAsB,MAAlBC,EACA,MAAM,IAAItmK,MAAM,mCAOpB,OALAsmK,EAAiBA,EACjB50K,KAAK4zK,IAAcgB,EAAe17J,QAASo7J,EAAmB,SAChD,MAAVO,GACA70K,KAAK4zK,IAAciB,EAAO37J,QAASm7J,EAAW,SAE3C,CAAEO,eAAAA,EAAgBC,OAAAA,WAGzBL,EAAyB,IAGjC51K,EAAE2wK,GAAOmE,GAA0BlE,GAAOiE,GAAsBG,KAAe16J,EAAShC,EAAKnC,GAC1E,MAAXmE,IAGJA,EAAQ+U,SAAWjvB,OAAOuG,OAAOvG,OAAOuG,OAAO,GAAI0oB,KAC/C/W,IAAKA,EACLnC,QAASA,KAOjBnW,CAACi1K,IAA4B38J,EAAKq9J,GAC9B,IAAKv0K,KAAKyzK,IAAsBxvK,IAAIiT,GAAM,CACtC,MAAMg7I,EAAmBqiB,EAAkBA,EAAgBE,gBAAkB,OACvEC,EAAsB10K,KAAK80K,qBAAqB59J,EAAKg7I,GAC3DlyJ,KAAKyzK,IAAsB5yK,IAAIqW,EAAKw9J,GAExC,OAAO10K,KAAKyzK,IAAsBzxK,IAAIkV,GAK1CtY,CAACk1K,MACG,GAAsC,MAAlC9zK,KAAK0zK,IAAmC,CACxC,MAAMqB,EAAe,IAAI5C,GACzBnyK,KAAK0zK,IACD1zK,KAAK2zK,IAAiBqB,UAAUD,EAhJxB,KAkJhB,OAAOlyK,QAAQ+6G,QAAQ59G,KAAK0zK,KAEhC90K,gBACI,MAAMq2K,EAAiB,GAIvBj1K,KAAKyzK,IAAsBnzK,QAAS40K,IAChCD,EAAe92K,KAAK+2K,KAExBl1K,KAAKyzK,IAAsBr1H,QAC3B,IAAK,MAAM82H,KAAeD,EACtB,WACyBC,GACd99J,UAEX,MAAO9S,IAI2B,MAAlCtE,KAAK0zK,MACL1zK,KAAK0zK,IAA0Bt8J,UAC/BpX,KAAK0zK,IAA4B;;;;;;;;;;;;;;GAmB7C,IAAIyB,GAAMC,GAEV,MAMMC,GAAsB7zK,OAAO,sBAC7B8zK,GAA2B9zK,OAAO,2BAClC+zK,GAAa/zK,OAAO,aAY1B,MAAMqtK,WAAiBrlK,EACnB5K,YAAYd,GACRiC,QACAC,KAAKg9G,OAAS,IAAI80C,GAAkB6c,IACpC3uK,KAAKmO,MAAQ,EACbnO,KAAKoO,OAAS,EACdpO,KAAKw1K,IAAM,EACXx1K,KAAKy1K,SAtBa,GAuBlBz1K,KAAK01K,SAAW,KAChB11K,KAAKipJ,OAAS,IAAIgjB,IAClBjsK,KAAK21K,uBAAwB,EAC7B31K,KAAKqqB,MAAQ,EACbrqB,KAAK41K,iBAAmB,GACxB51K,KAAKo1K,IAASnrK,GAAUjK,KAAKq1K,IAAqBprK,GAClDjK,KAAKw1K,IAAMrV,KACXngK,KAAK61K,cAAgBhuK,SAASC,cAAc,UAC5C9H,KAAK61K,cAAc5lJ,GAAK,eACxBjwB,KAAK81K,SACD91K,KAAK61K,cACT71K,KAAK81K,SAAS93K,iBAAiB,mBAAoBgC,KAAKs1K,KACxD,IACIt1K,KAAKsnK,cAAgB,IAAIh0E,GAAe,CACpCj/E,OAAQrU,KAAK81K,SACbvmK,OAAO,EACPk2E,WAAW,EACX4E,gBAAiB,mBACjBF,uBAAuB,IAE3BnqF,KAAKsnK,cAAc52G,WAAY,EAC/B1wD,KAAKsnK,cAAcn/F,eAjzxDT,KAkzxDVnoE,KAAKsnK,cAAc3mI,YAAc,IACjC3gC,KAAKsnK,cAAcz/F,yBAA0B,EAC7C7nE,KAAKsnK,cAAct5E,cAAc,GACjChuF,KAAKsnK,cAAcp7F,UAAU3zB,SAAU,EACvCv4C,KAAKsnK,cAAcp7F,UAAUptE,KAv8xDhB,EAw8xDbkB,KAAKsnK,cAAcp7F,UAAU8H,YAAa,EAC1Ch0E,KAAK01K,SACU,MAAX53K,GAAqBA,EAAQ6qE,MAAQ,IAAIoiG,GAAS/qK,MAAQ,KAC9DA,KAAKsnK,cAAc3+F,MAAQ,CAAEC,oBAAqB5oE,KAAK01K,UAGvD11K,KAAKsnK,cAAct2G,YAn6xDD,EAq6xDtB,MAAOhhD,GACH1R,QAAQC,KAAKyR,GAEjBhQ,KAAK+1K,WAAa,IAAIhP,GAAW/mK,MACjCA,KAAKg2K,aACDh2K,KAAKi2K,UAAY,IAAIlC,GAAa/zK,KAAKsnK,eAAiB,KAC5DtnK,KAAK+uK,mBAAqB,IAAI9P,GAAmBj/J,KAAKsnK,eACtDtnK,KAAKk2K,qBACLl2K,KAAKm2K,SAAWnN,YAAY5qC,MAC5Bp+H,KAAK41K,iBAAmB,EAE5B9G,uBACI,OAAO9uK,KAAKu1K,IAEhB32K,wBACIoB,KAAKu1K,IAAYn+J,UACjBpX,KAAKu1K,IAAc,IAAI1G,GAAS,CAAElmG,MAAO83F,OAE7CwV,gBACI,OAA6B,MAAtBj2K,KAAKsnK,cAEhB8O,kBACI,OAAOp2K,KAAKqqB,MAMhBzrB,qBACI,MAAM42K,EAAMrV,KACZ,GAAIqV,IAAQx1K,KAAKw1K,IAIb,IAAK,MAAM13H,KAAS99C,KAAKipJ,OAAQ,CAC7B,MAAM5jJ,QAAEA,GAAYy4C,EACpBz4C,EAAQgxK,IAAahxK,EAAQgkK,yBAIrC,IAAIl7J,EAAQ,EACRC,EAAS,EACb,IAAK,MAAM0vC,KAAS99C,KAAKipJ,OACrB96I,EAAQ9Q,KAAK8N,IAAIgD,EAAO2vC,EAAM3vC,OAC9BC,EAAS/Q,KAAK8N,IAAIiD,EAAQ0vC,EAAM1vC,QAEpC,GAAID,IAAUnO,KAAKmO,OAASC,IAAWpO,KAAKoO,QAAUonK,IAAQx1K,KAAKw1K,IAC/D,OAEJx1K,KAAKmO,MAAQA,EACbnO,KAAKoO,OAASA,EACdpO,KAAKw1K,IAAMA,EACPx1K,KAAKi2K,WACLj2K,KAAKsnK,cAAc7tJ,QAAQtL,EAAQqnK,EAAKpnK,EAASonK,GAAK,GAG1D,MAAMc,EAAWnoK,EAAQnO,KAAKqqB,MACxBksJ,EAAYnoK,EAASpO,KAAKqqB,MAGhCrqB,KAAK61K,cAAc71I,MAAM7xB,MAAWmoK,EAAH,KACjCt2K,KAAK61K,cAAc71I,MAAM5xB,OAAYmoK,EAAH,KAIlC,IAAK,MAAMz4H,KAAS99C,KAAKipJ,OAAQ,CAC7B,MAAM50I,OAAEA,GAAWypC,EACnBzpC,EAAOlG,MAAQA,EAAQqnK,EACvBnhK,EAAOjG,OAASA,EAASonK,EACzBnhK,EAAO2rB,MAAM7xB,MAAWmoK,EAAH,KACrBjiK,EAAO2rB,MAAM5xB,OAAYmoK,EAAH,KACtBz4H,EAAMk/G,SAAU,GAGxBp+J,sBACI,IAAIyrB,MAAEA,GAAUrqB,KAUhB,GATIA,KAAK41K,iBAzIc,IA0InBvrJ,EAAQrqB,KAAKy1K,SACbprJ,GAzIO,IA2IFrqB,KAAK41K,iBA9IQ,IA8IoCvrJ,EAAQ,IAC9DA,GA5IO,IA6IPA,EAAQhtB,KAAK6N,IAAImf,EAAO,IAE5BA,EAAQhtB,KAAK8N,IAAIkf,EAAOrqB,KAAKy1K,UACzBprJ,GAASrqB,KAAKqqB,MACd,OAEJrqB,KAAKqqB,MAAQA,EACbrqB,KAAK41K,iBACD,GACJ,MAAMznK,EAAQnO,KAAKmO,MAAQkc,EACrBjc,EAASpO,KAAKoO,OAASic,EAC7BrqB,KAAK61K,cAAc71I,MAAM7xB,MAAWA,EAAH,KACjCnO,KAAK61K,cAAc71I,MAAM5xB,OAAYA,EAAH,KAClC,IAAK,MAAM0vC,KAAS99C,KAAKipJ,OAAQ,CAC7B,MAAMjpH,MAAEA,GAAU8d,EAAMzpC,OACxB2rB,EAAM7xB,MAAWA,EAAH,KACd6xB,EAAM5xB,OAAYA,EAAH,KACf0vC,EAAMk/G,SAAU,GAGxBp+J,cAAck/C,GACV99C,KAAKipJ,OAAOhoI,IAAI68B,GAChB,MAAMzpC,OAAEA,GAAWypC,EACnBzpC,EAAOlG,MAAQnO,KAAKmO,MAAQnO,KAAKw1K,IACjCnhK,EAAOjG,OAASpO,KAAKoO,OAASpO,KAAKw1K,IACnCnhK,EAAO2rB,MAAM7xB,MAAWnO,KAAKmO,MAAQnO,KAAKqqB,MAArB,KACrBhW,EAAO2rB,MAAM5xB,OAAYpO,KAAKoO,OAASpO,KAAKqqB,MAAtB,KAClBrqB,KAAK21K,uBACLthK,EAAOqkJ,UAAUz3I,IAAI,QAEzB68B,EAAMk/G,SAAU,EACZh9J,KAAKi2K,WAAaj2K,KAAKipJ,OAAO/jJ,KAAO,GACrClF,KAAKsnK,cAAcnmH,iBAAkBL,GAAS9gD,KAAKm+C,OAAO2C,IAEzC,MAAjB9gD,KAAK01K,UACL11K,KAAK01K,SAASc,SAAS14H,GAG/Bl/C,gBAAgBk/C,GACZ99C,KAAKipJ,OAAOnnG,OAAOhE,GACf99C,KAAKi2K,WAAkC,IAArBj2K,KAAKipJ,OAAO/jJ,MAC9BlF,KAAKsnK,cAAcnmH,iBAAiB,MAEnB,MAAjBnhD,KAAK01K,UACL11K,KAAK01K,SAASe,YAAY34H,GAGlCl/C,cAAck/C,GACV,OAAO99C,KAAK21K,sBAAwB73H,EAAMz4C,QAAQqxK,IAC9C12K,KAAK61K,cAQbj3K,eACI,IAAI+3K,EAAgB,EAChBC,EAAe,KACnB,IAAK,MAAM94H,KAAS99C,KAAKipJ,OAAQ,CAC7B,MAAM5jJ,QAAEA,GAAYy4C,EAChBz4C,EAAQwxK,mBACNF,EACFC,EAAevxK,EAAQyxK,KAG/B,MAAMnB,EAAwBgB,EAAgB,GAtrzDzB,OAurzDfd,cAAEA,GAAkB71K,KAC1B,GAAI21K,IAA0B31K,KAAK21K,wBAC9BA,GACGE,EAAckB,gBAAkBH,EAFxC,CAKA52K,KAAK21K,sBAAwBA,EACzBA,GACAE,EAAcnd,UAAU5oI,OAAO,QAEnC,IAAK,MAAMguB,KAAS99C,KAAKipJ,OAAQ,CAC7B,MAAM+tB,EAAmBl5H,EAAMz4C,QAAQyxK,IACjCziK,EAASypC,EAAMz4C,QAAQqxK,IACzBf,GACAthK,EAAOqkJ,UAAUz3I,IAAI,QACrB68B,EAAMk/G,SAAU,GAEXga,IAAqBJ,IAC1BI,EAAiBriB,YAAYkhB,GAC7BA,EAAcnd,UAAUz3I,IAAI,QAC5B5M,EAAOqkJ,UAAU5oI,OAAO,QACxBguB,EAAMk/G,SAAU,KAS5Bp+J,gBACI,MAAMqqJ,EAAS,GACf,IAAK,MAAMr7H,IAAW,EAAC,GAAO,GAC1B,IAAK,MAAMkwB,KAAS99C,KAAKipJ,OACjBnrG,EAAMz4C,QAAQwxK,iBAAmBjpJ,GACjCq7H,EAAO9qJ,KAAK2/C,GAIxB,OAAOmrG,EAEX5kE,mBACI,OAAOrkF,KAAK+1K,WAAW1xF,aAM3BzlF,UAAUk/C,EAAOhyC,EAAG+mB,GAChB,MAAMxtB,QAAEA,EAAO43J,SAAEA,EAAQ1D,MAAEA,GAAUz7G,EACrCz4C,EAAQ4xK,IAASnrK,EAAG+mB,GACpB,MAAMqkJ,EAAuC,iBAAbja,IAA0B32J,KAAKmpC,MAAMwtH,GACrEj9J,KAAKsnK,cAAc58E,oBAAsBwsF,EAAmBja,EAAW,EACnE1D,EAAM4d,iBACNn3K,KAAKsnK,cAAcp7F,UAAUl+B,aAAc,GAGnDpvC,OAAOkN,GACH,MAAM+mB,EAAQ/mB,EAAI9L,KAAKm2K,SAEvB,GADAn2K,KAAKm2K,SAAWrqK,GACX9L,KAAKi2K,WAAaj2K,KAAKqkF,aACxB,OAEJrkF,KAAK41K,kBAAoB3qK,GApRV,IAoRkC4nB,EAAQ7yB,KAAK41K,mBAjR5C,EAAA,GAkRlB51K,KAAKo3K,eACLp3K,KAAKk2K,qBACLl2K,KAAKq3K,sBACL,MAAM7B,IAAEA,EAAGnrJ,MAAEA,GAAUrqB,KACvB,IAAK,MAAM89C,KAAS99C,KAAKs3K,gBAAiB,CACtC,IAAKx5H,EAAMz4C,QAAQkyK,MACf,SAGJ,GADAv3K,KAAK8qK,UAAUhtH,EAAOhyC,EAAG+mB,IACpBirB,EAAMk/G,QACP,SAGJ,GADAl/G,EAAMk/G,SAAU,GACXl/G,EAAMz4C,QAAQwxK,iBAAmB72K,KAAK21K,sBAGvC,IAAK,MAAM73H,KAAS99C,KAAKipJ,OACjBnrG,EAAMz4C,QAAQwxK,iBACd/4H,EAAMk/G,SAAU,GAM5B,MAAM7uJ,EAAQ9Q,KAAK6N,IAAI7N,KAAKyP,KAAKgxC,EAAM3vC,MAAQkc,EAAQmrJ,GAAMx1K,KAAK81K,SAAS3nK,OACrEC,EAAS/Q,KAAK6N,IAAI7N,KAAKyP,KAAKgxC,EAAM1vC,OAASic,EAAQmrJ,GAAMx1K,KAAK81K,SAAS1nK,QAM7E,GAHApO,KAAKsnK,cAAcppH,gBAAgB,MACnCl+C,KAAKsnK,cAAcp5E,YAAY,EAAG7wF,KAAKqL,MAAM1I,KAAKoO,OAASonK,GAAOpnK,EAAQD,EAAOC,GACjFpO,KAAKsnK,cAAcnpH,OAAOL,EAAOA,EAAMooC,aACnClmF,KAAK21K,sBAAuB,CACP,MAAjB73H,EAAMvpC,SACNupC,EAAM05H,gBAEV,CACI,MAAMC,EAAY35H,EAAMvpC,QACxBkjK,EAAUC,UAAU,EAAG,EAAGvpK,EAAOC,GACjCqpK,EAAU9iK,UAAU3U,KAAK81K,SAAU,EAAG,EAAG3nK,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,MAKrFxP,UAC6B,MAArBoB,KAAKg2K,cACLh2K,KAAKg2K,aAAa5+J,UAEI,MAAtBpX,KAAKsnK,eACLtnK,KAAKsnK,cAAclwJ,UAEvBpX,KAAKg2K,aAAe,KACpBh2K,KAAKsnK,cAAgB,KACrBtnK,KAAKipJ,OAAO7qG,QACZp+C,KAAK81K,SAAS73K,oBAAoB,mBAAoB+B,KAAKs1K,KAE/D12K,EAAEu2K,GAAOI,GAAYH,GAAOE,GAA0BD,KAAsBprK,GACxEjK,KAAKgK,cAAc,CAAElL,KAAM,cAAe64K,YAAa1tK,KAG/D4kK,GAASsG,IAAQ,IAAItG,GAAS,CAAElmG,MAAO83F;;;;;;;;;;;;;;;AA0DvC,IAAImX,GAAMC,GACV,MAAMC,GAAqBt2K,OAAO,qBAC5Bu2K,GAAyBv2K,OAAO,yBAChCw2K,GAAiBx2K,OAAO,iBAsB9B,MAAMy2K,GACFr5K,cAIIoB,KAAK43K,IAAQ/vK,SAASqwK,yBAItBl4K,KAAKhC,iBAAmB,IAAI+hK,IAAS//J,KAAKg4K,IAAgBh6K,oBAAoB+hK,GAC9E//J,KAAK/B,oBAAsB,IAAI8hK,IAAS//J,KAAKg4K,IAAgB/5K,uBAAuB8hK,GACpF//J,KAAKgK,cAAgB,IAAI+1J,IAAS//J,KAAKg4K,IAAgBhuK,iBAAiB+1J,GACxE//J,KAAK63K,IAAQ,IAAI5L,IAKrBkM,2BACI,OAAOn4K,KAAK83K,IAAoB5yK,KAiBpCtG,gBACI,MAAMw5K,EAAW,CAAE9lB,SAAU,GAO7B,OANAtyJ,KAAK83K,IAAoB72J,IAAIm3J,GACK,IAA9Bp4K,KAAKm4K,sBAGLn4K,KAAK+3K,MAEDzlB,IACJ,IAAI+lB,EAMJ,OALAA,EAAeh7K,KAAK8N,IAAIF,GAAMqnJ,EAAU,EAAG,GAAI8lB,EAAS9lB,UACpD+lB,IAAiBD,EAAS9lB,WAC1B8lB,EAAS9lB,SAAW+lB,EACpBr4K,KAAK+3K,OAEFK,EAAS9lB,UAGxB1zJ,EAAEg5K,GAAOI,GAAgBH,GAAOC,GAAoBC,OAChD,IAAIO,EAAgB,EAChBC,EAAc,EACdC,EAAsB,EAC1B,IAAK,MAAMJ,KAAYp4K,KAAK83K,IAAqB,CAC7C,MAAMxlB,SAAEA,GAAa8lB,EAErBE,GAAiBhmB,GAjFI,GAgF6Bj1J,KAAKkL,IAAI,EAAGgwK,MAE7C,IAAbjmB,GACAkmB,IAGJA,IAAwBx4K,KAAKm4K,uBAC7BG,EAAgB,EAChBt4K,KAAK83K,IAAoB15H,SAE7Bp+C,KAAKgK,cAAc,IAAIopF,YAAY,WAAY,CAAEC,OAAQ,CAAEilF,cAAAA;;;;;;;;;;;;;;GAkBnE,IAMIG,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GANtDC,GAAoD,SAAUC,EAAYpwK,EAAQzH,EAAK83K,GAGlF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAGhE,MAKMimK,GAAa1xK,SAASC,cAAc,UAC1C,IAAI0xK,GAAc,KAClB,MAAMC,GAAYj4K,OAAO,YACnBk4K,GAAyBl4K,OAAO,yBAChCm4K,GAAoBn4K,OAAO,oBAC3Bo4K,GAAkBp4K,OAAO,kBACzBq4K,GAAwBr4K,OAAO,wBAC/Bs4K,GAAqBt4K,OAAO,qBAC5Bu4K,GAAiBv4K,OAAO,iBACxBw4K,GAAsBx4K,OAAO,sBAC7By4K,GAAUz4K,OAAO,UACjB60K,GAAc70K,OAAO,cACrB04K,GAAuB14K,OAAO,uBAC9B24K,GAA2B34K,OAAO,2BAClC44K,GAAa54K,OAAO,aACpB64K,GAAc74K,OAAO,cACrB84K,GAAgB94K,OAAO,gBACvB+4K,GAAc/4K,OAAO,cACrBg5K,GAAah5K,OAAO,aACpBs1K,GAAoBt1K,OAAO,SAC3Bk1K,GAAUl1K,OAAO,UACjBi5K,GAASj5K,OAAO,SAChBk5K,GAAel5K,OAAO,eACtBy1K,GAAUz1K,OAAO,QACjBm5K,GAAen5K,OAAO,eACtBumK,GAAYvmK,OAAO,YACnBo6J,GAAYp6J,OAAO,YACnBo5K,GAAmBp5K,OAAO,mBAC1Bq5K,GAAar5K,OAAO,aACpBs5K,GAAqBt5K,OAAO,qBAC5Bu5K,GAAwBv5K,OAAO,wBAC/B+1K,GAAgB/1K,OAAO,gBACvBw5K,GAAmBx5K,OAAO,mBAC1By5K,GAAc16K,IACT,CACHqI,EAAGrI,EAAEqI,EACLiD,EAAGtL,EAAEsL,EACL4L,EAAGlX,EAAEkX,EACL7Y,WACI,MAAO,GAAGoB,KAAK4I,MAAM5I,KAAK6L,MAAM7L,KAAKyX,QAOjD,MAAMyjK,WAA+Br7K,EAIjCjB,cACImB,QACAC,KAAKm7K,IAAM,KACXn7K,KAAKmU,IAAM,KACXnU,KAAKy4K,KAAQ,EACbz4K,KAAK04K,KAAQ,EACb14K,KAAK24K,IAAQ,EACb34K,KAAK44K,IAAQ,KACb54K,KAAK64K,IAAQjZ,GAAS,KAClB,MAAMwb,EAAep7K,KAAKqpK,wBAC1BrpK,KAAKq2K,IAAa+E,IAhEY,IAkElCp7K,KAAK84K,IAAQlZ,GAAUyb,IACnB,MAAMC,EAAgBt7K,KAAK62K,eACvByE,IAAkBD,GAClBr7K,KAAKgK,cAAc,IAAIopF,YAAY,mBAAoB,CAAEC,OAAQ,CAAEzlE,QAAS0tJ,OApEvC,GAuE7Ct7K,KAAK+4K,IAAQ,KACb/4K,KAAKg5K,IAAQ,KACbh5K,KAAKi5K,IAAQ,IAAIhB,GACjBj4K,KAAKk5K,IAASjvK,GAAUjK,KAAK+5K,IAAgB9vK,GAI7C,MAAM7B,EAAWpI,KAAKkD,YAAYkF,SAC9B5K,OAAOY,UACPZ,OAAOY,SAASm9K,aAAav7K,KAAM,IAIvCA,KAAKw7K,aAAa,CAAEtmH,KAAM,SAC1B,MAAMyyG,EAAa3nK,KAAK2nK,WAWxB,IAAIx5J,EAAOC,EACX,GAXAu5J,EAAWhT,YAAYvsJ,EAASs0I,QAAQoX,WAAU,IAClD9zJ,KAAKw6K,IAAc7S,EAAWC,cAAc,cAC5C5nK,KAAK82K,IACDnP,EAAWC,cAAc,cAC7B5nK,KAAK02K,IAAW/O,EAAWC,cAAc,UACzC5nK,KAAK25K,IACD35K,KAAK82K,IAAmBnpI,aAAa,cAKrC3tC,KAAKy7K,YAAa,CAClB,MAAMC,EAAO17K,KAAKqpK,wBAClBl7J,EAAQutK,EAAKvtK,MACbC,EAASstK,EAAKttK,YAGdD,EAtGgB,IAuGhBC,EAtGiB,IAyGrBpO,KAAKy6K,IACD,IAAI1d,GAAW,CAAE1oJ,OAAQrU,KAAK02K,IAAUrxK,QAASrF,KAAMmO,MAAAA,EAAOC,OAAAA,IAClEpO,KAAKy6K,IAAQz8K,iBAAiB,aAAeiM,IACzCjK,KAAKu6K,MACLv6K,KAAK26K,MACL36K,KAAKgK,cAAc,IAAIopF,YAAY,OAAQ,CAAEC,OAAQ,CAAEn8E,IAAKjN,EAAMiN,UAItErU,QAAQ+6G,UAAU93B,KAAK,KACnB9lF,KAAKq2K,IAAar2K,KAAKqpK,2BAEvB1iK,IAGA3G,KAAK45K,IAAmB,IAAIhzK,eAAgB+0K,IAIxC,IAAI37K,KAAK47J,IAAWv3E,aAGpB,IAAK,IAAIu3F,KAASD,EACVC,EAAM5yK,SAAWhJ,MACjBA,KAAKq2K,IAAauF,EAAMC,gBAKpCh1K,EACA7G,KAAK65K,IAAyB,IAAI/yK,qBAAqB60K,IACnD,IAAK,IAAIC,KAASD,EACd,GAAIC,EAAM5yK,SAAWhJ,KAAM,CACvB,MAAMq7K,EAAgBr7K,KAAK62K,eAC3B72K,KAAKk6K,IAAwB0B,EAAME,eACnC97K,KAAKm6K,IAA0BkB,GAC3Br7K,KAAKk6K,MAA0Bl6K,KAAKu3K,OACpCv3K,KAAKs6K,QAIlB,CACC/iD,KAAM,KAMNwkD,WAAY,MACZpnF,UAAW,IAMf30F,KAAKk6K,KAAwB,EAGrC8B,gBACI,MAAO,eAGX5zK,sBAII,OAHKpI,KAAKc,eAAe24K,MACrBz5K,KAAKy5K,IA1qzDI,CAACwC,IAClB,MAAMzlK,EAAQ3O,SAASC,cAAc,YAKrC,OAJA0O,EAAMnO,UAAYD,EAASC,UACvB7K,OAAOY,UACPZ,OAAOY,SAAS89K,gBAAgB1lK,EAAOylK,GAEpCzlK,GAoqzDmB2lK,CAAan8K,KAAKg8K,KAEjCh8K,KAAKy5K,IAGhB2C,0BAA0Bv9K,GACtBizJ,GAAkBF,IAAiBP,kBAAoBxyJ,EAG3Du9K,4BACI,OAAOtqB,GAAkBF,IAAiBP,kBAG9CgrB,8BAA8Bx9K,GACtBA,EAAQ,GACRP,QAAQC,KAAK,+EAEbM,GAAS,GACTP,QAAQC,KAAK,+JAEjBswK,GAASC,UAAU2G,SAAWp4K,KAAK8N,IAAI,EAAG9N,KAAK6N,IAAI,EAAGrM,IAG1Dw9K,gCACI,OAAOxN,GAASC,UAAU2G,SAG9B/zD,aACI,OAAO1hH,KAAK66K,MAEhB74K,KAAMy2K,GAAOyB,GAAsBxB,GAAOuB,GAAStB,GAAO0B,GAAazB,GAAOkB,GAAoBjB,GAAOa,GAAwBZ,GAAOqB,GAA0BpB,GAAOa,GAAiBZ,GAAOa,GAAuBZ,GAAO2B,GAAkB1B,GAAOc,GAAqBpe,OACzQ,OAAOiT,GAASC,UAGpB+H,qBACI,OAAO72K,KAAK86K,MAEhBl8K,oBACImB,MAAMu8K,mBAAqBv8K,MAAMu8K,oBAC7B31K,EACA3G,KAAK45K,IAAiB2C,QAAQv8K,MAG9BsG,KAAKtI,iBAAiB,SAAUgC,KAAK05K,KAErC7yK,GACA7G,KAAK65K,IAAuB0C,QAAQv8K,MAExC,MAAM69C,EAAW79C,KAAK47J,IACtB/9G,EAAS7/C,iBAAiB,cAAegC,KAAKg6K,KAC9Cn8H,EAAS2+H,cAAcx8K,KAAKy6K,KACI,MAA5Bz6K,KAAK85K,MACLxzK,KAAK05J,aAAahgK,KAAK85K,KACvB95K,KAAK85K,IAAsB,KAG3B95K,KAAKopK,cAAc,MAAO,OAGlCxqK,uBACImB,MAAM08K,sBAAwB18K,MAAM08K,uBAChC91K,EACA3G,KAAK45K,IAAiB8C,UAAU18K,MAGhCsG,KAAKrI,oBAAoB,SAAU+B,KAAK05K,KAExC7yK,GACA7G,KAAK65K,IAAuB6C,UAAU18K,MAE1C,MAAM69C,EAAW79C,KAAK47J,IACtB/9G,EAAS5/C,oBAAoB,cAAe+B,KAAKg6K,KACjDn8H,EAAS8+H,gBAAgB38K,KAAKy6K,KAC9Bz6K,KAAK85K,IAAsBxzK,KAAK45G,WAAW,KACvClgH,KAAKy6K,IAAQlhB,MAAMn7G,SAvPA,KA0P3Bx/C,QAAQgG,GAYJ,GAXA7E,MAAMiF,QAAQJ,IAKVA,EAAkBX,IAAI,QACT,MAAZjE,KAAKmU,KAAenU,KAAKmU,MAAQnU,KAAKy6K,IAAQlhB,MAAMriJ,MACrDlX,KAAKi6K,KAAW,EAChBj6K,KAAKq6K,IAAe,EACpBr6K,KAAKs6K,OAEL11K,EAAkBX,IAAI,OAAQ,CAC9B,MAAM24K,EAAwB,MAAZ58K,KAAKm7K,IAAcn7K,KAAK25K,IAAqB35K,KAAKm7K,IACpEn7K,KAAK82K,IAAmBnzK,aAAa,aAAci5K,IAI3Dh+K,UAAUE,EAAM+9K,GACZ,OAAO78K,KAAK47J,IACPkhB,cAAc98K,KAAKy6K,KACnB7lK,UAAU9V,EAAM+9K,GAGzBj+K,aAAad,GACT,MAAMuiH,EAAWviH,EAAUA,EAAQuiH,cAAW1/G,EACxCo8K,EAAkBj/K,EAAUA,EAAQi/K,qBAAkBp8K,EACtDq8K,EAAcl/K,EAAUA,EAAQk/K,iBAAcr8K,GAC9CwN,MAAEA,EAAKC,OAAEA,EAAMmrJ,MAAEA,EAAK59G,OAAEA,GAAW37C,KAAKy6K,KACxCjF,IAAEA,EAAGY,YAAEA,GAAgBp2K,KAAK47J,IAClC,IAAIqhB,EAAc9uK,EAAQioK,EAAcZ,EACpC0H,EAAe9uK,EAASgoK,EAAcZ,EACtCz4H,EAAU,EACVC,EAAU,EACd,IAAoB,IAAhBggI,EACA,GAAIzjB,EAAMiC,kBAAoB7/G,EAAQ,CAClC,MAAMwhI,EAAYD,EAClBA,EAAe7/K,KAAK0R,MAAMkuK,EAAc1jB,EAAMiC,mBAC9Cx+G,GAAWmgI,EAAYD,GAAgB,MAEtC,CACD,MAAME,EAAWH,EACjBA,EAAc5/K,KAAK0R,MAAMmuK,EAAe3jB,EAAMiC,mBAC9Cz+G,GAAWqgI,EAAWH,GAAe,EAG7C1D,GAAWprK,MAAQ8uK,EACnB1D,GAAWnrK,OAAS8uK,EACpB,IACI,OAAO,IAAIr6K,QAAQ84J,MAAO/9C,EAASC,KACZ,MAAf27D,KACAA,GAAcD,GAAW/kK,WAAW,OAExCglK,GAAY7kK,UAAU3U,KAAK47J,IAAWkhB,cAAc98K,KAAKy6K,KAAU19H,EAASC,EAASigI,EAAaC,EAAc,EAAG,EAAGD,EAAaC,IAC/H3D,GAAW8D,UAINh9D,GAAyB,cAAbA,EAIhBk5D,GAAW+D,YAGhB/D,GAAW+D,OAAQ/tD,IACf,IAAKA,EACD,OAAO1R,EAAO,IAAIvvG,MAAM,mCAE5BsvG,EAAQ2R,IACTlP,EAAU08D,GAPFn/D,OAtdL+9C,OAAO4hB,GAClB,IAAI16K,QAAQ,CAAC+6G,EAASC,KACzB,MACM2/D,EAAYD,EAAcx0K,MAAM,cACtC,IAAKy0K,EACD,OAAO3/D,EAAO,IAAIvvG,MAASivK,EAAH,6BAE5B,MAAMz+K,EAAO0+K,EAAU,GACjBC,EAASF,EAAcl6G,QAAQ,0BAA2B,IAC1Dq6G,EAAiBl9D,KAAKi9D,GACtBE,EAAa,GACnB,IAAK,IAAIjuK,EAAS,EAAGA,EAASguK,EAAer0K,OAAQqG,GATnC,IASwD,CACtE,MAAMnS,EAAQmgL,EAAengL,MAAMmS,EAAQA,EAV7B,KAWRkuK,EAAc,IAAI3+K,MAAM1B,EAAM8L,QACpC,IAAK,IAAIc,EAAI,EAAGA,EAAI5M,EAAM8L,OAAQc,IAC9ByzK,EAAYzzK,GAAK5M,EAAMojH,WAAWx2G,GAEtC,MAAMumK,EAAY,IAAIjoI,WAAWm1I,GACjCD,EAAWx/K,KAAKuyK,GAEpB9yD,EAAQ,IAAIgD,KAAK+8D,EAAY,CAAE7+K,KAAAA,OAkcE++K,CAActE,GAAW3kK,UAAUyrG,EAAU08D,KAJvDn/D,EAAQ27D,GAAW8D,sBAetCr9K,KAAKq2K,IAAa,CAAEloK,MAAAA,EAAOC,OAAAA,KAGnCgsK,IAAKA,MACD,OAAoB,MAAZp6K,KAAKm7K,KAA4B,SAAbn7K,KAAKm7K,IAAkBn7K,KAAK25K,IACpD35K,KAAKm7K,IAMbv8K,CAACi8K,MACG,OAAO76K,KAAKi6K,IAGhBr7K,CAACk8K,MACG,OAAO96K,KAAK0hH,QAAU1hH,KAAKk6K,IAE/Bt7K,CAACo8K,MACG,OAAOh7K,KAAK62K,eAEhBj4K,CAACm8K,MACG,QAAS/6K,KAAKmU,KAAOnU,KAAKk6K,IAE9Bt7K,CAAC24K,MACG,OAAOv3K,KAAKi6K,IAKhBr7K,CAACy3K,KAAaloK,MAAEA,EAAKC,OAAEA,IACnBpO,KAAKw6K,IAAYx6I,MAAM7xB,MAAWA,EAAH,KAC/BnO,KAAKw6K,IAAYx6I,MAAM5xB,OAAYA,EAAH,KAChCpO,KAAK+nK,IAAW,CAAE55J,MAAOgyB,WAAWhyB,GAAQC,OAAQ+xB,WAAW/xB,KAEnExP,CAACq4K,IAAS6G,EAAOC,IAEjBn/K,CAAC27K,MACOv6K,KAAKi6K,MAGTj6K,KAAKi6K,KAAW,EAChBj6K,KAAKq6K,IAAerR,YAAY5qC,OAEpCx/H,CAAC87K,MACG16K,KAAKy6K,IAAQzd,SAAU,EAE3Bp+J,CAAC+7K,OAED/7K,CAACmpK,IAAWzjK,GACRtE,KAAKy6K,IAAQhhK,QAAQnV,EAAE6J,MAAO7J,EAAE8J,QAEpCxP,CAACm7K,IAAgB9vK,GACbjK,KAAKgK,cAAc,IAAIopF,YAAY,QAAS,CAAEC,OAAQ,CAAEv0F,KAAM,mBAAoBk/K,YAAa/zK,EAAM0tK,gBAOzG/4K,MAAO07K,MACH,GAAIt6K,KAAK0hH,SAAW1hH,KAAK+6K,MACrB,OAEJ,MAAMkD,EAAuBj+K,KAAK46K,IAAkBnG,gBAC9CnrK,EAAStJ,KAAKmU,IACpB,UACUnU,KAAKy6K,IAAQyD,eAAe50K,EAASgpJ,GAAa2rB,EAAgC,GAAX3rB,IAC7E,MAAMj/D,EAAS,CAAEn8E,IAAK5N,GACtBtJ,KAAKgK,cAAc,IAAIopF,YAAY,UAAW,CAAEC,OAAAA,KAEpD,MAAOrjF,GACHhQ,KAAKgK,cAAc,IAAIopF,YAAY,QAAS,CAAEC,OAAQrjF,aAGtDiuK,EAAqB,IACrBj9H,sBAAsB,KAClBi9H,EAAqB,OAKrC9E,GAAW,CACPvzK,EAAS,CAAE9G,KAAM1B,UAClB89K,GAAuB55K,UAAW,WAAO,GAC5C63K,GAAW,CACPvzK,EAAS,CAAE9G,KAAM1B,UAClB89K,GAAuB55K,UAAW,WAAO;;;;;;;;;;;;;;;AAgB5C,IAAI68K,GAAsD,SAAU/E,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAEhE,MACM8qK,GAAmB58K,OAAO,mBAC1B68K,GAAU78K,OAAO,UAuHjB88K,GAAsB98K,OAAO,sBAC7B+8K,GAAc/8K,OAAO,cACrBg9K,GAAoBh9K,OAAO,oBAC3Bi9K,GAAYj9K,OAAO,YACnBk9K,GAAcl9K,OAAO,cACrBm9K,GAAiBn9K,OAAO,iBAExBi9J,GAAgB,IAAIvwJ,EACpB0wK,GAAe,IAAIt3J,GACnBu3J,GAAqB,IAAI9uK,EA6LzB+uK,GAA2BC,GAAkBC,IAC/C,IACI,MAAM1pB,EAAcF,GAAiB4pB,GAC/BC,GAAS3pB,EAAYjsJ,OAASisJ,EAAY,GAAGK,MAAQ,IACtDtvF,OAAQ64G,GAAcA,GAAgC,UAAnBA,EAAUpgL,MAC7CulC,IAAI66I,GAAaA,EAAUrgL,OAC3BwnE,OAAOllE,GAAQ49K,EAAan1K,QAAQzI,IAAS,GAG5CoD,EAAS,IAAI0nK,IACnB,IAAK,MAAM9qK,KAAQ89K,EACf16K,EAAO0c,IAAI9f,GAEf,OAAOoD,EAEX,MAAO46K,IAEP,OAAO,IAAIlT;;;;;;;;;;;;;;IAiBf,IAAImT,GAAsD,SAAUhG,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAEhE,IAAI+rK,IAAiB,EACjBC,IAAuB,EAC3B,MACMC,GAA+BT,GAAwB,CAAC,SAAU,WAClEU,GAAqBV,GAAwB,CAAC,aAAc,eAAgB,QAAS,SAErFW,GACU,aADVA,GAEY,eAFZA,GAGK,QAHLA,GAII,OAEJC,GAAqBl+K,OAAO,qBAC5Bm+K,GAAoBn+K,OAAO,oBAC3Bo+K,GAAmBp+K,OAAO,mBAC1Bq+K,GAAsBr+K,OAAO,sBAC7Bs+K,GAAiBt+K,OAAO,iBACxBu+K,GAAUv+K,OAAO,UACjBw+K,GAAWx+K,OAAO,WAClBy+K,GAAsBz+K,OAAO,sBAC7B0+K,GAAqB1+K,OAAO,qBAC5B2+K,GAAY3+K,OAAO,YACnB4+K,GAA4B5+K,OAAO,4BACnC6+K,GAAc7+K,OAAO,cACrB8+K,GAAW9+K,OAAO,WAClB++K,GAAgB/+K,OAAO;;;;;;;;;;;;;;;AAyP7B,IAAIg/K,GAAMC,GAAMC,GAChB,MAAMC,GAAYn/K,OAAO,YACnBo/K,GAAap/K,OAAO,aAW1B,MAAMq/K,GACFjiL,cACIoB,KAAKwgL,IAAQ,KAUjB5hL,sBAAsBo4H,EAAM8pD,EAAQ1pB,IAChC,GAAIpgC,aAAgB6pD,GAChB,OAAO7pD,EAEX,GAAkB,WAAdA,EAAKl4H,KACL,MAAkB,MAAdk4H,EAAK94D,KACE,IAAI6iH,GAAoB/pD,EAAM8pD,GAElC9pD,EAEX,OAAQA,EAAK71H,KAAKtC,OACd,IAAK,OACD,OAAO,IAAImiL,GAAchqD,EAAM8pD,GACnC,IAAK,MACD,OAAO,IAAIG,GAAajqD,GAEhC,OAAOogC,GASXx4J,gBAAgBsiL,GACZ,OAAIA,aAAuBL,GAChBK,EAAYttE,WAEhBstE,EAMXtiL,kBAAkBsiL,GACd,QAAIA,aAAuBL,KAChBK,EAAYC,WA6B3BviL,uBAAuBwiL,EAAWC,GAC9B,MAAMP,MAAEA,EAAKQ,SAAEA,GAAaD,GACtBE,KAAEA,GAASD,EACjB,OAAOR,EAAMz8I,IAAI,CAACm9I,EAAWr4K,KAEzB,MAAMs4K,EAAoC,MAAfF,EAAKp4K,GAAiBq4K,EAAYD,EAAKp4K,GAGlE,IAAIu4K,EAAgBN,EAAUj4K,GAASi4K,EAAUj4K,GAASs4K,EAE1D,GAA2B,UAAvBC,EAAc5iL,KAAkB,CAChC,MAAM6iL,EAAUD,EAAc7iL,MAE1B8iL,KAAWL,IACXI,EAAgBJ,EAASK,GAASx4K,IAS1C,OAJqB,MAAjBu4K,GAAgD,UAAvBA,EAAc5iL,OACvC4iL,EAAgBD,GAGO,MAAvBC,EAAcxjH,KACPg3F,GAAWwsB,EAAcvsB,OAAS,IAAMqsB,EAAUrsB,OAAQqsB,EAAUtjH,OAG/EwjH,EAAgBjqB,GAAciqB,EAAeF,GAEzCE,EAAcxjH,OAASsjH,EAAUtjH,KAC1BsjH,EAGJE,KAQfP,iBACI,OAAO,EAQXviL,WAII,OAHKoB,KAAKmhL,YAAkC,MAApBnhL,KAAK4gL,MACzB5gL,KAAK4gL,IAAc5gL,KAAK2gL,OAErB3gL,KAAK4gL,KAGpBJ,GAAOI,GACP,MAAMgB,GAAcpgL,OAAO,cACrBqgL,GAASrgL,OAAO,SAKtB,MAAMu/K,WAA4BF,GAC9BjiL,YAAYkjL,EAAYhB,GACpB/gL,QACAC,KAAK4hL,IAAeE,EACpB9hL,KAAK6hL,IAAUf,EAEnBK,iBACI,OAAO,EAEXviL,CAAC+hL,MACG,OAAOzrB,GAAWl1J,KAAK4hL,IAAazsB,OAAS,IAAMn1J,KAAK6hL,IAAQ1sB,OAAQn1J,KAAK6hL,IAAQ3jH,OAG7F,MAAM6jH,GAAavgL,OAAO,aAmB1B,MAAMy/K,WAAqBJ,GACvBjiL,YAAYojL,GACRjiL,QACAC,KAAKygL,IAAQ,KACb,MAAMtqB,EAAY6rB,EAAY54K,UAAUC,OAAS24K,EAAY54K,UAAU,GAAGusJ,MAAM,GAAK,KACpE,MAAbQ,GAAwC,UAAnBA,EAAUr3J,OAC/BkB,KAAK+hL,IAAc5rB,GAG3BgrB,iBACI,OAAO,EAGXviL,EAAE6hL,GAAOsB,GAAYpB,OACjB,GAAwB,MAApB3gL,KAAK+hL,IACL,OAAQ/hL,KAAK+hL,IAAYljL,OACrB,IAAK,kBAMD,MAAO,CAAEC,KAAM,SAAUq2J,OALM33J,OAAOykL,aACZ5kL,KAAK8N,IAAItD,SAAS8vI,KAAKuqC,aAAcr6K,SAAS8vI,KAAKgqB,aAAc95J,SAASs6K,gBAAgBC,aAAcv6K,SAASs6K,gBAAgBD,aAAcr6K,SAASs6K,gBAAgBxgB,cAEzKnkK,OAAO6kL,cAC5B,EACsCnkH,KAAM,MAG5D,OAAOk5F,IAGf,MAAMkrB,GAAuB,SACvBC,GAAa/gL,OAAO,YAa1B,MAAMw/K,WAAsBH,GACxBjiL,YAAY4jL,EAAc1B,EAAQ1pB,IAG9B,GAFAr3J,QACAC,KAAK0gL,IAAQ,KACyB,IAAlC8B,EAAap5K,UAAUC,OACvB,OAEJ,MAAMssJ,EAAQ6sB,EAAap5K,UAAU,GAAGusJ,MAAMp4J,QACxCklL,EAAmB,GACzB,KAAO9sB,EAAMtsJ,QAAQ,CACjB,MAAMq5K,EAAO/sB,EAAM1oE,QACnB,GAAIw1F,EAAiBp5K,OAAS,EAAG,CAC7B,MAAMs5K,EAAeF,EAAiBA,EAAiBp5K,OAAS,GAChE,GAA0B,aAAtBs5K,EAAa7jL,MACbwjL,GAAqBj7K,KAAKs7K,EAAa9jL,OAAQ,CAC/C,MAAM+jL,EAAWH,EAAiBj2G,MAC5Bq2G,EAAYJ,EAAiBj2G,MACnC,GAAiB,MAAbq2G,EACA,OAEJJ,EAAiBtkL,KAAK,IAAI2kL,GAAkBF,EAAU/B,GAAUkC,eAAeF,EAAW/B,GAAQD,GAAUkC,eAAeL,EAAM5B,KACjI,UAGR2B,EAAiBtkL,KAAmB,aAAdukL,EAAK5jL,KAAsB4jL,EAC7C7B,GAAUkC,eAAeL,EAAM5B,IAEvC,KAAO2B,EAAiBp5K,OAAS,GAAG,CAChC,MAAO6hB,EAAM03J,EAAUz3J,GAASs3J,EAAiB14K,OAAO,EAAG,GAC3D,GAAsB,aAAlB64K,EAAS9jL,KACT,OAEJ2jL,EAAiBxxH,QAAQ,IAAI6xH,GAAkBF,EAAU/B,GAAUkC,eAAe73J,EAAM41J,GAAQD,GAAUkC,eAAe53J,EAAO21J,KAGpG,IAA5B2B,EAAiBp5K,SACjBrJ,KAAKuiL,IAAcE,EAAiB,IAG5CtB,iBACI,OAA2B,MAApBnhL,KAAKuiL,KAAuB1B,GAAUM,WAAWnhL,KAAKuiL,KAEjE3jL,EAAE8hL,GAAO6B,GAAY5B,OACjB,OAA2B,MAApB3gL,KAAKuiL,IAAsB1B,GAAUjtE,SAAS5zG,KAAKuiL,KACtDnrB,IAGZ,MAAM4rB,GAAYxhL,OAAO,YACnByhL,GAAQzhL,OAAO,QACf0hL,GAAS1hL,OAAO,SAYtB,MAAMshL,WAA0BjC,GAC5BjiL,YAAYgkL,EAAU13J,EAAMC,GACxBprB,QACAC,KAAKgjL,IAAaJ,EAClB5iL,KAAKijL,IAAS/3J,EACdlrB,KAAKkjL,IAAU/3J,EAEnBg2J,iBACI,OAAON,GAAUM,WAAWnhL,KAAKijL,MAC7BpC,GAAUM,WAAWnhL,KAAKkjL,KAElCtkL,CAAC+hL,MACG,MAAMwC,EAAW1rB,GAAcopB,GAAUjtE,SAAS5zG,KAAKijL,MACjDG,EAAY3rB,GAAcopB,GAAUjtE,SAAS5zG,KAAKkjL,OAChD/tB,OAAQ0tB,EAAW3kH,KAAMmlH,GAAaF,GACtChuB,OAAQmuB,EAAYplH,KAAMqlH,GAAcH,EAEhD,GAAiB,MAAbG,GAAiC,MAAZF,GAAoBE,GAAaF,EACtD,OAAOjsB,GAMX,MAAMl5F,EAAOmlH,GAAYE,EACzB,IAAI1kL,EACJ,OAAQmB,KAAKgjL,IAAWnkL,OACpB,IAAK,IACDA,EAAQgkL,EAAYS,EACpB,MACJ,IAAK,IACDzkL,EAAQgkL,EAAYS,EACpB,MACJ,IAAK,IACDzkL,EAAQgkL,EAAYS,EACpB,MACJ,IAAK,IACDzkL,EAAQgkL,EAAYS,EACpB,MACJ,QACI,OAAOlsB,GAEf,MAAO,CAAEt4J,KAAM,SAAUq2J,OAAQt2J,EAAOq/D,KAAAA,IAGhD,MAAMslH,GAAgBhiL,OAAO,gBACvBiiL,GAAcjiL,OAAO,cAY3B,MAAMkiL,WAAuB7C,GACzBjiL,YAAY02J,EAAa+rB,GACrBthL,QACAC,KAAKyjL,IAAepC,EACpB,MAAMsC,EAAkBruB,EAAY,GAC9BK,EAA2B,MAAnBguB,EAA0BA,EAAgBhuB,MAAQ,GAChE31J,KAAKwjL,IACDnC,EAAWP,MAAMz8I,IAAI,CAACm9I,EAAWr4K,KAC7B,MAAMu5K,EAAO/sB,EAAMxsJ,GACnB,OAAY,MAARu5K,EACO,CAAE5jL,KAAM,QAASD,MAAO,QAEjB,UAAd6jL,EAAK5jL,KACE4jL,EAEJ7B,GAAUkC,eAAeL,EAAMlB,KAGlDL,iBACI,IAAK,MAAMD,KAAelhL,KAAKwjL,IAC3B,IAAK3C,GAAUM,WAAWD,GACtB,OAAO,EAGf,OAAO,EAEXtiL,CAAC+hL,MACG,MAAMS,EAAYphL,KAAKwjL,IAAen/I,IAAI68I,GAAeL,GAAUjtE,SAASstE,IAC5E,OAAOL,GAAU+C,gBAAgBxC,EAAWphL,KAAKyjL,KAC5Cp/I,IAAI6wH,GAAcA,EAAWC;;;;;;;;;;;;;;GAkB1C,IAAI0uB,GAAMC,GAAMC,GAAMC,GACtB,MAAMC,GAAaziL,OAAO,aACpB0iL,GAAoB1iL,OAAO,oBAC3B2iL,GAAsB3iL,OAAO,sBAC7B4iL,GAAmB5iL,OAAO,mBAC1B6iL,GAAU7iL,OAAO,UACjB8iL,GAAkB9iL,OAAO,YAS/B,MAAM+iL,GACF3lL,YAAY2e,GACRvd,KAAKskL,IAAmB/mK,EAE5B3e,OAAQwlL,MACJ,IAAK,MAAMI,KAAYD,GAAeN,IAClCO,EAASH,MAGjBzlL,QAASilL,GAAOI,GAAYC,OACxB1mL,OAAOQ,iBAAiB,SAAUgC,KAAKokL,IAAmB,CAAEK,SAAS,IAEzE7lL,OAAQulL,MACJ3mL,OAAOS,oBAAoB,SAAU+B,KAAKokL,KAM9CxlL,UAC4C,IAApC2lL,GAAeN,IAAY/+K,MAC3Bq/K,GAAeL,MAEnBK,GAAeN,IAAYhjK,IAAIjhB,MAKnCpB,aACI2lL,GAAeN,IAAYniI,OAAO9hD,MACM,IAApCukL,GAAeN,IAAY/+K,MAC3Bq/K,GAAeJ,MAGvBvlL,CAACylL,MACGrkL,KAAKskL,OAIbC,GAAeV,IAAQ,IAAI5X,IAC3B,MAAMyY,GAAwBljL,OAAO,wBAC/BmjL,GAAanjL,OAAO,aACpBojL,GAAgBpjL,OAAO,gBACvBqjL,GAAiBrjL,OAAO,iBACxBsjL,GAAYtjL,OAAO,YAoBzB,MAAMujL,GACFnmL,YAAY2e,GACRvd,KAAK8jL,IAAQ,GACb9jL,KAAK+jL,IAAQ,IAAI/sB,GAAU,CAAC,aAC5Bh3J,KAAKgkL,IAAQ,IAAMhkL,KAAK8kL,MACxB9kL,KAAK0kL,IAAyBnnK,EAMlC3e,kBAAkBs4J,GACd,MAAM8tB,EAAkB,GAClBC,EAAkBjlL,KAAK4kL,IAC7B5kL,KAAK2kL,IAAYO,KAAKhuB,EAAKiuB,IACvB,MAAMhkL,KAAEA,GAASgkL,EAEXC,EADgBD,EAAa/7K,UAAU,GACbusJ,MAAM,GACtC,GAAmB,QAAfx0J,EAAKtC,OAAgC,MAAbumL,GACL,UAAnBA,EAAUtmL,KAGd,OAAQsmL,EAAUvmL,OACd,IAAK,kBACD,GAAwC,MAApCmmL,EAAgB,iBAA0B,CAC1C,MAAMK,EAAW,kBAAmBJ,EAChCA,EAAgB,iBAChB,IAAIV,GAAevkL,KAAK6kL,KAC5BQ,EAAS9I,iBACF0I,EAAgB,iBACvBD,EAAgB,iBAAmBK,MAKnD,IAAK,MAAMC,KAAoBL,EAAiB,CAC3BA,EAAgBK,GACxBphG,aAEblkF,KAAK4kL,IAAiBI,EAM1BpmL,UACI,IAAK,MAAM0mL,KAAoBtlL,KAAK4kL,IAAgB,CAC/B5kL,KAAK4kL,IAAeU,GAC5BphG,cAGjBtlF,EAAEklL,GAAOc,GAAeb,GAAOY,GAAYX,GAAOa,GAAgBC,OAC9D9kL,KAAK0kL,IAAuB,CAAEa,aAAc;;;;;;;;;;;;;;GAgDpD,MAAMvlJ,GAASq1G,IACX,MAAMmwC,EAAiBnwC,EAAOmwC,iBAAkB,EAC1CC,EAAgBpwC,EAAOgsC,sBAAsBx4K,SAC/CwsI,EAAOgsC,eACAhsC,EAAOgsC,WAClB,MAAO,CAACv7K,EAAOq1G,KACX,MAAMuqE,EAAkB5/K,EAAMd,QACxB2gL,EAA4B7/K,EAAMw2K,kBAClCsJ,EAA+B9/K,EAAM22K,qBACrCoJ,EAAiBrkL,OAAU25G,EAAH,iBACxB2qE,EAAkBtkL,OAAU25G,EAAH,kBACzB4qE,EAAmBvkL,OAAU25G,EAAH,mBAC1B6qE,EAAmBxkL,OAAU25G,EAAH,mBAChCn8G,OAAOuuB,iBAAiBznB,EAAO,CAC3BlH,CAACinL,GAAiB,CAAEhnL,MAAO,KAAMonL,UAAU,GAC3CrnL,CAACknL,GAAkB,CAAEjnL,MAAO,KAAMonL,UAAU,GAC5CrnL,CAACmnL,GAAmB,CAChBlnL,MAAO,WACH,MAAMq4J,EAAM9B,GAAiBp1J,KAAKm7G,IAClCn7G,KAAK8lL,GACD,IAAIpC,GAAexsB,EAAKuuB,EAAczlL,OACd,MAAxBA,KAAK6lL,IAA2BL,IAChCxlL,KAAK6lL,GACD,IAAId,GAAc,IAAM/kL,KAAKgmL,OAET,MAAxBhmL,KAAK6lL,IACL7lL,KAAK6lL,GAAgBK,kBAAkBhvB,KAInDt4J,CAAConL,GAAmB,CAChBnnL,MAAO,WACH,GAA6B,MAAzBmB,KAAK8lL,GACL,OAEJ,MAAMvhL,EAASvE,KAAK8lL,GAAiBlyE,WAGrC5zG,KAAKq1I,EAAO8wC,eAAe5hL,KAGnCS,QAAS,CACLnG,MAAO,SAAU+F,GAITA,EAAkBX,IAAIk3G,KACtBn7G,KAAK+lL,KACL/lL,KAAKgmL,MAETN,EAAgB//K,KAAK3F,KAAM4E,KAGnC03K,kBAAmB,CACfz9K,MAAO,WACH8mL,EAA0BhgL,KAAK3F,MAC/BA,KAAKopK,cAAcjuD,EAAcn7G,KAAKm7G,MAG9CshE,qBAAsB,CAClB59K,MAAO,WACH+mL,EAA6BjgL,KAAK3F,MACN,MAAxBA,KAAK6lL,KACL7lL,KAAK6lL,GAAgBzuK,UACrBpX,KAAK6lL,GAAkB;;;;;;;;;;;;;GAqB/C,IAAIO,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAChE,MAAMC,GAAkB/nL,OAAOgvG,OAAO,CAClCg5E,cAAe,EACfC,cAAe9mK,EAAAA,EACf+mK,kBAAmB7pL,KAAKoN,GAAK,EAC7B08K,kBAAmB9pL,KAAKoN,GAAKpN,KAAKoN,GAAK,EACvC28K,uBAAwBjnK,EAAAA,EACxBknK,sBAAuBlnK,EAAAA,EACvBmnK,mBAAoB,GACpBC,mBAAoB,GACpBC,sBAAuB,cACvBC,kBAAmB,iBAGjBC,GAAalmL,OAAO,aACpBmmL,GAAiBnmL,OAAO,iBACxBomL,GAAepmL,OAAO,eACtBqmL,GAAarmL,OAAO,aACpBsmL,GAAgBtmL,OAAO,gBACvBumL,GAAUvmL,OAAO,OACjBwmL,GAAcxmL,OAAO,cACrBymL,GAAazmL,OAAO,aACpB0mL,GAAW1mL,OAAO,WAClB2mL,GAAa3mL,OAAO,aACpB4mL,GAAe5mL,OAAO,eACtB6mL,GAAsB7mL,OAAO,sBAC7B8mL,GAAmB9mL,OAAO,mBAC1B+mL,GAAgB/mL,OAAO,gBACvBgnL,GAAgBhnL,OAAO,YACvBinL,GAAcjnL,OAAO,cACrBknL,GAAkBlnL,OAAO,kBAEzBmnL,GAAiBnnL,OAAO,iBACxBonL,GAAuBpnL,OAAO,uBAC9BqnL,GAAernL,OAAO,eAEtBsnL,GAA+BtnL,OAAO,+BACtCunL,GAAoBvnL,OAAO,oBAC3BwnL,GAAaxnL,OAAO,aAEpBynL,GAAeznL,OAAO,eACtB0nL,GAAe1nL,OAAO,eACtB2nL,GAAa3nL,OAAO,aACpB4nL,GAAgB5nL,OAAO,gBACvB6nL,GAAc7nL,OAAO,cACrB8nL,GAAe9nL,OAAO,eACtB+nL,GAAW/nL,OAAO,WAClBgoL,GAAahoL,OAAO,aACpBioL,GAAqBjoL,OAAO,qBAC5BkoL,GAA2BloL,OAAO,2BAClCmoL,GAAqBnoL,OAAO,qBAC5BooL,GAA2BpoL,OAAO,2BAClCqoL,GAAmBroL,OAAO,mBAC1BsoL,GAAetoL,OAAO,eACtBuoL,GAAavoL,OAAO,aAEpBwoL,GAAiB,0BACjBC,GAA2B5sL,KAAKoN,GAAK,EAErCy/K,GACO,GADPA,GAES,GAFTA,GAGI,GAHJA,GAIE,GAJFA,GAKK,GALLA,GAMI,GAEJC,GACgB,mBADhBA,GAEI,OAoBV,MAAMC,WAAuB5gL,EACzB5K,YAAY0f,EAAQjZ,GAChBtF,QACAC,KAAKse,OAASA,EACdte,KAAKqF,QAAUA,EACfrF,KAAKomL,KAAQ,EACbpmL,KAAKqmL,KAAQ,EACbrmL,KAAKsmL,KAAQ,EACbtmL,KAAKumL,IAAQ,IAAI7hD,GACjB1kI,KAAKwmL,IAAQ,IAAI9hD,GACjB1kI,KAAKymL,IAAQ,IAAIxzB,GACjBjzJ,KAAK0mL,IAAQ,IAAIzzB,GACjBjzJ,KAAK2mL,IAAQ,IAAI1zB,GACjBjzJ,KAAK4mL,IAAQ,IAAI3zB,GACjBjzJ,KAAK6mL,KAAQ,EACb7mL,KAAK8mL,IAAQ,CACTuD,QAAS,EACTC,QAAS,GAEbtqL,KAAKipL,IAAiBh/K,GAAUjK,KAAKypL,IAAoBx/K,GACzDjK,KAAKkpL,IAAiBj/K,GAAUjK,KAAK2pL,IAAoB1/K,GACzDjK,KAAKmpL,IAAel/K,GAAUjK,KAAK6pL,IAAkB5/K,GACrDjK,KAAKupL,IAAat/K,GAAUjK,KAAK8pL,IAAc7/K,GAC/CjK,KAAKwpL,IAAev/K,GAAUjK,KAAK+pL,IAAY9/K,GAC/CjK,KAAKopL,IAAkBn/K,GAAUjK,KAAK2pL,IAAoB1/K,GAC1DjK,KAAKqpL,IAAgBp/K,GAAUjK,KAAK6pL,IAAkB5/K,GACtDjK,KAAKspL,IAAiBr/K,GAAUjK,KAAKypL,IAAoBx/K,GACzDjK,KAAKkoL,IAAYlpL,OAAOuG,OAAO,GAAIwhL,IACnC/mL,KAAKuqL,SAAS,EAAGltL,KAAKoN,GAAK,EAAG,GAC9BzK,KAAKwqL,eAAe,KACpBxqL,KAAKyqL,aAETC,yBACI,OAAO1qL,KAAKqoL,IAEhBzpL,oBACI,IAAkC,IAA9BoB,KAAKqoL,IAAgC,CACrC,MAAMhjL,QAAEA,GAAYrF,KACpBqF,EAAQrH,iBAAiB,YAAagC,KAAKipL,KAC3C5jL,EAAQrH,iBAAiB,YAAagC,KAAKkpL,KAC3C7jL,EAAQrH,iBAAiB,QAASgC,KAAKupL,KACvClkL,EAAQrH,iBAAiB,UAAWgC,KAAKwpL,KACzCnkL,EAAQrH,iBAAiB,aAAcgC,KAAKopL,KAC5C/jL,EAAQrH,iBAAiB,YAAagC,KAAKspL,KAC3ChjL,KAAKtI,iBAAiB,UAAWgC,KAAKmpL,KACtC7iL,KAAKtI,iBAAiB,WAAYgC,KAAKqpL,KACvCrpL,KAAKqF,QAAQ26B,MAAM2qJ,OAAS,OAC5B3qL,KAAKqoL,KAAuB,GAGpCzpL,qBACI,IAAkC,IAA9BoB,KAAKqoL,IAA+B,CACpC,MAAMhjL,QAAEA,GAAYrF,KACpBqF,EAAQpH,oBAAoB,YAAa+B,KAAKipL,KAC9C5jL,EAAQpH,oBAAoB,YAAa+B,KAAKkpL,KAC9C7jL,EAAQpH,oBAAoB,QAAS+B,KAAKupL,KAC1ClkL,EAAQpH,oBAAoB,UAAW+B,KAAKwpL,KAC5CnkL,EAAQpH,oBAAoB,aAAc+B,KAAKopL,KAC/C/jL,EAAQpH,oBAAoB,YAAa+B,KAAKspL,KAC9ChjL,KAAKrI,oBAAoB,UAAW+B,KAAKmpL,KACzC7iL,KAAKrI,oBAAoB,WAAY+B,KAAKqpL,KAC1ChkL,EAAQ26B,MAAM2qJ,OAAS,GACvB3qL,KAAKqoL,KAAuB,GAMpCvqL,cACI,OAAOkC,KAAKkoL,IAShBtpL,mBAAmBoK,EAAS,IAAI07H,IAC5B,OAAO17H,EAAOyN,KAAKzW,KAAK0nL,KAK5B9oL,iBACI,OAAOoB,KAAKse,OAAOo9B,IAOvB98C,aAAad,GACTkB,OAAOuG,OAAOvF,KAAKkoL,IAAWpqL,GAG9BkC,KAAKuqL,WACLvqL,KAAKwqL,eAAentL,KAAKqtI,IAAI1qI,KAAKgoL,MAKtCppL,cAAcgsL,EAAWC,GACrB7qL,KAAKse,OAAOgN,KAAOjuB,KAAK8N,IAAIy/K,EAAWC,EAAW,KAClD7qL,KAAKse,OAAOiN,IAAMs/J,EAClB7qL,KAAKse,OAAO29B,yBAKhBr9C,aAAa+8C,GACT37C,KAAKse,OAAOq9B,OAASA,EACrB37C,KAAKse,OAAO29B,yBAUhBr9C,SAASksL,EAAY9qL,KAAK2nL,IAAgB7zK,MAAOi3K,EAAU/qL,KAAK2nL,IAAgB9nK,IAAKmrK,EAAahrL,KAAK2nL,IAAgB/nK,QACnH,MAAMwnK,sBAAEA,EAAqBC,sBAAEA,EAAqBH,kBAAEA,EAAiBC,kBAAEA,EAAiBH,cAAEA,EAAaC,cAAEA,GAAkBjnL,KAAKkoL,KAC5Hp0K,MAAEA,EAAK+L,IAAEA,EAAGD,OAAEA,GAAW5f,KAAK2nL,IAC9BsD,EAAYhgL,GAAM6/K,EAAW1D,EAAuBC,GACrD5+K,SAAS2+K,IACT3+K,SAAS4+K,KACVrnL,KAAK0nL,IAAY5zK,MACb9T,KAAKgpL,IAAYhpL,KAAK0nL,IAAY5zK,MAAQm3K,GAAaA,GAE/D,MAAMC,EAAUjgL,GAAM8/K,EAAS7D,EAAmBC,GAC5CgE,EAAalgL,GAAM+/K,EAAYhE,EAAeC,GACpD,OAAIgE,IAAcn3K,GAASo3K,IAAYrrK,GAAOsrK,IAAevrK,KAG7D5f,KAAK2nL,IAAgB7zK,MAAQm3K,EAC7BjrL,KAAK2nL,IAAgB9nK,IAAMqrK,EAC3BlrL,KAAK2nL,IAAgB/nK,OAASurK,EAC9BnrL,KAAK2nL,IAAgByD,WACrBprL,KAAKuoL,KAAiB,GACf,GAKX3pL,UAAUghB,GACN5f,KAAK2nL,IAAgB/nK,OAASA,EAC9B5f,KAAKuqL,WAKT3rL,eAAe88C,GACX,MAAM4rI,mBAAEA,EAAkBC,mBAAEA,GAAuBvnL,KAAKkoL,IACxDxsI,EAAMzwC,GAAMywC,EAAK4rI,EAAoBC,GACrCvnL,KAAKgoL,IAAe3qL,KAAK0P,IAAI2uC,GASjC98C,YAAYysL,EAAYC,EAAUC,GAC9B,MAAMz3K,MAAEA,EAAK+L,IAAEA,EAAGD,OAAEA,GAAW5f,KAAK2nL,KAC9BX,cAAEA,EAAaC,cAAEA,EAAaK,mBAAEA,EAAkBC,mBAAEA,GAAuBvnL,KAAKkoL,IAChFvgD,EAAS3nI,KAAK0nL,IAAY5zK,MAAQA,EAClC03K,EAAcnuL,KAAKoN,GAAK,KACxBqgL,EAAYh3K,EAAQ7I,GAAMogL,GAAaG,EAAc7jD,EAAQ6jD,EAAc7jD,GAC3EojD,EAAUlrK,EAAMyrK,EAChBG,EAA2B,IAAdF,EACf,EACAA,EAAY,GAAKtE,EAAgBrnK,IAC5BviB,KAAK0P,IAAIw6K,GAAsBvnL,KAAKgoL,MACpCpoK,EAASonK,IACLhnL,KAAKgoL,IAAe3qL,KAAK0P,IAAIu6K,IACpC0D,EAAaprK,EACf2rK,EACIluL,KAAK6N,IAAIzC,SAASgjL,GAAcA,EAAatrK,EAAAA,EAAU8mK,EAAgBD,GAC/E,IAAI0E,EAAU1rL,KAAKuqL,SAASO,EAAWC,EAASC,GAChD,GAAkB,IAAdO,EAAiB,CACjB,MAAMI,EAAa3rL,KAAKgoL,IAAeuD,EACvCvrL,KAAKwqL,eAAentL,KAAKqtI,IAAIihD,IAC7BD,GAAU,EAEd,OAAOA,EAMX9sL,aACIoB,KAAK6E,OAAO,EA5gOE,KAqhOlBjG,OAAOk/K,EAAOjrJ,GACV,GAAI7yB,KAAKwoL,MACL,OAEJ,MAAMrB,kBAAEA,EAAiBF,cAAEA,GAAkBjnL,KAAKkoL,IAC5CvgD,EAAS3nI,KAAK0nL,IAAY5zK,MAAQ9T,KAAK2nL,IAAgB7zK,MACzDzW,KAAK4R,IAAI04H,GAAUtqI,KAAKoN,KACvBhC,SAASzI,KAAKkoL,IAAUd,yBACxB3+K,SAASzI,KAAKkoL,IAAUb,yBACzBrnL,KAAK0nL,IAAY5zK,OAA6B,EAApBzW,KAAKsL,KAAKg/H,GAActqI,KAAKoN,IAE3DzK,KAAK0nL,IAAY5zK,MAAQ9T,KAAK4nL,IAAc/iL,OAAO7E,KAAK0nL,IAAY5zK,MAAO9T,KAAK2nL,IAAgB7zK,MAAO+e,EAAOx1B,KAAKoN,IACnHzK,KAAK0nL,IAAY7nK,IAAM7f,KAAK6nL,IAAYhjL,OAAO7E,KAAK0nL,IAAY7nK,IAAK7f,KAAK2nL,IAAgB9nK,IAAKgT,EAAOs0J,GACtGnnL,KAAK0nL,IAAY9nK,OAAS5f,KAAK8nL,IAAejjL,OAAO7E,KAAK0nL,IAAY9nK,OAAQ5f,KAAK2nL,IAAgB/nK,OAAQiT,EAAOo0J,GAClHjnL,KAAK+nL,IACD/nL,KAAKioL,IAAYpjL,OAAO7E,KAAK+nL,IAAU/nL,KAAKgoL,IAAcn1J,EAAO,GACrE7yB,KAAKyoL,MAET7pL,EAAEwnL,GAAOiC,GAAqBhC,GAAOkC,GAAejC,GAAOoC,GAAiBnC,GAAOmB,GAAYlB,GAAOmB,GAAgBlB,GAAOmB,GAAclB,GAAOmB,GAAYlB,GAAOmB,GAAelB,GAAOqB,GAAYpB,GAAO8B,GAAgB7B,GAAO8B,GAAsBJ,OACvP,OAAOxoL,KAAK2nL,IAAgB7zK,QAAU9T,KAAK0nL,IAAY5zK,OACnD9T,KAAK2nL,IAAgB9nK,MAAQ7f,KAAK0nL,IAAY7nK,KAC9C7f,KAAK2nL,IAAgB/nK,SAAW5f,KAAK0nL,IAAY9nK,QACjD5f,KAAKgoL,MAAiBhoL,KAAK+nL,IAEnCnpL,CAAC6pL,MAEGzoL,KAAK0nL,IAAY0D,WACjBprL,KAAKse,OAAO8L,SAASwhK,iBAAiB5rL,KAAK0nL,KAC3C1nL,KAAKse,OAAOkQ,qBAAqB,IAAIhD,GAAMxrB,KAAK0nL,IAAY7nK,IAAMxiB,KAAKoN,GAAK,EAAGzK,KAAK0nL,IAAY5zK,MAAO,EAAG,QACtG9T,KAAKse,OAAOo9B,MAAQr+C,KAAKqtI,IAAI1qI,KAAK+nL,OAClC/nL,KAAKse,OAAOo9B,IAAMr+C,KAAKqtI,IAAI1qI,KAAK+nL,KAChC/nL,KAAKse,OAAO29B,0BAEhB,MAAM3yC,EAAStJ,KAAKuoL,IAAiB4B,GAAgCA,GACrEnqL,KAAKgK,cAAc,CAAElL,KAAM,SAAUwK,OAAAA,IAEzC8+K,IAAKA,MACD,GAAwC,sBAApCpoL,KAAKkoL,IAAUT,kBAA2C,CAE1D,OADiBznL,KAAKqF,QAAQwmL,cACdC,gBAAkB9rL,KAAKqF,QAE3C,MAA4C,iBAArCrF,KAAKkoL,IAAUT,kBAE1B7oL,CAAC0pL,IAAkB+C,EAAYC,EAAUC,GACrC,MAAMG,EAAU1rL,KAAK+rL,YAAYV,EAAYC,EAAUC,GAOvD,OANAvrL,KAAKuoL,KAAiB,EAKtBvoL,KAAKgK,cAAc,CAAElL,KAAM,SAAUwK,OAAQ6gL,KACtCuB,EAGX9sL,CAACoqL,IAAYr8K,GACT,MAAM60B,GAAc70B,EAAUtP,KAAKoN,KAAO,EAAIpN,KAAKoN,IAEnD,OAAiB,GADD+2B,EAAankC,KAAKqL,MAAM84B,IACnBnkC,KAAKoN,GAAKpN,KAAKoN,GAExC7L,CAACkqL,IAA8BkD,GAC3B,OAAO,EAAI3uL,KAAKoN,GAAKuhL,EAAchsL,KAAKqF,QAAQ+8K,aAEpDxjL,CAACmqL,IAAmBkD,EAAUC,GAC1B,MAAQ7B,QAAS8B,EAAM7B,QAAS8B,GAASH,GACjC5B,QAASgC,EAAM/B,QAASgC,GAASJ,EACnCK,EAASF,EAAOF,EAChBK,EAASF,EAAOF,EACtB,OAAO/uL,KAAK2R,KAAKu9K,EAASA,EAASC,EAASA,GAEhD5tL,CAAC6qL,IAAoBx/K,GACjB,IAAKjK,KAAK2oL,MAAoB3oL,KAAKooL,IAC/B,OAEJ,IAAIsD,GAAU,EAGd,GAAI1B,GAAe3iL,KAAK4C,EAAMnL,MAAO,CACjC,MAAM2tL,QAAEA,GAAYxiL,EACpB,OAAQjK,KAAKmoL,KACT,IAAK,OACD,GAAInoL,KAAK6oL,IAAcx/K,OAAS,GAAKojL,EAAQpjL,OAAS,EAAG,CACrD,MAEMkiL,EA7TL,KA2TyBvrL,KAAK+oL,IAAmB/oL,KAAK6oL,IAAc,GAAI7oL,KAAK6oL,IAAc,IACtE7oL,KAAK+oL,IAAmB0D,EAAQ,GAAIA,EAAQ,KACS,GAC3Ef,EAAU1rL,KAAKsoL,IAAkB,EAAG,EAAGiD,GAE3C,MACJ,IAAK,SACDG,EAAU1rL,KAAK0pL,IAA0B+C,EAAQ,IAGzDzsL,KAAK6oL,IAAgB4D,OAGrBf,EAAU1rL,KAAK0pL,IAA0Bz/K,IAExCyhL,GAAoD,gBAAzC1rL,KAAKkoL,IAAUV,wBAC3Bv9K,EAAMyiL,YACNziL,EAAMqjF,iBAGd1uF,CAAC8qL,IAA0BiD,GACvB,MAAMtC,QAAEA,EAAOC,QAAEA,GAAYqC,EACvBtB,EAAarrL,KAAK8oL,IAA8BuB,EAAUrqL,KAAK4oL,IAAsByB,SACrFiB,EAAWtrL,KAAK8oL,IAA8BwB,EAAUtqL,KAAK4oL,IAAsB0B,SAOzF,OANAtqL,KAAK4oL,IAAsByB,QAAUA,EACrCrqL,KAAK4oL,IAAsB0B,QAAUA,GACP,IAA1BtqL,KAAK0oL,MACL1oL,KAAK0oL,KAAmB,EACxB1oL,KAAKgK,cAAc,CAAElL,KAAM,uBAAwB6tL,QAAS3tL,OAAOuG,OAAO,GAAIonL,MAE3E3sL,KAAKsoL,IAAkB+C,EAAYC,EAAU,GAExD1sL,CAAC+qL,IAAoB1/K,GAGjB,GAFAjK,KAAK2oL,KAAkB,EACvB3oL,KAAK0oL,KAAmB,EACpBsB,GAAe3iL,KAAK4C,EAAMnL,MAAO,CACjC,MAAM2tL,QAAEA,GAAYxiL,EACpB,OAAQwiL,EAAQpjL,QACZ,QACA,KAAK,EACDrJ,KAAKmoL,IAAc,SACnBnoL,KAAK4pL,IAA0B6C,EAAQ,IACvC,MACJ,KAAK,EACDzsL,KAAKmoL,IAAc,OAG3BnoL,KAAK6oL,IAAgB4D,OAGrBzsL,KAAK4pL,IAA0B3/K,GAGvCrL,CAACgrL,IAA0B+C,GACvB3sL,KAAK4oL,IAAsByB,QAAUsC,EAAQtC,QAC7CrqL,KAAK4oL,IAAsB0B,QAAUqC,EAAQrC,QAC7CtqL,KAAKqF,QAAQ26B,MAAM2qJ,OAAS,WAEhC/rL,CAACirL,IAAkB+C,GACf5sL,KAAKqF,QAAQ26B,MAAM2qJ,OAAS,OAC5B3qL,KAAK2oL,KAAkB,EACnB3oL,KAAK0oL,KACL1oL,KAAKgK,cAAc,CACflL,KAAM,qBACN6tL,QAAS3tL,OAAOuG,OAAO,GAAIvF,KAAK4oL,OAI5ChqL,CAACkrL,IAAc7/K,GACX,IAAKjK,KAAKooL,IACN,OAEJ,MAAMmD,EAAYthL,EAAMugK,QACA,GAAnBvgK,EAAM4iL,UAAiB,GAAK,GApYhB,IAoYwC,IACpD7sL,KAAKsoL,IAAkB,EAAG,EAAGiD,IACW,gBAAzCvrL,KAAKkoL,IAAUV,wBACfv9K,EAAMyiL,YACNziL,EAAMqjF,iBAGd1uF,CAACmrL,IAAY9/K,GAIT,IAAI6iL,GAAc,EACdpB,GAAU,EACd,OAAQzhL,EAAM8iL,SACV,KAAK7C,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,IAAkB,EAAG,EApZ3B,KAqZT,MACJ,KAAK4B,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,IAAkB,EAAG,GAAG,KACvC,MACJ,KAAK4B,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,IAAkB,GAAI2B,GAA0B,GAC/D,MACJ,KAAKC,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,IAAkB,EAAG2B,GAA0B,GAC9D,MACJ,KAAKC,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,KAAmB2B,GAA0B,EAAG,GAC/D,MACJ,KAAKC,GACD4C,GAAc,EACdpB,EAAU1rL,KAAKsoL,IAAkB2B,GAA0B,EAAG,GAGlE6C,IACCpB,GAAoD,gBAAzC1rL,KAAKkoL,IAAUV,wBAC3Bv9K,EAAMyiL,YACNziL,EAAMqjF;;;;;;;;;;;;;;GAoBlB,MAAM0/F,GAAiBlhL,GAAMA,EAAI,GAAK,EAAIA,EAAIA,GAAU,EAAI,EAAIA,GAAKA,EAAlB,EAK7CmhL,GAAc,CAACn6J,EAAOG,EAAKi6J,EAAOF,KAAmBlsI,GAAShuB,GAASG,EAAMH,GAASo6J,EAAKpsI,GA+B3FqsI,GAAW,CAACC,EAAcC,KAC5B,MAAMp7E,EAAS,GACTu1B,EAAU,GAChB,IAAI8lD,EAAYF,EAChB,IAAK,IAAIjjL,EAAI,EAAGA,EAAIkjL,EAAUhkL,SAAUc,EAAG,CACvC,MAAMojL,EAAWF,EAAUljL,IACrBtL,MAAEA,EAAK0/F,OAAEA,GAAWgvF,EACpBL,EAAOK,EAASL,MAAQF,GACxB96E,EAAQ+6E,GAAYK,EAAWzuL,EAAOquL,GAC5Cj7E,EAAO9zG,KAAK+zG,GACZs1B,EAAQrpI,KAAKogG,GACb+uF,EAAYzuL,EAEhB,MAtCa,EAACozG,EAAQu1B,KACtB,MAAMgmD,EAAchmD,EAAQimD,OAAO,CAAC1zD,EAAO9hC,IAAW8hC,EAAQ9hC,EAAQ,GAChEy1F,EAASlmD,EAAQnjG,IAAI4zD,GAAUA,EAASu1F,GAC9C,OAAQ1sI,IACJ,IAAIhuB,EAAQ,EACR66J,EAAQxtK,EAAAA,EACR+xF,EAAQ,IAAM,EAClB,IAAK,IAAI/nG,EAAI,EAAGA,EAAIujL,EAAOrkL,SACvBskL,EAAQD,EAAOvjL,GACf+nG,EAAQD,EAAO9nG,KACX22C,GAAShuB,EAAQ66J,MAHYxjL,EAMjC2oB,GAAS66J,EAEb,OAAOz7E,GAAOpxD,EAAOhuB,GAAS66J,KAuB3BC,CAAS37E,EAAQu1B;;;;;;;;;;;;;;;AAiB5B,IAAIqmD,GAAsD,SAAUzU,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAMhE,MAGMw6K,GAASX,GAAS,EAAG,CACvB,CAAE5uF,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,OAAQ,GACrB,CAAE0/F,OAAQ,EAAG1/F,OAAQ,GACrB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,GAAI1/F,MAAO,KAEnBkvL,GAAOZ,GAAS,EAAG,CACrB,CAAE5uF,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,GACpB,CAAE0/F,OAAQ,EAAG1/F,MAAO,KAKlBmvL,GAAuB,IAAMnzB,GAC7BozB,GAA4B,CAAC,QAAS,QAAS,OAAQ,QACvDC,GAAsB,CAAC,SAAU,GAAI,UAGrCC,GACI,OADJA,GAEY,eAGZC,GAEM,SAENC,GACY,eAGZC,GAAyBjpL,IACpB,CACHy7K,MAAO,CAAC5rB,GAAW7vJ,EAAQkpL,IAA4BlxL,KAAKoN,GAAK,IAAK,QACtE62K,SAAU,CAAEC,KAAM,CAAC,SAGrBiN,GAA2B,CAC7B1N,MAAO,CAACzpB,GAAiBnC,GAAW,GAAI,SACxCosB,SAAU,CAAEC,KAAM,CAAC,QAEjBkN,GAA4BppL,IAC9B,MAAMy4C,EAAQz4C,EAAQo1K,IACtB,MAAO,CACHqG,MAAO,CAACzpB,GAAiBnC,GAAW,GAAI,SACxCosB,SAAU,CAAEC,KAAM,CAACrsB,GAAWp3G,EAAMq/G,kBAAmB,WAGzDuxB,GAAwB,MAC1B,MAAMC,EAAev5B,GAvCI,mBAuCmC,GACvDO,MACC7hJ,EAAQ2jJ,GAAck3B,EAAa,IACnC9uK,EAAM43I,GAAck3B,EAAa,IACvC,OAAQtpL,IACJ,MAAMua,EAASva,EAAQo1K,IAAQlhB,MAAMgC,oBACrC,MAAO,CACHulB,MAAO,CAAChtK,EAAO+L,EAAKq1I,GAAWt1I,EAAQ,MACvC0hK,SAAU,CAAEC,KAAM,CAAC,KAAM,KAAMrsB,GAAW,IAAK,UAT7B,GAaxB05B,GAA4BvpL,IAC9B,MAAMua,EAASouK,GAAuB3oL,EAAQo1K,IAAQlhB,MAAMgC,oBAC5D,MAAO,CACHulB,MAAO,CACH5rB,IAAY/0I,EAAAA,EAAU,OACtB+0I,GAAW73J,KAAKoN,GAAK,EAAG,OACxByqJ,GAAWt1I,EAAQ,MAEvB0hK,SAAU,CAAEC,KAAM,CAAC,KAAM,KAAM,SAGjCsN,GAA4BxpL,IAC9B,MAAMypL,EAAkBJ,GAAsBrpL,GAExC0pL,EADY,IAAIrL,GAAe,GAAIoL,GACTl7E,WAAW,GAC3C,MAAO,CACHktE,MAAO,CACH5rB,GAAW/0I,EAAAA,EAAU,OACrB+0I,GAAW73J,KAAKoN,GAAKpN,KAAKoN,GAAK,EAAG,OAClCyqJ,GAAW65B,EAAe,MAE9BzN,SAAU,CAAEC,KAAM,CAAC,KAAM,KAAM,SAGjCyN,GAA0B3pL,IAC5B,MAAMwK,EAASxK,EAAQo1K,IAAQlhB,MAAM53I,YAAYU,UAAU,IAAI7E,GAC/D,MAAO,CACHsjK,MAAO,CACH5rB,GAAWrlJ,EAAOjH,EAAG,KACrBssJ,GAAWrlJ,EAAOhE,EAAG,KACrBqpJ,GAAWrlJ,EAAO4H,EAAG,MAEzB6pK,SAAU,CAAEC,KAAM,CAAC,KAAM,KAAM,SAGjC0N,GAAU5xL,KAAKoN,GAAK,EACpBykL,GAAW7xL,KAAKoN,GAAK,EACrB0kL,GAAaF,GAAU,EACvBG,GAAM,EAAM/xL,KAAKoN,GACjB4kL,GAAY7tL,OAAO,YACnB8tL,GAAiB9tL,OAAO,iBACxB+tL,GAA2B/tL,OAAO,2BAClCguL,GAA0BhuL,OAAO,0BACjCiuL,GAAcjuL,OAAO,cACrBkuL,GAAyBluL,OAAO,yBAChCmuL,GAAenuL,OAAO,eACtBouL,GAAgBpuL,OAAO,gBACvBquL,GAAiBruL,OAAO,iBACxBsuL,GAAwBtuL,OAAO,wBAC/BuuL,GAAUvuL,OAAO,UACjBwuL,GAAWxuL,OAAO,WAClByuL,GAAYzuL,OAAO,YACnB0uL,GAAmB1uL,OAAO,mBAC1B2uL,GAAuB3uL,OAAO,uBAC9B4uL,GAAqB5uL,OAAO,qBAC5B6uL,GAA4B7uL,OAAO,4BACnC8uL,GAAoB9uL,OAAO,oBAC3B+uL,GAAe/uL,OAAO,eACtB+sL,GAA2B/sL,OAAO,2BAClCgvL,GAAiBhvL,OAAO,iBACxBivL,GAAcjvL,OAAO,cACrBkvL,GAAiBlvL,OAAO,eACxBmvL,GAAoBnvL,OAAO,oBAC3BovL,GAAmBpvL,OAAO,mBAC1BqvL,GAAmBrvL,OAAO,mBAC1BsvL,GAAoBtvL,OAAO,oBAC3BuvL,GAAsBvvL,OAAO,sBAC7BwvL,GAAsBxvL,OAAO,sBAC7ByvL,GAAsBzvL,OAAO,sBAC7B0vL,GAAsB1vL,OAAO;;;;;;;;;;;;;;;AAsZnC,IAAI2vL,GAAsD,SAAU/X,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAEhE,MAIM89K,GAAyB5vL,OAAO,yBAChC6vL,GAAuB7vL,OAAO,uBAC9B8vL,GAAqB9vL,OAAO,qBAC5B+vL,GAA2B/vL,OAAO,2BAClCgwL,GAAahwL,OAAO;;;;;;;;;;;;;;;AAkI1B,IAAIiwL,GAAMC,GACV,MAGMC,GAA6BnwL,OAAO,6BACpCowL,GAAgBpwL,OAAO,gBA8H7BiwL,GAAOE,GAA4BD,GAAOE;;;;;;;;;;;;;;;AAgB1C,IAAIC,GAAsD,SAAUzY,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAEhE,MAKMw+K,GACI,OADJA,GAGM,SAENC,GACI,OADJA,GAGK,QAELC,GACW,cAEXC,GAAyB,IA1J/B,cAAqCzoL,EACjC5K,cACImB,QAOAC,KAAKyxL,IAAQ,KACbzxL,KAAKkyL,2BAA6B,IAAInxL,IACtCf,KAAKmyL,gBAAkB,GAUvBnyL,KAAKoyL,cAAgBvqL,SAASC,cAAc,KAC5C9H,KAAKqyL,wBAAyB,EAC9BryL,KAAK0xL,IAAQ9xB,GAAS,IAAM5/J,KAAKsyL,eArCP,KAsC1B,MAAMF,cAAEA,GAAkBpyL,MACpBggC,MAAEA,GAAUoyJ,EAClBA,EAAczuL,aAAa,OAAQ,UACnCyuL,EAAc15B,UAAUz3I,IAAI,sBAC5B+e,EAAM5U,IAAM4U,EAAM9U,KAAO,IACzB8U,EAAMuyJ,cAAgB,OAM1B3zL,iBAAiB4zL,GACb,GAAIxyL,KAAKkyL,2BAA2BjuL,IAAIuuL,GACpC,OAEJ,IAAIC,EAAiB,OACrB,MAAMC,GAA8C,IAAvBF,EAAY9wE,UAAsB8wE,EAAYr+K,IACrEw+K,EAAuB,IAAI9vL,QAAS+6G,IACtC,IAAK80E,EAED,YADA90E,IAGJ,MAAMg1E,EAAiB,KACnBh1E,IACA40E,EAAYv0L,oBAAoB,OAAQ20L,GACxCJ,EAAYv0L,oBAAoB,QAAS20L,IAE7CJ,EAAYx0L,iBAAiB,OAAQ40L,GACrCJ,EAAYx0L,iBAAiB,QAAS40L,GACtCH,EAAiBG,IAErB5yL,KAAKkyL,2BAA2BrxL,IAAI2xL,EAAa,CAAEC,eAAAA,IACnDzyL,KAAKmyL,gBAAgBh0L,KAAKw0L,GACY,MAAlC3yL,KAAK6yL,4BACL7yL,KAAK6yL,0BAA4BL,GAOzC5zL,mBAAmB4zL,GACf,IAAKxyL,KAAKkyL,2BAA2BjuL,IAAIuuL,GACrC,OAEJ,MAAMM,EAAW9yL,KAAKkyL,2BAChBa,EAAiBD,EAAS9wL,IAAIwwL,GACpCM,EAAShxI,OAAO0wI,GAChBO,EAAeN,iBACXzyL,KAAK6yL,4BAA8BL,IACnCxyL,KAAK6yL,0BAA4BC,EAAS5tL,KAAO,EA3qMtC,CAACm/B,IACpB,GAAgB,MAAZA,EAAIkN,KACJ,OAAOlN,EAAIkN,OAAOgwB,OAAO1iE,OAAS,KAEtC,IAAIm0L,EAAW,KACf,IACI3uJ,EAAI/jC,QAAQ,CAAC0xJ,EAAQzwJ,EAAK0xL,KAGtB,MAFAD,EAAWzxL,EAEL,IAAI+M,QAGlB,MAAO6wK,IAEP,OAAO6T,GA8pMKE,CAAeJ,GACf,MAGZD,gCACI,OAAO7yL,KAAK2xL,IAEhBkB,8BAA8Bh0L,GAE1B,GADwBmB,KAAK2xL,MACL9yL,EACpB,OAEJ,MAAMuzL,cAAEA,GAAkBpyL,KACb,MAATnB,GAAqC,MAApBA,EAAM8oK,WACvB9oK,EAAM8oK,WAAWhT,YAAYy9B,GAEI,MAA5BA,EAAcx+B,YACnBw+B,EAAcx+B,WAAWC,YAAYu+B,GAEzCpyL,KAAK2xL,IAA8B9yL,EACnCmB,KAAK4xL,MAEThzL,qBACI,IAAIoB,KAAKqyL,wBAA0D,IAAhCryL,KAAKmyL,gBAAgB9oL,OAAxD,CAMA,IAHArJ,KAAKoyL,cAAce,YArHS,4DAsH5BnzL,KAAKqyL,wBAAyB,EAC9BryL,KAAKgK,cAAc,CAAElL,KAAM,6BACpBkB,KAAKmyL,gBAAgB9oL,QAAQ,CAChC,MAAM8oL,gBAAEA,GAAoBnyL,KAC5BA,KAAKmyL,gBAAkB,SACjBtvL,QAAQw0I,IAAI86C,GAEtBnyL,KAAKoyL,cAAce,YA5HW,wCA6H9BnzL,KAAKqyL,wBAAyB,EAC9BryL,KAAKgK,cAAc,CAAElL,KAAM,kCA4C7Bs0L,GAA6B5xL,OAAO,6BACpC6xL,GAA8B7xL,OAAO,8BACrC8xL,GAA0B9xL,OAAO,0BACjC+xL,GAAwB/xL,OAAO,wBAC/BgyL,GAAyBhyL,OAAO,yBAChCiyL,GAAcjyL,OAAO,cACrBkyL,GAAclyL,OAAO,cACrBmyL,GAAmBnyL,OAAO,mBAC1BoyL,GAAqBpyL,OAAO,qBAC5BqyL,GAAwBryL,OAAO,wBAC/BsyL,GAAgBtyL,OAAO,gBACvBuyL,GAAyBvyL,OAAO,yBAChCwyL,GAAgBxyL,OAAO,gBACvByyL,GAAkBzyL,OAAO,kBACzB0yL,GAAmB1yL,OAAO,kBAC1B2yL,GAAW3yL,OAAO,WAClB4yL,GAAa5yL,OAAO,aACpB6yL,GAAc7yL,OAAO,cA8TrB8yL,GAUY,EAVZA,GAae,EAbfA,GAoBM,EAiBNC,GAAc/yL,OAAO,cAO3B,MAAMgzL,GACF51L,YAAY61L,GACR,GAAc,MAAVA,EACA,MAAM,IAAInmL,MAAM,uBAEpBtO,KAAKu0L,IAAeE,EAAOl7B,MAM/Bm7B,iBACI,OAAO10L,KAAKu0L;;;;;;;;;;;;;;GAkBpB,MAAMI,GAAUnzL,OAAO,UACjBozL,GAAOpzL,OAAO,OACdqzL,GAAQrzL,OAAO;;;;;;;;;;;;;;;AAqCrB,IAAIszL,GAAMC,GAAMC,GAChB,MAAMC,GAAwBzzL,OAAO,wBAC/B0zL,GAAiB1zL,OAAO,iBACxB2zL,GAAoB3zL,OAAO,oBAC3B4zL,GAAmB5zL,OAAO,mBAC1B6zL,GAAY7zL,OAAO,UACnB8zL,GAAU9zL,OAAO;;;;;;;;;;;;;;;AAsEvB,IAAI+zL,GAhBJT,GAAOI,GAAgBH,GAAOI,GAAmBH,GAAOI,GAiBxD,MAAMI,GAAah0L,OAAO,YACpBi0L,GAAYj0L,OAAO;;;;;;;;;;;;;;;AAiDzB,IAAIk0L,GAAMC,GAhBVJ,GAAOC,GAiBP,MAAMI,GAAYp0L,OAAO,UACnBq0L,GAAmBr0L,OAAO,mBAC1Bs0L,GAAoBt0L,OAAO,oBAC3Bu0L,GAA4Bv0L,OAAO,4BACnCw0L,GAAkBx0L,OAAO,kBACzBy0L,GAAmBz0L,OAAO;;;;;;;;;;;;;;;AA2FhC,IAAI00L,GAAMC,GAhBVT,GAAOI,GAAmBH,GAAOI,GAiBjC,MAAMK,GAAY50L,OAAO,UACnB60L,GAAa70L,OAAO,aACpB80L,GAAa90L,OAAO,aACpB+0L,GAAS/0L,OAAO,SAChBg1L,GAASh1L,OAAO,SAChBi1L,GAAUj1L,OAAO;;;;;;;;;;;;;;;AA6DvB,IAAIk1L,GAhBJR,GAAOG,GAAYF,GAAOG,GAiB1B,MAAMK,GAAYn1L,OAAO,UACnBo1L,GAAWp1L,OAAO;;;;;;;;;;;;;;;AAmCxB,IAAIq1L,GAAMC,GAhBVJ,GAAOE,GAiBP,MAAMG,GAAYv1L,OAAO,UACnBw1L,GAAUx1L,OAAO,UACjBy1L,GAAWz1L,OAAO,WAClB01L,GAAU11L,OAAO;;;;;;;;;;;;;;;AAkDvB,IAAI21L,GAAMC,GAAMC,GAAMC,GAAMC,GAAMC,GAhBlCX,GAAOG,GAASF,GAAOG,GAiBvB,MAAMQ,GAAqB,CACvBl+B,MA3SJ,cAAsBi7B,GAClB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAKu1L,IAAQv2L,OAAOgvG,OAAO,IAC3BhuG,KAAKy1L,IAAahB,EAClB,IAAK,MAAM5iK,KAAY6lK,EAAWzmK,UAC9BjxB,KAAKy1L,IAAWkC,YAAY,WAAY9lK,GAUhDZ,gBACI,OAAOjxB,KAAKy1L,IAAWmC,kBAAkB,YAK7ClD,iBACI,OAAO10L,OAqRX6xB,SArXJ,cAAyB2iK,GACrB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAK80L,IAAQ,KACb90L,KAAK+0L,IAAQ,KACb/0L,KAAKg1L,IAAQ,KACbh1L,KAAKq1L,IAAaZ,EACK,MAAnBiD,EAAWv2L,OACXnB,KAAKs1L,IAAWoC,EAAWv2L,MAE/B,MAAMm+I,qBAAEA,EAAoB0O,cAAEA,EAAaC,iBAAEA,EAAgBG,gBAAEA,GAAoBspC,EACnF13L,KAAKi1L,IACDR,EAAOkD,YAAY,yBAA0Br4C,GAC5B,MAAjB0O,IACAhuJ,KAAKk1L,IAAkBT,EAAOkD,YAAY,eAAgB3pC,IAEtC,MAApBC,IACAjuJ,KAAKm1L,IACDV,EAAOkD,YAAY,eAAgB1pC,IAEpB,MAAnBG,IACApuJ,KAAKo1L,IACDX,EAAOkD,YAAY,eAAgBvpC,IAM/C9O,2BACI,OAAOt/I,KAAKi1L,IAEhBjnC,oBACI,OAAOhuJ,KAAKk1L,IAEhBjnC,uBACI,OAAOjuJ,KAAKm1L,IAEhB/mC,sBACI,OAAOpuJ,KAAKo1L,IAMhBj0L,WACI,OAAOnB,KAAKs1L,MAyUhBuC,yBAzPJ,cAAmCrD,GAC/B51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAK01L,IAAQ,KACb11L,KAAK21L,IAAQ,KACb31L,KAAK41L,IAAanB,EAClBz0L,KAAK61L,IAAoB72L,OAAOgvG,OAAO0pF,EAAWn4C,iBAClDv/I,KAAKg2L,IAAmB0B,EAAW/pC,eACnC3tJ,KAAKi2L,IAAoByB,EAAW9pC,gBACpC,MAAMpO,iBAAEA,EAAgBqO,yBAAEA,GAA6B6pC,EAC/B,MAApBl4C,IACAx/I,KAAK81L,IACDrB,EAAOkD,YAAY,eAAgBn4C,IAEX,MAA5BqO,IACA7tJ,KAAK+1L,IACDtB,EAAOkD,YAAY,eAAgB9pC,IAM/CtO,sBACI,OAAOv/I,KAAK61L,IAKhBloC,qBACI,OAAO3tJ,KAAKg2L,IAKhBpoC,sBACI,OAAO5tJ,KAAKi2L,IAEhBz2C,uBACI,OAAOx/I,KAAK81L,IAEhBjoC,+BACI,OAAO7tJ,KAAK+1L,IAOhBn3L,yBAAyByhC,SACfrgC,KAAK41L,IAAWkC,OAAO93L,KAAM,kBAAmBqgC,GACtDrgC,KAAK61L,IAAoB72L,OAAOgvG,OAAO3tE,GAO3CzhC,wBAAwB07E,SACdt6E,KAAK41L,IAAWkC,OAAO93L,KAAM,iBAAkBs6E,GACrDt6E,KAAKg2L,IAAmB17G,EAO5B17E,yBAAyB07E,SACft6E,KAAK41L,IAAWkC,OAAO93L,KAAM,kBAAmBs6E,GACtDt6E,KAAKi2L,IAAoB37G,IAsL7BpmE,MAvaJ,cAAoBsgL,GAChB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAK20L,IAAWF,EAChBz0L,KAAK40L,IAAQ8C,EAAWxsC,KAAO,KAC/BlrJ,KAAK60L,IAAS6C,EAAWv2L,KAE7BA,WACI,OAAOnB,KAAK60L,IAEhB/1L,WACI,OAAmB,MAAZkB,KAAKkrJ,IAAc,WAAa,WAE3CA,UACI,OAAOlrJ,KAAK40L,IAEhBh2L,aAAassJ,SACHlrJ,KAAK20L,IAASmD,OAAO93L,KAAM,MAAOkrJ,GACxClrJ,KAAK40L,IAAQ1pC,IAsZjBwB,QA7JJ,cAAsB8nC,GAClB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAKk2L,IAAQ,KACbl2L,KAAKm2L,IAAQ,KACbn2L,KAAKo2L,IAAa3B,EAClBz0L,KAAKy2L,IAAWiB,EAAWv2L,KAC3BnB,KAAKq2L,IAAcqB,EAAWviL,WAAa,KAC3CnV,KAAKs2L,IAAcoB,EAAWxiL,WAAa,KAC3ClV,KAAKu2L,IAAUmB,EAAW1iL,OAAS,MACnChV,KAAKw2L,IAAUkB,EAAWziL,OAAS,MAEvC9T,WACI,OAAOnB,KAAKy2L,IAEhBthL,gBACI,OAAOnV,KAAKq2L,IAEhBnhL,gBACI,OAAOlV,KAAKs2L,IAEhBthL,YACI,OAAOhV,KAAKu2L,IAEhBthL,YACI,OAAOjV,KAAKw2L,IAEhB53L,mBAAmBynE,SACTrmE,KAAKo2L,IAAW0B,OAAO93L,KAAM,YAAaqmE,GAChDrmE,KAAKq2L,IAAchwH,EAEvBznE,mBAAmBynE,SACTrmE,KAAKo2L,IAAW0B,OAAO93L,KAAM,YAAaqmE,GAChDrmE,KAAKs2L,IAAcjwH,EAEvBznE,eAAes2D,SACLl1D,KAAKo2L,IAAW0B,OAAO93L,KAAM,QAASk1D,GAC5Cl1D,KAAKu2L,IAAUrhI,EAEnBt2D,eAAes2D,SACLl1D,KAAKo2L,IAAW0B,OAAO93L,KAAM,QAASk1D,GAC5Cl1D,KAAKw2L,IAAUthI,IAqHnBh8C,QAxDJ,cAAwBs7K,GACpB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAK62L,IAAQ,KACb72L,KAAK82L,IAAQ,KACb92L,KAAK+2L,IAAatC,EAClB,MAAM/nC,QAAEA,EAAOpjJ,OAAEA,EAAMnI,KAAEA,GAASu2L,EAClC13L,KAAKk3L,IAAW/1L,EACD,MAAXurJ,IACA1sJ,KAAKi3L,IAAYxC,EAAOkD,YAAY,UAAWjrC,IAErC,MAAVpjJ,IACAtJ,KAAKg3L,IAAWvC,EAAOkD,YAAY,QAASruL,IAGpDnI,WACI,OAAOnB,KAAKk3L,IAEhBxqC,cACI,OAAO1sJ,KAAKi3L,IAEhB3tL,aACI,OAAOtJ,KAAKg3L,IAEhBp4L,iBAAiB8tJ,SACP1sJ,KAAK+2L,IAAWe,OAAO93L,KAAM,UAAW0sJ,GAC9C1sJ,KAAKi3L,IAAYvqC,EAErB9tJ,gBAAgBsV,SACNlU,KAAK+2L,IAAWe,OAAO93L,KAAM,SAAUkU,GAC7ClU,KAAKg3L,IAAW9iL,IA2BpB6jL,eAhGJ,cAA0BvD,GACtB51L,YAAY61L,EAAQiD,GAChB33L,MAAM00L,GACNz0L,KAAK02L,IAAQ,KACb12L,KAAK22L,IAAalC,EAClB,MAAMv7K,QAAEA,GAAYw+K,EACL,MAAXx+K,IACAlZ,KAAK42L,IAAYnC,EAAOkD,YAAY,UAAWz+K,IAGvDA,cACI,OAAOlZ,KAAK42L,IAEhBh4L,iBAAiBsa,SACPlZ,KAAK22L,IAAWmB,OAAO93L,KAAM,UAAWkZ,GAC9ClZ,KAAK42L,IAAY19K,KAmFnB8+K,GAAkBx2L,OAAO,kBACzBy2L,GAAuBz2L,OAAO,uBAC9B02L,GAAQ12L,OAAO,QACf22L,GAAS32L,OAAO,SAChB42L,GAAqB52L,OAAO,qBAC5B62L,GAAqB72L,OAAO,qBAC5B82L,GAAkB92L,OAAO,kBACzB+2L,GAAoB/2L,OAAO,oBAC3Bg3L,GAAkBh3L,OAAO,kBAc/B,MAAMi3L,GACF75L,YAAY85L,EAAMhB,GACd13L,KAAKm3L,IAAQ,IAAIp2L,IACjBf,KAAKo3L,IAAQ,IAAIr2L,IACjBf,KAAKq3L,IAAQ,IAAIt2L,IACjBf,KAAKs3L,IAASrtL,GAAUjK,KAAKg4L,IAAiB/tL,GAC9CjK,KAAKu3L,IAAQ,IAAIx2L,IACjBf,KAAKw3L,IAAQ,EACb,MAAMmB,EAAQ,IAAI15L,MAAM,QAAS,WAAY,yBAA0B,UAAW,QAAS,UAAW,gBACtG,IAAK,MAAMH,KAAQ65L,EACf34L,KAAKs4L,IAAiBz3L,IAAI/B,EAAM,IAAImtK,KAExCjsK,KAAKk4L,IAASQ,EACd14L,KAAKk4L,IAAOl6L,iBAAiB,UAAWgC,KAAKi4L,KAC7Cj4L,KAAKk4L,IAAOplK,QACZ9yB,KAAKm4L,IAAUn4L,KAAK23L,YAAY,QAASD,GAM7Cn+B,YACI,OAAOv5J,KAAKm4L,IAWhBv5L,aAAayG,EAASO,EAAU/G,GAC5B,IAAKmB,KAAKq4L,IAAoBp0L,IAAIoB,GAC9B,MAAM,IAAIiJ,MAAM,iCAEpB,MAAM2hB,EAAKjwB,KAAKq4L,IAAoBr2L,IAAIqD,GAIxC,OAHIxG,aAAiB21L,KACjB31L,EAAQmB,KAAKq4L,IAAoBr2L,IAAInD,IAElC,IAAIgE,QAAQ,CAAC+6G,EAASC,KACzB,MAAM+6E,EAAa54L,KAAKw4L,MAExBx4L,KAAKk4L,IAAOvhD,YAAY,CACpB73I,KAAMw1L,GACNrkK,GAAAA,EACArqB,SAAAA,EACA/G,MAAAA,EACA+5L,WAAAA,IAGJ54L,KAAKu4L,IAAmB13L,IAAI+3L,EAAY,CACpCh7E,QAAAA,EACAC,OAAAA,MAQZj/G,YAAYE,EAAM44L,GACd,MAAMznK,GAAEA,GAAOynK,EAEf,GAAI13L,KAAKo4L,IAAoBn0L,IAAIgsB,GAC7B,OAAOjwB,KAAKo4L,IAAoBp2L,IAAIiuB,GAExC,MAAM4oK,EAAqBpB,GAAmB34L,GAC9C,GAA0B,MAAtB+5L,EACA,MAAM,IAAIvqL,MAAM,oCAAoCxP,GAGxD,MAAMuG,EAAU,IAAIwzL,EAAmB74L,KAAM03L,GAO7C,OANA13L,KAAKo4L,IAAoBv3L,IAAIovB,EAAI5qB,GACjCrF,KAAKq4L,IAAoBx3L,IAAIwE,EAAS4qB,GAItCjwB,KAAKs4L,IAAiBt2L,IAAIlD,GAAMmiB,IAAI5b,GAC7BA,EASXzG,kBAAkBE,GACd,OAAKkB,KAAKs4L,IAAiBr0L,IAAInF,GAIxBG,MAAM0xG,KAAK3wG,KAAKs4L,IAAiBt2L,IAAIlD,IAHjC,GAafF,aACIoB,KAAKk4L,IAAOY,QACZ94L,KAAKk4L,IAAOj6L,oBAAoB,UAAW+B,KAAKi4L,KAEpDr5L,EAAEu4L,GAAOiB,GAAoBhB,GAAOiB,GAAoBhB,GAAOiB,GAAiBhB,GAAOW,GAAsBV,GAAOgB,GAAmBf,GAAOgB,GAAiBR,KAAkB/tL,GAC7K,MAAMioB,KAAEA,GAASjoB,EACjB,OAAQioB,GAAQA,EAAKpzB,MACjB,KAAKw1L,GAAqC,CACtC,MAAMlnG,EAAUl7D,GACV6mK,QAAEA,EAAOH,WAAEA,GAAexrG,EAC1B4rG,EAAkBh5L,KAAKu4L,IAAmBv2L,IAAI42L,GACpD54L,KAAKu4L,IAAmBz2I,OAAO82I,GACR,MAAnBI,IACAD,EAAUC,EAAgBp7E,UAAYo7E,EAAgBn7E,UAE1D;;;;;;;;;;;;;;GAoBhB,IAAIo7E,GACJ,MAAMC,GAAc13L,OAAO,cACrB23L,GAAU33L,OAAO,QACjB43L,GAAyB53L,OAAO,uBAChC63L,GAAoB73L,OAAO,kBAOjC,MAAM83L,GACF16L,YAAY26L,EAAYb,GACpB14L,KAAKi5L,IAAShvL,GAAUjK,KAAKq5L,IAAmBpvL,GAChDjK,KAAKk5L,IAAeK,EACpBv5L,KAAKm5L,IAAWT,EAChB14L,KAAKm5L,IAASn7L,iBAAiB,UAAWgC,KAAKo5L,KAC/Cp5L,KAAKm5L,IAASrmK,QAMlBl0B,UACIoB,KAAKm5L,IAASl7L,oBAAoB,UAAW+B,KAAKo5L,KAClDp5L,KAAKm5L,IAASL,QAElBl6L,OAAQq6L,GAAOG,GAAwBC,KAAoBpvL,GACvD,MAAMioB,KAAEA,GAASjoB,EACjB,GAAIioB,GAAQA,EAAKpzB,MACTozB,EAAKpzB,OAASw1L,GAA4B,CAC1C,IAAIyE,GAAU,EACd,MAAMH,WAAEA,GAAe1mK,EACvB,UACUlyB,KAAKk5L,IAAapB,OAAO5lK,EAAKjC,GAAIiC,EAAKtsB,SAAUssB,EAAKrzB,OAC5Dk6L,GAAU,UAGV/4L,KAAKm5L,IAASxiD,YAAY,CAAE73I,KAAMw1L,GAAqCyE,QAAAA,EAASH,WAAAA;;;;;;;;;;;;;;GAyBpG,MAAMY,GAAqB,MACvB,IAAIvpK,EAAK,EACT,MAAO,IAAMA,KAFU,GAIrBwpK,GAAaj4L,OAAO,aACpBk4L,GAAal4L,OAAO,aACpBm4L,GAAgBn4L,OAAO,gBACvBo4L,GAAap4L,OAAO,aACpBq4L,GAAcr4L,OAAO,cACrBs4L,GAAiBt4L,OAAO,iBAyB9B,MAAMu4L,GACFn7L,YAAYsiH,GACRlhH,KAAKy5L,IAAcv4E,EAQvBtiH,MAAMy9I,EAAMv+I,EAAU,IAClB,MAAMk8L,IAAcl8L,EAAQk8L,UACtB3uC,IAAWvtJ,EAAQutJ,OACnBpC,EAAS+wC,EACX39C,EAAK4M,QAAU,GACd5M,EAAK4M,QAAwB,MAAd5M,EAAKv+F,MAAiB,CAACu+F,EAAK4M,OAAO5M,EAAKv+F,QAAU,GAChEwR,EAAQ,CAAEisD,UAAW,GAAI0+E,QAAS,IAAIhuB,IAAO5gB,OAAAA,EAAQhP,KAAAA,GAC3D,IAAK,MAAMv+F,KAASmrG,EAChBjpJ,KAAK65L,IAAax9C,EAAK4M,OAAOr/I,QAAQk0C,GAAQwR,GAGtD1wD,CAAC+6L,IAAexwL,EAAO+wL,EAAa5qI,EAAO6qI,EAAOzpK,GAC9C,GAAmB,MAAfwpK,EACA,OAEJ,MAAM70L,EAAU60L,EAAY/wL,IACtBkiJ,OAAEA,EAAM9vC,UAAEA,EAAS0+E,QAAEA,GAAY3qI,EACxB,MAAXjqD,IAGAgmJ,GAAU4uC,EAAQh2L,IAAIoB,KAG1B40L,EAAQh5K,IAAI5b,GACZk2G,EAAUp9G,KAAKkH,GACF,MAAT80L,GACAA,EAAM90L,EAAS8D,EAAOoyG,GAEV,MAAZ7qF,GACAA,EAASrrB,GAEbk2G,EAAU/uC,QAEd5tE,CAACi7L,IAAa1wL,EAAOmmD,GACjB,MAAM+sF,KAAEA,GAAS/sF,GACTxR,MAAOq8I,GAAUn6L,KAAKy5L,IAC9Bz5L,KAAK25L,IAAexwL,EAAOkzI,EAAK4M,OAAQ35F,EAAO6qI,EAAQr8I,IAEnD,GAAmB,MAAfA,EAAMqrG,MAGV,IAAK,MAAMM,KAAa3rG,EAAMqrG,MAC1BnpJ,KAAK45L,IAAYnwC,EAAWn6F,KAIxC1wD,CAACg7L,IAAYzwL,EAAOmmD,GAChB,MAAM+sF,KAAEA,GAAS/sF,GACT0nE,KAAMmjE,GAAUn6L,KAAKy5L,IAC7Bz5L,KAAK25L,IAAexwL,EAAOkzI,EAAK8M,MAAO75F,EAAO6qI,EAAQnjE,IAIlD,GAHiB,MAAbA,EAAKtgF,MACL12C,KAAK05L,IAAY1iE,EAAKtgF,KAAM4Y,GAEX,MAAjB0nE,EAAKj1G,SACL,IAAK,MAAMq4K,KAAkBpjE,EAAKj1G,SAC9B/hB,KAAK45L,IAAYQ,EAAgB9qI,KAKjD1wD,CAAC86L,IAAYvwL,EAAOmmD,GAChB,MAAM+sF,KAAEA,GAAS/sF,GACT5Y,KAAMyjJ,GAAUn6L,KAAKy5L,IAC7Bz5L,KAAK25L,IAAexwL,EAAOkzI,EAAKkN,OAAQj6F,EAAO6qI,EAAQzjJ,IACnD,IAAK,MAAM6rG,KAAa7rG,EAAK43G,WACC,MAAtB/L,EAAU1wH,UACV7xB,KAAK85L,IAAgBv3C,EAAU1wH,SAAUy9B,KAKzD1wD,CAACk7L,IAAgB3wL,EAAOmmD,GACpB,MAAM+sF,KAAEA,GAAS/sF,GACTz9B,SAAUsoK,GAAUn6L,KAAKy5L,IACjCz5L,KAAK25L,IAAexwL,EAAOkzI,EAAKprH,UAAWq+B,EAAO6qI;;;;;;;;;;;;;;GAkB1D,IAAIE,GACJ,MAAMC,GAAqB94L,OAAO,qBAC5B+4L,GAAgB/4L,OAAO,gBACvBg5L,GAASh5L,OAAO,SAChBi5L,GAAMj5L,OAAO,MAOnB,MAAMk5L,GACF97L,YAAY+7L,EAAOt1L,EAASu1L,EAAoB,MAC5C56L,KAAKq6L,IAAQb,KACbx5L,KAAKw6L,IAAUG,EACf36L,KAAKu6L,IAAiBl1L,EACtBrF,KAAKs6L,IAAsBM,EAC3BD,EAAME,MAAM76L,MAKhB00L,iBACI,OAAO10L,KAAKw6L,IAAQjhC,MAOxBuhC,iBACI,OAAO96L,KAAKy6L,IAQhBt5L,WACI,OAAOnB,KAAKu6L,IAAep5L,MAAQ,KAKvCy5L,wBACI,OAAO56L,KAAKs6L,IAKhBS,mBACI,OAAO/6L,KAAKu6L,IAMhB37L,OAAOo8L,EAAWhpC,GACd,MAAM,IAAI1jJ,MAAM,6CAKpB1P,SACI,MAAM84L,EAAa,CAAEznK,GAAIjwB,KAAKy6L,MACxBt5L,KAAEA,GAASnB,KAIjB,OAHY,MAARmB,IACAu2L,EAAWv2L,KAAOA,GAEfu2L;;;;;;;;;;;;;;;AAmBf,IAAIuD,GAhBJZ,GAAOI,GAiBP,MAAMz9E,GAAS,IAAIsB,GACb48E,GAAiB15L,OAAO,iBACxB25L,GAAoB35L,OAAO,oBAIjC,MAAM45L,WAAgBV,GAClB97L,YAAY+7L,EAAOzmL,EAAOmnL,GAGtB,GAFAt7L,MAAM46L,EAAOzmL,EAAOmnL,GACpBr7L,KAAKi7L,IAAQ,IAAIv5I,QACO,MAApBxtC,EAAMuuI,WACN,IAAK,MAAMvpI,KAAWmiL,EAClBr7L,KAAKm7L,IAAmBt6L,IAAIqY,EAASA,EAAQhF,OAIzDgnL,IAAKA,MACD,OAAOl7L,KAAKs6L,IAEhB17L,aAAagH,EAAU/G,GACnB,IAAIqV,EAAQ,KACZ,GAAiB,QAAbtO,EACA,MAAM,IAAI0I,MAAM,8BAA8B1I,eAErC,MAAT/G,IACAqV,QAAc,IAAIrR,QAAQ,CAAC+6G,EAASC,KAChCb,GAAOU,KAAK7+G,EAAO++G,OAASj9G,EAAWk9G,MAG/C,IAAK,MAAM3kG,KAAWlZ,KAAKk7L,IAIV,MAAThnL,GACgC,MAAhClU,KAAK+6L,aAAat4C,WAClBvpI,EAAQhF,MAAQlU,KAAKm7L,IAAmBn5L,IAAIkX,GAG5CA,EAAQhF,MAAQA,EAEpBgF,EAAQ80B,aAAc,EAG9BpvC,SACI,MAAM84L,EAAa33L,MAAM2W,UACnBw0I,IAAEA,GAAQlrJ,KAAK+6L,aAIrB,OAHW,MAAP7vC,IACAwsC,EAAWxsC,IAAMA,GAEdwsC,GAGfuD,GAAOE;;;;;;;;;;;;;;;AAgBP,MAAMG,GAAc,MAChB,MAAMC,EAAkB,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,MACvD,OAAQ18L,GAAU08L,EAAgB3xL,QAAQ/K,IAAU,GAFpC,GAId28L,GAAc,MAChB,MAAMC,EAAkB,CAAC,KAAM,MAC/B,OAAQ58L,GAAU48L,EAAgB7xL,QAAQ/K,IAAU,GAFpC,GAId68L,GAAa,MACf,MAAMC,EAAY,CAAC,MAAO,MAAO,OACjC,OAAQ98L,GAAU88L,EAAU/xL,QAAQ/K,IAAU,GAF/B,GAsBb+8L,GAAgB,CAClBzmL,UAAW,KACXD,UAAW,KACXF,MAAO,MACPC,MAAO,OAEL4mL,GAAmBr6L,OAAO,iBAIhC,MAAMs6L,WAAkBpB,GACpBmB,IAAKA,MACD,OAAO77L,KAAKs6L,IAEhB17L,YAAY+7L,EAAOjuC,EAAS2uC,GACxBt7L,MAAM46L,EAAOjuC,EAAS2uC,GAE1Bz8L,aAAagH,EAAU/G,GACnB,MAAM6tJ,EAAU1sJ,KAAK+6L,aACrB,GAAa,MAATl8L,GACA,GAtCgB,EAAC+G,EAAU/G,KACnC,OAAQ+G,GACJ,IAAK,YACD,OAAO01L,GAAYz8L,GACvB,IAAK,YACD,OAAO28L,GAAY38L,GACvB,IAAK,QACL,IAAK,QACD,OAAO68L,GAAW78L,GACtB,QACI,MAAM,IAAIyP,MAAM,8BAA8B1I,mBA4B1Cm2L,CAAoBn2L,EAAU/G,GAAQ,CACtC6tJ,EAAQ9mJ,GAAY/G,EACpB,IAAK,MAAMqa,KAAWlZ,KAAK67L,IACvB3iL,EAAQtT,GAAY/G,EACpBqa,EAAQ80B,aAAc,QAI7B,GAAIpoC,KAAY8mJ,EAAS,QACnBA,EAAQ9mJ,GACf,IAAK,MAAMsT,KAAWlZ,KAAK67L,IACvB3iL,EAAQtT,GAAYg2L,GAAch2L,GAClCsT,EAAQ80B,aAAc,GAIlCpvC,SACI,MAAM84L,EAAa33L,MAAM2W,UACnBvB,UAAEA,EAASD,UAAEA,EAASF,MAAEA,EAAKC,MAAEA,GAAUjV,KAAK+6L,aAapD,OAZiB,MAAb5lL,IACAuiL,EAAWviL,UAAYA,GAEV,MAAbD,IACAwiL,EAAWxiL,UAAYA,GAEb,QAAVF,IACA0iL,EAAW1iL,MAAQA,GAET,QAAVC,IACAyiL,EAAWziL,MAAQA,GAEhByiL;;;;;;;;;;;;;;GAkBf,IAAIsE,GAAMC,GACV,MAAMC,GAAY16L,OAAO,UACnB26L,GAAa36L,OAAO,WAI1B,MAAM46L,WAAkB1B,GACpB97L,YAAY+7L,EAAOzhL,EAASmiL,GACxBt7L,MAAM46L,EAAOzhL,EAASmiL,GACtBr7L,KAAKg8L,IAAQ,KACbh8L,KAAKi8L,IAAQ,KACb,MAAMI,EAAO1B,EAAMvrB,qBAAqB/yB,MAChCqQ,QAAS4vC,EAAchzL,OAAQizL,GAAerjL,EACtD,GAAoB,MAAhBojL,EAAsB,CACtB,MAAM5vC,EAAU2vC,EAAK1vC,UAAY0vC,EAAK1vC,SAAS2vC,GAChC,MAAX5vC,IACA1sJ,KAAKm8L,IAAc,IAAIL,GAAUnB,EAAOjuC,EAAS2uC,IAGzD,GAAkB,MAAdkB,EAAoB,CACpB,MAAMroL,EAAQmoL,EAAKplL,QAAUolL,EAAKplL,OAAOslL,GAC5B,MAATroL,IACAlU,KAAKk8L,IAAa,IAAId,GAAQT,EAAOzmL,EAAOmnL,KAIxD3uC,cACI,OAAO1sJ,KAAKm8L,IAEhB7yL,aACI,OAAOtJ,KAAKk8L,IAEhBt9L,SACI,MAAM84L,EAAa33L,MAAM2W,UACnBg2I,QAAEA,EAAOpjJ,OAAEA,GAAWtJ,KAO5B,OANe,MAAX0sJ,IACAgrC,EAAWhrC,QAAUA,EAAQh2I,UAEnB,MAAVpN,IACAouL,EAAWpuL,OAASA,EAAOoN,UAExBghL;;;;;;;;;;;;;;;AAmBf,IAAI8E,GAhBJR,GAAOE,GAAWD,GAAOE,GAiBzB,MAAMM,GAAaj7L,OAAO,WAI1B,MAAMk7L,WAAsBhC,GACxB97L,YAAY+7L,EAAOgC,EAAatB,GAC5Bt7L,MAAM46L,EAAOgC,EAAatB,GAC1Br7L,KAAKw8L,IAAQ,KACb,MAAMH,EAAO1B,EAAMvrB,qBAAqB/yB,MAChClzI,MAAO+2I,GAAiBy8C,EAC1BzjL,EAA0B,MAAhBgnI,GAAyC,MAAjBm8C,EAAKxlL,SACzCwlL,EAAKxlL,SAASqpI,GACd,KACW,MAAXhnI,IACAlZ,KAAKy8L,IAAc,IAAIL,GAAUzB,EAAOzhL,EAASmiL,IAGzDniL,cACI,OAAOlZ,KAAKy8L,IAEhB79L,SACI,MAAM84L,EAAa33L,MAAM2W,UACnBwC,QAAEA,GAAYlZ,KAIpB,OAHe,MAAXkZ,IACAw+K,EAAWx+K,QAAUA,EAAQxC,UAE1BghL;;;;;;;;;;;;;;;AAmBf,IAAIkF,GAAMC,GAhBVL,GAAOC,GAiBP,MAAMK,GAAkBt7L,OAAO,kBACzBu7L,GAAsBv7L,OAAO,oBAC7Bw7L,GAA8Bx7L,OAAO,4BAI3C,MAAMy7L,WAA+BvC,GACjC97L,YAAY+7L,EAAOr7C,EAAsB49C,GACrCn9L,MAAM46L,EAAOr7C,EAAsB49C,GACnCl9L,KAAK48L,IAAQ,KACb58L,KAAK68L,IAAQ,KACb,MAAMr9C,iBAAEA,EAAgBqO,yBAAEA,GAA6BvO,EACjD69C,EAAoB,IAAIlxB,IACxBmxB,EAA4B,IAAInxB,IACtC,IAAK,MAAMp6I,KAAYqrK,EACK,MAApB19C,GAA4C,MAAhB3tH,EAASwS,KACrC84J,EAAkBl8K,IAAI4Q,EAASwS,KAKH,MAA5BwpH,GAA6D,MAAzBh8H,EAASuV,cAC7Cg2J,EAA0Bn8K,IAAI4Q,EAASuV,cAG3C+1J,EAAkBj4L,KAAO,IACzBlF,KAAK+8L,IACD,IAAIL,GAAc/B,EAAOn7C,EAAkB29C,IAE/CC,EAA0Bl4L,KAAO,IACjClF,KAAKg9L,IAA+B,IAAIN,GAAc/B,EAAO9sC,EAA0BuvC,IAG/Fp7L,KAAM46L,GAAOG,GAAqBF,GAAOG,GAA6BF,OAClE,OAAO98L,KAAKs6L,IAEhB/6C,sBACI,OAAOv/I,KAAK+6L,aAAax7C,iBACrB,CAAC,EAAG,EAAG,EAAG,GAElBoO,qBACI,OAAO3tJ,KAAK+6L,aAAaptC,gBAAkB,EAE/CC,sBACI,OAAO5tJ,KAAK+6L,aAAantC,iBAAmB,EAEhDpO,uBACI,OAAOx/I,KAAK+8L,IAEhBlvC,+BACI,OAAO7tJ,KAAKg9L,IAEhBp+L,aAAagH,EAAU/G,GACnB,IAAK,CAAC,kBAAmB,iBAAkB,mBAAmBw+L,SAASz3L,GACnE,MAAM,IAAI0I,MAAM,iBAAiB1I,6BAErC,OAAQA,GACJ,IAAK,kBACD,IAAK,MAAMisB,KAAY7xB,KAAK88L,IAAkB,CAC1CjrK,EAASwO,MAAM1vB,UAAU9R,GACzBgzB,EAASuQ,QAAUvjC,EAAM,GACzB,MAAMygJ,EAAuBt/I,KAAKu6L,IACpB,IAAV17L,GAAyB,IAAVA,GACL,IAAVA,GAAyB,IAAVA,SACRygJ,EAAqBC,gBAG5BD,EAAqBC,gBAAkB1gJ,EAG/C,MACJ,IAAK,iBACD,IAAK,MAAMgzB,KAAY7xB,KAAK88L,IAAkB,CAC1CjrK,EAASiU,UAAYjnC,EACQmB,KAAKu6L,IACb5sC,eAAiB9uJ,EAE1C,MACJ,IAAK,kBACD,IAAK,MAAMgzB,KAAY7xB,KAAK88L,IAAkB,CAC1CjrK,EAASgU,UAAYhnC,EACQmB,KAAKu6L,IACb3sC,gBAAkB/uJ,IAKvDD,SACI,MAAM84L,EAAa33L,MAAM2W,UACnB8oI,iBAAEA,EAAgBqO,yBAAEA,EAAwBtO,gBAAEA,EAAeqO,gBAAEA,EAAeD,eAAEA,GAAmB3tJ,KAgBzG,OAfwB,MAApBw/I,IACAk4C,EAAWl4C,iBAAmBA,EAAiB9oI,UAE5B,MAAnB6oI,IACAm4C,EAAWn4C,gBAAkBA,GAEX,MAAlBoO,IACA+pC,EAAW/pC,eAAiBA,GAET,MAAnBC,IACA8pC,EAAW9pC,gBAAkBA,GAED,MAA5BC,IACA6pC,EAAW7pC,yBAA2BA,EAAyBn3I,UAE5DghL;;;;;;;;;;;;;;GAkBf,IAAI4F,GAAMC,GAAMC,GAAMC,GACtB,MAAMC,GAA0Bl8L,OAAO,wBACjCm8L,GAAmBn8L,OAAO,iBAC1Bo8L,GAAsBp8L,OAAO,oBAC7Bq8L,GAAqBr8L,OAAO,mBAIlC,MAAMs8L,WAAmBpD,GACrB97L,YAAY+7L,EAAO9oK,EAAUqrK,GACzBn9L,MAAM46L,EAAO9oK,EAAUqrK,GACvBl9L,KAAKs9L,IAAQ,KACbt9L,KAAKu9L,IAAQ,KACbv9L,KAAKw9L,IAAQ,KACbx9L,KAAKy9L,IAAQ,KACb,MAAMn+C,qBAAEA,EAAoB0O,cAAEA,EAAaC,iBAAEA,EAAgBG,gBAAEA,GAAoBv8H,EACvD,MAAxBytH,IACAt/I,KAAK09L,IAA2B,IAAIT,GAAuBtC,EAAOr7C,EAAsB49C,IAE5F,MAAMa,EAAiB,IAAI9xB,IACrB+xB,EAAoB,IAAI/xB,IACxBgyB,EAAmB,IAAIhyB,IAC7B,IAAK,MAAMp6I,KAAYqrK,EAAqB,CACxC,MAAMr2J,UAAEA,EAASrC,MAAEA,EAAK6C,YAAEA,GAAgBxV,EACrB,MAAjBm8H,GAAsC,MAAbnnH,GACzBk3J,EAAe98K,IAAI4lB,GAEC,MAApBonH,GAAqC,MAATzpH,GAC5Bw5J,EAAkB/8K,IAAIujB,GAEH,MAAnB4pH,GAA0C,MAAf/mH,GAC3B42J,EAAiBh9K,IAAIomB,GAGzB02J,EAAe74L,KAAO,IACtBlF,KAAK29L,IACD,IAAIjB,GAAc/B,EAAO3sC,EAAe+vC,IAE5CC,EAAkB94L,KAAO,IACzBlF,KAAK49L,IACD,IAAIlB,GAAc/B,EAAO1sC,EAAkB+vC,IAE/CC,EAAiB/4L,KAAO,IACxBlF,KAAK69L,IACD,IAAInB,GAAc/B,EAAOvsC,EAAiB6vC,IAGtD3+C,2BACI,OAAOt/I,KAAK09L,IAEhB1vC,oBACI,OAAOhuJ,KAAK29L,IAEhB1vC,uBACI,OAAOjuJ,KAAK49L,IAEhBxvC,sBACI,OAAOpuJ,KAAK69L,IAEhBj/L,SACI,MAAM84L,EAAa33L,MAAM2W,UACnB4oI,qBAAEA,EAAoB0O,cAAEA,EAAaC,iBAAEA,EAAgBG,gBAAEA,GAAoBpuJ,KAanF,OAZ4B,MAAxBs/I,IACAo4C,EAAWp4C,qBAAuBA,EAAqB5oI,UAEtC,MAAjBs3I,IACA0pC,EAAW1pC,cAAgBA,EAAct3I,UAErB,MAApBu3I,IACAypC,EAAWzpC,iBAAmBA,EAAiBv3I,UAE5B,MAAnB03I,IACAspC,EAAWtpC,gBAAkBA,EAAgB13I,UAE1CghL;;;;;;;;;;;;;;;AAmBf,IAAIwG,GAAMC,GAhBVb,GAAOI,GAAyBH,GAAOI,GAAkBH,GAAOI,GAAqBH,GAAOI,GAiB5F,MAAMO,GAAY58L,OAAO,YACnB68L,GAAe78L,OAAO,aAM5B,MAAM88L,WAAgB5D,GAClB97L,YAAY+7L,EAAO4D,EAAUnvB,GACzBrvK,MAAM46L,EAAOvrB,EAAqB/yB,MAClCr8I,KAAKk+L,IAAQ,GACbl+L,KAAKm+L,IAAQ,GACbn+L,KAAKo+L,IAAaG,EACF,IAAIxE,GAAgB,CAChCloK,SAAWA,IACP7xB,KAAKq+L,IAAclgM,KAAK,IAAI2/L,GAAWnD,EAAO9oK,EAAUu9I,EAAqBzD,eAAe3pK,IAAI6vB,QAGhGsoK,MAAM/qB,EAAqB/yB,KAAM,CAAEgP,QAAQ,IAUvDp6H,gBACI,OAAOjxB,KAAKq+L,IAEhBz/L,SACI,MAAM84L,EAAa33L,MAAM2W,SAIzB,OAHAghL,EAAW6G,SAAWv+L,KAAKo+L,IAC3B1G,EAAWzmK,UACPjxB,KAAKq+L,IAAch6J,IAAKxS,GAAaA,EAASnb,UAC3CghL;;;;;;;;;;;;;;;AAmBf,IAAI8G,GAAMC,GAhBVP,GAAOE,GAAWD,GAAOE,GAiBzB,MAAMK,GAAWl9L,OAAO,SAClBm9L,GAA0Bn9L,OAAO,wBACjCo9L,GAAwBp9L,OAAO,wBAC/Bq9L,GAAmBr9L,OAAO,iBAiChC,MAAMs9L,GACFlgM,YAAY2/L,EAAUnvB,GAIlBpvK,KAAKw+L,IAAQ32L,SAASqwK,yBAItBl4K,KAAKhC,iBAAmB,IAAI+hK,IAAS//J,KAAK6+L,IAAkB7gM,oBAAoB+hK,GAChF//J,KAAK/B,oBAAsB,IAAI8hK,IAAS//J,KAAK6+L,IAAkB5gM,uBAAuB8hK,GACtF//J,KAAKgK,cAAgB,IAAI+1J,IAAS//J,KAAK6+L,IAAkB70L,iBAAiB+1J,GAC1E//J,KAAKy+L,IAAQ,IAAI19L,IACjBf,KAAK2+L,IAA2BvvB,EAChCpvK,KAAK0+L,IAAY,IAAIJ,GAAQt+L,KAAMu+L,EAAUnvB,GAEjDA,2BACI,OAAOpvK,KAAK2+L,IAEhBplC,YACI,OAAOv5J,KAAK0+L,IAEhB9/L,uBAAuBqxB,GACnB,MAAM5qB,EAAUrF,KAAK4+L,IAAuB58L,IAAIiuB,GAChD,OAAe,MAAX5qB,EACO,KAEJA,EAEXzG,MAAMyG,GACFrF,KAAK4+L,IAAuB/9L,IAAIwE,EAAQy1L,WAAYz1L,GAExDzG,aAAaqxB,EAAIrqB,EAAU/G,GACvB,MAAMwG,EAAUrF,KAAK++L,uBAAuB9uK,SACtC5qB,EAAQyyL,OAAOlyL,EAAU/G,GAC/BmB,KAAKgK,cAAc,IAAIopF,YAAY,WAAY,CAAEC,OAAQ,CAAEhuF,QAASA,OAG5Em5L,GAAOK,GAAkBJ,GAAOG,GAKhC,IAAIh7C,GACK,EADLA,GAEI,EAFJA,GAGQ,EAHRA,GAIS,EAJTA,GAKQ,EALRA,GASY,KATZA,GAUa,KAVbA,GAWI,KAXJA,GAYW,KAZXA,GAaW,MAbXA,GAcmB,MAdnBA,GAgBM,KAhBNA,GAiBK,KAjBLA,GAkBqB,KAlBrBA,GAmBoB,KAnBpBA,GAoBoB,KApBpBA,GAqBmB,KArBnBA,GAuBY,MAvBZA,GAwBc,MAxBdA,GAyBK,MAGLo7C,GAAiB,GAErBA,GAt18DsB,MAs18DYp7C,GAClCo7C,GAt18DmC,MAs18DYp7C,GAC/Co7C,GAt18DkC,MAs18DYp7C,GAC9Co7C,GAt18DqB,MAs18DYp7C,GACjCo7C,GAt18DkC,MAs18DYp7C,GAC9Co7C,GAt18DiC,MAs18DYp7C,GAE7Co7C,GA/18D4B,MA+18DYp7C,GACxCo7C,GAj28DuB,KAi28DYp7C,GACnCo7C,GAh28D+B,MAg28DYp7C,GAE3C,IAAIkC,GAAkB,CACrBz7H,MAAO,QACPD,SAAU,cACV7O,WAAY,WACZ83B,sBAAuB,WAMpB4rJ,GAAe,aAEnBA,GAAa39L,UAAY,CAExB4B,YAAa+7L,GAQb5/L,MAAO,SAAWywJ,EAAOovC,EAAQphM,GAEhC,IAAIipL,EAAkB,CACrBoY,QAAQ,EACRC,KAAK,EACLC,aAAa,EACbC,mBAAmB,EACnBC,aAAa,EACbrpI,eAAgB/1C,EAAAA,EAChBq6F,WAAY,GACZglF,yBAAyB,EACzBC,yBAAyB,IAG1B3hM,EAAUkB,OAAOuG,OAAQ,GAAIwhL,EAAiBjpL,IAEjC08G,WAAWnxG,OAAS,IAGhCvL,EAAQshM,KAAM,GAIf,IA4BIM,EA5BAC,EAAa,CAEhB3iD,MAAO,CAEN9mI,QAAS,MACTa,UAAW,iBAMT+pI,EAAa,EACbr/F,EAAU,GACV69E,EAAU,GACVsgE,EAAU,IAAI7+L,IACdsoJ,EAAQ,GACRjM,EAAiB,GACjByiD,EAAa,CAEhBt2C,OAAQ,IAAIxoJ,IACZX,WAAY,IAAIW,IAChB++L,qBAAsB,IAAI/+L,IAC1BkwB,UAAW,IAAIlwB,IACf8V,SAAU,IAAI9V,IACdkW,OAAQ,IAAIlW,KAMTg/L,EAAO,IAAIh/L,IACXi/L,EAAM,EAQV,SAASC,EAAQ/+K,GAIhB,OAFO6+K,EAAK97L,IAAKid,IAAW6+K,EAAKl/L,IAAKqgB,EAAQ8+K,KAEvCD,EAAK/9L,IAAKkf,GAUlB,SAASg/K,EAAYC,EAAQhvJ,GAE5B,OAASgvJ,EAAO92L,SAAW8nC,EAAO9nC,QAAY82L,EAAOC,OAAO,SAAW/6L,EAAS8D,GAE/E,OAAO9D,IAAY8rC,EAAQhoC,MA+J7B,SAASk3L,EAAqBC,GAE7B,OAAqC,EAA9BjjM,KAAKyP,KAAMwzL,EAAa,GAWhC,SAASC,EAAsBl1E,EAAam1E,GAE3CA,EAAcA,GAAe,EAE7B,IAAIC,EAAeJ,EAAqBh1E,EAAY+qB,YAEpD,GAAKqqD,IAAiBp1E,EAAY+qB,WAAa,CAE9C,IAAIlsI,EAAQ,IAAIu+B,WAAYg4J,GAG5B,GAFAv2L,EAAMrJ,IAAK,IAAI4nC,WAAY4iF,IAEN,IAAhBm1E,EAEJ,IAAM,IAAIr2L,EAAIkhH,EAAY+qB,WAAYjsI,EAAIs2L,EAAct2L,IAEvDD,EAAOC,GAAMq2L,EAMf,OAAOt2L,EAAM23C,OAId,OAAOwpE,EAUR,SAASq1E,EAAmBx/K,EAAQy/K,GAEnC,GAA+C,IAA1C3hM,OAAOuyC,KAAMrwB,EAAO+M,UAAW5kB,OAMpC,IAEC,IAAI0sG,EAAO72G,KAAKG,MAAOH,KAAKC,UAAW+hB,EAAO+M,WAE9C,GAAKnwB,EAAQ2hM,yBAA2B1pF,EAAK0wC,eAAiB,CAQ7D,IAAM,IAAIpJ,UANuB18I,IAA5BggM,EAAa5lJ,aAEjB4lJ,EAAa5lJ,WAAa,IAIAg7D,EAAK0wC,eAE/Bk6C,EAAa5lJ,WAAYsiG,GAAkBtnC,EAAK0wC,eAAgBpJ,GAChED,EAAgBC,IAAkB,SAI5BtnC,EAAK0wC,eAIRznJ,OAAOuyC,KAAMwkE,GAAO1sG,OAAS,IAEjCs3L,EAAa/5C,OAAS7wC,GAItB,MAAQ/lG,GAET1R,QAAQC,KAAM,oCAAuC2iB,EAAO/f,KAA9C,2DAC+C6O,EAAMo9E,UAUrE,SAASwzG,EAAuB/zC,EAAQ3zI,GAEvC,IAAI2nL,GAAe,EACfC,EAAe,GAEO,IAArB5nL,EAAQxJ,OAAO9G,GAAgC,IAArBsQ,EAAQxJ,OAAO7D,IAE7Ci1L,EAAapxL,OAASwJ,EAAQxJ,OAAO2hB,UACrCwvK,GAAe,GAIU,IAArB3nL,EAAQvF,WAEZmtL,EAAantL,SAAWuF,EAAQvF,SAChCktL,GAAe,GAIU,IAArB3nL,EAAQtD,OAAOhN,GAAgC,IAArBsQ,EAAQtD,OAAO/J,IAE7Ci1L,EAAaz2K,MAAQnR,EAAQtD,OAAOyb,UACpCwvK,GAAe,GAIXA,IAEJh0C,EAAO9xG,WAAa8xG,EAAO9xG,YAAc,GACzC8xG,EAAO9xG,iCAAwC+lJ,EAC/C1jD,yBAA4C,GAW9C,SAAS2jD,EAAel/I,GAWvB,OATO89I,EAAWl+I,UAEjBk+I,EAAWl+I,QAAU,CAAE,CAAE20F,WAAY,KAKtC30F,EAAQtjD,KAAM0jD,GAEP,EAwKR,SAASm/I,EAAiBvhM,EAAWiiB,EAAUoR,EAAOpS,GAErD,IAUIwiI,EAGJ,GAAKzjJ,EAAUyK,MAAMhH,cAAgBmmC,aAEpC65G,EAAgBU,QAEV,GAAKnkJ,EAAUyK,MAAMhH,cAAgBimC,YAE3C+5G,EAAgBU,QAEV,GAAKnkJ,EAAUyK,MAAMhH,cAAgB6lC,YAE3Cm6G,EAAgBU,OAEV,CAAA,GAAKnkJ,EAAUyK,MAAMhH,cAAgBulC,WAM3C,MAAM,IAAIn6B,MAAO,mEAJjB40I,EAAgBU,GAYjB,QAJejjJ,IAAVmyB,IAAsBA,EAAQ,QACpBnyB,IAAV+f,IAAsBA,EAAQjhB,EAAUihB,OAGxC5iB,EAAQwhM,wBAAkC3+L,IAAb+gB,GAA6C,OAAnBA,EAASvY,MAAiB,CAErF,IAAI8pB,EAAMH,EAAQpS,EACdugL,EAAOv/K,EAAS6rB,UAAU7sB,QAAUP,EAAAA,EACrC1gB,EAAUihB,MACVgB,EAAS6rB,UAAUza,MAAQpR,EAAS6rB,UAAU7sB,MAEjDoS,EAAQz1B,KAAK8N,IAAK2nB,EAAOpR,EAAS6rB,UAAUza,QAC5CpS,EAAQrjB,KAAK6N,IAAK+nB,EAAKguK,GAASnuK,GAEnB,IAAIpS,EAAQ,GAK1B,GAAe,IAAVA,EAEJ,OAAO,KAIR,IAEIwgL,EAFAC,EAlfL,SAAoB1hM,EAAWqzB,EAAOpS,GASrC,IAPA,IAAIxX,EAAS,CAEZgC,IAAK,IAAIjM,MAAOQ,EAAU0oC,UAAW4+F,KAAM3nI,OAAOgiM,mBAClDj2L,IAAK,IAAIlM,MAAOQ,EAAU0oC,UAAW4+F,KAAM3nI,OAAOiiM,oBAIzCl3L,EAAI2oB,EAAO3oB,EAAI2oB,EAAQpS,EAAOvW,IAEvC,IAAM,IAAIiD,EAAI,EAAGA,EAAI3N,EAAU0oC,SAAU/6B,IAAO,CAE/C,IAAIvO,EAAQY,EAAUyK,MAAOC,EAAI1K,EAAU0oC,SAAW/6B,GACtDlE,EAAOgC,IAAKkC,GAAM/P,KAAK6N,IAAKhC,EAAOgC,IAAKkC,GAAKvO,GAC7CqK,EAAOiC,IAAKiC,GAAM/P,KAAK8N,IAAKjC,EAAOiC,IAAKiC,GAAKvO,GAM/C,OAAOqK,EA6dMo4L,CAAW7hM,EAAWqzB,EAAOpS,QAMxB/f,IAAb+gB,IAEJw/K,EAAmBzhM,IAAciiB,EAASvY,MAAQy6I,GAAuCA,IAI1F,IAAInB,EArOL,SAA4BhjJ,EAAWyjJ,EAAepwH,EAAOpS,EAAO1X,GAUnE,IAAIu4L,EARG5B,EAAWv0C,cAEjBu0C,EAAWv0C,YAAc,IAUzBm2C,EAFIr+C,IAAkBU,GAEN,EAELV,IAAkBU,GAEb,EAIA,EAQjB,IAJA,IAAIxN,EAAaiqD,EAAqB3/K,EAAQjhB,EAAU0oC,SAAWo5J,GAC/DC,EAAW,IAAItwF,SAAU,IAAIF,YAAaolC,IAC1C1mI,EAAS,EAEHvF,EAAI2oB,EAAO3oB,EAAI2oB,EAAQpS,EAAOvW,IAEvC,IAAM,IAAIiD,EAAI,EAAGA,EAAI3N,EAAU0oC,SAAU/6B,IAAO,CAE/C,IAAIvO,EAECY,EAAU0oC,SAAW,EAIzBtpC,EAAQY,EAAUyK,MAAOC,EAAI1K,EAAU0oC,SAAW/6B,GAIvC,IAANA,EAAUvO,EAAQY,EAAUkQ,KAAMxF,GACvB,IAANiD,EAAUvO,EAAQY,EAAUmQ,KAAMzF,GAC5B,IAANiD,EAAUvO,EAAQY,EAAUmZ,KAAMzO,GAC5B,IAANiD,IAAUvO,EAAQY,EAAUoZ,KAAM1O,IAIxC+4I,IAAkBU,GAEtB49C,EAASC,WAAY/xL,EAAQ7Q,GAAO,GAEzBqkJ,IAAkBU,GAE7B49C,EAASE,UAAWhyL,EAAQ7Q,GAAO,GAExBqkJ,IAAkBU,GAE7B49C,EAASG,UAAWjyL,EAAQ7Q,GAAO,GAExBqkJ,IAAkBU,IAE7B49C,EAASI,SAAUlyL,EAAQ7Q,GAI5B6Q,GAAU6xL,EAMZ,IAAIM,EAAiB,CAEpBhgJ,OAAQk/I,EAAeS,EAAS3/I,QAChCi/F,WAAYA,EACZ1K,WAAYA,GAyBb,YArBgBz1I,IAAXqI,IAAuB64L,EAAe74L,OAASA,GAE/CA,IAAW46I,KAGfi+C,EAAen2C,WAAajsJ,EAAU0oC,SAAWo5J,GAIlDzgD,GAAc1K,EAEdupD,EAAWv0C,YAAYjtJ,KAAM0jM,GAGhB,CAEZ5xK,GAAI0vK,EAAWv0C,YAAY/hJ,OAAS,EACpC+sI,WAAY,GAiII0rD,CAAmBriM,EAAWyjJ,EAAepwH,EAAOpS,EAAOwgL,GAExEa,EAAe,CAElBt/C,WAAYA,EAAWxyH,GACvB6wH,WAAY2B,EAAW3B,WACvBoC,cAAeA,EACfxiI,MAAOA,EACPvV,IAAKg2L,EAAOh2L,IACZD,IAAKi2L,EAAOj2L,IACZpM,KAlFW,CAEXkzE,EAAG,SACHC,EAAG,OACH+vH,EAAG,OACHC,EAAG,OACHC,GAAI,QA4ESziM,EAAU0oC,WAkBxB,OAd8B,IAAzB1oC,EAAU+hC,aAEdugK,EAAavgK,YAAa,GAIpBm+J,EAAW18C,YAEjB08C,EAAW18C,UAAY,IAIxB08C,EAAW18C,UAAU9kJ,KAAM4jM,GAEpBpC,EAAW18C,UAAU55I,OAAS,EAWtC,SAAS84L,EAAcjuL,EAAOkB,EAAQY,GAE9B6pL,EAAW5oL,OAAOhT,IAAKiQ,IAE7B2rL,EAAW5oL,OAAOpW,IAAKqT,EAAO,IAI/B,IAAIkuL,EAAevC,EAAW5oL,OAAOjV,IAAKkS,GACtCmsG,EA1g+DY,OA0g+DDjrG,EAAwB,YAAc,aACjD7T,EAAM8+G,EAAW,UAAYrqG,EAAMlN,WAEvC,QAA6BnI,IAAxByhM,EAAc7gM,GAElB,OAAO6gM,EAAc7gM,GAIfo+L,EAAW1oL,SAEjB0oL,EAAW1oL,OAAS,IAIrB,IAAIorL,EAAY,CAAEhiF,SAAUA,GAE5B,GAAKviH,EAAQyhM,YAAc,CAE1B,IAAIlrL,EAASqrL,EAAeA,GAAgB73L,SAASC,cAAe,UAEpEuM,EAAOlG,MAAQ9Q,KAAK6N,IAAKgJ,EAAM/F,MAAOrQ,EAAQo4D,gBAC9C7hD,EAAOjG,OAAS/Q,KAAK6N,IAAKgJ,EAAM9F,OAAQtQ,EAAQo4D,gBAE3Cp4D,EAAQ0hM,0BAtiBf,SAAuBtrL,GAEtB,OAAO3J,EAAUqC,aAAcsH,EAAM/F,QAAW5D,EAAUqC,aAAcsH,EAAM9F,QAoiBnCxB,CAAcyH,KAEvD/V,QAAQC,KAAM,gDAAiD2V,GAE/DG,EAAOlG,MAAQ5D,EAAU0C,gBAAiBoH,EAAOlG,OACjDkG,EAAOjG,OAAS7D,EAAU0C,gBAAiBoH,EAAOjG,SAInD,IAAIk0L,EAAMjuL,EAAOG,WAAY,OAEd,IAAVwB,IAEJssL,EAAIh0J,UAAW,EAAGj6B,EAAOjG,QACzBk0L,EAAIj4K,MAAO,GAAK,IAIjBi4K,EAAI3tL,UAAWT,EAAO,EAAG,EAAGG,EAAOlG,MAAOkG,EAAOjG,SAEzB,IAAnBtQ,EAAQqhM,OAEZ7/D,EAAQnhI,KAAM,IAAI0E,SAAS,SAAW+6G,GAErCvpG,EAAOipK,QAAQ,SAAW/tD,IApN9B,SAAiCA,GAQhC,OANOowE,EAAWv0C,cAEjBu0C,EAAWv0C,YAAc,IAInB,IAAIvoJ,SAAS,SAAW+6G,GAE9B,IAAI2kF,EAAS,IAAI/kM,OAAOglM,WACxBD,EAAOE,kBAAmBlzE,GAC1BgzE,EAAOG,UAAY,WAElB,IAAI7gJ,EAAS0+I,EAAsBgC,EAAOh+L,QAEtCk+I,EAAa,CAChB5gG,OAAQk/I,EAAel/I,GACvBi/F,WAAYA,EACZ1K,WAAYv0F,EAAOu0F,YAGpB0K,GAAcj/F,EAAOu0F,WAErBupD,EAAWv0C,YAAYjtJ,KAAMskJ,GAE7B7kC,EAAS+hF,EAAWv0C,YAAY/hJ,OAAS,QA4LvCs5L,CAAwBpzE,GAAOzpC,MAAM,SAAW08D,GAE/C6/C,EAAU5/C,WAAaD,EAEvB5kC,SAICyC,OAMJgiF,EAAUn3C,IAAM72I,EAAOO,UAAWyrG,QAMnCgiF,EAAUn3C,IAAMh3I,EAAMC,IAIvBwrL,EAAW1oL,OAAO9Y,KAAMkkM,GAExB,IAAIl5L,EAAQw2L,EAAW1oL,OAAO5N,OAAS,EAGvC,OAFA+4L,EAAc7gM,GAAQ4H,EAEfA,EASR,SAASy5L,EAAgBv+J,GAEjBs7J,EAAWhzC,WAEjBgzC,EAAWhzC,SAAW,IAIvB,IAAIk2C,EAAc,CAEjB3tL,UAAW8pL,GAAgB36J,EAAInvB,WAC/BC,UAAW6pL,GAAgB36J,EAAIlvB,WAC/BH,MAAOgqL,GAAgB36J,EAAIrvB,OAC3BC,MAAO+pL,GAAgB36J,EAAIpvB,QAM5B,OAFA0qL,EAAWhzC,SAASxuJ,KAAM0kM,GAEnBlD,EAAWhzC,SAAStjJ,OAAS,EASrC,SAASy5L,EAAgBz+J,GAExB,GAAKw7J,EAAWhpL,SAAS5S,IAAKogC,GAE7B,OAAOw7J,EAAWhpL,SAAS7U,IAAKqiC,GAI1Bs7J,EAAW9oL,WAEjB8oL,EAAW9oL,SAAW,IAIvB,IAAIksL,EAAc,CAEjBr2C,QAASk2C,EAAgBv+J,GACzB/6B,OAAQ64L,EAAc99J,EAAInwB,MAAOmwB,EAAIjvB,OAAQivB,EAAIruB,QAI7CquB,EAAIljC,OAER4hM,EAAY5hM,KAAOkjC,EAAIljC,MAIxBw+L,EAAW9oL,SAAS1Y,KAAM4kM,GAE1B,IAAI55L,EAAQw2L,EAAW9oL,SAASxN,OAAS,EAGzC,OAFAw2L,EAAWhpL,SAAShW,IAAKwjC,EAAKl7B,GAEvBA,EASR,SAAS65L,EAAiBnxK,GAEzB,GAAKguK,EAAW5uK,UAAUhtB,IAAK4tB,GAE9B,OAAOguK,EAAW5uK,UAAUjvB,IAAK6vB,GAIlC,GAAKA,EAASqqB,iBAGb,OADA59C,QAAQC,KAAM,qDACP,KAIDohM,EAAW1uK,YAEjB0uK,EAAW1uK,UAAY,IAKxB,IAAIgyK,EAAe,CAElB3jD,qBAAsB,IAIlBztH,EAASkW,qBAEbk7J,EAAaloJ,WAAa,CAAEmoJ,oBAAqB,IAEjD9lD,uBAA0C,GAE/BvrH,EAASmvH,kCAEpBiiD,EAAaloJ,WAAa,CAAEooJ,oCAAqC,IAEjE/lD,uCAA0D,GAE7CvrH,EAASw5C,wBAEtB/sE,QAAQC,KAAM,iFAKf,IAAI8hC,EAAQxO,EAASwO,MAAMhP,UAAUw1E,OAAQ,CAAEh1E,EAASuQ,UA0BxD,GAxBO89J,EAAY7/J,EAAO,CAAE,EAAG,EAAG,EAAG,MAEpC4iK,EAAa3jD,qBAAqBC,gBAAkBl/G,GAIhDxO,EAASw5C,wBAEb43H,EAAa3jD,qBAAqBqO,eAAiB97H,EAASiU,UAC5Dm9J,EAAa3jD,qBAAqBsO,gBAAkB/7H,EAASgU,WAElDhU,EAASkW,qBAEpBk7J,EAAa3jD,qBAAqBqO,eAAiB,EACnDs1C,EAAa3jD,qBAAqBsO,gBAAkB,KAIpDq1C,EAAa3jD,qBAAqBqO,eAAiB,GACnDs1C,EAAa3jD,qBAAqBsO,gBAAkB,IAKhD/7H,EAASmvH,iCAAmC,CAE3CiiD,EAAa3jD,qBAAqBC,kBAEtC0jD,EAAaloJ,WAAWooJ,oCAAoCrhD,cAAgBmhD,EAAa3jD,qBAAqBC,iBAI/G,IAAI0C,EAAiB,CAAE,EAAG,EAAG,GAC7BpwH,EAASqU,SAAS7U,QAAS4wH,EAAgB,GAC3CghD,EAAaloJ,WAAWooJ,oCAAoClhD,eAAiBA,EAE7EghD,EAAaloJ,WAAWooJ,oCAAoCnhD,iBAAmBnwH,EAASyvH,WAKzF,GAAKzvH,EAASuV,cAAgBvV,EAASsV,aAEtC,GAAKtV,EAASuV,eAAiBvV,EAASsV,aAAe,CAEtD,IAAIi8J,EAAmB,CAAEj6L,MAAO25L,EAAgBjxK,EAASuV,eACzDw5J,EAAuBwC,EAAkBvxK,EAASuV,cAClD67J,EAAa3jD,qBAAqBuO,yBAA2Bu1C,OAI7D9kM,QAAQC,KAAM,qGAOhB,GAAKszB,EAASwS,IAAM,CAEnB,IAAIg/J,EAAkB,CAAEl6L,MAAO25L,EAAgBjxK,EAASwS,MACxDu8J,EAAuByC,EAAiBxxK,EAASwS,KAE5CxS,EAASmvH,mCAEbiiD,EAAaloJ,WAAWooJ,oCAAoCphD,eAAiBshD,GAI9EJ,EAAa3jD,qBAAqBE,iBAAmB6jD,EAKtD,GAAKxxK,EAASmvH,kCAAoCnvH,EAAS6S,YAAc,CAExE,IAAI4+J,EAAiB,CAAEn6L,MAAO25L,EAAgBjxK,EAAS6S,cACvDk8J,EAAuB0C,EAAgBzxK,EAAS6S,aAChDu+J,EAAaloJ,WAAWooJ,oCAAoCjhD,0BAA4BohD,EAIzF,GAAKzxK,EAASmU,SAAW,CAGxB,IAAIA,EAAWnU,EAASmU,SAASxvB,QAAQ9H,eAAgBmjB,EAASoU,mBAAoB5U,UAStF,GAPO6uK,EAAYl6J,EAAU,CAAE,EAAG,EAAG,MAEpCi9J,EAAa90C,eAAiBnoH,GAK1BnU,EAASwV,YAAc,CAE3B,IAAIk8J,EAAiB,CAAEp6L,MAAO25L,EAAgBjxK,EAASwV,cACvDu5J,EAAuB2C,EAAgB1xK,EAASwV,aAChD47J,EAAa70C,gBAAkBm1C,GAOjC,GAAK1xK,EAASgV,UAAY,CAEzB,IAAI28J,EAAe,CAAEr6L,MAAO25L,EAAgBjxK,EAASgV,YAEhDhV,EAASkV,cAA4C,IAA7BlV,EAASkV,YAAYn+B,IAE5CipB,EAASkV,YAAYn+B,IAAMipB,EAASkV,YAAYl7B,GAEpDvN,QAAQC,KAAM,0FAIfilM,EAAan5K,MAAQwH,EAASkV,YAAYn+B,GAI3Cg4L,EAAuB4C,EAAc3xK,EAASgV,WAE9Co8J,EAAaj1C,cAAgBw1C,EAK9B,GAAK3xK,EAAS2S,MAAQ,CAErB,IAAIi/J,EAAkB,CACrBt6L,MAAO25L,EAAgBjxK,EAAS2S,OAChC8+G,SAAU,GAGsB,IAA5BzxH,EAAS4S,iBAEbg/J,EAAgBv1C,SAAWr8H,EAAS4S,gBAIrCm8J,EAAuB6C,EAAiB5xK,EAAS2S,OAEjDy+J,EAAah1C,iBAAmBw1C,EAK5B5xK,EAASwQ,YAEb4gK,EAAan1C,UAAY,QAIpBj8H,EAASoS,UAAY,IAEzBg/J,EAAan1C,UAAY,OACzBm1C,EAAal1C,YAAcl8H,EAASoS,WA77+DtB,IAo8+DXpS,EAASqQ,OAEb+gK,EAAav7H,aAAc,GAIL,KAAlB71C,EAAS1wB,OAEb8hM,EAAa9hM,KAAO0wB,EAAS1wB,MAI9Bu/L,EAAmB7uK,EAAUoxK,GAE7BtD,EAAW1uK,UAAU9yB,KAAM8kM,GAE3B,IAAI95L,EAAQw2L,EAAW1uK,UAAU5nB,OAAS,EAG1C,OAFAw2L,EAAW5uK,UAAUpwB,IAAKgxB,EAAU1oB,GAE7BA,EASR,SAASu6L,EAAahtJ,GAErB,IAAIitJ,EAAoB,CAAEjtJ,EAAKh1B,SAASnM,MACxC,GAAKtW,MAAMkY,QAASu/B,EAAK7kB,UAExB,IAAM,IAAI1nB,EAAI,EAAGC,EAAIssC,EAAK7kB,SAASxoB,OAAQc,EAAIC,EAAGD,IAEjDw5L,EAAkBxlM,KAAMu4C,EAAK7kB,SAAU1nB,GAAIoL,WAM5CouL,EAAkBxlM,KAAMu4C,EAAK7kB,SAAStc,MAIvC,IAAIquL,EAAeD,EAAkBhhI,KAAM,KAC3C,GAAKk9H,EAAWt2C,OAAOtlJ,IAAK2/L,GAE3B,OAAO/D,EAAWt2C,OAAOvnJ,IAAK4hM,GAI/B,IAEI1uI,EAFAxzC,EAAWg1B,EAAKh1B,SAOnBwzC,EAFIxe,EAAKq5C,eAEF6zD,GAEIltG,EAAKs5C,WAET4zD,GAEIltG,EAAKjlB,OAETmyH,GAEIltG,EAAKhlB,SAETkyH,GAIAltG,EAAK7kB,SAASmT,UAAY4+G,GAAwBA,GAInDliI,EAAS8rB,mBAEflvC,QAAQC,KAAM,+FACdmjB,GAAW,IAAI0rB,IAAiBqB,cAAeiI,IAIhD,IAAImtJ,EAAW,GAEXzjM,EAAa,GACbkuJ,EAAa,GACbvG,EAAU,GAGV+7C,EAAiB,CAEpBxsL,GAAI,aACJwd,IAAK,aACLuL,MAAO,UACPw3D,WAAY,YACZG,UAAW,YAIR+rG,EAAiBriL,EAASisB,aAAc,eAEpBhtC,IAAnBojM,GA59BN,SAAsCtkL,GAErC,GAAKogL,EAAWC,qBAAqB77L,IAAKwb,GAEzC,OAAO,EAMR,IAFA,IAAIlf,EAAI,IAAIid,EAEFrT,EAAI,EAAG0W,EAAKpB,EAAOiB,MAAOvW,EAAI0W,EAAI1W,IAG3C,GAAK9M,KAAK4R,IAAK1O,EAAEoQ,UAAW8O,EAAOvV,MAAW,EAAJC,GAAQd,SAAW,GAAQ,KAAS,OAAO,EAItF,OAAO,EA28BgC26L,CAA6BD,KAEnEzlM,QAAQC,KAAM,yFAEdmjB,EAAS/d,aAAc,SAp8BzB,SAA0C8b,GAEzC,GAAKogL,EAAWC,qBAAqB77L,IAAKwb,GAEzC,OAAOogL,EAAWC,qBAAqB99L,IAAKyd,GAQ7C,IAJA,IAAIhgB,EAAYggB,EAAOjJ,QAEnBjW,EAAI,IAAIid,EAEFrT,EAAI,EAAG0W,EAAKphB,EAAUihB,MAAOvW,EAAI0W,EAAI1W,IAE9C5J,EAAEoQ,UAAWlR,EAAUyK,MAAW,EAAJC,GAEjB,IAAR5J,EAAEqI,GAAmB,IAARrI,EAAEsL,GAAmB,IAARtL,EAAEkX,EAGhClX,EAAEkqC,KAAM,GAIRlqC,EAAE+O,YAIH/O,EAAE8wB,QAAS5xB,EAAUyK,MAAW,EAAJC,GAM7B,OAFA01L,EAAWC,qBAAqBj/L,IAAK4e,EAAQhgB,GAEtCA,EAm6B2BwkM,CAAiCF,KAMnE,IAAIG,EAAoB,KACxB,IAAM,IAAI3rD,KAAiB72H,EAASthB,WAGnC,GAAsC,UAAjCm4I,EAAcjxI,OAAQ,EAAG,GAA9B,CAEA,IAAI7H,EAAYiiB,EAASthB,WAAYm4I,GACrCA,EAAgBurD,EAAgBvrD,IAAmBA,EAAcvtI,cAYjE,GAPE,4EAC2B3D,KAAMkxI,KAElCA,EAAgB,IAAMA,GAIlBsnD,EAAWz/L,WAAW6D,IAAKg8L,EAAQxgM,IAEvCW,EAAYm4I,GAAkBsnD,EAAWz/L,WAAW4B,IAAKi+L,EAAQxgM,QAFlE,CAQAykM,EAAoB,KACpB,IAAIh6L,EAAQzK,EAAUyK,MACC,aAAlBquI,GACAruI,aAAiB6+B,aACjB7+B,aAAiBu+B,aAErBnqC,QAAQC,KAAM,yEACd2lM,EAAoB,IAAIh8J,GAAiB,IAAIa,YAAa7+B,GAASzK,EAAU0oC,SAAU1oC,EAAU+hC,aAIlG,IAAIqmH,EAAWm5C,EAAiBkD,GAAqBzkM,EAAWiiB,GAC9C,OAAbmmI,IAEJznJ,EAAYm4I,GAAkBsP,EAC9Bg4C,EAAWz/L,WAAWS,IAAKo/L,EAAQxgM,GAAaooJ,KASlD,QAHwBlnJ,IAAnBojM,GAA+BriL,EAAS/d,aAAc,SAAUogM,GAG3B,IAArC/kM,OAAOuyC,KAAMnxC,GAAaiJ,OAE9B,OAAO,KAKR,QAAoC1I,IAA/B+1C,EAAKrD,uBAAuCqD,EAAKrD,sBAAsBhqC,OAAS,EAAI,CAExF,IAAIm+H,EAAU,GACVsf,EAAc,GACdq9C,EAAoB,GAExB,QAAoCxjM,IAA/B+1C,EAAKhD,sBAET,IAAM,IAAInyC,KAAOm1C,EAAKhD,sBAErBywJ,EAAmBztJ,EAAKhD,sBAAuBnyC,IAAUA,EAM3D,IAAU4I,EAAI,EAAGA,EAAIusC,EAAKrD,sBAAsBhqC,SAAWc,EAAI,CAE9D,IAAInB,EAAS,GAETo7L,GAAS,EAEb,IAAM,IAAI7rD,KAAiB72H,EAAS2rB,gBAKnC,GAAuB,aAAlBkrG,GAAkD,WAAlBA,EAArC,CAaI94I,EAAYiiB,EAAS2rB,gBAAiBkrG,GAAiBpuI,GAA3D,IACI29I,EAAoBvP,EAAcvtI,cAOlCq5L,EAAgB3iL,EAASthB,WAAYm4I,GAEzC,GAAKsnD,EAAWz/L,WAAW6D,IAAKg8L,EAAQxgM,IAEvCuJ,EAAQ8+I,GAAsB+3C,EAAWz/L,WAAW4B,IAAKi+L,EAAQxgM,QAFlE,CAQA,IAAI6kM,EAAoB7kM,EAAU+W,QAElC,IAAOkL,EAAS4rB,qBAEf,IAAM,IAAI/pB,EAAI,EAAGmsB,EAAKjwC,EAAUihB,MAAO6C,EAAImsB,EAAInsB,IAE9C+gL,EAAkB/5J,OACjBhnB,EACA9jB,EAAUkQ,KAAM4T,GAAM8gL,EAAc10L,KAAM4T,GAC1C9jB,EAAUmQ,KAAM2T,GAAM8gL,EAAcz0L,KAAM2T,GAC1C9jB,EAAUmZ,KAAM2K,GAAM8gL,EAAczrL,KAAM2K,IAO7Cva,EAAQ8+I,GAAsBk5C,EAAiBsD,EAAmB5iL,GAClEm+K,EAAWz/L,WAAWS,IAAKo/L,EAAQoE,GAAiBr7L,EAAQ8+I,UA/CpDs8C,IAEN9lM,QAAQC,KAAM,+DACd6lM,GAAS,GAgDZr8C,EAAQ5pJ,KAAM6K,GAEdw+H,EAAQrpI,KAAMu4C,EAAKrD,sBAAuBlpC,SACNxJ,IAA/B+1C,EAAKhD,uBAAsCozG,EAAY3oJ,KAAMgmM,EAAmBh6L,IAItF05L,EAASr8D,QAAUA,EAEdsf,EAAYz9I,OAAS,IAEzBw6L,EAASj9C,OAAS,GAClBi9C,EAASj9C,OAAOE,YAAcA,GAMhC,IAAI9yG,EAAkB/0C,MAAMkY,QAASu/B,EAAK7kB,UAE1C,GAAKmiB,GAA8C,IAA3BtyB,EAAS0pB,OAAO/hC,OAAe,OAAO,KAK9D,IAHA,IAAI4nB,EAAY+iB,EAAkB0C,EAAK7kB,SAAW,CAAE6kB,EAAK7kB,UACrDuZ,EAAS4I,EAAkBtyB,EAAS0pB,OAAS,CAAE,CAAEzJ,cAAe,EAAG7O,WAAOnyB,EAAW+f,WAAO/f,IAE/EkgB,GAAP1W,EAAI,EAAQihC,EAAO/hC,QAAQc,EAAI0W,EAAI1W,IAAO,CAEnD,IAAIo4I,EAAY,CACfrtF,KAAMA,EACN90D,WAAYA,GAOb,GAJAsgM,EAAmBh/K,EAAU6gI,GAExBwF,EAAQ1+I,OAAS,IAAIk5I,EAAUwF,QAAUA,GAEtB,OAAnBrmI,EAASvY,MAAiB,CAE9B,IAAI27D,EAAWm7H,EAAQv+K,EAASvY,YAELxI,IAAtByqC,EAAQjhC,GAAI2oB,YAA6CnyB,IAAtByqC,EAAQjhC,GAAIuW,QAEnDokD,GAAY,IAAM15B,EAAQjhC,GAAI2oB,MAAQ,IAAMsY,EAAQjhC,GAAIuW,OAIpDm/K,EAAWz/L,WAAW6D,IAAK6gE,GAE/By9E,EAAUrxG,QAAU2uJ,EAAWz/L,WAAW4B,IAAK8iE,IAI/Cy9E,EAAUrxG,QAAU8vJ,EAAiBt/K,EAASvY,MAAOuY,EAAU0pB,EAAQjhC,GAAI2oB,MAAOsY,EAAQjhC,GAAIuW,OAC9Fm/K,EAAWz/L,WAAWS,IAAKikE,EAAUy9E,EAAUrxG,UAIrB,OAAtBqxG,EAAUrxG,gBAA0BqxG,EAAUrxG,QAIpD,IAAIrf,EAAWmxK,EAAiB/xK,EAAWma,EAAQjhC,GAAIw3B,gBAErC,OAAb9P,IAEJ0wH,EAAU1wH,SAAWA,GAItBy8H,EAAWnwJ,KAAMokJ,GAIlBshD,EAASv1C,WAAaA,EAEfqxC,EAAWp2C,SAEjBo2C,EAAWp2C,OAAS,IAIrBo2C,EAAWp2C,OAAOprJ,KAAM0lM,GAExB,IAAI16L,EAAQw2L,EAAWp2C,OAAOlgJ,OAAS,EAGvC,OAFAw2L,EAAWt2C,OAAO1oJ,IAAK+iM,EAAcz6L,GAE9BA,EAuER,SAASo7L,EAAkBvyF,EAAMulB,GAEzBooE,EAAWnlF,aAEjBmlF,EAAWnlF,WAAa,IAUzB,IAJA,IAAIvI,GAFJD,EAAOitF,GAAauF,MAAMC,uBAAwBzyF,EAAKx7F,QAAS+gH,IAE9CtlB,OACd49C,EAAW,GACXlD,EAAW,GAELxiJ,EAAI,EAAGA,EAAI8nG,EAAO5oG,SAAWc,EAAI,CAE1C,IAAI+nG,EAAQD,EAAQ9nG,GAChBu6L,EAAehuE,GAAgBC,eAAgBzkB,EAAM/wG,MACrDwjM,EAAYjuE,GAAgBO,SAAUM,EAAMmtE,EAAaxtE,UACzD0tE,EAAgB9+C,GAAiB4+C,EAAavpF,cAgBlD,GAdiC,UAA5BupF,EAAa9sE,aAIhB+sE,GAFgC,IAA5BA,EAAUpxJ,cAEFoxJ,EAAUp5H,SAASotB,cAAe+rG,EAAa7sE,kBAI/Cl3H,IAMPgkM,IAAeC,EAGrB,OADAtmM,QAAQC,KAAM,6DAA8D2zG,EAAM/wG,MAC3E,KAIR,IASI6zG,EARA6vF,EAAiB3yF,EAAMjgF,OAAO5oB,OAAS6oG,EAAMd,MAAM/nG,OAElDu7L,IAAkB9+C,GAAgBzyG,wBAEtCwxJ,GAAkBF,EAAUtxJ,sBAAsBhqC,SAWwB,IAAtE6oG,EAAMkB,kBAAkBC,2CAE5B2B,EAAgB,cAKhB6vF,GAAkB,GAIlB7vF,EAny/DuB,OAiy/DZ9C,EAAMoG,mBAED,OAIA,SAIjBq0C,EAASxuJ,KAAM,CAEd2xJ,MAAOkxC,EAAiB,IAAI94J,GAAiBgqE,EAAMd,MArChC,IAsCnBloG,OAAQ83L,EAAiB,IAAI94J,GAAiBgqE,EAAMjgF,OAAQ4yK,IAC5D7vF,cAAeA,IAIhB66C,EAAS1xJ,KAAM,CAEduuJ,QAASC,EAAStjJ,OAAS,EAC3BL,OAAQ,CACPguH,KAAM4oE,EAAQ59L,IAAK2iM,GACnB1jI,KAAM2jI,KAeT,OARAjF,EAAWnlF,WAAWr8G,KAAM,CAE3BgD,KAAM6wG,EAAK7wG,MAAQ,QAAUw+L,EAAWnlF,WAAWnxG,OACnDsjJ,SAAUA,EACVkD,SAAUA,IAIJ8vC,EAAWnlF,WAAWnxG,OAAS,EAIvC,SAASy7L,EAAa5jL,GAErB,IAAI81G,EAAO2oE,EAAWx2C,MAAOy2C,EAAQ59L,IAAKkf,IAEtCqqD,EAAWrqD,EAAOqqD,SAEtB,QAAkB5qE,IAAb4qE,EAAyB,OAAO,KAErC,IAAIw5H,EAAY7jL,EAAOqqD,SAASD,MAAO,GAEvC,QAAmB3qE,IAAdokM,EAA0B,OAAO,KAKtC,IAHA,IAAIxxG,EAAS,GACT87D,EAAsB,IAAIhmH,aAAsC,GAAxBkiC,EAASD,MAAMjiE,QAEjDc,EAAI,EAAGA,EAAIohE,EAASD,MAAMjiE,SAAWc,EAE9CopF,EAAOp1F,KAAMyhM,EAAQ59L,IAAKupE,EAASD,MAAOnhE,KAE1CohE,EAAS6sB,aAAcjuF,GAAIknB,QAASg+H,EAAyB,GAAJllJ,GAoB1D,YAhB0BxJ,IAArBg/L,EAAWt2C,QAEfs2C,EAAWt2C,MAAQ,IAIpBs2C,EAAWt2C,MAAMlrJ,KAAM,CAEtBkxJ,oBAAqB2xC,EAAiB,IAAI94J,GAAiBmnH,EAAqB,KAChF97D,OAAQA,EACRhoB,SAAUq0H,EAAQ59L,IAAK+iM,KAIR/tE,EAAK6yB,KAAO81C,EAAWt2C,MAAMhgJ,OAAS,EAMvD,SAAS27L,EAAcp3H,GAEtB,IAAIkxE,EAAW,GAEVlxE,EAAMzsE,OAAO29I,EAAS39I,KAAOysE,EAAMzsE,MAExC29I,EAASz+G,MAAQutC,EAAMvtC,MAAMhP,UAE7BytH,EAASvvE,UAAY3B,EAAM2B,UAEtB3B,EAAMgC,mBAEVkvE,EAAShgJ,KAAO,cAEL8uE,EAAMyC,cAEjByuE,EAAShgJ,KAAO,QACX8uE,EAAM1+C,SAAW,IAAI4vH,EAASxyI,MAAQshE,EAAM1+C,WAEtC0+C,EAAMqC,cAEjB6uE,EAAShgJ,KAAO,OACX8uE,EAAM1+C,SAAW,IAAI4vH,EAASxyI,MAAQshE,EAAM1+C,UACjD4vH,EAAS/yE,KAAO,GAChB+yE,EAAS/yE,KAAKgzE,gBAAmBnxE,EAAMsC,SAAW,GAAQtC,EAAM99D,OAAU,EAC1EgvI,EAAS/yE,KAAKizE,eAAiBpxE,EAAM99D,YAIjBnP,IAAhBitE,EAAMzgB,OAAuC,IAAhBygB,EAAMzgB,OAEvC7uD,QAAQC,KAAM,sGAKVqvE,EAAM5kE,QACJ4kE,EAAM5kE,OAAOokB,SAAWwgD,GACG,IAA5BA,EAAM5kE,OAAOohB,SAASxhB,GACM,IAA5BglE,EAAM5kE,OAAOohB,SAASve,IACQ,IAA9B+hE,EAAM5kE,OAAOohB,SAAS3S,GAE3BnZ,QAAQC,KAAM,mIAKf,IAAIs8C,EAAS8kJ,EAAW5kJ,+BAAoCF,OAE5D,OADAA,EAAO18C,KAAM2gJ,GACNjkG,EAAOxxC,OAAS,EASxB,SAAS47L,EAAa/jL,GAEdy+K,EAAWx2C,QAEjBw2C,EAAWx2C,MAAQ,IAIpB,IAAI+7C,EAAW,GAEf,GAAKpnM,EAAQshM,IAAM,CAElB,IAAIzrL,EAAWuN,EAAO3F,WAAW8V,UAC7BjH,EAAWlJ,EAAOkJ,SAASiH,UAC3BhH,EAAQnJ,EAAOmJ,MAAMgH,UAElB6uK,EAAYvsL,EAAU,CAAE,EAAG,EAAG,EAAG,MAEvCuxL,EAASvxL,SAAWA,GAIdusL,EAAY91K,EAAU,CAAE,EAAG,EAAG,MAEpC86K,EAASn/C,YAAc37H,GAIjB81K,EAAY71K,EAAO,CAAE,EAAG,EAAG,MAEjC66K,EAAS76K,MAAQA,QAMbnJ,EAAOrL,kBAEXqL,EAAO5K,eAID4pL,EAAYh/K,EAAOxO,OAAO/D,SAAU,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,MAEzFu2L,EAASxyL,OAASwO,EAAOxO,OAAO/D,UAelC,GARqB,KAAhBuS,EAAO/f,OAEX+jM,EAAS/jM,KAAO/D,OAAQ8jB,EAAO/f,OAIhCu/L,EAAmBx/K,EAAQgkL,GAEtBhkL,EAAOsQ,QAAUtQ,EAAOuQ,QAAUvQ,EAAOwQ,SAAW,CAExD,IAAIglB,EAAOgtJ,EAAaxiL,GAEV,OAATw1B,IAEJwuJ,EAASxuJ,KAAOA,QAIX,GAAKx1B,EAAOwO,SAElBw1K,EAAS5mL,OAvVX,SAAwBA,GAEhBqhL,EAAWlyH,UAEjBkyH,EAAWlyH,QAAU,IAItB,IAAI03H,EAAU7mL,EAAOuzE,qBAEjBuzG,EAAa,CAEhBtmM,KAAMqmM,EAAU,eAAiB,eAoClC,OAhCKA,EAEJC,EAAWC,aAAe,CAEzBp2C,KAAqB,EAAf3wI,EAAO6M,MACb+jI,KAAmB,EAAb5wI,EAAO8M,IACb4jI,KAAM1wI,EAAOiN,KAAO,EAAI,KAAQjN,EAAOiN,IACvCwjI,MAAOzwI,EAAOgN,KAAO,EAAI,EAAIhN,EAAOgN,MAMrC85K,EAAWE,YAAc,CAExBx2C,YAAaxwI,EAAOq9B,OACpBkzG,KAAMtkJ,EAAUiC,SAAU8R,EAAOo9B,KACjCszG,KAAM1wI,EAAOiN,KAAO,EAAI,KAAQjN,EAAOiN,IACvCwjI,MAAOzwI,EAAOgN,KAAO,EAAI,EAAIhN,EAAOgN,MAMjB,KAAhBhN,EAAOnd,OAEXikM,EAAWjkM,KAAOmd,EAAOxf,MAI1B6gM,EAAWlyH,QAAQtvE,KAAMinM,GAElBzF,EAAWlyH,QAAQpkE,OAAS,EAuShBk8L,CAAerkL,QAE3B,GAAKA,EAAO0uD,oBAAsB1uD,EAAOmvD,cAAgBnvD,EAAO+uD,YAE/DmtE,wBAENuiD,EAAW5kJ,WAAa4kJ,EAAW5kJ,YAAc,GACjD4kJ,EAAW5kJ,+BAAsC,CAAEF,OAAQ,IAC3DuiG,uBAA0C,GAI3C8nD,EAASnqJ,WAAamqJ,EAASnqJ,YAAc,GAC7CmqJ,EAASnqJ,+BAAsC,CAAE6yB,MAAOo3H,EAAc9jL,SAEhE,GAAKA,EAAOyO,QAGlB,OADArxB,QAAQC,KAAM,8EAA+E2iB,GACtF,KAUR,GANKA,EAAOqyB,eAEX81G,EAAMlrJ,KAAM+iB,GAIRA,EAAOa,SAAS1Y,OAAS,EAAI,CAIjC,IAFA,IAAI0Y,EAAW,GAEL5X,EAAI,EAAGC,EAAI8W,EAAOa,SAAS1Y,OAAQc,EAAIC,EAAGD,IAAO,CAE1D,IAAIioB,EAAQlR,EAAOa,SAAU5X,GAE7B,GAAKioB,EAAMxE,UAAmC,IAAxB9vB,EAAQuhM,YAAwB,CAErD,IAAIroE,EAAOiuE,EAAa7yK,GAEV,OAAT4kG,GAEJj1G,EAAS5jB,KAAM64H,IAQbj1G,EAAS1Y,OAAS,IAEtB67L,EAASnjL,SAAWA,GAOtB49K,EAAWx2C,MAAMhrJ,KAAM+mM,GAEvB,IAAIz7C,EAAYk2C,EAAWx2C,MAAM9/I,OAAS,EAG1C,OAFAu2L,EAAQ/+L,IAAKqgB,EAAQuoI,GAEdA,EAQR,SAAS+7C,EAAc1nJ,GAEf6hJ,EAAW12C,SAEjB02C,EAAW12C,OAAS,GACpB02C,EAAW7hJ,MAAQ,GAIpB,IAAI2nJ,EAAY,GAEI,KAAf3nJ,EAAM38C,OAEVskM,EAAUtkM,KAAO28C,EAAM38C,MAIxBw+L,EAAW12C,OAAO9qJ,KAAMsnM,GAIxB,IAFA,IAAIt8C,EAAQ,GAEFh/I,EAAI,EAAGC,EAAI0zC,EAAM/7B,SAAS1Y,OAAQc,EAAIC,EAAGD,IAAO,CAEzD,IAAIioB,EAAQ0rB,EAAM/7B,SAAU5X,GAE5B,GAAKioB,EAAMxE,UAAmC,IAAxB9vB,EAAQuhM,YAAwB,CAErD,IAAIroE,EAAOiuE,EAAa7yK,GAEV,OAAT4kG,GAEJmyB,EAAMhrJ,KAAM64H,IAQVmyB,EAAM9/I,OAAS,IAEnBo8L,EAAUt8C,MAAQA,GAInBu3C,EAAmB5iJ,EAAO2nJ,IAyB3B,SAAuB31C,GAEtBA,EAAQA,aAAiB7wJ,MAAQ6wJ,EAAQ,CAAEA,GAI3C,IAFA,IAAI41C,EAAsB,GAEhBv7L,EAAI,EAAGA,EAAI2lJ,EAAMzmJ,OAAQc,IAE7B2lJ,EAAO3lJ,aAAe+qF,GAE1BswG,EAAc11C,EAAO3lJ,IAIrBu7L,EAAoBvnM,KAAM2xJ,EAAO3lJ,IAYnC,IANKu7L,EAAoBr8L,OAAS,GArCnC,SAAyBkmD,GAExB,IAAIzR,EAAQ,IAAIo3C,GAChBp3C,EAAM38C,KAAO,WAEb,IAAM,IAAIgJ,EAAI,EAAGA,EAAIolD,EAAQlmD,OAAQc,IAIpC2zC,EAAM/7B,SAAS5jB,KAAMoxD,EAASplD,IAI/Bq7L,EAAc1nJ,GA0Bb6nJ,CAAgBD,GAIPv7L,EAAI,EAAGA,EAAIk/I,EAAMhgJ,SAAWc,EAErC26L,EAAaz7C,EAAOl/I,IAIrB,IAAUA,EAAI,EAAGA,EAAIrM,EAAQ08G,WAAWnxG,SAAWc,EAElDo6L,EAAkBzmM,EAAQ08G,WAAYrwG,GAAK2lJ,EAAO,IAMpD81C,CAAc91C,GAEdjtJ,QAAQw0I,IAAK/X,GAAUx5C,MAAM,WAG5B,IAAIypC,EAAO,IAAI3O,KAAMn/D,EAAS,CAAE3iD,KAAM,6BAGlC+mM,EAAqB7mM,OAAOuyC,KAAM6rG,GAMtC,GALKyoD,EAAmBx8L,OAAS,IAAIs2L,EAAWviD,eAAiByoD,GAG5DlG,EAAWl+I,SAAWk+I,EAAWl+I,QAAQp4C,OAAS,IAAIs2L,EAAWl+I,QAAS,GAAI20F,WAAa7mB,EAAKrqH,OAE7E,IAAnBpH,EAAQqhM,OAAkB,EAY1BoD,EAAS,IAAI/kM,OAAOglM,YACjBC,kBAAmBlzE,GAC1BgzE,EAAOG,UAAY,WAGlB,IAAIoD,EAAcvF,EAAsBgC,EAAOh+L,QAC3CwhM,EAAoB,IAAI70F,SAAU,IAAIF,YAVd,IAW5B+0F,EAAkBrE,UAAW,EAAGoE,EAAY1vD,YAAY,GACxD2vD,EAAkBrE,UAAW,EAVL,SAU4B,GAGpD,IAAIsE,EAAYzF,EA50DnB,SAA8Bz1F,GAE7B,QAA4BnqG,IAAvBnD,OAAOyoM,YAEX,OAAO,IAAIA,aAAcC,OAAQp7F,GAAOjpD,OAMzC,IAFA,IAAI33C,EAAQ,IAAIu+B,WAAY,IAAIuoE,YAAalG,EAAKzhG,SAExCc,EAAI,EAAG0W,EAAKiqF,EAAKzhG,OAAQc,EAAI0W,EAAI1W,IAAO,CAEjD,IAAItL,EAAQisG,EAAK6V,WAAYx2G,GAG7BD,EAAOC,GAAMtL,EAAQ,IAAO,GAAOA,EAIpC,OAAOqL,EAAM23C,OAyzD2BskJ,CAAqBjnM,KAAKC,UAAWwgM,IAAgB,IACvFyG,EAAkB,IAAIl1F,SAAU,IAAIF,YAhBZ,IAiB5Bo1F,EAAgB1E,UAAW,EAAGsE,EAAU5vD,YAAY,GACpDgwD,EAAgB1E,UAAW,EAjBF,YAiB0B,GAGnD,IAAIrgF,EAAS,IAAIrQ,YAzBK,IA0BlBsvC,EAAa,IAAIpvC,SAAUmQ,GAC/Bi/B,EAAWohD,UAAW,EA1BA,YA0BqB,GAC3CphD,EAAWohD,UAAW,EA1BL,GA0BqB,GACtC,IAAI2E,EA7BkB,GA8BnBD,EAAgBhwD,WAAa4vD,EAAU5vD,WACvC2vD,EAAkB3vD,WAAa0vD,EAAY1vD,WAC9CkK,EAAWohD,UAAW,EAAG2E,GAAiB,GAE1C,IAAIC,EAAU,IAAI1lF,KAAM,CACvBS,EACA+kF,EACAJ,EACAD,EACAD,GACE,CAAEhnM,KAAM,6BAEPynM,EAAY,IAAI/oM,OAAOglM,WAC3B+D,EAAU9D,kBAAmB6D,GAC7BC,EAAU7D,UAAY,WAErBxD,EAAQqH,EAAUhiM,cAMd,CAIL,IAAIg+L,EAFL,GAAK5C,EAAWl+I,SAAWk+I,EAAWl+I,QAAQp4C,OAAS,GAElDk5L,EAAS,IAAI/kM,OAAOglM,YACjBgE,cAAej3E,GACtBgzE,EAAOG,UAAY,WAElB,IAAI+D,EAAalE,EAAOh+L,OACxBo7L,EAAWl+I,QAAS,GAAIypG,IAAMu7C,EAC9BvH,EAAQS,SAMTT,EAAQS,SAYbV,GAAauF,MAAQ,CAEpBkC,eAAgB,SAAWx0F,EAAOpxD,GAEjC,IAOI33C,EAPAw9L,EAAY,KACZx0F,EAAYD,EAAME,eAElBhB,EAAQ,IAAIc,EAAM+C,eAAgB/C,EAAMd,MAAM/nG,OAAS,GACvD4oB,EAAS,IAAIigF,EAAMgD,gBAAiBhD,EAAMjgF,OAAO5oB,OAAS8oG,GAC1DwB,EAAczB,EAAMkB,kBAAmB,IAAIlB,EAAMgD,gBAAiB/C,IAItE,GAA4B,IAAvBD,EAAMd,MAAM/nG,OAAe,CAE/B+nG,EAAO,GAAMtwD,EAEb,IAAM,IAAI32C,EAAI,EAAGA,EAAIgoG,EAAWhoG,IAE/B8nB,EAAQ9nB,GAAM,EAIfhB,EAAQ,OAEF,GAAK23C,EAAOoxD,EAAMd,MAAO,GAAM,CAErC,GAAK/zG,KAAK4R,IAAKijG,EAAMd,MAAO,GAAMtwD,GAAS6lJ,EAAY,OAAO,EAE9Dv1F,EAAO,GAAMtwD,EACbswD,EAAMvwG,IAAKqxG,EAAMd,MAAO,GAExBn/E,EAAOpxB,IAAK8yG,EAAYC,SAAU9yD,GAAQ,GAC1C7uB,EAAOpxB,IAAKqxG,EAAMjgF,OAAQkgF,GAE1BhpG,EAAQ,OAEF,GAAK23C,EAAOoxD,EAAMd,MAAOc,EAAMd,MAAM/nG,OAAS,GAAM,CAE1D,GAAKhM,KAAK4R,IAAKijG,EAAMd,MAAOc,EAAMd,MAAM/nG,OAAS,GAAMy3C,GAAS6lJ,EAE/D,OAAOz0F,EAAMd,MAAM/nG,OAAS,EAI7B+nG,EAAOA,EAAM/nG,OAAS,GAAMy3C,EAC5BswD,EAAMvwG,IAAKqxG,EAAMd,MAAO,GAExBn/E,EAAOpxB,IAAKqxG,EAAMjgF,OAAQ,GAC1BA,EAAOpxB,IAAK8yG,EAAYC,SAAU9yD,GAAQoxD,EAAMjgF,OAAO5oB,QAEvDF,EAAQioG,EAAM/nG,OAAS,OAIvB,IAAUc,EAAI,EAAGA,EAAI+nG,EAAMd,MAAM/nG,OAAQc,IAAO,CAE/C,GAAK9M,KAAK4R,IAAKijG,EAAMd,MAAOjnG,GAAM22C,GAAS6lJ,EAAY,OAAOx8L,EAE9D,GAAK+nG,EAAMd,MAAOjnG,GAAM22C,GAAQoxD,EAAMd,MAAOjnG,EAAI,GAAM22C,EAAO,CAE7DswD,EAAMvwG,IAAKqxG,EAAMd,MAAM7zG,MAAO,EAAG4M,EAAI,GAAK,GAC1CinG,EAAOjnG,EAAI,GAAM22C,EACjBswD,EAAMvwG,IAAKqxG,EAAMd,MAAM7zG,MAAO4M,EAAI,GAAKA,EAAI,GAE3C8nB,EAAOpxB,IAAKqxG,EAAMjgF,OAAO10B,MAAO,GAAK4M,EAAI,GAAMgoG,GAAa,GAC5DlgF,EAAOpxB,IAAK8yG,EAAYC,SAAU9yD,IAAU32C,EAAI,GAAMgoG,GACtDlgF,EAAOpxB,IAAKqxG,EAAMjgF,OAAO10B,OAAS4M,EAAI,GAAMgoG,IAAehoG,EAAI,GAAMgoG,GAErEhpG,EAAQgB,EAAI,EAEZ,OAWH,OAHA+nG,EAAMd,MAAQA,EACdc,EAAMjgF,OAASA,EAER9oB,GAIRs7L,uBAAwB,SAAWzyF,EAAMulB,GAMxC,IAJA,IAAItlB,EAAS,GACT20F,EAAe,GACfC,EAAe70F,EAAKC,OAEd9nG,EAAI,EAAGA,EAAI08L,EAAax9L,SAAWc,EAAI,CAEhD,IAAI28L,EAAcD,EAAc18L,GAC5B48L,EAAqBrwE,GAAgBC,eAAgBmwE,EAAY3lM,MACjE6lM,EAAkBtwE,GAAgBO,SAAUM,EAAMwvE,EAAmB7vE,UAEzE,GAAyC,0BAApC6vE,EAAmB5rF,mBAAiFx6G,IAArComM,EAAmBjvE,cAAvF,CAQA,GAAKgvE,EAAY1zF,oBAAsB0zF,EAAYvuF,kCAC/CuuF,EAAY1zF,oBAAsB0zF,EAAYtuF,+BAAiC,CAElF,GAAKsuF,EAAY1zF,kBAAkBC,0CAIlC,MAAM,IAAI/kG,MAAO,gFAIlBhQ,QAAQC,KAAM,iGAEduoM,EAAcA,EAAYtwL,SACd2+F,iBAt4gEU,MA04gEvB,IASI8xF,EATAC,EAAcF,EAAgB3zJ,sBAAsBhqC,OACpDssH,EAAcqxE,EAAgBtzJ,sBAAuBqzJ,EAAmBjvE,eAE5E,QAAqBn3H,IAAhBg1H,EAEJ,MAAM,IAAIrnH,MAAO,oDAAsDy4L,EAAmBjvE,eAQ3F,QAA8Cn3H,IAAzCimM,EAAcI,EAAgBzxL,MAAnC,CAwBA,IAAI4xL,EAAoBL,EAAY1zF,kBAAmB,IAAI0zF,EAAY5xF,gBAAiB,IAExF+xF,EAAcL,EAAcI,EAAgBzxL,MAI5C,IAAUgO,EAAI,EAAGA,EAAI0jL,EAAY71F,MAAM/nG,OAAQka,IAE9C0jL,EAAYh1K,OAAQ1O,EAAI2jL,EAAcvxE,GAAgBwxE,EAAkBvzF,SAAUqzF,EAAY71F,MAAO7tF,IAOtG,IAAUA,EAAI,EAAGA,EAAIujL,EAAY11F,MAAM/nG,OAAQka,IAAO,CAErD,IAAI6jL,EAAgBpnM,KAAK0mM,eAAgBO,EAAaH,EAAY11F,MAAO7tF,IACzE0jL,EAAYh1K,OAAQm1K,EAAgBF,EAAcvxE,GAAgBmxE,EAAY70K,OAAQ1O,QA1CvF,CAMC,IAFA,IAAI0O,EAAS,KAFbg1K,EAAcH,EAAYtwL,SAEG0+F,iBAAiBgyF,EAAcD,EAAY71F,MAAM/nG,QAEpEka,EAAI,EAAGA,EAAI0jL,EAAY71F,MAAM/nG,OAAQka,IAE9C0O,EAAQ1O,EAAI2jL,EAAcvxE,GAAgBsxE,EAAYh1K,OAAQ1O,GAM/D0jL,EAAY9lM,KAAO4lM,EAAmB7vE,SAAW,yBACjD+vE,EAAYh1K,OAASA,EAErB20K,EAAcI,EAAgBzxL,MAAS0xL,EACvCh1F,EAAO9zG,KAAM8oM,SAtDbh1F,EAAO9zG,KAAM2oM,GAsFf,OAFA90F,EAAKC,OAASA,EAEPD,IA0BT,MAAMq1F,GAAmB7lM,OAAO,mBAC1B8lM,GAAiB9lM,OAAO,eACxB+lM,GAAgB/lM,OAAO,cACvBgmM,GAAYhmM,OAAO,YACnBimM,GAAajmM,OAAO,aACpBkmM,GAAelmM,OAAO,eACtBmmM,GAAenmM,OAAO,eACtBomM,GAAiBpmM,OAAO,iBACxBqmM,GAAwBrmM,OAAO;;;;;;;;;;;;;;;AA8LrC,IAAIsmM,GAAsD,SAAU1uB,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GAChJ,OAAOhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAAIA,GAIhE,MAAMy0L,GAAyB1qM,KAAKoN,GAAK,GAEnCu9L,GAAyB,CAC3BlnB,MAAO,CAACzpB,GAAiBnC,GAAW6yC,GAAwB,SAC5DzmB,SAAU,CAAEC,KAAM,CAAC,QAEjB0mB,GAAuBzmM,OAAO,uBAC9B0mM,GAAoB1mM,OAAO,oBAC3B2mM,GAAoB3mM,OAAO,oBAC3B4mM,GAAuB5mM,OAAO,uBAC9B6mM,GAAkB7mM,OAAO,kBAkKzBm/J,GArhOkB,CAACA,IACrB,IAAI2nC,EAAI9sD,EAAI0c,EAAIC,EAChB,MAAMowC,UAAqC5nC,EACvC/hK,eAAemhK,GACXhgK,SAASggK,GACT//J,KAAKsoM,GAAM,IAAIv0C,GACf/zJ,KAAKw7I,GAAM,IAAIz6I,IACff,KAAKk4J,GAAOswC,IACRA,EAAUloM,QAASmoM,IAGTA,aAAoBC,gBACJ,cAAlBD,EAAS3pM,OACT2pM,EAASE,WAAWroM,QAAS02H,IACzBh3H,KAAK0+K,IAAa1nD,KAEtByxE,EAASG,aAAatoM,QAAS02H,IAC3Bh3H,KAAK2+K,IAAgB3nD,KAEzBh3H,KAAK06K,UAIjB16K,KAAKm4J,GAAM,IAAI0wC,iBAAiB7oM,KAAKw+K,KACrC,MAAM7W,EAAa3nK,KAAK2nK,YAClBn9E,WAAEA,GAAexqF,KAAKs+K,IAC5B9zF,EAAWkuE,UAAUz3I,IAAI,wBACzB0mJ,EAAWC,cAAc,cAAcjT,YAAYnqE,GACnDA,EAAWmqE,YAAYgT,EAAWC,cAAc,aAEpDhpK,oBACImB,MAAMu8K,oBACN,IAAK,IAAInyK,EAAI,EAAGA,EAAInK,KAAK+hB,SAAS1Y,SAAUc,EACxCnK,KAAK0+K,IAAa1+K,KAAK+hB,SAAS5X,IAEpC,MAAM2+L,SAAEA,GAAaxiM,KACL,MAAZwiM,EACA9oM,KAAKy+K,IAAWlC,QAAQv8K,KAAM,CAAE+oM,WAAW,IAG3C/oM,KAAKy+K,IACDqqB,EAASE,gBAAgBhpM,KAAMA,KAAKw+K,KAGhD5/K,uBACImB,MAAM08K,uBACN,MAAMqsB,SAAEA,GAAaxiM,KACL,MAAZwiM,EACA9oM,KAAKy+K,IAAWv6F,aAGhB4kH,EAASG,kBAAkBjpM,KAAKy+K,KASxC7/K,cAAcy2I,GACV,MAAMmnB,EAAUx8J,KAAKu+K,IAAav8K,IAAIqzI,EAAOl0I,MAC9B,MAAXq7J,IAGJA,EAAQ7D,eAAetjB,EAAOjrH,UAC9BoyI,EAAQ5D,aAAavjB,EAAO51H,SAShC7gB,2BAA2BsqM,EAAQC,GAC/B,MAAMrrJ,EAAQ99C,KAAKy6K,KACbtsK,MAAEA,EAAKC,OAAEA,EAAMmrJ,MAAEA,GAAUz7G,EACjC2gH,GAAc59J,IAAIqoM,EAAS/6L,EAAOg7L,EAAS/6L,GACtCM,eAAe,GACfqrJ,UAAU,GACf0E,GAAc5yJ,IAAM,EACpB,MAAM8yJ,EAAM7gH,EAAM4jH,2BAA2BjD,IAC7C,GAAW,MAAPE,EACA,OAAO,KAEXigB,GAAaxrK,WAAWmmJ,EAAM56I,aAC9B,MAAMyL,EAAW6wJ,GAAWtc,EAAIv0I,SAAS7L,aAAaqgK,KACtDC,GAAmBzrJ,gBAAgBwrJ,IAEnC,MAAO,CAAEx0J,SAAUA,EAAU3K,OADdw7J,GAAWtc,EAAIl/I,OAAO+qB,kBAAkBq0I,MAG3DjgL,EAAE0pM,EAAKhqB,GAAqB9iC,EAAK+iC,GAAarmB,EAAKsmB,GAAmBrmB,EAAKsmB,GAAWxH,KAAUn2H,EAAMjuB,GAClG9yB,MAAMk3K,IAASn2H,EAAMjuB,GACrB,MAAMirB,EAAQ99C,KAAKy6K,IACbn8J,EAASw/B,EAAMooC,YACjBpoC,EAAMk/G,UACNl/G,EAAMy7G,MAAM6vC,eAAe9qL,EAAO8L,UAClCpqB,KAAKs+K,IAAqBngI,OAAOL,EAAOx/B,IAGhD1f,CAACmpK,IAAWzjK,GACRvE,MAAMgoK,IAAWzjK,GACjBtE,KAAKs+K,IAAqB7kK,QAAQnV,EAAE6J,MAAO7J,EAAE8J,QAEjDxP,CAAC8/K,IAAa1nD,GACV,KAAMA,aAAgBl3H,aACe,IAAjCk3H,EAAKh5C,KAAKp0E,QAAQ,YAClB,OAEJ,IAAI4yJ,EAAUx8J,KAAKu+K,IAAav8K,IAAIg1H,EAAKh5C,MAC1B,MAAXw+E,EACAA,EAAQ6sC,aAGR7sC,EAAU,IAAI/D,GAAQ,CAClBt3J,KAAM61H,EAAKh5C,KACX5zD,SAAU4sG,EAAKqiC,QAAQjvI,SACvB3K,OAAQu3G,EAAKqiC,QAAQ55I,SAEzBzf,KAAKu+K,IAAa19K,IAAIm2H,EAAKh5C,KAAMw+E,GACjCx8J,KAAKy6K,IAAQlhB,MAAM+vC,WAAW9sC,GAI9Bx8J,KAAKs+K,IAAqB9zF,WAAWmqE,YAAY6H,EAAQn3J,UAE7DrF,KAAKy6K,IAAQzd,SAAU,EAE3Bp+J,CAAC+/K,IAAgB3nD,GACb,KAAMA,aAAgBl3H,aAClB,OAEJ,MAAM08J,EAAUx8J,KAAKu+K,IAAav8K,IAAIg1H,EAAKh5C,MACtCw+E,IAGDA,EAAQ+sC,cACRvpM,KAAKy6K,IAAQlhB,MAAMiwC,cAAchtC,GACjCx8J,KAAKu+K,IAAaz8H,OAAOk1E,EAAKh5C,OAElCh+E,KAAKy6K,IAAQzd,SAAU,IAG/B,OAAOurC,GAq4NgBkB,CA7WH,CAAC9oC,IACrB,IAAI2nC,EAAI9sD,EAAI0c,EAAIC,EAAIj6J,EAAI8jK,EAAIC,EACxBC,EACJ,MAAMwnC,UAAqC/oC,EACvC/hK,cACImB,SAASqJ,WACTpJ,KAAKkiK,GAAM,KACXliK,KAAKsoM,GAAM,KACXtoM,KAAKw7I,GAAM,KACXx7I,KAAKk4J,GAAM,KACXl4J,KAAKm4J,GAAM,KACXn4J,KAAK9B,GAAM,KACX8B,KAAKgiK,GAAO/3J,IACR,MAAMioB,KAAEA,GAASjoB,EACjB,GAAIioB,GAAQA,EAAKpzB,OAASw1L,GAAkC,CACxD,MAAMoD,EAAaxlK,EAAKqnI,MAClBowC,EAAgB3pM,KAAK2nM,IAC3B,GAAqB,MAAjBgC,EACAA,EAAcC,kBAEb,GAAkB,MAAdlS,EAEL,OAGA13L,KAAK2nM,IADS,MAAdjQ,EACqB,IAAIe,GAAYvmK,EAAKwmK,KAAMhB,GAG3B,KAEzB13L,KAAKgK,cAAc,IAAIopF,YAAY,oBAAqB,CAAEC,OAAQ,CAAEn8E,IAAKwgL,EAAaA,EAAW6G,SAAW,WAGpHv+L,KAAKiiK,GAAO2qB,IACR5sL,KAAK06K,OAKbnhB,YACI,MAAMk7B,EAASz0L,KAAK2nM,IACpB,OAAOlT,EAASA,EAAOl7B,WAAQ54J,EAEnC/B,oBACImB,MAAMu8K,oBACN,MAAMutB,MAAEA,EAAKC,MAAEA,GAAU,IAAIC,eAC7BF,EAAM/2K,QACNg3K,EAAMh3K,QACN9yB,KAAKwnM,IAAaqC,EAClB7pM,KAAKynM,IAAcqC,EACnB9pM,KAAKwnM,IAAWvvD,UAAYj4I,KAAK4nM,IAErChpM,uBACImB,MAAM08K,uBACNz8K,KAAKwnM,IAAW1O,QAChB94L,KAAKynM,IAAY3O,QACjB94L,KAAKwnM,IAAa,KAClBxnM,KAAKynM,IAAc,KACO,MAAtBznM,KAAK0nM,KACL1nM,KAAK0nM,IAActwL,UAEG,MAAtBpX,KAAK2nM,KACL3nM,KAAK2nM,IAAciC,aAG3BhrM,QAAQgG,GAEJ,GADA7E,MAAMiF,QAAQJ,GACVA,EAAkBX,IAAIsjM,IAAgB,CACtC,MAAMyC,EAAgBplM,EAAkB5C,IAAIulM,IACvB,MAAjByC,GACAA,EAAc/rM,oBAAoB,WAAY+B,KAAK6nM,KAEvD,MAAMtO,EAAav5L,KAAKunM,IACN,MAAdhO,GACAA,EAAWv7L,iBAAiB,WAAYgC,KAAK6nM,MAIzDjpM,EAAEsjK,EAAKqlC,GAAee,EAAKhB,GAAgB9rD,EAAKgsD,GAAWtvC,EAAKuvC,GAAYtvC,EAAKuvC,GAAcxpM,EAAKypM,GAAchtB,OAC9G56K,MAAM46K,MACN36K,KAAKqnM,MAETzoM,CAACyoM,MAEG,MAAMvpJ,EAAQ99C,KAAKy6K,KACblhB,MAAEA,GAAUz7G,GACZ29G,YAAEA,GAAgBlC,EACxB,IAAIggC,EAAa,KACb0Q,EAAc,KAClB,GAAmB,MAAfxuC,EAAqB,CACrB,MAAM2T,qBAAEA,GAAyB3T,EAC3ByuC,EAAoBlqM,KAAKunM,IACzB4C,EAAqBnqM,KAAK0nM,IAChC,GAA4B,MAAxBt4B,EAA8B,CAI9B,GAH0B,MAAtB+6B,GACAA,EAAmB/yL,UAEE,MAArB8yL,GAA6BzuC,IAAgBz7J,KAAKsnM,IAClD,OAEJ/N,EAAa,IAAIuF,GAAWvlC,EAAMriJ,KAAO,GAAIk4J,GAC7C,IAAIhjJ,EAAU,KACI,MAAdmtK,GAA0C,MAApBA,EAAWhgC,OACjCntI,EAAU,IAAI29K,eACdE,EAAc,IAAI3Q,GAAsBC,EAAYntK,EAAQy9K,OAC5D7pM,KAAKynM,IAAY9wD,YAAY,CACzB73I,KAAMw1L,GACN/6B,MAAOggC,EAAWhgC,MAAM7iJ,SACxBgiL,KAAMtsK,EAAQ09K,OACf,CAAC19K,EAAQ09K,SAGZ9pM,KAAKynM,IAAY9wD,YAAY,CACzB73I,KAAMw1L,GACN/6B,MAAO,KACPm/B,KAAM,QAKtB14L,KAAKunM,IAAiBhO,EACtBv5L,KAAK0nM,IAAgBuC,EACrBjqM,KAAKsnM,IAAkB7rC,EAG3B78J,kBAAkBd,GACd,MAAMy7J,MAAEA,GAAUv5J,KAAKy6K,IACvB,OAAO,IAAI53K,QAAQ84J,MAAO/9C,EAASC,KAC/B,GAAa,MAAT07C,EACA,OAAO17C,EAAO,mCAGlB,MAAMusF,EAAO,CACTjL,QAAQ,EACRE,aAAa,EACbnpI,eAAgB/1C,EAAAA,EAChBq/K,yBAAyB,EACzBC,yBAAyB,EACzBF,aAAa,GAEjBvgM,OAAOuG,OAAO6kM,EAAMtsM,GAEpBssM,EAAK5vF,WAAa++C,EAAM/+C,WACxB4vF,EAAK9K,mBAAoB,EACzB,MAAMnwI,EAASoqG,EAAMwB,IACrB,IAAIntI,GAAU,EAEA,MAAVuhC,IACAvhC,EAAUuhC,EAAOvhC,QACjBuhC,EAAOvhC,SAAU,IAEJ,IAAIqxK,IACZ5/L,MAAMk6J,EAAM+B,eAAiBjf,GAC3Bz+B,EAAQ,IAAIgD,KAAK,CAACwpF,EAAKjL,OAAS9iD,EAAOn9I,KAAKC,UAAUk9I,IAAQ,CACjEv9I,KAAMsrM,EAAKjL,OAAS,2BAChB,sBAETiL,GACW,MAAVj7I,IACAA,EAAOvhC,QAAUA,MASjC,OAJAo0I,EAAK4lC,GAAgB3lC,EAAK4lC,GAvL4B,SAAUzuB,EAAYpwK,EAAQzH,EAAK83K,GAGpF,IAFL,IAA2H/mK,EAAvHhF,EAAIlE,UAAUC,OAAQiK,EAAIhG,EAAI,EAAItE,EAAkB,OAATqwK,EAAgBA,EAAOr6K,OAAOs6K,yBAAyBtwK,EAAQzH,GAAO83K,EAEvGlvK,EAAIivK,EAAW/vK,OAAS,EAAGc,GAAK,EAAGA,KAASmI,EAAI8mK,EAAWjvK,MAAImJ,GAAKhG,EAAI,EAAIgF,EAAEgB,GAAKhG,EAAI,EAAIgF,EAAEtJ,EAAQzH,EAAK+R,GAAKhB,EAAEtJ,EAAQzH,KAAS+R,GACzIhG,EAAI,GAAKgG,GAAKtU,OAAO2C,eAAeqH,EAAQzH,EAAK+R,GAoLxD+2L,CAAa,CACTzkM,EAAS,CAAE9G,KAAME,UAClB0qM,EAA6BpoM,UAAW4gK,OAAI,GACxCwnC,GAqMgCY,CAjKtB,CAAC3pC,IAClB,IAAI2nC,EAAI9sD,EAAI0c,EACZ,MAAMqyC,UAAkC5pC,EACpC/hK,cACImB,SAASqJ,WACTpJ,KAAKwqM,YAAa,EAClBxqM,KAAKyqM,gBAhBiB,IAiBtBzqM,KAAK0qM,kBAAoB,OACzB1qM,KAAKsoM,GAAMt/B,YAAY5qC,MACvBp+H,KAAKw7I,GAAM,EACXx7I,KAAKk4J,GAAOjuJ,GAAUjK,KAAKqoM,IAAiBp+L,GAEhDrL,oBACImB,MAAMu8K,oBACNt8K,KAAKhC,iBAAiB,gBAAiBgC,KAAKooM,KAC5CpoM,KAAKioM,IAAwBj/B,YAAY5qC,MAE7Cx/H,uBACImB,MAAM08K,uBACNz8K,KAAK/B,oBAAoB,gBAAiB+B,KAAKooM,KAC/CpoM,KAAKioM,IAAwBj/B,YAAY5qC,MAE7Cx/H,QAAQgG,GACJ7E,MAAMiF,QAAQJ,GACVA,EAAkBX,IAAI,gBACtBjE,KAAKioM,IAAwBj/B,YAAY5qC,OAGjDx/H,EAAE0pM,EAAKL,GAAsBzsD,EAAK0sD,GAAmBhwC,EAAKkwC,GAAsBD,KAAoBnoK,GAChGhgC,KAAKkoM,IAAqBloK,EAAM,GAEpCphC,CAACq4K,IAASn2H,EAAMjuB,GAEZ,GADA9yB,MAAMk3K,IAASn2H,EAAMjuB,IAChB7yB,KAAKwqM,aAAexqM,KAAKg7K,OAC1Bh7K,KAAK47J,IAAWv3E,aAChB,OAEJ,MAAMsmH,EAAgBttM,KAAK6N,IAAI2nB,EAAOiuB,EAAO9gD,KAAKioM,IAAwBjoM,KAAKyqM,iBAC3EE,EAAgB,IAChB3qM,KAAKy6K,IAAQrc,IAAMp+J,KAAK4qM,kBACpB5qM,KAAKkoM,IAAqByC,EAAgB,MAGtD/rM,CAACypM,IAAiBp+L,GACTjK,KAAKwqM,YAGkB,qBAAxBvgM,EAAMopF,OAAO/pF,SACbtJ,KAAKioM,IAAwBj/B,YAAY5qC,OAGjDwsE,wBACI,OAAO5qM,KAAKy6K,IAAQrc,IAExBx/J,yBACIoB,KAAKy6K,IAAQrc,IAAM,GAa3B,OAVA0pC,GAAa,CACTliM,EAAS,CAAE9G,KAAMC,QAASU,UAAW,iBACtC8qM,EAA0BjpM,UAAW,kBAAc,GACtDwmM,GAAa,CACTliM,EAAS,CAAE9G,KAAMM,OAAQK,UAAW,uBACrC8qM,EAA0BjpM,UAAW,uBAAmB,GAC3DwmM,GAAa,CACT9nK,GAAM,CAAEqhJ,WAAY2mB,GAAwB7hB,cAAegiB,KAC3DviM,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,yBACrC8qM,EAA0BjpM,UAAW,yBAAqB,GACtDipM,GA6FgDM,CA3xJlC,CAAClqC,IACtB,IAAI2nC,EAAI9sD,EAAI0c,EACZ,MAAM4yC,UAAsCnqC,EACxC/hK,cACImB,SAASqJ,WACTpJ,KAAK+qM,iBAAmB,KACxB/qM,KAAKgrM,YAAc,KACnBhrM,KAAKo8J,gBAfgB,EAgBrBp8J,KAAKq8J,eAfe,EAgBpBr8J,KAAKi9J,SAfQ,EAgBbj9J,KAAKsoM,GAAM,KACXtoM,KAAKw7I,GAAM,KACXx7I,KAAKk4J,GAAOjuJ,IACJA,EAAM5E,UAAYrF,MAClBA,KAAKsxL,OAIjB1yL,oBACImB,MAAMu8K,oBACNt8K,KAAK47J,IAAW5+C,OAAOh/G,iBAAiB,UAAWgC,KAAKwxL,KAE5D5yL,uBACImB,MAAM08K,uBACNz8K,KAAK47J,IAAW5+C,OAAO/+G,oBAAoB,UAAW+B,KAAKwxL,KAE/D5yL,QAAQgG,GACJ7E,MAAMiF,QAAQJ,GACVA,EAAkBX,IAAI,qBACtBjE,KAAKy6K,IAAQ5c,mBAtCR,GAsC2B79J,KAAKo8J,iBACrCp8J,KAAK06K,OAEL91K,EAAkBX,IAAI,oBACtBjE,KAAKy6K,IAAQjc,kBAAkBx+J,KAAKq8J,gBACpCr8J,KAAK06K,OAEL91K,EAAkBX,IAAI,cACtBjE,KAAKy6K,IAAQxd,SAAWj9J,KAAKi9J,SAC7Bj9J,KAAK06K,QAEJ91K,EAAkBX,IAAI,qBACvBW,EAAkBX,IAAI,iBACtBjE,KAAK+6K,OACL/6K,KAAKsxL,MAGb1yL,EAAE0pM,EAAKlX,GAAwB51C,EAAK+1C,GAA0Br5B,EAAKs5B,GAAY7W,OAC3E56K,MAAM46K,MAC8B,MAAhC36K,KAAKoxL,KACLpxL,KAAKqxL,IAAsBrxL,KAAKoxL,KAGxCxyL,MAAO0yL,MACH,MAAM0Z,YAAEA,EAAWD,iBAAEA,GAAqB/qM,KACJ,MAAlCA,KAAKuxL,MACLvxL,KAAKuxL,MACLvxL,KAAKuxL,IAA4B,MAErC,MAAMvb,aAAEA,GAAiBh2K,KAAK47J,IAC9B,GAAoB,MAAhBoa,EAGJ,IACI,MAAMpB,eAAEA,EAAcC,OAAEA,SAAiB,IAAIhyK,QAAQ84J,MAAO/9C,EAASC,KACjE,MAAMotF,EAAej1B,EAAak1B,gCAAgC5rC,GAAe0rC,GAAc1rC,GAAeyrC,GAAmB,CAAEx2B,gBAAiBv0K,KAAK46K,MACzJ56K,KAAKuxL,IAA4B,IAAM1zE,EAAOotF,GAC9CrtF,QAAcqtF,KAGdjrM,KAAKy6K,IAAQ9rH,WADH,MAAVkmH,EAC0BA,EAAO37J,QAGP,KAE9BlZ,KAAKqxL,IAAsBzc,EAAe17J,SAC1ClZ,KAAKy6K,IAAQlhB,MAAMvvJ,cAAc,CAAElL,KAAM,kBAE7C,MAAOqsM,GACH,GAAIA,aAA0B78L,MAE1B,MADAtO,KAAKqxL,IAAsB,MACrB8Z,GAQlBvsM,CAACyyL,IAAsBzc,GACnB50K,KAAKoxL,IAA0Bxc,EAC/B50K,KAAKy6K,IAAQrvG,YAAcprE,KAAKoxL,IAChCpxL,KAAKgK,cAAc,IAAIopF,YAAY,uBACnCpzF,KAAK06K,OAoBb,OAjBAyW,GAAa,CACTvrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,uBACrCqrM,EAA8BxpM,UAAW,wBAAoB,GAChE6vL,GAAa,CACTvrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,kBACrCqrM,EAA8BxpM,UAAW,mBAAe,GAC3D6vL,GAAa,CACTvrL,EAAS,CAAE9G,KAAMM,OAAQK,UAAW,sBACrCqrM,EAA8BxpM,UAAW,uBAAmB,GAC/D6vL,GAAa,CACTvrL,EAAS,CAAE9G,KAAMM,OAAQK,UAAW,qBACrCqrM,EAA8BxpM,UAAW,sBAAkB,GAC9D6vL,GAAa,CACTvrL,EAAS,CACL9G,KAAMM,UAEX0rM,EAA8BxpM,UAAW,gBAAY,GACjDwpM,GA2qJ6DM,CA/rKlD,CAACzqC,IACnB,IAAI2nC,EAAI9sD,EAAI0c,EAAIC,EAAIj6J,EAAI8jK,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACpE,MAAM0oC,UAAmC1qC,EACrC/hK,cACImB,SAASqJ,WACTpJ,KAAKsrM,gBAAiB,EACtBtrM,KAAKurM,YA/HY,kBAgIjBvrM,KAAKwrM,aA/Ha,iBAgIlBxrM,KAAKyrM,YA/Ha,OAgIlBzrM,KAAK0rM,eAAiB,OACtB1rM,KAAK2rM,eAAiB,OACtB3rM,KAAK4rM,eAAiB,OACtB5rM,KAAK6rM,eAAiB,OACtB7rM,KAAK8rM,2BAhI4B,IAiIjC9rM,KAAK+rM,uBAAyB3d,GAC9BpuL,KAAKgsM,kBAAoB7d,GACzBnuL,KAAKynL,kBAAoB4G,GACzBruL,KAAKsoM,GAAMtoM,KAAK2nK,WAAWC,cAAc,uBACzC5nK,KAAKw7I,GAAMx7I,KAAK2nK,WAAWC,cAAc,6CACzC5nK,KAAKk4J,GAAM/3I,EAAAA,EACXngB,KAAKm4J,GAAM,EACXn4J,KAAK9B,GAAMiiB,EAAAA,EACXngB,KAAKgiK,IAAM,EACXhiK,KAAKiiK,IAAM,EACXjiK,KAAKkiK,GAAM,IAAIkoB,GAAepqL,KAAKy6K,IAAQn8J,OAAQte,KAAK82K,KACxD92K,KAAKmiK,GAAM,EACXniK,KAAKoiK,GAAM,IAAI19B,GACf1kI,KAAKqiK,IAAM,EACXriK,KAAKsiK,IAAM,EACXtiK,KAAKuiK,IAAM,EACXviK,KAAKwiK,GAAOv4J,GAAUjK,KAAKiwL,IAAWhmL,GACtCjK,KAAKyiK,GAAOx4J,GAAUjK,KAAKkwL,IAAkBjmL,GAC7CjK,KAAK0iK,GAAM,IAAM1iK,KAAKgwL,MACtBhwL,KAAK2iK,GAAM,IAAM3iK,KAAK+vL,MAE1BnxL,iBACI,MAAMkV,MAAEA,EAAK+L,IAAEA,EAAGD,OAAEA,GAAW5f,KAAKwwL,IACpC,MAAO,CAAE18K,MAAAA,EAAO+L,IAAAA,EAAKD,OAAAA,GAEzBhhB,kBACI,OAAOoB,KAAKy6K,IAAQjR,YAExB5qK,iBACI,OAAOoB,KAAKqvL,IAAW4c,iBAG3BrtM,wBACI,OAAOoB,KAAKqvL,IAAWvxL,QAAQwpL,mBAEnC1oL,wBACI,OAAOoB,KAAKqvL,IAAWvxL,QAAQypL,mBAEnC3oL,mBACIoB,KAAKywL,KAAe,EACpBzwL,KAAKopK,cAAcqnB,IAAa,GAEpC7xL,yBACIoB,KAAKswL,IAAqB,EAC1BtwL,KAAKqwL,IAA6BlwK,EAAAA,EAClCngB,KAAKowL,KAAsB,EAC3BpwL,KAAKmwL,IACDnwL,KAAKgsM,oBAAsB7d,IACvBnuL,KAAKsrM,eAEjB1sM,oBACImB,MAAMu8K,oBACNt8K,KAAKqvL,IAAWrxL,iBAAiB,SAAUgC,KAAK6vL,KAChD7vL,KAAKqvL,IAAWrxL,iBAAiB,uBAAwBgC,KAAK8vL,KAC9D9vL,KAAKqvL,IAAWrxL,iBAAiB,qBAAsBgC,KAAK8vL,KAEhElxL,uBACImB,MAAM08K,uBACNz8K,KAAKqvL,IAAWpxL,oBAAoB,SAAU+B,KAAK6vL,KACnD7vL,KAAKqvL,IAAWpxL,oBAAoB,uBAAwB+B,KAAK8vL,KACjE9vL,KAAKqvL,IAAWpxL,oBAAoB,qBAAsB+B,KAAK8vL,KAEnElxL,QAAQgG,GACJ7E,MAAMiF,QAAQJ,GACd,MAAMsnM,EAAWlsM,KAAKqvL,IAChBv/B,EAAQ9vJ,KAAK82K,IA+BnB,GA9BIlyK,EAAkBX,IAAI,oBAClBjE,KAAKsrM,gBACLY,EAASC,oBACLnsM,KAAKgsM,oBAAsB7d,KAC3BnuL,KAAKmwL,KAAwB,GAEjCrgC,EAAM9xJ,iBAAiB,QAASgC,KAAK4vL,KACrC9/B,EAAM9xJ,iBAAiB,OAAQgC,KAAK2vL,OAGpC7/B,EAAM7xJ,oBAAoB,QAAS+B,KAAK4vL,KACxC9/B,EAAM7xJ,oBAAoB,OAAQ+B,KAAK2vL,KACvCuc,EAASE,qBACTpsM,KAAKwvL,SAGT5qL,EAAkBX,IAAI,sBACtBW,EAAkBX,IAAI,mBACtBW,EAAkBX,IAAI,UAClBjE,KAAKgsM,oBAAsB7d,IAC3BnuL,KAAKsrM,iBAAmBtrM,KAAKowL,IAC7BpwL,KAAKmwL,KAAwB,EAG7BnwL,KAAKwvL,OAGT5qL,EAAkBX,IAAI,2BACtBjE,KAAKsvL,IAAgB52B,UAAU2zC,OAAO,SAAUrsM,KAAK+rM,yBAA2B3d,IAEhFxpL,EAAkBX,IAAI,qBAAsB,CAC5C,MAAMwjL,EAAoBznL,KAAKynL,kBAC/BykB,EAASI,aAAa,CAAE7kB,kBAAAA,KAEF,IAAtBznL,KAAKywL,KACL5tL,QAAQ+6G,UAAU93B,KAAK,KACnB9lF,KAAKqvL,IAAW5E,aAChBzqL,KAAKy6K,IAAQgQ,aACbzqL,KAAKywL,KAAe,IAIhC7xL,EAAE0pM,EAAKhZ,GAAgB9zC,EAAK+zC,GAA0Br3B,EAAKq4B,GAAcp4B,EAAKm4B,GAAmBpyL,EAAKmyL,GAA2BruB,EAAKouB,GAAoBnuB,EAAKkuB,GAAsBjuB,EAAKmtB,GAAWltB,EAAKosB,GAA0BnsB,EAAKouB,GAAgBnuB,EAAKouB,GAAanuB,EAAKouB,GAAgBnuB,EAAKouB,GAAmBnuB,EAAKqtB,GAAgBptB,EAAKqtB,GAAuBptB,EAAKktB,GAAejtB,EAAKgtB,GAAckB,KAAmB7wJ,GAC/ZhgC,KAAKqvL,IAAW7E,eAA0B,IAAXxqJ,EAAM,GAAW3iC,KAAKoN,IAEzD7L,CAACgyL,IAAkB5wJ,GACf,GAAIhgC,KAAK2wL,IAAoB,CACzB,MAAM78K,MAAEA,EAAK+L,IAAEA,GAAQ7f,KAAKusM,iBAC5BvsK,EAAM,GAAKlsB,EACXksB,EAAM,GAAKngB,EACX7f,KAAK2wL,KAAqB,EAE9B3wL,KAAKqvL,IAAW9E,SAASvqJ,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAEvDphC,CAACmyL,IAAqB/wJ,GAClBhgC,KAAKqvL,IAAWid,aAAa,CACzBllB,sBAAuBpnJ,EAAM,GAC7BknJ,kBAAmBlnJ,EAAM,GACzBgnJ,cAAehnJ,EAAM,KAEzBhgC,KAAKwsM,mBAET5tM,CAACoyL,IAAqBhxJ,GAClBhgC,KAAKqvL,IAAWid,aAAa,CACzBjlB,sBAAuBrnJ,EAAM,GAC7BmnJ,kBAAmBnnJ,EAAM,GACzBinJ,cAAejnJ,EAAM,KAEzBhgC,KAAK0vL,IAAwB1vJ,EAAM,IACnChgC,KAAKwsM,mBAET5tM,CAACqyL,IAAqBjxJ,GAClBhgC,KAAKqvL,IAAWid,aAAa,CAAEhlB,mBAA+B,IAAXtnJ,EAAM,GAAW3iC,KAAKoN,KACzEzK,KAAKwsM,mBAET5tM,CAACsyL,IAAqBlxJ,GAClBhgC,KAAKqvL,IAAWid,aAAa,CAAE/kB,mBAA+B,IAAXvnJ,EAAM,GAAW3iC,KAAKoN,KACzEzK,KAAKwsM,mBAET5tM,CAACkyL,IAAmB9wJ,GAChB,MAAOp3B,EAAGiD,EAAG4L,GAAKuoB,EAClBhgC,KAAKy6K,IAAQhR,UAAU7gK,EAAGiD,EAAG4L,GAC7BzX,KAAK47J,IAAWma,WAAW9X,eAE/Br/J,CAACq4K,IAASn2H,EAAMjuB,GAEZ,GADA9yB,MAAMk3K,IAASn2H,EAAMjuB,GACjB7yB,KAAK47J,IAAWv3E,eAAiBrkF,KAAKg7K,MACtC,OAEJ,MAAM58C,EAAM4qC,YAAY5qC,MACxB,GAAIp+H,KAAKmwL,IAAuB,CAC5B,MAAMsc,EAAgBzsM,KAAKgsM,oBAAsB7d,GAC7CnuL,KAAKq6K,IACLr6K,KAAKuwL,IACLvwL,KAAK0hH,QACL0c,EAAMquE,EAAgBzsM,KAAK8rM,6BAC3B9rM,KAAK82K,IAAmBnzK,aAAa,aAlS9B,yDAmSP3D,KAAKmwL,KAAwB,EAC7BnwL,KAAKqwL,IAA6BjyD,EAClCp+H,KAAKsvL,IAAgB52B,UAAUz3I,IAAI,YAG3C,GAAIxY,SAASzI,KAAKqwL,MACdrwL,KAAK+rM,yBAA2B3d,GAA+B,CAC/D,MAAMtwI,EAAQ99C,KAAKy6K,IACb5e,GAAkBz9B,EAAMp+H,KAAKqwL,KArUrB,IAsUV,EACE3gL,EAASo+K,GAAOjyB,GAChBz5H,EAAU2rJ,GAAKlyB,GAErB,GADA77J,KAAKuvL,IAA0BvvJ,MAAMoC,QAAU,GAAGA,EAC9C1yB,IAAW1P,KAAKswL,IAAoB,CACpC,MAAMzpG,EAAUn3E,EAASouC,EAAM3vC,MAAQ,IACjCk9K,GAAc37K,EAAS1P,KAAKswL,KAAsBjzL,KAAKoN,GAAK,GAClEzK,KAAKuvL,IAA0BvvJ,MAAMynD,UACjC,cAAcZ,OAClB7mF,KAAKqvL,IAAWtD,YAAYV,EAAY,EAAG,GAC3CrrL,KAAKswL,IAAqB5gL,GAGlC1P,KAAKqvL,IAAWxqL,OAAOi8C,EAAMjuB,GAC7B7yB,KAAKy6K,IAAQxc,aAAaprI,GAE9Bj0B,CAAC4wL,MAEGxvL,KAAKmwL,KAAwB,EAC7BnwL,KAAKsvL,IAAgB52B,UAAU5oI,OAAO,WACtC9vB,KAAKqwL,IAA6BlwK,EAAAA,EAMtCvhB,CAAC8wL,IAAwB9vK,GACrB,MAAM27I,oBAAEA,GAAwBv7J,KAAKy6K,IAAQlhB,MAGvChuI,EAAM,EAFUluB,KAAK8N,IAAIowJ,EAAqB37I,GAGpD5f,KAAKqvL,IAAWqd,cAFH,EAEuBnhL,GAExC3sB,CAAC6wL,MAMG,MAAQ37K,MAAO64L,EAAW9sL,IAAK+sL,GAAY5sM,KAAKwwL,KAC1C18K,MAAEA,EAAK+L,IAAEA,GAAQ7f,KAAKqvL,IAAWwd,mBAAmB7sM,KAAKwwL,KACzDz5D,EAAW/2H,KAAK6rL,cAEtB,GAAgB,MAAZ90D,GAAoBA,EAAS+0D,gBAAkB9rL,KAAM,CACrD,MAAM8sM,GAAyB,EAAIzvM,KAAKqL,OAAQikM,EAAYvd,GAAOD,IAAcF,KAAY,EACvF8d,GAAqB,EAAI1vM,KAAKqL,OAAQoL,EAAQs7K,GAAOD,IAAcF,KAAY,EAC/E+d,EAAkB3vM,KAAKqL,MAAMkkM,EAAU1d,IACvC+d,EAAc5vM,KAAKqL,MAAMmX,EAAMqvK,IACrC,GAAI6d,IAAsBD,GACtBG,IAAgBD,EAAiB,CACjC,MAEMpwB,EAAY,mBADOsR,GAAoB+e,KADdhf,GAA0B8e,KAGzD/sM,KAAK82K,IAAmBnzK,aAAa,aAAci5K,KAI/Dh+K,CAACmpK,IAAW99J,GACR,MAAMiiM,EAAWlsM,KAAKqvL,IAChB6d,EAAuBltM,KAAKy6K,IAAQtd,kBAG1Cp9J,MAAMgoK,IAAW99J,GACjB,MAAMkjM,EAAuBntM,KAAKy6K,IAAQtd,kBACpCvhH,EAAOswJ,EAASD,iBAAmBiB,EACzCltM,KAAKuuL,IAA4B4e,EAAuBvxJ,EACxDswJ,EAASkB,aAAaptM,KAAKy6K,IAAQ9+H,QACnC37C,KAAKopK,cAAc,iBAAkBppK,KAAK6rM,gBAC1C7rM,KAAKopK,cAAc,cAAeppK,KAAKyrM,aACvCzrM,KAAKwsM,mBAET5tM,CAAC+7K,MACG56K,MAAM46K,MACN,MAAMxd,kBAAEA,GAAsBn9J,KAAKy6K,IACnCz6K,KAAKuuL,IAA4BpxB,EAC7Bn9J,KAAK0wL,IACL1wL,KAAK2wL,KAAqB,EAG1B3wL,KAAK0wL,KAAkB,EAE3B1wL,KAAKopK,cAAc,iBAAkBppK,KAAK6rM,gBAC1C7rM,KAAKopK,cAAc,cAAeppK,KAAKyrM,aACvCzrM,KAAKopK,cAAc,iBAAkBppK,KAAK0rM,gBAC1C1rM,KAAKopK,cAAc,iBAAkBppK,KAAK2rM,gBAC1C3rM,KAAKopK,cAAc,cAAeppK,KAAKurM,aACvCvrM,KAAKopK,cAAc,eAAgBppK,KAAKwrM,cACxCxrM,KAAKwsM,mBAET5tM,CAACoxL,MACG,MAAMlgC,EAAQ9vJ,KAAK82K,IACdruK,SAASzI,KAAKuwL,OACfvwL,KAAKuwL,IAAgBvnB,YAAY5qC,OAOrC,MAAMw+C,EAAY58K,KAAKo6K,IACnBtqB,EAAMniH,aAAa,gBAAkBivI,GACrC9sB,EAAMnsJ,aAAa,aAAci5K,GAEjC58K,KAAKgsM,oBAAsB7d,IAC1BnuL,KAAKowL,MACNpwL,KAAKmwL,KAAwB,GAGrCvxL,CAACmxL,MACO/vL,KAAKgsM,oBAAsB7d,KAG/BnuL,KAAKmwL,KAAwB,EAC7BnwL,KAAKsvL,IAAgB52B,UAAU5oI,OAAO,WACtC9vB,KAAKqwL,IAA6BlwK,EAAAA,EAClCngB,KAAKuwL,IAAgBpwK,EAAAA,GAEzBvhB,CAACqxL,KAAW3mL,OAAEA,IACVtJ,KAAKyvL,MACLzvL,KAAK06K,MACDpxK,IAAW6gL,KACXnqL,KAAKowL,KAAsB,EAC3BpwL,KAAKwvL,OAETxvL,KAAKgK,cAAc,IAAIopF,YAAY,gBAAiB,CAAEC,OAAQ,CAAE/pF,OAAAA,MAEpE1K,CAACsxL,IAAkBjmL,GACI,yBAAfA,EAAMnL,KACNkB,KAAKw6K,IAAY9hB,UAAUz3I,IAAI,oBAG/BjhB,KAAKw6K,IAAY9hB,UAAU5oI,OAAO,qBAuE9C,OAnEA+9J,GAAa,CACTjoL,EAAS,CAAE9G,KAAMC,QAASU,UAAW,qBACtC4rM,EAA2B/pM,UAAW,sBAAkB,GAC3DusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYqN,GACZlJ,gBAAgB,EAChBW,cAAeyK,KAEnBhrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,eAAgBG,WAAY,KAAM,KACvEyrM,EAA2B/pM,UAAW,mBAAe,GACxDusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAY2N,GACZxJ,gBAAgB,EAChBW,cAAe2K,KAEnBlrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,gBAAiBG,WAAY,KAAM,KACxEyrM,EAA2B/pM,UAAW,oBAAgB,GACzDusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYiN,GACZ9I,gBAAgB,EAChBW,cAAe0K,KAEnBjrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,gBAAiBG,WAAY,KAAM,KACxEyrM,EAA2B/pM,UAAW,mBAAe,GACxDusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYuN,GACZzI,cAAe4K,KAEnBnrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,mBAAoBG,WAAY,KAAM,KAC3EyrM,EAA2B/pM,UAAW,sBAAkB,GAC3DusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYwN,GACZ1I,cAAe6K,KAEnBprL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,mBAAoBG,WAAY,KAAM,KAC3EyrM,EAA2B/pM,UAAW,sBAAkB,GAC3DusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYmN,GACZrI,cAAe8K,KAEnBrrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,oBAAqBG,WAAY,KAAM,KAC5EyrM,EAA2B/pM,UAAW,sBAAkB,GAC3DusL,GAAa,CACT7tJ,GAAM,CACFqhJ,WAAYoN,GACZtI,cAAe+K,KAEnBtrL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,oBAAqBG,WAAY,KAAM,KAC5EyrM,EAA2B/pM,UAAW,sBAAkB,GAC3DusL,GAAa,CACTjoL,EAAS,CAAE9G,KAAMM,OAAQK,UAAW,kCACrC4rM,EAA2B/pM,UAAW,kCAA8B,GACvEusL,GAAa,CACTjoL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,8BACrC4rM,EAA2B/pM,UAAW,8BAA0B,GACnEusL,GAAa,CACTjoL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,wBACrC4rM,EAA2B/pM,UAAW,yBAAqB,GAC9DusL,GAAa,CACTjoL,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,wBACrC4rM,EAA2B/pM,UAAW,yBAAqB,GACvD+pM,GA2zJ8EgC,CA9xNzE,CAAC1sC,IACb,IAAI2nC,EAAI9sD,EAAI0c,EAAIC,EAAIj6J,EAAI8jK,EAAIC,EAAIC,EAAIC,EACpC,MAAMmrC,UAA6B3sC,EAC/B/hK,cACImB,SAASqJ,WACTpJ,KAAKutM,IAAK,EACVvtM,KAAKwtM,QAAU,OACfxtM,KAAKytM,QA5BQ,gCA6BbztM,KAAK0tM,OAAS,KACd1tM,KAAK2tM,kBAAoB,SACzB3tM,KAAKsoM,IAAM,EAGXtoM,KAAKw7I,GAAMx7I,KAAK2nK,WAAWC,cAAc,cACzC5nK,KAAKk4J,GAAMrwJ,SAASC,cAAc,KAClC9H,KAAKm4J,GAAM,IAAI8T,IACfjsK,KAAK9B,GAAMuhL,GACXz/K,KAAKgiK,GAAM,IAAIiK,IACfjsK,KAAKiiK,GAAOh4J,IACRA,EAAMqjF,iBACNttF,KAAK4tM,cAET5tM,KAAKkiK,GAAM,EAAG5/F,OAAAA,MACNA,IAAWwhG,IACX9jK,KAAK47J,IAAWma,WAAW3N,iBAAmBpoK,KAAKy6K,MACnDz6K,KAAK2D,aAAa,YAAa2+D,GAC/BtiE,KAAKgK,cAAc,IAAIopF,YAAY,YAAa,CAAEC,OAAQ,CAAE/wB,OAAAA,QAGpEtiE,KAAKmiK,GAAOl4J,IACU,qCAAdA,EAAMioB,MACNlyB,KAAKgK,cAAc,IAAIopF,YAAY,8BAI/Cy6G,oBACI,OAAO7tM,KAAK+/K,MAAaN,GAE7B7gL,oBACImB,MAAMu8K,oBACNt8K,KAAK47J,IAAWma,WAAW/3K,iBAAiB,SAAUgC,KAAKqgL,KAC3DrgL,KAAK2D,aAAa,YAAamgK,IAC/B9jK,KAAKmgL,IAAWniL,iBAAiB,UAAWgC,KAAKsgL,KAErD1hL,uBACImB,MAAM08K,uBACNz8K,KAAK47J,IAAWma,WAAW93K,oBAAoB,SAAU+B,KAAKqgL,KAC9DrgL,KAAKmgL,IAAWliL,oBAAoB,UAAW+B,KAAKsgL,KAExD1hL,aAAagG,GACT7E,MAAM8E,OAAOD,GACTA,EAAkBX,IAAI,uBACtBjE,KAAKkgL,IACDX,GAA6Bv/K,KAAK2tM,qBAErC/oM,EAAkBX,IAAI,OAAUW,EAAkBX,IAAI,YACtDW,EAAkBX,IAAI,aAGvBW,EAAkBX,IAAI,aACtBjE,KAAKggL,IAAYR,GAAmBx/K,KAAKytM,UAEzC7oM,EAAkBX,IAAI,aACtBjE,KAAKy6K,IAAQvd,SAA4B,UAAjBl9J,KAAKwtM,SAEjCxtM,KAAKugL,OAQT3hL,mBACI,OAAQoB,KAAK+/K,KACT,KAAKN,GACDz/K,KAAK6/K,MACL,MACJ,KAAKJ,SACKz/K,KAAK2/K,MACX,MACJ,KAAKF,GACDz/K,KAAK4/K,MACL,MACJ,QACIthL,QAAQC,KAAK,sGAKzBK,OAAQ0pM,EAAKxoB,GAAgBtkC,EAAKkkC,GAAoBxnB,EAAKioB,GAAWhoB,EAAK6nB,GAAU9hL,EAAK6hL,GAAS/d,EAAKke,GAAoBje,EAAKme,GAA2Ble,EAAKme,GAAale,EAAKme,GAAUC,OAEzL,GADAvgL,KAAK+/K,IAAWN,GACZz/K,KAAKutM,GAAI,CACT,MAAME,EAAU,GAChBztM,KAAKggL,IAAU1/K,QAASzB,IACpB4uM,EAAQtvM,KAAKU,KAEjB,IAAK,MAAMA,KAAS4uM,EAAS,CACzB,GAAc,UAAV5uM,GAAqBkI,IAA0Bs4K,UACzCr/K,KAAK47J,IAAWma,WAAW+3B,uBAAwB,CACzD9tM,KAAK+/K,IAAWN,GAChB,MAEC,GAAc,iBAAV5gL,GAA4BmI,IAAes4K,GAAsB,CACtEt/K,KAAK+/K,IAAWN,GAChB,MAEC,GAAc,eAAV5gL,GAA4BmB,KAAK0tM,QACtC1tM,KAAKigL,KAAwBt4K,EAA2B,CACxD3H,KAAK+/K,IAAWN,GAChB,QAIZ,GAAIz/K,KAAK6tM,cACL7tM,KAAK0/K,IAAoBhnB,UAAUz3I,IAAI,WACvCjhB,KAAK0/K,IAAoB1hL,iBAAiB,QAASgC,KAAKogL,UAEvD,GAAIpgL,KAAK0/K,IAAoBhnB,UAAUq1C,SAAS,WAAY,CAC7D/tM,KAAK0/K,IAAoBzhL,oBAAoB,QAAS+B,KAAKogL,KAC3DpgL,KAAK0/K,IAAoBhnB,UAAU5oI,OAAO,WAE1C,MAAMwyC,EAASwhG,GACf9jK,KAAK2D,aAAa,YAAa2+D,GAC/BtiE,KAAKgK,cAAc,IAAIopF,YAAY,YAAa,CAAEC,OAAQ,CAAE/wB,OAAAA,OAGpE29G,IAAKA,MACD,OAAI/3K,EACOlI,KAAKkgL,IAAoBj8K,IAAI,YAE/BkE,GACEnI,KAAKkgL,IAAoBj8K,IAAI,UAI5CrF,MAAO+gL,MACHrhL,QAAQyO,IAAI,kCACZ,IACI/M,KAAK0/K,IAAoBzhL,oBAAoB,QAAS+B,KAAKogL,WACrDpgL,KAAK47J,IAAWma,WAAWi4B,QAAQhuM,KAAKy6K,KAElD,MAAOzqK,GACH1R,QAAQC,KAAK,uCACbD,QAAQ0R,MAAMA,SACRhQ,KAAK47J,IAAWma,WAAW/O,iBACjCqY,IAAiB,QACXr/K,KAAKugL,MACXvgL,KAAK4tM,qBAGL5tM,KAAKugL,OAOb3hL,CAACghL,MAIG,MAAMquB,EAAUjuM,KAAKmU,IAAIkvD,QAAQ,IAAK,KAChCs8F,EAAWr5J,KAAKq5J,SAAS72J,WACzBolM,EAAc,IAAIt2D,IAAI+nB,GACtBwuC,EAAW,IAAIv2D,IAAIq2D,EAAStuC,GAClCuuC,EAAY11J,KA9LA,+BAiMZ,IAAI41J,EAAe,SAASD,EAASrlM,0BAChCmlM,EAAQ5Q,SAAS,YAClB+Q,GAAgB,SAASzuC,GAExBsuC,EAAQ5Q,SAAS,aAClB+Q,GAAgB,UAAUC,mBAAmBruM,KAAKm7K,KAAO,KAExC,UAAjBn7K,KAAKwtM,UACLY,GAAgB,oBAEpB,MAAME,EAAS,4CAA4CF,6GAAwHC,mBAAmBH,EAAYplM,mBAelNxC,KAAKtI,iBAAiB,aAdC,KA5MX,iCA6MJsI,KAAKq5J,SAASnnH,OACd8mI,IAAuB,EAMvBh5K,KAAKioM,QAAQC,OACbxuM,KAAKugL,QAKuC,CAAE9X,MAAM,IAC5DzoK,KAAKmgL,IAAWx8K,aAAa,OAAQ2qM,GACrCtuM,KAAKmgL,IAAWsuB,QAMpB7vM,CAACihL,MACG,MAAMsuB,EAAW,IAAIv2D,IAAI53I,KAAK0tM,OAAQpnM,KAAKq5J,SAAS72J,YAC/B,UAAjB9I,KAAKwtM,UACLW,EAAS31J,KAAO,0BAEpB,MAAMk2J,EAAS1uM,KAAKmgL,IACpBuuB,EAAO/qM,aAAa,MAAO,MAC3B,MAAMgrM,EAAM9mM,SAASC,cAAc,OACnC4mM,EAAO/5C,YAAYg6C,GACnBD,EAAO/qM,aAAa,OAAQwqM,EAASrlM,YACrC4lM,EAAOD,QACPC,EAAO76C,YAAY86C,IAkB3B,OAfAvvB,GAAa,CACTx5K,EAAS,CAAE9G,KAAMC,QAASU,UAAW,QACtC6tM,EAAqBhsM,UAAW,UAAM,GACzC89K,GAAa,CACTx5K,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,cACrC6tM,EAAqBhsM,UAAW,eAAW,GAC9C89K,GAAa,CACTx5K,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,cACrC6tM,EAAqBhsM,UAAW,eAAW,GAC9C89K,GAAa,CACTx5K,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,aACrC6tM,EAAqBhsM,UAAW,cAAU,GAC7C89K,GAAa,CACTx5K,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,yBACrC6tM,EAAqBhsM,UAAW,yBAAqB,GACjDgsM,GAujN4FsB,CA36IlF,CAACjuC,IAClB,IAAI2nC,EAAI9sD,EAAI0c,EAAIC,EAAIj6J,EAAI8jK,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACpD,MAAMssC,UAAkCluC,EACpC/hK,eAAemhK,GACXhgK,SAASggK,GAKT//J,KAAK8uM,OAAS,KAQd9uM,KAAK+uM,OAASjd,GAUd9xL,KAAKk+G,QAAU6zE,GACf/xL,KAAKsoM,IAAM,EACXtoM,KAAKw7I,IAAM,EACXx7I,KAAKk4J,GAAM,EACXl4J,KAAKm4J,GAAM,KAGXn4J,KAAK9B,GAAM8B,KAAK2nK,WAAWC,cAAc,gBACzC5nK,KAAKgiK,GAAMhiK,KAAK2nK,WAAWC,cAAc,mBACzC5nK,KAAKiiK,GAAMjiK,KAAK2nK,WAAWC,cAAc,gCACzC5nK,KAAKkiK,GAAMliK,KAAK2nK,WAAWC,cAAc,iCACzC5nK,KAAKmiK,GAAMniK,KAAKuzL,IAAuB5lJ,aAAa,cACpD3tC,KAAKoiK,GAAM,IAAMpiK,KAAKm0L,MACtBn0L,KAAKqiK,GAAOp4J,GAAUjK,KAAKo0L,IAAYnqL,GACvCjK,KAAKsiK,GAAOr4J,GAAUjK,KAAKq0L,IAAapqL,GACxCjK,KAAKuiK,GAn9MA,EAAC9qB,EAAIooB,KAClB,IAAIC,EAAQ,KACZ,MAAMkvC,EAAY,IAAIjvC,KACL,MAATD,IAGJroB,KAAMsoB,GACND,EAAQx5J,KAAK45G,WAAW,IAAM4/C,EAAQ,KAAMD,KAQhD,OANAmvC,EAAUC,MAAQ,KACD,MAATnvC,IACAx5J,KAAK05J,aAAaF,GAClBA,EAAQ,OAGTkvC,GAo8MYE,CAAU58C,IACjB,MAAMsB,EAAa5zJ,KAAKozL,IAA4Bx/B,WACpD5yG,sBAAsB,KAClBhhD,KAAKqzL,IAA6BrzJ,MAAMoC,QACpC,GAnIW,IAmIP,EAAMkwH,GACdtyJ,KAAKozL,IAA4BpzJ,MAAMynD,UACnC,UAAU6qE,KACG,IAAbA,IAMAsB,EAAWC,YAAY7zJ,KAAKozL,KAC5Bx/B,EAAWe,YAAY30J,KAAKozL,MAKf,IAAb9gC,EACAtyJ,KAAKozL,IAA4B16B,UAAUz3I,IAAI,QAG/CjhB,KAAKozL,IAA4B16B,UAAU5oI,OAAO,WAvJpC,KA2J1B,MACM4hI,GADqBprJ,KAAKq6J,oBAAsB,IACNjP,sBA1JrB,0DA4J3BI,GAAkBq9C,wBAAwBz9C,GAE9CA,gCAAgC7yJ,GAC5BizJ,GAAkBq9C,wBAAwBtwM,GAE9C6yJ,kCACI,OAAOI,GAAkBs9C,0BAQ7BxwM,eAAe2e,GACXsxJ,GAASC,UAAU9xD,OAAO20C,IAASr0C,QAAQT,eAAet/F,GAO9D3e,gBACQoB,KAAKu3K,MACLv3K,KAAK0zL,OAGL1zL,KAAKwzL,IAA0BxB,GAC/BhyL,KAAKs6K,OAGb17K,oBACImB,MAAMu8K,oBAINt8K,KAAKszL,IAAyBt1L,iBAAiB,QAASgC,KAAKg0L,KAC7Dh0L,KAAKszL,IAAyBt1L,iBAAiB,UAAWgC,KAAKi0L,KAC/Dj0L,KAAK46K,IAAkB58K,iBAAiB,WAAYgC,KAAKk0L,KACzDjC,GAAuBod,iBAAiBrvM,MAE5CpB,uBACImB,MAAM08K,uBACNz8K,KAAKszL,IAAyBr1L,oBAAoB,QAAS+B,KAAKg0L,KAChEh0L,KAAKszL,IAAyBr1L,oBAAoB,UAAW+B,KAAKi0L,KAClEj0L,KAAK46K,IAAkB38K,oBAAoB,WAAY+B,KAAKk0L,KAC5DjC,GAAuBqd,mBAAmBtvM,MAE9CpB,cAAcgG,GACV7E,MAAMiF,QAAQJ,GACVA,EAAkBX,IAAI,WAA4B,MAAfjE,KAAK8uM,SACxC9uM,KAAKuzL,IAAuBvzJ,MAAMuvK,gBAC9B,OAAOvvM,KAAK8uM,WAEhBlqM,EAAkBX,IAAI,QACtBjE,KAAKuzL,IAAuB5vL,aAAa,aAAc,GAAG3D,KAAKo6K,QAAgBp6K,KAAK+zL,QAEpFnvL,EAAkBX,IAAI,WAAaW,EAAkBX,IAAI,aACpDjE,KAAKu3K,OACNv3K,KAAKs6K,OAIjB17K,EAAE0pM,EAAK3U,GAAkBn4C,EAAKs4C,GAAe57B,EAAK27B,GAAuB17B,EAAKq7B,GAAwBt1L,EAAKo1L,GAAyBtxB,EAAKuxB,GAAuBtxB,EAAKmxB,GAA4BlxB,EAAKmxB,GAA6BlxB,EAAK4xB,GAAwB3xB,EAAK4xB,GAAe3xB,EAAK4xB,GAAiB3xB,EAAK4xB,GAAkB3xB,EAAKqxB,GAAoBO,OAClVn0L,KAAK+uM,SAAWjd,IAGpB9xL,KAAKwvM,gBAET5wM,CAACw1L,IAAYnqL,GACT,GAAIjK,KAAK+uM,SAAWjd,GAGpB,OAAQ7nL,EAAM8iL,SAGV,KAvOE,GAwOF,KAvOE,GAwOE/sL,KAAKwvM,iBAIjB5wM,CAACy1L,IAAapqL,GACV,MAAMqoJ,EAAWroJ,EAAMopF,OAAOilF,cAC9Bt4K,KAAK6zL,IACDx2L,KAAK8N,IAAImnJ,EAAUtyJ,KAAK6zL,KACX,IAAbvhC,IACAtyJ,KAAK4zL,IAAoBqb,SACrBjvM,KAAKu3K,OAC4B,MAAhCv3K,KAAKwzL,KACFxzL,KAAK+uM,SAAWjd,IACpB9xL,KAAK0zL,OAGb1zL,KAAK4zL,IAAoBthC,GACzBtyJ,KAAKgK,cAAc,IAAIopF,YAAY,WAAY,CAAEC,OAAQ,CAAEilF,cAAehmB,MAE9E1zJ,CAACm8K,MACG,QAAS/6K,KAAKmU,MACuB,MAAhCnU,KAAKwzL,KACFxzL,KAAKk+G,UAAY6zE,IAChB/xL,KAAK+uM,SAAWjd,IAAuB9xL,KAAKk6K,KAEzDt7K,CAAC24K,MACG,MAAMpjK,IAAEA,GAAQnU,KAChB,QAASmU,GAAOpU,MAAMw3K,OACc,IAAhCv3K,KAAK6zL,IAEbj1L,CAAC60L,MACG,MAAMgc,EAAyBzvM,KAAKszL,IAC9Boc,EAAuB1vM,KAAKuzL,IAClCmc,EAAqBhsM,gBAAgB,YACrCgsM,EAAqBhsM,gBAAgB,eACrC+rM,EAAuB/2C,UAAUz3I,IAAI,QACrC,MAAMo6J,EAAgBr7K,KAAK62K,eAC3B72K,KAAK2zL,KAAoB,EACzB3zL,KAAKm6K,IAA0BkB,GAC/Br7K,KAAK8zL,KAAiB,EAE1Bl1L,CAAC80L,MACG1zL,KAAKwzL,IAA0B,KAC/B,MAAMic,EAAyBzvM,KAAKszL,IAC9Boc,EAAuB1vM,KAAKuzL,IAClC,GAAIkc,EAAuB/2C,UAAUq1C,SAAS,QAAS,CACnD0B,EAAuB/2C,UAAU5oI,OAAO,QACxC,MAAMurJ,EAAgBr7K,KAAK62K,eAC3B72K,KAAK2zL,KAAoB,EACzB3zL,KAAKm6K,IAA0BkB,GAG/Bo0B,EAAuBzxM,iBAAiB,gBAAiB,KACrDgjD,sBAAsB,KAClBhhD,KAAK8zL,KAAiB,EACtB,MAAMv8D,EAAOv3H,KAAK6rL,cAGdt0D,GACAA,EAAKu0D,gBAAkB9rL,MACvBA,KAAK82K,IAAmBj7H,QAI5B6zJ,EAAqB/rM,aAAa,cAAe,QACjD+rM,EAAqBC,UAAY,EACjC3vM,KAAKgK,cAAc,IAAIopF,YAAY,wBAExC,CAAEq1E,MAAM,KAGnB7pK,CAACk8K,MACG,OAAO/6K,MAAM+6K,OAAyB96K,KAAK2zL,IAE/C/0L,CAACo8K,MACG,OAAOj7K,MAAMi7K,OAAuBh7K,KAAK8zL,IAE7Cl1L,MAAO07K,MACHt6K,KAAK6zL,IAAyB,EACQ,MAAlC7zL,KAAKy6K,IAAQlhB,MAAMkC,aAAmC,MAAZz7J,KAAKmU,KAC9CnU,KAAK+6K,OAEN/6K,KAAKyzL,YAEH1zL,MAAMu6K,OAYpB,OATAuX,GAAa,CACTjsL,EAAS,CAAE9G,KAAM1B,UAClByxM,EAA0BvtM,UAAW,cAAU,GAClDuwL,GAAa,CACTjsL,EAAS,CAAE9G,KAAM1B,UAClByxM,EAA0BvtM,UAAW,cAAU,GAClDuwL,GAAa,CACTjsL,EAAS,CAAE9G,KAAM1B,UAClByxM,EAA0BvtM,UAAW,eAAW,GAC5CutM,GAqrIoGe,CA5pOxF,CAACjvC,IACpB,IAAI2nC,EACJ,MAAMuH,UAAoClvC,EACtC/hK,cACImB,SAASqJ,WACTpJ,KAAKsyI,UAAW,EAChBtyI,KAAK8vM,mBAAgBnvM,EACrBX,KAAK+vM,2BAA6B,IAClC/vM,KAAKsoM,IAAM,EAKf0H,0BACI,OAAIhwM,KAAK0hH,OACE1hH,KAAKy6K,IAAQlhB,MAAMM,eAEvB,GAEXl9B,aACI,OAAO38H,KAAKq+K,IAEhB5qC,kBACI,OAAOzzI,KAAKy6K,IAAQlhB,MAAMsC,cAE9BpoB,gBAAgB50I,GACZmB,KAAKy6K,IAAQlhB,MAAMsC,cAAgBh9J,EACnCmB,KAAK47J,IAAW0L,cAAcp7F,UAAUl+B,aAAc,EACtDhuC,KAAK06K,MAET97K,QACQoB,KAAKq+K,MAGTr+K,KAAKq+K,KAAW,EAChBr+K,KAAK47J,IAAW0L,cAAcp7F,UAAU8H,YAAa,EACrDh0E,KAAKgK,cAAc,IAAIopF,YAAY,WAEvCx0F,OACQoB,KAAKq+K,KAAYr+K,KAAKgwM,oBAAoB3mM,OAAS,IACnDrJ,KAAKq+K,KAAW,EAChBr+K,KAAK47J,IAAW0L,cAAcp7F,UAAU8H,YAAa,EAChDh0E,KAAKy6K,IAAQlhB,MAAMuC,oBACpB97J,KAAKo+K,MAETp+K,KAAKgK,cAAc,IAAIopF,YAAY,UAG3Cx0F,EAAE0pM,EAAKjqB,GAAS1D,OACZ36K,KAAKq+K,KAAW,EACZr+K,KAAKsyI,WACLtyI,KAAKo+K,MACLp+K,KAAKuzI,QAGb30I,CAACq4K,IAAS6G,EAAOjrJ,GAEb,GADA9yB,MAAMk3K,IAAS6G,EAAOjrJ,GAClB7yB,KAAKq+K,MAAar+K,KAAKg7K,MACvB,OAEJ,MAAMzhB,MAAEA,GAAUv5J,KAAKy6K,IACvBlhB,EAAM02C,gBAAgBp9K,EAhEF,KAiEpB7yB,KAAK06K,MAET97K,QAAQgG,GACJ7E,MAAMiF,QAAQJ,GACVA,EAAkBX,IAAI,aAAejE,KAAKsyI,UAC1CtyI,KAAKuzI,OAEL3uI,EAAkBX,IAAI,kBACtBjE,KAAKo+K,MAGbx/K,MAAO07K,MAMH,OADAt6K,KAAKy6K,IAAQlhB,MAAM22C,gBACZnwM,MAAMu6K,MAEjB17K,CAACw/K,MACG,MAAM7kB,MAAEA,GAAUv5J,KAAKy6K,IACvBlhB,EAAM42C,cAAcnwM,KAAK8vM,cAAe9vM,KAAK+vM,2BAtFzB,KAyFhB/vM,KAAKq+K,MACL9kB,EAAM02C,gBAAgB,GACtBjwM,KAAK06K,QAajB,OATAyD,GAAa,CACTv4K,EAAS,CAAE9G,KAAMC,WAClB8wM,EAA4BvuM,UAAW,gBAAY,GACtD68K,GAAa,CACTv4K,EAAS,CAAE9G,KAAM1B,OAAQqC,UAAW,oBACrCowM,EAA4BvuM,UAAW,qBAAiB,GAC3D68K,GAAa,CACTv4K,EAAS,CAAE9G,KAAMM,OAAQK,UAAW,kCACrCowM,EAA4BvuM,UAAW,kCAA8B,GACjEuuM,GAujOiHO,CA9E1F,CAACC,IAC/B,IAAI/H,EACJ,MA4BMgI,EAA2B9uM,OAAO,2BA4BxC,OADA8mM,EAAKgI,EAvBL,cAAsCD,EAClCzxM,cACImB,SAASqJ,WACTpJ,KAAKsoM,GAAM,KAIf1pM,oBACImB,MAAMu8K,mBAAqBv8K,MAAMu8K,oBACK,MAAlCt8K,KAAKswM,KACLtwM,KAAKswM,GA1Cc,CAAC9rB,IAI5B,GAA2B,MAAvBA,EAAS7c,YACT6c,EAAS+rB,aAAa,yBACtB,MAAO,OAIX,IAAIjqM,KAAKkqM,0BAGJ,CACD,MAAMC,EAAsB,KACxBnqM,KAAKkqM,0BAA0BhsB,EAAS7c,aAO5C,OADArhK,KAAKtI,iBAAiB,+BAAgCyyM,EAAqB,CAAEhoC,MAAM,IAC5E,KACHniK,KAAKrI,oBAAoB,+BAAgCwyM,IAGjE,OAfInqM,KAAKkqM,0BAA0BhsB,EAAS7c,YAerC,QAgBkC+oC,CAAuB1wM,OAGhEpB,uBACImB,MAAM08K,sBAAwB18K,MAAM08K,uBAGE,MAAlCz8K,KAAKswM,KACLtwM,KAAKswM,KACLtwM,KAAKswM,GAA4B,SAyB0FK,CAA0Bz1B,YACrK01B,eAAeC,OAAO,eAAgBlwC"}